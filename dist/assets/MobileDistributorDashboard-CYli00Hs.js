const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/DistributorHome-DwEvDF8B.js","assets/index-DRC3F7i0.js","assets/vendor-Ckhrjn13.js","assets/router-BPBaD_i0.js","assets/firebase-DWi1MSv1.js","assets/index.esm-Bux_mLJ0.js","assets/index-BwRLlX-x.css","assets/useTranslation-C_4YkXWs.js","assets/proxy-BgUy8BPw.js","assets/index-DSciU07p.js","assets/DistributorInventory-B0tL_uSL.js","assets/MagicScanDisplay-BEI3JqVX.js","assets/pricing-SUVGnFgL.js","assets/logInventoryChange-kGfLyhaN.js","assets/AdvancedBrandInputForm-SuxBeOfL.js","assets/RestockOrderHistory-BifXGS1-.js","assets/index-aK8Jn4kw.js","assets/pdf-DQxUCnop.js","assets/WhatsAppHub-DV6bcXXz.js","assets/whatsappService-BELSGllU.js","assets/whatsappConfig-B767RKqS.js","assets/index-CprmGC-M.js","assets/index-CNZ3HuWf.js","assets/WhatsAppConnection-C8P9Ymrj.js","assets/RetailerPanel-BMLWNr8K.js","assets/proformaDefaults-BAnk_cr8.js","assets/AddRetailerModal-ksR6C5rK.js","assets/esm-LCaBFwtY.js","assets/index-CbpqHhv-.js","assets/DistributorProfileSettings-CpW5Xf2_.js","assets/LanguageSwitcher-BHE27wEu.js","assets/DistributorAnalytics-BUOuPkem.js","assets/dayjs.min-BE7Gq_ss.js","assets/index-o1kP7bB5.js","assets/DistributorInvoices-CKYEQ6f-.js","assets/FileSaver.min-DVuNBBJs.js","assets/bidi-DLACMwmw.js","assets/DistributorInvoicePdf-o0mROIQ5.js","assets/orderStatus-BwkCpksU.js","assets/DistributorManualBilling-CsmBdEeo.js","assets/BillingSettings-DR-owPbP.js","assets/CustomerForm-oVhzeonX.js","assets/DistributorManualInvoicePdf-B4FHrTjE.js","assets/DispatchTracker-CtHmJ_ew.js","assets/calcProforma-Ep9qGXtN.js","assets/stockManagement-G1X58IbZ.js","assets/index-BrhajXHK.js","assets/extends-CF3RwP-h.js","assets/DistributorAIForecast-CSNKs6rE.js","assets/aiForecastingEngine-DtSDBlba.js","assets/DistributorOrderRequestForm-0fxn6v9l.js","assets/ProductOwnerConnection-Bgh6T1fG.js","assets/OrderDetailModal-BXc_IbAw.js","assets/DistributorViewEmployees-QrD6ByVM.js","assets/indiaLocationAPI-CppZbdop.js"])))=>i.map(i=>d[i]);
import{l as M,d as c,j as e,_ as i}from"./index-DRC3F7i0.js";import{r as s,u as H}from"./router-BPBaD_i0.js";import{c as p,p as E,q as y,w as z,e as V,d as q,g as k}from"./firebase-DWi1MSv1.js";import{M as W,a as G}from"./MobileHeader-DBovf1Yi.js";import{G as R,aE as S,r as U,T as $,e as Y,aF as Q,I as J,a2 as K,aG as X,k as Z,al as ee,h as te,ae as se}from"./index-CprmGC-M.js";import{H as ae}from"./index-CNZ3HuWf.js";import{Haptics as ie,ImpactStyle as oe}from"./index-CjDO0J1E.js";import{m as x}from"./proxy-BgUy8BPw.js";import{A as ne}from"./index-DSciU07p.js";import"./vendor-Ckhrjn13.js";import"./index.esm-Bux_mLJ0.js";function re(t){return R({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M18 17H6v-2h12v2zm0-4H6v-2h12v2zm0-4H6V7h12v2zM3 22l1.5-1.5L6 22l1.5-1.5L9 22l1.5-1.5L12 22l1.5-1.5L15 22l1.5-1.5L18 22l1.5-1.5L21 22V2l-1.5 1.5L18 2l-1.5 1.5L15 2l-1.5 1.5L12 2l-1.5 1.5L9 2 7.5 3.5 6 2 4.5 3.5 3 2v20z"},child:[]}]})(t)}function le(t){return R({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M20 2H4c-1 0-2 .9-2 2v3.01c0 .72.43 1.34 1 1.69V20c0 1.1 1.1 2 2 2h14c.9 0 2-.9 2-2V8.7c.57-.35 1-.97 1-1.69V4c0-1.1-1-2-2-2zm-5 12H9v-2h6v2zm5-7H4V4l16-.02V7z"},child:[]}]})(t)}function ce(t){return R({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M20 8h-3V4H3c-1.1 0-2 .9-2 2v11h2c0 1.66 1.34 3 3 3s3-1.34 3-3h6c0 1.66 1.34 3 3 3s3-1.34 3-3h2v-5l-3-4zM6 18.5c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5zm13.5-9 1.96 2.5H17V9.5h2.5zm-1.5 9c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5z"},child:[]}]})(t)}const O=async()=>{try{await ie.impact({style:oe.Light})}catch{}},de=({feature:t,onPress:r,delay:o=0})=>{const d=t.icon;return e.jsxs(x.button,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:o*.05,duration:.3},whileTap:{scale:.95},onClick:async()=>{await O(),r(t.id)},className:`relative flex flex-col items-center justify-center p-4 rounded-2xl 
        ${t.gradient} shadow-lg shadow-black/20 overflow-hidden
        active:shadow-inner transition-all duration-200`,style:{aspectRatio:"1/1"},children:[e.jsx("div",{className:"absolute inset-0 opacity-20",children:e.jsx("div",{className:"absolute -right-4 -bottom-4 w-20 h-20 rounded-full bg-white/20"})}),t.badge&&e.jsx("span",{className:"absolute top-2 right-2 px-2 py-0.5 text-[10px] font-bold bg-white/20 rounded-full text-white",children:t.badge}),t.count>0&&e.jsx("span",{className:"absolute top-2 right-2 min-w-[20px] h-5 px-1.5 text-[11px] font-bold bg-red-500 rounded-full text-white flex items-center justify-center",children:t.count>99?"99+":t.count}),e.jsx("div",{className:"relative z-10 mb-2",children:e.jsx(d,{className:"text-3xl text-white drop-shadow-lg"})}),e.jsx("span",{className:"relative z-10 text-xs font-semibold text-white text-center leading-tight",children:t.label})]})},_=({label:t,value:r,icon:o,color:d})=>e.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-xl bg-white/5 border border-white/10",children:[e.jsx("div",{className:`w-10 h-10 rounded-lg ${d} flex items-center justify-center`,children:e.jsx(o,{className:"text-white text-lg"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-lg font-bold text-white",children:r}),e.jsx("p",{className:"text-xs text-gray-400",children:t})]})]}),ue=({onNavigate:t,userData:r,stats:o})=>{const[d,f]=s.useState(""),[N,B]=s.useState(0),[T,D]=s.useState(0),u=M.currentUser?.uid;s.useEffect(()=>{const n=new Date().getHours();n<12?f("Good Morning"):n<17?f("Good Afternoon"):f("Good Evening")},[]),s.useEffect(()=>{if(!u)return;const n=p(c,"businesses",u,"whatsappInbox"),a=E(y(n),g=>{let j=0;g.docs.forEach(v=>{v.data().read||j++}),B(j)});return()=>a()},[u]),s.useEffect(()=>{if(!u)return;const n=p(c,"businesses",u,"retailerRequests"),a=E(y(n,z("status","==","pending")),g=>D(g.size));return()=>a()},[u]);const w=[{id:"retailerRequests",label:"Retailers",icon:U,gradient:"bg-gradient-to-br from-blue-500 to-blue-600",count:T},{id:"inventory",label:"Inventory",icon:$,gradient:"bg-gradient-to-br from-amber-500 to-orange-600"},{id:"whatsapp",label:"WhatsApp",icon:Y,gradient:"bg-gradient-to-br from-green-500 to-green-600",count:N},{id:"aiForecast",label:"AI Forecast",icon:Q,gradient:"bg-gradient-to-br from-purple-500 to-purple-600",badge:"NEW"},{id:"dispatch",label:"Dispatch",icon:J,gradient:"bg-gradient-to-br from-cyan-500 to-cyan-600"},{id:"manualBilling",label:"Billing",icon:S,gradient:"bg-gradient-to-br from-emerald-500 to-emerald-600"},{id:"invoices",label:"Invoices",icon:K,gradient:"bg-gradient-to-br from-rose-500 to-rose-600"},{id:"productOwners",label:"Suppliers",icon:X,gradient:"bg-gradient-to-br from-indigo-500 to-indigo-600"},{id:"analytics",label:"Analytics",icon:Z,gradient:"bg-gradient-to-br from-pink-500 to-pink-600"},{id:"employees",label:"Employees",icon:ee,gradient:"bg-gradient-to-br from-teal-500 to-teal-600"},{id:"profile",label:"Settings",icon:te,gradient:"bg-gradient-to-br from-slate-500 to-slate-600"}];return e.jsxs("div",{className:"px-4 py-2 pb-6",children:[e.jsxs(x.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"mb-6",children:[e.jsxs("p",{className:"text-gray-400 text-sm",children:[d," ðŸ‘‹"]}),e.jsx("h1",{className:"text-2xl font-bold text-white",children:r?.ownerName?.split(" ")[0]||"Welcome"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:r?.businessName||"Your Business"})]}),e.jsxs(x.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.1},className:"grid grid-cols-2 gap-3 mb-6",children:[e.jsx(_,{label:"Total Orders",value:o?.totalOrders||0,icon:re,color:"bg-blue-500"}),e.jsx(_,{label:"Pending",value:o?.pendingOrders||0,icon:ce,color:"bg-amber-500"}),e.jsx(_,{label:"Revenue",value:`â‚¹${(o?.revenue||0).toLocaleString("en-IN")}`,icon:S,color:"bg-emerald-500"}),e.jsx(_,{label:"Products",value:o?.products||0,icon:le,color:"bg-purple-500"})]}),e.jsxs(x.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-lg font-semibold text-white",children:"Features"}),e.jsxs("span",{className:"text-xs text-gray-500",children:[w.length," modules"]})]}),e.jsx("div",{className:"grid grid-cols-3 gap-3",children:w.map((n,a)=>e.jsx(de,{feature:n,onPress:t,delay:a},n.id))}),e.jsx(x.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},className:"mt-6 p-4 rounded-2xl bg-gradient-to-r from-emerald-500/20 to-cyan-500/20 border border-emerald-500/30",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-emerald-400 to-cyan-500 flex items-center justify-center shadow-lg",children:e.jsx(ae,{className:"text-white text-2xl"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-white",children:"Quick Invoice"}),e.jsx("p",{className:"text-xs text-gray-400",children:"Create invoice in seconds"})]}),e.jsx("button",{onClick:()=>{O(),t("manualBilling")},className:"w-10 h-10 rounded-full bg-white/10 flex items-center justify-center",children:e.jsx(se,{className:"text-emerald-400"})})]})})]})},me=s.lazy(()=>i(()=>import("./DistributorHome-DwEvDF8B.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9]))),he=s.lazy(()=>i(()=>import("./DistributorInventory-B0tL_uSL.js"),__vite__mapDeps([10,1,2,3,4,5,6,11,12,13,14,15,16,17,8]))),be=s.lazy(()=>i(()=>import("./WhatsAppHub-DV6bcXXz.js"),__vite__mapDeps([18,1,2,3,4,5,6,19,20,21,8,9,22,23]))),pe=s.lazy(()=>i(()=>import("./RetailerPanel-BMLWNr8K.js"),__vite__mapDeps([24,1,2,3,4,5,6,25,8,26,9,27,28]))),ge=s.lazy(()=>i(()=>import("./DistributorProfileSettings-CpW5Xf2_.js"),__vite__mapDeps([29,1,2,3,4,5,6,30,7,8,9,19,20,23,21]))),xe=s.lazy(()=>i(()=>import("./DistributorAnalytics-BUOuPkem.js"),__vite__mapDeps([31,1,2,3,4,5,6,32,33,8,7,9]))),fe=s.lazy(()=>i(()=>import("./DistributorInvoices-CKYEQ6f-.js"),__vite__mapDeps([34,1,2,3,4,5,6,12,35,28,36,37,21,38]))),ve=s.lazy(()=>i(()=>import("./DistributorManualBilling-CsmBdEeo.js"),__vite__mapDeps([39,1,2,3,4,5,6,40,41,35,28,36,42,12]))),ye=s.lazy(()=>i(()=>import("./DispatchTracker-CtHmJ_ew.js").then(t=>t.a),__vite__mapDeps([43,1,2,3,4,5,6,17,44,38,45,12,46,21,8,47,9,19,20,27]))),we=s.lazy(()=>i(()=>import("./DistributorAIForecast-CSNKs6rE.js"),__vite__mapDeps([48,1,2,3,4,5,6,21,49,32,50,38,8,9]))),je=s.lazy(()=>i(()=>import("./ProductOwnerConnection-Bgh6T1fG.js"),__vite__mapDeps([51,1,2,3,4,5,6,21,52,38,44,12,8,9,50]))),_e=s.lazy(()=>i(()=>import("./DistributorViewEmployees-QrD6ByVM.js"),__vite__mapDeps([53,1,2,3,4,5,6,46,21,9,8,54]))),Ee=()=>e.jsx("div",{className:"flex items-center justify-center h-[60vh]",children:e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-full border-4 border-emerald-500 border-t-transparent animate-spin"}),e.jsx("span",{className:"text-gray-400 text-sm",children:"Loading..."})]})}),F={home:{title:"FLYP",subtitle:"Distributor Dashboard",showBack:!1,isMainTab:!0},dashboard:{title:"Dashboard",subtitle:"Business overview",showBack:!0,isMainTab:!1},retailerRequests:{title:"Retailers",subtitle:"Manage connections",showBack:!1,isMainTab:!0},inventory:{title:"Inventory",subtitle:"Manage products",showBack:!1,isMainTab:!0},aiForecast:{title:"AI Forecast",subtitle:"Smart predictions",showBack:!0,isMainTab:!1},whatsapp:{title:"WhatsApp",subtitle:"Business messaging",showBack:!1,isMainTab:!0},dispatch:{title:"Dispatch",subtitle:"Track shipments",showBack:!0,isMainTab:!1},manualBilling:{title:"Create Invoice",subtitle:"Manual billing",showBack:!0,isMainTab:!1},invoices:{title:"Invoices",subtitle:"Billing history",showBack:!0,isMainTab:!1},productOwners:{title:"Suppliers",subtitle:"Product owners",showBack:!0,isMainTab:!1},analytics:{title:"Analytics",subtitle:"Business insights",showBack:!0,isMainTab:!1},employees:{title:"Employees",subtitle:"Team management",showBack:!0,isMainTab:!1},profile:{title:"Settings",subtitle:"Account settings",showBack:!1,isMainTab:!0}},Se=()=>{H();const[t,r]=s.useState("home"),[o,d]=s.useState(null),[f,N]=s.useState(0),[B,T]=s.useState(0),[D,u]=s.useState(null),[w,n]=s.useState({totalOrders:0,pendingOrders:0,revenue:0,products:0}),a=M.currentUser?.uid;s.useEffect(()=>{const m=document.body.style.overflow,l=document.documentElement.style.overflow,h=document.body.style.backgroundColor,b=document.documentElement.style.backgroundColor;return document.body.style.overflow="hidden",document.documentElement.style.overflow="hidden",document.body.style.height="100%",document.documentElement.style.height="100%",document.body.style.backgroundColor="#0B0F14",document.documentElement.style.backgroundColor="#0B0F14",()=>{document.body.style.overflow=m,document.documentElement.style.overflow=l,document.body.style.height="",document.documentElement.style.height="",document.body.style.backgroundColor=h,document.documentElement.style.backgroundColor=b}},[]),s.useEffect(()=>{if(!a)return;(async()=>{try{const l=await V(q(c,"businesses",a));l.exists()&&u(l.data());const[h,b,I]=await Promise.all([k(p(c,"businesses",a,"products")),k(p(c,"businesses",a,"invoices")),k(y(p(c,"businesses",a,"dispatches"),z("status","in",["pending","in_transit"])))]);let A=0;b.docs.forEach(C=>{const L=C.data();L.paidAmount&&(A+=L.paidAmount)}),n({totalOrders:b.size,pendingOrders:I.size,revenue:A,products:h.size})}catch(l){console.error("Error fetching business data:",l)}})()},[a]),s.useEffect(()=>{if(!a)return;const m=p(c,"businesses",a,"whatsappInbox"),l=E(y(m),h=>{let b=0;h.docs.forEach(I=>{I.data().read||b++}),N(b)});return()=>l()},[a]),s.useEffect(()=>{if(!a)return;const m=p(c,"businesses",a,"retailerRequests"),l=E(y(m,z("status","==","pending")),h=>T(h.size));return()=>l()},[a]);const g=m=>{d(t),r(m)},j=()=>{o?(r(o),d(null)):r("home")},v=F[t]||F.home,P=()=>e.jsx(s.Suspense,{fallback:e.jsx(Ee,{}),children:e.jsx(ne,{mode:"wait",children:e.jsxs(x.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.2},className:"min-h-full",children:[t==="home"&&e.jsx(ue,{onNavigate:g,userData:D,stats:w}),t==="dashboard"&&e.jsx(me,{}),t==="retailerRequests"&&e.jsx(pe,{}),t==="inventory"&&e.jsx(he,{}),t==="aiForecast"&&e.jsx(we,{}),t==="whatsapp"&&e.jsx("div",{className:"h-[calc(100vh-140px)] -mx-3",children:e.jsx(be,{})}),t==="dispatch"&&e.jsx(ye,{db:c,auth:M}),t==="manualBilling"&&e.jsx(ve,{}),t==="invoices"&&e.jsx(fe,{}),t==="productOwners"&&e.jsx(je,{}),t==="analytics"&&a&&e.jsx(xe,{distributorId:a}),t==="employees"&&e.jsx(_e,{}),t==="profile"&&e.jsx(ge,{})]},t)})});return e.jsxs("div",{className:"fixed inset-0 z-10 h-[100dvh] max-h-[100dvh] bg-gradient-to-br from-[#0B0F14] via-[#0D1117] to-[#0B0F14] flex flex-col overflow-hidden",style:{height:"100dvh",maxHeight:"100dvh"},children:[e.jsx(W,{title:v.title,subtitle:v.subtitle,showBack:v.showBack,onBackPress:j,notificationCount:B,showSearch:t==="inventory"}),e.jsx("main",{className:"flex-1 min-h-0 overflow-y-auto overflow-x-hidden overscroll-contain px-3",style:{paddingTop:"calc(62px + max(env(safe-area-inset-top) - 12px, 2px))",paddingBottom:"calc(64px + env(safe-area-inset-bottom))",WebkitOverflowScrolling:"touch"},children:P()}),e.jsx(G,{activeTab:["home","retailerRequests","inventory","whatsapp","profile"].includes(t)?t:"home",onTabChange:g,userRole:"distributor",unreadCount:f})]})};export{Se as default};
