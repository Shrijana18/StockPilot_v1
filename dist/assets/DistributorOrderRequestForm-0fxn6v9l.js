import{l as v,d as h,y as c,j as e}from"./index-DRC3F7i0.js";import{r as l}from"./router-BPBaD_i0.js";import{c as M,p as te,d as g,e as E,T as we,s as z,l as re}from"./firebase-DWi1MSv1.js";import{C as se,T as Q,X as N,R as ve,p as Ne,S as je}from"./index-CprmGC-M.js";import{O as Pe}from"./orderStatus-BwkCpksU.js";import{m as _}from"./proxy-BgUy8BPw.js";import{A as De}from"./index-DSciU07p.js";const ke=({productOwner:o,onClose:O,onSuccess:H,initialProduct:p})=>{const oe=()=>p?[{productName:p.productName||"",quantity:p.quantity||1,unitPrice:p.unitPrice||0,notes:p.notes||"",productId:p.productId||null,sku:p.sku||null}]:[{productName:"",quantity:1,unitPrice:0,notes:"",productId:null,sku:null}],[m,j]=l.useState(oe()),[f,ne]=l.useState("COD"),[I,ie]=l.useState(0),[q,ae]=l.useState(0),[K,le]=l.useState("normal"),[V,de]=l.useState(""),[Y,W]=l.useState(!1),[ce,A]=l.useState([]),[ue,U]=l.useState([]),[me,w]=l.useState(!1),[$,S]=l.useState(null),[F,R]=l.useState(""),[T,P]=l.useState(null),[u,C]=l.useState(null),X=t=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR"}).format(Number(t||0));l.useEffect(()=>{o&&(async()=>{const r=o?.productOwnerId||o?.id;if(!r){console.error("No productOwnerId found in productOwner prop:",o),o&&C(o);return}try{console.log("Fetching Product Owner info for ID:",r);const s=g(h,"businesses",r),n=await E(s);if(n.exists()){const i=n.data();console.log("Fetched Product Owner data:",i),C({...o,...i,productOwnerId:r,id:r})}else console.warn("Product Owner document not found, using prop data"),C({...o,productOwnerId:r,id:r})}catch(s){console.error("Error fetching product owner info:",s),C({...o,productOwnerId:r,id:r})}})()},[o]),l.useEffect(()=>{const t=o?.productOwnerId||o?.id;if(!t){console.error("[DistributorOrderRequestForm] No productOwnerId found for inventory fetch:",o),A([]);return}console.log("[DistributorOrderRequestForm] Fetching inventory products for Product Owner ID:",t),console.log("[DistributorOrderRequestForm] Current user:",v.currentUser?.uid),console.log("[DistributorOrderRequestForm] Product Owner object:",o);const r=M(h,`businesses/${t}/products`),s=te(r,n=>{console.log(`[DistributorOrderRequestForm] Snapshot received: ${n.docs.length} products`);const i=n.docs.map(d=>({id:d.id,...d.data()}));console.log(`[DistributorOrderRequestForm] Found ${i.length} products in Product Owner inventory`),console.log("[DistributorOrderRequestForm] Sample products:",i.slice(0,2)),A(i)},n=>{console.error("[DistributorOrderRequestForm] Error fetching inventory products:",n),console.error("[DistributorOrderRequestForm] Error details:",{code:n.code,message:n.message,productOwnerId:t,path:`businesses/${t}/products`,currentUser:v.currentUser?.uid,errorName:n.name}),n.code==="permission-denied"?c.error("Permission denied: Unable to access product owner inventory. Please ensure you are connected to this product owner."):c.error(`Failed to load inventory: ${n.message||"Unknown error"}`),A([])});return()=>{console.log("[DistributorOrderRequestForm] Cleaning up inventory subscription"),s()}},[o]),l.useEffect(()=>{const t=v.currentUser?.uid;if(!t){U([]);return}console.log("Fetching distributor inventory products for Distributor ID:",t);const r=M(h,`businesses/${t}/products`),s=te(r,n=>{const i=n.docs.map(d=>({id:d.id,...d.data()}));console.log(`Found ${i.length} products in Distributor inventory`),U(i)},n=>{console.error("Error fetching distributor inventory products:",n),U([])});return()=>s()},[]);const be=t=>{const r=t.toLowerCase();return r==="cod"||r==="cash_on_delivery"?{code:"COD",label:"Cash On Delivery",isCredit:!1,creditDays:0,advancePaid:0,splitPayment:null}:r==="credit"||r==="credit_cycle"?{code:"CREDIT",label:"Credit Cycle",isCredit:!0,creditDays:I||15,advancePaid:0,splitPayment:null}:r==="advance"?{code:"ADVANCE",label:"Advance Payment",isCredit:!1,creditDays:0,advancePaid:q||0,splitPayment:null}:{code:t,label:t,isCredit:!1,creditDays:0,advancePaid:0,splitPayment:null}},L=()=>m.reduce((t,r)=>{const s=Number(r.quantity)||0,n=Number(r.unitPrice)||0;return t+s*n},0),he=()=>{j([...m,{productName:"",quantity:1,unitPrice:0,notes:""}])},xe=t=>{m.length>1&&j(m.filter((r,s)=>s!==t))},B=(t,r,s)=>{const n=[...m];if(n[t]={...n[t],[r]:s},r==="quantity"||r==="unitPrice"){const i=Number(n[t].quantity)||0,d=Number(n[t].unitPrice)||0;n[t].subtotal=i*d}j(n)},G=t=>{const r=F.toLowerCase();return t.filter(s=>{const n=(s.name||s.productName||"").toLowerCase(),i=(s.sku||"").toLowerCase(),d=(s.brand||"").toLowerCase(),b=(s.category||"").toLowerCase();return n.includes(r)||i.includes(r)||d.includes(r)||b.includes(r)})},J=G($==="distributor"?ue:ce),pe=t=>{const r=t.sellingPrice||t.mrp||t.costPrice||0,s={productName:t.name||t.productName||"",quantity:1,unitPrice:parseFloat(r),notes:t.description||"",productId:t.id,sku:t.sku||"",subtotal:parseFloat(r)};j([...m,s]),w(!1),R(""),c.success(`${t.name||t.productName} added to order`)},Z=(t,r="productOwner")=>{P(t),S(r),w(!0)},ye=t=>{const r=t.sellingPrice||t.mrp||t.costPrice||0,s=[...m],n=s[T].quantity||1;s[T]={productName:t.name||t.productName||"",quantity:n,unitPrice:parseFloat(r),notes:t.description||"",productId:t.id,sku:t.sku||"",subtotal:n*parseFloat(r)},j(s),w(!1),P(null),R(""),c.success(`${t.name||t.productName} added to order`)},ge=async t=>{t.preventDefault();const r=o?.productOwnerId||o?.id;if(!o||!r){console.error("Product Owner object:",o),c.error("Product Owner information missing");return}const s=v.currentUser?.uid;if(!s){c.error("Please log in again");return}console.log("[DistributorOrderRequestForm] Verifying connection...");try{const i=g(h,`businesses/${s}/connectedProductOwners/${r}`),d=await E(i);if(!d.exists()){console.error("[DistributorOrderRequestForm] Connection not found!"),c.error("You are not connected to this product owner. Please connect first.");return}console.log("[DistributorOrderRequestForm] Connection verified:",d.data())}catch(i){console.error("[DistributorOrderRequestForm] Error verifying connection:",i)}const n=m.filter(i=>i.productName.trim()&&i.quantity>0&&i.unitPrice>=0);if(n.length===0){c.error("Please add at least one valid item");return}if(f.toLowerCase()==="credit"&&(!I||I<0)){c.error("Please specify credit days");return}if(f.toLowerCase()==="advance"&&(!q||q<0)){c.error("Please specify advance amount");return}W(!0);try{console.log("[DistributorOrderRequestForm] Starting order submission..."),console.log("[DistributorOrderRequestForm] Distributor ID:",s),console.log("[DistributorOrderRequestForm] Product Owner ID:",r),console.log("[DistributorOrderRequestForm] Fetching distributor business data...");const i=g(h,"businesses",s),d=await E(i),b=d.exists()?d.data():{};console.log("[DistributorOrderRequestForm] Distributor business data:",b),console.log("[DistributorOrderRequestForm] Fetching product owner business data...");const fe=g(h,"businesses",r);let x={};try{const a=await E(fe);x=a.exists()?a.data():{},console.log("[DistributorOrderRequestForm] Product Owner business data:",x)}catch(a){console.warn("[DistributorOrderRequestForm] Could not fetch product owner business data:",a),x={businessName:o?.businessName||o?.productOwnerName||o?.ownerName,email:o?.email||o?.productOwnerEmail,phone:o?.phone||o?.productOwnerPhone},console.log("[DistributorOrderRequestForm] Using fallback product owner data:",x)}const ee=L(),D=g(M(h,`businesses/${r}/distributorOrderRequests`)).id,y=be(f),k={orderId:D,distributorId:s,productOwnerId:r,createdBy:"distributor",creatorUid:s,items:n.map(a=>({productName:a.productName.trim(),quantity:Number(a.quantity),unitPrice:Number(a.unitPrice),subtotal:Number(a.quantity)*Number(a.unitPrice),notes:a.notes?.trim()||""})),itemsSubTotal:ee,grandTotal:ee,paymentMode:y.code,paymentModeLabel:y.label,paymentNormalized:y,creditDays:y.creditDays,advancePaid:y.advancePaid,paymentFlags:{isCredit:!!y.isCredit,isAdvance:!!y.advancePaid>0},priority:K||"normal",notes:V.trim()||"",status:"REQUESTED",statusCode:Pe.REQUESTED,distributorName:b.businessName||b.ownerName||"Distributor",distributorEmail:b.email||v.currentUser?.email||"",distributorPhone:b.phone||v.currentUser?.phoneNumber||"",productOwnerName:x.businessName||x.ownerName||o.businessName||"Product Owner",productOwnerEmail:x.email||o.email||"",productOwnerPhone:x.phone||o.phone||"",createdAt:z(),timestamp:z(),statusTimestamps:{requestedAt:z()},statusHistory:[{status:"REQUESTED",updatedAt:we.now(),updatedBy:s,updatedByName:b.businessName||b.ownerName||"Distributor",notes:"Order requested by distributor"}]};console.log("[DistributorOrderRequestForm] Order payload prepared:",{orderId:D,distributorId:s,productOwnerId:r,itemsCount:k.items.length,totalAmount:k.grandTotal}),console.log("[DistributorOrderRequestForm] Saving to product owner's distributorOrderRequests...");try{await re(g(h,`businesses/${r}/distributorOrderRequests/${D}`),k),console.log("[DistributorOrderRequestForm] Successfully saved to product owner's collection")}catch(a){throw console.error("[DistributorOrderRequestForm] Error saving to product owner collection:",a),console.error("[DistributorOrderRequestForm] Error details:",{code:a.code,message:a.message,path:`businesses/${r}/distributorOrderRequests/${D}`}),a}console.log("[DistributorOrderRequestForm] Saving to distributor's sentOrdersToProductOwners...");try{await re(g(h,`businesses/${s}/sentOrdersToProductOwners/${D}`),{...k}),console.log("[DistributorOrderRequestForm] Successfully saved to distributor's collection")}catch(a){console.error("[DistributorOrderRequestForm] Error saving to distributor collection:",a),console.warn("[DistributorOrderRequestForm] Continuing despite mirror save error")}console.log("[DistributorOrderRequestForm] Order request sent successfully!"),c.success("Order request sent successfully!"),H&&H(),O&&O()}catch(i){console.error("[DistributorOrderRequestForm] Error sending order request:",i),console.error("[DistributorOrderRequestForm] Error details:",{code:i.code,message:i.message,name:i.name,distributorId:s,productOwnerId:r}),i.code==="permission-denied"?c.error("Permission denied: Unable to send order request. Please ensure you are connected to this product owner."):i.code==="unavailable"?c.error("Service temporarily unavailable. Please check your connection and try again."):c.error(`Failed to send order request: ${i.message||"Unknown error"}`)}finally{W(!1)}};return e.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsxs(_.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"bg-gray-900 border border-white/10 rounded-2xl p-6 w-full max-w-4xl max-h-[90vh] overflow-y-auto custom-scrollbar",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-white",children:"Send Order Request to Product Owner"}),e.jsx("button",{onClick:O,className:"text-white/70 hover:text-white transition",children:e.jsx(se,{size:24})})]}),e.jsxs("form",{onSubmit:ge,className:"space-y-6",children:[e.jsxs("div",{className:"bg-gradient-to-r from-blue-500/10 to-emerald-500/10 border border-blue-400/30 rounded-xl p-5",children:[e.jsxs("h3",{className:"text-lg font-semibold text-white mb-3 flex items-center gap-2",children:[e.jsx(Q,{})," Product Owner Information"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-white/50",children:"Business Name:"}),e.jsx("p",{className:"text-white font-medium",children:u?.businessName||u?.productOwnerName||o?.businessName||o?.productOwnerName||o?.ownerName||"N/A"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-white/50",children:"Email:"}),e.jsx("p",{className:"text-white",children:u?.email||u?.productOwnerEmail||o?.email||o?.productOwnerEmail||"N/A"})]}),(u?.phone||o?.phone)&&e.jsxs("div",{children:[e.jsx("span",{className:"text-white/50",children:"Phone:"}),e.jsx("p",{className:"text-white",children:u?.phone||u?.productOwnerPhone||o?.phone||o?.productOwnerPhone||"N/A"})]}),(u?.productOwnerId||o?.productOwnerId||u?.id||o?.id)&&e.jsxs("div",{children:[e.jsx("span",{className:"text-white/50",children:"FLYP ID:"}),e.jsxs("p",{className:"text-emerald-400 font-mono text-xs",children:[(u?.productOwnerId||o?.productOwnerId||u?.id||o?.id||"").slice(0,12),"..."]})]})]})]}),e.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-xl p-5",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-white flex items-center gap-2",children:[e.jsx(Q,{})," Order Items"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{type:"button",onClick:()=>{P(null),S("productOwner"),w(!0)},className:"px-4 py-2 bg-blue-500 hover:bg-blue-600 rounded-lg text-white text-sm font-medium flex items-center gap-2 transition",title:"Select from Product Owner's inventory",children:[e.jsx(N,{})," Select from Product Owner Inventory"]}),e.jsxs("button",{type:"button",onClick:()=>{P(null),S("distributor"),w(!0)},className:"px-4 py-2 bg-purple-500 hover:bg-purple-600 rounded-lg text-white text-sm font-medium flex items-center gap-2 transition",title:"Select from your own inventory",children:[e.jsx(N,{})," Select from My Inventory"]}),e.jsxs("button",{type:"button",onClick:he,className:"px-4 py-2 bg-emerald-500 hover:bg-emerald-600 rounded-lg text-white text-sm font-medium flex items-center gap-2 transition",children:[e.jsx(ve,{})," Add Manual Item"]})]})]}),e.jsx("div",{className:"space-y-3",children:m.map((t,r)=>e.jsx("div",{className:"p-3 bg-white/5 rounded-lg border border-white/10 hover:border-emerald-400/30 transition",children:e.jsx("div",{className:"flex items-start justify-between mb-2",children:e.jsxs("div",{className:"flex-1 grid grid-cols-12 gap-3 items-start",children:[e.jsxs("div",{className:"col-span-5",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"text",placeholder:"Product Name",value:t.productName,onChange:s=>B(r,"productName",s.target.value),className:"flex-1 px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/50 focus:outline-none focus:border-emerald-400",required:!0}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx("button",{type:"button",onClick:()=>Z(r,"productOwner"),className:"px-2 py-2 bg-blue-500/20 hover:bg-blue-500/30 border border-blue-400/30 rounded-lg text-blue-300 text-xs transition",title:"Select from Product Owner Inventory",children:e.jsx(N,{})}),e.jsx("button",{type:"button",onClick:()=>Z(r,"distributor"),className:"px-2 py-2 bg-purple-500/20 hover:bg-purple-500/30 border border-purple-400/30 rounded-lg text-purple-300 text-xs transition",title:"Select from My Inventory",children:e.jsx(N,{})})]})]}),t.productId&&e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsxs("span",{className:"text-xs px-2 py-0.5 bg-emerald-500/20 text-emerald-300 rounded border border-emerald-400/30 flex items-center gap-1",children:[e.jsx(Ne,{className:"text-xs"})," From Inventory"]}),t.sku&&e.jsxs("span",{className:"text-xs text-white/50",children:["SKU: ",t.sku]})]})]}),e.jsx("div",{className:"col-span-2",children:e.jsx("input",{type:"number",placeholder:"Qty",value:t.quantity,onChange:s=>B(r,"quantity",s.target.value),min:"1",className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/50 focus:outline-none focus:border-emerald-400",required:!0})}),e.jsx("div",{className:"col-span-3",children:e.jsx("input",{type:"number",placeholder:"Unit Price",value:t.unitPrice,onChange:s=>B(r,"unitPrice",s.target.value),min:"0",step:"0.01",className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/50 focus:outline-none focus:border-emerald-400",required:!0})}),e.jsx("div",{className:"col-span-1 flex items-center justify-center",children:e.jsx("span",{className:"text-emerald-400 font-semibold",children:X((Number(t.quantity)||0)*(Number(t.unitPrice)||0))})}),e.jsx("div",{className:"col-span-1",children:m.length>1&&e.jsx("button",{type:"button",onClick:()=>xe(r),className:"w-full p-2 bg-red-500/20 hover:bg-red-500/30 border border-red-400/30 rounded-lg text-red-300 transition",title:"Remove Item",children:e.jsx(je,{})})})]})})},r))}),e.jsx("div",{className:"mt-4 pt-4 border-t border-white/10 flex justify-end",children:e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-white/70 text-sm",children:"Subtotal:"}),e.jsxs("p",{className:"text-2xl font-bold text-emerald-400",children:["₹",L().toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})]})]})})]}),e.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-xl p-5",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Payment Information"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-white/70 text-sm mb-2",children:"Payment Mode"}),e.jsxs("select",{value:f,onChange:t=>ne(t.target.value),className:"w-full px-4 py-2 bg-white/10 border border-white/20 rounded-lg text-white focus:outline-none focus:border-emerald-400",children:[e.jsx("option",{value:"COD",children:"Cash On Delivery (COD)"}),e.jsx("option",{value:"CREDIT",children:"Credit Cycle"}),e.jsx("option",{value:"ADVANCE",children:"Advance Payment"})]})]}),f.toLowerCase()==="credit"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-white/70 text-sm mb-2",children:"Credit Days"}),e.jsx("input",{type:"number",value:I,onChange:t=>ie(Number(t.target.value)),min:"1",className:"w-full px-4 py-2 bg-white/10 border border-white/20 rounded-lg text-white focus:outline-none focus:border-emerald-400",required:!0})]}),f.toLowerCase()==="advance"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-white/70 text-sm mb-2",children:"Advance Amount (₹)"}),e.jsx("input",{type:"number",value:q,onChange:t=>ae(Number(t.target.value)),min:"0",step:"0.01",max:L(),className:"w-full px-4 py-2 bg-white/10 border border-white/20 rounded-lg text-white focus:outline-none focus:border-emerald-400",required:!0})]})]})]}),e.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-xl p-5",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Additional Information"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-white/70 text-sm mb-2",children:"Priority"}),e.jsxs("select",{value:K,onChange:t=>le(t.target.value),className:"w-full px-4 py-2 bg-white/10 border border-white/20 rounded-lg text-white focus:outline-none focus:border-emerald-400",children:[e.jsx("option",{value:"normal",children:"Normal"}),e.jsx("option",{value:"high",children:"High"}),e.jsx("option",{value:"urgent",children:"Urgent"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-white/70 text-sm mb-2",children:"Notes (Optional)"}),e.jsx("textarea",{value:V,onChange:t=>de(t.target.value),rows:3,placeholder:"Add any additional notes or instructions...",className:"w-full px-4 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/50 focus:outline-none focus:border-emerald-400 resize-none"})]})]})]}),e.jsxs("div",{className:"flex gap-4 justify-end",children:[e.jsx("button",{type:"button",onClick:O,className:"px-6 py-3 bg-white/10 hover:bg-white/20 border border-white/20 rounded-lg text-white font-medium transition",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:Y,className:"px-6 py-3 bg-emerald-500 hover:bg-emerald-600 disabled:bg-emerald-500/50 disabled:cursor-not-allowed rounded-lg text-white font-medium transition",children:Y?"Sending...":"Send Order Request"})]})]}),e.jsx(De,{children:me&&e.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-[60] flex items-center justify-center p-4",children:e.jsxs(_.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"bg-gray-900 border border-white/20 rounded-2xl p-6 w-full max-w-4xl max-h-[80vh] overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-xl font-bold text-white",children:["Select Product from ",$==="distributor"?"My Inventory":"Product Owner's Inventory"]}),e.jsx("p",{className:"text-sm text-white/60 mt-1",children:$==="distributor"?"Select products from your own inventory to request from the product owner":"Select products from the product owner's inventory"})]}),e.jsx("button",{onClick:()=>{w(!1),R(""),P(null),S(null)},className:"text-white/70 hover:text-white transition",children:e.jsx(se,{size:24})})]}),e.jsxs("div",{className:"relative mb-4",children:[e.jsx(N,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-white/50"}),e.jsx("input",{type:"text",placeholder:"Search by name, SKU, brand, or category...",value:F,onChange:t=>R(t.target.value),className:"w-full pl-10 pr-4 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-emerald-400/50"})]}),e.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar",children:J.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:J.map(t=>{const r=t.sellingPrice||t.mrp||t.costPrice||0,s=t.quantity||t.stock||0,n=s<=0;return e.jsxs(_.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},whileHover:{scale:1.02},onClick:()=>{n||(T!==null?ye(t):pe(t))},className:`p-4 rounded-xl border cursor-pointer transition ${n?"bg-red-500/10 border-red-400/30 opacity-60":"bg-white/5 border-white/10 hover:border-emerald-400/50 hover:bg-white/10"}`,children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsx("h4",{className:"font-semibold text-white text-sm flex-1",children:t.name||t.productName||"Unnamed Product"}),t.productId&&e.jsx("span",{className:"text-xs px-2 py-0.5 bg-emerald-500/20 text-emerald-300 rounded border border-emerald-400/30",children:"Inventory"})]}),t.sku&&e.jsxs("p",{className:"text-xs text-white/50 mb-1",children:["SKU: ",t.sku]}),(t.brand||t.category)&&e.jsxs("p",{className:"text-xs text-white/60 mb-2",children:[t.brand&&e.jsx("span",{children:t.brand}),t.brand&&t.category&&" • ",t.category&&e.jsx("span",{children:t.category})]}),e.jsxs("div",{className:"flex items-center justify-between mt-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-emerald-400 font-semibold",children:X(r)}),e.jsxs("p",{className:`text-xs ${n?"text-red-400":"text-white/50"}`,children:["Stock: ",s]})]}),n&&e.jsx("span",{className:"text-xs px-2 py-1 bg-red-500/20 text-red-300 rounded border border-red-400/30",children:"Out of Stock"})]})]},t.id)})}):e.jsx("div",{className:"text-center py-12 text-white/50",children:F?e.jsxs("div",{children:[e.jsx(N,{className:"mx-auto mb-3 text-white/30",size:48}),e.jsxs("p",{children:['No products found matching "',F,'"']})]}):e.jsxs("div",{children:[e.jsx(Q,{className:"mx-auto mb-3 text-white/30",size:48}),e.jsx("p",{children:"No products available in inventory"})]})})})]})})})]})})};export{ke as D};
