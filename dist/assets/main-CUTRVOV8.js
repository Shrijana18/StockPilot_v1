const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index.esm-nzFwyGKL.js","assets/firebase-DGwrLPSD.js","assets/web-hQQeq1Vs.js","assets/motion-BPWU0vZm.js","assets/vendor-D3F3s8fL.js"])))=>i.map(i=>d[i]);
import{r as m,j as e,R as Z,m as P,A as te}from"./motion-BPWU0vZm.js";import{a as as,g as ns}from"./vendor-D3F3s8fL.js";import{_ as yt,C as Nt,r as ye,S as is,F as ls,g as Ue,a as Ve,b as Ct,c as kt,d as cs,e as At,i as Et,f as Dt,s as de,h as St,j as os,k as ds,l as hs,m as Pt,n as Ne,o as J,u as Me,p as Q,q as _t,t as Y,v as ne,w as Pe,x as Ge,y as qe,z as Tt,A as Lt,B as us}from"./firebase-DGwrLPSD.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))a(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&a(l)}).observe(document,{childList:!0,subtree:!0});function r(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function a(n){if(n.ep)return;n.ep=!0;const i=r(n);fetch(n.href,i)}})();var ge={},Xe;function ms(){if(Xe)return ge;Xe=1;var t=as();return ge.createRoot=t.createRoot,ge.hydrateRoot=t.hydrateRoot,ge}var xs=ms();const ps=ns(xs),It=m.createContext(),ue=()=>{const t=m.useContext(It);if(!t)throw new Error("useCart must be used within CartProvider");return t},fs=({children:t})=>{const[s,r]=m.useState([]),[a,n]=m.useState(null);m.useEffect(()=>{const o=localStorage.getItem("flyp_customer_cart"),h=localStorage.getItem("flyp_customer_cart_store");if(o)try{r(JSON.parse(o))}catch(p){console.error("Failed to load cart:",p)}if(h)try{n(JSON.parse(h))}catch(p){console.error("Failed to load cart store:",p)}},[]),m.useEffect(()=>{localStorage.setItem("flyp_customer_cart",JSON.stringify(s)),a&&localStorage.setItem("flyp_customer_cart_store",JSON.stringify(a))},[s,a]);const i=(o,h,p=1)=>{if(a&&a.id!==h.id&&s.length>0)return{success:!1,error:"DIFFERENT_STORE",message:`Your cart has items from ${a.name}. Clear cart to add from ${h.name}?`};a||n({id:h.id,name:h.businessName||h.name,deliveryFee:h.deliveryFee||0,minOrder:h.minOrderValue||0});const x=o.sellingPrice||o.price||0,C=o.mrp||x,k=o.imageUrl||o.image||"",j=o.unit||o.packSize||"";return r(w=>{const D=w.findIndex(v=>v.productId===o.id);if(D>=0){const v=[...w];return v[D].quantity+=p,v}else return[...w,{productId:o.id,name:o.name,price:x,mrp:C,image:k,unit:j,quantity:p}]}),{success:!0}},l=(o,h)=>{if(h<=0){c(o);return}r(p=>p.map(x=>x.productId===o?{...x,quantity:h}:x))},c=o=>{r(h=>{const p=h.filter(x=>x.productId!==o);return p.length===0&&(n(null),localStorage.removeItem("flyp_customer_cart_store")),p})},d=()=>{r([]),n(null),localStorage.removeItem("flyp_customer_cart"),localStorage.removeItem("flyp_customer_cart_store")},u=()=>{const o=s.reduce((j,w)=>j+w.price*w.quantity,0),h=a?.deliveryFee||0,p=10,x=o+h+p,C=s.reduce((j,w)=>j+w.quantity,0),k=s.reduce((j,w)=>{const D=(w.mrp||w.price)*w.quantity,v=w.price*w.quantity;return j+(D-v)},0);return{subtotal:o,deliveryFee:h,platformFee:p,total:x,itemCount:C,savings:k,meetsMinOrder:o>=(a?.minOrder||0)}},f=o=>s.find(p=>p.productId===o)?.quantity||0;return e.jsx(It.Provider,{value:{cartItems:s,cartStore:a,addToCart:i,updateQuantity:l,removeFromCart:c,clearCart:d,getCartTotals:u,getItemQuantity:f},children:t})},gs="modulepreload",bs=function(t){return"/"+t},et={},We=function(s,r,a){let n=Promise.resolve();if(r&&r.length>0){let d=function(u){return Promise.all(u.map(f=>Promise.resolve(f).then(o=>({status:"fulfilled",value:o}),o=>({status:"rejected",reason:o}))))};document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),c=l?.nonce||l?.getAttribute("nonce");n=d(r.map(u=>{if(u=bs(u),u in et)return;et[u]=!0;const f=u.endsWith(".css"),o=f?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${o}`))return;const h=document.createElement("link");if(h.rel=f?"stylesheet":gs,f||(h.as="script"),h.crossOrigin="",h.href=u,c&&h.setAttribute("nonce",c),document.head.appendChild(h),f)return new Promise((p,x)=>{h.addEventListener("load",p),h.addEventListener("error",()=>x(new Error(`Unable to preload CSS for ${u}`)))})}))}function i(l){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=l,window.dispatchEvent(c),!c.defaultPrevented)throw l}return n.then(l=>{for(const c of l||[])c.status==="rejected"&&i(c.reason);return s().catch(i)})};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rt="firebasestorage.googleapis.com",js="storageBucket",vs=120*1e3,ws=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G extends ls{constructor(s,r,a=0){super(Ie(s),`Firebase Storage: ${r} (${Ie(s)})`),this.status_=a,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,G.prototype)}get status(){return this.status_}set status(s){this.status_=s}_codeEquals(s){return Ie(s)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(s){this.customData.serverResponse=s,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var V;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(V||(V={}));function Ie(t){return"storage/"+t}function ys(){const t="An unknown error occurred, please check the error payload for server response.";return new G(V.UNKNOWN,t)}function Ns(){return new G(V.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Cs(){return new G(V.CANCELED,"User canceled the upload/download.")}function ks(t){return new G(V.INVALID_URL,"Invalid URL '"+t+"'.")}function As(t){return new G(V.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function tt(t){return new G(V.INVALID_ARGUMENT,t)}function Ot(){return new G(V.APP_DELETED,"The Firebase app was deleted.")}function Es(t){return new G(V.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H{constructor(s,r){this.bucket=s,this.path_=r}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const s=encodeURIComponent;return"/b/"+s(this.bucket)+"/o/"+s(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(s,r){let a;try{a=H.makeFromUrl(s,r)}catch{return new H(s,"")}if(a.path==="")return a;throw As(s)}static makeFromUrl(s,r){let a=null;const n="([A-Za-z0-9.\\-_]+)";function i(v){v.path.charAt(v.path.length-1)==="/"&&(v.path_=v.path_.slice(0,-1))}const l="(/(.*))?$",c=new RegExp("^gs://"+n+l,"i"),d={bucket:1,path:3};function u(v){v.path_=decodeURIComponent(v.path)}const f="v[A-Za-z0-9_]+",o=r.replace(/[.]/g,"\\."),h="(/([^?#]*).*)?$",p=new RegExp(`^https?://${o}/${f}/b/${n}/o${h}`,"i"),x={bucket:1,path:3},C=r===Rt?"(?:storage.googleapis.com|storage.cloud.google.com)":r,k="([^?#]*)",j=new RegExp(`^https?://${C}/${n}/${k}`,"i"),D=[{regex:c,indices:d,postModify:i},{regex:p,indices:x,postModify:u},{regex:j,indices:{bucket:1,path:2},postModify:u}];for(let v=0;v<D.length;v++){const R=D[v],y=R.regex.exec(s);if(y){const L=y[R.indices.bucket];let g=y[R.indices.path];g||(g=""),a=new H(L,g),R.postModify(a);break}}if(a==null)throw ks(s);return a}}class Ds{constructor(s){this.promise_=Promise.reject(s)}getPromise(){return this.promise_}cancel(s=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ss(t,s,r){let a=1,n=null,i=null,l=!1,c=0;function d(){return c===2}let u=!1;function f(...k){u||(u=!0,s.apply(null,k))}function o(k){n=setTimeout(()=>{n=null,t(p,d())},k)}function h(){i&&clearTimeout(i)}function p(k,...j){if(u){h();return}if(k){h(),f.call(null,k,...j);return}if(d()||l){h(),f.call(null,k,...j);return}a<64&&(a*=2);let D;c===1?(c=2,D=0):D=(a+Math.random())*1e3,o(D)}let x=!1;function C(k){x||(x=!0,h(),!u&&(n!==null?(k||(c=2),clearTimeout(n),o(0)):k||(c=1)))}return o(0),i=setTimeout(()=>{l=!0,C(!0)},r),C}function Ps(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _s(t){return t!==void 0}function st(t,s,r,a){if(a<s)throw tt(`Invalid value for '${t}'. Expected ${s} or greater.`);if(a>r)throw tt(`Invalid value for '${t}'. Expected ${r} or less.`)}function Ts(t){const s=encodeURIComponent;let r="?";for(const a in t)if(t.hasOwnProperty(a)){const n=s(a)+"="+s(t[a]);r=r+n+"&"}return r=r.slice(0,-1),r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ce;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Ce||(Ce={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ls(t,s){const r=t>=500&&t<600,n=[408,429].indexOf(t)!==-1,i=s.indexOf(t)!==-1;return r||n||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Is{constructor(s,r,a,n,i,l,c,d,u,f,o,h=!0){this.url_=s,this.method_=r,this.headers_=a,this.body_=n,this.successCodes_=i,this.additionalRetryCodes_=l,this.callback_=c,this.errorCallback_=d,this.timeout_=u,this.progressCallback_=f,this.connectionFactory_=o,this.retry=h,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((p,x)=>{this.resolve_=p,this.reject_=x,this.start_()})}start_(){const s=(a,n)=>{if(n){a(!1,new be(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const l=c=>{const d=c.loaded,u=c.lengthComputable?c.total:-1;this.progressCallback_!==null&&this.progressCallback_(d,u)};this.progressCallback_!==null&&i.addUploadProgressListener(l),i.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(l),this.pendingConnection_=null;const c=i.getErrorCode()===Ce.NO_ERROR,d=i.getStatus();if(!c||Ls(d,this.additionalRetryCodes_)&&this.retry){const f=i.getErrorCode()===Ce.ABORT;a(!1,new be(!1,null,f));return}const u=this.successCodes_.indexOf(d)!==-1;a(!0,new be(u,i))})},r=(a,n)=>{const i=this.resolve_,l=this.reject_,c=n.connection;if(n.wasSuccessCode)try{const d=this.callback_(c,c.getResponse());_s(d)?i(d):i()}catch(d){l(d)}else if(c!==null){const d=ys();d.serverResponse=c.getErrorText(),this.errorCallback_?l(this.errorCallback_(c,d)):l(d)}else if(n.canceled){const d=this.appDelete_?Ot():Cs();l(d)}else{const d=Ns();l(d)}};this.canceled_?r(!1,new be(!1,null,!0)):this.backoffId_=Ss(s,r,this.timeout_)}getPromise(){return this.promise_}cancel(s){this.canceled_=!0,this.appDelete_=s||!1,this.backoffId_!==null&&Ps(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class be{constructor(s,r,a){this.wasSuccessCode=s,this.connection=r,this.canceled=!!a}}function Rs(t,s){s!==null&&s.length>0&&(t.Authorization="Firebase "+s)}function Os(t,s){t["X-Firebase-Storage-Version"]="webjs/"+(s??"AppManager")}function Ms(t,s){s&&(t["X-Firebase-GMPID"]=s)}function Fs(t,s){s!==null&&(t["X-Firebase-AppCheck"]=s)}function Bs(t,s,r,a,n,i,l=!0){const c=Ts(t.urlParams),d=t.url+c,u=Object.assign({},t.headers);return Ms(u,s),Rs(u,r),Os(u,i),Fs(u,a),new Is(d,t.method,u,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,n,l)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zs(t){if(t.length===0)return null;const s=t.lastIndexOf("/");return s===-1?"":t.slice(0,s)}function Hs(t){const s=t.lastIndexOf("/",t.length-2);return s===-1?t:t.slice(s+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ke{constructor(s,r){this._service=s,r instanceof H?this._location=r:this._location=H.makeFromUrl(r,s.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(s,r){return new ke(s,r)}get root(){const s=new H(this._location.bucket,"");return this._newRef(this._service,s)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Hs(this._location.path)}get storage(){return this._service}get parent(){const s=zs(this._location.path);if(s===null)return null;const r=new H(this._location.bucket,s);return new ke(this._service,r)}_throwIfRoot(s){if(this._location.path==="")throw Es(s)}}function rt(t,s){const r=s?.[js];return r==null?null:H.makeFromBucketSpec(r,t)}function $s(t,s,r,a={}){t.host=`${s}:${r}`,t._protocol="http";const{mockUserToken:n}=a;n&&(t._overrideAuthToken=typeof n=="string"?n:cs(n,t.app.options.projectId))}class Us{constructor(s,r,a,n,i){this.app=s,this._authProvider=r,this._appCheckProvider=a,this._url=n,this._firebaseVersion=i,this._bucket=null,this._host=Rt,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=vs,this._maxUploadRetryTime=ws,this._requests=new Set,n!=null?this._bucket=H.makeFromBucketSpec(n,this._host):this._bucket=rt(this._host,this.app.options)}get host(){return this._host}set host(s){this._host=s,this._url!=null?this._bucket=H.makeFromBucketSpec(this._url,s):this._bucket=rt(s,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(s){st("time",0,Number.POSITIVE_INFINITY,s),this._maxUploadRetryTime=s}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(s){st("time",0,Number.POSITIVE_INFINITY,s),this._maxOperationRetryTime=s}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const s=this._authProvider.getImmediate({optional:!0});if(s){const r=await s.getToken();if(r!==null)return r.accessToken}return null}async _getAppCheckToken(){const s=this._appCheckProvider.getImmediate({optional:!0});return s?(await s.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(s=>s.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(s){return new ke(this,s)}_makeRequest(s,r,a,n,i=!0){if(this._deleted)return new Ds(Ot());{const l=Bs(s,this._appId,a,n,r,this._firebaseVersion,i);return this._requests.add(l),l.getPromise().then(()=>this._requests.delete(l),()=>this._requests.delete(l)),l}}async makeRequestWithTokens(s,r){const[a,n]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(s,r,a,n).getPromise()}}const at="@firebase/storage",nt="0.12.6";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mt="storage";function Vs(t=Ue(),s){t=Ve(t);const a=Ct(t,Mt).getImmediate({identifier:s}),n=kt("storage");return n&&Gs(a,...n),a}function Gs(t,s,r,a={}){$s(t,s,r,a)}function qs(t,{instanceIdentifier:s}){const r=t.getProvider("app").getImmediate(),a=t.getProvider("auth-internal"),n=t.getProvider("app-check-internal");return new Us(r,a,n,s,is)}function Ws(){yt(new Nt(Mt,qs,"PUBLIC").setMultipleInstances(!0)),ye(at,nt,""),ye(at,nt,"esm2017")}Ws();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ft="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ys{constructor(s,r,a){this.auth=null,this.messaging=null,this.appCheck=null,this.auth=s.getImmediate({optional:!0}),this.messaging=r.getImmediate({optional:!0}),this.auth||s.get().then(n=>this.auth=n,()=>{}),this.messaging||r.get().then(n=>this.messaging=n,()=>{}),this.appCheck||a.get().then(n=>this.appCheck=n,()=>{})}async getAuthToken(){if(this.auth)try{const s=await this.auth.getToken();return s?.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(s){if(this.appCheck){const r=s?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return r.error?null:r.token}return null}async getContext(s){const r=await this.getAuthToken(),a=await this.getMessagingToken(),n=await this.getAppCheckToken(s);return{authToken:r,messagingToken:a,appCheckToken:n}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fe="us-central1";class Ks{constructor(s,r,a,n,i=Fe,l){this.app=s,this.fetchImpl=l,this.emulatorOrigin=null,this.contextProvider=new Ys(r,a,n),this.cancelAllRequests=new Promise(c=>{this.deleteService=()=>Promise.resolve(c())});try{const c=new URL(i);this.customDomain=c.origin,this.region=Fe}catch{this.customDomain=null,this.region=i}}_delete(){return this.deleteService()}_url(s){const r=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${r}/${this.region}/${s}`:this.customDomain!==null?`${this.customDomain}/${s}`:`https://${this.region}-${r}.cloudfunctions.net/${s}`}}function Zs(t,s,r){t.emulatorOrigin=`http://${s}:${r}`}const it="@firebase/functions",lt="0.11.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Js="auth-internal",Qs="app-check-internal",Xs="messaging-internal";function er(t,s){const r=(a,{instanceIdentifier:n})=>{const i=a.getProvider("app").getImmediate(),l=a.getProvider(Js),c=a.getProvider(Xs),d=a.getProvider(Qs);return new Ks(i,l,c,d,n,t)};yt(new Nt(Ft,r,"PUBLIC").setMultipleInstances(!0)),ye(it,lt,s),ye(it,lt,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bt(t=Ue(),s=Fe){const a=Ct(Ve(t),Ft).getImmediate({identifier:s}),n=kt("functions");return n&&tr(a,...n),a}function tr(t,s,r){Zs(Ve(t),s,r)}er(fetch.bind(self));/*! Capacitor: https://capacitorjs.com/ - MIT License */var re;(function(t){t.Unimplemented="UNIMPLEMENTED",t.Unavailable="UNAVAILABLE"})(re||(re={}));class Re extends Error{constructor(s,r,a){super(s),this.message=s,this.code=r,this.data=a}}const sr=t=>{var s,r;return t?.androidBridge?"android":!((r=(s=t?.webkit)===null||s===void 0?void 0:s.messageHandlers)===null||r===void 0)&&r.bridge?"ios":"web"},rr=t=>{const s=t.CapacitorCustomPlatform||null,r=t.Capacitor||{},a=r.Plugins=r.Plugins||{},n=()=>s!==null?s.name:sr(t),i=()=>n()!=="web",l=o=>{const h=u.get(o);return!!(h?.platforms.has(n())||c(o))},c=o=>{var h;return(h=r.PluginHeaders)===null||h===void 0?void 0:h.find(p=>p.name===o)},d=o=>t.console.error(o),u=new Map,f=(o,h={})=>{const p=u.get(o);if(p)return console.warn(`Capacitor plugin "${o}" already registered. Cannot register plugins twice.`),p.proxy;const x=n(),C=c(o);let k;const j=async()=>(!k&&x in h?k=typeof h[x]=="function"?k=await h[x]():k=h[x]:s!==null&&!k&&"web"in h&&(k=typeof h.web=="function"?k=await h.web():k=h.web),k),w=(g,S)=>{var b,E;if(C){const I=C?.methods.find(M=>S===M.name);if(I)return I.rtype==="promise"?M=>r.nativePromise(o,S.toString(),M):(M,$)=>r.nativeCallback(o,S.toString(),M,$);if(g)return(b=g[S])===null||b===void 0?void 0:b.bind(g)}else{if(g)return(E=g[S])===null||E===void 0?void 0:E.bind(g);throw new Re(`"${o}" plugin is not implemented on ${x}`,re.Unimplemented)}},D=g=>{let S;const b=(...E)=>{const I=j().then(M=>{const $=w(M,g);if($){const _=$(...E);return S=_?.remove,_}else throw new Re(`"${o}.${g}()" is not implemented on ${x}`,re.Unimplemented)});return g==="addListener"&&(I.remove=async()=>S()),I};return b.toString=()=>`${g.toString()}() { [capacitor code] }`,Object.defineProperty(b,"name",{value:g,writable:!1,configurable:!1}),b},v=D("addListener"),R=D("removeListener"),y=(g,S)=>{const b=v({eventName:g},S),E=async()=>{const M=await b;R({eventName:g,callbackId:M},S)},I=new Promise(M=>b.then(()=>M({remove:E})));return I.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await E()},I},L=new Proxy({},{get(g,S){switch(S){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return C?y:v;case"removeListener":return R;default:return D(S)}}});return a[o]=L,u.set(o,{name:o,proxy:L,platforms:new Set([...Object.keys(h),...C?[x]:[]])}),L};return r.convertFileSrc||(r.convertFileSrc=o=>o),r.getPlatform=n,r.handleError=d,r.isNativePlatform=i,r.isPluginAvailable=l,r.registerPlugin=f,r.Exception=Re,r.DEBUG=!!r.DEBUG,r.isLoggingEnabled=!!r.isLoggingEnabled,r},ar=t=>t.Capacitor=rr(t),Ae=ar(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),Ye=Ae.registerPlugin;class zt{constructor(){this.listeners={},this.retainedEventArguments={},this.windowListeners={}}addListener(s,r){let a=!1;this.listeners[s]||(this.listeners[s]=[],a=!0),this.listeners[s].push(r);const i=this.windowListeners[s];i&&!i.registered&&this.addWindowListener(i),a&&this.sendRetainedArgumentsForEvent(s);const l=async()=>this.removeListener(s,r);return Promise.resolve({remove:l})}async removeAllListeners(){this.listeners={};for(const s in this.windowListeners)this.removeWindowListener(this.windowListeners[s]);this.windowListeners={}}notifyListeners(s,r,a){const n=this.listeners[s];if(!n){if(a){let i=this.retainedEventArguments[s];i||(i=[]),i.push(r),this.retainedEventArguments[s]=i}return}n.forEach(i=>i(r))}hasListeners(s){var r;return!!(!((r=this.listeners[s])===null||r===void 0)&&r.length)}registerWindowListener(s,r){this.windowListeners[r]={registered:!1,windowEventName:s,pluginEventName:r,handler:a=>{this.notifyListeners(r,a)}}}unimplemented(s="not implemented"){return new Ae.Exception(s,re.Unimplemented)}unavailable(s="not available"){return new Ae.Exception(s,re.Unavailable)}async removeListener(s,r){const a=this.listeners[s];if(!a)return;const n=a.indexOf(r);this.listeners[s].splice(n,1),this.listeners[s].length||this.removeWindowListener(this.windowListeners[s])}addWindowListener(s){window.addEventListener(s.windowEventName,s.handler),s.registered=!0}removeWindowListener(s){s&&(window.removeEventListener(s.windowEventName,s.handler),s.registered=!1)}sendRetainedArgumentsForEvent(s){const r=this.retainedEventArguments[s];r&&(delete this.retainedEventArguments[s],r.forEach(a=>{this.notifyListeners(s,a)}))}}const ct=t=>encodeURIComponent(t).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),ot=t=>t.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class nr extends zt{async getCookies(){const s=document.cookie,r={};return s.split(";").forEach(a=>{if(a.length<=0)return;let[n,i]=a.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");n=ot(n).trim(),i=ot(i).trim(),r[n]=i}),r}async setCookie(s){try{const r=ct(s.key),a=ct(s.value),n=`; expires=${(s.expires||"").replace("expires=","")}`,i=(s.path||"/").replace("path=",""),l=s.url!=null&&s.url.length>0?`domain=${s.url}`:"";document.cookie=`${r}=${a||""}${n}; path=${i}; ${l};`}catch(r){return Promise.reject(r)}}async deleteCookie(s){try{document.cookie=`${s.key}=; Max-Age=0`}catch(r){return Promise.reject(r)}}async clearCookies(){try{const s=document.cookie.split(";")||[];for(const r of s)document.cookie=r.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(s){return Promise.reject(s)}}async clearAllCookies(){try{await this.clearCookies()}catch(s){return Promise.reject(s)}}}Ye("CapacitorCookies",{web:()=>new nr});const ir=async t=>new Promise((s,r)=>{const a=new FileReader;a.onload=()=>{const n=a.result;s(n.indexOf(",")>=0?n.split(",")[1]:n)},a.onerror=n=>r(n),a.readAsDataURL(t)}),lr=(t={})=>{const s=Object.keys(t);return Object.keys(t).map(n=>n.toLocaleLowerCase()).reduce((n,i,l)=>(n[i]=t[s[l]],n),{})},cr=(t,s=!0)=>t?Object.entries(t).reduce((a,n)=>{const[i,l]=n;let c,d;return Array.isArray(l)?(d="",l.forEach(u=>{c=s?encodeURIComponent(u):u,d+=`${i}=${c}&`}),d.slice(0,-1)):(c=s?encodeURIComponent(l):l,d=`${i}=${c}`),`${a}&${d}`},"").substr(1):null,or=(t,s={})=>{const r=Object.assign({method:t.method||"GET",headers:t.headers},s),n=lr(t.headers)["content-type"]||"";if(typeof t.data=="string")r.body=t.data;else if(n.includes("application/x-www-form-urlencoded")){const i=new URLSearchParams;for(const[l,c]of Object.entries(t.data||{}))i.set(l,c);r.body=i.toString()}else if(n.includes("multipart/form-data")||t.data instanceof FormData){const i=new FormData;if(t.data instanceof FormData)t.data.forEach((c,d)=>{i.append(d,c)});else for(const c of Object.keys(t.data))i.append(c,t.data[c]);r.body=i;const l=new Headers(r.headers);l.delete("content-type"),r.headers=l}else(n.includes("application/json")||typeof t.data=="object")&&(r.body=JSON.stringify(t.data));return r};class dr extends zt{async request(s){const r=or(s,s.webFetchExtra),a=cr(s.params,s.shouldEncodeUrlParams),n=a?`${s.url}?${a}`:s.url,i=await fetch(n,r),l=i.headers.get("content-type")||"";let{responseType:c="text"}=i.ok?s:{};l.includes("application/json")&&(c="json");let d,u;switch(c){case"arraybuffer":case"blob":u=await i.blob(),d=await ir(u);break;case"json":d=await i.json();break;case"document":case"text":default:d=await i.text()}const f={};return i.headers.forEach((o,h)=>{f[h]=o}),{data:d,headers:f,status:i.status,url:i.url}}async get(s){return this.request(Object.assign(Object.assign({},s),{method:"GET"}))}async post(s){return this.request(Object.assign(Object.assign({},s),{method:"POST"}))}async put(s){return this.request(Object.assign(Object.assign({},s),{method:"PUT"}))}async patch(s){return this.request(Object.assign(Object.assign({},s),{method:"PATCH"}))}async delete(s){return this.request(Object.assign(Object.assign({},s),{method:"DELETE"}))}}Ye("CapacitorHttp",{web:()=>new dr});const dt={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_FUNCTIONS_ORIGIN:"https://us-central1-stockpilotv1.cloudfunctions.net",VITE_MSG91_WIDGET_ID:"356a79684758348381353138",VITE_PARSE_URL:"https://asia-south1-stockpilotv1.cloudfunctions.net/parse",VITE_REACT_APP_OCR_FUNCTION_URL:"https://ocrfromimage-rg2uh6cnqq-el.a.run.app",VITE_SPEECH_WS_URL:"wss://flyp-voice-streamer-30934537475.asia-south1.run.app/ws"},me=Ae?.isNativePlatform?.()===!0,Be={apiKey:"AIzaSyBPkkXZWll0VifG5kb0DDSsoV5UB-n5pFE",authDomain:"stockpilotv1.firebaseapp.com",databaseURL:"https://stockpilotv1-default-rtdb.firebaseio.com",projectId:"stockpilotv1",storageBucket:"stockpilotv1.firebasestorage.app",messagingSenderId:"30934537475",appId:"1:30934537475:web:84a2f76609dbb1db290536",measurementId:"G-SENFJ2HSBW"},hr=me?(()=>{const{authDomain:t,...s}=Be;return s})():Be,xe=At().length?Ue():Et(hr),ee=Dt(xe);if(me){try{ee._popupRedirectResolver=null}catch{}try{ee._errorFactory={create:()=>({message:"suppressed"})}}catch{}}(async()=>{try{if(me)await de(ee,St),console.info("[Firebase] Using in-memory persistence on native WebView");else try{await de(ee,os),console.info("[Firebase] Using IndexedDB persistence (web)")}catch{try{await de(ee,ds),console.info("[Firebase] Using localStorage persistence (web)")}catch{await de(ee,hs),console.info("[Firebase] Using sessionStorage persistence (web)")}}}catch(t){console.warn("[Firebase] Failed to set persistence:",t?.message||t)}})();console.info("[Firebase] Production environment detected"),window.addEventListener("unhandledrejection",t=>{console.error("[Firebase] Unhandled promise rejection:",t.reason)}),ee.onAuthStateChanged(t=>{console.log(t?"[Firebase] Production auth state: User signed in":"[Firebase] Production auth state: User signed out")},t=>{console.error("[Firebase] Production auth state error:",t)});const B=Pt(xe,{experimentalForceLongPolling:!0});Vs(xe);Bt(xe,"us-central1");let he;const ht=At().find(t=>t.name==="employeeApp");ht?he=ht:he=Et(Be,"employeeApp");Pt(he,{experimentalForceLongPolling:!0});const Ht=Dt(he);Bt(he,"us-central1");if(me)try{Ht._popupRedirectResolver=null}catch{}de(Ht,St).then(()=>console.info("[Employee Firebase] In-memory auth persistence enabled")).catch(t=>console.warn("[Employee Firebase] Persistence setup failed:",t));!me&&typeof window<"u"&&dt?.VITE_ENABLE_APPCHECK==="true"&&(async()=>{try{const{initializeAppCheck:t,ReCaptchaV3Provider:s}=await We(async()=>{const{initializeAppCheck:a,ReCaptchaV3Provider:n}=await import("./index.esm-nzFwyGKL.js");return{initializeAppCheck:a,ReCaptchaV3Provider:n}},__vite__mapDeps([0,1])),r=dt?.VITE_RECAPTCHA_V3_SITE_KEY;if(!r){console.warn("[AppCheck] VITE_RECAPTCHA_V3_SITE_KEY missing; skipping App Check init.");return}t(xe,{provider:new s(r),isTokenAutoRefreshEnabled:!0}),console.info("[AppCheck] Initialized with reCAPTCHA v3 (web only)")}catch(t){console.warn("[AppCheck] init skipped:",t?.message||t)}})();const $t=m.createContext(),ie=()=>{const t=m.useContext($t);if(!t)throw new Error("useCustomerAuth must be used within CustomerAuthProvider");return t},ur=({children:t})=>{const[s,r]=m.useState(null),[a,n]=m.useState(null),[i,l]=m.useState(!0);m.useEffect(()=>{(async()=>{try{const p=localStorage.getItem("flyp_customer_id");if(p){const x=await Ne(J(B,"customers",p));if(x.exists()){const C=x.data();r({uid:p,phoneNumber:C.phone||""}),n(C)}else localStorage.removeItem("flyp_customer_id")}}catch(p){console.error("Error checking session:",p),localStorage.removeItem("flyp_customer_id")}finally{l(!1)}})()},[]);const c=async(h,p)=>{try{const x=h.replace(/\D/g,""),C=`customer_${x}`,k=J(B,"customers",C),j=await Ne(k);let w;return j.exists()?(w=j.data(),p&&p!==w.name&&(await Me(k,{name:p,updatedAt:Q()}),w.name=p)):(w={name:p||"Customer",phone:`+91${x}`,email:"",addresses:[],createdAt:Q(),totalOrders:0,isActive:!0},await _t(k,w)),localStorage.setItem("flyp_customer_id",C),r({uid:C,phoneNumber:`+91${x}`}),n(w),{success:!0,isNewUser:!j.exists()}}catch(x){return console.error("Error logging in:",x),{success:!1,error:x.message}}},d=async h=>{try{if(!s)throw new Error("Not logged in");const p=J(B,"customers",s.uid);return await Me(p,{...h,updatedAt:Q()}),n(x=>({...x,...h})),{success:!0}}catch(p){return console.error("Error updating profile:",p),{success:!1,error:p.message}}},u=async h=>{try{if(!s)throw new Error("Not logged in");const p={id:Date.now().toString(),...h,createdAt:new Date().toISOString()},x=[...a?.addresses||[]];return(x.length===0||h.isDefault)&&(x.forEach(C=>C.isDefault=!1),p.isDefault=!0),x.push(p),await d({addresses:x}),{success:!0,address:p}}catch(p){return console.error("Error adding address:",p),{success:!1,error:p.message}}},f=async h=>{try{const p=(a?.addresses||[]).map(x=>({...x,isDefault:x.id===h}));return await d({addresses:p}),{success:!0}}catch(p){return{success:!1,error:p.message}}},o=async()=>{try{return localStorage.removeItem("flyp_customer_id"),r(null),n(null),{success:!0}}catch(h){return{success:!1,error:h.message}}};return e.jsx($t.Provider,{value:{customer:s,customerData:a,loading:i,simpleLogin:c,updateProfile:d,addAddress:u,setDefaultAddress:f,logout:o,isLoggedIn:!!s},children:t})};var Ut={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},ut=Z.createContext&&Z.createContext(Ut),mr=["attr","size","title"];function xr(t,s){if(t==null)return{};var r=pr(t,s),a,n;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(n=0;n<i.length;n++)a=i[n],!(s.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(r[a]=t[a])}return r}function pr(t,s){if(t==null)return{};var r={};for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){if(s.indexOf(a)>=0)continue;r[a]=t[a]}return r}function Ee(){return Ee=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var r=arguments[s];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},Ee.apply(this,arguments)}function mt(t,s){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);s&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),r.push.apply(r,a)}return r}function De(t){for(var s=1;s<arguments.length;s++){var r=arguments[s]!=null?arguments[s]:{};s%2?mt(Object(r),!0).forEach(function(a){fr(t,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):mt(Object(r)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(r,a))})}return t}function fr(t,s,r){return s=gr(s),s in t?Object.defineProperty(t,s,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[s]=r,t}function gr(t){var s=br(t,"string");return typeof s=="symbol"?s:s+""}function br(t,s){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var a=r.call(t,s);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(t)}function Vt(t){return t&&t.map((s,r)=>Z.createElement(s.tag,De({key:r},s.attr),Vt(s.child)))}function A(t){return s=>Z.createElement(jr,Ee({attr:De({},t.attr)},s),Vt(t.child))}function jr(t){var s=r=>{var{attr:a,size:n,title:i}=t,l=xr(t,mr),c=n||r.size||"1em",d;return r.className&&(d=r.className),t.className&&(d=(d?d+" ":"")+t.className),Z.createElement("svg",Ee({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},r.attr,a,l,{className:d,style:De(De({color:t.color||r.color},r.style),t.style),height:c,width:c,xmlns:"http://www.w3.org/2000/svg"}),i&&Z.createElement("title",null,i),t.children)};return ut!==void 0?Z.createElement(ut.Consumer,null,r=>s(r)):s(Ut)}function vr(t){return A({attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M6.267 3.455a3.066 3.066 0 001.745-.723 3.066 3.066 0 013.976 0 3.066 3.066 0 001.745.723 3.066 3.066 0 012.812 2.812c.051.643.304 1.254.723 1.745a3.066 3.066 0 010 3.976 3.066 3.066 0 00-.723 1.745 3.066 3.066 0 01-2.812 2.812 3.066 3.066 0 00-1.745.723 3.066 3.066 0 01-3.976 0 3.066 3.066 0 00-1.745-.723 3.066 3.066 0 01-2.812-2.812 3.066 3.066 0 00-.723-1.745 3.066 3.066 0 010-3.976 3.066 3.066 0 00.723-1.745 3.066 3.066 0 012.812-2.812zm7.44 5.252a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"},child:[]}]})(t)}function wr(t){return A({attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{d:"M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"},child:[]},{tag:"path",attr:{fillRule:"evenodd",d:"M4 5a2 2 0 012-2 3 3 0 003 3h2a3 3 0 003-3 2 2 0 012 2v11a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3zm-3 4a1 1 0 100 2h.01a1 1 0 100-2H7zm3 0a1 1 0 100 2h3a1 1 0 100-2h-3z",clipRule:"evenodd"},child:[]}]})(t)}function yr(t){return A({attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{d:"M10.707 2.293a1 1 0 00-1.414 0l-7 7a1 1 0 001.414 1.414L4 10.414V17a1 1 0 001 1h2a1 1 0 001-1v-2a1 1 0 011-1h2a1 1 0 011 1v2a1 1 0 001 1h2a1 1 0 001-1v-6.586l.293.293a1 1 0 001.414-1.414l-7-7z"},child:[]}]})(t)}function xt(t){return A({attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M11.3 1.046A1 1 0 0112 2v5h4a1 1 0 01.82 1.573l-7 10A1 1 0 018 18v-5H4a1 1 0 01-.82-1.573l7-10a1 1 0 011.12-.38z",clipRule:"evenodd"},child:[]}]})(t)}function Nr(t){return A({attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z",clipRule:"evenodd"},child:[]}]})(t)}function Cr(t){return A({attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z",clipRule:"evenodd"},child:[]}]})(t)}function kr(t){return A({attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{d:"M3 1a1 1 0 000 2h1.22l.305 1.222a.997.997 0 00.01.042l1.358 5.43-.893.892C3.74 11.846 4.632 14 6.414 14H15a1 1 0 000-2H6.414l1-1H14a1 1 0 00.894-.553l3-6A1 1 0 0017 3H6.28l-.31-1.243A1 1 0 005 1H3zM16 16.5a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0zM6.5 18a1.5 1.5 0 100-3 1.5 1.5 0 000 3z"},child:[]}]})(t)}function ze(t){return A({attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M5 2a1 1 0 011 1v1h1a1 1 0 010 2H6v1a1 1 0 01-2 0V6H3a1 1 0 010-2h1V3a1 1 0 011-1zm0 10a1 1 0 011 1v1h1a1 1 0 110 2H6v1a1 1 0 11-2 0v-1H3a1 1 0 110-2h1v-1a1 1 0 011-1zM12 2a1 1 0 01.967.744L14.146 7.2 17.5 9.134a1 1 0 010 1.732l-3.354 1.935-1.18 4.455a1 1 0 01-1.933 0L9.854 12.8 6.5 10.866a1 1 0 010-1.732l3.354-1.935 1.18-4.455A1 1 0 0112 2z",clipRule:"evenodd"},child:[]}]})(t)}function Ar(t){return A({attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z",clipRule:"evenodd"},child:[]}]})(t)}const Er=({activeTab:t,onTabChange:s})=>{const{cartItems:r}=ue(),a=r?.reduce((i,l)=>i+l.quantity,0)||0,n=[{id:"home",icon:yr,label:"Home"},{id:"search",icon:Cr,label:"Search"},{id:"cart",icon:kr,label:"Cart",badge:a},{id:"orders",icon:wr,label:"Orders"},{id:"profile",icon:Ar,label:"Profile"}];return e.jsxs("div",{className:"fixed bottom-0 left-0 right-0 z-50",style:{paddingBottom:"env(safe-area-inset-bottom, 0px)"},children:[e.jsx("div",{className:"absolute inset-x-0 bottom-0 h-28 bg-gradient-to-t from-[#060D2D] via-[#060D2D]/90 to-transparent pointer-events-none"}),e.jsx("div",{className:"relative px-4 pb-3",children:e.jsx("div",{className:"bg-[#101B4A]/95 backdrop-blur-xl rounded-[22px] border border-white/[0.06] px-2 py-2",children:e.jsx("div",{className:"flex items-center justify-around",children:n.map(i=>{const l=i.icon,c=t===i.id,d=i.id==="cart";return e.jsxs("button",{onClick:()=>s(i.id),className:`relative flex flex-col items-center justify-center py-2 px-4 rounded-xl transition-all duration-200 ${c?"bg-[#05E06C]":""}`,children:[e.jsxs("div",{className:"relative",children:[e.jsx(l,{className:`text-[22px] transition-colors duration-200 ${c?"text-[#060D2D]":"text-white/40"}`}),d&&a>0&&e.jsx("span",{className:"absolute -top-1.5 -right-2 min-w-[18px] h-[18px] px-1 bg-red-500 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-white text-[10px] font-bold",children:a>99?"99+":a})})]}),e.jsx("span",{className:`text-[10px] font-semibold mt-1 transition-colors duration-200 ${c?"text-[#060D2D]":"text-white/40"}`,children:i.label})]},i.id)})})})})]})};function K(t){return A({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M257.5 445.1l-22.2 22.2c-9.4 9.4-24.6 9.4-33.9 0L7 273c-9.4-9.4-9.4-24.6 0-33.9L201.4 44.7c9.4-9.4 24.6-9.4 33.9 0l22.2 22.2c9.5 9.5 9.3 25-.4 34.3L136.6 216H424c13.3 0 24 10.7 24 24v32c0 13.3-10.7 24-24 24H136.6l120.5 114.8c9.8 9.3 10 24.8.4 34.3z"},child:[]}]})(t)}function Dr(t){return A({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M190.5 66.9l22.2-22.2c9.4-9.4 24.6-9.4 33.9 0L441 239c9.4 9.4 9.4 24.6 0 33.9L246.6 467.3c-9.4 9.4-24.6 9.4-33.9 0l-22.2-22.2c-9.5-9.5-9.3-25 .4-34.3L311.4 296H24c-13.3 0-24-10.7-24-24v-32c0-13.3 10.7-24 24-24h287.4L190.9 101.2c-9.8-9.3-10-24.8-.4-34.3z"},child:[]}]})(t)}function Sr(t){return A({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224 512c35.32 0 63.97-28.65 63.97-64H160.03c0 35.35 28.65 64 63.97 64zm215.39-149.71c-19.32-20.76-55.47-51.99-55.47-154.29 0-77.7-54.48-139.9-127.94-155.16V32c0-17.67-14.32-32-31.98-32s-31.98 14.33-31.98 32v20.84C118.56 68.1 64.08 130.3 64.08 208c0 102.3-36.15 133.53-55.47 154.29-6 6.45-8.66 14.16-8.61 21.71.11 16.4 12.98 32 32.1 32h383.8c19.12 0 32-15.6 32.1-32 .05-7.55-2.61-15.27-8.61-21.71z"},child:[]}]})(t)}function Gt(t){return A({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M509.5 184.6L458.9 32.8C452.4 13.2 434.1 0 413.4 0H272v192h238.7c-.4-2.5-.4-5-1.2-7.4zM240 0H98.6c-20.7 0-39 13.2-45.5 32.8L2.5 184.6c-.8 2.4-.8 4.9-1.2 7.4H240V0zM0 224v240c0 26.5 21.5 48 48 48h416c26.5 0 48-21.5 48-48V224H0z"},child:[]}]})(t)}function Pr(t){return A({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M505 174.8l-39.6-39.6c-9.4-9.4-24.6-9.4-33.9 0L192 374.7 80.6 263.2c-9.4-9.4-24.6-9.4-33.9 0L7 302.9c-9.4 9.4-9.4 24.6 0 34L175 505c9.4 9.4 24.6 9.4 33.9 0l296-296.2c9.4-9.5 9.4-24.7.1-34zm-324.3 106c6.2 6.3 16.4 6.3 22.6 0l208-208.2c6.2-6.3 6.2-16.4 0-22.6L366.1 4.7c-6.2-6.3-16.4-6.3-22.6 0L192 156.2l-55.4-55.5c-6.2-6.3-16.4-6.3-22.6 0L68.7 146c-6.2 6.3-6.2 16.4 0 22.6l112 112.2z"},child:[]}]})(t)}function pe(t){return A({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z"},child:[]}]})(t)}function _r(t){return A({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M207.029 381.476L12.686 187.132c-9.373-9.373-9.373-24.569 0-33.941l22.667-22.667c9.357-9.357 24.522-9.375 33.901-.04L224 284.505l154.745-154.021c9.379-9.335 24.544-9.317 33.901.04l22.667 22.667c9.373 9.373 9.373 24.569 0 33.941L240.971 381.476c-9.373 9.372-24.569 9.372-33.942 0z"},child:[]}]})(t)}function W(t){return A({attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M285.476 272.971L91.132 467.314c-9.373 9.373-24.569 9.373-33.941 0l-22.667-22.667c-9.357-9.357-9.375-24.522-.04-33.901L188.505 256 34.484 101.255c-9.335-9.379-9.317-24.544.04-33.901l22.667-22.667c9.373-9.373 24.569-9.373 33.941 0L285.475 239.03c9.373 9.372 9.373 24.568.001 33.941z"},child:[]}]})(t)}function fe(t){return A({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256,8C119,8,8,119,8,256S119,504,256,504,504,393,504,256,393,8,256,8Zm92.49,313h0l-20,25a16,16,0,0,1-22.49,2.5h0l-67-49.72a40,40,0,0,1-15-31.23V112a16,16,0,0,1,16-16h32a16,16,0,0,1,16,16V256l58,42.5A16,16,0,0,1,348.49,321Z"},child:[]}]})(t)}function Tr(t){return A({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M342.8 352.7c5.7-9.6 9.2-20.7 9.2-32.7 0-35.3-28.7-64-64-64-17.2 0-32.8 6.9-44.3 17.9-16.3-29.6-47.5-49.9-83.7-49.9-53 0-96 43-96 96 0 2 .5 3.8.6 5.7C27.1 338.8 0 374.1 0 416c0 53 43 96 96 96h240c44.2 0 80-35.8 80-80 0-41.9-32.3-75.8-73.2-79.3zm222.5-54.3c-93.1 17.7-178.5-53.7-178.5-147.7 0-54.2 29-104 76.1-130.8 7.3-4.1 5.4-15.1-2.8-16.7C448.4 1.1 436.7 0 425 0 319.1 0 233.1 85.9 233.1 192c0 8.5.7 16.8 1.8 25 5.9 4.3 11.6 8.9 16.7 14.2 11.4-4.7 23.7-7.2 36.4-7.2 52.9 0 96 43.1 96 96 0 3.6-.2 7.2-.6 10.7 23.6 10.8 42.4 29.5 53.5 52.6 54.4-3.4 103.7-29.3 137.1-70.4 5.3-6.5-.5-16.1-8.7-14.5z"},child:[]}]})(t)}function Lr(t){return A({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M575.2 325.7c.2-1.9.8-3.7.8-5.6 0-35.3-28.7-64-64-64-12.6 0-24.2 3.8-34.1 10-17.6-38.8-56.5-66-101.9-66-61.8 0-112 50.1-112 112 0 3 .7 5.8.9 8.7-49.6 3.7-88.9 44.7-88.9 95.3 0 53 43 96 96 96h272c53 0 96-43 96-96 0-42.1-27.2-77.4-64.8-90.4zm-430.4-22.6c-43.7-43.7-43.7-114.7 0-158.3 43.7-43.7 114.7-43.7 158.4 0 9.7 9.7 16.9 20.9 22.3 32.7 9.8-3.7 20.1-6 30.7-7.5L386 81.1c4-11.9-7.3-23.1-19.2-19.2L279 91.2 237.5 8.4C232-2.8 216-2.8 210.4 8.4L169 91.2 81.1 61.9C69.3 58 58 69.3 61.9 81.1l29.3 87.8-82.8 41.5c-11.2 5.6-11.2 21.5 0 27.1l82.8 41.4-29.3 87.8c-4 11.9 7.3 23.1 19.2 19.2l76.1-25.3c6.1-12.4 14-23.7 23.6-33.5-13.1-5.4-25.4-13.4-36-24zm-4.8-79.2c0 40.8 29.3 74.8 67.9 82.3 8-4.7 16.3-8.8 25.2-11.7 5.4-44.3 31-82.5 67.4-105C287.3 160.4 258 140 224 140c-46.3 0-84 37.6-84 83.9z"},child:[]}]})(t)}function pt(t){return A({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M416 192c0-88.4-93.1-160-208-160S0 103.6 0 192c0 34.3 14.1 65.9 38 92-13.4 30.2-35.5 54.2-35.8 54.5-2.2 2.3-2.8 5.7-1.5 8.7S4.8 352 8 352c36.6 0 66.9-12.3 88.7-25 32.2 15.7 70.3 25 111.3 25 114.9 0 208-71.6 208-160zm122 220c23.9-26 38-57.7 38-92 0-66.9-53.5-124.2-129.3-148.1.9 6.6 1.3 13.3 1.3 20.1 0 105.9-107.7 192-240 192-10.8 0-21.3-.8-31.7-1.9C207.8 439.6 281.8 480 368 480c41 0 79.1-9.2 111.3-25 21.8 12.7 52.1 25 88.7 25 3.2 0 6.1-1.9 7.3-4.8 1.3-2.9.7-6.3-1.5-8.7-.3-.3-22.4-24.2-35.8-54.5z"},child:[]}]})(t)}function Ir(t){return A({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M0 432c0 26.5 21.5 48 48 48h480c26.5 0 48-21.5 48-48V256H0v176zm192-68c0-6.6 5.4-12 12-12h136c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H204c-6.6 0-12-5.4-12-12v-40zm-128 0c0-6.6 5.4-12 12-12h72c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H76c-6.6 0-12-5.4-12-12v-40zM576 80v48H0V80c0-26.5 21.5-48 48-48h480c26.5 0 48 21.5 48 48z"},child:[]}]})(t)}function Rr(t){return A({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M500 224h-30.364C455.724 130.325 381.675 56.276 288 42.364V12c0-6.627-5.373-12-12-12h-40c-6.627 0-12 5.373-12 12v30.364C130.325 56.276 56.276 130.325 42.364 224H12c-6.627 0-12 5.373-12 12v40c0 6.627 5.373 12 12 12h30.364C56.276 381.675 130.325 455.724 224 469.636V500c0 6.627 5.373 12 12 12h40c6.627 0 12-5.373 12-12v-30.364C381.675 455.724 455.724 381.675 469.636 288H500c6.627 0 12-5.373 12-12v-40c0-6.627-5.373-12-12-12zM288 404.634V364c0-6.627-5.373-12-12-12h-40c-6.627 0-12 5.373-12 12v40.634C165.826 392.232 119.783 346.243 107.366 288H148c6.627 0 12-5.373 12-12v-40c0-6.627-5.373-12-12-12h-40.634C119.768 165.826 165.757 119.783 224 107.366V148c0 6.627 5.373 12 12 12h40c6.627 0 12-5.373 12-12v-40.634C346.174 119.768 392.217 165.757 404.634 224H364c-6.627 0-12 5.373-12 12v40c0 6.627 5.373 12 12 12h40.634C392.232 346.174 346.243 392.217 288 404.634zM288 256c0 17.673-14.327 32-32 32s-32-14.327-32-32c0-17.673 14.327-32 32-32s32 14.327 32 32z"},child:[]}]})(t)}function qt(t){return A({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M402.6 83.2l90.2 90.2c3.8 3.8 3.8 10 0 13.8L274.4 405.6l-92.8 10.3c-12.4 1.4-22.9-9.1-21.5-21.5l10.3-92.8L388.8 83.2c3.8-3.8 10-3.8 13.8 0zm162-22.9l-48.8-48.8c-15.2-15.2-39.9-15.2-55.2 0l-35.4 35.4c-3.8 3.8-3.8 10 0 13.8l90.2 90.2c3.8 3.8 10 3.8 13.8 0l35.4-35.4c15.2-15.3 15.2-40 0-55.2zM384 346.2V448H64V128h229.8c3.2 0 6.2-1.3 8.5-3.5l40-40c7.6-7.6 2.2-20.5-8.5-20.5H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V306.2c0-10.7-12.9-16-20.5-8.5l-40 40c-2.2 2.3-3.5 5.3-3.5 8.5z"},child:[]}]})(t)}function Or(t){return A({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M502.3 190.8c3.9-3.1 9.7-.2 9.7 4.7V400c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V195.6c0-5 5.7-7.8 9.7-4.7 22.4 17.4 52.1 39.5 154.1 113.6 21.1 15.4 56.7 47.8 92.2 47.6 35.7.3 72-32.8 92.3-47.6 102-74.1 131.6-96.3 154-113.7zM256 320c23.2.4 56.6-29.2 73.4-41.4 132.7-96.3 142.8-104.7 173.4-128.7 5.8-4.5 9.2-11.5 9.2-18.9v-19c0-26.5-21.5-48-48-48H48C21.5 64 0 85.5 0 112v19c0 7.4 3.4 14.3 9.2 18.9 30.6 23.9 40.7 32.4 173.4 128.7 16.8 12.2 50.2 41.8 73.4 41.4z"},child:[]}]})(t)}function Mr(t){return A({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M216 23.86c0-23.8-30.65-32.77-44.15-13.04C48 191.85 224 200 224 288c0 35.63-29.11 64.46-64.85 63.99-35.17-.45-63.15-29.77-63.15-64.94v-85.51c0-21.7-26.47-32.23-41.43-16.5C27.8 213.16 0 261.33 0 320c0 105.87 86.13 192 192 192s192-86.13 192-192c0-170.29-168-193-168-296.14z"},child:[]}]})(t)}function Fr(t){return A({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M32 448c0 17.7 14.3 32 32 32h160V320H32v128zm256 32h160c17.7 0 32-14.3 32-32V320H288v160zm192-320h-42.1c6.2-12.1 10.1-25.5 10.1-40 0-48.5-39.5-88-88-88-41.6 0-68.5 21.3-103 68.3-34.5-47-61.4-68.3-103-68.3-48.5 0-88 39.5-88 88 0 14.5 3.8 27.9 10.1 40H32c-17.7 0-32 14.3-32 32v80c0 8.8 7.2 16 16 16h480c8.8 0 16-7.2 16-16v-80c0-17.7-14.3-32-32-32zm-326.1 0c-22.1 0-40-17.9-40-40s17.9-40 40-40c19.9 0 34.6 3.3 86.1 80h-86.1zm206.1 0h-86.1c51.4-76.5 65.7-80 86.1-80 22.1 0 40 17.9 40 40s-17.9 40-40 40z"},child:[]}]})(t)}function Ke(t){return A({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M462.3 62.6C407.5 15.9 326 24.3 275.7 76.2L256 96.5l-19.7-20.3C186.1 24.3 104.5 15.9 49.7 62.6c-62.8 53.6-66.1 149.8-9.9 207.9l193.5 199.8c12.5 12.9 32.8 12.9 45.3 0l193.5-199.8c56.3-58.1 53-154.3-9.8-207.9z"},child:[]}]})(t)}function Wt(t){return A({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M504 255.531c.253 136.64-111.18 248.372-247.82 248.468-59.015.042-113.223-20.53-155.822-54.911-11.077-8.94-11.905-25.541-1.839-35.607l11.267-11.267c8.609-8.609 22.353-9.551 31.891-1.984C173.062 425.135 212.781 440 256 440c101.705 0 184-82.311 184-184 0-101.705-82.311-184-184-184-48.814 0-93.149 18.969-126.068 49.932l50.754 50.754c10.08 10.08 2.941 27.314-11.313 27.314H24c-8.837 0-16-7.163-16-16V38.627c0-14.254 17.234-21.393 27.314-11.314l49.372 49.372C129.209 34.136 189.552 8 256 8c136.81 0 247.747 110.78 248 247.531zm-180.912 78.784l9.823-12.63c8.138-10.463 6.253-25.542-4.21-33.679L288 256.349V152c0-13.255-10.745-24-24-24h-16c-13.255 0-24 10.745-24 24v135.651l65.409 50.874c10.463 8.137 25.541 6.253 33.679-4.21z"},child:[]}]})(t)}function He(t){return A({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 110c23.196 0 42 18.804 42 42s-18.804 42-42 42-42-18.804-42-42 18.804-42 42-42zm56 254c0 6.627-5.373 12-12 12h-88c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h12v-64h-12c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h64c6.627 0 12 5.373 12 12v100h12c6.627 0 12 5.373 12 12v24z"},child:[]}]})(t)}function q(t){return A({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M172.268 501.67C26.97 291.031 0 269.413 0 192 0 85.961 85.961 0 192 0s192 85.961 192 192c0 77.413-26.97 99.031-172.268 309.67-9.535 13.774-29.93 13.773-39.464 0zM192 272c44.183 0 80-35.817 80-80s-35.817-80-80-80-80 35.817-80 80 35.817 80 80 80z"},child:[]}]})(t)}function Ze(t){return A({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M416 208H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h384c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"},child:[]}]})(t)}function ft(t){return A({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M621.16 54.46C582.37 38.19 543.55 32 504.75 32c-123.17-.01-246.33 62.34-369.5 62.34-30.89 0-61.76-3.92-92.65-13.72-3.47-1.1-6.95-1.62-10.35-1.62C15.04 79 0 92.32 0 110.81v317.26c0 12.63 7.23 24.6 18.84 29.46C57.63 473.81 96.45 480 135.25 480c123.17 0 246.34-62.35 369.51-62.35 30.89 0 61.76 3.92 92.65 13.72 3.47 1.1 6.95 1.62 10.35 1.62 17.21 0 32.25-13.32 32.25-31.81V83.93c-.01-12.64-7.24-24.6-18.85-29.47zM48 132.22c20.12 5.04 41.12 7.57 62.72 8.93C104.84 170.54 79 192.69 48 192.69v-60.47zm0 285v-47.78c34.37 0 62.18 27.27 63.71 61.4-22.53-1.81-43.59-6.31-63.71-13.62zM320 352c-44.19 0-80-42.99-80-96 0-53.02 35.82-96 80-96s80 42.98 80 96c0 53.03-35.83 96-80 96zm272 27.78c-17.52-4.39-35.71-6.85-54.32-8.44 5.87-26.08 27.5-45.88 54.32-49.28v57.72zm0-236.11c-30.89-3.91-54.86-29.7-55.81-61.55 19.54 2.17 38.09 6.23 55.81 12.66v48.89z"},child:[]}]})(t)}function Br(t){return A({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M283.211 512c78.962 0 151.079-35.925 198.857-94.792 7.068-8.708-.639-21.43-11.562-19.35-124.203 23.654-238.262-71.576-238.262-196.954 0-72.222 38.662-138.635 101.498-174.394 9.686-5.512 7.25-20.197-3.756-22.23A258.156 258.156 0 0 0 283.211 0c-141.309 0-256 114.511-256 256 0 141.309 114.511 256 256 256z"},child:[]}]})(t)}function we(t){return A({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M512.9 192c-14.9-.1-29.1 2.3-42.4 6.9L437.6 144H520c13.3 0 24-10.7 24-24V88c0-13.3-10.7-24-24-24h-45.3c-6.8 0-13.3 2.9-17.8 7.9l-37.5 41.7-22.8-38C392.2 68.4 384.4 64 376 64h-80c-8.8 0-16 7.2-16 16v16c0 8.8 7.2 16 16 16h66.4l19.2 32H227.9c-17.7-23.1-44.9-40-99.9-40H72.5C59 104 47.7 115 48 128.5c.2 13 10.9 23.5 24 23.5h56c24.5 0 38.7 10.9 47.8 24.8l-11.3 20.5c-13-3.9-26.9-5.7-41.3-5.2C55.9 194.5 1.6 249.6 0 317c-1.6 72.1 56.3 131 128 131 59.6 0 109.7-40.8 124-96h84.2c13.7 0 24.6-11.4 24-25.1-2.1-47.1 17.5-93.7 56.2-125l12.5 20.8c-27.6 23.7-45.1 58.9-44.8 98.2.5 69.6 57.2 126.5 126.8 127.1 71.6.7 129.8-57.5 129.2-129.1-.7-69.6-57.6-126.4-127.2-126.9zM128 400c-44.1 0-80-35.9-80-80s35.9-80 80-80c4.2 0 8.4.3 12.5 1L99 316.4c-8.8 16 2.8 35.6 21 35.6h81.3c-12.4 28.2-40.6 48-73.3 48zm463.9-75.6c-2.2 40.6-35 73.4-75.5 75.5-46.1 2.5-84.4-34.3-84.4-79.9 0-21.4 8.4-40.8 22.1-55.1l49.4 82.4c4.5 7.6 14.4 10 22 5.5l13.7-8.2c7.6-4.5 10-14.4 5.5-22l-48.6-80.9c5.2-1.1 10.5-1.6 15.9-1.6 45.6-.1 82.3 38.2 79.9 84.3z"},child:[]}]})(t)}function zr(t){return A({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M476 3.2L12.5 270.6c-18.1 10.4-15.8 35.6 2.2 43.2L121 358.4l287.3-253.2c5.5-4.9 13.3 2.6 8.6 8.3L176 407v80.5c0 23.6 28.5 32.9 42.5 15.8L282 426l124.6 52.2c14.2 6 30.4-2.9 33-18.2l72-432C515 7.8 493.3-6.8 476 3.2z"},child:[]}]})(t)}function Hr(t){return A({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M109.25 173.25c24.99-24.99 24.99-65.52 0-90.51-24.99-24.99-65.52-24.99-90.51 0-24.99 24.99-24.99 65.52 0 90.51 25 25 65.52 25 90.51 0zm256 165.49c-24.99-24.99-65.52-24.99-90.51 0-24.99 24.99-24.99 65.52 0 90.51 24.99 24.99 65.52 24.99 90.51 0 25-24.99 25-65.51 0-90.51zm-1.94-231.43l-22.62-22.62c-12.5-12.5-32.76-12.5-45.25 0L20.69 359.44c-12.5 12.5-12.5 32.76 0 45.25l22.62 22.62c12.5 12.5 32.76 12.5 45.25 0l274.75-274.75c12.5-12.49 12.5-32.75 0-45.25z"},child:[]}]})(t)}function ae(t){return A({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M493.4 24.6l-104-24c-11.3-2.6-22.9 3.3-27.5 13.9l-48 112c-4.2 9.8-1.4 21.3 6.9 28l60.6 49.6c-36 76.7-98.9 140.5-177.2 177.2l-49.6-60.6c-6.8-8.3-18.2-11.1-28-6.9l-112 48C3.9 366.5-2 378.1.6 389.4l24 104C27.1 504.2 36.7 512 48 512c256.1 0 464-207.5 464-464 0-11.2-7.7-20.9-18.6-23.4z"},child:[]}]})(t)}function le(t){return A({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"},child:[]}]})(t)}function $r(t){return A({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M504 256c0 136.997-111.043 248-248 248S8 392.997 8 256C8 119.083 119.043 8 256 8s248 111.083 248 248zM262.655 90c-54.497 0-89.255 22.957-116.549 63.758-3.536 5.286-2.353 12.415 2.715 16.258l34.699 26.31c5.205 3.947 12.621 3.008 16.665-2.122 17.864-22.658 30.113-35.797 57.303-35.797 20.429 0 45.698 13.148 45.698 32.958 0 14.976-12.363 22.667-32.534 33.976C247.128 238.528 216 254.941 216 296v4c0 6.627 5.373 12 12 12h56c6.627 0 12-5.373 12-12v-1.333c0-28.462 83.186-29.647 83.186-106.667 0-58.002-60.165-102-116.531-102zM256 338c-25.365 0-46 20.635-46 46 0 25.364 20.635 46 46 46s46-20.636 46-46c0-25.365-20.635-46-46-46z"},child:[]}]})(t)}function Ur(t){return A({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M500.33 0h-47.41a12 12 0 0 0-12 12.57l4 82.76A247.42 247.42 0 0 0 256 8C119.34 8 7.9 119.53 8 256.19 8.1 393.07 119.1 504 256 504a247.1 247.1 0 0 0 166.18-63.91 12 12 0 0 0 .48-17.43l-34-34a12 12 0 0 0-16.38-.55A176 176 0 1 1 402.1 157.8l-101.53-4.87a12 12 0 0 0-12.57 12v47.41a12 12 0 0 0 12 12h200.33a12 12 0 0 0 12-12V12a12 12 0 0 0-12-12z"},child:[]}]})(t)}function se(t){return A({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"},child:[]}]})(t)}function Vr(t){return A({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M503.691 189.836L327.687 37.851C312.281 24.546 288 35.347 288 56.015v80.053C127.371 137.907 0 170.1 0 322.326c0 61.441 39.581 122.309 83.333 154.132 13.653 9.931 33.111-2.533 28.077-18.631C66.066 312.814 132.917 274.316 288 272.085V360c0 20.7 24.3 31.453 39.687 18.164l176.004-152c11.071-9.562 11.086-26.753 0-36.328z"},child:[]}]})(t)}function Gr(t){return A({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M466.5 83.7l-192-80a48.15 48.15 0 0 0-36.9 0l-192 80C27.7 91.1 16 108.6 16 128c0 198.5 114.5 335.7 221.5 380.3 11.8 4.9 25.1 4.9 36.9 0C360.1 472.6 496 349.3 496 128c0-19.4-11.7-36.9-29.5-44.3zM256.1 446.3l-.1-381 175.9 73.3c-3.3 151.4-82.1 261.1-175.8 307.7z"},child:[]}]})(t)}function _e(t){return A({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M352 160v-32C352 57.42 294.579 0 224 0 153.42 0 96 57.42 96 128v32H0v272c0 44.183 35.817 80 80 80h288c44.183 0 80-35.817 80-80V160h-96zm-192-32c0-35.29 28.71-64 64-64s64 28.71 64 64v32H160v-32zm160 120c-13.255 0-24-10.745-24-24s10.745-24 24-24 24 10.745 24 24-10.745 24-24 24zm-192 0c-13.255 0-24-10.745-24-24s10.745-24 24-24 24 10.745 24 24-10.745 24-24 24z"},child:[]}]})(t)}function qr(t){return A({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M528.12 301.319l47.273-208C578.806 78.301 567.391 64 551.99 64H159.208l-9.166-44.81C147.758 8.021 137.93 0 126.529 0H24C10.745 0 0 10.745 0 24v16c0 13.255 10.745 24 24 24h69.883l70.248 343.435C147.325 417.1 136 435.222 136 456c0 30.928 25.072 56 56 56s56-25.072 56-56c0-15.674-6.447-29.835-16.824-40h209.647C430.447 426.165 424 440.326 424 456c0 30.928 25.072 56 56 56s56-25.072 56-56c0-22.172-12.888-41.332-31.579-50.405l5.517-24.276c3.413-15.018-8.002-29.319-23.403-29.319H218.117l-6.545-32h293.145c11.206 0 20.92-7.754 23.403-18.681z"},child:[]}]})(t)}function Wr(t){return A({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M497 273L329 441c-15 15-41 4.5-41-17v-96H152c-13.3 0-24-10.7-24-24v-96c0-13.3 10.7-24 24-24h136V88c0-21.4 25.9-32 41-17l168 168c9.3 9.4 9.3 24.6 0 34zM192 436v-40c0-6.6-5.4-12-12-12H96c-17.7 0-32-14.3-32-32V160c0-17.7 14.3-32 32-32h84c6.6 0 12-5.4 12-12V76c0-6.6-5.4-12-12-12H96c-53 0-96 43-96 96v192c0 53 43 96 96 96h84c6.6 0 12-5.4 12-12z"},child:[]}]})(t)}function Yt(t){return A({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M259.3 17.8L194 150.2 47.9 171.5c-26.2 3.8-36.7 36.1-17.7 54.6l105.7 103-25 145.5c-4.5 26.3 23.2 46 46.4 33.7L288 439.6l130.7 68.7c23.2 12.2 50.9-7.4 46.4-33.7l-25-145.5 105.7-103c19-18.5 8.5-50.8-17.7-54.6L382 150.2 316.7 17.8c-11.7-23.6-45.6-23.9-57.4 0z"},child:[]}]})(t)}function ce(t){return A({attr:{viewBox:"0 0 616 512"},child:[{tag:"path",attr:{d:"M602 118.6L537.1 15C531.3 5.7 521 0 510 0H106C95 0 84.7 5.7 78.9 15L14 118.6c-33.5 53.5-3.8 127.9 58.8 136.4 4.5.6 9.1.9 13.7.9 29.6 0 55.8-13 73.8-33.1 18 20.1 44.3 33.1 73.8 33.1 29.6 0 55.8-13 73.8-33.1 18 20.1 44.3 33.1 73.8 33.1 29.6 0 55.8-13 73.8-33.1 18.1 20.1 44.3 33.1 73.8 33.1 4.7 0 9.2-.3 13.7-.9 62.8-8.4 92.6-82.8 59-136.4zM529.5 288c-10 0-19.9-1.5-29.5-3.8V384H116v-99.8c-9.6 2.2-19.5 3.8-29.5 3.8-6 0-12.1-.4-18-1.2-5.6-.8-11.1-2.1-16.4-3.6V480c0 17.7 14.3 32 32 32h448c17.7 0 32-14.3 32-32V283.2c-5.4 1.6-10.8 2.9-16.4 3.6-6.1.8-12.1 1.2-18.2 1.2z"},child:[]}]})(t)}function Yr(t){return A({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 160c-52.9 0-96 43.1-96 96s43.1 96 96 96 96-43.1 96-96-43.1-96-96-96zm246.4 80.5l-94.7-47.3 33.5-100.4c4.5-13.6-8.4-26.5-21.9-21.9l-100.4 33.5-47.4-94.8c-6.4-12.8-24.6-12.8-31 0l-47.3 94.7L92.7 70.8c-13.6-4.5-26.5 8.4-21.9 21.9l33.5 100.4-94.7 47.4c-12.8 6.4-12.8 24.6 0 31l94.7 47.3-33.5 100.5c-4.5 13.6 8.4 26.5 21.9 21.9l100.4-33.5 47.3 94.7c6.4 12.8 24.6 12.8 31 0l47.3-94.7 100.4 33.5c13.6 4.5 26.5-8.4 21.9-21.9l-33.5-100.4 94.7-47.3c13-6.5 13-24.7.2-31.1zm-155.9 106c-49.9 49.9-131.1 49.9-181 0-49.9-49.9-49.9-131.1 0-181 49.9-49.9 131.1-49.9 181 0 49.9 49.9 49.9 131.1 0 181z"},child:[]}]})(t)}function Kr(t){return A({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M0 252.118V48C0 21.49 21.49 0 48 0h204.118a48 48 0 0 1 33.941 14.059l211.882 211.882c18.745 18.745 18.745 49.137 0 67.882L293.823 497.941c-18.745 18.745-49.137 18.745-67.882 0L14.059 286.059A48 48 0 0 1 0 252.118zM112 64c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48z"},child:[]}]})(t)}function Je(t){return A({attr:{viewBox:"0 0 352 512"},child:[{tag:"path",attr:{d:"M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"},child:[]}]})(t)}function Kt(t){return A({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16zM53.2 467a48 48 0 0 0 47.9 45h245.8a48 48 0 0 0 47.9-45L416 128H32z"},child:[]}]})(t)}function Zr(t){return A({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M624 352h-16V243.9c0-12.7-5.1-24.9-14.1-33.9L494 110.1c-9-9-21.2-14.1-33.9-14.1H416V48c0-26.5-21.5-48-48-48H48C21.5 0 0 21.5 0 48v320c0 26.5 21.5 48 48 48h16c0 53 43 96 96 96s96-43 96-96h128c0 53 43 96 96 96s96-43 96-96h48c8.8 0 16-7.2 16-16v-32c0-8.8-7.2-16-16-16zM160 464c-26.5 0-48-21.5-48-48s21.5-48 48-48 48 21.5 48 48-21.5 48-48 48zm320 0c-26.5 0-48-21.5-48-48s21.5-48 48-48 48 21.5 48 48-21.5 48-48 48zm80-208H416V144h44.1l99.9 99.9V256z"},child:[]}]})(t)}function Zt(t){return A({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z"},child:[]}]})(t)}function gt(t){return A({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M461.2 128H80c-8.84 0-16-7.16-16-16s7.16-16 16-16h384c8.84 0 16-7.16 16-16 0-26.51-21.49-48-48-48H64C28.65 32 0 60.65 0 96v320c0 35.35 28.65 64 64 64h397.2c28.02 0 50.8-21.53 50.8-48V176c0-26.47-22.78-48-50.8-48zM416 336c-17.67 0-32-14.33-32-32s14.33-32 32-32 32 14.33 32 32-14.33 32-32 32z"},child:[]}]})(t)}function Jr(t){return A({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm0 448c-110.5 0-200-89.5-200-200S145.5 56 256 56s200 89.5 200 200-89.5 200-200 200zm61.8-104.4l-84.9-61.7c-3.1-2.3-4.9-5.9-4.9-9.7V116c0-6.6 5.4-12 12-12h32c6.6 0 12 5.4 12 12v141.7l66.8 48.6c5.4 3.9 6.5 11.4 2.6 16.8L334.6 349c-3.9 5.3-11.4 6.5-16.8 2.6z"},child:[]}]})(t)}const Qr=()=>e.jsx(P.div,{initial:{scale:0,opacity:0},animate:{scale:1,opacity:1},transition:{type:"spring",stiffness:200,damping:15},className:"flex flex-col items-center",children:e.jsx("img",{src:"/assets/flyp_logo.png",alt:"FLYP",className:"w-24 h-24 object-contain"})}),Xr=()=>{const{simpleLogin:t,loading:s,error:r}=ie(),[a,n]=m.useState(""),[i,l]=m.useState(""),[c,d]=m.useState(1),u=o=>{o.preventDefault(),a.length>=10&&d(2)},f=async o=>{o.preventDefault(),i.trim()&&a.length>=10&&await t(a,i.trim())};return e.jsxs("div",{className:"min-h-screen bg-[#060D2D] flex flex-col relative overflow-hidden",children:[e.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[e.jsx("div",{className:"absolute -top-40 -right-40 w-80 h-80 rounded-full bg-emerald-500/10 blur-3xl"}),e.jsx("div",{className:"absolute -bottom-40 -left-40 w-96 h-96 rounded-full bg-teal-500/10 blur-3xl"}),e.jsx("div",{className:"absolute top-1/3 left-1/2 -translate-x-1/2 w-64 h-64 rounded-full bg-emerald-500/5 blur-3xl"}),e.jsx("div",{className:"absolute inset-0 bg-[url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGRlZnM+PHBhdHRlcm4gaWQ9ImdyaWQiIHdpZHRoPSI0MCIgaGVpZ2h0PSI0MCIgcGF0dGVyblVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+PHBhdGggZD0iTSAwIDEwIEwgNDAgMTAgTSAxMCAwIEwgMTAgNDAgTSAwIDIwIEwgNDAgMjAgTSAyMCAwIEwgMjAgNDAgTSAwIDMwIEwgNDAgMzAgTSAzMCAwIEwgMzAgNDAiIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzFmMjkzNyIgc3Ryb2tlLXdpZHRoPSIxIi8+PC9wYXR0ZXJuPjwvZGVmcz48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJ1cmwoI2dyaWQpIi8+PC9zdmc+')] opacity-30"})]}),e.jsxs("div",{className:"flex-1 flex flex-col justify-center px-8 relative z-10 py-12",style:{paddingTop:"calc(env(safe-area-inset-top) + 48px)"},children:[e.jsxs(P.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"text-center mb-10",children:[e.jsx("div",{className:"flex justify-center mb-6",children:e.jsx(Qr,{})}),e.jsxs(P.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},children:[e.jsx("h1",{className:"text-3xl font-black text-white mb-2 tracking-tight",children:"FLYP Shop"}),e.jsx("p",{className:"text-white/60 text-lg",children:"Groceries in minutes"})]})]}),e.jsx(P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},children:e.jsx(te,{mode:"wait",children:c===1?e.jsxs(P.form,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},onSubmit:u,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-white/70 mb-3",children:"Enter your phone number"}),e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"absolute left-5 top-1/2 -translate-y-1/2 flex items-center gap-3 border-r border-white/10 pr-3",children:[e.jsx("span",{className:"text-xl",children:""}),e.jsx("span",{className:"text-white font-semibold",children:"+91"})]}),e.jsx("input",{type:"tel",value:a,onChange:o=>n(o.target.value.replace(/\D/g,"").slice(0,10)),placeholder:"Enter 10 digit number",className:"w-full pl-28 pr-5 py-5 bg-[#101B4A]/80 backdrop-blur-xl rounded-2xl text-white font-semibold text-lg focus:outline-none focus:ring-2 focus:ring-emerald-500 transition-all border border-white/10 placeholder-slate-500",autoFocus:!0})]})]}),e.jsxs(P.button,{whileTap:{scale:.98},type:"submit",disabled:a.length<10,className:`w-full py-5 rounded-2xl font-bold text-lg flex items-center justify-center gap-3 transition-all duration-300 ${a.length>=10?"bg-gradient-to-r from-emerald-500 to-teal-500 text-white shadow-xl shadow-emerald-500/30":"bg-[#101B4A] text-white/40 border border-white/10"}`,children:["Continue",e.jsx(Dr,{className:a.length>=10?"":"opacity-50"})]})]},"phone"):e.jsxs(P.form,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},onSubmit:f,className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between bg-[#101B4A]/80 backdrop-blur-xl rounded-2xl px-5 py-4 border border-white/10",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-2xl bg-emerald-500/10 border border-emerald-500/20 flex items-center justify-center",children:e.jsx(ae,{className:"text-[#05E06C]400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-white/40 font-medium",children:"Phone Number"}),e.jsxs("p",{className:"font-bold text-white",children:["+91 ",a]})]})]}),e.jsx("button",{type:"button",onClick:()=>d(1),className:"w-10 h-10 rounded-xl bg-slate-700 flex items-center justify-center border border-slate-600",children:e.jsx(K,{className:"text-white/60 text-sm"})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-white/70 mb-3",children:"What should we call you?"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute left-5 top-1/2 -translate-y-1/2",children:e.jsx(Zt,{className:"text-white/40"})}),e.jsx("input",{type:"text",value:i,onChange:o=>l(o.target.value),placeholder:"Enter your name",className:"w-full pl-14 pr-5 py-5 bg-[#101B4A]/80 backdrop-blur-xl rounded-2xl text-white font-semibold text-lg focus:outline-none focus:ring-2 focus:ring-emerald-500 transition-all border border-white/10 placeholder-slate-500",autoFocus:!0})]})]}),r&&e.jsx(P.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"p-4 bg-red-500/10 border border-red-500/20 rounded-2xl",children:e.jsx("p",{className:"text-red-400 text-sm font-medium",children:r})}),e.jsx(P.button,{whileTap:{scale:.98},type:"submit",disabled:!i.trim()||s,className:`w-full py-5 rounded-2xl font-bold text-lg flex items-center justify-center gap-3 transition-all duration-300 ${i.trim()?"bg-gradient-to-r from-emerald-500 to-teal-500 text-white shadow-xl shadow-emerald-500/30":"bg-[#101B4A] text-white/40 border border-white/10"}`,children:s?e.jsx(P.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"w-6 h-6 border-3 border-white border-t-transparent rounded-full"}):e.jsxs(e.Fragment,{children:["Get Started",e.jsx(ze,{className:"text-xl"})]})})]},"name")})}),e.jsx(P.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.5},className:"mt-12 grid grid-cols-3 gap-4",children:[{icon:"",label:"Express Delivery"},{icon:"",label:"Local Stores"},{icon:"",label:"Best Prices"}].map((o,h)=>e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-14 h-14 rounded-2xl bg-[#101B4A]/80 border border-white/10 flex items-center justify-center mx-auto mb-2 text-2xl",children:o.icon}),e.jsx("p",{className:"text-xs font-medium text-white/40",children:o.label})]},h))}),e.jsxs(P.p,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.6},className:"text-xs text-white/40 text-center mt-10 px-4",children:["By continuing, you agree to our"," ",e.jsx("a",{href:"/terms",className:"text-[#05E06C]400 font-medium",children:"Terms of Service"})," ","and"," ",e.jsx("a",{href:"/privacy",className:"text-[#05E06C]400 font-medium",children:"Privacy Policy"})]})]}),e.jsx("div",{className:"h-8",style:{paddingBottom:"env(safe-area-inset-bottom)"}})]})},ea=(t,s,r,a)=>{const i=(r-t)*Math.PI/180,l=(a-s)*Math.PI/180,c=Math.sin(i/2)*Math.sin(i/2)+Math.cos(t*Math.PI/180)*Math.cos(r*Math.PI/180)*Math.sin(l/2)*Math.sin(l/2);return 6371*(2*Math.atan2(Math.sqrt(c),Math.sqrt(1-c)))},Te=async(t,s,r=50,a=20)=>{try{const n=Y(B,"stores"),i=await ne(n),l=[];return i.docs.forEach(c=>{const d=c.data();if(d.isActive===!1)return;let u,f;d.location&&(u=d.location.latitude||d.location._lat,f=d.location.longitude||d.location._long);let o=null;u&&f&&t&&s&&(o=ea(t,s,u,f)),l.push({id:c.id,...d,distance:o!==null?Math.round(o*10)/10:null})}),l.sort((c,d)=>c.distance===null?1:d.distance===null?-1:c.distance-d.distance),l.slice(0,a)}catch(n){throw console.error("Error fetching nearby stores:",n),n}},Jt=async t=>{try{const s=await Ne(J(B,"stores",t));return s.exists()?{id:s.id,...s.data()}:null}catch(s){throw console.error("Error fetching store:",s),s}},ta=async(t,s=null,r=100)=>{try{const a=Y(B,"stores",t,"products");let i=(await ne(a)).docs.map(l=>({id:l.id,storeId:t,...l.data()}));return i=i.filter(l=>{const c=l.onMarketplace===!0||l.isAvailable===!0||l.syncedToMarketplace===!0||l.marketplaceEnabled===!0||l.onMarketplace===void 0&&l.isAvailable===void 0,d=!s||l.category===s;return c&&d}),i.sort((l,c)=>{const d=l.stock!==void 0&&l.stock<=0,u=c.stock!==void 0&&c.stock<=0;return d!==u?d?1:-1:l.category!==c.category?(l.category||"").localeCompare(c.category||""):(l.name||"").localeCompare(c.name||"")}),i.slice(0,r)}catch(a){throw console.error("Error fetching store products:",a),a}},sa=async t=>{try{const s=await Ne(J(B,"stores",t));if(s.exists()&&s.data().categories?.length>0)return s.data().categories;const r=Y(B,"stores",t,"products"),a=await ne(r),n=new Set;return a.docs.forEach(l=>{const c=l.data();c.category&&n.add(c.category)}),Array.from(n).sort()}catch(s){throw console.error("Error fetching categories:",s),s}},ra=async(t,s,r,a=5)=>{try{const n=await Te(s,r,a,50),i=t.toLowerCase(),l=[];for(const c of n){const d=Y(B,"stores",c.id,"products");(await ne(Pe(d,Ge("isAvailable","==",!0),qe(100)))).docs.forEach(f=>{const o=f.data(),h=(o.name||"").toLowerCase(),p=(o.searchKeywords||[]).map(C=>C.toLowerCase()),x=(o.category||"").toLowerCase();(h.includes(i)||p.some(C=>C.includes(i))||x.includes(i))&&l.push({id:f.id,storeId:c.id,storeName:c.businessName,storeDistance:c.distance,...o})})}return l.sort((c,d)=>{const u=c.name.toLowerCase()===i,f=d.name.toLowerCase()===i;return u&&!f?-1:!u&&f?1:c.storeDistance-d.storeDistance}),l}catch(n){throw console.error("Error searching products:",n),n}},aa=async(t,s,r=3,a=20)=>{try{const n=await Te(t,s,r,10),i=[];for(const l of n.slice(0,5)){const c=Y(B,"stores",l.id,"products"),d=Pe(c,Ge("isAvailable","==",!0),qe(10));(await ne(d)).docs.forEach(f=>{i.push({id:f.id,storeId:l.id,storeName:l.businessName,storeDistance:l.distance,...f.data()})})}return i.sort(()=>Math.random()-.5).slice(0,a)}catch(n){throw console.error("Error fetching featured products:",n),n}},Qt=async(t,s,r=5)=>{try{const a=await Te(t,s,r,20),n=new Set;a.forEach(c=>{(c.categories||[]).forEach(d=>n.add(d))});const i=Array.from(n),l={grocery:{icon:"",color:"from-green-500 to-green-600"},dairy:{icon:"",color:"from-blue-400 to-blue-500"},fruits:{icon:"",color:"from-red-400 to-red-500"},vegetables:{icon:"",color:"from-green-400 to-green-500"},snacks:{icon:"",color:"from-yellow-400 to-yellow-500"},beverages:{icon:"",color:"from-purple-400 to-purple-500"},"personal care":{icon:"",color:"from-pink-400 to-pink-500"},household:{icon:"",color:"from-indigo-400 to-indigo-500"},medicines:{icon:"",color:"from-teal-400 to-teal-500"},"baby care":{icon:"",color:"from-rose-400 to-rose-500"},"pet supplies":{icon:"",color:"from-amber-400 to-amber-500"},stationery:{icon:"",color:"from-cyan-400 to-cyan-500"}};return i.map(c=>({name:c,...l[c.toLowerCase()]||{icon:"",color:"from-gray-400 to-gray-500"}}))}catch(a){throw console.error("Error fetching categories:",a),a}},na="AIzaSyBPkkXZWll0VifG5kb0DDSsoV5UB-n5pFE",ia=()=>{const[t,s]=m.useState(new Date);m.useEffect(()=>{const u=setInterval(()=>s(new Date),1e3);return()=>clearInterval(u)},[]);const r=t.getHours(),n=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][t.getDay()],l=r>=5&&r<12?{text:"Good Morning",icon:Yr,color:"text-amber-400",bg:"bg-amber-500/10"}:r>=12&&r<17?{text:"Good Afternoon",icon:Lr,color:"text-orange-400",bg:"bg-orange-500/10"}:r>=17&&r<21?{text:"Good Evening",icon:Tr,color:"text-purple-400",bg:"bg-purple-500/10"}:{text:"Good Night",icon:Br,color:"text-indigo-400",bg:"bg-indigo-500/10"},c=l.icon,d=t.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0});return e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-10 h-10 rounded-xl ${l.bg} flex items-center justify-center`,children:e.jsx(c,{className:`text-lg ${l.color}`})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-white",children:l.text}),e.jsxs("p",{className:"text-xs text-white/40",children:[n,"  ",d]})]})]})},la=({isOpen:t,onClose:s,currentLocation:r,onLocationSelect:a})=>{const[n,i]=m.useState(""),[l,c]=m.useState(!1),[d,u]=m.useState(!1),[f,o]=m.useState(""),[h,p]=m.useState(null),[x,C]=m.useState(!1),k=m.useRef(null),j=m.useRef(null),w=m.useRef(null),D=m.useRef(null),v=m.useRef(null),R=m.useRef(null),[y]=m.useState([{id:1,label:"Home",address:"123 Main Street, Mumbai",lat:19.076,lng:72.8777,isDefault:!0},{id:2,label:"Work",address:"456 Business Park, Andheri",lat:19.1136,lng:72.8697}]);m.useEffect(()=>{if(!t)return;(()=>{if(window.google&&window.google.maps){u(!0);return}const E=document.createElement("script");E.src=`https://maps.googleapis.com/maps/api/js?key=${na}&libraries=places,geocoding`,E.async=!0,E.defer=!0,E.onload=()=>u(!0),document.head.appendChild(E)})()},[t]),m.useEffect(()=>{if(!x||!d||!k.current)return;(()=>{const E=r?{lat:r.lat,lng:r.lng}:{lat:19.076,lng:72.8777};j.current=new window.google.maps.Map(k.current,{center:E,zoom:15,styles:[{elementType:"geometry",stylers:[{color:"#0A1340"}]},{elementType:"labels.text.stroke",stylers:[{color:"#0A1340"}]},{elementType:"labels.text.fill",stylers:[{color:"#746855"}]},{featureType:"road",elementType:"geometry",stylers:[{color:"#101B4A"}]},{featureType:"road",elementType:"labels.text.fill",stylers:[{color:"#9ca5b3"}]},{featureType:"water",elementType:"geometry",stylers:[{color:"#060D2D"}]}],disableDefaultUI:!0,zoomControl:!0}),w.current=new window.google.maps.Marker({position:E,map:j.current,draggable:!0,icon:{path:window.google.maps.SymbolPath.CIRCLE,scale:12,fillColor:"#05E06C",fillOpacity:1,strokeColor:"#060D2D",strokeWeight:3}}),D.current=new window.google.maps.Geocoder,w.current.addListener("dragend",()=>{const I=w.current.getPosition();p({lat:I.lat(),lng:I.lng()}),L(I.lat(),I.lng())}),j.current.addListener("click",I=>{w.current.setPosition(I.latLng),p({lat:I.latLng.lat(),lng:I.latLng.lng()}),L(I.latLng.lat(),I.latLng.lng())}),L(E.lat,E.lng)})()},[x,d,r]),m.useEffect(()=>{!d||!R.current||x||(v.current=new window.google.maps.places.Autocomplete(R.current,{componentRestrictions:{country:"in"},fields:["formatted_address","geometry","name"]}),v.current.addListener("place_changed",()=>{const b=v.current.getPlace();if(b.geometry){const E={lat:b.geometry.location.lat(),lng:b.geometry.location.lng(),label:b.name||"Selected Location",address:b.formatted_address};a(E),s()}}))},[d,x,a,s]);const L=(b,E)=>{D.current&&D.current.geocode({location:{lat:b,lng:E}},(I,M)=>{M==="OK"&&I[0]&&o(I[0].formatted_address)})},g=()=>{c(!0),navigator.geolocation&&navigator.geolocation.getCurrentPosition(b=>{const E=b.coords.latitude,I=b.coords.longitude;window.google&&D.current?D.current.geocode({location:{lat:E,lng:I}},(M,$)=>{const _=$==="OK"&&M[0]?M[0].formatted_address:"Current Location";a({lat:E,lng:I,label:"Current Location",address:_}),c(!1),s()}):(a({lat:E,lng:I,label:"Current Location",address:"Using GPS"}),c(!1),s())},()=>{c(!1),alert("Unable to detect location. Please select manually.")},{enableHighAccuracy:!0,timeout:1e4})},S=()=>{h&&f&&(a({lat:h.lat,lng:h.lng,label:"Dropped Pin",address:f}),s())};return t?e.jsx(P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[100] bg-black/60 backdrop-blur-sm",onClick:s,children:e.jsxs(P.div,{initial:{y:"100%"},animate:{y:0},exit:{y:"100%"},transition:{type:"spring",damping:25,stiffness:300},onClick:b=>b.stopPropagation(),className:"absolute bottom-0 left-0 right-0 bg-[#060D2D] rounded-t-[28px] max-h-[90vh] overflow-hidden flex flex-col",style:{paddingBottom:"env(safe-area-inset-bottom)"},children:[e.jsx("div",{className:"flex justify-center pt-3 pb-2 flex-shrink-0",children:e.jsx("div",{className:"w-10 h-1 rounded-full bg-white/20"})}),e.jsxs("div",{className:"px-5 pb-4 flex items-center justify-between flex-shrink-0",children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:x?"Drop Pin on Map":"Select Location"}),e.jsxs("div",{className:"flex items-center gap-2",children:[x&&e.jsx("button",{onClick:()=>C(!1),className:"px-3 py-1.5 text-sm font-medium text-white/60",children:"Back"}),e.jsx("button",{onClick:s,className:"w-9 h-9 rounded-full bg-white/10 flex items-center justify-center",children:e.jsx(Je,{className:"text-white/60"})})]})]}),x?e.jsxs("div",{className:"flex-1 flex flex-col",children:[e.jsx("div",{ref:k,className:"flex-1 min-h-[300px]"}),e.jsxs("div",{className:"p-5 bg-[#101B4A] border-t border-white/10",children:[e.jsx("p",{className:"text-xs text-white/40 mb-1",children:"Selected Location"}),e.jsx("p",{className:"text-sm text-white mb-4 line-clamp-2",children:f||"Drag the pin to select location"}),e.jsx("button",{onClick:S,disabled:!f,className:"w-full py-3.5 bg-[#05E06C] text-[#060D2D] font-bold rounded-xl disabled:opacity-50",children:"Confirm Location"})]})]}):e.jsxs("div",{className:"flex-1 overflow-y-auto",children:[e.jsx("div",{className:"px-5 pb-4",children:e.jsxs("div",{className:"relative",children:[e.jsx(se,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-white/30"}),e.jsx("input",{ref:R,type:"text",value:n,onChange:b=>i(b.target.value),placeholder:"Search for area, street name...",className:"w-full bg-[#101B4A] border border-white/10 rounded-xl pl-12 pr-4 py-4 text-white placeholder-white/30 focus:outline-none focus:border-[#05E06C]/50"})]})}),e.jsx("div",{className:"px-5 pb-4",children:e.jsxs("button",{onClick:g,disabled:l,className:"w-full flex items-center gap-4 p-4 bg-[#05E06C]/10 border border-[#05E06C]/30 rounded-xl",children:[e.jsx("div",{className:"w-11 h-11 rounded-xl bg-[#05E06C] flex items-center justify-center",children:l?e.jsx("div",{className:"w-5 h-5 border-2 border-[#060D2D] border-t-transparent rounded-full animate-spin"}):e.jsx(Rr,{className:"text-[#060D2D]"})}),e.jsxs("div",{className:"flex-1 text-left",children:[e.jsx("p",{className:"font-semibold text-[#05E06C]",children:"Use Current Location"}),e.jsx("p",{className:"text-sm text-white/40",children:"Using GPS"})]}),e.jsx(W,{className:"text-[#05E06C]"})]})}),e.jsx("div",{className:"px-5 pb-4",children:e.jsxs("button",{onClick:()=>C(!0),className:"w-full flex items-center gap-4 p-4 bg-[#101B4A] border border-white/[0.06] rounded-xl",children:[e.jsx("div",{className:"w-11 h-11 rounded-xl bg-blue-500/20 flex items-center justify-center",children:e.jsx(q,{className:"text-blue-400"})}),e.jsxs("div",{className:"flex-1 text-left",children:[e.jsx("p",{className:"font-semibold text-white",children:"Drop Pin on Map"}),e.jsx("p",{className:"text-sm text-white/40",children:"Select exact location"})]}),e.jsx(W,{className:"text-white/30"})]})}),e.jsxs("div",{className:"px-5 pb-5",children:[e.jsx("p",{className:"text-sm font-semibold text-white/40 uppercase tracking-wider mb-3",children:"Saved Addresses"}),e.jsx("div",{className:"space-y-3",children:y.map(b=>e.jsxs("button",{onClick:()=>{a({...b,label:b.label}),s()},className:"w-full flex items-center gap-4 p-4 bg-[#101B4A] border border-white/[0.06] rounded-xl text-left",children:[e.jsx("div",{className:"w-11 h-11 rounded-xl bg-white/10 flex items-center justify-center",children:e.jsx(Nr,{className:"text-white/60 text-lg"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"font-semibold text-white",children:b.label}),b.isDefault&&e.jsx("span",{className:"px-2 py-0.5 bg-[#05E06C]/10 text-[#05E06C] text-[10px] font-bold rounded",children:"DEFAULT"})]}),e.jsx("p",{className:"text-sm text-white/40 truncate",children:b.address})]}),e.jsx(W,{className:"text-white/20"})]},b.id))})]}),e.jsx("div",{className:"px-5 pb-5",children:e.jsxs("button",{className:"w-full flex items-center justify-center gap-2 p-4 border border-dashed border-white/20 rounded-xl text-white/60",children:[e.jsx(le,{className:"text-sm"}),e.jsx("span",{className:"font-medium",children:"Add New Address"})]})})]})]})}):null},bt=({store:t,onClick:s,isFavorite:r,onFavoriteToggle:a})=>e.jsx("div",{onClick:()=>s(t),className:"w-full text-left cursor-pointer",children:e.jsxs("div",{className:"relative rounded-[20px] overflow-hidden bg-[#101B4A] border border-white/[0.06]",children:[e.jsxs("div",{className:"h-36 relative overflow-hidden",children:[t.bannerUrl||t.logoUrl?e.jsx("img",{src:t.bannerUrl||t.logoUrl,alt:"",className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full bg-gradient-to-br from-[#05E06C]/15 to-transparent flex items-center justify-center",children:e.jsx(ce,{className:"text-[#05E06C]/30 text-5xl"})}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-[#060D2D] via-[#060D2D]/30 to-transparent"}),e.jsx("div",{className:"absolute top-3 left-3",children:e.jsxs("div",{className:`px-2.5 py-1 rounded-full text-[11px] font-semibold flex items-center gap-1.5 ${t.isActive?"bg-[#05E06C] text-[#060D2D]":"bg-white/10 text-white/60"}`,children:[e.jsx("span",{className:`w-1.5 h-1.5 rounded-full ${t.isActive?"bg-[#060D2D]":"bg-white/40"}`}),t.isActive?"Open":"Closed"]})}),e.jsx("div",{onClick:n=>{n.stopPropagation(),a?.(t.id)},className:"absolute top-3 right-3 w-9 h-9 rounded-full bg-[#060D2D]/60 backdrop-blur-sm flex items-center justify-center cursor-pointer",children:e.jsx(Ke,{className:`text-sm ${r?"text-red-500":"text-white/30"}`})}),e.jsx("div",{className:"absolute bottom-3 right-3",children:e.jsxs("div",{className:"px-2.5 py-1 rounded-full bg-[#060D2D]/70 backdrop-blur-sm text-[11px] font-medium text-white flex items-center gap-1",children:[e.jsx(fe,{className:"text-[#05E06C] text-[9px]"}),t.avgDeliveryTime||30," min"]})}),e.jsx("div",{className:"absolute bottom-3 left-3",children:e.jsx("h3",{className:"font-bold text-white text-lg truncate",children:t.name||t.businessName})})]}),e.jsxs("div",{className:"p-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"text-sm text-white/40 truncate flex-1",children:t.category||"General Store"}),e.jsxs("div",{className:"flex items-center gap-1 px-2 py-0.5 bg-amber-500/10 rounded-md",children:[e.jsx(Yt,{className:"text-amber-400 text-[9px]"}),e.jsx("span",{className:"text-sm font-semibold text-amber-400",children:t.rating?.toFixed(1)||"4.5"})]})]}),e.jsxs("div",{className:"flex items-center gap-3 mt-2",children:[t.distance!==null&&e.jsxs("span",{className:"flex items-center gap-1 text-xs text-white/40",children:[e.jsx(q,{className:"text-[#05E06C] text-[10px]"}),t.distance," km"]}),(t.deliveryFee===0||!t.deliveryFee)&&e.jsx("span",{className:"text-xs font-medium text-[#05E06C]",children:"Free Delivery"})]})]})]})}),ca=({category:t,onClick:s})=>e.jsxs("div",{onClick:()=>s(t),className:"flex flex-col items-center gap-2 min-w-[72px] cursor-pointer active:scale-95 transition-transform",children:[e.jsx("div",{className:`w-16 h-16 rounded-2xl bg-gradient-to-br ${t.color} flex items-center justify-center shadow-lg`,children:e.jsx("span",{className:"text-2xl",children:t.icon})}),e.jsx("span",{className:"text-[11px] font-medium text-white/60 text-center leading-tight",children:t.name})]}),oa=({product:t,onAddToCart:s})=>{const[r,a]=m.useState(!1),n=i=>{i.stopPropagation(),a(!0),s(t),setTimeout(()=>a(!1),600)};return e.jsxs("div",{className:"bg-[#101B4A] rounded-[16px] border border-white/[0.06] overflow-hidden w-[140px] flex-shrink-0",children:[e.jsxs("div",{className:"h-[100px] bg-[#0A1340] relative",children:[t.image||t.imageUrl?e.jsx("img",{src:t.image||t.imageUrl,alt:t.name,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx("span",{className:"text-3xl",children:""})}),t.discount>0&&e.jsxs("div",{className:"absolute top-2 left-2 px-1.5 py-0.5 bg-red-500 rounded text-[9px] font-bold text-white",children:[t.discount,"%"]})]}),e.jsxs("div",{className:"p-2.5",children:[e.jsx("p",{className:"text-[9px] text-[#05E06C] font-semibold truncate uppercase",children:t.storeName}),e.jsx("h4",{className:"text-xs font-semibold text-white truncate mt-0.5",children:t.name}),e.jsxs("div",{className:"flex items-center justify-between mt-2",children:[e.jsxs("span",{className:"text-sm font-bold text-white",children:["",t.sellingPrice||t.price]}),e.jsx("div",{onClick:n,className:"w-7 h-7 rounded-lg flex items-center justify-center text-sm font-bold cursor-pointer transition-all bg-[#05E06C] text-[#060D2D]",children:r?"":"+"})]})]})]})},je=({icon:t,label:s,gradient:r,onClick:a,badge:n})=>e.jsxs("div",{onClick:a,className:"flex flex-col items-center gap-2 cursor-pointer active:scale-95 transition-transform",children:[e.jsxs("div",{className:`w-14 h-14 rounded-xl ${r} flex items-center justify-center shadow-lg relative`,children:[e.jsx(t,{className:"text-white text-lg"}),n&&e.jsx("span",{className:"absolute -top-1 -right-1 w-5 h-5 bg-red-500 rounded-full flex items-center justify-center text-white text-[10px] font-bold",children:n})]}),e.jsx("span",{className:"text-[10px] font-medium text-white/50",children:s})]}),da=({order:t,onTrack:s})=>e.jsxs("div",{onClick:s,className:"w-full bg-gradient-to-r from-[#05E06C]/20 to-[#05E06C]/5 border border-[#05E06C]/30 rounded-xl p-4 flex items-center gap-4 cursor-pointer",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl bg-[#05E06C] flex items-center justify-center",children:e.jsx(Gt,{className:"text-[#060D2D] text-lg"})}),e.jsxs("div",{className:"flex-1 text-left",children:[e.jsx("p",{className:"text-sm font-semibold text-white",children:"Order on the way!"}),e.jsxs("p",{className:"text-xs text-white/50",children:["Arriving in ",t?.eta||"15-20"," mins"]})]}),e.jsx("div",{className:"px-3 py-1.5 bg-[#05E06C] rounded-lg",children:e.jsx("span",{className:"text-xs font-bold text-[#060D2D]",children:"Track"})})]}),ha=({onNavigate:t,onStoreSelect:s,onCategorySelect:r,onProductAdd:a})=>{const[n,i]=m.useState(null),[l,c]=m.useState(!0),[d,u]=m.useState(!1),[f,o]=m.useState([]),[h,p]=m.useState([]),[x,C]=m.useState([]),[k,j]=m.useState(!0),[w,D]=m.useState([]),[v,R]=m.useState(null),y=g=>{D(S=>S.includes(g)?S.filter(b=>b!==g):[...S,g])};m.useEffect(()=>{if(c(!0),!navigator.geolocation){i({lat:19.076,lng:72.8777,label:"Mumbai",address:"Tap to select location"}),c(!1);return}navigator.geolocation.getCurrentPosition(g=>{i({lat:g.coords.latitude,lng:g.coords.longitude,label:"Current Location",address:"Using GPS"}),c(!1)},()=>{i({lat:19.076,lng:72.8777,label:"Mumbai",address:"Tap to select location"}),c(!1)},{enableHighAccuracy:!0,timeout:1e4,maximumAge:3e5})},[]),m.useEffect(()=>{if(!n)return;(async()=>{j(!0);try{const[S,b,E]=await Promise.all([Te(n.lat,n.lng,50,10),Qt(n.lat,n.lng,50),aa(n.lat,n.lng,50,10)]);o(S),p(b),C(E)}catch(S){console.error("Error fetching data:",S)}finally{j(!1)}})()},[n]);const L=f.filter(g=>w.includes(g.id));return l?e.jsxs("div",{className:"min-h-screen bg-[#060D2D] flex flex-col items-center justify-center px-6",children:[e.jsx("img",{src:"/assets/flyp_logo.png",alt:"FLYP",className:"w-20 h-20 object-contain mb-6 animate-pulse"}),e.jsx("p",{className:"text-white/60",children:"Finding stores near you..."})]}):e.jsxs("div",{className:"min-h-screen bg-[#060D2D]",children:[e.jsx("div",{className:"sticky top-0 z-50 bg-[#060D2D]/95 backdrop-blur-xl border-b border-white/[0.04]",style:{paddingTop:"env(safe-area-inset-top)"},children:e.jsxs("div",{className:"px-4 py-3 flex items-center gap-3",children:[e.jsx("img",{src:"/assets/flyp_logo.png",alt:"FLYP",className:"w-9 h-9 object-contain"}),e.jsxs("div",{onClick:()=>u(!0),className:"flex-1 flex items-center gap-2 min-w-0 cursor-pointer",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg bg-[#05E06C]/10 flex items-center justify-center flex-shrink-0",children:e.jsx(q,{className:"text-[#05E06C] text-sm"})}),e.jsxs("div",{className:"flex-1 min-w-0 text-left",children:[e.jsx("p",{className:"text-[10px] text-[#05E06C] font-semibold uppercase tracking-wider",children:"Deliver to"}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("p",{className:"text-sm font-semibold text-white truncate",children:n?.label}),e.jsx(_r,{className:"text-white/40 text-[10px] flex-shrink-0"})]})]})]}),e.jsx("div",{onClick:()=>t("search"),className:"w-10 h-10 rounded-xl bg-[#101B4A] border border-white/[0.06] flex items-center justify-center cursor-pointer",children:e.jsx(se,{className:"text-white/50 text-sm"})}),e.jsxs("div",{className:"w-10 h-10 rounded-xl bg-[#101B4A] border border-white/[0.06] flex items-center justify-center relative cursor-pointer",children:[e.jsx(Sr,{className:"text-white/50 text-sm"}),e.jsx("span",{className:"absolute top-2 right-2 w-2 h-2 bg-[#05E06C] rounded-full"})]})]})}),e.jsxs("div",{className:"px-4 py-4 space-y-5",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsx(ia,{})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold text-white mb-4",children:"What would you like today?"}),e.jsxs("div",{onClick:()=>t("search"),className:"w-full bg-[#101B4A] rounded-xl px-4 py-3 flex items-center gap-3 border border-white/[0.06] cursor-pointer",children:[e.jsx(se,{className:"text-white/30"}),e.jsx("span",{className:"flex-1 text-left text-white/30 text-sm",children:"Search products, stores..."}),e.jsx("div",{className:"w-8 h-8 bg-[#05E06C] rounded-lg flex items-center justify-center",children:e.jsx(xt,{className:"text-[#060D2D] text-sm"})})]})]}),v&&e.jsx(da,{order:v,onTrack:()=>t("tracking")}),e.jsxs("div",{className:"bg-[#101B4A] rounded-xl p-4 border border-white/[0.06] flex items-center justify-around",children:[e.jsx(je,{icon:xt,label:"Express",gradient:"bg-gradient-to-br from-orange-500 to-amber-600",onClick:()=>{}}),e.jsx(je,{icon:_e,label:"Grocery",gradient:"bg-gradient-to-br from-[#05E06C] to-[#04B857]",onClick:()=>{}}),e.jsx(je,{icon:Fr,label:"Offers",gradient:"bg-gradient-to-br from-purple-500 to-pink-500",badge:"3",onClick:()=>{}}),e.jsx(je,{icon:Wt,label:"Reorder",gradient:"bg-gradient-to-br from-blue-500 to-indigo-600",onClick:()=>{}})]}),h.length>0&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h2",{className:"text-base font-bold text-white",children:"Categories"}),e.jsxs("div",{onClick:()=>{},className:"text-xs text-[#05E06C] font-medium flex items-center gap-1 cursor-pointer",children:["See all ",e.jsx(W,{className:"text-[8px]"})]})]}),e.jsx("div",{className:"flex gap-3 overflow-x-auto pb-2 scrollbar-hide",children:h.map((g,S)=>e.jsx(ca,{category:g,onClick:()=>r?.(g)},S))})]}),L.length>0&&e.jsxs("div",{children:[e.jsx("div",{className:"flex items-center justify-between mb-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ke,{className:"text-red-500 text-sm"}),e.jsx("h2",{className:"text-base font-bold text-white",children:"Your Favorites"})]})}),e.jsx("div",{className:"flex gap-3 overflow-x-auto pb-2 scrollbar-hide",children:L.map(g=>e.jsx("div",{className:"w-[200px] flex-shrink-0",children:e.jsx(bt,{store:g,onClick:()=>s?.(g),isFavorite:!0,onFavoriteToggle:y})},g.id))})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h2",{className:"text-base font-bold text-white",children:"Stores Near You"}),e.jsxs("span",{className:"text-xs text-white/30 bg-[#101B4A] px-2.5 py-1 rounded-full font-medium",children:[f.length," stores"]})]}),k?e.jsx("div",{className:"space-y-3",children:[1,2].map(g=>e.jsx("div",{className:"h-48 bg-[#101B4A] rounded-[20px] animate-pulse"},g))}):f.length>0?e.jsxs("div",{className:"space-y-3",children:[f.slice(0,3).map(g=>e.jsx(bt,{store:g,onClick:()=>s?.(g),isFavorite:w.includes(g.id),onFavoriteToggle:y},g.id)),f.length>3&&e.jsxs("div",{onClick:()=>{},className:"w-full py-3 border border-white/10 rounded-xl text-white/60 text-sm font-medium text-center cursor-pointer",children:["View all ",f.length," stores"]})]}):e.jsxs("div",{className:"text-center py-12 bg-[#101B4A] rounded-xl",children:[e.jsx(ce,{className:"text-white/20 text-4xl mx-auto mb-3"}),e.jsx("p",{className:"text-white/40 text-sm",children:"No stores nearby yet"})]})]}),x.length>0&&e.jsxs("div",{children:[e.jsx("div",{className:"flex items-center justify-between mb-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-6 h-6 rounded-md bg-amber-500/10 flex items-center justify-center",children:e.jsx(Mr,{className:"text-amber-400 text-xs"})}),e.jsx("h2",{className:"text-base font-bold text-white",children:"Trending Products"})]})}),e.jsx("div",{className:"flex gap-3 overflow-x-auto pb-2 scrollbar-hide",children:x.map((g,S)=>e.jsx(oa,{product:g,onAddToCart:()=>a?.(g)},S))})]})]}),e.jsx("div",{className:"h-28"}),e.jsx(te,{children:d&&e.jsx(la,{isOpen:d,onClose:()=>u(!1),currentLocation:n,onLocationSelect:g=>{i(g),u(!1)}})})]})},jt={All:"",Food:"",Grocery:"",Vegetables:"",Fruits:"",Dairy:"",Beverages:"",Beverage:"",Drink:"",Drinks:"",Snacks:"","Personal Care":"","Hair Care":"",Health:"",Household:"",Electronics:"",Mobile:"",Smartphone:"",Clothing:"",Liquor:"",Pipe:"",General:"",default:""},vt=t=>t&&(jt[t]||jt[t.split(" ")[0]])||"",ua=({product:t,store:s,cartQuantity:r,onAdd:a,onUpdate:n})=>{const i=t.sellingPrice||t.price||0,l=t.mrp||i,c=l>i,d=c?Math.round((1-i/l)*100):0,u=t.stock!==void 0&&t.stock<=0;return e.jsxs("div",{className:`bg-[#0F1A3D] rounded-lg overflow-hidden ${u?"opacity-50":""}`,children:[e.jsxs("div",{className:"relative pt-[100%] bg-[#0A1230]",children:[e.jsx("div",{className:"absolute inset-0 p-2",children:t.imageUrl||t.image?e.jsx("img",{src:t.imageUrl||t.image,alt:t.name,className:"w-full h-full object-contain rounded"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center text-2xl bg-[#101B4A] rounded",children:""})}),d>0&&!u&&e.jsxs("div",{className:"absolute top-1 left-1 bg-[#05E06C] text-[#060D2D] text-[9px] font-bold px-1.5 py-0.5 rounded",children:[d,"% OFF"]}),u&&e.jsx("div",{className:"absolute inset-0 bg-black/60 flex items-center justify-center",children:e.jsx("span",{className:"text-white text-[10px] font-bold bg-red-500 px-2 py-1 rounded",children:"OUT OF STOCK"})})]}),e.jsxs("div",{className:"p-2",children:[e.jsx("p",{className:"text-[11px] text-white font-medium line-clamp-2 h-8 leading-tight",children:t.name}),e.jsx("p",{className:"text-[9px] text-white/40 mt-0.5",children:t.unit||"1 unit"}),e.jsxs("div",{className:"flex items-center justify-between mt-2",children:[e.jsxs("div",{children:[e.jsxs("span",{className:"text-white font-bold text-xs",children:["",i]}),c&&e.jsxs("span",{className:"text-white/40 text-[9px] line-through ml-1",children:["",l]})]}),r>0&&!u?e.jsxs("div",{className:"flex items-center bg-[#05E06C] rounded h-6",children:[e.jsx("button",{onClick:()=>n(t.id,r-1),className:"w-6 h-6 flex items-center justify-center text-[#060D2D]",children:e.jsx(Ze,{size:8})}),e.jsx("span",{className:"text-[#060D2D] font-bold text-[10px] min-w-[16px] text-center",children:r}),e.jsx("button",{onClick:()=>n(t.id,r+1),className:"w-6 h-6 flex items-center justify-center text-[#060D2D]",children:e.jsx(le,{size:8})})]}):e.jsx("button",{onClick:()=>!u&&a(t,s),disabled:u,className:`h-6 px-3 rounded text-[10px] font-bold ${u?"bg-white/10 text-white/30":"bg-[#05E06C] text-[#060D2D]"}`,children:"ADD"})]})]})]})},ma=({store:t,isOpen:s,onClose:r})=>s?e.jsx("div",{className:"fixed inset-0 z-50 bg-black/70 flex items-end",onClick:r,children:e.jsxs(P.div,{initial:{y:"100%"},animate:{y:0},exit:{y:"100%"},className:"w-full bg-[#0A1230] rounded-t-2xl p-5",onClick:a=>a.stopPropagation(),style:{paddingBottom:"calc(env(safe-area-inset-bottom) + 20px)"},children:[e.jsx("div",{className:"w-10 h-1 bg-white/20 rounded-full mx-auto mb-4"}),e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-12 h-12 bg-[#101B4A] rounded-xl flex items-center justify-center text-xl",children:t.logoUrl?e.jsx("img",{src:t.logoUrl,alt:"",className:"w-full h-full object-cover rounded-xl"}):""}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-white font-bold",children:t.businessName||t.name}),e.jsx("p",{className:"text-white/50 text-sm",children:t.category||"General Store"})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-[#101B4A] rounded-lg",children:[e.jsx(q,{className:"text-[#05E06C]"}),e.jsx("p",{className:"text-white text-sm",children:t.address||"Address not available"})]}),e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-[#101B4A] rounded-lg",children:[e.jsx(Jr,{className:"text-[#05E06C]"}),e.jsxs("p",{className:"text-white text-sm",children:[t.openTime||"9 AM"," - ",t.closeTime||"9 PM"]})]}),t.phone&&e.jsxs("a",{href:`tel:${t.phone}`,className:"flex items-center gap-3 p-3 bg-[#101B4A] rounded-lg",children:[e.jsx(ae,{className:"text-[#05E06C]"}),e.jsx("p",{className:"text-white text-sm",children:t.phone})]})]})]})}):null,xa=({storeId:t,onBack:s,onCartClick:r})=>{const[a,n]=m.useState(null),[i,l]=m.useState([]),[c,d]=m.useState(["All"]),[u,f]=m.useState("All"),[o,h]=m.useState(""),[p,x]=m.useState(!0),[C,k]=m.useState(!1),[j,w]=m.useState(!1),D=m.useRef(null),{addToCart:v,updateQuantity:R,getItemQuantity:y,getCartTotals:L,cartStore:g}=ue(),{itemCount:S,total:b}=L();m.useEffect(()=>{(async()=>{if(t){x(!0);try{const[T,U,Le]=await Promise.all([Jt(t),ta(t),sa(t)]);n(T),l(U||[]),d(["All",...Le||[]])}catch(T){console.error("Error:",T)}finally{x(!1)}}})()},[t]);const E=m.useMemo(()=>i.filter(_=>{const T=u==="All"||_.category===u,U=!o||_.name?.toLowerCase().includes(o.toLowerCase());return T&&U}),[i,u,o]),I=_=>_==="All"?i.length:i.filter(T=>T.category===_).length,M=_=>{f(_),D.current?.scrollTo({top:0,behavior:"smooth"})},$=(_,T)=>{v(_,T)};return p?e.jsx("div",{className:"min-h-screen bg-[#060D2D] flex items-center justify-center",children:e.jsx("div",{className:"w-8 h-8 border-2 border-[#05E06C]/30 border-t-[#05E06C] rounded-full animate-spin"})}):a?e.jsxs("div",{className:"h-screen bg-[#060D2D] flex flex-col overflow-hidden",children:[e.jsxs("header",{className:"bg-[#060D2D] border-b border-white/5 flex-shrink-0",style:{paddingTop:"env(safe-area-inset-top)"},children:[e.jsxs("div",{className:"flex items-center justify-between px-3 py-2",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[e.jsx("button",{onClick:s,className:"w-8 h-8 bg-[#101B4A] rounded-lg flex items-center justify-center flex-shrink-0",children:e.jsx(K,{className:"text-white text-sm"})}),e.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[e.jsx("div",{className:"w-9 h-9 bg-[#101B4A] rounded-lg overflow-hidden flex-shrink-0",children:a.logoUrl?e.jsx("img",{src:a.logoUrl,alt:"",className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:""})}),e.jsxs("div",{className:"min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("h1",{className:"text-white font-bold text-sm truncate",children:a.businessName||a.name}),a.isVerified&&e.jsx(vr,{className:"text-[#05E06C] text-xs flex-shrink-0"})]}),e.jsxs("div",{className:"flex items-center gap-1.5 text-[10px] text-white/50",children:[e.jsxs("span",{className:"flex items-center gap-0.5",children:[e.jsx(Yt,{className:"text-amber-400",size:8}),a.rating?.toFixed(1)||"4.5"]}),e.jsx("span",{children:""}),e.jsxs("span",{children:[a.avgDeliveryTime||30," min"]}),e.jsx("span",{children:""}),e.jsx("button",{onClick:()=>k(!0),className:"text-[#05E06C]",children:"Info"})]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-1.5 flex-shrink-0",children:[e.jsx("button",{onClick:()=>w(!j),className:`w-8 h-8 rounded-lg flex items-center justify-center ${j?"bg-red-500/20":"bg-[#101B4A]"}`,children:e.jsx(Ke,{className:`text-sm ${j?"text-red-500":"text-white/50"}`})}),e.jsx("button",{className:"w-8 h-8 bg-[#101B4A] rounded-lg flex items-center justify-center",children:e.jsx(Vr,{className:"text-white text-sm"})})]})]}),e.jsx("div",{className:"px-3 pb-2",children:e.jsxs("div",{className:"relative",children:[e.jsx(se,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-white/30 text-xs"}),e.jsx("input",{type:"text",placeholder:"Search products...",value:o,onChange:_=>h(_.target.value),className:"w-full h-9 pl-8 pr-8 bg-[#101B4A] rounded-lg text-sm text-white placeholder-white/30 focus:outline-none border border-white/5 focus:border-[#05E06C]/50"}),o&&e.jsx("button",{onClick:()=>h(""),className:"absolute right-2 top-1/2 -translate-y-1/2",children:e.jsx(Je,{className:"text-white/30 text-xs"})})]})})]}),e.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[e.jsx("aside",{className:"w-20 bg-[#0A1230] border-r border-white/5 overflow-y-auto flex-shrink-0",children:c.map(_=>e.jsxs("button",{onClick:()=>M(_),className:`w-full p-2 text-center transition-all ${u===_?"bg-[#05E06C]/10 border-l-2 border-[#05E06C]":"border-l-2 border-transparent hover:bg-white/5"}`,children:[e.jsx("div",{className:"text-lg mb-0.5",children:vt(_)}),e.jsx("p",{className:`text-[10px] font-medium truncate ${u===_?"text-[#05E06C]":"text-white/60"}`,children:_}),e.jsx("p",{className:"text-[8px] text-white/30",children:I(_)})]},_))}),e.jsxs("main",{ref:D,className:"flex-1 overflow-y-auto",children:[e.jsx("div",{className:"sticky top-0 bg-[#060D2D] px-3 py-2 border-b border-white/5 z-10",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-base",children:vt(u)}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-white font-bold text-sm",children:u}),e.jsxs("p",{className:"text-white/40 text-[10px]",children:[E.length," products"]})]})]})})}),e.jsx("div",{className:"p-2",children:E.length>0?e.jsx("div",{className:"grid grid-cols-2 gap-2",children:E.map(_=>e.jsx(ua,{product:_,store:a,cartQuantity:y(_.id),onAdd:$,onUpdate:R},_.id))}):e.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[e.jsx("div",{className:"w-12 h-12 bg-[#101B4A] rounded-full flex items-center justify-center mb-3",children:e.jsx(se,{className:"text-white/20"})}),e.jsx("p",{className:"text-white/50 text-sm",children:"No products found"})]})}),e.jsx("div",{className:"h-20"})]})]}),e.jsx(te,{children:S>0&&g?.id===t&&e.jsx(P.div,{initial:{y:100},animate:{y:0},exit:{y:100},className:"fixed bottom-0 left-0 right-0 p-3 z-40",style:{paddingBottom:"calc(env(safe-area-inset-bottom) + 12px)"},children:e.jsxs("button",{onClick:r,className:"w-full bg-[#05E06C] rounded-xl p-3 flex items-center justify-between shadow-lg shadow-[#05E06C]/20",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"w-8 h-8 bg-[#060D2D]/20 rounded-lg flex items-center justify-center relative",children:[e.jsx(qr,{className:"text-[#060D2D] text-sm"}),e.jsx("span",{className:"absolute -top-1 -right-1 w-4 h-4 bg-[#060D2D] rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-[#05E06C] text-[8px] font-bold",children:S})})]}),e.jsxs("div",{className:"text-left",children:[e.jsxs("p",{className:"text-[#060D2D] font-bold text-sm",children:[S," items"]}),e.jsx("p",{className:"text-[#060D2D]/60 text-[10px]",children:a.businessName||a.name})]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsxs("span",{className:"text-[#060D2D] font-bold",children:["",b]}),e.jsx(W,{className:"text-[#060D2D]"})]})]})})}),e.jsx(te,{children:C&&e.jsx(ma,{store:a,isOpen:C,onClose:()=>k(!1)})})]}):e.jsxs("div",{className:"min-h-screen bg-[#060D2D] flex flex-col items-center justify-center p-6",children:[e.jsx("p",{className:"text-white/60 mb-4",children:"Store not found"}),e.jsx("button",{onClick:s,className:"px-4 py-2 bg-[#05E06C] text-[#060D2D] rounded-lg font-semibold text-sm",children:"Go Back"})]})};var Se;(function(t){t.Heavy="HEAVY",t.Medium="MEDIUM",t.Light="LIGHT"})(Se||(Se={}));var $e;(function(t){t.Success="SUCCESS",t.Warning="WARNING",t.Error="ERROR"})($e||($e={}));const Xt=Ye("Haptics",{web:()=>We(()=>import("./web-hQQeq1Vs.js"),__vite__mapDeps([2,3,4,1])).then(t=>new t.HapticsWeb)}),pa=Object.freeze(Object.defineProperty({__proto__:null,Haptics:Xt,get ImpactStyle(){return Se},get NotificationType(){return $e}},Symbol.toStringTag,{value:"Module"})),Oe=async()=>{try{await Xt.impact({style:Se.Light})}catch{}},fa=({product:t,cartQuantity:s,onAdd:r,onUpdate:a,onStoreClick:n})=>{const i=t.sellingPrice||t.price||0,l=t.mrp||i;return e.jsxs("div",{className:"bg-[#141c2e]/50 backdrop-blur-xl rounded-xl border border-white/10/50 p-3 flex gap-3",children:[e.jsx("div",{className:"w-20 h-20 bg-[#141c2e] rounded-lg flex-shrink-0 overflow-hidden border border-white/10/50",children:t.imageUrl||t.image?e.jsx("img",{src:t.imageUrl||t.image,alt:t.name,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center text-2xl",children:""})}),e.jsxs("div",{className:"flex-1 min-w-0 flex flex-col justify-between",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-white text-sm line-clamp-2",children:t.name}),e.jsxs("button",{onClick:()=>n(t.storeId),className:"flex items-center gap-1 text-xs text-[#05E06C]400 mt-1",children:[e.jsx(ce,{className:"text-[10px]"}),t.storeName,e.jsx(q,{className:"text-[10px] ml-1"}),t.storeDistance,"km"]})]}),e.jsxs("div",{className:"flex items-center justify-between mt-2",children:[e.jsxs("div",{children:[e.jsxs("span",{className:"font-bold text-white",children:["",i]}),l>i&&e.jsxs("span",{className:"text-xs text-slate-500 line-through ml-1",children:["",l]})]}),s>0?e.jsxs("div",{className:"flex items-center gap-2 bg-gradient-to-r from-emerald-500 to-teal-500 rounded-lg overflow-hidden shadow-lg shadow-emerald-500/20",children:[e.jsx("button",{onClick:()=>{Oe(),a(t.id,s-1)},className:"w-7 h-7 flex items-center justify-center text-white",children:e.jsx(Ze,{className:"text-xs"})}),e.jsx("span",{className:"text-white font-semibold min-w-[16px] text-center text-sm",children:s}),e.jsx("button",{onClick:()=>{Oe(),a(t.id,s+1)},className:"w-7 h-7 flex items-center justify-center text-white",children:e.jsx(le,{className:"text-xs"})})]}):e.jsx("button",{onClick:()=>{Oe(),r(t)},className:"px-3 py-1.5 bg-gradient-to-r from-emerald-500 to-teal-500 text-white rounded-lg text-sm font-semibold shadow-lg shadow-emerald-500/20",children:"ADD"})]})]})]})},ga=({category:t,onClick:s})=>e.jsxs("button",{onClick:()=>s(t.name),className:`flex items-center gap-2 px-3 py-2 rounded-xl bg-gradient-to-br ${t.color} text-white text-sm font-medium whitespace-nowrap border border-white/10 shadow-lg`,children:[e.jsx("span",{children:t.icon}),t.name]}),ba=({location:t,onBack:s,onStoreSelect:r})=>{const[a,n]=m.useState(""),[i,l]=m.useState([]),[c,d]=m.useState([]),[u,f]=m.useState([]),[o,h]=m.useState(!1),[p,x]=m.useState(!1),{addToCart:C,updateQuantity:k,getItemQuantity:j,cartStore:w}=ue();m.useEffect(()=>{(async()=>{if(t?.lat&&t?.lng){const g=await Qt(t.lat,t.lng,5);d(g)}const L=localStorage.getItem("flyp_recent_searches");if(L)try{f(JSON.parse(L).slice(0,5))}catch{}})()},[t]);const D=m.useCallback(async y=>{if(!(!y.trim()||!t?.lat)){h(!0),x(!0);try{const L=await ra(y,t.lat,t.lng,5);l(L);const g=[y,...u.filter(S=>S!==y)].slice(0,5);f(g),localStorage.setItem("flyp_recent_searches",JSON.stringify(g))}catch(L){console.error("Search error:",L)}finally{h(!1)}}},[t,u]),v=()=>{a.trim()&&D(a)},R=y=>{const L={id:y.storeId,businessName:y.storeName,deliveryFee:20,minOrderValue:100},g=C(y,L);!g.success&&g.error==="DIFFERENT_STORE"&&alert(g.message)};return e.jsxs("div",{className:"min-h-screen bg-[#060D2D]",children:[e.jsx("div",{className:"bg-[#060D2D]/80 backdrop-blur-xl sticky top-0 z-10 border-b border-slate-800",style:{paddingTop:"env(safe-area-inset-top)"},children:e.jsxs("div",{className:"flex items-center gap-3 px-4 py-3",children:[e.jsx("button",{onClick:s,className:"w-10 h-10 rounded-full bg-[#141c2e] border border-white/10 flex items-center justify-center",children:e.jsx(K,{className:"text-white/60"})}),e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(se,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-500"}),e.jsx("input",{type:"text",placeholder:"Search products...",value:a,onChange:y=>n(y.target.value),onKeyDown:y=>y.key==="Enter"&&v(),autoFocus:!0,className:"w-full pl-10 pr-10 py-2.5 bg-[#141c2e] border border-white/10 rounded-xl text-sm text-white placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-emerald-500"}),a&&e.jsx("button",{onClick:()=>{n(""),l([]),x(!1)},className:"absolute right-3 top-1/2 -translate-y-1/2",children:e.jsx(Je,{className:"text-slate-500"})})]}),e.jsx("button",{onClick:v,className:"px-4 py-2.5 bg-gradient-to-r from-emerald-500 to-teal-500 text-white rounded-xl text-sm font-semibold shadow-lg shadow-emerald-500/20",children:"Search"})]})}),e.jsxs("div",{className:"px-4 py-4",children:[!p&&e.jsxs(e.Fragment,{children:[u.length>0&&e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-sm font-semibold text-white mb-3",children:"Recent Searches"}),e.jsx("div",{className:"space-y-2",children:u.map((y,L)=>e.jsxs("button",{onClick:()=>{n(y),D(y)},className:"flex items-center gap-3 w-full text-left py-2",children:[e.jsx(Wt,{className:"text-slate-500"}),e.jsx("span",{className:"text-white/70",children:y})]},L))})]}),c.length>0&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-semibold text-white mb-3",children:"Browse by Category"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:c.map((y,L)=>e.jsx(ga,{category:y,onClick:g=>{n(g),D(g)}},L))})]})]}),o&&e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"w-10 h-10 rounded-full border-4 border-emerald-500 border-t-transparent animate-spin"})}),p&&!o&&e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:"text-sm text-white/60 mb-4",children:[i.length,' results for "',a,'"']}),i.length>0?e.jsx("div",{className:"space-y-3",children:i.map(y=>e.jsx(fa,{product:y,cartQuantity:j(y.id),onAdd:R,onUpdate:k,onStoreClick:r},`${y.storeId}-${y.id}`))}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-[#141c2e] border border-white/10 flex items-center justify-center mx-auto mb-4",children:e.jsx(se,{className:"text-white/30 text-2xl"})}),e.jsx("p",{className:"text-white/60 mb-2",children:"No products found"}),e.jsx("p",{className:"text-sm text-slate-500",children:"Try a different search term"})]})]})]}),e.jsx("div",{className:"h-24"})]})},ja=({item:t,onUpdate:s,onRemove:r})=>{const[a,n]=m.useState(!1),i=()=>{n(!0),setTimeout(()=>r(t.productId),300)};return e.jsx(P.div,{layout:!0,initial:{opacity:0,x:-20},animate:{opacity:a?0:1,x:a?-100:0},exit:{opacity:0,x:-100},className:"bg-slate-800/50 backdrop-blur-xl rounded-[20px] p-4 border border-white/10/50",children:e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"w-20 h-20 bg-slate-800 rounded-2xl flex-shrink-0 overflow-hidden border border-white/10/50",children:t.image?e.jsx("img",{src:t.image,alt:t.name,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center text-3xl",children:""})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0 pr-2",children:[e.jsx("h3",{className:"font-semibold text-white text-sm leading-tight line-clamp-2",children:t.name}),e.jsx("p",{className:"text-xs text-white/40 mt-1",children:t.unit||"1 unit"})]}),e.jsx(P.button,{whileTap:{scale:.9},onClick:i,className:"w-8 h-8 rounded-xl bg-red-500/10 border border-red-500/20 flex items-center justify-center text-red-400 hover:bg-red-500/20 transition-colors",children:e.jsx(Kt,{className:"text-xs"})})]}),e.jsxs("div",{className:"flex items-center justify-between mt-4",children:[e.jsxs("div",{children:[e.jsxs("span",{className:"text-lg font-black text-white",children:["",t.price*t.quantity]}),t.quantity>1&&e.jsxs("span",{className:"text-xs text-white/40 ml-2",children:["",t.price," each"]})]}),e.jsxs("div",{className:"flex items-center bg-slate-800 rounded-xl overflow-hidden border border-white/10",children:[e.jsx(P.button,{whileTap:{scale:.9},onClick:()=>s(t.productId,t.quantity-1),className:"w-10 h-10 flex items-center justify-center text-white/60 hover:text-white hover:bg-slate-700 transition-colors",children:e.jsx(Ze,{className:"text-xs"})}),e.jsx(P.span,{initial:{scale:1.2},animate:{scale:1},className:"font-bold text-white min-w-[32px] text-center",children:t.quantity},t.quantity),e.jsx(P.button,{whileTap:{scale:.9},onClick:()=>s(t.productId,t.quantity+1),className:"w-10 h-10 flex items-center justify-center text-white/60 hover:text-white hover:bg-slate-700 transition-colors",children:e.jsx(le,{className:"text-xs"})})]})]})]})]})})},ve=({label:t,value:s,highlight:r,icon:a})=>e.jsxs("div",{className:`flex items-center justify-between py-2 ${r?"text-[#05E06C]400":"text-white/60"}`,children:[e.jsxs("span",{className:"flex items-center gap-2 text-sm",children:[a&&e.jsx(a,{className:"text-xs"}),t]}),e.jsxs("span",{className:`font-medium ${r?"font-semibold":""}`,children:[r&&"- ","",s]})]}),va=({onBack:t,onCheckout:s})=>{const{cartItems:r,cartStore:a,updateQuantity:n,removeFromCart:i,clearCart:l,getCartTotals:c}=ue(),{subtotal:d,deliveryFee:u,platformFee:f,total:o,itemCount:h,savings:p}=c();return r.length===0?e.jsxs("div",{className:"min-h-screen bg-[#060D2D] flex flex-col",children:[e.jsxs("div",{className:"bg-[#060D2D]/80 backdrop-blur-xl px-4 py-4 flex items-center gap-3 border-b border-white/5",style:{paddingTop:"calc(env(safe-area-inset-top) + 16px)"},children:[e.jsx(P.button,{whileTap:{scale:.9},onClick:t,className:"w-11 h-11 rounded-2xl bg-slate-800 border border-white/10 flex items-center justify-center",children:e.jsx(K,{className:"text-white/60"})}),e.jsx("h1",{className:"font-bold text-white text-lg",children:"My Cart"})]}),e.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center px-6",children:[e.jsx(P.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},className:"w-32 h-32 rounded-[32px] bg-slate-800 border border-white/10 flex items-center justify-center mb-6",children:e.jsx(_e,{className:"text-[#05E06C]400 text-5xl"})}),e.jsx("h2",{className:"text-2xl font-black text-white mb-2",children:"Your cart is empty"}),e.jsx("p",{className:"text-white/60 text-center mb-8 max-w-xs",children:"Explore nearby stores and add items to your cart"}),e.jsx(P.button,{whileTap:{scale:.95},onClick:t,className:"px-8 py-4 bg-gradient-to-r from-emerald-500 to-teal-500 text-white font-bold rounded-2xl shadow-xl shadow-emerald-500/30",children:"Start Shopping"})]})]}):e.jsxs("div",{className:"min-h-screen bg-[#060D2D]",children:[e.jsxs("div",{className:"bg-[#060D2D]/80 backdrop-blur-xl px-4 py-4 flex items-center justify-between border-b border-white/5 sticky top-0 z-10",style:{paddingTop:"calc(env(safe-area-inset-top) + 16px)"},children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(P.button,{whileTap:{scale:.9},onClick:t,className:"w-11 h-11 rounded-2xl bg-slate-800 border border-white/10 flex items-center justify-center",children:e.jsx(K,{className:"text-white/60"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"font-bold text-white text-lg",children:"My Cart"}),e.jsxs("p",{className:"text-xs text-white/40",children:[h," items"]})]})]}),e.jsx(P.button,{whileTap:{scale:.9},onClick:()=>{window.confirm("Clear all items from cart?")&&l()},className:"text-red-400 text-sm font-semibold px-3 py-2 rounded-xl hover:bg-red-500/10 transition-colors",children:"Clear"})]}),a&&e.jsx(P.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"mx-4 mt-4 bg-gradient-to-r from-emerald-500 via-emerald-600 to-teal-500 rounded-[20px] p-5 text-white shadow-xl shadow-emerald-500/30",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-14 h-14 rounded-2xl bg-white/20 flex items-center justify-center",children:e.jsx(ce,{className:"text-2xl"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-bold text-lg truncate",children:a.name||a.businessName}),e.jsxs("p",{className:"text-white/70 text-sm",children:[a.avgDeliveryTime||30," min delivery"]})]}),e.jsx(W,{className:"text-white/50"})]})}),e.jsx("div",{className:"px-4 py-4 space-y-3",children:e.jsx(te,{children:r.map(x=>e.jsx(ja,{item:x,onUpdate:n,onRemove:i},x.productId))})}),e.jsx("div",{className:"px-4 mb-4",children:e.jsxs(P.button,{whileTap:{scale:.98},className:"w-full bg-slate-800/50 backdrop-blur-xl rounded-[20px] p-4 flex items-center gap-4 border-2 border-dashed border-emerald-500/30 hover:border-emerald-500/50 transition-colors",children:[e.jsx("div",{className:"w-12 h-12 rounded-2xl bg-emerald-500/10 border border-emerald-500/20 flex items-center justify-center",children:e.jsx(Kr,{className:"text-[#05E06C]400 text-lg"})}),e.jsxs("div",{className:"flex-1 text-left",children:[e.jsx("p",{className:"font-bold text-white",children:"Apply Coupon"}),e.jsx("p",{className:"text-sm text-white/40",children:"Save more on your order"})]}),e.jsx(W,{className:"text-white/40"})]})}),e.jsxs("div",{className:"mx-4 bg-slate-800/50 backdrop-blur-xl rounded-[20px] p-5 border border-white/10/50",children:[e.jsxs("h3",{className:"font-bold text-white mb-4 flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 rounded-xl bg-amber-500/10 border border-amber-500/20 flex items-center justify-center",children:e.jsx(ze,{className:"text-amber-400"})}),"Bill Details"]}),e.jsxs("div",{className:"space-y-1 border-b border-white/10 pb-4",children:[e.jsx(ve,{label:"Item Total",value:d}),e.jsx(ve,{label:"Delivery Fee",value:u}),e.jsx(ve,{label:"Platform Fee",value:f}),p>0&&e.jsx(ve,{label:"Savings",value:p,highlight:!0,icon:Hr})]}),e.jsxs("div",{className:"flex items-center justify-between pt-4",children:[e.jsx("span",{className:"font-black text-white text-lg",children:"To Pay"}),e.jsxs("span",{className:"font-black text-white text-2xl",children:["",o]})]})]}),p>0&&e.jsxs(P.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"mx-4 mt-4 bg-emerald-500/10 border border-emerald-500/20 rounded-[20px] p-4 flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-2xl bg-gradient-to-r from-emerald-500 to-teal-500 flex items-center justify-center shadow-lg shadow-emerald-500/30",children:e.jsx(ze,{className:"text-white text-xl"})}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-bold text-[#05E06C]400",children:["Yay! You're saving ",p]}),e.jsx("p",{className:"text-sm text-[#05E06C]400/70",children:"on this order"})]})]}),e.jsx("div",{className:"h-44"}),e.jsx("div",{className:"fixed left-0 right-0 bg-gradient-to-t from-slate-900 via-slate-900 to-transparent px-4 pt-6 pb-4 z-40",style:{bottom:"calc(80px + env(safe-area-inset-bottom))"},children:e.jsxs(P.button,{whileTap:{scale:.98},onClick:s,className:"w-full bg-gradient-to-r from-emerald-500 via-emerald-600 to-teal-500 text-white py-4 rounded-2xl font-bold text-lg shadow-xl shadow-emerald-500/40 flex items-center justify-center gap-3",children:[e.jsx("span",{children:"Proceed to Checkout"}),e.jsxs("span",{className:"px-3 py-1 bg-white/20 rounded-xl text-sm font-bold",children:["",o]})]})})]})},wa=async t=>{try{const{customerId:s,customerName:r,customerPhone:a,storeId:n,storeName:i,storePhone:l,items:c,subtotal:d,deliveryFee:u,platformFee:f,total:o,orderType:h="delivery",deliveryAddress:p,deliverySlot:x,pickupSlot:C,pickupInstructions:k,scheduledTime:j,paymentMethod:w,payNow:D=o,payLater:v=0,paymentDueDate:R,specialInstructions:y}=t,L=`ORD${Date.now().toString(36).toUpperCase()}`;let g="pending";w==="UPI"?g="paid":w==="PAY_LATER"?g="pay_later":w==="PARTIAL"&&(g="partial_paid");const S={orderNumber:L,customerId:s,customerName:r,customerPhone:a,storeId:n,storeName:i,storePhone:l,items:c,subtotal:d,deliveryFee:u,platformFee:f,total:o,orderType:h,deliveryAddress:h==="delivery"?p:null,deliverySlot:h==="delivery"?x:null,pickupSlot:h==="pickup"?C:null,pickupInstructions:h==="pickup"?k:null,scheduledTime:j||null,paymentMethod:w,paymentStatus:g,payNow:D,payLater:v,paymentDueDate:R||null,amountPaid:w==="PAY_LATER"?0:D,amountDue:v,status:"pending",statusHistory:{pending:Q()},specialInstructions:y||"",deliveryPartner:null,deliveryPartnerPhone:null,estimatedDeliveryMinutes:null,createdAt:Q(),updatedAt:Q()},b=await Lt(Y(B,"customerOrders"),S);return await _t(J(B,"stores",n,"customerOrders",b.id),{...S,orderId:b.id}),{success:!0,orderId:b.id,orderNumber:L}}catch(s){return console.error("Error placing order:",s),{success:!1,error:s.message}}},ya=async(t,s=20)=>{try{const r=Y(B,"customerOrders"),a=Pe(r,Ge("customerId","==",t),qe(s*2)),i=(await ne(a)).docs.map(l=>({id:l.id,...l.data(),createdAt:l.data().createdAt?.toDate?.()||new Date}));return i.sort((l,c)=>c.createdAt-l.createdAt),i.slice(0,s)}catch(r){throw console.error("Error fetching orders:",r),r}},Na=(t,s)=>{const r=J(B,"customerOrders",t);return Tt(r,a=>{a.exists()&&s({id:a.id,...a.data(),createdAt:a.data().createdAt?.toDate?.()||new Date})},a=>{console.error("Error in order subscription:",a)})},es=t=>{const s={pending:{label:"Order Placed",description:"Waiting for store to accept",color:"text-yellow-500",bgColor:"bg-yellow-100",icon:"",step:1},confirmed:{label:"Confirmed",description:"Store has accepted your order",color:"text-blue-500",bgColor:"bg-blue-100",icon:"",step:2},preparing:{label:"Preparing",description:"Your order is being packed",color:"text-orange-500",bgColor:"bg-orange-100",icon:"",step:3},ready:{label:"Ready",description:"Your order is ready for delivery",color:"text-purple-500",bgColor:"bg-purple-100",icon:"",step:4},out_for_delivery:{label:"Out for Delivery",description:"Your order is on the way",color:"text-cyan-500",bgColor:"bg-cyan-100",icon:"",step:5},delivered:{label:"Delivered",description:"Order delivered successfully",color:"text-green-500",bgColor:"bg-green-100",icon:"",step:6},cancelled:{label:"Cancelled",description:"Order was cancelled",color:"text-red-500",bgColor:"bg-red-100",icon:"",step:0}};return s[t]||s.pending},Ca=async(t="light")=>{try{const{Haptics:s,ImpactStyle:r,NotificationType:a}=await We(async()=>{const{Haptics:n,ImpactStyle:i,NotificationType:l}=await Promise.resolve().then(()=>pa);return{Haptics:n,ImpactStyle:i,NotificationType:l}},void 0);t==="success"?await s.notification({type:a.Success}):await s.impact({style:r.Light})}catch{}},wt=({type:t,icon:s,label:r,description:a,isSelected:n,onSelect:i,disabled:l})=>e.jsx("button",{onClick:()=>!l&&i(t),disabled:l,className:`flex-1 p-4 rounded-xl border-2 transition-all ${l?"border-white/10 bg-[#141c2e]/50 opacity-50 cursor-not-allowed":n?"border-[#05E06C]500 bg-[#05E06C]/10":"border-white/10 bg-[#141c2e]/50 hover:border-white/10"}`,children:e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center ${n?"bg-[#05E06C]":"bg-slate-700"}`,children:e.jsx(s,{className:`text-xl ${n?"text-white":"text-white/60"}`})}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:`font-semibold ${n?"text-[#05E06C]400":"text-white"}`,children:r}),e.jsx("p",{className:"text-xs text-white/40",children:a})]})]})}),ka=({slot:t,isSelected:s,onSelect:r})=>e.jsxs("button",{onClick:()=>r(t),className:`flex-1 p-3 rounded-xl border-2 transition-all ${s?"border-[#05E06C]500 bg-[#05E06C]/10":"border-white/10 bg-[#141c2e]/50"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(fe,{className:s?"text-[#05E06C]400":"text-white/40"}),e.jsx("span",{className:`font-medium ${s?"text-[#05E06C]400":"text-white"}`,children:t.label})]}),e.jsx("p",{className:"text-xs text-white/40",children:t.description})]}),Aa=({slot:t,isSelected:s,onSelect:r})=>e.jsxs("button",{onClick:()=>r(t),className:`w-full p-3 rounded-xl border-2 flex items-center justify-between transition-all ${s?"border-[#05E06C]500 bg-[#05E06C]/10":"border-white/10 bg-[#141c2e]/50"}`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(fe,{className:s?"text-[#05E06C]400":"text-white/40"}),e.jsx("span",{className:`font-medium ${s?"text-[#05E06C]400":"text-white"}`,children:t.time})]}),s&&e.jsx(pe,{className:"text-[#05E06C]400"})]}),Ea=({method:t,isSelected:s,onSelect:r,badge:a})=>{const i={COD:ft,UPI:gt,CARD:Ir,PAY_LATER:fe,PARTIAL:gt}[t.id]||ft,c={emerald:{border:"border-[#05E06C]500",bg:"bg-[#05E06C]/10",icon:"bg-[#05E06C]",text:"text-[#05E06C]400",check:"text-[#05E06C]400"},amber:{border:"border-amber-500",bg:"bg-amber-500/10",icon:"bg-amber-500",text:"text-amber-400",check:"text-amber-400"},purple:{border:"border-purple-500",bg:"bg-purple-500/10",icon:"bg-purple-500",text:"text-purple-400",check:"text-purple-400"}}[t.color||"emerald"];return e.jsxs("button",{onClick:()=>r(t),className:`w-full p-4 rounded-xl border-2 flex items-center gap-3 transition-all ${s?`${c.border} ${c.bg}`:"border-white/10 bg-[#141c2e]/50"}`,children:[e.jsx("div",{className:`w-10 h-10 rounded-lg flex items-center justify-center ${s?c.icon:"bg-slate-700"}`,children:e.jsx(i,{className:s?"text-white":"text-white/60"})}),e.jsxs("div",{className:"flex-1 text-left",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:`font-medium ${s?c.text:"text-white"}`,children:t.label}),a&&e.jsx("span",{className:`px-2 py-0.5 text-[10px] font-bold rounded-full ${a.color}`,children:a.text})]}),e.jsx("p",{className:"text-xs text-white/40",children:t.description})]}),s&&e.jsx(pe,{className:c.check})]})},Da=({address:t,isSelected:s,onSelect:r})=>e.jsx("button",{onClick:()=>r(t),className:`w-full p-4 rounded-xl border-2 text-left transition-all ${s?"border-[#05E06C]500 bg-[#05E06C]/10":"border-white/10 bg-[#141c2e]/50"}`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:`w-10 h-10 rounded-lg flex items-center justify-center flex-shrink-0 ${s?"bg-[#05E06C]":"bg-slate-700"}`,children:e.jsx(q,{className:s?"text-white":"text-white/60"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-medium text-white",children:t.label}),e.jsx("p",{className:"text-sm text-white/60 mt-1 line-clamp-2",children:t.address})]}),s&&e.jsx(pe,{className:"text-[#05E06C]400 flex-shrink-0"})]})}),Sa=({onBack:t,onOrderPlaced:s})=>{const{cartItems:r,cartStore:a,getCartTotals:n,clearCart:i}=ue(),{customer:l,customerData:c,addAddress:d}=ie(),u=n(),[f,o]=m.useState(null),[h,p]=m.useState(!0),[x,C]=m.useState("delivery"),[k,j]=m.useState(c?.addresses?.find(N=>N.isDefault)||c?.addresses?.[0]||null),[w,D]=m.useState("asap"),[v,R]=m.useState(null),[y,L]=m.useState("COD"),[g,S]=m.useState(0),[b,E]=m.useState(""),[I,M]=m.useState(!1),[$,_]=m.useState(!c?.addresses?.length),[T,U]=m.useState({label:"Home",address:"",landmark:"",city:"",pincode:""});m.useEffect(()=>{(async()=>{if(a?.id)try{const O=await Jt(a.id);if(o(O),O?.pickupTimeSlots?.length>0){const z=O.pickupTimeSlots.find(oe=>oe.enabled);z&&R(z)}}catch(O){console.error("Error fetching store settings:",O)}finally{p(!1)}})()},[a?.id]),m.useEffect(()=>{if(y==="PARTIAL"&&f?.minAdvancePercent){const N=Math.ceil(u.total*f.minAdvancePercent/100);S(N)}},[y,u.total,f?.minAdvancePercent]);const Le=[{id:"asap",label:"ASAP",description:"Within 45-60 min"},{id:"2hr",label:"2 Hours",description:"Flexible delivery"},{id:"4hr",label:"4 Hours",description:"Schedule for later"}],ts=(()=>{const N=[],O=f?.paymentOptions||{cod:!0,upi:!0};return O.cod!==!1&&N.push({id:"COD",label:"Cash on Delivery",description:"Pay when you receive",color:"emerald"}),O.upi!==!1&&N.push({id:"UPI",label:"UPI Payment",description:"GPay, PhonePe, Paytm",color:"emerald"}),O.payLater&&N.push({id:"PAY_LATER",label:"Pay Later",description:`Pay within ${f?.payLaterDays||7} days`,color:"amber",badge:{text:"CREDIT",color:"bg-amber-500/20 text-amber-400"}}),O.partialPayment&&N.push({id:"PARTIAL",label:"Pay Advance + Later",description:`Min ${f?.minAdvancePercent||50}% now, rest on delivery`,color:"purple",badge:{text:"SPLIT",color:"bg-purple-500/20 text-purple-400"}}),N})(),ss=async()=>{if(!T.address||!T.city||!T.pincode){alert("Please fill all required fields");return}const N=`${T.address}${T.landmark?", "+T.landmark:""}, ${T.city} - ${T.pincode}`,O=await d({label:T.label||"Home",address:N,city:T.city,pincode:T.pincode,landmark:T.landmark,isDefault:!c?.addresses?.length});O.success&&(j(O.address),_(!1),U({label:"Home",address:"",landmark:"",city:"",pincode:""}))},F=(()=>{let N=x==="pickup"?0:u.deliveryFee,O=u.subtotal+N+u.platformFee,z=O,oe=0;return y==="PAY_LATER"?(z=0,oe=O):y==="PARTIAL"&&(z=g,oe=O-g),{deliveryFee:N,finalTotal:O,payNow:z,payLater:oe}})(),rs=async()=>{if(x==="delivery"&&!k){alert("Please add a delivery address");return}if(x==="pickup"&&!v){alert("Please select a pickup time slot");return}M(!0);try{const N={customerId:l.uid,customerName:c?.name||"Customer",customerPhone:l.phoneNumber||c?.phone||"",storeId:a.id,storeName:a.name||a.businessName||"Store",storePhone:f?.phone||"",items:r.map(z=>({productId:z.productId,name:z.name,price:z.price,quantity:z.quantity,total:z.price*z.quantity})),subtotal:u.subtotal,deliveryFee:F.deliveryFee,platformFee:u.platformFee,total:F.finalTotal,orderType:x,deliveryAddress:x==="delivery"?k:null,deliverySlot:x==="delivery"?w:null,pickupSlot:x==="pickup"?v:null,pickupInstructions:x==="pickup"?f?.pickupInstructions:null,paymentMethod:y,payNow:F.payNow,payLater:F.payLater,paymentDueDate:y==="PAY_LATER"?new Date(Date.now()+(f?.payLaterDays||7)*24*60*60*1e3).toISOString():null,specialInstructions:b},O=await wa(N);O.success?(await Ca("success"),i(),s?.(O.orderId,O.orderNumber)):alert(O.error||"Failed to place order")}catch(N){console.error("Order error:",N),alert("Something went wrong. Please try again.")}finally{M(!1)}};if(h)return e.jsx("div",{className:"min-h-screen bg-[#060D2D] flex items-center justify-center",children:e.jsx("div",{className:"w-8 h-8 border-2 border-[#05E06C]500 border-t-transparent rounded-full animate-spin"})});const Qe=f?.pickupEnabled&&f?.pickupTimeSlots?.some(N=>N.enabled);return e.jsxs("div",{className:"min-h-screen bg-[#060D2D]",children:[e.jsx("div",{className:"bg-[#060D2D]/80 backdrop-blur-xl sticky top-0 z-10 border-b border-white/5",children:e.jsxs("div",{className:"px-4 py-3 flex items-center gap-3",style:{paddingTop:"calc(env(safe-area-inset-top) + 12px)"},children:[e.jsx("button",{onClick:t,className:"w-10 h-10 rounded-full bg-[#141c2e] border border-white/10 flex items-center justify-center",children:e.jsx(K,{className:"text-white/60"})}),e.jsx("h1",{className:"font-bold text-white text-lg",children:"Checkout"})]})}),e.jsxs("div",{className:"px-4 py-4 space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-white mb-3",children:"How would you like to receive?"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(wt,{type:"delivery",icon:Zr,label:"Delivery",description:"To your address",isSelected:x==="delivery",onSelect:C}),e.jsx(wt,{type:"pickup",icon:_e,label:"Pickup",description:"From store",isSelected:x==="pickup",onSelect:C,disabled:!Qe})]}),!Qe&&e.jsxs("p",{className:"text-xs text-white/40 mt-2 flex items-center gap-1",children:[e.jsx(He,{}),"Pickup not available for this store"]})]}),e.jsx(te,{children:x==="delivery"&&e.jsxs(P.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},children:[e.jsx("h3",{className:"font-semibold text-white mb-3",children:"Delivery Address"}),$?e.jsxs("div",{className:"bg-[#141c2e]/50 backdrop-blur-xl rounded-2xl p-5 border border-white/10",children:[e.jsxs("h4",{className:"font-medium text-white mb-4 flex items-center gap-2",children:[e.jsx(q,{className:"text-[#05E06C]400"}),"Add New Address"]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Save as"}),e.jsx("div",{className:"flex gap-2",children:["Home","Office","Other"].map(N=>e.jsx("button",{onClick:()=>U({...T,label:N}),className:`px-4 py-2 rounded-lg text-sm font-medium transition-all ${T.label===N?"bg-[#05E06C] text-white":"bg-slate-700 text-slate-300 hover:bg-slate-600"}`,children:N},N))})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("input",{type:"text",placeholder:"House/Flat No., Building, Street *",value:T.address,onChange:N=>U({...T,address:N.target.value}),className:"w-full px-4 py-3 bg-slate-700 border border-white/10 rounded-xl text-sm text-white placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-emerald-500"}),e.jsx("input",{type:"text",placeholder:"Landmark (Optional)",value:T.landmark,onChange:N=>U({...T,landmark:N.target.value}),className:"w-full px-4 py-3 bg-slate-700 border border-white/10 rounded-xl text-sm text-white placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-emerald-500"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx("input",{type:"text",placeholder:"City *",value:T.city,onChange:N=>U({...T,city:N.target.value}),className:"w-full px-4 py-3 bg-slate-700 border border-white/10 rounded-xl text-sm text-white placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-emerald-500"}),e.jsx("input",{type:"text",placeholder:"Pincode *",value:T.pincode,onChange:N=>U({...T,pincode:N.target.value.replace(/\D/g,"").slice(0,6)}),className:"w-full px-4 py-3 bg-slate-700 border border-white/10 rounded-xl text-sm text-white placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-emerald-500"})]})]}),e.jsxs("div",{className:"flex gap-3 mt-5",children:[c?.addresses?.length>0&&e.jsx("button",{onClick:()=>_(!1),className:"flex-1 py-3 border border-white/10 rounded-xl text-white/60 font-medium",children:"Cancel"}),e.jsx("button",{onClick:ss,disabled:!T.address||!T.city||!T.pincode,className:"flex-1 py-3 bg-[#05E06C] text-white rounded-xl font-medium disabled:bg-slate-700 disabled:text-white/40",children:"Save Address"})]})]}):e.jsxs("div",{className:"space-y-3",children:[c?.addresses?.map(N=>e.jsx(Da,{address:N,isSelected:k?.id===N.id,onSelect:j},N.id)),e.jsxs("button",{onClick:()=>_(!0),className:"w-full p-4 rounded-xl border-2 border-dashed border-[#05E06C]500/30 bg-[#05E06C]/5 flex items-center justify-center gap-2 text-[#05E06C]400 font-medium",children:[e.jsx(le,{className:"text-sm"}),"Add New Address"]})]})]})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-white mb-3",children:x==="delivery"?"Delivery Time":"Pickup Time"}),x==="delivery"?e.jsx("div",{className:"flex gap-2",children:Le.map(N=>e.jsx(ka,{slot:N,isSelected:w===N.id,onSelect:()=>D(N.id)},N.id))}):e.jsxs("div",{className:"space-y-2",children:[f?.pickupTimeSlots?.filter(N=>N.enabled).map(N=>e.jsx(Aa,{slot:N,isSelected:v?.id===N.id,onSelect:()=>R(N)},N.id)),f?.pickupInstructions&&e.jsxs("div",{className:"mt-3 p-3 bg-blue-500/10 border border-blue-500/20 rounded-xl text-sm text-blue-400 flex items-start gap-2",children:[e.jsx(He,{className:"mt-0.5 flex-shrink-0"}),e.jsx("span",{children:f.pickupInstructions})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-white mb-3",children:"Payment Method"}),e.jsx("div",{className:"space-y-2",children:ts.map(N=>e.jsx(Ea,{method:N,isSelected:y===N.id,onSelect:()=>L(N.id),badge:N.badge},N.id))}),y==="PARTIAL"&&e.jsxs(P.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},className:"mt-3 p-4 bg-purple-500/10 border border-purple-500/20 rounded-xl",children:[e.jsxs("label",{className:"block text-sm font-medium text-purple-400 mb-2",children:["Advance Amount (Min: ",Math.ceil(F.finalTotal*(f?.minAdvancePercent||50)/100),")"]}),e.jsx("input",{type:"number",value:g,onChange:N=>{const O=Math.ceil(F.finalTotal*(f?.minAdvancePercent||50)/100),z=Math.max(O,Math.min(F.finalTotal,parseInt(N.target.value)||0));S(z)},className:"w-full px-4 py-3 bg-[#141c2e] border border-purple-500/30 rounded-xl text-lg font-bold text-white focus:outline-none focus:ring-2 focus:ring-purple-500"}),e.jsxs("p",{className:"text-xs text-purple-400 mt-2",children:["Remaining ",F.finalTotal-g," to be paid on ",x==="delivery"?"delivery":"pickup"]})]}),y==="PAY_LATER"&&e.jsx(P.div,{initial:{opacity:0},animate:{opacity:1},className:"mt-3 p-4 bg-amber-500/10 border border-amber-500/20 rounded-xl",children:e.jsxs("p",{className:"text-sm text-amber-400",children:[e.jsx("strong",{children:"Pay Later:"})," Full payment of ",F.finalTotal.toFixed(2)," due within ",f?.payLaterDays||7," days"]})})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-white mb-3",children:"Special Instructions (Optional)"}),e.jsx("textarea",{placeholder:"Any special requests...",value:b,onChange:N=>E(N.target.value),rows:2,className:"w-full px-4 py-3 bg-[#141c2e] border border-white/10 rounded-xl text-sm text-white placeholder-slate-500 resize-none focus:outline-none focus:ring-2 focus:ring-emerald-500"})]}),e.jsxs("div",{className:"bg-[#141c2e]/50 backdrop-blur-xl rounded-2xl border border-white/10 p-5",children:[e.jsx("h3",{className:"font-semibold text-white mb-4",children:"Order Summary"}),e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{className:"text-white/60",children:["Items (",u.itemCount,")"]}),e.jsxs("span",{className:"font-medium text-white",children:["",u.subtotal.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-white/60",children:x==="delivery"?"Delivery Fee":"Pickup"}),e.jsx("span",{className:`font-medium ${F.deliveryFee===0?"text-[#05E06C]400":"text-white"}`,children:F.deliveryFee===0?"FREE":`${F.deliveryFee}`})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-white/60",children:"Platform Fee"}),e.jsxs("span",{className:"font-medium text-white",children:["",u.platformFee]})]}),e.jsxs("div",{className:"border-t border-white/10 pt-3 mt-3",children:[e.jsxs("div",{className:"flex justify-between font-bold text-base",children:[e.jsx("span",{className:"text-white",children:"Total"}),e.jsxs("span",{className:"text-[#05E06C]400",children:["",F.finalTotal.toFixed(2)]})]}),(y==="PARTIAL"||y==="PAY_LATER")&&e.jsxs("div",{className:"mt-2 space-y-1",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-white/60",children:"Pay Now"}),e.jsxs("span",{className:"font-semibold text-[#05E06C]400",children:["",F.payNow.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-white/60",children:"Pay Later"}),e.jsxs("span",{className:"font-semibold text-amber-400",children:["",F.payLater.toFixed(2)]})]})]})]})]})]}),e.jsx("button",{onClick:rs,disabled:I||x==="delivery"&&!k||x==="pickup"&&!v,className:`w-full py-4 rounded-xl font-semibold text-lg flex items-center justify-center gap-2 transition-all ${I||x==="delivery"&&!k||x==="pickup"&&!v?"bg-[#141c2e] text-white/40 cursor-not-allowed":"bg-gradient-to-r from-emerald-500 to-teal-500 text-white shadow-lg shadow-emerald-500/30"}`,children:I?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Placing Order..."]}):e.jsxs(e.Fragment,{children:["Place Order  ",F.payNow>0?F.payNow.toFixed(2):F.finalTotal.toFixed(2),F.payLater>0&&e.jsxs("span",{className:"text-white/70 text-sm ml-1",children:["(+",F.payLater.toFixed(2)," later)"]})]})})]}),e.jsx("div",{className:"h-24"})]})},Pa=({order:t,onClose:s})=>{const{customer:r,customerData:a}=ie(),[n,i]=m.useState([]),[l,c]=m.useState(""),[d,u]=m.useState(!1),f=m.useRef(null),o=m.useRef(null),h=()=>{f.current?.scrollIntoView({behavior:"smooth"})};m.useEffect(()=>{h()},[n]),m.useEffect(()=>{if(!t?.id)return;const j=Y(B,"orderChats",t.id,"messages"),w=Pe(j,us("createdAt","asc")),D=Tt(w,v=>{const R=v.docs.map(y=>({id:y.id,...y.data(),createdAt:y.data().createdAt?.toDate()||new Date}));i(R)},v=>{console.error("Error fetching chat:",v)});return()=>D()},[t?.id]);const p=async()=>{if(!l.trim()||d)return;const j=l.trim();c(""),u(!0);try{const w=Y(B,"orderChats",t.id,"messages");await Lt(w,{text:j,senderId:r?.uid||"customer",senderName:a?.name||"Customer",senderType:"customer",createdAt:Q(),read:!1});const D=J(B,"orderChats",t.id);await Me(D,{lastMessage:j,lastMessageAt:Q(),lastMessageBy:"customer"}).catch(()=>{})}catch(w){console.error("Error sending message:",w),c(j)}finally{u(!1),o.current?.focus()}},x=j=>{j.key==="Enter"&&!j.shiftKey&&(j.preventDefault(),p())},C=j=>j.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),k=["Where are you?","How long?","I'm outside","Call me","Wait please"];return e.jsxs(P.div,{initial:{opacity:0,y:"100%"},animate:{opacity:1,y:0},exit:{opacity:0,y:"100%"},transition:{type:"spring",damping:25,stiffness:300},className:"fixed inset-0 bg-[#060D2D] z-50 flex flex-col",children:[e.jsxs("div",{className:"bg-gradient-to-r from-[#05E06C] to-[#04B857] text-white px-4 py-4",style:{paddingTop:"calc(env(safe-area-inset-top) + 16px)"},children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:s,className:"w-10 h-10 rounded-full bg-white/20 flex items-center justify-center hover:bg-white/30 transition-all",children:e.jsx(K,{})}),e.jsxs("div",{className:"flex-1 flex items-center gap-3",children:[e.jsx("div",{className:"w-11 h-11 rounded-full bg-white/20 flex items-center justify-center text-lg",children:e.jsx(we,{})}),e.jsxs("div",{children:[e.jsx("h2",{className:"font-semibold text-base",children:t.deliveryAgent?.name||t.deliveryPartner||"Delivery Partner"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"w-2 h-2 rounded-full bg-green-300 animate-pulse"}),e.jsx("p",{className:"text-xs text-white/80",children:t.status==="out_for_delivery"?"On the way":"Delivery Agent"})]})]})]}),(t.deliveryAgent?.phone||t.deliveryPartnerPhone)&&e.jsx("a",{href:`tel:${t.deliveryAgent?.phone||t.deliveryPartnerPhone}`,className:"w-11 h-11 rounded-full bg-white flex items-center justify-center text-emerald-600 shadow-lg hover:scale-105 transition-all",children:e.jsx(ae,{})})]}),t.deliveryAgent?.vehicleNumber&&e.jsxs("div",{className:"mt-3 inline-flex items-center gap-2 bg-white/20 rounded-full px-3 py-1.5 text-xs",children:[e.jsx(we,{className:"text-white/70"}),e.jsx("span",{children:t.deliveryAgent.vehicleNumber}),e.jsx("span",{className:"text-white/50",children:""}),e.jsxs("span",{className:"text-white/70",children:["Order #",t.orderNumber?.slice(-6)||t.id?.slice(-6)]})]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto px-4 py-4 bg-[#0A1340]",children:n.length===0?e.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-center px-6",children:[e.jsx("div",{className:"w-20 h-20 rounded-full bg-emerald-500/10 border border-[#05E06C]/20 flex items-center justify-center mb-4",children:e.jsx(we,{className:"text-3xl text-emerald-400"})}),e.jsx("h3",{className:"font-semibold text-white text-lg mb-2",children:"Chat with your delivery agent"}),e.jsx("p",{className:"text-sm text-white/40 max-w-xs leading-relaxed",children:"Coordinate delivery or share your location details"})]}):e.jsxs("div",{className:"space-y-4",children:[n.map(j=>{const w=j.senderType==="customer";return e.jsx(P.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:`flex ${w?"justify-end":"justify-start"}`,children:e.jsxs("div",{className:`max-w-[80%] rounded-2xl px-4 py-3 ${w?"bg-gradient-to-br from-[#05E06C] to-[#04B857] text-white rounded-tr-sm shadow-lg shadow-[#05E06C]/20":"bg-[#101B4A] border border-white/10 text-white rounded-tl-sm"}`,children:[!w&&e.jsx("p",{className:"text-xs font-medium text-emerald-400 mb-1",children:j.senderName}),e.jsx("p",{className:"text-sm leading-relaxed",children:j.text}),e.jsxs("div",{className:`flex items-center justify-end gap-1.5 mt-2 ${w?"text-white/70":"text-white/40"}`,children:[e.jsx("span",{className:"text-[10px]",children:C(j.createdAt)}),w&&(j.read?e.jsx(Pr,{className:"text-[10px]"}):e.jsx(pe,{className:"text-[10px]"}))]})]})},j.id)}),e.jsx("div",{ref:f})]})}),e.jsx("div",{className:"px-4 py-2 bg-[#060D2D] border-t border-white/5",children:e.jsx("div",{className:"flex gap-2 overflow-x-auto pb-1 scrollbar-hide",children:k.map((j,w)=>e.jsx("button",{onClick:()=>c(j),className:"px-4 py-2 bg-[#101B4A] hover:bg-emerald-500/10 border border-white/10 hover:border-[#05E06C]/30 rounded-full text-sm text-white/70 hover:text-emerald-400 whitespace-nowrap transition-all",children:j},w))})}),e.jsx("div",{className:"bg-[#060D2D] border-t border-white/5 px-4 py-3",style:{paddingBottom:"calc(env(safe-area-inset-bottom) + 12px)"},children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{ref:o,type:"text",value:l,onChange:j=>c(j.target.value),onKeyPress:x,placeholder:"Type a message...",className:"flex-1 px-5 py-3.5 bg-[#101B4A] rounded-full text-white placeholder-white/40 focus:outline-none focus:ring-2 focus:ring-emerald-500 border border-white/10 focus:border-[#05E06C]/50 transition-all text-sm"}),e.jsx("button",{onClick:p,disabled:!l.trim()||d,className:`w-12 h-12 rounded-full flex items-center justify-center transition-all ${l.trim()?"bg-gradient-to-br from-[#05E06C] to-[#04B857] text-white shadow-lg shadow-[#05E06C]/30 hover:shadow-[#05E06C]/50 hover:scale-105":"bg-[#101B4A] text-white/30 border border-white/10"}`,children:e.jsx(zr,{className:`text-sm ${d?"animate-pulse":""}`})})]})})]})},_a=({step:t,currentStep:s,label:r,time:a,isLast:n})=>{const i=s>t,l=s===t;return e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${i?"bg-[#05E06C]500 shadow-lg shadow-emerald-500/30":l?"bg-[#05E06C]500 animate-pulse shadow-lg shadow-emerald-500/30":"bg-slate-700 border border-slate-600"}`,children:i?e.jsx(pe,{className:"text-white text-sm"}):e.jsx("div",{className:`w-3 h-3 rounded-full ${l?"bg-white":"bg-slate-500"}`})}),!n&&e.jsx("div",{className:`w-0.5 h-12 ${i?"bg-[#05E06C]500":"bg-slate-700"}`})]}),e.jsxs("div",{className:"flex-1 pb-8",children:[e.jsx("p",{className:`font-medium ${l?"text-[#05E06C]400":i?"text-white":"text-white/40"}`,children:r}),a&&e.jsx("p",{className:"text-xs text-white/40 mt-0.5",children:a})]})]})},Ta=({orderId:t,onBack:s})=>{const[r,a]=m.useState(null),[n,i]=m.useState(!0),[l,c]=m.useState(!1);if(m.useEffect(()=>{if(!t)return;const o=Na(t,h=>{a(h),i(!1)});return()=>o()},[t]),n)return e.jsx("div",{className:"min-h-screen bg-[#060D2D] flex items-center justify-center",children:e.jsx("div",{className:"w-12 h-12 rounded-full border-4 border-emerald-500 border-t-transparent animate-spin"})});if(!r)return e.jsxs("div",{className:"min-h-screen bg-[#060D2D] flex flex-col items-center justify-center px-6",children:[e.jsx("p",{className:"text-white/60",children:"Order not found"}),e.jsx("button",{onClick:s,className:"mt-4 text-[#05E06C]400 font-medium",children:"Go Back"})]});const d=es(r.status)||{label:"Processing",description:"Order is being processed",color:"text-white/60",icon:"",step:1},u=[{step:1,label:"Order Placed",status:"pending"},{step:2,label:"Confirmed",status:"confirmed"},{step:3,label:"Preparing",status:"preparing"},{step:4,label:"Ready",status:"ready"},{step:5,label:"Out for Delivery",status:"out_for_delivery"},{step:6,label:"Delivered",status:"delivered"}],f=o=>{if(!Array.isArray(r.statusHistory))return o==="pending"&&r.createdAt?new Date(r.createdAt).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):null;const h=r.statusHistory.find(p=>p.status===o);return h?new Date(h.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):null};return e.jsxs("div",{className:"min-h-screen bg-[#060D2D]",children:[e.jsx("div",{className:"bg-[#060D2D]/80 backdrop-blur-xl sticky top-0 z-10 border-b border-white/5",children:e.jsxs("div",{className:"px-4 py-3 flex items-center gap-3",style:{paddingTop:"calc(env(safe-area-inset-top) + 12px)"},children:[e.jsx("button",{onClick:s,className:"w-10 h-10 rounded-full bg-slate-800 border border-white/10 flex items-center justify-center",children:e.jsx(K,{className:"text-white/60"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"font-bold text-white",children:"Track Order"}),e.jsxs("p",{className:"text-xs text-white/40",children:["#",r.orderNumber]})]})]})}),e.jsxs("div",{className:"mx-4 mt-4 p-4 rounded-xl bg-slate-800/50 backdrop-blur-xl border border-white/10/50",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-3xl",children:d.icon}),e.jsxs("div",{children:[e.jsx("p",{className:`font-semibold ${d.color||"text-[#05E06C]400"}`,children:d.label}),e.jsx("p",{className:"text-sm text-white/60",children:d.description})]})]}),r.estimatedDelivery&&r.status!=="delivered"&&e.jsxs("div",{className:"mt-3 pt-3 border-t border-white/10 flex items-center gap-2",children:[e.jsx(fe,{className:"text-white/40"}),e.jsxs("span",{className:"text-sm text-white/60",children:["Estimated delivery by ",new Date(r.estimatedDelivery).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]})]})]}),r.status!=="cancelled"&&e.jsxs("div",{className:"mx-4 mt-6 bg-slate-800/50 backdrop-blur-xl rounded-xl border border-white/10/50 p-4",children:[e.jsx("h3",{className:"font-semibold text-white mb-4",children:"Order Progress"}),e.jsx("div",{children:u.map((o,h)=>e.jsx(_a,{step:o.step,currentStep:d.step,label:o.label,time:f(o.status),isLast:h===u.length-1},o.step))})]}),(r.deliveryAgent||r.deliveryPartner)&&r.status==="out_for_delivery"&&e.jsxs(P.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"mx-4 mt-4 bg-gradient-to-r from-emerald-500 to-teal-500 rounded-xl p-4 text-white shadow-xl shadow-emerald-500/20",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"font-semibold",children:"Delivery Partner"}),e.jsx("span",{className:"text-xs bg-white/20 px-2 py-1 rounded-full",children:"On the way"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-14 h-14 rounded-full bg-white/20 flex items-center justify-center",children:e.jsx(we,{className:"text-2xl"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-lg",children:r.deliveryAgent?.name||r.deliveryPartner}),e.jsx("p",{className:"text-sm text-white/80",children:r.deliveryAgent?.vehicleNumber||"Delivery Agent"})]})]}),e.jsxs("div",{className:"flex gap-2",children:[(r.deliveryAgent?.phone||r.deliveryPartnerPhone)&&e.jsx("a",{href:`tel:${r.deliveryAgent?.phone||r.deliveryPartnerPhone}`,className:"w-11 h-11 rounded-full bg-white/20 flex items-center justify-center hover:bg-white/30 transition",children:e.jsx(ae,{})}),e.jsx("button",{onClick:()=>c(!0),className:"w-11 h-11 rounded-full bg-white flex items-center justify-center text-[#05E06C]600",children:e.jsx(pt,{})})]})]}),e.jsxs("button",{onClick:()=>c(!0),className:"mt-4 w-full py-2.5 bg-white/20 rounded-lg text-sm font-medium flex items-center justify-center gap-2 hover:bg-white/30 transition",children:[e.jsx(pt,{}),"Chat with delivery agent"]})]}),e.jsxs("div",{className:"mx-4 mt-4 bg-slate-800/50 backdrop-blur-xl rounded-xl border border-white/10/50 p-4",children:[e.jsx("h3",{className:"font-semibold text-white mb-3",children:"Store Details"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-blue-500/10 border border-blue-500/20 flex items-center justify-center",children:e.jsx(ce,{className:"text-blue-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-white",children:r.storeName}),e.jsx("p",{className:"text-sm text-white/40",children:"Store"})]})]}),r.storePhone&&e.jsx("a",{href:`tel:${r.storePhone}`,className:"w-10 h-10 rounded-full bg-blue-500 flex items-center justify-center shadow-lg shadow-blue-500/20",children:e.jsx(ae,{className:"text-white"})})]})]}),e.jsxs("div",{className:"mx-4 mt-4 bg-slate-800/50 backdrop-blur-xl rounded-xl border border-white/10/50 p-4",children:[e.jsx("h3",{className:"font-semibold text-white mb-3",children:"Delivery Address"}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(q,{className:"text-[#05E06C]400 mt-1"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-white",children:r.deliveryAddress?.label}),e.jsx("p",{className:"text-sm text-white/60",children:r.deliveryAddress?.address})]})]})]}),e.jsxs("div",{className:"mx-4 mt-4 bg-slate-800/50 backdrop-blur-xl rounded-xl border border-white/10/50 p-4",children:[e.jsx("h3",{className:"font-semibold text-white mb-3",children:"Order Items"}),e.jsx("div",{className:"space-y-3",children:r.items?.map((o,h)=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded bg-slate-700 flex items-center justify-center",children:e.jsx(Gt,{className:"text-white/40 text-sm"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-white",children:o.name}),e.jsxs("p",{className:"text-xs text-white/40",children:["Qty: ",o.quantity]})]})]}),e.jsxs("p",{className:"font-medium text-white",children:["",o.total]})]},h))}),e.jsxs("div",{className:"mt-4 pt-4 border-t border-white/10 space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between text-white/60",children:[e.jsx("span",{children:"Subtotal"}),e.jsxs("span",{children:["",r.subtotal]})]}),e.jsxs("div",{className:"flex justify-between text-white/60",children:[e.jsx("span",{children:"Delivery Fee"}),e.jsxs("span",{children:["",r.deliveryFee]})]}),e.jsxs("div",{className:"flex justify-between text-white/60",children:[e.jsx("span",{children:"Platform Fee"}),e.jsxs("span",{children:["",r.platformFee]})]}),e.jsxs("div",{className:"flex justify-between font-semibold text-white pt-2 border-t border-white/10",children:[e.jsx("span",{children:"Total"}),e.jsxs("span",{children:["",r.total]})]})]})]}),e.jsx("div",{className:"h-28"}),e.jsx(te,{children:l&&r&&e.jsx(Pa,{order:r,onClose:()=>c(!1)})})]})},La=({order:t,onClick:s})=>{const r=es(t.status),a=t.items?.reduce((i,l)=>i+l.quantity,0)||0,n=new Date(t.createdAt).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"});return e.jsxs(P.button,{whileTap:{scale:.98},onClick:()=>s(t),className:"w-full bg-[#101B4A]/50 backdrop-blur-xl rounded-xl border border-white/10/50 p-4 text-left",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl bg-slate-700 flex items-center justify-center",children:e.jsx(ce,{className:"text-slate-400"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-white",children:t.storeName}),e.jsxs("p",{className:"text-xs text-white/40",children:[n,"  #",t.orderNumber]})]})]}),e.jsx(W,{className:"text-white/40"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:`px-2 py-1 rounded-lg text-xs font-medium ${r.bgColor} ${r.color}`,children:[r.icon," ",r.label]}),e.jsxs("span",{className:"text-sm text-slate-400",children:[a," items"]})]}),e.jsxs("p",{className:"font-semibold text-white",children:["",t.total]})]}),t.status==="delivered"&&e.jsxs("button",{onClick:i=>{i.stopPropagation()},className:"mt-3 w-full py-2 border border-emerald-500/30 bg-emerald-500/10 text-[#05E06C]400 rounded-lg text-sm font-medium flex items-center justify-center gap-2",children:[e.jsx(Ur,{className:"text-xs"}),"Reorder"]})]})},Ia=({onBack:t,onOrderClick:s})=>{const{customer:r}=ie(),[a,n]=m.useState([]),[i,l]=m.useState(!0),[c,d]=m.useState("all");m.useEffect(()=>{(async()=>{if(r?.uid){l(!0);try{const h=await ya(r.uid,50);n(h)}catch(h){console.error("Error fetching orders:",h)}finally{l(!1)}}})()},[r]);const u=a.filter(o=>c==="active"?!["delivered","cancelled"].includes(o.status):c==="completed"?o.status==="delivered":!0),f=u.reduce((o,h)=>{const p=new Date(h.createdAt).toLocaleDateString("en-IN",{day:"numeric",month:"long",year:"numeric"});return o[p]||(o[p]=[]),o[p].push(h),o},{});return e.jsxs("div",{className:"min-h-screen bg-[#060D2D]",children:[e.jsxs("div",{className:"bg-[#060D2D]/80 backdrop-blur-xl sticky top-0 z-10 border-b border-white/5",children:[e.jsxs("div",{className:"px-4 py-3 flex items-center gap-3",style:{paddingTop:"calc(env(safe-area-inset-top) + 12px)"},children:[e.jsx("button",{onClick:t,className:"w-10 h-10 rounded-full bg-[#101B4A] border border-white/10 flex items-center justify-center",children:e.jsx(K,{className:"text-slate-400"})}),e.jsx("h1",{className:"font-bold text-white text-lg",children:"My Orders"})]}),e.jsx("div",{className:"px-4 pb-3 flex gap-2",children:[{id:"all",label:"All"},{id:"active",label:"Active"},{id:"completed",label:"Completed"}].map(o=>e.jsx("button",{onClick:()=>d(o.id),className:`px-4 py-2 rounded-full text-sm font-medium transition-all ${c===o.id?"bg-gradient-to-r from-emerald-500 to-teal-500 text-white shadow-lg shadow-emerald-500/20":"bg-[#101B4A] text-slate-400 border border-white/10"}`,children:o.label},o.id))})]}),e.jsx("div",{className:"px-4 py-4",children:i?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"w-10 h-10 rounded-full border-4 border-emerald-500 border-t-transparent animate-spin"})}):u.length>0?e.jsx("div",{className:"space-y-6",children:Object.entries(f).map(([o,h])=>e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-white/40 mb-3",children:o}),e.jsx("div",{className:"space-y-3",children:h.map(p=>e.jsx(La,{order:p,onClick:()=>s(p.id)},p.id))})]},o))}):e.jsxs("div",{className:"flex flex-col items-center justify-center py-16",children:[e.jsx("div",{className:"w-20 h-20 rounded-full bg-[#101B4A] border border-white/10 flex items-center justify-center mb-4",children:e.jsx(_e,{className:"text-white/30 text-3xl"})}),e.jsx("h3",{className:"text-lg font-semibold text-white mb-2",children:"No orders yet"}),e.jsx("p",{className:"text-sm text-white/40 text-center",children:c==="active"?"You have no active orders":c==="completed"?"You have no completed orders":"Start ordering from nearby stores"})]})}),e.jsx("div",{className:"h-24"})]})},Ra=()=>e.jsx("img",{src:"/assets/flyp_logo.png",alt:"FLYP",className:"w-12 h-12 object-contain"}),X=({icon:t,label:s,value:r,onClick:a,danger:n})=>e.jsxs("button",{onClick:a,className:`w-full flex items-center gap-4 px-4 py-3 ${n?"text-red-400":"text-white"}`,children:[e.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center ${n?"bg-red-500/10 border border-red-500/20":"bg-slate-700 border border-slate-600"}`,children:e.jsx(t,{className:n?"text-red-400":"text-slate-400"})}),e.jsxs("div",{className:"flex-1 text-left",children:[e.jsx("p",{className:"font-medium",children:s}),r&&e.jsx("p",{className:"text-sm text-white/40",children:r})]}),e.jsx(W,{className:"text-white/30"})]}),Oa=({address:t,onEdit:s,onDelete:r,onSetDefault:a})=>e.jsxs("div",{className:"bg-[#101B4A]/50 backdrop-blur-xl rounded-xl border border-white/10/50 p-4",children:[e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg bg-emerald-500/10 border border-emerald-500/20 flex items-center justify-center flex-shrink-0",children:e.jsx(q,{className:"text-[#05E06C]400 text-sm"})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"font-medium text-white",children:t.label}),t.isDefault&&e.jsx("span",{className:"px-2 py-0.5 bg-emerald-500/10 border border-emerald-500/20 text-[#05E06C]400 text-xs rounded-full",children:"Default"})]}),e.jsx("p",{className:"text-sm text-slate-400 mt-1",children:t.address})]})]})}),e.jsxs("div",{className:"flex gap-2 mt-3 pt-3 border-t border-white/10",children:[!t.isDefault&&e.jsx("button",{onClick:()=>a(t.id),className:"flex-1 py-2 text-sm text-[#05E06C]400 font-medium",children:"Set as Default"}),e.jsx("button",{onClick:()=>s(t),className:"px-4 py-2 text-sm text-slate-400",children:e.jsx(qt,{})}),e.jsx("button",{onClick:()=>r(t.id),className:"px-4 py-2 text-sm text-red-400",children:e.jsx(Kt,{})})]})]}),Ma=({onBack:t})=>{const{customer:s,customerData:r,updateProfile:a,logout:n,setDefaultAddress:i,addAddress:l}=ie(),[c,d]=m.useState(!1),[u,f]=m.useState(r?.name||""),[o,h]=m.useState(!1),[p,x]=m.useState(!1),[C,k]=m.useState({label:"",address:""}),j=async()=>{u.trim()&&u!==r?.name&&await a({name:u.trim()}),d(!1)},w=async()=>{C.label&&C.address&&(await l(C),k({label:"",address:""}),x(!1))},D=async()=>{window.confirm("Are you sure you want to logout?")&&await n()};return e.jsxs("div",{className:"min-h-screen bg-[#060D2D]",children:[e.jsxs("div",{className:"relative px-4 pt-6 pb-12 overflow-hidden",style:{paddingTop:"calc(env(safe-area-inset-top) + 24px)"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-slate-800 via-slate-900 to-slate-900"}),e.jsx("div",{className:"absolute -top-20 -right-20 w-60 h-60 rounded-full bg-emerald-500/10 blur-3xl"}),e.jsx("div",{className:"absolute -bottom-20 -left-20 w-60 h-60 rounded-full bg-teal-500/10 blur-3xl"}),e.jsxs("div",{className:"relative flex items-center gap-4",children:[e.jsx("div",{className:"w-20 h-20 rounded-full bg-[#101B4A] border-2 border-emerald-500/30 flex items-center justify-center",children:e.jsx(Zt,{className:"text-[#05E06C]400 text-3xl"})}),e.jsxs("div",{className:"flex-1",children:[c?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"text",value:u,onChange:v=>f(v.target.value),className:"flex-1 bg-[#101B4A] border border-white/10 rounded-lg px-3 py-2 text-white placeholder-slate-500 outline-none focus:ring-2 focus:ring-emerald-500",autoFocus:!0}),e.jsx("button",{onClick:j,className:"px-3 py-2 bg-emerald-500 rounded-lg text-white font-medium",children:"Save"})]}):e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:r?.name||"Customer"}),e.jsx("button",{onClick:()=>d(!0),children:e.jsx(qt,{className:"text-white/40"})})]}),e.jsx("p",{className:"text-slate-400",children:s?.phoneNumber})]})]})]}),e.jsx("div",{className:"px-4 -mt-6",children:e.jsxs("div",{className:"bg-[#101B4A]/50 backdrop-blur-xl rounded-xl border border-white/10/50 p-4 flex",children:[e.jsxs("div",{className:"flex-1 text-center border-r border-white/10",children:[e.jsx("p",{className:"text-2xl font-bold text-white",children:r?.totalOrders||0}),e.jsx("p",{className:"text-xs text-white/40",children:"Total Orders"})]}),e.jsxs("div",{className:"flex-1 text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-white",children:r?.addresses?.length||0}),e.jsx("p",{className:"text-xs text-white/40",children:"Saved Addresses"})]})]})}),e.jsxs("div",{className:"mt-6 px-4 space-y-4",children:[e.jsxs("div",{className:"bg-[#101B4A]/50 backdrop-blur-xl rounded-xl border border-white/10/50 overflow-hidden",children:[e.jsx("p",{className:"px-4 py-3 text-sm font-medium text-white/40 border-b border-white/10",children:"Account"}),e.jsx(X,{icon:ae,label:"Phone Number",value:s?.phoneNumber}),e.jsx(X,{icon:Or,label:"Email",value:r?.email||"Not added"}),e.jsx(X,{icon:q,label:"Saved Addresses",value:`${r?.addresses?.length||0} addresses`,onClick:()=>h(!o)})]}),o&&e.jsxs("div",{className:"space-y-3",children:[r?.addresses?.map(v=>e.jsx(Oa,{address:v,onSetDefault:i,onEdit:()=>{},onDelete:()=>{}},v.id)),p?e.jsxs("div",{className:"bg-[#101B4A]/50 backdrop-blur-xl rounded-xl border border-white/10/50 p-4 space-y-3",children:[e.jsx("input",{type:"text",placeholder:"Label (Home, Office, etc.)",value:C.label,onChange:v=>k({...C,label:v.target.value}),className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-sm text-white placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-emerald-500"}),e.jsx("textarea",{placeholder:"Full address",value:C.address,onChange:v=>k({...C,address:v.target.value}),rows:2,className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-sm text-white placeholder-slate-500 resize-none focus:outline-none focus:ring-2 focus:ring-emerald-500"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>x(!1),className:"flex-1 py-2 border border-slate-600 rounded-lg text-slate-400",children:"Cancel"}),e.jsx("button",{onClick:w,className:"flex-1 py-2 bg-emerald-500 text-white rounded-lg",children:"Save"})]})]}):e.jsxs("button",{onClick:()=>x(!0),className:"w-full p-4 rounded-xl border-2 border-dashed border-emerald-500/30 bg-emerald-500/5 flex items-center justify-center gap-2 text-[#05E06C]400",children:[e.jsx(le,{}),e.jsx("span",{children:"Add New Address"})]})]}),e.jsxs("div",{className:"bg-[#101B4A]/50 backdrop-blur-xl rounded-xl border border-white/10/50 overflow-hidden",children:[e.jsx("p",{className:"px-4 py-3 text-sm font-medium text-white/40 border-b border-white/10",children:"Support"}),e.jsx(X,{icon:$r,label:"Help & Support"}),e.jsx(X,{icon:Gr,label:"Privacy Policy"}),e.jsx(X,{icon:He,label:"About FLYP"})]}),e.jsx("div",{className:"bg-[#101B4A]/50 backdrop-blur-xl rounded-xl border border-white/10/50 overflow-hidden",children:e.jsx(X,{icon:Wr,label:"Logout",onClick:D,danger:!0})}),e.jsxs("div",{className:"flex flex-col items-center py-6",children:[e.jsx(Ra,{}),e.jsx("p",{className:"text-xs text-white/40 mt-3",children:"FLYP Customer App v1.0.0"})]})]}),e.jsx("div",{className:"h-24"})]})},Fa=({orderNumber:t,onTrack:s,onHome:r})=>e.jsx(P.div,{initial:{opacity:0},animate:{opacity:1},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 px-6",children:e.jsxs(P.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},className:"bg-[#101B4A] rounded-2xl p-6 w-full max-w-sm text-center border border-white/10",children:[e.jsx("div",{className:"w-20 h-20 rounded-full bg-[#05E06C]/10 border border-[#05E06C]/20 flex items-center justify-center mx-auto mb-4",children:e.jsx("span",{className:"text-4xl",children:""})}),e.jsx("h2",{className:"text-xl font-bold text-white mb-2",children:"Order Placed!"}),e.jsx("p",{className:"text-white/60 mb-2",children:"Your order has been placed successfully"}),e.jsxs("p",{className:"text-sm text-[#05E06C] font-medium mb-6",children:["Order #",t]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("button",{onClick:s,className:"w-full py-3 bg-[#05E06C] text-white rounded-xl font-semibold shadow-lg shadow-[#05E06C]/20",children:"Track Order"}),e.jsx("button",{onClick:r,className:"w-full py-3 border border-white/10 text-white/70 rounded-xl font-semibold hover:bg-white/5 transition",children:"Back to Home"})]})]})}),Ba=()=>{const{isLoggedIn:t,loading:s}=ie(),[r,a]=m.useState("home"),[n,i]=m.useState("home"),[l,c]=m.useState([]),[d,u]=m.useState(null),[f,o]=m.useState(null),[h,p]=m.useState(null),[x,C]=m.useState(!1),[k,j]=m.useState(""),[w,D]=m.useState("");m.useEffect(()=>{t&&(()=>{if(!navigator.geolocation){console.log("Geolocation not supported"),u({lat:19.076,lng:72.8777,label:"Mumbai"});return}navigator.geolocation.getCurrentPosition(E=>{u({lat:E.coords.latitude,lng:E.coords.longitude,label:"Current Location"})},E=>{console.error("Location error:",E),u({lat:19.076,lng:72.8777,label:"Mumbai"})},{enableHighAccuracy:!0,timeout:1e4,maximumAge:3e5})})()},[t]);const v=(b,E={})=>{c(I=>[...I,n]),i(b),E.store&&o(E.store),E.orderId&&p(E.orderId)},R=()=>{if(l.length>0){const b=l[l.length-1];c(E=>E.slice(0,-1)),i(b)}else i("home"),a("home")},y=b=>{switch(a(b),c([]),b){case"home":i("home");break;case"search":i("search");break;case"cart":i("cart");break;case"orders":i("orders");break;case"profile":i("profile");break;default:i("home")}},L=b=>{v("store",{store:b})},g=(b,E)=>{D(b),j(E),C(!0)};if(s)return e.jsx("div",{className:"min-h-screen bg-[#060D2D] flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(P.img,{src:"/assets/flyp_logo.png",alt:"FLYP",className:"w-24 h-24 mx-auto mb-6",animate:{scale:[1,1.1,1],opacity:[.7,1,.7]},transition:{duration:2,repeat:1/0}}),e.jsx("div",{className:"w-10 h-10 border-3 border-[#05E06C]/20 border-t-[#05E06C] rounded-full animate-spin mx-auto"})]})});if(!t)return e.jsx(Xr,{onLoginSuccess:()=>{}});const S=["home","search","cart","orders","profile"].includes(n);return e.jsxs("div",{className:"min-h-screen bg-[#060D2D]",children:[e.jsxs("main",{className:"bg-[#060D2D] min-h-screen",style:{paddingBottom:S?"calc(80px + env(safe-area-inset-bottom))":"0"},children:[n==="home"&&e.jsx("div",{className:"bg-[#060D2D] min-h-screen",children:e.jsx(ha,{location:d,onNavigate:y,onStoreSelect:L,onCategorySelect:b=>v("search")})}),n==="store"&&f&&e.jsx("div",{className:"bg-[#060D2D] min-h-screen",children:e.jsx(xa,{storeId:f.id,onBack:R,onCartClick:()=>v("cart")})}),n==="search"&&e.jsx("div",{className:"bg-[#060D2D] min-h-screen",children:e.jsx(ba,{location:d,onBack:()=>y("home"),onStoreSelect:b=>{v("store",{store:{id:b}})}})}),n==="cart"&&e.jsx("div",{className:"bg-[#060D2D] min-h-screen",children:e.jsx(va,{onBack:R,onCheckout:()=>v("checkout"),onStoreClick:b=>v("store",{store:{id:b}})})}),n==="checkout"&&e.jsx("div",{className:"bg-[#060D2D] min-h-screen",children:e.jsx(Sa,{onBack:R,onOrderPlaced:g})}),n==="tracking"&&h&&e.jsx("div",{className:"bg-[#060D2D] min-h-screen",children:e.jsx(Ta,{orderId:h,onBack:R})}),n==="orders"&&e.jsx("div",{className:"bg-[#060D2D] min-h-screen",children:e.jsx(Ia,{onBack:()=>y("home"),onOrderClick:b=>v("tracking",{orderId:b})})}),n==="profile"&&e.jsx("div",{className:"bg-[#060D2D] min-h-screen",children:e.jsx(Ma,{onBack:()=>y("home")})})]}),S&&e.jsx(Er,{activeTab:r,onTabChange:y}),x&&e.jsx(Fa,{orderNumber:k,onTrack:()=>{C(!1),v("tracking",{orderId:w})},onHome:()=>{C(!1),y("home")}})]})},za=()=>e.jsx(ur,{children:e.jsx(fs,{children:e.jsx(Ba,{})})}),Ha=()=>{const t=document.getElementById("splash");t&&(document.body.classList.add("app-loaded"),setTimeout(()=>{t.remove()},300))},$a=ps.createRoot(document.getElementById("root"));$a.render(e.jsx(Z.StrictMode,{children:e.jsx(za,{})}));setTimeout(Ha,500);"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/sw.js").catch(()=>{})});export{Se as I,$e as N,zt as W};
