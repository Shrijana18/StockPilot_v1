import{j as e,y as r,w as z,d as M,l as Ie}from"./index-DRC3F7i0.js";import{r as o}from"./router-BPBaD_i0.js";import{d as V,p as Se,l as Z,s as U}from"./firebase-DWi1MSv1.js";import{httpsCallable as L}from"./index.esm-Bux_mLJ0.js";import{aw as D,ax as he,e as xe,u as y,ay as Re,a as Ce,az as me,p as G,A as ae,m as ke,j as Ee,C as Be,a9 as ee,o as F,E as be,aA as Fe,aB as We,ae as Te,aC as _e,al as Me,aD as Ve,aj as Ue,W as ze}from"./index-CprmGC-M.js";import{E as te,i as Le,a as De,F as Ze,M as Ge,b as $e,W as qe}from"./whatsappConfig-B767RKqS.js";import{A as se}from"./index-DSciU07p.js";import{m as u}from"./proxy-BgUy8BPw.js";const Oe=({user:c,formData:i,setFormData:b,statusData:a,checkingStatus:d,fetchWABAStatus:W,onDisconnect:w,isTestMode:j})=>{const[T,S]=o.useState(!1),[f,R]=o.useState(""),[C,v]=o.useState(!1),[A,g]=o.useState(null),k=async()=>{if(!f||f.length!==6||!/^\d{6}$/.test(f)){r.error("Please enter a valid 6-digit PIN");return}if(!i.whatsappPhoneNumberId){r.error("Phone Number ID is missing. Please re-enter your WABA details.");return}v(!0),g(null);try{const h=await L(z,"registerPhoneNumber")({phoneNumberId:i.whatsappPhoneNumberId,pin:f});h.data?.success?(r.success("ðŸŽ‰ Phone registered successfully! You can now send messages."),S(!1),R(""),b(_=>({..._,whatsappPhoneRegistered:!0,whatsappPhoneVerificationStatus:"CONNECTED"})),setTimeout(()=>W(),1500)):(h.data?.error==="incorrect_pin"?g("Incorrect PIN. If Two-Step Verification is enabled on your WhatsApp Business number, enter your existing PIN. Otherwise, try a different 6-digit PIN."):g(h.data?.message||"Registration failed. Please try again."),r.error(h.data?.message||"Registration failed"))}catch(N){console.error("Registration error:",N),g(N.message||"Failed to register. Please try again."),r.error("Failed to register phone number")}finally{v(!1)}};return i.whatsappPhoneNumberId&&(a?.phone?.needsVerification||i.whatsappPhoneVerificationStatus==="pending"||i.whatsappPhoneRegistered),e.jsxs("div",{className:"bg-slate-900/80 border border-white/10 backdrop-blur-md rounded-2xl p-6 space-y-6",children:[j&&e.jsx("div",{className:"bg-purple-900/30 border border-purple-500/50 rounded-xl p-4 mb-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(D,{className:"text-purple-400 text-xl"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-purple-300 font-semibold",children:"ðŸ§ª Test Mode Active"}),e.jsx("p",{className:"text-xs text-gray-400",children:"Using Meta's test WABA for development. Messages only work with whitelisted numbers."})]})]}),w&&e.jsxs("button",{onClick:w,className:"flex items-center gap-2 px-3 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-lg text-sm font-medium transition-colors",children:[e.jsx(he,{}),"Disconnect Test"]})]})}),e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h2",{className:"text-2xl font-bold text-white flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-green-500/20 rounded-lg",children:e.jsx(xe,{className:"w-6 h-6 text-green-400"})}),"WhatsApp Business",j&&e.jsx("span",{className:"text-xs bg-purple-600 text-white px-2 py-1 rounded ml-2",children:"TEST"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[!j&&e.jsxs("button",{onClick:W,disabled:d,className:"flex items-center gap-2 px-4 py-2 bg-gray-600 hover:bg-gray-700 text-white rounded-lg text-sm font-medium transition-colors disabled:opacity-50",children:[e.jsx(y,{className:d?"animate-spin":""}),"Refresh Status"]}),!j&&e.jsxs("button",{onClick:()=>{window.location.href="/distributor-dashboard#/distributor-dashboard?tab=whatsapp&review=true"},className:"flex items-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg text-sm font-medium transition-colors",children:[e.jsx(Re,{className:"text-xs"}),"Meta App Review"]}),w&&!j&&e.jsxs("button",{onClick:w,className:"flex items-center gap-2 px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg text-sm font-medium transition-colors",children:[e.jsx(he,{}),"Disconnect"]})]})]}),d&&!a&&e.jsx("div",{className:"rounded-xl p-4 border-2 border-blue-500 bg-blue-900/20",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(y,{className:"text-blue-400 animate-spin text-xl"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-white",children:"Checking Account Status..."}),e.jsx("p",{className:"text-sm text-blue-300",children:"Fetching latest information from Meta"})]})]})}),i.whatsappBusinessAccountId&&e.jsxs("div",{className:"rounded-xl p-4 border-2 border-white/10 bg-slate-800/40",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("h3",{className:"font-bold text-white flex items-center gap-2",children:[e.jsx(Ce,{}),"Your WhatsApp Business Account"]}),e.jsx("span",{className:"px-2 py-1 bg-green-500/20 text-green-300 text-xs rounded",children:"Connected"})]}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"WABA ID:"}),e.jsx("span",{className:"text-white font-mono",children:i.whatsappBusinessAccountId})]}),i.whatsappPhoneNumber&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Phone Number:"}),e.jsx("span",{className:"text-white",children:i.whatsappPhoneNumber})]})]})]}),a?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:`rounded-xl p-4 border-2 ${a.accountReview.isApproved?"border-emerald-500 bg-emerald-900/20":a.accountReview.isPending?"border-yellow-500 bg-yellow-900/20":"border-red-500 bg-red-900/20"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("h3",{className:"font-bold text-white flex items-center gap-2",children:[e.jsx(me,{}),"Account Review Status"]}),a.accountReview.isApproved?e.jsx(G,{className:"text-emerald-400 text-xl"}):a.accountReview.isPending?e.jsx(y,{className:"text-yellow-400 animate-spin text-xl"}):e.jsx(ae,{className:"text-red-400 text-xl"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:`text-sm font-medium ${a.accountReview.isApproved?"text-emerald-300":a.accountReview.isPending?"text-yellow-300":"text-red-300"}`,children:a.accountReview.status}),a.accountReview.isPending&&e.jsx("p",{className:"text-xs text-yellow-300 mt-2",children:"â³ Meta is reviewing your account. This usually takes 24-48 hours."})]})]}),e.jsxs("div",{className:`rounded-xl p-4 border-2 ${a.phone.verified?"border-emerald-500 bg-emerald-900/20":a.phone.registered?"border-yellow-500 bg-yellow-900/20":"border-gray-500 bg-gray-900/20"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("h3",{className:"font-bold text-white flex items-center gap-2",children:[e.jsx(ke,{}),"Phone Number Status"]}),a.phone.verified?e.jsx(G,{className:"text-emerald-400 text-xl"}):a.phone.registered?e.jsx(Ee,{className:"text-yellow-400 text-xl"}):e.jsx(Be,{className:"text-gray-400 text-xl"})]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[a.phone.phoneNumber?e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-400",children:"Phone Number:"}),e.jsx("span",{className:"text-white font-medium",children:a.phone.phoneNumber})]}):e.jsx("p",{className:"text-gray-400",children:"No phone number added yet"}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-400",children:"Status:"}),e.jsx("span",{className:`font-medium ${a.phone.verified?"text-emerald-300":a.phone.registered?"text-yellow-300":"text-gray-400"}`,children:a.phone.verified?"âœ“ Verified and Connected":a.phone.registered?`âš  ${a.phone.verificationStatus} - Needs Verification`:"âŒ Not Registered"})]}),a.phone.needsVerification&&e.jsxs("div",{className:"mt-3 space-y-2",children:[e.jsx("div",{className:"p-2 bg-yellow-900/30 rounded text-xs text-yellow-300",children:'ðŸ’¡ Your phone is verified but not registered with Cloud API. Click "Register Phone" to complete setup.'}),e.jsxs("button",{onClick:()=>S(!0),className:"w-full flex items-center justify-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg text-sm font-medium transition-colors",children:[e.jsx(ee,{}),"Register Phone with PIN"]})]})]})]}),a.waba&&e.jsxs("div",{className:"rounded-xl p-4 border-2 border-white/10 bg-slate-800/40",children:[e.jsxs("h3",{className:"font-bold text-white mb-3 flex items-center gap-2",children:[e.jsx(F,{}),"Account Details"]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Account Name:"}),e.jsx("span",{className:"text-white",children:a.waba.name})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Status:"}),e.jsx("span",{className:a.waba.isEnabled?"text-emerald-300":"text-red-300",children:a.waba.isEnabled?"âœ“ Enabled":"âŒ Disabled"})]}),a.waba.timezone&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Time Zone:"}),e.jsx("span",{className:"text-white",children:a.waba.timezone})]})]})]}),a.overall.needsAction&&a.overall.pendingActions.length>0&&e.jsxs("div",{className:"rounded-xl p-4 border-2 border-yellow-500 bg-yellow-900/20",children:[e.jsxs("h3",{className:"font-bold text-white mb-3 flex items-center gap-2",children:[e.jsx(F,{}),"Action Required"]}),e.jsx("p",{className:"text-sm text-yellow-300 mb-2",children:"Complete these steps to fully activate your account:"}),e.jsx("ul",{className:"list-disc list-inside space-y-1 text-sm text-yellow-200",children:a.overall.pendingActions.map((N,h)=>e.jsx("li",{children:N},h))})]}),a.overall.ready&&e.jsxs("div",{className:"rounded-xl p-4 border-2 border-emerald-500 bg-emerald-900/20",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(G,{className:"text-emerald-400 text-2xl"}),e.jsx("h3",{className:"font-bold text-white text-lg",children:"All Set! Account is Ready"})]}),e.jsx("p",{className:"text-sm text-emerald-300",children:"Your WhatsApp Business Account is fully configured and ready to use."})]})]}):!d&&i.whatsappBusinessAccountId&&e.jsxs("div",{className:"rounded-xl p-4 border-2 border-gray-500 bg-gray-900/20",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(F,{className:"text-gray-400"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-white",children:"Status Information"}),e.jsx("p",{className:"text-sm text-gray-400",children:'Click "Refresh Status" to see your account review and phone verification status'})]})]}),i.whatsappPhoneNumberId&&!i.whatsappPhoneRegistered&&e.jsxs("button",{onClick:()=>S(!0),className:"mt-4 w-full flex items-center justify-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg text-sm font-medium transition-colors",children:[e.jsx(ee,{}),"Register Phone Number"]})]}),T&&e.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-slate-800 border border-white/10 rounded-2xl p-6 max-w-md w-full mx-4 shadow-2xl",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"p-3 bg-blue-500/20 rounded-full",children:e.jsx(ee,{className:"text-blue-400 text-xl"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-white",children:"Register Phone Number"}),e.jsx("p",{className:"text-sm text-gray-400",children:"Complete Cloud API registration"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"p-3 bg-blue-900/30 border border-blue-500/30 rounded-lg text-sm",children:[e.jsx("p",{className:"text-blue-200 font-medium mb-2",children:"ðŸ” About the 6-digit PIN:"}),e.jsxs("ul",{className:"text-blue-300 space-y-1 text-xs",children:[e.jsxs("li",{children:["â€¢ If you have ",e.jsx("strong",{children:"Two-Step Verification enabled"})," on WhatsApp, enter your existing PIN"]}),e.jsx("li",{children:"â€¢ If you DON'T have 2FA enabled, create a NEW 6-digit PIN (this will enable 2FA)"}),e.jsx("li",{children:"â€¢ Remember this PIN - you'll need it if re-registering"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Enter 6-Digit PIN"}),e.jsx("input",{type:"password",maxLength:6,value:f,onChange:N=>{const h=N.target.value.replace(/\D/g,"").slice(0,6);R(h),g(null)},placeholder:"Enter 6-digit PIN",className:"w-full px-4 py-3 bg-slate-700 border border-white/10 rounded-lg text-white text-center text-2xl tracking-widest font-mono focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1 text-center",children:[f.length,"/6 digits"]})]}),A&&e.jsx("div",{className:"p-3 bg-red-900/30 border border-red-500/30 rounded-lg",children:e.jsx("p",{className:"text-red-300 text-sm",children:A})}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>{S(!1),R(""),g(null)},disabled:C,className:"flex-1 px-4 py-3 bg-gray-600 hover:bg-gray-700 text-white rounded-lg font-medium transition-colors disabled:opacity-50",children:"Cancel"}),e.jsx("button",{onClick:k,disabled:C||f.length!==6,className:"flex-1 px-4 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors disabled:opacity-50 flex items-center justify-center gap-2",children:C?e.jsxs(e.Fragment,{children:[e.jsx(y,{className:"animate-spin"}),"Registering..."]}):e.jsxs(e.Fragment,{children:[e.jsx(be,{}),"Register Phone"]})})]}),e.jsxs("p",{className:"text-xs text-gray-500 text-center",children:["Phone Number ID: ",e.jsx("code",{className:"text-gray-400",children:i.whatsappPhoneNumberId})]})]})]})})]})},m={wabaId:"849529957927153",phoneNumberId:"954998794358933",phoneNumber:"+1 555 191 5256",displayName:"Test Number",testRecipient:"+918329690931",tempAccessToken:"EAAbCX6enA4cBQWvjDMZCNC0YK9GB4ZAiEZA0SqHEYVWMBX3z4Ui1cjzZAQsWbdpZAEf3e7YUv2WP1sRDPlCcFGRlUzhJfUU83ohwDE2ABzyqQ4UmMF8ZAmfbvGTZCwDFr6DUVikI6BKhpiSkv4rr3NLAoZCMMBlnWLZBVpzzqdjGNzix6iDyrrEojyZBUSnSao7cRVndTQ2lBuhNUPjZBr6DqUbARZAnKM5oBXnCqHfggpPgRxrjKCFkfUtgCdlZAz5bJgLzwM3ST9evmhUZAPZAJgse7Cuj0iHws4M7ZBiue5zE5gZDZD"},st=({user:c,formData:i,setFormData:b})=>{const[a,d]=o.useState(!1),[W,w]=o.useState(null),[j,T]=o.useState(null),[S,f]=o.useState(!1),[R,C]=o.useState(!1),[v,A]=o.useState(!1),[g,k]=o.useState(""),[N,h]=o.useState(null),[_,$]=o.useState(!1),[q,P]=o.useState(null),[ge,O]=o.useState(!1),[K,ne]=o.useState(""),[re,ie]=o.useState(""),[le,oe]=o.useState(""),[H,ce]=o.useState(!1),[we,Y]=o.useState(!1),[J,de]=o.useState(!1),fe=o.useRef(null),Ne=i.whatsappEnabled&&i.whatsappBusinessAccountId;o.useEffect(()=>{(async()=>{try{await Le(),C(!0),console.log("âœ… Facebook SDK initialized")}catch(l){console.warn("Facebook SDK initialization failed:",l),De()&&C(!0)}})()},[]),o.useEffect(()=>{if(!c)return;const s=V(M,"businesses",c.uid),l=Se(s,async t=>{if(t.exists()){const n=t.data();n.whatsappBusinessAccountId&&n.whatsappBusinessAccountId!==i.whatsappBusinessAccountId&&(console.log("ðŸ”„ Real-time update: WABA detected in Firestore"),b(x=>({...x,whatsappBusinessAccountId:n.whatsappBusinessAccountId,whatsappPhoneNumberId:n.whatsappPhoneNumberId,whatsappPhoneNumber:n.whatsappPhoneNumber,whatsappEnabled:n.whatsappEnabled||!1,whatsappProvider:n.whatsappProvider,whatsappPhoneRegistered:n.whatsappPhoneRegistered||!1,whatsappPhoneVerificationStatus:n.whatsappPhoneVerificationStatus||"not_registered",whatsappVerified:n.whatsappVerified||!1,whatsappAccountReviewStatus:n.whatsappAccountReviewStatus||"PENDING",whatsappTestMode:n.whatsappTestMode||!1,whatsappCreatedVia:n.whatsappCreatedVia||""})),!n.whatsappTestMode&&n.whatsappCreatedVia!=="test_mode_setup"&&setTimeout(()=>I(),1e3),!a&&!v&&r.success("WhatsApp account connected! Fetching status...")),n.whatsappAccountReviewStatus&&n.whatsappAccountReviewStatus!==i.whatsappAccountReviewStatus&&b(x=>({...x,whatsappAccountReviewStatus:n.whatsappAccountReviewStatus,whatsappVerified:n.whatsappVerified||!1}))}},t=>{console.error("Error in Firestore listener:",t)});return()=>l()},[c,i.whatsappBusinessAccountId,i.whatsappAccountReviewStatus,b,a,v]);const I=async()=>{if(!(!c||!i.whatsappBusinessAccountId)){if(i.whatsappTestMode||i.whatsappCreatedVia==="test_mode_setup"){T({waba:{id:i.whatsappBusinessAccountId,isEnabled:!0},accountReview:{status:"APPROVED",isApproved:!0},phone:{phoneNumberId:i.whatsappPhoneNumberId,phoneNumber:i.whatsappPhoneNumber,verified:!0,registered:!0},overall:{ready:!0,needsAction:!1,pendingActions:[]}});return}f(!0);try{const l=await L(z,"getWABAStatus")();if(l.data?.success&&l.data.status){const t=l.data.status;T(t),b(n=>({...n,whatsappPhoneNumber:t.phone?.phoneNumber||n.whatsappPhoneNumber,whatsappPhoneNumberId:t.phone?.phoneNumberId||n.whatsappPhoneNumberId,whatsappPhoneRegistered:t.phone?.registered||!1,whatsappPhoneVerificationStatus:t.phone?.verificationStatus||"not_registered",whatsappVerified:t.phone?.verified||!1,whatsappAccountReviewStatus:t.accountReview?.status||"PENDING"}))}}catch(s){console.error("Error fetching WABA status:",s)}finally{f(!1)}}};o.useEffect(()=>{c&&i.whatsappBusinessAccountId&&!j&&I()},[c?.uid,i.whatsappBusinessAccountId]);const Q=o.useCallback(s=>{if(!["https://business.facebook.com","https://www.facebook.com","https://facebook.com"].some(n=>s.origin.startsWith(n)))return;const t=s.data;if(t?.type==="WA_EMBEDDED_SIGNUP")if(console.log("ðŸ“¨ Meta SDK Event:",t.event,t),t.event===te.FINISH){const n=t.data?.waba_id,x=t.data?.phone_number_id;n?(console.log("âœ… Signup finished with WABA:",n),pe({wabaId:n,phoneNumberId:x,source:"sdk_finish_event"})):(console.log("âš ï¸ FINISH event without WABA ID, running detection..."),E())}else t.event===te.CANCEL?(console.log("âŒ Signup cancelled by user"),d(!1),r.info("WhatsApp setup cancelled")):t.event===te.ERROR&&(console.error("âŒ Signup error:",t.data),d(!1),w(t.data?.error_message||"Signup failed"),r.error("WhatsApp signup failed. Please try again."))},[]);o.useEffect(()=>(window.addEventListener("message",Q),()=>window.removeEventListener("message",Q)),[Q]);const pe=async s=>{const{wabaId:l,phoneNumberId:t,code:n,source:x}=s;d(!0);try{const p=await L(z,"exchangeCodeForWABA")({code:n||null,wabaId:l||null,phoneNumberId:t||null});if(p.data?.requirePin){console.log("ðŸ” PIN required for phone registration"),h({wabaId:p.data.wabaId,phoneNumberId:p.data.phoneNumberId,phoneNumber:p.data.phoneNumber}),P(p.data.pinIncorrect?"Incorrect PIN. Please try again.":null),A(!0),d(!1),p.data.pinIncorrect?r.error("Incorrect PIN. Please enter your correct WhatsApp PIN."):r.info("Please enter a 6-digit PIN to register your phone number.");return}p.data?.success?(b(X=>({...X,whatsappBusinessAccountId:p.data.wabaId,whatsappPhoneNumberId:p.data.phoneNumberId,whatsappPhoneNumber:p.data.phoneNumber,whatsappEnabled:!0,whatsappProvider:"meta_tech_provider",whatsappCreatedVia:"embedded_signup_sdk",whatsappPhoneRegistered:p.data.registrationSuccess||!1,whatsappVerified:!1,whatsappAccountReviewStatus:"PENDING"})),r.success("WhatsApp Business Account connected successfully!"),setTimeout(()=>I(),2e3)):p.data?.detected||r.info("Setup incomplete. Please complete the signup in the popup window, then click 'Check for My Account'.")}catch(B){console.error("Error processing signup:",B),r.error("Failed to complete setup. Please try again.")}finally{d(!1)}},ue=async()=>{if(!c){r.error("Please log in to continue");return}d(!0),w(null);try{const s=`embedded_${c.uid}_${Date.now()}`;fe.current=s,await Z(V(M,"whatsappOAuthSessions",s),{uid:c.uid,createdAt:U(),expiresAt:new Date(Date.now()+600*1e3),type:"embedded_signup_sdk"});const l=window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1";!l&&typeof window.FB<"u"&&window.FB.login?(console.log("ðŸ”— Starting Facebook SDK login..."),window.FB.login(t=>{if(console.log("ðŸ“¥ FB.login response:",t),t.status==="connected"){const n=t.authResponse;n?.code?(console.log("âœ… Got auth code, exchanging for WABA..."),pe({code:n.code,source:"fb_login_code"})):n?.accessToken?(console.log("âš ï¸ Got access token instead of code, detecting WABA..."),E()):(console.log("âš ï¸ Connected but no code/token, running detection..."),E())}else t.status==="not_authorized"?(console.log("âŒ User did not authorize the app"),d(!1),r.warning("Please authorize FLYP to connect your WhatsApp Business Account.")):(console.log("âŒ FB.login failed:",t.status),d(!1),setTimeout(()=>{r.info("Checking if setup was completed..."),E()},2e3))},{config_id:Ge,response_type:"code",override_default_response_type:!0,scope:Ze,extras:{setup:{},featureType:"",sessionInfoVersion:"3"}})):(console.log(l?"âš ï¸ Localhost detected - using popup fallback (FB.login requires HTTPS)":"âš ï¸ FB SDK not available, using popup fallback"),ye(s))}catch(s){console.error("Error starting signup:",s),w("Failed to start signup. Please try again."),d(!1),r.error("Failed to start WhatsApp signup")}},ye=s=>{const l=`${$e}&state=${s}&redirect_uri=${encodeURIComponent(qe)}`;console.log("ðŸ”— Opening Signup Popup (fallback)...");const t=900,n=700,x=(window.screen.width-t)/2,B=(window.screen.height-n)/2,p=window.open(l,"WhatsAppEmbeddedSignup",`width=${t},height=${n},left=${x},top=${B},resizable=yes,scrollbars=yes`);if(!p||p.closed){console.warn("Popup blocked, redirecting..."),window.location.href=l;return}const X=setInterval(()=>{p.closed&&(clearInterval(X),console.log("ðŸ“‹ Popup closed, checking for account..."),setTimeout(()=>E(),1500))},1e3)},je=async()=>{if(!g||g.length!==6){r.error("Please enter a valid 6-digit PIN");return}$(!0),P(null);try{const s=L(z,"saveWABADirect"),l={...N,pin:g},t=await s(l);if(t.data?.requirePin){t.data.pinIncorrect?(P("Incorrect PIN. Make sure you're entering your WhatsApp Two-Step Verification PIN."),r.error("Incorrect PIN. Please try again.")):P("PIN required. Please enter a valid 6-digit PIN."),k(""),$(!1);return}t.data?.success&&(A(!1),h(null),k(""),P(null),b(n=>({...n,whatsappBusinessAccountId:t.data.wabaId,whatsappPhoneNumberId:t.data.phoneNumberId,whatsappPhoneNumber:t.data.phoneNumber,whatsappEnabled:!0,whatsappPhoneRegistered:!0,whatsappPhoneVerificationStatus:"valid"})),r.success("ðŸŽ‰ Phone registered successfully! Your WhatsApp is ready."),setTimeout(()=>I(),1e3))}catch(s){console.error("PIN submission error:",s),P("Failed to register. Please try again."),r.error("Failed to register phone. Please try again.")}finally{$(!1)}},ve=async()=>{if(!c){r.error("Please log in to continue");return}if(!K.trim()){r.error("WABA ID is required");return}ce(!0);try{const s=K.trim(),l=re.trim()||null,t=le.trim()||null;console.log("ðŸ“ Saving WABA manually:",{wabaId:s,phoneNumberId:l,phoneNumber:t});const n=V(M,"businesses",c.uid),x={ownerId:c.uid,whatsappBusinessAccountId:s,whatsappPhoneNumberId:l,whatsappPhoneNumber:t,whatsappProvider:"meta_tech_provider",whatsappEnabled:!0,whatsappCreatedVia:"manual_entry",whatsappCreatedAt:U(),whatsappPhoneRegistered:!1,whatsappPhoneVerificationStatus:l?"pending":"not_registered",whatsappVerified:!1,whatsappAccountReviewStatus:"PENDING",whatsappStatusLastChecked:U()};await Z(n,x,{merge:!0}),console.log("âœ… WABA saved to Firestore"),b(B=>({...B,whatsappBusinessAccountId:s,whatsappPhoneNumberId:l,whatsappPhoneNumber:t,whatsappEnabled:!0,whatsappProvider:"meta_tech_provider",whatsappCreatedVia:"manual_entry",whatsappPhoneRegistered:!1,whatsappPhoneVerificationStatus:l?"pending":"not_registered",whatsappVerified:!1,whatsappAccountReviewStatus:"PENDING"})),r.success("âœ… WhatsApp details saved! Fetching status..."),O(!1),ne(""),ie(""),oe(""),setTimeout(()=>I(),1500)}catch(s){console.error("Manual save failed:",s),r.error("Failed to save WhatsApp details: "+(s.message||"Please try again."))}finally{ce(!1)}},Ae=async()=>{if(!c){r.error("Please log in to continue");return}if(m.phoneNumberId.length<10){r.error("âš ï¸ Test mode not configured! Phone Number ID is missing.");return}if(m.tempAccessToken.length<50){r.error("âš ï¸ Temporary Access Token not configured!");return}de(!0);try{const s=V(M,"businesses",c.uid),l={ownerId:c.uid,whatsappBusinessAccountId:m.wabaId,whatsappPhoneNumberId:m.phoneNumberId,whatsappPhoneNumber:m.phoneNumber,whatsappEnabled:!0,whatsappProvider:"meta_tech_provider",whatsappCreatedVia:"test_mode_setup",whatsappCreatedAt:U(),whatsappPhoneRegistered:!0,whatsappPhoneVerificationStatus:"VERIFIED",whatsappVerified:!0,whatsappAccountReviewStatus:"APPROVED",whatsappStatusLastChecked:U(),whatsappTestMode:!0,whatsappTestRecipient:m.testRecipient,whatsappTestAccessToken:m.tempAccessToken};await Z(s,l,{merge:!0}),b(t=>({...t,whatsappBusinessAccountId:m.wabaId,whatsappPhoneNumberId:m.phoneNumberId,whatsappPhoneNumber:m.phoneNumber,whatsappEnabled:!0,whatsappProvider:"meta_tech_provider",whatsappCreatedVia:"test_mode_setup",whatsappPhoneRegistered:!0,whatsappPhoneVerificationStatus:"VERIFIED",whatsappVerified:!0,whatsappAccountReviewStatus:"APPROVED",whatsappTestMode:!0})),Y(!1),r.success("ðŸ§ª Test account connected!"),r.warning("â° Token expires in ~60 minutes.",{autoClose:1e4})}catch(s){console.error("Error setting up test account:",s),r.error("Failed to setup test account.")}finally{de(!1)}},Pe=async()=>{if(!(!c||!window.confirm(i.whatsappTestMode?"Disconnect test mode? You can reconnect anytime.":"Are you sure you want to disconnect your WhatsApp Business Account?")))try{const l=V(M,"businesses",c.uid);await Z(l,{ownerId:c.uid,whatsappBusinessAccountId:null,whatsappPhoneNumberId:null,whatsappPhoneNumber:null,whatsappEnabled:!1,whatsappProvider:null,whatsappCreatedVia:null,whatsappCreatedAt:null,whatsappPhoneRegistered:!1,whatsappPhoneVerificationStatus:null,whatsappVerified:!1,whatsappAccountReviewStatus:null,whatsappStatusLastChecked:null,whatsappTestMode:!1,whatsappTestRecipient:null},{merge:!0}),b(t=>({...t,whatsappBusinessAccountId:null,whatsappPhoneNumberId:null,whatsappPhoneNumber:null,whatsappEnabled:!1,whatsappProvider:null,whatsappCreatedVia:null,whatsappPhoneRegistered:!1,whatsappPhoneVerificationStatus:null,whatsappVerified:!1,whatsappAccountReviewStatus:null,whatsappTestMode:!1})),T(null),r.success("WhatsApp disconnected.")}catch(l){console.error("Error disconnecting:",l),r.error("Failed to disconnect.")}},E=async()=>{if(!c){r.error("Please log in to continue");return}d(!0),w(null),r.info("Checking for your WhatsApp account...");try{const s=await Ie.currentUser?.getIdToken();if(!s)throw new Error("Auth token missing");const t=await(await fetch("https://us-central1-stockpilotv1.cloudfunctions.net/detectNewWABA",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${s}`},body:JSON.stringify({})})).json();if(t.found){const x=await L(z,"saveWABADirect")({wabaId:t.wabaId,phoneNumberId:t.primaryPhone?.id||null,phoneNumber:t.primaryPhone?.number||null,embeddedData:{detected:!0}});if(x.data?.requirePin){h({wabaId:t.wabaId,phoneNumberId:t.primaryPhone?.id,phoneNumber:t.primaryPhone?.number,embeddedData:{detected:!0}}),A(!0),d(!1),r.info("Two-step verification PIN required.");return}x.data?.success&&(r.success("WhatsApp account found and connected!"),setTimeout(()=>I(),2e3))}else r.info("No new account found. Make sure you completed the setup in the popup.")}catch(s){console.error("Error checking for account:",s),w("Failed to check for account.")}finally{d(!1)}};return Ne&&!v?e.jsx(Oe,{user:c,formData:i,setFormData:b,statusData:j,checkingStatus:S,fetchWABAStatus:I,onDisconnect:Pe,isTestMode:i.whatsappTestMode||i.whatsappCreatedVia==="test_mode_setup"}):e.jsxs("div",{className:"bg-slate-900/80 border border-white/10 backdrop-blur-md rounded-2xl p-8 relative",children:[e.jsx(se,{children:v&&e.jsx(u.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 z-50 flex items-center justify-center bg-slate-900/95 rounded-2xl p-6 overflow-y-auto",children:e.jsxs("div",{className:"w-full max-w-md text-center",children:[e.jsx("div",{className:"mx-auto w-14 h-14 bg-yellow-500/20 rounded-full flex items-center justify-center mb-4 border-2 border-yellow-500/50",children:e.jsx(be,{className:"text-yellow-400 text-2xl"})}),e.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Phone Registration PIN"}),e.jsxs("div",{className:"bg-blue-900/30 border border-blue-500/30 rounded-lg p-4 mb-5 text-left",children:[e.jsx("p",{className:"text-sm text-blue-300 font-semibold mb-2",children:"ðŸ“± What is this PIN?"}),e.jsxs("div",{className:"text-xs text-gray-300 space-y-2",children:[e.jsxs("p",{children:[e.jsx("strong",{className:"text-white",children:"If your phone number already has WhatsApp 2-Step Verification:"}),e.jsx("br",{}),"Enter your existing 6-digit PIN (the one you set in WhatsApp Settings â†’ Two-step verification)."]}),e.jsxs("p",{children:[e.jsx("strong",{className:"text-white",children:"If your phone number is new to WhatsApp Business:"}),e.jsx("br",{}),"Create a new 6-digit PIN. This will become your two-step verification PIN for security."]})]})]}),e.jsx("p",{className:"text-sm text-gray-400 mb-4",children:"Enter a 6-digit PIN to complete phone registration:"}),q&&e.jsx("div",{className:"bg-red-900/30 border border-red-500/50 rounded-lg p-3 mb-4",children:e.jsxs("p",{className:"text-sm text-red-300 flex items-center gap-2",children:[e.jsx(ae,{className:"flex-shrink-0"}),q]})}),e.jsx("input",{type:"password",maxLength:6,value:g,onChange:s=>{k(s.target.value.replace(/[^0-9]/g,"")),P(null)},placeholder:"â€¢ â€¢ â€¢ â€¢ â€¢ â€¢",className:`w-full bg-slate-800 border rounded-xl px-4 py-4 text-center text-3xl tracking-[0.5em] text-white mb-4 focus:ring-2 focus:ring-green-500 outline-none font-mono ${q?"border-red-500":"border-white/20"}`,autoFocus:!0}),e.jsx("p",{className:"text-xs text-gray-500 mb-6",children:"ðŸ’¡ Remember this PIN! You'll need it if you ever re-register this number."}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>{A(!1),k(""),h(null)},className:"flex-1 px-4 py-3 bg-slate-700 text-gray-300 rounded-lg hover:bg-slate-600 transition",disabled:_,children:"Cancel"}),e.jsx("button",{onClick:je,disabled:_||g.length!==6,className:"flex-1 px-4 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed font-semibold",children:_?e.jsxs(e.Fragment,{children:[e.jsx(y,{className:"animate-spin"}),e.jsx("span",{children:"Registering..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(G,{}),e.jsx("span",{children:"Register Phone"})]})})]}),e.jsx("div",{className:"mt-4 pt-4 border-t border-white/10",children:e.jsxs("p",{className:"text-xs text-gray-500",children:["Having trouble? Check"," ",e.jsx("a",{href:"https://faq.whatsapp.com/1278661612895630",target:"_blank",rel:"noopener noreferrer",className:"text-green-400 hover:underline",children:"WhatsApp's 2-Step Verification guide"})]})})]})})}),e.jsx(se,{children:ge&&e.jsx(u.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 z-50 flex items-center justify-center bg-slate-900/95 rounded-2xl p-6",children:e.jsxs("div",{className:"w-full max-w-md text-center",children:[e.jsx("div",{className:"mx-auto w-12 h-12 bg-blue-500/20 rounded-full flex items-center justify-center mb-4 border border-blue-500/50",children:e.jsx(F,{className:"text-blue-400 text-xl"})}),e.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Enter WhatsApp Details"}),e.jsx("p",{className:"text-sm text-gray-400 mb-6",children:"Paste your WABA details from Meta Business Manager."}),e.jsxs("div",{className:"space-y-3 text-left",children:[e.jsx("input",{type:"text",value:K,onChange:s=>ne(s.target.value),placeholder:"WABA ID (required)",className:"w-full bg-slate-800 border border-white/20 rounded-xl px-4 py-3 text-white focus:ring-2 focus:ring-blue-500 outline-none"}),e.jsx("input",{type:"text",value:re,onChange:s=>ie(s.target.value),placeholder:"Phone Number ID (optional)",className:"w-full bg-slate-800 border border-white/20 rounded-xl px-4 py-3 text-white focus:ring-2 focus:ring-blue-500 outline-none"}),e.jsx("input",{type:"text",value:le,onChange:s=>oe(s.target.value),placeholder:"Phone Number (optional)",className:"w-full bg-slate-800 border border-white/20 rounded-xl px-4 py-3 text-white focus:ring-2 focus:ring-blue-500 outline-none"})]}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[e.jsx("button",{onClick:()=>O(!1),className:"flex-1 px-4 py-2 bg-slate-700 text-gray-300 rounded-lg hover:bg-slate-600 transition",disabled:H,children:"Cancel"}),e.jsx("button",{onClick:ve,disabled:H,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:H?e.jsx(y,{className:"animate-spin"}):"Save Details"})]})]})})}),e.jsx(se,{children:we&&e.jsx(u.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 z-50 flex items-center justify-center bg-slate-900/95 rounded-2xl p-6",children:e.jsxs("div",{className:"w-full max-w-md text-center",children:[e.jsx("div",{className:"mx-auto w-14 h-14 bg-purple-500/20 rounded-full flex items-center justify-center mb-4 border-2 border-purple-500/50",children:e.jsx(D,{className:"text-purple-400 text-2xl"})}),e.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"ðŸ§ª Test Mode Setup"}),e.jsx("p",{className:"text-sm text-gray-400 mb-4",children:"Use Meta's test account to explore features without real setup."}),e.jsxs("div",{className:"bg-slate-800/80 border border-purple-500/30 rounded-xl p-4 mb-4 text-left",children:[e.jsxs("h4",{className:"text-sm font-semibold text-purple-300 mb-3 flex items-center gap-2",children:[e.jsx(Fe,{})," Test Account Details"]}),e.jsxs("div",{className:"space-y-2 text-xs",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"WABA ID:"}),e.jsx("span",{className:"text-white font-mono",children:m.wabaId})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Phone:"}),e.jsx("span",{className:"text-white font-mono",children:m.phoneNumber})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Test Recipient:"}),e.jsx("span",{className:"text-green-400 font-mono",children:m.testRecipient})]})]})]}),e.jsxs("div",{className:"bg-yellow-900/20 border border-yellow-500/30 rounded-lg p-3 mb-6 text-left",children:[e.jsx("p",{className:"text-xs text-yellow-300 font-semibold mb-2",children:"âš ï¸ Limitations:"}),e.jsxs("ul",{className:"text-xs text-gray-300 space-y-1 ml-4 list-disc",children:[e.jsx("li",{children:"Can only send to whitelisted test numbers"}),e.jsx("li",{children:"Token expires in ~60 minutes"}),e.jsx("li",{children:"For demo purposes only"})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>Y(!1),className:"flex-1 px-4 py-2 bg-slate-700 text-gray-300 rounded-lg hover:bg-slate-600 transition",disabled:J,children:"Cancel"}),e.jsx("button",{onClick:Ae,disabled:J,className:"flex-1 px-4 py-3 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg hover:from-purple-700 hover:to-pink-700 transition flex items-center justify-center gap-2 disabled:opacity-50 font-semibold",children:J?e.jsx(y,{className:"animate-spin"}):e.jsxs(e.Fragment,{children:[e.jsx(D,{})," Activate"]})})]})]})})}),e.jsxs("div",{className:"text-center mb-8",children:[e.jsx(u.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.5},className:"flex justify-center mb-6",children:e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 bg-green-500/20 rounded-full blur-xl"}),e.jsx("div",{className:"relative p-5 bg-gradient-to-br from-green-500/20 to-emerald-500/20 rounded-full border-2 border-green-500/50",children:e.jsx(xe,{className:"w-16 h-16 text-green-400"})})]})}),e.jsx(u.h2,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"text-3xl font-bold text-white mb-2",children:"Connect WhatsApp Business"}),e.jsx(u.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"text-gray-400",children:"Unlock WhatsApp Business Platform features with Meta Tech Provider integration"})]}),e.jsxs(u.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.35},className:"flex items-center justify-center gap-2 mb-4",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${R?"bg-green-500":"bg-yellow-500 animate-pulse"}`}),e.jsx("span",{className:"text-xs text-gray-500",children:R?"Facebook SDK Ready":"Loading SDK..."})]}),e.jsxs(u.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"bg-gradient-to-r from-emerald-500/10 via-teal-500/10 to-cyan-500/10 border border-emerald-500/30 rounded-xl p-5 mb-6 text-center",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2 mb-2",children:[e.jsx(me,{className:"text-emerald-400"}),e.jsx("span",{className:"text-sm font-semibold text-emerald-400",children:"Meta Tech Provider"})]}),e.jsx("p",{className:"text-xs text-gray-400",children:"As an official Meta Tech Provider, FLYP unlocks all WhatsApp features"})]}),e.jsx(u.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},className:"mb-8",children:e.jsx(u.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:ue,disabled:a,className:"w-full bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700 disabled:from-gray-600 disabled:to-gray-600 disabled:cursor-not-allowed text-white font-bold py-5 px-6 rounded-xl transition-all flex items-center justify-center gap-3 text-lg shadow-lg shadow-green-500/30",children:a?e.jsxs(e.Fragment,{children:[e.jsx(y,{className:"animate-spin text-xl"}),e.jsx("span",{children:"Connecting..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(We,{className:"text-2xl"}),e.jsx("span",{children:"Connect with Facebook"}),e.jsx(Te,{})]})})}),W&&e.jsx(u.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-red-900/30 border border-red-500/50 rounded-lg p-4 mb-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ae,{className:"text-red-400"}),e.jsx("p",{className:"text-red-300 text-sm",children:W}),e.jsx("button",{onClick:ue,className:"ml-auto px-3 py-1 bg-red-600 hover:bg-red-700 text-white rounded text-sm",children:"Retry"})]})}),e.jsxs(u.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6},className:"space-y-4 mb-6",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-400 text-center",children:"What you'll unlock:"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"bg-slate-800/40 rounded-lg p-4 text-center",children:[e.jsx(_e,{className:"text-green-400 mx-auto mb-2 text-xl"}),e.jsx("p",{className:"text-xs text-gray-300 font-medium",children:"Marketing Messages"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Send campaigns"})]}),e.jsxs("div",{className:"bg-slate-800/40 rounded-lg p-4 text-center",children:[e.jsx(Me,{className:"text-green-400 mx-auto mb-2 text-xl"}),e.jsx("p",{className:"text-xs text-gray-300 font-medium",children:"Customer Engagement"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Automated messaging"})]}),e.jsxs("div",{className:"bg-slate-800/40 rounded-lg p-4 text-center",children:[e.jsx(Ve,{className:"text-green-400 mx-auto mb-2 text-xl"}),e.jsx("p",{className:"text-xs text-gray-300 font-medium",children:"Analytics & Insights"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Track performance"})]}),e.jsxs("div",{className:"bg-slate-800/40 rounded-lg p-4 text-center",children:[e.jsx(Ue,{className:"text-green-400 mx-auto mb-2 text-xl"}),e.jsx("p",{className:"text-xs text-gray-300 font-medium",children:"Full API Access"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Complete integration"})]})]})]}),!a&&e.jsxs(u.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.8},className:"mt-6",children:[e.jsx("div",{className:"bg-yellow-900/20 border border-yellow-500/30 rounded-lg p-4 mb-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(F,{className:"text-yellow-400 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"text-xs text-gray-300",children:[e.jsx("p",{className:"font-semibold text-white mb-1",children:"Already completed the setup?"}),e.jsx("p",{children:"If you've created your WhatsApp Business Account but don't see it here, click below to detect it."})]})]})}),e.jsx(u.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:E,disabled:a,className:"w-full bg-yellow-600 hover:bg-yellow-700 disabled:bg-gray-600 disabled:cursor-not-allowed text-white font-bold py-3 px-6 rounded-xl transition-all flex items-center justify-center gap-3",children:a?e.jsxs(e.Fragment,{children:[e.jsx(y,{className:"animate-spin"}),e.jsx("span",{children:"Checking..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(ze,{}),e.jsx("span",{children:"Check for My Account"})]})}),e.jsxs(u.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>O(!0),disabled:a,className:"w-full mt-3 bg-slate-700 hover:bg-slate-600 disabled:bg-gray-600 disabled:cursor-not-allowed text-white font-bold py-3 px-6 rounded-xl transition-all flex items-center justify-center gap-3",children:[e.jsx(F,{}),e.jsx("span",{children:"Enter Details Manually"})]}),e.jsxs("div",{className:"mt-6 pt-6 border-t border-white/10",children:[e.jsx("div",{className:"bg-purple-900/20 border border-purple-500/30 rounded-lg p-4 mb-3",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(D,{className:"text-purple-400 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"text-xs text-gray-300",children:[e.jsx("p",{className:"font-semibold text-purple-300 mb-1",children:"ðŸ§ª Developer/Demo Mode"}),e.jsx("p",{children:"Want to explore features without connecting a real account?"})]})]})}),e.jsxs(u.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>Y(!0),disabled:a,className:"w-full bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 disabled:from-gray-600 disabled:to-gray-600 disabled:cursor-not-allowed text-white font-bold py-3 px-6 rounded-xl transition-all flex items-center justify-center gap-3 shadow-lg shadow-purple-500/20",children:[e.jsx(D,{}),e.jsx("span",{children:"Use Test Account (Demo Mode)"})]})]})]})]})};export{st as W};
