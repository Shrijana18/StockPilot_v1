import{y as w,j as e,b as h,r as me,s as ue,u as xe,g as he,e as ne,z as te,A as pe,B as be,n as B,C as W}from"./index-DRC3F7i0.js";import{r as d,u as fe}from"./router-BPBaD_i0.js";import{t as ge,d as Y,p as se,c as ve,q as je,v as ye,o as we,f as Ne,h as Se,e as ae,l as ie,s as oe}from"./firebase-DWi1MSv1.js";import{httpsCallable as ee}from"./index.esm-Bux_mLJ0.js";import{l as ke}from"./authUtils-CTtBfGOB.js";import{F as De,a as Ce,b as le,c as Ee,d as Ie,e as Ae,f as Oe,g as Re,h as Fe,i as K,j as Me,k as Q,l as Pe}from"./index-BrhajXHK.js";import{A as Le}from"./AddRetailerModal-ksR6C5rK.js";import{P as Ue,O as ze,T as Te,D as Be}from"./DispatchTracker-CtHmJ_ew.js";import"./orderStatus-BwkCpksU.js";import We from"./DistributorAnalytics-BUOuPkem.js";import He from"./DistributorInventory-B0tL_uSL.js";import Ve from"./DistributorManualBilling-CsmBdEeo.js";import qe from"./DistributorAIForecast-CSNKs6rE.js";import{A as $e}from"./index-DSciU07p.js";import{m as G}from"./proxy-BgUy8BPw.js";import"./vendor-Ckhrjn13.js";import"./index-CprmGC-M.js";import"./pdf-DQxUCnop.js";import"./calcProforma-Ep9qGXtN.js";import"./stockManagement-G1X58IbZ.js";import"./pricing-SUVGnFgL.js";import"./extends-CF3RwP-h.js";import"./whatsappService-BELSGllU.js";import"./whatsappConfig-B767RKqS.js";import"./esm-LCaBFwtY.js";import"./dayjs.min-BE7Gq_ss.js";import"./index-o1kP7bB5.js";import"./useTranslation-C_4YkXWs.js";import"./MagicScanDisplay-BEI3JqVX.js";import"./logInventoryChange-kGfLyhaN.js";import"./AdvancedBrandInputForm-SuxBeOfL.js";import"./RestockOrderHistory-BifXGS1-.js";import"./index-aK8Jn4kw.js";import"./BillingSettings-DR-owPbP.js";import"./CustomerForm-oVhzeonX.js";import"./FileSaver.min-DVuNBBJs.js";import"./index-CbpqHhv-.js";import"./bidi-DLACMwmw.js";import"./DistributorManualInvoicePdf-B4FHrTjE.js";import"./aiForecastingEngine-DtSDBlba.js";import"./DistributorOrderRequestForm-0fxn6v9l.js";const Ye=({open:a,onClose:H,employeeId:V,distributorId:M,onSessionStarted:q})=>{const[o,D]=d.useState(1),[p,L]=d.useState(null),[c,j]=d.useState(null),[N,S]=d.useState(!1),[$,U]=d.useState(null),[O,C]=d.useState(!1),i=d.useRef(null),R=d.useRef(null),l=d.useRef(null),x=d.useRef(!1);d.useEffect(()=>(a?(D(1),L(null),S(!1),j(null),C(!1),x.current=!1,l.current&&(clearInterval(l.current),l.current=null)):(E(),l.current&&(clearInterval(l.current),l.current=null),x.current=!1),()=>{l.current&&(clearInterval(l.current),l.current=null),E(),x.current=!1}),[a]),d.useEffect(()=>(a&&o===1?b():E(),()=>{(o!==1||!a)&&E()}),[a,o]);const b=async()=>{try{E(),C(!1);const s=await navigator.mediaDevices.getUserMedia({video:{facingMode:"user",width:{ideal:1280},height:{ideal:720}}});U(s),i.current&&(i.current.srcObject=s,i.current.onloadedmetadata=()=>{const r=()=>{i.current&&i.current.readyState>=2&&i.current.videoWidth>0&&i.current.videoHeight>0?(C(!0),console.log("[StartSession] Camera ready, video dimensions:",{width:i.current.videoWidth,height:i.current.videoHeight})):setTimeout(r,100)};r()},i.current.onplaying=()=>{i.current&&i.current.readyState>=2&&i.current.videoWidth>0&&i.current.videoHeight>0&&C(!0)})}catch(s){console.error("Error accessing camera:",s),w.error("Could not access camera. Please grant camera permissions."),C(!1)}},E=()=>{l.current&&(clearInterval(l.current),l.current=null),j(null),$&&($.getTracks().forEach(s=>s.stop()),U(null)),i.current&&(i.current.srcObject=null,i.current.onloadedmetadata=null,i.current.onplaying=null),C(!1)},_=()=>{if(x.current){console.warn("[StartSession] Capture already in progress, ignoring duplicate call");return}if(!i.current||!R.current){console.error("[StartSession] Video or canvas ref not available"),w.error("Camera not ready. Please try again.");return}const s=i.current,r=R.current;if(s.readyState<2){console.error("[StartSession] Video not ready, readyState:",s.readyState),w.error("Camera not ready. Please wait a moment for the camera to initialize.");return}if(s.videoWidth===0||s.videoHeight===0){console.error("[StartSession] Video dimensions are zero"),w.error("Camera not ready. Please wait a moment and try again.");return}x.current=!0;try{const t=r.getContext("2d");r.width=s.videoWidth,r.height=s.videoHeight,t.drawImage(s,0,0);const n=r.toDataURL("image/jpeg",.9);if(console.log("[StartSession] Image captured successfully, data URL length:",n.length),!n||n.length<100){console.error("[StartSession] Invalid image data"),w.error("Failed to capture image. Please try again."),x.current=!1;return}L(n),D(3),E()}catch(t){console.error("[StartSession] Error during capture:",t),w.error("Failed to capture image. Please try again."),x.current=!1}},J=()=>{x.current=!1,L(null),j(null),l.current&&(clearInterval(l.current),l.current=null),D(1)},X=async()=>{if(!(!p||!V||!M)){S(!0);try{const r=await(await fetch(p)).blob(),t=h.currentUser;if(!t)throw new Error("Not authenticated. Please log in again.");const n=t.uid;console.log("[StartSession] Auth UID:",n,"Prop employeeId:",V,"DistributorId:",M);const m=`session_${Date.now()}`,v=me(ue,`sessions/${M}/${n}/${m}.jpg`);console.log("[StartSession] Uploading selfie to Storage..."),await xe(v,r);const I=await he(v);console.log("[StartSession] Selfie uploaded successfully:",I);const z=ee(ne,"createEmployeeSession");console.log("[StartSession] Calling createEmployeeSession Cloud Function with empAuth..."),console.log("[StartSession] Using empAuth - auth.uid:",n,"distributorId:",M);const f=await z({selfieUrl:I,distributorId:M});if(!f.data.success)throw new Error(f.data.message||"Failed to create session");const P=f.data.sessionId;console.log("[StartSession] Session created successfully via Cloud Function, sessionId:",P),w.success("Session started successfully!"),x.current=!1,q?.({sessionId:P,selfieUrl:I}),D(4)}catch(s){console.error("Error starting session:",s),console.error("Error details:",{code:s.code,message:s.message,stack:s.stack}),x.current=!1;let r="Failed to start session. Please try again.";s.code==="permission-denied"?r="Permission denied. Please ensure Firestore rules are deployed and you are properly authenticated.":s.code==="unauthenticated"?r="Not authenticated. Please log in again.":s.message&&(r=s.message),w.error(r),S(!1)}}},y=()=>{l.current&&(clearInterval(l.current),l.current=null),x.current=!1,j(null),L(null),D(1),C(!1),E(),H()};return a?e.jsx($e,{children:e.jsxs(G.div,{className:"fixed inset-0 z-50 flex items-center justify-center p-4",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:[e.jsx("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-sm",onClick:y}),e.jsxs(G.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},className:"relative w-full max-w-2xl bg-gray-900/95 backdrop-blur-xl rounded-2xl border border-white/10 shadow-2xl overflow-hidden",onClick:s=>s.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-white/10",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-white",children:"Start Your Session"}),e.jsxs("p",{className:"text-sm text-gray-400 mt-1",children:[o===1&&(c?`Capturing in ${c}...`:"Position yourself in front of the camera"),o===3&&"Review your photo",o===4&&"Session started successfully!"]})]}),o!==4&&e.jsx("button",{onClick:y,className:"p-2 rounded-lg hover:bg-white/10 text-gray-400 hover:text-white transition-colors",children:e.jsx(De,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"p-6",children:[o===1&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"relative aspect-video bg-black rounded-xl overflow-hidden border-2 border-emerald-500/30",children:[e.jsx("video",{ref:i,autoPlay:!0,playsInline:!0,muted:!0,className:"w-full h-full object-cover"}),c!==null&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/50",children:e.jsx("div",{className:"text-white text-6xl font-bold",children:c})})]}),e.jsx("div",{className:"flex items-center justify-center gap-4",children:o===1&&e.jsxs("button",{onClick:()=>{if(c!==null||x.current)return;if(!i.current){w.error("Camera not initialized. Please wait.");return}const s=i.current;if(s.readyState<2){w.error("Camera not ready. Please wait a moment for the camera to initialize.");return}if(s.videoWidth===0||s.videoHeight===0){w.error("Camera not ready. Please wait a moment.");return}if(!O){w.error("Camera is still initializing. Please wait.");return}l.current&&(clearInterval(l.current),l.current=null),j(3);let r=3;l.current=setInterval(()=>{if(!a||o!==1){l.current&&(clearInterval(l.current),l.current=null),j(null);return}r--,j(r),r<=0&&(l.current&&(clearInterval(l.current),l.current=null),j(null),o===1&&a&&!x.current&&_())},1e3)},disabled:c!==null||!O||x.current,className:"flex items-center gap-3 px-6 py-3 bg-emerald-500 hover:bg-emerald-600 text-white font-semibold rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(Ce,{className:"w-5 h-5"}),c?`Capturing in ${c}...`:O?"Capture Photo":"Initializing Camera..."]})})]}),o===3&&e.jsxs("div",{className:"space-y-6",children:[p?e.jsx("div",{className:"relative aspect-video bg-black rounded-xl overflow-hidden border-2 border-emerald-500/30",children:e.jsx("img",{src:p,alt:"Captured selfie",className:"w-full h-full object-cover",onError:s=>{console.error("[StartSession] Image preview error"),s.target.style.display="none"}})}):e.jsx("div",{className:"relative aspect-video bg-black rounded-xl overflow-hidden border-2 border-red-500/30 flex items-center justify-center",children:e.jsxs("div",{className:"text-white text-center",children:[e.jsx("p",{className:"text-lg mb-2",children:"No image captured"}),e.jsx("p",{className:"text-sm text-gray-400",children:"Please retake the photo"})]})}),e.jsxs("div",{className:"flex items-center justify-center gap-4",children:[e.jsx("button",{onClick:J,className:"px-6 py-3 bg-white/10 hover:bg-white/15 border border-white/20 text-white font-semibold rounded-lg transition-colors",children:"Retake"}),e.jsx("button",{onClick:X,disabled:N||!p,className:"flex items-center gap-3 px-6 py-3 bg-emerald-500 hover:bg-emerald-600 text-white font-semibold rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:N?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),"Starting Session..."]}):e.jsxs(e.Fragment,{children:[e.jsx(le,{className:"w-5 h-5"}),"Start Session"]})})]})]}),o===4&&e.jsxs("div",{className:"space-y-6 text-center py-8",children:[e.jsx(G.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:200,damping:15},className:"flex justify-center",children:e.jsx("div",{className:"w-24 h-24 bg-emerald-500/20 rounded-full flex items-center justify-center",children:e.jsx(le,{className:"w-12 h-12 text-emerald-400"})})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-bold text-white mb-2",children:"Session Started!"}),e.jsx("p",{className:"text-gray-400",children:"You can now access all features"})]})]})]}),e.jsx("canvas",{ref:R,className:"hidden"})]})]})}):null},Mr=()=>{const[a,H]=d.useState(null),[V,M]=d.useState(new Date),q=te(),o=q?.distributorId||"",D=q?.employeeId||"",[p,L]=d.useState([]),[c,j]=d.useState(""),[N,S]=d.useState(!1),[$,U]=d.useState(!1),[O,C]=d.useState([]),[i,R]=d.useState(null),[l,x]=d.useState(!1),b=fe();d.useEffect(()=>{try{pe()&&be()}catch{}},[]),d.useEffect(()=>{const r=setTimeout(()=>{const t=te(),n=String(t?.distributorId||"").trim(),m=String(t?.employeeId||"").trim();if(!t||!n||!m){B(),N||(S(!0),b("/distributor-employee-login",{replace:!0}));return}let v=null,I=!1;const z=async(u,k)=>{if(I)return;I=!0;const A=String(u||"").trim(),g=String(k||"").trim();if(!A||!g){console.error("[DistributorEmployeeDashboard] ‚ùå Invalid parameters:",{distId:A,empId:g}),N||(S(!0),b("/distributor-employee-login",{replace:!0}));return}if(!h||!h.currentUser){console.error("[DistributorEmployeeDashboard] ‚ùå Cannot load data: No auth available",{hasEmpAuth:!!h,hasCurrentUser:!!h?.currentUser});return}try{const F=String(h.currentUser?.uid||g).trim(),T=Y(W,"businesses",A,"distributorEmployees",F),re=await ae(T);if(!re.exists()){console.warn("[DistributorEmployeeDashboard] Employee document not found:",{distId:A,empId:g,employeeDocId:F}),N||(S(!0),b("/distributor-employee-login",{replace:!0}));return}const de=re.data();H({id:g,...de});try{await ie(T,{lastSeen:oe(),online:!0},{merge:!0})}catch(ce){console.warn("Presence update failed (non-fatal):",ce)}}catch(F){console.error("Failed to load employee (redirecting to login):",F),N||(S(!0),b("/distributor-employee-login",{replace:!0}))}};let f=!1;const P=async()=>{if(f)return console.warn("[DistributorEmployeeDashboard] ‚ö†Ô∏è Auth restoration already in progress"),!1;if(h.currentUser)return console.log("[DistributorEmployeeDashboard] ‚úÖ Auth already exists:",h.currentUser.uid),!0;if(!t||!m||!n)return console.warn("[DistributorEmployeeDashboard] ‚ö†Ô∏è Cannot restore auth: missing session data"),!1;f=!0,console.log("[DistributorEmployeeDashboard] üîÑ Attempting to restore Firebase authentication...");try{const u=String(n).trim(),k=String(m).trim(),g=await ee(ne,"restoreDistributorEmployeeAuth")({distributorId:u,employeeId:k});if(g.data.success&&g.data.customToken){const F=g.data.customToken;if(typeof F!="string"||F.trim().length===0)return console.error("[DistributorEmployeeDashboard] ‚ùå Invalid custom token received"),f=!1,!1;if(!h)return console.error("[DistributorEmployeeDashboard] ‚ùå empAuth instance is null/undefined"),f=!1,!1;if(h.currentUser)try{await Ne(h),await new Promise(T=>setTimeout(T,200))}catch(T){console.warn("[DistributorEmployeeDashboard] Sign out failed (non-fatal):",T)}return await Se(h,F),h.currentUser?(console.log("[DistributorEmployeeDashboard] ‚úÖ Firebase authentication restored successfully:",h.currentUser.uid),f=!1,!0):(console.error("[DistributorEmployeeDashboard] ‚ùå Auth not set after signInWithCustomToken"),f=!1,!1)}else return console.warn("[DistributorEmployeeDashboard] ‚ö†Ô∏è Failed to restore auth:",g.data.message),f=!1,!1}catch(u){return console.error("[DistributorEmployeeDashboard] ‚ùå Error restoring auth:",u),f=!1,!1}},Z=!!h?.currentUser;return(async()=>{try{if(Z)console.log("[DistributorEmployeeDashboard] ‚úÖ Auth already present:",h.currentUser.uid),await new Promise(u=>setTimeout(u,200));else{if(console.log("[DistributorEmployeeDashboard] üîê No auth found, restoring..."),!await P()){console.error("[DistributorEmployeeDashboard] ‚ùå Auth restoration failed, redirecting"),B(),N||(S(!0),b("/distributor-employee-login",{replace:!0}));return}if(await new Promise(k=>setTimeout(k,500)),!h.currentUser){console.error("[DistributorEmployeeDashboard] ‚ùå Auth lost after restore, redirecting"),B(),N||(S(!0),b("/distributor-employee-login",{replace:!0}));return}}!I&&m&&n&&await z(n,m)}catch(u){console.error("[DistributorEmployeeDashboard] ‚ùå Load sequence failed:",u),B(),N||(S(!0),b("/distributor-employee-login",{replace:!0}))}})(),v=ge(h,u=>{u?console.log("[DistributorEmployeeDashboard] ‚úÖ Firebase authentication active:",u.uid):console.warn("[DistributorEmployeeDashboard] ‚ö†Ô∏è Firebase authentication not active")}),()=>{v&&v()}},1e3);return()=>clearTimeout(r)},[N,b]),d.useEffect(()=>{if(!a?.id||!o)return;const r=Y(W,"businesses",o,"distributorEmployees",a.id),t=se(r,n=>{if(n.exists()){const m=n.data();H(u=>({...u,...m}));const v=m.accessSections||{},I={addRetailers:"Add Retailers",createOrders:"Create Orders",manageOrders:"Manage Orders",trackOrders:"Track Orders",analytics:"Analytics",inventory:"Inventory",dispatch:"Dispatch",aiForecast:"AI Forecast",manualBilling:"Manual Billing",invoices:"Invoices",productOwners:"Product Owners",retailerRequests:"Retailer Requests"},z=["addRetailers","retailerRequests","createOrders","manageOrders","trackOrders","inventory","dispatch","analytics","aiForecast","manualBilling","invoices","productOwners"],f=Object.entries(v).filter(([u,k])=>k).map(([u])=>({key:u,label:I[u]||u.charAt(0).toUpperCase()+u.slice(1)})).sort((u,k)=>{const A=z.indexOf(u.key),g=z.indexOf(k.key);return A===-1&&g===-1?u.key.localeCompare(k.key):A===-1?1:g===-1?-1:A-g});L(f);const P=m.sessionActive===!0&&m.currentSessionId,Z=i;R(P),P&&Z===!1&&x(!1)}},n=>{console.error("Error listening to employee document:",n)});return()=>t()},[a,o,i]),d.useEffect(()=>{if(!o)return;const r=ve(W,"businesses",o,"employeeActivity"),t=je(r,we("createdAt","desc"),ye(20)),n=se(t,m=>{C(m.docs.map(v=>({id:v.id,...v.data()})))});return()=>n()},[o]),d.useEffect(()=>{const r=setInterval(()=>M(new Date),1e3);return()=>clearInterval(r)},[]),d.useEffect(()=>{p.length&&!c&&j(p[0].key)},[p,c]),d.useEffect(()=>{U(c==="addRetailers")},[c]);const E=async()=>{try{const r=D||a?.id||h.currentUser?.uid;if(o&&r)try{await ie(Y(W,"businesses",o,"distributorEmployees",r),{online:!1,lastSeen:oe()},{merge:!0})}catch(t){console.warn("Presence clear failed (non-fatal):",t)}await ke("distributor-employee"),b("/",{replace:!0})}catch(r){console.error("Logout error:",r),B(),b("/",{replace:!0})}},_=()=>{b("/",{replace:!0})},J=()=>{c?j(""):b("/",{replace:!0})},X=r=>{if(!r?.toDate)return"-";const t=r.toDate(),m=Math.floor((new Date-t)/1e3);return m<60?"Just now":m<3600?`${Math.floor(m/60)} mins ago`:m<86400?t.toLocaleTimeString():t.toLocaleDateString()},y={addRetailers:(r="w-5 h-5")=>e.jsxs("svg",{className:r,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:[e.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"}),e.jsx("circle",{cx:"9",cy:"7",r:"4"}),e.jsx("path",{d:"M22 21v-2a4 4 0 0 0-3-3.87"}),e.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]}),createOrders:(r="w-5 h-5")=>e.jsxs("svg",{className:r,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:[e.jsx("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),e.jsx("polyline",{points:"14,2 14,8 20,8"}),e.jsx("line",{x1:"16",y1:"13",x2:"8",y2:"13"}),e.jsx("line",{x1:"16",y1:"17",x2:"8",y2:"17"}),e.jsx("polyline",{points:"10,9 9,9 8,9"})]}),manageOrders:(r="w-5 h-5")=>e.jsxs("svg",{className:r,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:[e.jsx("rect",{x:"3",y:"4",width:"18",height:"6",rx:"1"}),e.jsx("path",{d:"M5 10v7a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2v-7"}),e.jsx("path",{d:"M9 14h6"})]}),trackOrders:(r="w-5 h-5")=>e.jsxs("svg",{className:r,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:[e.jsx("path",{d:"M3 3v5l5-5-5-5z"}),e.jsx("path",{d:"M3 8v5l5-5-5-5z"}),e.jsx("path",{d:"M3 13v5l5-5-5-5z"}),e.jsx("path",{d:"M3 18v5l5-5-5-5z"}),e.jsx("path",{d:"M8 3h5l-5 5-5-5z"}),e.jsx("path",{d:"M8 8h5l-5 5-5-5z"}),e.jsx("path",{d:"M8 13h5l-5 5-5-5z"}),e.jsx("path",{d:"M8 18h5l-5 5-5-5z"})]}),analytics:(r="w-5 h-5")=>e.jsxs("svg",{className:r,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:[e.jsx("path",{d:"M4 19V5"}),e.jsx("path",{d:"M10 19V9"}),e.jsx("path",{d:"M16 19V3"}),e.jsx("path",{d:"M22 19V12"})]}),check:(r="w-4 h-4")=>e.jsx("svg",{className:r,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:e.jsx("path",{d:"M20 6L9 17l-5-5"})})},s=()=>c==="addRetailers"?e.jsx("div",{children:e.jsx(Le,{open:$,onClose:()=>U(!1),distributorId:o,createdBy:{type:"employee",id:D,name:a?.name||"",flypEmployeeId:a?.flypEmployeeId||""},onCreated:async r=>{try{await ee(functions,"logDistributorActivity")({distributorId:o,employeeId:D,type:"addRetailer",targetId:r?.retailerId||null,meta:{name:r?.businessName||r?.name||""}})}catch(t){console.warn("Activity log failed:",t?.message||t)}},useCloudFunction:!0,toast:r=>{r.type==="success"?console.log("Success:",r.message):r.type==="error"&&console.error("Error:",r.message)},uiVariant:"embedded",autofocus:!1})}):c==="createOrders"?e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between pb-4 border-b border-white/10",children:e.jsxs("div",{children:[e.jsxs("div",{className:"inline-flex items-center gap-2 rounded-xl border border-emerald-500/30 bg-gradient-to-r from-emerald-500/20 to-cyan-500/20 px-4 py-2 text-emerald-300 text-sm font-semibold mb-2",children:[y.createOrders("w-4 h-4")," ",e.jsx("span",{children:"Create Orders"})]}),e.jsx("p",{className:"text-sm text-slate-400 mt-2",children:"Create passive orders for retailers in the network."})]})}),e.jsx(Ue,{})]}):c==="manageOrders"?e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between pb-4 border-b border-white/10",children:e.jsxs("div",{children:[e.jsxs("div",{className:"inline-flex items-center gap-2 rounded-xl border border-emerald-500/30 bg-gradient-to-r from-emerald-500/20 to-cyan-500/20 px-4 py-2 text-emerald-300 text-sm font-semibold mb-2",children:[y.manageOrders("w-4 h-4")," ",e.jsx("span",{children:"Manage Orders"})]}),e.jsx("p",{className:"text-sm text-slate-400 mt-2",children:"Manage order requests and pending orders efficiently."})]})}),e.jsx(ze,{})]}):c==="trackOrders"?e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between pb-4 border-b border-white/10",children:e.jsxs("div",{children:[e.jsxs("div",{className:"inline-flex items-center gap-2 rounded-xl border border-emerald-500/30 bg-gradient-to-r from-emerald-500/20 to-cyan-500/20 px-4 py-2 text-emerald-300 text-sm font-semibold mb-2",children:[y.trackOrders("w-4 h-4")," ",e.jsx("span",{children:"Track Orders"})]}),e.jsx("p",{className:"text-sm text-slate-400 mt-2",children:"Track and monitor order status and delivery in real-time."})]})}),e.jsx(Te,{})]}):c==="analytics"?e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between pb-4 border-b border-white/10",children:e.jsxs("div",{children:[e.jsxs("div",{className:"inline-flex items-center gap-2 rounded-xl border border-emerald-500/30 bg-gradient-to-r from-emerald-500/20 to-cyan-500/20 px-4 py-2 text-emerald-300 text-sm font-semibold mb-2",children:[y.analytics("w-4 h-4")," ",e.jsx("span",{children:"Analytics"})]}),e.jsx("p",{className:"text-sm text-slate-400 mt-2",children:"View comprehensive business analytics and performance reports."})]})}),e.jsx(We,{distributorId:o})]}):c==="inventory"?e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between pb-4 border-b border-white/10",children:e.jsxs("div",{children:[e.jsxs("div",{className:"inline-flex items-center gap-2 rounded-xl border border-emerald-500/30 bg-gradient-to-r from-emerald-500/20 to-cyan-500/20 px-4 py-2 text-emerald-300 text-sm font-semibold mb-2",children:[e.jsx("span",{className:"text-base",children:"üì¶"})," ",e.jsx("span",{children:"Inventory"})]}),e.jsx("p",{className:"text-sm text-slate-400 mt-2",children:"View and manage your inventory efficiently."})]})}),e.jsx(He,{})]}):c==="dispatch"?e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between pb-4 border-b border-white/10",children:e.jsxs("div",{children:[e.jsxs("div",{className:"inline-flex items-center gap-2 rounded-xl border border-emerald-500/30 bg-gradient-to-r from-emerald-500/20 to-cyan-500/20 px-4 py-2 text-emerald-300 text-sm font-semibold mb-2",children:[e.jsx("span",{className:"text-base",children:"üöö"})," ",e.jsx("span",{children:"Dispatch Tracker"})]}),e.jsx("p",{className:"text-sm text-slate-400 mt-2",children:"Track dispatches and deliveries in real-time."})]})}),e.jsx(Be,{})]}):c==="manualBilling"?e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between pb-4 border-b border-white/10",children:e.jsxs("div",{children:[e.jsxs("div",{className:"inline-flex items-center gap-2 rounded-xl border border-emerald-500/30 bg-gradient-to-r from-emerald-500/20 to-cyan-500/20 px-4 py-2 text-emerald-300 text-sm font-semibold mb-2",children:[e.jsx("span",{className:"text-base",children:"üí∞"})," ",e.jsx("span",{children:"Manual Billing"})]}),e.jsx("p",{className:"text-sm text-slate-400 mt-2",children:"Create and manage manual bills and invoices."})]})}),e.jsx(Ve,{})]}):c==="aiForecast"?e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between pb-4 border-b border-white/10",children:e.jsxs("div",{children:[e.jsxs("div",{className:"inline-flex items-center gap-2 rounded-xl border border-emerald-500/30 bg-gradient-to-r from-emerald-500/20 to-cyan-500/20 px-4 py-2 text-emerald-300 text-sm font-semibold mb-2",children:[e.jsx("span",{className:"text-base",children:"üß†"})," ",e.jsx("span",{children:"AI Forecast"})]}),e.jsx("p",{className:"text-sm text-slate-400 mt-2",children:"AI-powered forecasting and intelligent predictions."})]})}),e.jsx(qe,{})]}):c==="invoices"?e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between pb-4 border-b border-white/10",children:e.jsxs("div",{children:[e.jsxs("div",{className:"inline-flex items-center gap-2 rounded-xl border border-emerald-500/30 bg-gradient-to-r from-emerald-500/20 to-cyan-500/20 px-4 py-2 text-emerald-300 text-sm font-semibold mb-2",children:[e.jsx("span",{className:"text-base",children:"üßæ"})," ",e.jsx("span",{children:"Invoices"})]}),e.jsx("p",{className:"text-sm text-slate-400 mt-2",children:"View and manage invoices efficiently."})]})}),e.jsxs("div",{className:"rounded-xl border-2 border-dashed border-slate-500/30 bg-slate-800/30 p-12 text-center",children:[e.jsx("div",{className:"inline-flex h-16 w-16 items-center justify-center rounded-full bg-slate-700/50 mb-4",children:e.jsx("span",{className:"text-3xl",children:"üßæ"})}),e.jsx("h3",{className:"text-lg font-semibold text-slate-200 mb-2",children:"Invoices Feature Coming Soon"}),e.jsx("p",{className:"text-sm text-slate-400",children:"This feature is under development and will be available soon."})]})]}):c==="productOwners"?e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between pb-4 border-b border-white/10",children:e.jsxs("div",{children:[e.jsxs("div",{className:"inline-flex items-center gap-2 rounded-xl border border-emerald-500/30 bg-gradient-to-r from-emerald-500/20 to-cyan-500/20 px-4 py-2 text-emerald-300 text-sm font-semibold mb-2",children:[e.jsx("span",{className:"text-base",children:"üè≠"})," ",e.jsx("span",{children:"Product Owners"})]}),e.jsx("p",{className:"text-sm text-slate-400 mt-2",children:"Manage product owners and their connections."})]})}),e.jsxs("div",{className:"rounded-xl border-2 border-dashed border-slate-500/30 bg-slate-800/30 p-12 text-center",children:[e.jsx("div",{className:"inline-flex h-16 w-16 items-center justify-center rounded-full bg-slate-700/50 mb-4",children:e.jsx("span",{className:"text-3xl",children:"üè≠"})}),e.jsx("h3",{className:"text-lg font-semibold text-slate-200 mb-2",children:"Product Owners Feature Coming Soon"}),e.jsx("p",{className:"text-sm text-slate-400",children:"This feature is under development and will be available soon."})]})]}):c==="retailerRequests"?e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between pb-4 border-b border-white/10",children:e.jsxs("div",{children:[e.jsxs("div",{className:"inline-flex items-center gap-2 rounded-xl border border-emerald-500/30 bg-gradient-to-r from-emerald-500/20 to-cyan-500/20 px-4 py-2 text-emerald-300 text-sm font-semibold mb-2",children:[e.jsx("span",{className:"text-base",children:"üì®"})," ",e.jsx("span",{children:"Retailer Requests"})]}),e.jsx("p",{className:"text-sm text-slate-400 mt-2",children:"Manage retailer connection requests and approvals."})]})}),e.jsxs("div",{className:"rounded-xl border-2 border-dashed border-slate-500/30 bg-slate-800/30 p-12 text-center",children:[e.jsx("div",{className:"inline-flex h-16 w-16 items-center justify-center rounded-full bg-slate-700/50 mb-4",children:e.jsx("span",{className:"text-3xl",children:"üì®"})}),e.jsx("h3",{className:"text-lg font-semibold text-slate-200 mb-2",children:"Retailer Requests Feature Coming Soon"}),e.jsx("p",{className:"text-sm text-slate-400",children:"This feature is under development and will be available soon."})]})]}):e.jsx("div",{className:"rounded-xl border border-dashed border-slate-300/40 dark:border-white/10 p-6 text-center text-slate-600 dark:text-slate-300",children:"No sections assigned yet. Ask your manager to grant permissions."});return d.useEffect(()=>{a?.id&&o&&i===null&&(async()=>{try{const t=Y(W,"businesses",o,"distributorEmployees",a.id),n=await ae(t);if(n.exists()){const m=n.data(),v=m.sessionActive===!0&&m.currentSessionId;R(v)}else R(!1)}catch(t){console.error("Error checking session:",t),R(!1)}})()},[a,o,i]),a?e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-950 via-slate-900 to-slate-950 text-slate-100",children:[e.jsx("header",{className:"sticky top-0 z-20 border-b border-white/10 bg-gradient-to-r from-slate-900/95 via-slate-800/95 to-slate-900/95 backdrop-blur-xl shadow-lg shadow-black/20",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:e.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"inline-flex h-12 w-12 items-center justify-center rounded-xl overflow-hidden bg-gradient-to-br from-emerald-500/30 to-cyan-500/20 border border-emerald-400/30 shadow-lg shadow-emerald-500/10",children:a?.profilePictureUrl?e.jsx("img",{src:a.profilePictureUrl,alt:a.name||"Employee",className:"w-full h-full object-cover",onError:r=>{const t=r.target.parentElement;t&&(t.innerHTML='<svg class="w-6 h-6 text-emerald-300" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path></svg>')}}):e.jsx(Ee,{className:"w-6 h-6 text-emerald-300"})}),i&&e.jsx("div",{className:"absolute -top-1 -right-1 w-4 h-4 bg-emerald-500 rounded-full border-2 border-slate-900 animate-pulse"})]}),e.jsxs("div",{children:[e.jsxs("h1",{className:"text-xl md:text-2xl font-bold bg-gradient-to-r from-white via-emerald-100 to-cyan-100 bg-clip-text text-transparent",children:["Welcome, ",a.name||"Employee"]}),e.jsxs("div",{className:"flex items-center gap-3 mt-1",children:[e.jsxs("span",{className:"text-xs text-slate-400 font-mono",children:["FLYP ID: ",a.flypEmployeeId||a.id||"-"]}),e.jsx("span",{className:"text-slate-600",children:"‚Ä¢"}),e.jsx("span",{className:"text-xs px-2 py-0.5 rounded-md bg-purple-500/20 text-purple-300 border border-purple-400/30 font-medium",children:a.role||"Employee"})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[c&&e.jsx("button",{onClick:J,className:"p-2 rounded-lg bg-white/5 hover:bg-white/10 border border-white/10 transition-all hover:scale-105",title:"Go Back",children:e.jsx(Ie,{className:"text-slate-300 text-sm"})}),e.jsx("button",{onClick:_,className:"p-2 rounded-lg bg-white/5 hover:bg-white/10 border border-white/10 transition-all hover:scale-105",title:"Home / Main Menu",children:e.jsx(Ae,{className:"text-slate-300 text-sm"})}),e.jsxs("div",{className:"hidden sm:flex items-center gap-2 px-3 py-1.5 rounded-lg bg-white/5 border border-white/10",children:[e.jsx(Oe,{className:"w-4 h-4 text-slate-400"}),e.jsx("span",{className:"text-xs md:text-sm text-slate-300 font-mono",children:V.toLocaleTimeString()})]}),i&&e.jsxs("button",{onClick:()=>x(!0),className:"px-4 py-2 text-xs font-medium bg-gradient-to-r from-emerald-500/20 to-cyan-500/20 hover:from-emerald-500/30 hover:to-cyan-500/30 border border-emerald-400/30 text-emerald-300 rounded-lg transition-all hover:shadow-lg hover:shadow-emerald-500/20 flex items-center gap-2",children:[e.jsx(Re,{className:"w-3.5 h-3.5"}),"Restart Session"]})]})]})})}),e.jsx(Ye,{open:l,onClose:()=>x(!1),employeeId:a.id,distributorId:o,onSessionStarted:()=>{x(!1)}}),e.jsxs("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6 md:py-8 space-y-6",children:[e.jsx("style",{children:`
          .custom-scrollbar::-webkit-scrollbar {
            height: 6px;
          }
          .custom-scrollbar::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 3px;
          }
          .custom-scrollbar::-webkit-scrollbar-thumb {
            background: rgba(148, 163, 184, 0.4);
            border-radius: 3px;
          }
          .custom-scrollbar::-webkit-scrollbar-thumb:hover {
            background: rgba(148, 163, 184, 0.6);
          }
        `}),i===!1&&e.jsx("section",{className:"rounded-2xl border-2 border-amber-500/30 bg-gradient-to-br from-amber-500/10 to-orange-500/10 p-6 md:p-8",children:e.jsxs("div",{className:"flex flex-col md:flex-row items-start md:items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"inline-flex h-12 w-12 items-center justify-center rounded-full bg-amber-500/20 text-amber-300",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl md:text-2xl font-bold text-white",children:"Start Your Session"}),e.jsx("p",{className:"text-sm text-amber-200/80 mt-1",children:"Please start a session to access all features"})]})]}),e.jsx("p",{className:"text-sm text-slate-300 mt-3",children:"For security purposes, you need to verify your identity by taking a selfie before accessing your assigned functions."})]}),e.jsxs("button",{onClick:()=>x(!0),className:"px-6 py-3 bg-amber-500 hover:bg-amber-600 text-white font-semibold rounded-lg transition-colors shadow-lg shadow-amber-500/20 flex items-center gap-2 whitespace-nowrap",children:[e.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"})]}),"Start Session"]})]})}),e.jsxs("section",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-4",children:[e.jsxs("div",{className:"group relative overflow-hidden backdrop-blur-md bg-gradient-to-br from-emerald-500/20 to-emerald-600/10 border border-emerald-500/30 rounded-xl p-5 hover:border-emerald-400/50 transition-all hover:shadow-xl hover:shadow-emerald-500/10",children:[e.jsx("div",{className:"absolute top-0 right-0 w-24 h-24 bg-emerald-500/10 rounded-full -mr-12 -mt-12 group-hover:bg-emerald-500/20 transition-colors"}),e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("div",{className:"text-xs font-medium text-emerald-300 uppercase tracking-wider",children:"Status"}),a.online?e.jsx(Fe,{className:"w-5 h-5 text-emerald-400"}):e.jsx(K,{className:"w-5 h-5 text-slate-500"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[a.online&&e.jsx("div",{className:"w-2 h-2 bg-emerald-400 rounded-full animate-pulse"}),e.jsx("div",{className:`text-2xl font-bold ${a.online?"text-emerald-400":"text-slate-400"}`,children:a.online?"Online":"Offline"})]})]})]}),e.jsxs("div",{className:"group relative overflow-hidden backdrop-blur-md bg-gradient-to-br from-blue-500/20 to-blue-600/10 border border-blue-500/30 rounded-xl p-5 hover:border-blue-400/50 transition-all hover:shadow-xl hover:shadow-blue-500/10",children:[e.jsx("div",{className:"absolute top-0 right-0 w-24 h-24 bg-blue-500/10 rounded-full -mr-12 -mt-12 group-hover:bg-blue-500/20 transition-colors"}),e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("div",{className:"text-xs font-medium text-blue-300 uppercase tracking-wider",children:"Distributor ID"}),e.jsx(Me,{className:"w-5 h-5 text-blue-400"})]}),e.jsx("div",{className:"text-sm font-mono font-medium text-white break-all line-clamp-2",children:o})]})]}),e.jsxs("div",{className:"group relative overflow-hidden backdrop-blur-md bg-gradient-to-br from-purple-500/20 to-purple-600/10 border border-purple-500/30 rounded-xl p-5 hover:border-purple-400/50 transition-all hover:shadow-xl hover:shadow-purple-500/10",children:[e.jsx("div",{className:"absolute top-0 right-0 w-24 h-24 bg-purple-500/10 rounded-full -mr-12 -mt-12 group-hover:bg-purple-500/20 transition-colors"}),e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("div",{className:"text-xs font-medium text-purple-300 uppercase tracking-wider",children:"Last Seen"}),e.jsx(K,{className:"w-5 h-5 text-purple-400"})]}),e.jsx("div",{className:"text-xl font-bold text-purple-400",children:X(a.lastSeen)})]})]}),e.jsxs("div",{className:"group relative overflow-hidden backdrop-blur-md bg-gradient-to-br from-cyan-500/20 to-cyan-600/10 border border-cyan-500/30 rounded-xl p-5 hover:border-cyan-400/50 transition-all hover:shadow-xl hover:shadow-cyan-500/10",children:[e.jsx("div",{className:"absolute top-0 right-0 w-24 h-24 bg-cyan-500/10 rounded-full -mr-12 -mt-12 group-hover:bg-cyan-500/20 transition-colors"}),e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("div",{className:"text-xs font-medium text-cyan-300 uppercase tracking-wider",children:"Sections"}),e.jsx(Q,{className:"w-5 h-5 text-cyan-400"})]}),e.jsx("div",{className:"text-2xl font-bold text-cyan-400 mb-1",children:p.length}),e.jsx("div",{className:"text-xs text-slate-400 line-clamp-2",children:p.length>0?p.map(r=>r.label).join(", "):"No sections assigned"})]})]})]}),e.jsxs("section",{className:"rounded-2xl border border-white/10 bg-gradient-to-br from-white/5 to-white/2.5 backdrop-blur-md shadow-xl shadow-black/10 overflow-hidden",children:[e.jsx("div",{className:"border-b border-white/10 bg-white/5",children:e.jsxs("div",{className:"flex gap-1 px-4 pt-4 overflow-x-auto custom-scrollbar",children:[p.map(r=>{const t={addRetailers:y.addRetailers("w-4 h-4"),createOrders:y.createOrders("w-4 h-4"),manageOrders:y.manageOrders("w-4 h-4"),trackOrders:y.trackOrders("w-4 h-4"),analytics:y.analytics("w-4 h-4"),inventory:"üì¶",dispatch:"üöö",manualBilling:"üí∞",aiForecast:"üß†",invoices:"üßæ",productOwners:"üè≠",retailerRequests:"üì®"},n=c===r.key;return e.jsxs("button",{onClick:()=>j(r.key),className:`group relative inline-flex items-center gap-2 rounded-t-xl px-4 py-3 text-sm font-medium transition-all whitespace-nowrap ${n?"bg-gradient-to-br from-emerald-500 to-emerald-600 text-white shadow-lg shadow-emerald-500/30":"bg-white/5 text-slate-300 hover:bg-white/10 hover:text-white"}`,children:[typeof t[r.key]=="string"?e.jsx("span",{className:"text-base",children:t[r.key]}):t[r.key],e.jsx("span",{children:r.label}),n&&e.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-white/30 rounded-t-full"})]},r.key)}),!p.length&&e.jsx("span",{className:"text-xs text-slate-400 px-4 py-3",children:"No Sections"})]})}),e.jsx("div",{className:"p-6 md:p-8",children:i===!1?e.jsxs("div",{className:"rounded-xl border-2 border-dashed border-amber-500/30 bg-gradient-to-br from-amber-500/10 to-orange-500/5 p-12 text-center",children:[e.jsx("div",{className:"inline-flex h-20 w-20 items-center justify-center rounded-full bg-gradient-to-br from-amber-500/20 to-orange-500/20 border border-amber-400/30 mb-6",children:e.jsx("svg",{className:"w-10 h-10 text-amber-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})}),e.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Session Required"}),e.jsx("p",{className:"text-sm text-slate-300 mb-6 max-w-md mx-auto",children:"Please start a session to access this section. You'll need to verify your identity with a selfie."}),e.jsxs("button",{onClick:()=>x(!0),className:"px-6 py-3 bg-gradient-to-r from-amber-500 to-orange-500 hover:from-amber-600 hover:to-orange-600 text-white font-semibold rounded-xl transition-all shadow-lg shadow-amber-500/20 hover:shadow-xl hover:shadow-amber-500/30 flex items-center gap-2 mx-auto",children:[e.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"})]}),"Start Session"]})]}):s()})]}),e.jsxs("section",{className:"rounded-2xl border border-white/10 bg-gradient-to-br from-white/5 to-white/2.5 backdrop-blur-md shadow-xl shadow-black/10 overflow-hidden",children:[e.jsx("div",{className:"px-6 py-4 border-b border-white/10 bg-white/5",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Q,{className:"w-5 h-5 text-emerald-400"}),e.jsx("h2",{className:"text-lg font-bold text-white",children:"Recent Activity"}),O.length>0&&e.jsx("span",{className:"px-2 py-0.5 rounded-full bg-emerald-500/20 text-emerald-300 text-xs font-medium border border-emerald-400/30",children:O.length})]})}),e.jsx("div",{className:"p-6",children:O.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-white/5 border border-white/10 flex items-center justify-center mb-4",children:e.jsx(Q,{className:"w-8 h-8 text-slate-500"})}),e.jsx("p",{className:"text-sm text-slate-400 font-medium",children:"No activity yet"}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Your recent actions will appear here"})]}):e.jsx("div",{className:"space-y-3",children:O.map((r,t)=>{const m={addRetailer:"üë•",createOrder:"üì¶",updateOrder:"‚úèÔ∏è",trackOrder:"üìç"}[r.type]||"üìã";return e.jsxs(G.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:t*.05},className:"group flex items-center justify-between rounded-xl bg-white/5 border border-white/10 px-4 py-3 hover:bg-white/10 hover:border-white/20 transition-all",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[e.jsx("div",{className:"flex-shrink-0 w-10 h-10 rounded-lg bg-gradient-to-br from-emerald-500/20 to-cyan-500/20 border border-emerald-400/30 flex items-center justify-center text-lg",children:m}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx("span",{className:"font-semibold text-white capitalize",children:r.type?.replace(/([A-Z])/g," $1").trim()}),r.meta?.name&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-slate-500",children:"‚Ä¢"}),e.jsx("span",{className:"text-slate-300 truncate",children:r.meta.name})]})]}),r.createdAt?.toDate&&e.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[e.jsx(K,{className:"w-3 h-3 text-slate-500"}),e.jsx("span",{className:"text-xs text-slate-500",children:r.createdAt.toDate().toLocaleString("en-IN",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})})]})]})]}),e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-2 h-2 rounded-full bg-emerald-400"})})]},r.id)})})})]}),e.jsxs("section",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4 p-6 rounded-2xl border border-white/10 bg-gradient-to-br from-white/5 to-white/2.5 backdrop-blur-md",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm text-slate-300 font-medium mb-1",children:"Need more access?"}),e.jsx("p",{className:"text-xs text-slate-400",children:"Contact your manager to update your permissions"})]}),e.jsxs("button",{onClick:E,className:"px-5 py-2.5 rounded-xl bg-gradient-to-r from-rose-600 to-rose-700 hover:from-rose-700 hover:to-rose-800 text-white font-medium shadow-lg shadow-rose-500/20 transition-all hover:shadow-xl hover:shadow-rose-500/30 flex items-center gap-2 whitespace-nowrap",children:[e.jsx(Pe,{className:"w-4 h-4"}),"Logout"]})]})]})]}):e.jsxs("div",{className:"flex items-center justify-center h-screen flex-col gap-2 text-gray-700",children:[e.jsx("div",{className:"animate-spin h-8 w-8 border-4 border-blue-400 border-t-transparent rounded-full"}),e.jsx("p",{children:"Fetching your workspace..."})]})};export{Mr as default};
