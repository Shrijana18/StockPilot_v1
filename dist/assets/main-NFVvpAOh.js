const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index.esm-nzFwyGKL.js","assets/firebase-DGwrLPSD.js","assets/web-CycTsNy7.js","assets/motion-BPWU0vZm.js","assets/vendor-D3F3s8fL.js"])))=>i.map(i=>d[i]);
import{r as a,j as s,R as $e,m as _,A as Ie}from"./motion-BPWU0vZm.js";import{a as Tn,g as Pi}from"./vendor-D3F3s8fL.js";import{_ as _n,C as Fn,r as Yt,S as Mi,F as Di,g as Fs,a as Bs,b as Bn,c as zn,d as Oi,e as Un,i as $n,f as Hn,s as Et,h as Vn,j as Ai,k as Ii,l as Ri,m as Wn,n as mt,o as Ee,u as Mt,p as Pe,q as Gn,t as Me,v as gt,w as fs,x as zs,y as Us,z as Zn,A as $s,B as Ti}from"./firebase-DGwrLPSD.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function r(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(i){if(i.ep)return;i.ep=!0;const o=r(i);fetch(i.href,o)}})();var Gt={},Ys;function _i(){if(Ys)return Gt;Ys=1;var t=Tn();return Gt.createRoot=t.createRoot,Gt.hydrateRoot=t.hydrateRoot,Gt}var Fi=_i();const Bi=Pi(Fi),qn=a.createContext(),Rt=()=>{const t=a.useContext(qn);if(!t)throw new Error("useCart must be used within CartProvider");return t},zi=({children:t})=>{const[e,r]=a.useState([]),[n,i]=a.useState(null);a.useEffect(()=>{const h=localStorage.getItem("flyp_customer_cart"),f=localStorage.getItem("flyp_customer_cart_store");if(h)try{r(JSON.parse(h))}catch(g){console.error("Failed to load cart:",g)}if(f)try{i(JSON.parse(f))}catch(g){console.error("Failed to load cart store:",g)}},[]),a.useEffect(()=>{localStorage.setItem("flyp_customer_cart",JSON.stringify(e)),n&&localStorage.setItem("flyp_customer_cart_store",JSON.stringify(n))},[e,n]);const o=(h,f,g=1)=>{if(n&&n.id!==f.id&&e.length>0)return{success:!1,error:"DIFFERENT_STORE",message:`Your cart has items from ${n.name}. Clear cart to add from ${f.name}?`};(!n||n.id===f.id)&&i({id:f.id,name:f.businessName||f.name,deliveryFee:f.deliveryFee||0,minOrder:parseFloat(f.minOrderValue)||0,freeDeliveryAbove:parseFloat(f.freeDeliveryAbove)||0,deliveryRadius:f.deliveryRadius||10,pickupEnabled:f.pickupEnabled||!1});const m=h.sellingPrice||h.price||0,N=h.mrp||m,x=h.imageUrl||h.image||"",y=h.unit||h.packSize||"",L=h.offerLabel||null,M=h.returnPolicy||"inherit";return r(b=>{const j=b.findIndex(v=>v.productId===h.id);if(j>=0){const v=[...b];return v[j].quantity+=g,v}else return[...b,{productId:h.id,name:h.name,price:m,mrp:N,image:x,unit:y,quantity:g,offerLabel:L,returnPolicy:M}]}),{success:!0}},l=(h,f)=>{if(f<=0){c(h);return}r(g=>g.map(m=>m.productId===h?{...m,quantity:f}:m))},c=h=>{r(f=>{const g=f.filter(m=>m.productId!==h);return g.length===0&&(i(null),localStorage.removeItem("flyp_customer_cart_store")),g})},d=()=>{r([]),i(null),localStorage.removeItem("flyp_customer_cart"),localStorage.removeItem("flyp_customer_cart_store")},p=()=>{const h=e.reduce((j,v)=>j+v.price*v.quantity,0),f=parseFloat(n?.deliveryFee)||0,g=parseFloat(n?.freeDeliveryAbove)||0,m=g>0&&h>=g,N=m?0:f,x=g>0?Math.max(0,g-h):0,y=10,L=h+N+y,M=e.reduce((j,v)=>j+v.quantity,0),b=e.reduce((j,v)=>{const w=(v.mrp||v.price)*v.quantity,E=v.price*v.quantity;return j+(w-E)},0);return{subtotal:h,deliveryFee:N,baseDeliveryFee:f,platformFee:y,total:L,itemCount:M,savings:b,meetsMinOrder:h>=(n?.minOrder||0),freeDeliveryAbove:g,qualifiesForFreeDelivery:m,amountForFreeDelivery:x}},u=h=>e.find(g=>g.productId===h)?.quantity||0;return s.jsx(qn.Provider,{value:{cartItems:e,cartStore:n,addToCart:o,updateQuantity:l,removeFromCart:c,clearCart:d,getCartTotals:p,getItemQuantity:u},children:t})},Ui="modulepreload",$i=function(t){return"/"+t},Js={},Hs=function(e,r,n){let i=Promise.resolve();if(r&&r.length>0){let d=function(p){return Promise.all(p.map(u=>Promise.resolve(u).then(h=>({status:"fulfilled",value:h}),h=>({status:"rejected",reason:h}))))};document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),c=l?.nonce||l?.getAttribute("nonce");i=d(r.map(p=>{if(p=$i(p),p in Js)return;Js[p]=!0;const u=p.endsWith(".css"),h=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${p}"]${h}`))return;const f=document.createElement("link");if(f.rel=u?"stylesheet":Ui,u||(f.as="script"),f.crossOrigin="",f.href=p,c&&f.setAttribute("nonce",c),document.head.appendChild(f),u)return new Promise((g,m)=>{f.addEventListener("load",g),f.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${p}`)))})}))}function o(l){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=l,window.dispatchEvent(c),!c.defaultPrevented)throw l}return i.then(l=>{for(const c of l||[])c.status==="rejected"&&o(c.reason);return e().catch(o)})};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kn="firebasestorage.googleapis.com",Hi="storageBucket",Vi=120*1e3,Wi=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ae extends Di{constructor(e,r,n=0){super(ys(e),`Firebase Storage: ${r} (${ys(e)})`),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Ae.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return ys(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var De;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(De||(De={}));function ys(t){return"storage/"+t}function Gi(){const t="An unknown error occurred, please check the error payload for server response.";return new Ae(De.UNKNOWN,t)}function Zi(){return new Ae(De.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function qi(){return new Ae(De.CANCELED,"User canceled the upload/download.")}function Ki(t){return new Ae(De.INVALID_URL,"Invalid URL '"+t+"'.")}function Yi(t){return new Ae(De.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function Qs(t){return new Ae(De.INVALID_ARGUMENT,t)}function Yn(){return new Ae(De.APP_DELETED,"The Firebase app was deleted.")}function Ji(t){return new Ae(De.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Se{constructor(e,r){this.bucket=e,this.path_=r}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,r){let n;try{n=Se.makeFromUrl(e,r)}catch{return new Se(e,"")}if(n.path==="")return n;throw Yi(e)}static makeFromUrl(e,r){let n=null;const i="([A-Za-z0-9.\\-_]+)";function o(b){b.path.charAt(b.path.length-1)==="/"&&(b.path_=b.path_.slice(0,-1))}const l="(/(.*))?$",c=new RegExp("^gs://"+i+l,"i"),d={bucket:1,path:3};function p(b){b.path_=decodeURIComponent(b.path)}const u="v[A-Za-z0-9_]+",h=r.replace(/[.]/g,"\\."),f="(/([^?#]*).*)?$",g=new RegExp(`^https?://${h}/${u}/b/${i}/o${f}`,"i"),m={bucket:1,path:3},N=r===Kn?"(?:storage.googleapis.com|storage.cloud.google.com)":r,x="([^?#]*)",y=new RegExp(`^https?://${N}/${i}/${x}`,"i"),M=[{regex:c,indices:d,postModify:o},{regex:g,indices:m,postModify:p},{regex:y,indices:{bucket:1,path:2},postModify:p}];for(let b=0;b<M.length;b++){const j=M[b],v=j.regex.exec(e);if(v){const w=v[j.indices.bucket];let E=v[j.indices.path];E||(E=""),n=new Se(w,E),j.postModify(n);break}}if(n==null)throw Ki(e);return n}}class Qi{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xi(t,e,r){let n=1,i=null,o=null,l=!1,c=0;function d(){return c===2}let p=!1;function u(...x){p||(p=!0,e.apply(null,x))}function h(x){i=setTimeout(()=>{i=null,t(g,d())},x)}function f(){o&&clearTimeout(o)}function g(x,...y){if(p){f();return}if(x){f(),u.call(null,x,...y);return}if(d()||l){f(),u.call(null,x,...y);return}n<64&&(n*=2);let M;c===1?(c=2,M=0):M=(n+Math.random())*1e3,h(M)}let m=!1;function N(x){m||(m=!0,f(),!p&&(i!==null?(x||(c=2),clearTimeout(i),h(0)):x||(c=1)))}return h(0),o=setTimeout(()=>{l=!0,N(!0)},r),N}function ea(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ta(t){return t!==void 0}function Xs(t,e,r,n){if(n<e)throw Qs(`Invalid value for '${t}'. Expected ${e} or greater.`);if(n>r)throw Qs(`Invalid value for '${t}'. Expected ${r} or less.`)}function sa(t){const e=encodeURIComponent;let r="?";for(const n in t)if(t.hasOwnProperty(n)){const i=e(n)+"="+e(t[n]);r=r+i+"&"}return r=r.slice(0,-1),r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Jt;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Jt||(Jt={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ra(t,e){const r=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,o=e.indexOf(t)!==-1;return r||i||o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class na{constructor(e,r,n,i,o,l,c,d,p,u,h,f=!0){this.url_=e,this.method_=r,this.headers_=n,this.body_=i,this.successCodes_=o,this.additionalRetryCodes_=l,this.callback_=c,this.errorCallback_=d,this.timeout_=p,this.progressCallback_=u,this.connectionFactory_=h,this.retry=f,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((g,m)=>{this.resolve_=g,this.reject_=m,this.start_()})}start_(){const e=(n,i)=>{if(i){n(!1,new Zt(!1,null,!0));return}const o=this.connectionFactory_();this.pendingConnection_=o;const l=c=>{const d=c.loaded,p=c.lengthComputable?c.total:-1;this.progressCallback_!==null&&this.progressCallback_(d,p)};this.progressCallback_!==null&&o.addUploadProgressListener(l),o.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(l),this.pendingConnection_=null;const c=o.getErrorCode()===Jt.NO_ERROR,d=o.getStatus();if(!c||ra(d,this.additionalRetryCodes_)&&this.retry){const u=o.getErrorCode()===Jt.ABORT;n(!1,new Zt(!1,null,u));return}const p=this.successCodes_.indexOf(d)!==-1;n(!0,new Zt(p,o))})},r=(n,i)=>{const o=this.resolve_,l=this.reject_,c=i.connection;if(i.wasSuccessCode)try{const d=this.callback_(c,c.getResponse());ta(d)?o(d):o()}catch(d){l(d)}else if(c!==null){const d=Gi();d.serverResponse=c.getErrorText(),this.errorCallback_?l(this.errorCallback_(c,d)):l(d)}else if(i.canceled){const d=this.appDelete_?Yn():qi();l(d)}else{const d=Zi();l(d)}};this.canceled_?r(!1,new Zt(!1,null,!0)):this.backoffId_=Xi(e,r,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&ea(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Zt{constructor(e,r,n){this.wasSuccessCode=e,this.connection=r,this.canceled=!!n}}function ia(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function aa(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function oa(t,e){e&&(t["X-Firebase-GMPID"]=e)}function la(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function ca(t,e,r,n,i,o,l=!0){const c=sa(t.urlParams),d=t.url+c,p=Object.assign({},t.headers);return oa(p,e),ia(p,r),aa(p,o),la(p,n),new na(d,t.method,p,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,l)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function da(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function ua(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qt{constructor(e,r){this._service=e,r instanceof Se?this._location=r:this._location=Se.makeFromUrl(r,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,r){return new Qt(e,r)}get root(){const e=new Se(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return ua(this._location.path)}get storage(){return this._service}get parent(){const e=da(this._location.path);if(e===null)return null;const r=new Se(this._location.bucket,e);return new Qt(this._service,r)}_throwIfRoot(e){if(this._location.path==="")throw Ji(e)}}function er(t,e){const r=e?.[Hi];return r==null?null:Se.makeFromBucketSpec(r,t)}function ha(t,e,r,n={}){t.host=`${e}:${r}`,t._protocol="http";const{mockUserToken:i}=n;i&&(t._overrideAuthToken=typeof i=="string"?i:Oi(i,t.app.options.projectId))}class ma{constructor(e,r,n,i,o){this.app=e,this._authProvider=r,this._appCheckProvider=n,this._url=i,this._firebaseVersion=o,this._bucket=null,this._host=Kn,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=Vi,this._maxUploadRetryTime=Wi,this._requests=new Set,i!=null?this._bucket=Se.makeFromBucketSpec(i,this._host):this._bucket=er(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Se.makeFromBucketSpec(this._url,e):this._bucket=er(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Xs("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Xs("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const r=await e.getToken();if(r!==null)return r.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Qt(this,e)}_makeRequest(e,r,n,i,o=!0){if(this._deleted)return new Qi(Yn());{const l=ca(e,this._appId,n,i,r,this._firebaseVersion,o);return this._requests.add(l),l.getPromise().then(()=>this._requests.delete(l),()=>this._requests.delete(l)),l}}async makeRequestWithTokens(e,r){const[n,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,r,n,i).getPromise()}}const tr="@firebase/storage",sr="0.12.6";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jn="storage";function pa(t=Fs(),e){t=Bs(t);const n=Bn(t,Jn).getImmediate({identifier:e}),i=zn("storage");return i&&fa(n,...i),n}function fa(t,e,r,n={}){ha(t,e,r,n)}function ga(t,{instanceIdentifier:e}){const r=t.getProvider("app").getImmediate(),n=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new ma(r,n,i,e,Mi)}function xa(){_n(new Fn(Jn,ga,"PUBLIC").setMultipleInstances(!0)),Yt(tr,sr,""),Yt(tr,sr,"esm2017")}xa();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qn="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class va{constructor(e,r,n){this.auth=null,this.messaging=null,this.appCheck=null,this.auth=e.getImmediate({optional:!0}),this.messaging=r.getImmediate({optional:!0}),this.auth||e.get().then(i=>this.auth=i,()=>{}),this.messaging||r.get().then(i=>this.messaging=i,()=>{}),this.appCheck||n.get().then(i=>this.appCheck=i,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e?.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.appCheck){const r=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return r.error?null:r.token}return null}async getContext(e){const r=await this.getAuthToken(),n=await this.getMessagingToken(),i=await this.getAppCheckToken(e);return{authToken:r,messagingToken:n,appCheckToken:i}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Es="us-central1";class ba{constructor(e,r,n,i,o=Es,l){this.app=e,this.fetchImpl=l,this.emulatorOrigin=null,this.contextProvider=new va(r,n,i),this.cancelAllRequests=new Promise(c=>{this.deleteService=()=>Promise.resolve(c())});try{const c=new URL(o);this.customDomain=c.origin,this.region=Es}catch{this.customDomain=null,this.region=o}}_delete(){return this.deleteService()}_url(e){const r=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${r}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${r}.cloudfunctions.net/${e}`}}function ya(t,e,r){t.emulatorOrigin=`http://${e}:${r}`}const rr="@firebase/functions",nr="0.11.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wa="auth-internal",ja="app-check-internal",Na="messaging-internal";function La(t,e){const r=(n,{instanceIdentifier:i})=>{const o=n.getProvider("app").getImmediate(),l=n.getProvider(wa),c=n.getProvider(Na),d=n.getProvider(ja);return new ba(o,l,c,d,i,t)};_n(new Fn(Qn,r,"PUBLIC").setMultipleInstances(!0)),Yt(rr,nr,e),Yt(rr,nr,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xn(t=Fs(),e=Es){const n=Bn(Bs(t),Qn).getImmediate({identifier:e}),i=zn("functions");return i&&Ca(n,...i),n}function Ca(t,e,r){ya(Bs(t),e,r)}La(fetch.bind(self));/*! Capacitor: https://capacitorjs.com/ - MIT License */var pt;(function(t){t.Unimplemented="UNIMPLEMENTED",t.Unavailable="UNAVAILABLE"})(pt||(pt={}));class ws extends Error{constructor(e,r,n){super(e),this.message=e,this.code=r,this.data=n}}const Sa=t=>{var e,r;return t?.androidBridge?"android":!((r=(e=t?.webkit)===null||e===void 0?void 0:e.messageHandlers)===null||r===void 0)&&r.bridge?"ios":"web"},ka=t=>{const e=t.CapacitorCustomPlatform||null,r=t.Capacitor||{},n=r.Plugins=r.Plugins||{},i=()=>e!==null?e.name:Sa(t),o=()=>i()!=="web",l=h=>{const f=p.get(h);return!!(f?.platforms.has(i())||c(h))},c=h=>{var f;return(f=r.PluginHeaders)===null||f===void 0?void 0:f.find(g=>g.name===h)},d=h=>t.console.error(h),p=new Map,u=(h,f={})=>{const g=p.get(h);if(g)return console.warn(`Capacitor plugin "${h}" already registered. Cannot register plugins twice.`),g.proxy;const m=i(),N=c(h);let x;const y=async()=>(!x&&m in f?x=typeof f[m]=="function"?x=await f[m]():x=f[m]:e!==null&&!x&&"web"in f&&(x=typeof f.web=="function"?x=await f.web():x=f.web),x),L=(E,S)=>{var D,O;if(N){const A=N?.methods.find(B=>S===B.name);if(A)return A.rtype==="promise"?B=>r.nativePromise(h,S.toString(),B):(B,T)=>r.nativeCallback(h,S.toString(),B,T);if(E)return(D=E[S])===null||D===void 0?void 0:D.bind(E)}else{if(E)return(O=E[S])===null||O===void 0?void 0:O.bind(E);throw new ws(`"${h}" plugin is not implemented on ${m}`,pt.Unimplemented)}},M=E=>{let S;const D=(...O)=>{const A=y().then(B=>{const T=L(B,E);if(T){const z=T(...O);return S=z?.remove,z}else throw new ws(`"${h}.${E}()" is not implemented on ${m}`,pt.Unimplemented)});return E==="addListener"&&(A.remove=async()=>S()),A};return D.toString=()=>`${E.toString()}() { [capacitor code] }`,Object.defineProperty(D,"name",{value:E,writable:!1,configurable:!1}),D},b=M("addListener"),j=M("removeListener"),v=(E,S)=>{const D=b({eventName:E},S),O=async()=>{const B=await D;j({eventName:E,callbackId:B},S)},A=new Promise(B=>D.then(()=>B({remove:O})));return A.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await O()},A},w=new Proxy({},{get(E,S){switch(S){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return N?v:b;case"removeListener":return j;default:return M(S)}}});return n[h]=w,p.set(h,{name:h,proxy:w,platforms:new Set([...Object.keys(f),...N?[m]:[]])}),w};return r.convertFileSrc||(r.convertFileSrc=h=>h),r.getPlatform=i,r.handleError=d,r.isNativePlatform=o,r.isPluginAvailable=l,r.registerPlugin=u,r.Exception=ws,r.DEBUG=!!r.DEBUG,r.isLoggingEnabled=!!r.isLoggingEnabled,r},Ea=t=>t.Capacitor=ka(t),Xt=Ea(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),Vs=Xt.registerPlugin;class ei{constructor(){this.listeners={},this.retainedEventArguments={},this.windowListeners={}}addListener(e,r){let n=!1;this.listeners[e]||(this.listeners[e]=[],n=!0),this.listeners[e].push(r);const o=this.windowListeners[e];o&&!o.registered&&this.addWindowListener(o),n&&this.sendRetainedArgumentsForEvent(e);const l=async()=>this.removeListener(e,r);return Promise.resolve({remove:l})}async removeAllListeners(){this.listeners={};for(const e in this.windowListeners)this.removeWindowListener(this.windowListeners[e]);this.windowListeners={}}notifyListeners(e,r,n){const i=this.listeners[e];if(!i){if(n){let o=this.retainedEventArguments[e];o||(o=[]),o.push(r),this.retainedEventArguments[e]=o}return}i.forEach(o=>o(r))}hasListeners(e){var r;return!!(!((r=this.listeners[e])===null||r===void 0)&&r.length)}registerWindowListener(e,r){this.windowListeners[r]={registered:!1,windowEventName:e,pluginEventName:r,handler:n=>{this.notifyListeners(r,n)}}}unimplemented(e="not implemented"){return new Xt.Exception(e,pt.Unimplemented)}unavailable(e="not available"){return new Xt.Exception(e,pt.Unavailable)}async removeListener(e,r){const n=this.listeners[e];if(!n)return;const i=n.indexOf(r);this.listeners[e].splice(i,1),this.listeners[e].length||this.removeWindowListener(this.windowListeners[e])}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}sendRetainedArgumentsForEvent(e){const r=this.retainedEventArguments[e];r&&(delete this.retainedEventArguments[e],r.forEach(n=>{this.notifyListeners(e,n)}))}}const ir=t=>encodeURIComponent(t).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),ar=t=>t.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class Pa extends ei{async getCookies(){const e=document.cookie,r={};return e.split(";").forEach(n=>{if(n.length<=0)return;let[i,o]=n.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");i=ar(i).trim(),o=ar(o).trim(),r[i]=o}),r}async setCookie(e){try{const r=ir(e.key),n=ir(e.value),i=`; expires=${(e.expires||"").replace("expires=","")}`,o=(e.path||"/").replace("path=",""),l=e.url!=null&&e.url.length>0?`domain=${e.url}`:"";document.cookie=`${r}=${n||""}${i}; path=${o}; ${l};`}catch(r){return Promise.reject(r)}}async deleteCookie(e){try{document.cookie=`${e.key}=; Max-Age=0`}catch(r){return Promise.reject(r)}}async clearCookies(){try{const e=document.cookie.split(";")||[];for(const r of e)document.cookie=r.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(e){return Promise.reject(e)}}async clearAllCookies(){try{await this.clearCookies()}catch(e){return Promise.reject(e)}}}Vs("CapacitorCookies",{web:()=>new Pa});const Ma=async t=>new Promise((e,r)=>{const n=new FileReader;n.onload=()=>{const i=n.result;e(i.indexOf(",")>=0?i.split(",")[1]:i)},n.onerror=i=>r(i),n.readAsDataURL(t)}),Da=(t={})=>{const e=Object.keys(t);return Object.keys(t).map(i=>i.toLocaleLowerCase()).reduce((i,o,l)=>(i[o]=t[e[l]],i),{})},Oa=(t,e=!0)=>t?Object.entries(t).reduce((n,i)=>{const[o,l]=i;let c,d;return Array.isArray(l)?(d="",l.forEach(p=>{c=e?encodeURIComponent(p):p,d+=`${o}=${c}&`}),d.slice(0,-1)):(c=e?encodeURIComponent(l):l,d=`${o}=${c}`),`${n}&${d}`},"").substr(1):null,Aa=(t,e={})=>{const r=Object.assign({method:t.method||"GET",headers:t.headers},e),i=Da(t.headers)["content-type"]||"";if(typeof t.data=="string")r.body=t.data;else if(i.includes("application/x-www-form-urlencoded")){const o=new URLSearchParams;for(const[l,c]of Object.entries(t.data||{}))o.set(l,c);r.body=o.toString()}else if(i.includes("multipart/form-data")||t.data instanceof FormData){const o=new FormData;if(t.data instanceof FormData)t.data.forEach((c,d)=>{o.append(d,c)});else for(const c of Object.keys(t.data))o.append(c,t.data[c]);r.body=o;const l=new Headers(r.headers);l.delete("content-type"),r.headers=l}else(i.includes("application/json")||typeof t.data=="object")&&(r.body=JSON.stringify(t.data));return r};class Ia extends ei{async request(e){const r=Aa(e,e.webFetchExtra),n=Oa(e.params,e.shouldEncodeUrlParams),i=n?`${e.url}?${n}`:e.url,o=await fetch(i,r),l=o.headers.get("content-type")||"";let{responseType:c="text"}=o.ok?e:{};l.includes("application/json")&&(c="json");let d,p;switch(c){case"arraybuffer":case"blob":p=await o.blob(),d=await Ma(p);break;case"json":d=await o.json();break;case"document":case"text":default:d=await o.text()}const u={};return o.headers.forEach((h,f)=>{u[f]=h}),{data:d,headers:u,status:o.status,url:o.url}}async get(e){return this.request(Object.assign(Object.assign({},e),{method:"GET"}))}async post(e){return this.request(Object.assign(Object.assign({},e),{method:"POST"}))}async put(e){return this.request(Object.assign(Object.assign({},e),{method:"PUT"}))}async patch(e){return this.request(Object.assign(Object.assign({},e),{method:"PATCH"}))}async delete(e){return this.request(Object.assign(Object.assign({},e),{method:"DELETE"}))}}Vs("CapacitorHttp",{web:()=>new Ia});const or={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_FUNCTIONS_ORIGIN:"https://us-central1-stockpilotv1.cloudfunctions.net",VITE_MSG91_WIDGET_ID:"356a79684758348381353138",VITE_PARSE_URL:"https://asia-south1-stockpilotv1.cloudfunctions.net/parse",VITE_REACT_APP_OCR_FUNCTION_URL:"https://ocrfromimage-rg2uh6cnqq-el.a.run.app",VITE_SPEECH_WS_URL:"wss://flyp-voice-streamer-30934537475.asia-south1.run.app/ws"},Tt=Xt?.isNativePlatform?.()===!0,Ps={apiKey:"AIzaSyBPkkXZWll0VifG5kb0DDSsoV5UB-n5pFE",authDomain:"stockpilotv1.firebaseapp.com",databaseURL:"https://stockpilotv1-default-rtdb.firebaseio.com",projectId:"stockpilotv1",storageBucket:"stockpilotv1.firebasestorage.app",messagingSenderId:"30934537475",appId:"1:30934537475:web:84a2f76609dbb1db290536",measurementId:"G-SENFJ2HSBW"},Ra=Tt?(()=>{const{authDomain:t,...e}=Ps;return e})():Ps,_t=Un().length?Fs():$n(Ra),Qe=Hn(_t);if(Tt){try{Qe._popupRedirectResolver=null}catch{}try{Qe._errorFactory={create:()=>({message:"suppressed"})}}catch{}}(async()=>{try{if(Tt)await Et(Qe,Vn),console.info("[Firebase] Using in-memory persistence on native WebView");else try{await Et(Qe,Ai),console.info("[Firebase] Using IndexedDB persistence (web)")}catch{try{await Et(Qe,Ii),console.info("[Firebase] Using localStorage persistence (web)")}catch{await Et(Qe,Ri),console.info("[Firebase] Using sessionStorage persistence (web)")}}}catch(t){console.warn("[Firebase] Failed to set persistence:",t?.message||t)}})();console.info("[Firebase] Production environment detected"),window.addEventListener("unhandledrejection",t=>{console.error("[Firebase] Unhandled promise rejection:",t.reason)}),Qe.onAuthStateChanged(t=>{console.log(t?"[Firebase] Production auth state: User signed in":"[Firebase] Production auth state: User signed out")},t=>{console.error("[Firebase] Production auth state error:",t)});const he=Wn(_t,{experimentalForceLongPolling:!0});pa(_t);Xn(_t,"us-central1");let Dt;const lr=Un().find(t=>t.name==="employeeApp");lr?Dt=lr:Dt=$n(Ps,"employeeApp");Wn(Dt,{experimentalForceLongPolling:!0});const ti=Hn(Dt);Xn(Dt,"us-central1");if(Tt)try{ti._popupRedirectResolver=null}catch{}Et(ti,Vn).then(()=>console.info("[Employee Firebase] In-memory auth persistence enabled")).catch(t=>console.warn("[Employee Firebase] Persistence setup failed:",t));!Tt&&typeof window<"u"&&or?.VITE_ENABLE_APPCHECK==="true"&&(async()=>{try{const{initializeAppCheck:t,ReCaptchaV3Provider:e}=await Hs(async()=>{const{initializeAppCheck:n,ReCaptchaV3Provider:i}=await import("./index.esm-nzFwyGKL.js");return{initializeAppCheck:n,ReCaptchaV3Provider:i}},__vite__mapDeps([0,1])),r=or?.VITE_RECAPTCHA_V3_SITE_KEY;if(!r){console.warn("[AppCheck] VITE_RECAPTCHA_V3_SITE_KEY missing; skipping App Check init.");return}t(_t,{provider:new e(r),isTokenAutoRefreshEnabled:!0}),console.info("[AppCheck] Initialized with reCAPTCHA v3 (web only)")}catch(t){console.warn("[AppCheck] init skipped:",t?.message||t)}})();const si=a.createContext(),xt=()=>{const t=a.useContext(si);if(!t)throw new Error("useCustomerAuth must be used within CustomerAuthProvider");return t},Ta=({children:t})=>{const[e,r]=a.useState(null),[n,i]=a.useState(null),[o,l]=a.useState(!0);a.useEffect(()=>{(async()=>{try{const g=localStorage.getItem("flyp_customer_id");if(g){const m=await mt(Ee(he,"customers",g));if(m.exists()){const N=m.data();r({uid:g,phoneNumber:N.phone||""}),i(N)}else localStorage.removeItem("flyp_customer_id")}}catch(g){console.error("Error checking session:",g),localStorage.removeItem("flyp_customer_id")}finally{l(!1)}})()},[]);const c=async(f,g)=>{try{const m=f.replace(/\D/g,""),N=`customer_${m}`,x=Ee(he,"customers",N),y=await mt(x);let L;return y.exists()?(L=y.data(),g&&g!==L.name&&(await Mt(x,{name:g,updatedAt:Pe()}),L.name=g)):(L={name:g||"Customer",phone:`+91${m}`,email:"",addresses:[],createdAt:Pe(),totalOrders:0,isActive:!0},await Gn(x,L)),localStorage.setItem("flyp_customer_id",N),r({uid:N,phoneNumber:`+91${m}`}),i(L),{success:!0,isNewUser:!y.exists()}}catch(m){return console.error("Error logging in:",m),{success:!1,error:m.message}}},d=async f=>{try{if(!e)throw new Error("Not logged in");const g=Ee(he,"customers",e.uid);return await Mt(g,{...f,updatedAt:Pe()}),i(m=>({...m,...f})),{success:!0}}catch(g){return console.error("Error updating profile:",g),{success:!1,error:g.message}}},p=async f=>{try{if(!e)throw new Error("Not logged in");const g={id:Date.now().toString(),...f,createdAt:new Date().toISOString()},m=[...n?.addresses||[]];return(m.length===0||f.isDefault)&&(m.forEach(N=>N.isDefault=!1),g.isDefault=!0),m.push(g),await d({addresses:m}),{success:!0,address:g}}catch(g){return console.error("Error adding address:",g),{success:!1,error:g.message}}},u=async f=>{try{const g=(n?.addresses||[]).map(m=>({...m,isDefault:m.id===f}));return await d({addresses:g}),{success:!0}}catch(g){return{success:!1,error:g.message}}},h=async()=>{try{return localStorage.removeItem("flyp_customer_id"),r(null),i(null),{success:!0}}catch(f){return{success:!1,error:f.message}}};return s.jsx(si.Provider,{value:{customer:e,customerData:n,loading:o,simpleLogin:c,updateProfile:d,addAddress:p,setDefaultAddress:u,logout:h,isLoggedIn:!!e},children:t})};var ri={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},cr=$e.createContext&&$e.createContext(ri),_a=["attr","size","title"];function Fa(t,e){if(t==null)return{};var r=Ba(t,e),n,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)n=o[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Ba(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function es(){return es=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},es.apply(this,arguments)}function dr(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function ts(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?dr(Object(r),!0).forEach(function(n){za(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):dr(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function za(t,e,r){return e=Ua(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Ua(t){var e=$a(t,"string");return typeof e=="symbol"?e:e+""}function $a(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ni(t){return t&&t.map((e,r)=>$e.createElement(e.tag,ts({key:r},e.attr),ni(e.child)))}function F(t){return e=>$e.createElement(Ha,es({attr:ts({},t.attr)},e),ni(t.child))}function Ha(t){var e=r=>{var{attr:n,size:i,title:o}=t,l=Fa(t,_a),c=i||r.size||"1em",d;return r.className&&(d=r.className),t.className&&(d=(d?d+" ":"")+t.className),$e.createElement("svg",es({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},r.attr,n,l,{className:d,style:ts(ts({color:t.color||r.color},r.style),t.style),height:c,width:c,xmlns:"http://www.w3.org/2000/svg"}),o&&$e.createElement("title",null,o),t.children)};return cr!==void 0?$e.createElement(cr.Consumer,null,r=>e(r)):e(ri)}function ii(t){return F({attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M6.267 3.455a3.066 3.066 0 001.745-.723 3.066 3.066 0 013.976 0 3.066 3.066 0 001.745.723 3.066 3.066 0 012.812 2.812c.051.643.304 1.254.723 1.745a3.066 3.066 0 010 3.976 3.066 3.066 0 00-.723 1.745 3.066 3.066 0 01-2.812 2.812 3.066 3.066 0 00-1.745.723 3.066 3.066 0 01-3.976 0 3.066 3.066 0 00-1.745-.723 3.066 3.066 0 01-2.812-2.812 3.066 3.066 0 00-.723-1.745 3.066 3.066 0 010-3.976 3.066 3.066 0 00.723-1.745 3.066 3.066 0 012.812-2.812zm7.44 5.252a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"},child:[]}]})(t)}function Va(t){return F({attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{d:"M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"},child:[]},{tag:"path",attr:{fillRule:"evenodd",d:"M4 5a2 2 0 012-2 3 3 0 003 3h2a3 3 0 003-3 2 2 0 012 2v11a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3zm-3 4a1 1 0 100 2h.01a1 1 0 100-2H7zm3 0a1 1 0 100 2h3a1 1 0 100-2h-3z",clipRule:"evenodd"},child:[]}]})(t)}function Wa(t){return F({attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{d:"M10.707 2.293a1 1 0 00-1.414 0l-7 7a1 1 0 001.414 1.414L4 10.414V17a1 1 0 001 1h2a1 1 0 001-1v-2a1 1 0 011-1h2a1 1 0 011 1v2a1 1 0 001 1h2a1 1 0 001-1v-6.586l.293.293a1 1 0 001.414-1.414l-7-7z"},child:[]}]})(t)}function Ga(t){return F({attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z",clipRule:"evenodd"},child:[]}]})(t)}function Za(t){return F({attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z",clipRule:"evenodd"},child:[]}]})(t)}function qa(t){return F({attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{d:"M3 1a1 1 0 000 2h1.22l.305 1.222a.997.997 0 00.01.042l1.358 5.43-.893.892C3.74 11.846 4.632 14 6.414 14H15a1 1 0 000-2H6.414l1-1H14a1 1 0 00.894-.553l3-6A1 1 0 0017 3H6.28l-.31-1.243A1 1 0 005 1H3zM16 16.5a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0zM6.5 18a1.5 1.5 0 100-3 1.5 1.5 0 000 3z"},child:[]}]})(t)}function Ms(t){return F({attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M5 2a1 1 0 011 1v1h1a1 1 0 010 2H6v1a1 1 0 01-2 0V6H3a1 1 0 010-2h1V3a1 1 0 011-1zm0 10a1 1 0 011 1v1h1a1 1 0 110 2H6v1a1 1 0 11-2 0v-1H3a1 1 0 110-2h1v-1a1 1 0 011-1zM12 2a1 1 0 01.967.744L14.146 7.2 17.5 9.134a1 1 0 010 1.732l-3.354 1.935-1.18 4.455a1 1 0 01-1.933 0L9.854 12.8 6.5 10.866a1 1 0 010-1.732l3.354-1.935 1.18-4.455A1 1 0 0112 2z",clipRule:"evenodd"},child:[]}]})(t)}function Ka(t){return F({attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z",clipRule:"evenodd"},child:[]}]})(t)}const Ya=({activeTab:t,onTabChange:e})=>{const{cartItems:r}=Rt(),n=r?.reduce((o,l)=>o+l.quantity,0)||0,i=[{id:"home",icon:Wa,label:"Home"},{id:"search",icon:Za,label:"Search"},{id:"cart",icon:qa,label:"Cart",badge:n},{id:"orders",icon:Va,label:"Orders"},{id:"profile",icon:Ka,label:"Profile"}];return s.jsxs("div",{className:"fixed bottom-0 left-0 right-0 z-50",style:{paddingBottom:"env(safe-area-inset-bottom, 0px)"},children:[s.jsx("div",{className:"absolute inset-x-0 bottom-0 h-28 bg-gradient-to-t from-[#0a0f1c] via-[#0a0f1c]/90 to-transparent pointer-events-none"}),s.jsx("div",{className:"relative px-4 pb-3",children:s.jsx("div",{className:"bg-[#111827]/95 backdrop-blur-2xl rounded-2xl border border-emerald-500/10 px-2 py-2 shadow-xl shadow-black/20",children:s.jsx("div",{className:"flex items-center justify-around",children:i.map(o=>{const l=o.icon,c=t===o.id,d=o.id==="cart";return s.jsxs(_.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>e(o.id),className:"relative flex flex-col items-center justify-center py-2.5 px-4 rounded-xl transition-all duration-200",children:[c&&s.jsx(_.div,{layoutId:"activeTab",className:"absolute inset-0 bg-gradient-to-br from-emerald-500/20 to-emerald-600/10 rounded-xl border border-emerald-500/30",transition:{type:"spring",stiffness:300,damping:30}}),s.jsxs("div",{className:"relative z-10",children:[s.jsx(l,{className:`text-xl transition-colors duration-200 ${c?"text-emerald-400":"text-white/40"}`}),d&&n>0&&s.jsx(_.span,{initial:{scale:0},animate:{scale:1},className:"absolute -top-1.5 -right-2.5 min-w-[20px] h-[20px] px-1 bg-gradient-to-r from-emerald-400 to-emerald-600 rounded-full flex items-center justify-center border-2 border-[#111827] shadow-lg shadow-emerald-500/30",children:s.jsx("span",{className:"text-white text-[10px] font-bold",children:n>99?"99+":n})})]}),s.jsx("span",{className:`relative z-10 text-[10px] font-semibold mt-1.5 transition-colors duration-200 ${c?"text-emerald-400":"text-white/40"}`,children:o.label})]},o.id)})})})})]})};function Oe(t){return F({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M257.5 445.1l-22.2 22.2c-9.4 9.4-24.6 9.4-33.9 0L7 273c-9.4-9.4-9.4-24.6 0-33.9L201.4 44.7c9.4-9.4 24.6-9.4 33.9 0l22.2 22.2c9.5 9.5 9.3 25-.4 34.3L136.6 216H424c13.3 0 24 10.7 24 24v32c0 13.3-10.7 24-24 24H136.6l120.5 114.8c9.8 9.3 10 24.8.4 34.3z"},child:[]}]})(t)}function Ja(t){return F({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M190.5 66.9l22.2-22.2c9.4-9.4 24.6-9.4 33.9 0L441 239c9.4 9.4 9.4 24.6 0 33.9L246.6 467.3c-9.4 9.4-24.6 9.4-33.9 0l-22.2-22.2c-9.5-9.5-9.3-25 .4-34.3L311.4 296H24c-13.3 0-24-10.7-24-24v-32c0-13.3 10.7-24 24-24h287.4L190.9 101.2c-9.8-9.3-10-24.8-.4-34.3z"},child:[]}]})(t)}function Qa(t){return F({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224 512c35.32 0 63.97-28.65 63.97-64H160.03c0 35.35 28.65 64 63.97 64zm215.39-149.71c-19.32-20.76-55.47-51.99-55.47-154.29 0-77.7-54.48-139.9-127.94-155.16V32c0-17.67-14.32-32-31.98-32s-31.98 14.33-31.98 32v20.84C118.56 68.1 64.08 130.3 64.08 208c0 102.3-36.15 133.53-55.47 154.29-6 6.45-8.66 14.16-8.61 21.71.11 16.4 12.98 32 32.1 32h383.8c19.12 0 32-15.6 32.1-32 .05-7.55-2.61-15.27-8.61-21.71z"},child:[]}]})(t)}function Ds(t){return F({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M509.5 184.6L458.9 32.8C452.4 13.2 434.1 0 413.4 0H272v192h238.7c-.4-2.5-.4-5-1.2-7.4zM240 0H98.6c-20.7 0-39 13.2-45.5 32.8L2.5 184.6c-.8 2.4-.8 4.9-1.2 7.4H240V0zM0 224v240c0 26.5 21.5 48 48 48h416c26.5 0 48-21.5 48-48V224H0z"},child:[]}]})(t)}function Ot(t){return F({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M0 464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V192H0v272zm320-196c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zm0 128c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zM192 268c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zm0 128c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zM64 268c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H76c-6.6 0-12-5.4-12-12v-40zm0 128c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H76c-6.6 0-12-5.4-12-12v-40zM400 64h-48V16c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v48H160V16c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v48H48C21.5 64 0 85.5 0 112v48h448v-48c0-26.5-21.5-48-48-48z"},child:[]}]})(t)}function ct(t){return F({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M504 256c0 136.967-111.033 248-248 248S8 392.967 8 256 119.033 8 256 8s248 111.033 248 248zM227.314 387.314l184-184c6.248-6.248 6.248-16.379 0-22.627l-22.627-22.627c-6.248-6.249-16.379-6.249-22.628 0L216 308.118l-70.059-70.059c-6.248-6.248-16.379-6.248-22.628 0l-22.627 22.627c-6.248 6.248-6.248 16.379 0 22.627l104 104c6.249 6.249 16.379 6.249 22.628.001z"},child:[]}]})(t)}function Xa(t){return F({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M505 174.8l-39.6-39.6c-9.4-9.4-24.6-9.4-33.9 0L192 374.7 80.6 263.2c-9.4-9.4-24.6-9.4-33.9 0L7 302.9c-9.4 9.4-9.4 24.6 0 34L175 505c9.4 9.4 24.6 9.4 33.9 0l296-296.2c9.4-9.5 9.4-24.7.1-34zm-324.3 106c6.2 6.3 16.4 6.3 22.6 0l208-208.2c6.2-6.3 6.2-16.4 0-22.6L366.1 4.7c-6.2-6.3-16.4-6.3-22.6 0L192 156.2l-55.4-55.5c-6.2-6.3-16.4-6.3-22.6 0L68.7 146c-6.2 6.3-6.2 16.4 0 22.6l112 112.2z"},child:[]}]})(t)}function We(t){return F({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z"},child:[]}]})(t)}function Os(t){return F({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M207.029 381.476L12.686 187.132c-9.373-9.373-9.373-24.569 0-33.941l22.667-22.667c9.357-9.357 24.522-9.375 33.901-.04L224 284.505l154.745-154.021c9.379-9.335 24.544-9.317 33.901.04l22.667 22.667c9.373 9.373 9.373 24.569 0 33.941L240.971 381.476c-9.373 9.372-24.569 9.372-33.942 0z"},child:[]}]})(t)}function Ge(t){return F({attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M285.476 272.971L91.132 467.314c-9.373 9.373-24.569 9.373-33.941 0l-22.667-22.667c-9.357-9.357-9.375-24.522-.04-33.901L188.505 256 34.484 101.255c-9.335-9.379-9.317-24.544.04-33.901l22.667-22.667c9.373-9.373 24.569-9.373 33.941 0L285.475 239.03c9.373 9.372 9.373 24.568.001 33.941z"},child:[]}]})(t)}function ur(t){return F({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M240.971 130.524l194.343 194.343c9.373 9.373 9.373 24.569 0 33.941l-22.667 22.667c-9.357 9.357-24.522 9.375-33.901.04L224 227.495 69.255 381.516c-9.379 9.335-24.544 9.317-33.901-.04l-22.667-22.667c-9.373-9.373-9.373-24.569 0-33.941L207.03 130.525c9.372-9.373 24.568-9.373 33.941-.001z"},child:[]}]})(t)}function we(t){return F({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256,8C119,8,8,119,8,256S119,504,256,504,504,393,504,256,393,8,256,8Zm92.49,313h0l-20,25a16,16,0,0,1-22.49,2.5h0l-67-49.72a40,40,0,0,1-15-31.23V112a16,16,0,0,1,16-16h32a16,16,0,0,1,16,16V256l58,42.5A16,16,0,0,1,348.49,321Z"},child:[]}]})(t)}function eo(t){return F({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M416 192c0-88.4-93.1-160-208-160S0 103.6 0 192c0 34.3 14.1 65.9 38 92-13.4 30.2-35.5 54.2-35.8 54.5-2.2 2.3-2.8 5.7-1.5 8.7S4.8 352 8 352c36.6 0 66.9-12.3 88.7-25 32.2 15.7 70.3 25 111.3 25 114.9 0 208-71.6 208-160zm122 220c23.9-26 38-57.7 38-92 0-66.9-53.5-124.2-129.3-148.1.9 6.6 1.3 13.3 1.3 20.1 0 105.9-107.7 192-240 192-10.8 0-21.3-.8-31.7-1.9C207.8 439.6 281.8 480 368 480c41 0 79.1-9.2 111.3-25 21.8 12.7 52.1 25 88.7 25 3.2 0 6.1-1.9 7.3-4.8 1.3-2.9.7-6.3-1.5-8.7-.3-.3-22.4-24.2-35.8-54.5z"},child:[]}]})(t)}function dt(t){return F({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M0 432c0 26.5 21.5 48 48 48h480c26.5 0 48-21.5 48-48V256H0v176zm192-68c0-6.6 5.4-12 12-12h136c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H204c-6.6 0-12-5.4-12-12v-40zm-128 0c0-6.6 5.4-12 12-12h72c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H76c-6.6 0-12-5.4-12-12v-40zM576 80v48H0V80c0-26.5 21.5-48 48-48h480c26.5 0 48 21.5 48 48z"},child:[]}]})(t)}function to(t){return F({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M500 224h-30.364C455.724 130.325 381.675 56.276 288 42.364V12c0-6.627-5.373-12-12-12h-40c-6.627 0-12 5.373-12 12v30.364C130.325 56.276 56.276 130.325 42.364 224H12c-6.627 0-12 5.373-12 12v40c0 6.627 5.373 12 12 12h30.364C56.276 381.675 130.325 455.724 224 469.636V500c0 6.627 5.373 12 12 12h40c6.627 0 12-5.373 12-12v-30.364C381.675 455.724 455.724 381.675 469.636 288H500c6.627 0 12-5.373 12-12v-40c0-6.627-5.373-12-12-12zM288 404.634V364c0-6.627-5.373-12-12-12h-40c-6.627 0-12 5.373-12 12v40.634C165.826 392.232 119.783 346.243 107.366 288H148c6.627 0 12-5.373 12-12v-40c0-6.627-5.373-12-12-12h-40.634C119.768 165.826 165.757 119.783 224 107.366V148c0 6.627 5.373 12 12 12h40c6.627 0 12-5.373 12-12v-40.634C346.174 119.768 392.217 165.757 404.634 224H364c-6.627 0-12 5.373-12 12v40c0 6.627 5.373 12 12 12h40.634C392.232 346.174 346.243 392.217 288 404.634zM288 256c0 17.673-14.327 32-32 32s-32-14.327-32-32c0-17.673 14.327-32 32-32s32 14.327 32 32z"},child:[]}]})(t)}function ai(t){return F({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M402.6 83.2l90.2 90.2c3.8 3.8 3.8 10 0 13.8L274.4 405.6l-92.8 10.3c-12.4 1.4-22.9-9.1-21.5-21.5l10.3-92.8L388.8 83.2c3.8-3.8 10-3.8 13.8 0zm162-22.9l-48.8-48.8c-15.2-15.2-39.9-15.2-55.2 0l-35.4 35.4c-3.8 3.8-3.8 10 0 13.8l90.2 90.2c3.8 3.8 10 3.8 13.8 0l35.4-35.4c15.2-15.3 15.2-40 0-55.2zM384 346.2V448H64V128h229.8c3.2 0 6.2-1.3 8.5-3.5l40-40c7.6-7.6 2.2-20.5-8.5-20.5H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V306.2c0-10.7-12.9-16-20.5-8.5l-40 40c-2.2 2.3-3.5 5.3-3.5 8.5z"},child:[]}]})(t)}function so(t){return F({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M502.3 190.8c3.9-3.1 9.7-.2 9.7 4.7V400c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V195.6c0-5 5.7-7.8 9.7-4.7 22.4 17.4 52.1 39.5 154.1 113.6 21.1 15.4 56.7 47.8 92.2 47.6 35.7.3 72-32.8 92.3-47.6 102-74.1 131.6-96.3 154-113.7zM256 320c23.2.4 56.6-29.2 73.4-41.4 132.7-96.3 142.8-104.7 173.4-128.7 5.8-4.5 9.2-11.5 9.2-18.9v-19c0-26.5-21.5-48-48-48H48C21.5 64 0 85.5 0 112v19c0 7.4 3.4 14.3 9.2 18.9 30.6 23.9 40.7 32.4 173.4 128.7 16.8 12.2 50.2 41.8 73.4 41.4z"},child:[]}]})(t)}function ss(t){return F({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M569.517 440.013C587.975 472.007 564.806 512 527.94 512H48.054c-36.937 0-59.999-40.055-41.577-71.987L246.423 23.985c18.467-32.009 64.72-31.951 83.154 0l239.94 416.028zM288 354c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"},child:[]}]})(t)}function rs(t){return F({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M32 448c0 17.7 14.3 32 32 32h160V320H32v128zm256 32h160c17.7 0 32-14.3 32-32V320H288v160zm192-320h-42.1c6.2-12.1 10.1-25.5 10.1-40 0-48.5-39.5-88-88-88-41.6 0-68.5 21.3-103 68.3-34.5-47-61.4-68.3-103-68.3-48.5 0-88 39.5-88 88 0 14.5 3.8 27.9 10.1 40H32c-17.7 0-32 14.3-32 32v80c0 8.8 7.2 16 16 16h480c8.8 0 16-7.2 16-16v-80c0-17.7-14.3-32-32-32zm-326.1 0c-22.1 0-40-17.9-40-40s17.9-40 40-40c19.9 0 34.6 3.3 86.1 80h-86.1zm206.1 0h-86.1c51.4-76.5 65.7-80 86.1-80 22.1 0 40 17.9 40 40s-17.9 40-40 40z"},child:[]}]})(t)}function oi(t){return F({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M462.3 62.6C407.5 15.9 326 24.3 275.7 76.2L256 96.5l-19.7-20.3C186.1 24.3 104.5 15.9 49.7 62.6c-62.8 53.6-66.1 149.8-9.9 207.9l193.5 199.8c12.5 12.9 32.8 12.9 45.3 0l193.5-199.8c56.3-58.1 53-154.3-9.8-207.9z"},child:[]}]})(t)}function ro(t){return F({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M504 255.531c.253 136.64-111.18 248.372-247.82 248.468-59.015.042-113.223-20.53-155.822-54.911-11.077-8.94-11.905-25.541-1.839-35.607l11.267-11.267c8.609-8.609 22.353-9.551 31.891-1.984C173.062 425.135 212.781 440 256 440c101.705 0 184-82.311 184-184 0-101.705-82.311-184-184-184-48.814 0-93.149 18.969-126.068 49.932l50.754 50.754c10.08 10.08 2.941 27.314-11.313 27.314H24c-8.837 0-16-7.163-16-16V38.627c0-14.254 17.234-21.393 27.314-11.314l49.372 49.372C129.209 34.136 189.552 8 256 8c136.81 0 247.747 110.78 248 247.531zm-180.912 78.784l9.823-12.63c8.138-10.463 6.253-25.542-4.21-33.679L288 256.349V152c0-13.255-10.745-24-24-24h-16c-13.255 0-24 10.745-24 24v135.651l65.409 50.874c10.463 8.137 25.541 6.253 33.679-4.21z"},child:[]}]})(t)}function Xe(t){return F({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 110c23.196 0 42 18.804 42 42s-18.804 42-42 42-42-18.804-42-42 18.804-42 42-42zm56 254c0 6.627-5.373 12-12 12h-88c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h12v-64h-12c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h64c6.627 0 12 5.373 12 12v100h12c6.627 0 12 5.373 12 12v24z"},child:[]}]})(t)}function me(t){return F({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M172.268 501.67C26.97 291.031 0 269.413 0 192 0 85.961 85.961 0 192 0s192 85.961 192 192c0 77.413-26.97 99.031-172.268 309.67-9.535 13.774-29.93 13.773-39.464 0zM192 272c44.183 0 80-35.817 80-80s-35.817-80-80-80-80 35.817-80 80 35.817 80 80 80z"},child:[]}]})(t)}function gs(t){return F({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M416 208H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h384c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"},child:[]}]})(t)}function hr(t){return F({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M621.16 54.46C582.37 38.19 543.55 32 504.75 32c-123.17-.01-246.33 62.34-369.5 62.34-30.89 0-61.76-3.92-92.65-13.72-3.47-1.1-6.95-1.62-10.35-1.62C15.04 79 0 92.32 0 110.81v317.26c0 12.63 7.23 24.6 18.84 29.46C57.63 473.81 96.45 480 135.25 480c123.17 0 246.34-62.35 369.51-62.35 30.89 0 61.76 3.92 92.65 13.72 3.47 1.1 6.95 1.62 10.35 1.62 17.21 0 32.25-13.32 32.25-31.81V83.93c-.01-12.64-7.24-24.6-18.85-29.47zM48 132.22c20.12 5.04 41.12 7.57 62.72 8.93C104.84 170.54 79 192.69 48 192.69v-60.47zm0 285v-47.78c34.37 0 62.18 27.27 63.71 61.4-22.53-1.81-43.59-6.31-63.71-13.62zM320 352c-44.19 0-80-42.99-80-96 0-53.02 35.82-96 80-96s80 42.98 80 96c0 53.03-35.83 96-80 96zm272 27.78c-17.52-4.39-35.71-6.85-54.32-8.44 5.87-26.08 27.5-45.88 54.32-49.28v57.72zm0-236.11c-30.89-3.91-54.86-29.7-55.81-61.55 19.54 2.17 38.09 6.23 55.81 12.66v48.89z"},child:[]}]})(t)}function He(t){return F({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M512.9 192c-14.9-.1-29.1 2.3-42.4 6.9L437.6 144H520c13.3 0 24-10.7 24-24V88c0-13.3-10.7-24-24-24h-45.3c-6.8 0-13.3 2.9-17.8 7.9l-37.5 41.7-22.8-38C392.2 68.4 384.4 64 376 64h-80c-8.8 0-16 7.2-16 16v16c0 8.8 7.2 16 16 16h66.4l19.2 32H227.9c-17.7-23.1-44.9-40-99.9-40H72.5C59 104 47.7 115 48 128.5c.2 13 10.9 23.5 24 23.5h56c24.5 0 38.7 10.9 47.8 24.8l-11.3 20.5c-13-3.9-26.9-5.7-41.3-5.2C55.9 194.5 1.6 249.6 0 317c-1.6 72.1 56.3 131 128 131 59.6 0 109.7-40.8 124-96h84.2c13.7 0 24.6-11.4 24-25.1-2.1-47.1 17.5-93.7 56.2-125l12.5 20.8c-27.6 23.7-45.1 58.9-44.8 98.2.5 69.6 57.2 126.5 126.8 127.1 71.6.7 129.8-57.5 129.2-129.1-.7-69.6-57.6-126.4-127.2-126.9zM128 400c-44.1 0-80-35.9-80-80s35.9-80 80-80c4.2 0 8.4.3 12.5 1L99 316.4c-8.8 16 2.8 35.6 21 35.6h81.3c-12.4 28.2-40.6 48-73.3 48zm463.9-75.6c-2.2 40.6-35 73.4-75.5 75.5-46.1 2.5-84.4-34.3-84.4-79.9 0-21.4 8.4-40.8 22.1-55.1l49.4 82.4c4.5 7.6 14.4 10 22 5.5l13.7-8.2c7.6-4.5 10-14.4 5.5-22l-48.6-80.9c5.2-1.1 10.5-1.6 15.9-1.6 45.6-.1 82.3 38.2 79.9 84.3z"},child:[]}]})(t)}function no(t){return F({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M476 3.2L12.5 270.6c-18.1 10.4-15.8 35.6 2.2 43.2L121 358.4l287.3-253.2c5.5-4.9 13.3 2.6 8.6 8.3L176 407v80.5c0 23.6 28.5 32.9 42.5 15.8L282 426l124.6 52.2c14.2 6 30.4-2.9 33-18.2l72-432C515 7.8 493.3-6.8 476 3.2z"},child:[]}]})(t)}function ft(t){return F({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M493.4 24.6l-104-24c-11.3-2.6-22.9 3.3-27.5 13.9l-48 112c-4.2 9.8-1.4 21.3 6.9 28l60.6 49.6c-36 76.7-98.9 140.5-177.2 177.2l-49.6-60.6c-6.8-8.3-18.2-11.1-28-6.9l-112 48C3.9 366.5-2 378.1.6 389.4l24 104C27.1 504.2 36.7 512 48 512c256.1 0 464-207.5 464-464 0-11.2-7.7-20.9-18.6-23.4z"},child:[]}]})(t)}function vt(t){return F({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"},child:[]}]})(t)}function io(t){return F({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M504 256c0 136.997-111.043 248-248 248S8 392.997 8 256C8 119.083 119.043 8 256 8s248 111.083 248 248zM262.655 90c-54.497 0-89.255 22.957-116.549 63.758-3.536 5.286-2.353 12.415 2.715 16.258l34.699 26.31c5.205 3.947 12.621 3.008 16.665-2.122 17.864-22.658 30.113-35.797 57.303-35.797 20.429 0 45.698 13.148 45.698 32.958 0 14.976-12.363 22.667-32.534 33.976C247.128 238.528 216 254.941 216 296v4c0 6.627 5.373 12 12 12h56c6.627 0 12-5.373 12-12v-1.333c0-28.462 83.186-29.647 83.186-106.667 0-58.002-60.165-102-116.531-102zM256 338c-25.365 0-46 20.635-46 46 0 25.364 20.635 46 46 46s46-20.636 46-46c0-25.365-20.635-46-46-46z"},child:[]}]})(t)}function ao(t){return F({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M500.33 0h-47.41a12 12 0 0 0-12 12.57l4 82.76A247.42 247.42 0 0 0 256 8C119.34 8 7.9 119.53 8 256.19 8.1 393.07 119.1 504 256 504a247.1 247.1 0 0 0 166.18-63.91 12 12 0 0 0 .48-17.43l-34-34a12 12 0 0 0-16.38-.55A176 176 0 1 1 402.1 157.8l-101.53-4.87a12 12 0 0 0-12.57 12v47.41a12 12 0 0 0 12 12h200.33a12 12 0 0 0 12-12V12a12 12 0 0 0-12-12z"},child:[]}]})(t)}function oo(t){return F({attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M308 96c6.627 0 12-5.373 12-12V44c0-6.627-5.373-12-12-12H12C5.373 32 0 37.373 0 44v44.748c0 6.627 5.373 12 12 12h85.28c27.308 0 48.261 9.958 60.97 27.252H12c-6.627 0-12 5.373-12 12v40c0 6.627 5.373 12 12 12h158.757c-6.217 36.086-32.961 58.632-74.757 58.632H12c-6.627 0-12 5.373-12 12v53.012c0 3.349 1.4 6.546 3.861 8.818l165.052 152.356a12.001 12.001 0 0 0 8.139 3.182h82.562c10.924 0 16.166-13.408 8.139-20.818L116.871 319.906c76.499-2.34 131.144-53.395 138.318-127.906H308c6.627 0 12-5.373 12-12v-40c0-6.627-5.373-12-12-12h-58.69c-3.486-11.541-8.28-22.246-14.252-32H308z"},child:[]}]})(t)}function lo(t){return F({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M505.04 442.66l-99.71-99.69c-4.5-4.5-10.6-7-17-7h-16.3c27.6-35.3 44-79.69 44-127.99C416.03 93.09 322.92 0 208.02 0S0 93.09 0 207.98s93.11 207.98 208.02 207.98c48.3 0 92.71-16.4 128.01-44v16.3c0 6.4 2.5 12.5 7 17l99.71 99.69c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.59.1-33.99zm-297.02-90.7c-79.54 0-144-64.34-144-143.98 0-79.53 64.35-143.98 144-143.98 79.54 0 144 64.34 144 143.98 0 79.53-64.35 143.98-144 143.98zm.02-239.96c-40.78 0-73.84 33.05-73.84 73.83 0 32.96 48.26 93.05 66.75 114.86a9.24 9.24 0 0 0 14.18 0c18.49-21.81 66.75-81.89 66.75-114.86 0-40.78-33.06-73.83-73.84-73.83zm0 96c-13.26 0-24-10.75-24-24 0-13.26 10.75-24 24-24s24 10.74 24 24c0 13.25-10.75 24-24 24z"},child:[]}]})(t)}function Ve(t){return F({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"},child:[]}]})(t)}function co(t){return F({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M503.691 189.836L327.687 37.851C312.281 24.546 288 35.347 288 56.015v80.053C127.371 137.907 0 170.1 0 322.326c0 61.441 39.581 122.309 83.333 154.132 13.653 9.931 33.111-2.533 28.077-18.631C66.066 312.814 132.917 274.316 288 272.085V360c0 20.7 24.3 31.453 39.687 18.164l176.004-152c11.071-9.562 11.086-26.753 0-36.328z"},child:[]}]})(t)}function uo(t){return F({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M466.5 83.7l-192-80a48.15 48.15 0 0 0-36.9 0l-192 80C27.7 91.1 16 108.6 16 128c0 198.5 114.5 335.7 221.5 380.3 11.8 4.9 25.1 4.9 36.9 0C360.1 472.6 496 349.3 496 128c0-19.4-11.7-36.9-29.5-44.3zM256.1 446.3l-.1-381 175.9 73.3c-3.3 151.4-82.1 261.1-175.8 307.7z"},child:[]}]})(t)}function ns(t){return F({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M352 160v-32C352 57.42 294.579 0 224 0 153.42 0 96 57.42 96 128v32H0v272c0 44.183 35.817 80 80 80h288c44.183 0 80-35.817 80-80V160h-96zm-192-32c0-35.29 28.71-64 64-64s64 28.71 64 64v32H160v-32zm160 120c-13.255 0-24-10.745-24-24s10.745-24 24-24 24 10.745 24 24-10.745 24-24 24zm-192 0c-13.255 0-24-10.745-24-24s10.745-24 24-24 24 10.745 24 24-10.745 24-24 24z"},child:[]}]})(t)}function As(t){return F({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M528.12 301.319l47.273-208C578.806 78.301 567.391 64 551.99 64H159.208l-9.166-44.81C147.758 8.021 137.93 0 126.529 0H24C10.745 0 0 10.745 0 24v16c0 13.255 10.745 24 24 24h69.883l70.248 343.435C147.325 417.1 136 435.222 136 456c0 30.928 25.072 56 56 56s56-25.072 56-56c0-15.674-6.447-29.835-16.824-40h209.647C430.447 426.165 424 440.326 424 456c0 30.928 25.072 56 56 56s56-25.072 56-56c0-22.172-12.888-41.332-31.579-50.405l5.517-24.276c3.413-15.018-8.002-29.319-23.403-29.319H218.117l-6.545-32h293.145c11.206 0 20.92-7.754 23.403-18.681z"},child:[]}]})(t)}function ho(t){return F({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M497 273L329 441c-15 15-41 4.5-41-17v-96H152c-13.3 0-24-10.7-24-24v-96c0-13.3 10.7-24 24-24h136V88c0-21.4 25.9-32 41-17l168 168c9.3 9.4 9.3 24.6 0 34zM192 436v-40c0-6.6-5.4-12-12-12H96c-17.7 0-32-14.3-32-32V160c0-17.7 14.3-32 32-32h84c6.6 0 12-5.4 12-12V76c0-6.6-5.4-12-12-12H96c-53 0-96 43-96 96v192c0 53 43 96 96 96h84c6.6 0 12-5.4 12-12z"},child:[]}]})(t)}function ze(t){return F({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M259.3 17.8L194 150.2 47.9 171.5c-26.2 3.8-36.7 36.1-17.7 54.6l105.7 103-25 145.5c-4.5 26.3 23.2 46 46.4 33.7L288 439.6l130.7 68.7c23.2 12.2 50.9-7.4 46.4-33.7l-25-145.5 105.7-103c19-18.5 8.5-50.8-17.7-54.6L382 150.2 316.7 17.8c-11.7-23.6-45.6-23.9-57.4 0z"},child:[]}]})(t)}function ve(t){return F({attr:{viewBox:"0 0 616 512"},child:[{tag:"path",attr:{d:"M602 118.6L537.1 15C531.3 5.7 521 0 510 0H106C95 0 84.7 5.7 78.9 15L14 118.6c-33.5 53.5-3.8 127.9 58.8 136.4 4.5.6 9.1.9 13.7.9 29.6 0 55.8-13 73.8-33.1 18 20.1 44.3 33.1 73.8 33.1 29.6 0 55.8-13 73.8-33.1 18 20.1 44.3 33.1 73.8 33.1 29.6 0 55.8-13 73.8-33.1 18.1 20.1 44.3 33.1 73.8 33.1 4.7 0 9.2-.3 13.7-.9 62.8-8.4 92.6-82.8 59-136.4zM529.5 288c-10 0-19.9-1.5-29.5-3.8V384H116v-99.8c-9.6 2.2-19.5 3.8-29.5 3.8-6 0-12.1-.4-18-1.2-5.6-.8-11.1-2.1-16.4-3.6V480c0 17.7 14.3 32 32 32h448c17.7 0 32-14.3 32-32V283.2c-5.4 1.6-10.8 2.9-16.4 3.6-6.1.8-12.1 1.2-18.2 1.2z"},child:[]}]})(t)}function xs(t){return F({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M0 252.118V48C0 21.49 21.49 0 48 0h204.118a48 48 0 0 1 33.941 14.059l211.882 211.882c18.745 18.745 18.745 49.137 0 67.882L293.823 497.941c-18.745 18.745-49.137 18.745-67.882 0L14.059 286.059A48 48 0 0 1 0 252.118zM112 64c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48z"},child:[]}]})(t)}function Ft(t){return F({attr:{viewBox:"0 0 352 512"},child:[{tag:"path",attr:{d:"M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"},child:[]}]})(t)}function li(t){return F({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16zM53.2 467a48 48 0 0 0 47.9 45h245.8a48 48 0 0 0 47.9-45L416 128H32z"},child:[]}]})(t)}function ut(t){return F({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M624 352h-16V243.9c0-12.7-5.1-24.9-14.1-33.9L494 110.1c-9-9-21.2-14.1-33.9-14.1H416V48c0-26.5-21.5-48-48-48H48C21.5 0 0 21.5 0 48v320c0 26.5 21.5 48 48 48h16c0 53 43 96 96 96s96-43 96-96h128c0 53 43 96 96 96s96-43 96-96h48c8.8 0 16-7.2 16-16v-32c0-8.8-7.2-16-16-16zM160 464c-26.5 0-48-21.5-48-48s21.5-48 48-48 48 21.5 48 48-21.5 48-48 48zm320 0c-26.5 0-48-21.5-48-48s21.5-48 48-48 48 21.5 48 48-21.5 48-48 48zm80-208H416V144h44.1l99.9 99.9V256z"},child:[]}]})(t)}function Is(t){return F({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M212.333 224.333H12c-6.627 0-12-5.373-12-12V12C0 5.373 5.373 0 12 0h48c6.627 0 12 5.373 12 12v78.112C117.773 39.279 184.26 7.47 258.175 8.007c136.906.994 246.448 111.623 246.157 248.532C504.041 393.258 393.12 504 256.333 504c-64.089 0-122.496-24.313-166.51-64.215-5.099-4.622-5.334-12.554-.467-17.42l33.967-33.967c4.474-4.474 11.662-4.717 16.401-.525C170.76 415.336 211.58 432 256.333 432c97.268 0 176-78.716 176-176 0-97.267-78.716-176-176-176-58.496 0-110.28 28.476-142.274 72.333h98.274c6.627 0 12 5.373 12 12v48c0 6.627-5.373 12-12 12z"},child:[]}]})(t)}function ci(t){return F({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z"},child:[]}]})(t)}function mr(t){return F({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M461.2 128H80c-8.84 0-16-7.16-16-16s7.16-16 16-16h384c8.84 0 16-7.16 16-16 0-26.51-21.49-48-48-48H64C28.65 32 0 60.65 0 96v320c0 35.35 28.65 64 64 64h397.2c28.02 0 50.8-21.53 50.8-48V176c0-26.47-22.78-48-50.8-48zM416 336c-17.67 0-32-14.33-32-32s14.33-32 32-32 32 14.33 32 32-14.33 32-32 32z"},child:[]}]})(t)}const mo=()=>s.jsx(_.div,{initial:{scale:0,opacity:0},animate:{scale:1,opacity:1},transition:{type:"spring",stiffness:200,damping:15},className:"flex flex-col items-center",children:s.jsx("img",{src:"/assets/flyp_logo.png",alt:"FLYP",className:"w-24 h-24 object-contain"})}),po=()=>{const{simpleLogin:t,loading:e,error:r}=xt(),[n,i]=a.useState(""),[o,l]=a.useState(""),[c,d]=a.useState(1),p=h=>{h.preventDefault(),n.length>=10&&d(2)},u=async h=>{h.preventDefault(),o.trim()&&n.length>=10&&await t(n,o.trim())};return s.jsxs("div",{className:"min-h-screen bg-[#060D2D] flex flex-col relative overflow-hidden",children:[s.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[s.jsx("div",{className:"absolute -top-40 -right-40 w-80 h-80 rounded-full bg-emerald-500/10 blur-3xl"}),s.jsx("div",{className:"absolute -bottom-40 -left-40 w-96 h-96 rounded-full bg-teal-500/10 blur-3xl"}),s.jsx("div",{className:"absolute top-1/3 left-1/2 -translate-x-1/2 w-64 h-64 rounded-full bg-emerald-500/5 blur-3xl"}),s.jsx("div",{className:"absolute inset-0 bg-[url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGRlZnM+PHBhdHRlcm4gaWQ9ImdyaWQiIHdpZHRoPSI0MCIgaGVpZ2h0PSI0MCIgcGF0dGVyblVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+PHBhdGggZD0iTSAwIDEwIEwgNDAgMTAgTSAxMCAwIEwgMTAgNDAgTSAwIDIwIEwgNDAgMjAgTSAyMCAwIEwgMjAgNDAgTSAwIDMwIEwgNDAgMzAgTSAzMCAwIEwgMzAgNDAiIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzFmMjkzNyIgc3Ryb2tlLXdpZHRoPSIxIi8+PC9wYXR0ZXJuPjwvZGVmcz48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJ1cmwoI2dyaWQpIi8+PC9zdmc+')] opacity-30"})]}),s.jsxs("div",{className:"flex-1 flex flex-col justify-center px-8 relative z-10 py-12",style:{paddingTop:"calc(env(safe-area-inset-top) + 48px)"},children:[s.jsxs(_.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"text-center mb-10",children:[s.jsx("div",{className:"flex justify-center mb-6",children:s.jsx(mo,{})}),s.jsxs(_.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},children:[s.jsx("h1",{className:"text-3xl font-black text-white mb-2 tracking-tight",children:"FLYP Shop"}),s.jsx("p",{className:"text-white/60 text-lg",children:"Groceries in minutes"})]})]}),s.jsx(_.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},children:s.jsx(Ie,{mode:"wait",children:c===1?s.jsxs(_.form,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},onSubmit:p,className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-semibold text-white/70 mb-3",children:"Enter your phone number"}),s.jsxs("div",{className:"relative",children:[s.jsxs("div",{className:"absolute left-5 top-1/2 -translate-y-1/2 flex items-center gap-3 border-r border-white/10 pr-3",children:[s.jsx("span",{className:"text-xl",children:""}),s.jsx("span",{className:"text-white font-semibold",children:"+91"})]}),s.jsx("input",{type:"tel",value:n,onChange:h=>i(h.target.value.replace(/\D/g,"").slice(0,10)),placeholder:"Enter 10 digit number",className:"w-full pl-28 pr-5 py-5 bg-[#101B4A]/80 backdrop-blur-xl rounded-2xl text-white font-semibold text-lg focus:outline-none focus:ring-2 focus:ring-emerald-500 transition-all border border-white/10 placeholder-slate-500",autoFocus:!0})]})]}),s.jsxs(_.button,{whileTap:{scale:.98},type:"submit",disabled:n.length<10,className:`w-full py-5 rounded-2xl font-bold text-lg flex items-center justify-center gap-3 transition-all duration-300 ${n.length>=10?"bg-gradient-to-r from-emerald-500 to-teal-500 text-white shadow-xl shadow-emerald-500/30":"bg-[#101B4A] text-white/40 border border-white/10"}`,children:["Continue",s.jsx(Ja,{className:n.length>=10?"":"opacity-50"})]})]},"phone"):s.jsxs(_.form,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},onSubmit:u,className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between bg-[#101B4A]/80 backdrop-blur-xl rounded-2xl px-5 py-4 border border-white/10",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"w-12 h-12 rounded-2xl bg-emerald-500/10 border border-emerald-500/20 flex items-center justify-center",children:s.jsx(ft,{className:"text-[#05E06C]400"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-white/40 font-medium",children:"Phone Number"}),s.jsxs("p",{className:"font-bold text-white",children:["+91 ",n]})]})]}),s.jsx("button",{type:"button",onClick:()=>d(1),className:"w-10 h-10 rounded-xl bg-slate-700 flex items-center justify-center border border-slate-600",children:s.jsx(Oe,{className:"text-white/60 text-sm"})})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-semibold text-white/70 mb-3",children:"What should we call you?"}),s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute left-5 top-1/2 -translate-y-1/2",children:s.jsx(ci,{className:"text-white/40"})}),s.jsx("input",{type:"text",value:o,onChange:h=>l(h.target.value),placeholder:"Enter your name",className:"w-full pl-14 pr-5 py-5 bg-[#101B4A]/80 backdrop-blur-xl rounded-2xl text-white font-semibold text-lg focus:outline-none focus:ring-2 focus:ring-emerald-500 transition-all border border-white/10 placeholder-slate-500",autoFocus:!0})]})]}),r&&s.jsx(_.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"p-4 bg-red-500/10 border border-red-500/20 rounded-2xl",children:s.jsx("p",{className:"text-red-400 text-sm font-medium",children:r})}),s.jsx(_.button,{whileTap:{scale:.98},type:"submit",disabled:!o.trim()||e,className:`w-full py-5 rounded-2xl font-bold text-lg flex items-center justify-center gap-3 transition-all duration-300 ${o.trim()?"bg-gradient-to-r from-emerald-500 to-teal-500 text-white shadow-xl shadow-emerald-500/30":"bg-[#101B4A] text-white/40 border border-white/10"}`,children:e?s.jsx(_.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"w-6 h-6 border-3 border-white border-t-transparent rounded-full"}):s.jsxs(s.Fragment,{children:["Get Started",s.jsx(Ms,{className:"text-xl"})]})})]},"name")})}),s.jsx(_.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.5},className:"mt-12 grid grid-cols-3 gap-4",children:[{icon:"",label:"Express Delivery"},{icon:"",label:"Local Stores"},{icon:"",label:"Best Prices"}].map((h,f)=>s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"w-14 h-14 rounded-2xl bg-[#101B4A]/80 border border-white/10 flex items-center justify-center mx-auto mb-2 text-2xl",children:h.icon}),s.jsx("p",{className:"text-xs font-medium text-white/40",children:h.label})]},f))}),s.jsxs(_.p,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.6},className:"text-xs text-white/40 text-center mt-10 px-4",children:["By continuing, you agree to our"," ",s.jsx("a",{href:"/terms",className:"text-[#05E06C]400 font-medium",children:"Terms of Service"})," ","and"," ",s.jsx("a",{href:"/privacy",className:"text-[#05E06C]400 font-medium",children:"Privacy Policy"})]})]}),s.jsx("div",{className:"h-8",style:{paddingBottom:"env(safe-area-inset-bottom)"}})]})},fo=(t,e,r,n)=>{const o=(r-t)*Math.PI/180,l=(n-e)*Math.PI/180,c=Math.sin(o/2)*Math.sin(o/2)+Math.cos(t*Math.PI/180)*Math.cos(r*Math.PI/180)*Math.sin(l/2)*Math.sin(l/2);return 6371*(2*Math.atan2(Math.sqrt(c),Math.sqrt(1-c)))},vs=async(t,e,r=50,n=20)=>{try{const i=Me(he,"stores"),o=await gt(i),l=[];return o.docs.forEach(c=>{const d=c.data();if(d.isActive===!1)return;let p,u;d.location&&(p=d.location.latitude||d.location._lat,u=d.location.longitude||d.location._long);let h=null;p&&u&&t&&e&&(h=fo(t,e,p,u));const f=d.deliveryRadius||10,g=h!==null?h<=f:!0;l.push({id:c.id,...d,distance:h!==null?Math.round(h*10)/10:null,deliveryRadius:f,isWithinDeliveryRange:g,deliveryAvailable:d.deliveryEnabled!==!1&&g})}),l.sort((c,d)=>c.distance===null?1:d.distance===null?-1:c.distance-d.distance),l.slice(0,n)}catch(i){throw console.error("Error fetching nearby stores:",i),i}},di=async t=>{try{const e=await mt(Ee(he,"stores",t));return e.exists()?{id:e.id,...e.data()}:null}catch(e){throw console.error("Error fetching store:",e),e}},go=async(t,e=null,r=100)=>{try{const n=Me(he,"stores",t,"products");let o=(await gt(n)).docs.map(l=>({id:l.id,storeId:t,...l.data()}));return o=o.filter(l=>{const c=l.onMarketplace===!0||l.isAvailable===!0||l.syncedToMarketplace===!0||l.marketplaceEnabled===!0||l.onMarketplace===void 0&&l.isAvailable===void 0,d=!e||l.category===e;return c&&d}),o.sort((l,c)=>{const d=l.stock!==void 0&&l.stock<=0,p=c.stock!==void 0&&c.stock<=0;return d!==p?d?1:-1:l.category!==c.category?(l.category||"").localeCompare(c.category||""):(l.name||"").localeCompare(c.name||"")}),o.slice(0,r)}catch(n){throw console.error("Error fetching store products:",n),n}},xo=async t=>{try{const e=await mt(Ee(he,"stores",t));if(e.exists()&&e.data().categories?.length>0)return e.data().categories;const r=Me(he,"stores",t,"products"),n=await gt(r),i=new Set;return n.docs.forEach(l=>{const c=l.data();c.category&&i.add(c.category)}),Array.from(i).sort()}catch(e){throw console.error("Error fetching categories:",e),e}},vo=async(t,e,r,n=5)=>{try{const i=await vs(e,r,n,50),o=t.toLowerCase(),l=[];for(const c of i){const d=Me(he,"stores",c.id,"products");(await gt(fs(d,zs("isAvailable","==",!0),Us(100)))).docs.forEach(u=>{const h=u.data(),f=(h.name||"").toLowerCase(),g=(h.searchKeywords||[]).map(N=>N.toLowerCase()),m=(h.category||"").toLowerCase();(f.includes(o)||g.some(N=>N.includes(o))||m.includes(o))&&l.push({id:u.id,storeId:c.id,storeName:c.businessName,storeDistance:c.distance,...h})})}return l.sort((c,d)=>{const p=c.name.toLowerCase()===o,u=d.name.toLowerCase()===o;return p&&!u?-1:!p&&u?1:c.storeDistance-d.storeDistance}),l}catch(i){throw console.error("Error searching products:",i),i}},bo=async(t,e,r=3,n=20)=>{try{const i=await vs(t,e,r,10),o=[];for(const l of i.slice(0,5)){const c=Me(he,"stores",l.id,"products"),d=fs(c,zs("isAvailable","==",!0),Us(10));(await gt(d)).docs.forEach(u=>{o.push({id:u.id,storeId:l.id,storeName:l.businessName,storeDistance:l.distance,...u.data()})})}return o.sort(()=>Math.random()-.5).slice(0,n)}catch(i){throw console.error("Error fetching featured products:",i),i}},yo=async(t,e,r=5)=>{try{const n=await vs(t,e,r,20),i=new Set;n.forEach(c=>{(c.categories||[]).forEach(d=>i.add(d))});const o=Array.from(i),l={grocery:{icon:"",color:"from-green-500 to-green-600"},dairy:{icon:"",color:"from-blue-400 to-blue-500"},fruits:{icon:"",color:"from-red-400 to-red-500"},vegetables:{icon:"",color:"from-green-400 to-green-500"},snacks:{icon:"",color:"from-yellow-400 to-yellow-500"},beverages:{icon:"",color:"from-purple-400 to-purple-500"},"personal care":{icon:"",color:"from-pink-400 to-pink-500"},household:{icon:"",color:"from-indigo-400 to-indigo-500"},medicines:{icon:"",color:"from-teal-400 to-teal-500"},"baby care":{icon:"",color:"from-rose-400 to-rose-500"},"pet supplies":{icon:"",color:"from-amber-400 to-amber-500"},stationery:{icon:"",color:"from-cyan-400 to-cyan-500"}};return o.map(c=>({name:c,...l[c.toLowerCase()]||{icon:"",color:"from-gray-400 to-gray-500"}}))}catch(n){throw console.error("Error fetching categories:",n),n}},wo=({store:t,onClick:e,isFavorite:r,onFavoriteToggle:n,index:i})=>{const o=t.businessName||t.name||"Store",[l,c]=a.useState(!1),d=t.isWithinDeliveryRange||t.pickupEnabled||t.distance===null,p=()=>{d&&e(t)};return s.jsxs(_.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{delay:.2+i*.1,type:"spring",stiffness:200},whileHover:d?{scale:1.02,y:-4}:{},whileTap:d?{scale:.98}:{},onTapStart:()=>d&&c(!0),onTap:()=>{c(!1),p()},onTapCancel:()=>c(!1),className:`bg-white/[0.06] backdrop-blur-xl rounded-2xl overflow-hidden border transition-all duration-300 ${d?l?"cursor-pointer border-emerald-500/50 shadow-lg shadow-emerald-500/20":"cursor-pointer border-white/[0.08] hover:border-emerald-500/30":"cursor-not-allowed opacity-70 border-white/[0.06]"}`,children:[s.jsxs("div",{className:"h-40 relative bg-gradient-to-br from-slate-800 to-slate-900",children:[t.bannerUrl||t.logoUrl?s.jsx("img",{src:t.bannerUrl||t.logoUrl,alt:"",className:"w-full h-full object-cover"}):s.jsx("div",{className:"w-full h-full bg-gradient-to-br from-emerald-500/30 to-blue-500/20 flex items-center justify-center",children:s.jsx(ve,{className:"text-white/20 text-5xl"})}),s.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-[#0a0f1c] via-[#0a0f1c]/30 to-transparent"}),s.jsx(_.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.3+i*.1,type:"spring"},className:"absolute top-3 left-3",children:s.jsxs("span",{className:`px-3 py-1.5 rounded-full text-xs font-semibold backdrop-blur-md flex items-center gap-1.5 ${t.isActive?"bg-emerald-500/20 text-emerald-400 border border-emerald-500/40":"bg-white/10 text-white/50 border border-white/10"}`,children:[s.jsx("span",{className:`w-2 h-2 rounded-full ${t.isActive?"bg-emerald-400 animate-pulse":"bg-white/40"}`}),t.isActive?"Open Now":"Closed"]})}),s.jsx(_.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:u=>{u.stopPropagation(),n?.(t.id)},className:`absolute top-3 right-3 w-10 h-10 rounded-full backdrop-blur-md flex items-center justify-center border transition-all ${r?"bg-red-500/20 border-red-500/40":"bg-black/30 border-white/10 hover:border-white/30"}`,children:s.jsx(oi,{className:`text-sm ${r?"text-red-500":"text-white/50"}`})}),s.jsx("div",{className:"absolute bottom-3 left-4 right-4",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("h3",{className:"font-bold text-white text-lg drop-shadow-lg",children:o}),t.isVerified&&s.jsx(_.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.5,type:"spring"},children:s.jsx(ii,{className:"text-emerald-400 text-lg"})})]})}),s.jsx("div",{className:"absolute bottom-3 right-4",children:s.jsxs("span",{className:"px-3 py-1.5 rounded-full bg-emerald-500/90 text-xs font-semibold text-white flex items-center gap-1.5 shadow-lg shadow-emerald-500/30",children:[s.jsx(we,{className:"text-[10px]"}),t.avgDeliveryTime||t.baseDeliveryTime||30," min"]})}),t.deliveryEnabled!==!1&&!t.isWithinDeliveryRange&&t.distance!==null&&s.jsx(_.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.4+i*.1,type:"spring"},className:"absolute top-12 left-3",children:s.jsxs("span",{className:`px-2.5 py-1 rounded-full text-[10px] font-semibold flex items-center gap-1 ${t.pickupEnabled?"bg-amber-500/20 text-amber-400 border border-amber-500/40":"bg-red-500/20 text-red-400 border border-red-500/40"}`,children:[s.jsx(me,{className:"text-[8px]"}),t.pickupEnabled?"Pickup only":"Out of range"]})}),!t.isWithinDeliveryRange&&!t.pickupEnabled&&t.distance!==null&&s.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-[2px] flex items-center justify-center rounded-t-2xl",children:s.jsxs("div",{className:"text-center px-4",children:[s.jsx(me,{className:"text-red-400 text-2xl mx-auto mb-2"}),s.jsx("p",{className:"text-white font-semibold text-sm",children:"Not Available"}),s.jsx("p",{className:"text-white/60 text-xs",children:"Outside delivery area"})]})})]}),s.jsxs("div",{className:"p-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("p",{className:"text-white/50 text-sm",children:t.category||"General Store"}),s.jsxs("div",{className:"flex items-center gap-1.5 px-2.5 py-1 bg-amber-500/15 rounded-lg border border-amber-500/25",children:[s.jsx(ze,{className:"text-amber-400 text-xs"}),s.jsx("span",{className:"text-sm font-semibold text-amber-400",children:t.rating?.toFixed(1)||"0.0"})]})]}),s.jsxs("div",{className:"flex items-center gap-4 mt-3 pt-3 border-t border-white/[0.06]",children:[t.distance!==null&&s.jsxs("span",{className:"flex items-center gap-1.5 text-xs text-white/50",children:[s.jsx(me,{className:"text-emerald-400"}),t.distance," km away"]}),(t.deliveryFee===0||!t.deliveryFee)&&s.jsxs("span",{className:"text-xs font-semibold text-emerald-400 flex items-center gap-1",children:[s.jsx(rs,{className:"text-[10px]"})," Free Delivery"]})]})]})]})},jo=({product:t,onAdd:e,index:r})=>s.jsxs(_.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.3+r*.05},whileHover:{scale:1.03,y:-4},whileTap:{scale:.97},className:"bg-white/[0.06] backdrop-blur-xl rounded-2xl overflow-hidden w-44 flex-shrink-0 border border-white/[0.08] hover:border-emerald-500/30 transition-all",children:[s.jsx("div",{className:"h-32 bg-gradient-to-br from-white/[0.04] to-transparent relative p-4",children:t.image||t.imageUrl?s.jsx("img",{src:t.image||t.imageUrl,alt:t.name,className:"w-full h-full object-contain"}):s.jsx("div",{className:"w-full h-full flex items-center justify-center text-4xl",children:""})}),s.jsxs("div",{className:"p-3.5",children:[s.jsx("p",{className:"text-[10px] text-emerald-400 font-medium truncate mb-0.5",children:t.storeName}),s.jsx("h4",{className:"text-sm font-medium text-white truncate",children:t.name}),s.jsxs("div",{className:"flex items-center justify-between mt-3",children:[s.jsxs("span",{className:"font-bold text-white text-lg",children:["",t.sellingPrice||t.price]}),s.jsx(_.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>e?.(t),className:"w-9 h-9 bg-emerald-500 rounded-xl flex items-center justify-center text-white text-lg font-bold hover:bg-emerald-400 shadow-lg shadow-emerald-500/30 transition-colors",children:"+"})]})]})]}),No=({name:t,emoji:e,isActive:r,onClick:n})=>s.jsxs(_.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:n,className:`flex items-center gap-2 px-4 py-2.5 rounded-full whitespace-nowrap transition-all duration-200 ${r?"bg-gradient-to-r from-emerald-500 to-emerald-600 text-white shadow-lg shadow-emerald-500/30 border border-emerald-400":"bg-white/[0.06] text-white/70 border border-white/[0.08] hover:border-emerald-500/30 hover:bg-white/[0.08]"}`,children:[s.jsx("span",{className:"text-base",children:e}),s.jsx("span",{className:"font-medium text-sm",children:t})]}),Lo=({isOpen:t,onClose:e,location:r,onSelect:n})=>{const[i,o]=a.useState(!1),[l,c]=a.useState(""),d=()=>{o(!0),navigator.geolocation.getCurrentPosition(p=>{n({lat:p.coords.latitude,lng:p.coords.longitude,label:"Current Location"}),o(!1),e()},()=>o(!1),{enableHighAccuracy:!0})};return s.jsx(Ie,{children:t&&s.jsxs(s.Fragment,{children:[s.jsx(_.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:e,className:"fixed inset-0 z-50 bg-black/70 backdrop-blur-sm"}),s.jsxs(_.div,{initial:{y:"100%"},animate:{y:0},exit:{y:"100%"},transition:{type:"spring",damping:30,stiffness:300},className:"fixed bottom-0 left-0 right-0 z-50 bg-gradient-to-b from-[#111827] to-[#0f172a] rounded-t-[28px] border-t border-emerald-500/20 shadow-xl max-h-[85vh] overflow-y-auto",children:[s.jsx("div",{className:"flex justify-center py-4 sticky top-0 bg-gradient-to-b from-[#111827] to-transparent z-10",children:s.jsx("div",{className:"w-12 h-1.5 bg-white/20 rounded-full"})}),s.jsxs("div",{className:"px-6 pb-[120px]",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-xl font-bold text-white",children:"Delivery Location"}),s.jsx("p",{className:"text-white/50 text-sm mt-1",children:"Choose where you want your order delivered"})]}),s.jsx(_.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:e,className:"w-10 h-10 rounded-full bg-white/[0.06] border border-white/10 flex items-center justify-center",children:s.jsx(Ft,{className:"text-white/60"})})]}),s.jsxs("div",{className:"relative mb-5",children:[s.jsx(Ve,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-white/30"}),s.jsx("input",{type:"text",value:l,onChange:p=>c(p.target.value),placeholder:"Search for area, street name...",className:"w-full h-14 pl-12 pr-4 bg-white/[0.06] rounded-2xl text-white placeholder-white/30 focus:outline-none focus:ring-2 focus:ring-emerald-500/40 border border-white/[0.08] focus:border-emerald-500/40 transition-all text-sm"})]}),s.jsxs(_.button,{whileHover:{scale:1.01},whileTap:{scale:.99},onClick:d,disabled:i,className:"w-full flex items-center gap-4 p-4 bg-gradient-to-r from-emerald-500/20 to-emerald-600/10 border border-emerald-500/40 rounded-2xl mb-5 hover:from-emerald-500/30 hover:to-emerald-600/20 transition-all",children:[s.jsx("div",{className:"w-14 h-14 bg-gradient-to-br from-emerald-400 to-emerald-600 rounded-xl flex items-center justify-center shadow-lg shadow-emerald-500/30",children:s.jsx(Ga,{className:"text-white text-2xl"})}),s.jsxs("div",{className:"flex-1 text-left",children:[s.jsx("p",{className:"font-semibold text-white text-base",children:"Use Current Location"}),s.jsx("p",{className:"text-emerald-400 text-sm",children:i?"Detecting your location...":"GPS  Fast & Accurate"})]}),i?s.jsx("div",{className:"w-6 h-6 border-2 border-emerald-400 border-t-transparent rounded-full animate-spin"}):s.jsx(Ge,{className:"text-emerald-400"})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsx("p",{className:"text-white/40 text-xs font-medium uppercase tracking-wider mb-3",children:"Recent Locations"}),r&&s.jsxs(_.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},className:"flex items-center gap-4 p-4 bg-white/[0.04] rounded-2xl border border-white/[0.08] hover:border-emerald-500/20 transition-all cursor-pointer",onClick:()=>{n(r),e()},children:[s.jsx("div",{className:"w-12 h-12 bg-blue-500/20 rounded-xl flex items-center justify-center",children:s.jsx(me,{className:"text-blue-400"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"text-white font-medium",children:r.label||"Current Location"}),s.jsx("p",{className:"text-white/40 text-sm",children:"Currently selected"})]}),s.jsx("div",{className:"w-3 h-3 bg-emerald-500 rounded-full shadow-lg shadow-emerald-500/50"})]}),s.jsxs(_.button,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1},className:"w-full flex items-center gap-4 p-4 bg-white/[0.02] rounded-2xl border border-dashed border-white/10 hover:border-emerald-500/30 transition-all",children:[s.jsx("div",{className:"w-12 h-12 bg-white/[0.04] rounded-xl flex items-center justify-center",children:s.jsx(me,{className:"text-white/30"})}),s.jsxs("div",{className:"flex-1 text-left",children:[s.jsx("p",{className:"text-white/50 font-medium",children:"Add New Address"}),s.jsx("p",{className:"text-white/30 text-sm",children:"Save for faster checkout"})]}),s.jsx(Ge,{className:"text-white/30"})]})]})]})]})]})})},Co=({onNavigate:t,onStoreSelect:e,onProductAdd:r})=>{const[n,i]=a.useState(null),[o,l]=a.useState(!0),[c,d]=a.useState(!1),[p,u]=a.useState([]),[h,f]=a.useState([]),[g,m]=a.useState(!0),[N,x]=a.useState([]),[y,L]=a.useState("All"),M=[{name:"All",emoji:""},{name:"Grocery",emoji:""},{name:"Fresh",emoji:""},{name:"Dairy",emoji:""},{name:"Snacks",emoji:""},{name:"Drinks",emoji:""}],j=(()=>{const w=new Date().getHours();return w>=5&&w<12?{text:"Good Morning",emoji:""}:w>=12&&w<17?{text:"Good Afternoon",emoji:""}:w>=17&&w<21?{text:"Good Evening",emoji:""}:{text:"Good Night",emoji:""}})(),v=w=>{x(E=>E.includes(w)?E.filter(S=>S!==w):[...E,w])};return a.useEffect(()=>{if(l(!0),!navigator.geolocation){i({lat:19.076,lng:72.8777,label:"Select Location"}),l(!1);return}navigator.geolocation.getCurrentPosition(w=>{i({lat:w.coords.latitude,lng:w.coords.longitude,label:"Current Location"}),l(!1)},()=>{i({lat:19.076,lng:72.8777,label:"Select Location"}),l(!1)},{enableHighAccuracy:!0,timeout:1e4,maximumAge:3e5})},[]),a.useEffect(()=>{if(!n)return;(async()=>{m(!0);try{const[E,S]=await Promise.all([vs(n.lat,n.lng,50,10),bo(n.lat,n.lng,50,10)]);u(E),f(S)}catch(E){console.error("Error:",E)}finally{m(!1)}})()},[n]),o?s.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-[#0a0f1c] to-[#0f172a] flex flex-col items-center justify-center px-6",children:[s.jsx(_.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:200},className:"w-20 h-20 bg-gradient-to-br from-emerald-400 to-emerald-600 rounded-3xl flex items-center justify-center mb-6 shadow-2xl shadow-emerald-500/30",children:s.jsx("span",{className:"text-white font-bold text-3xl",children:"F"})}),s.jsx(_.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},className:"w-10 h-10 border-2 border-emerald-400/30 border-t-emerald-400 rounded-full animate-spin mb-4"}),s.jsx("p",{className:"text-white/50",children:"Finding stores near you..."})]}):s.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-[#0a0f1c] to-[#0f172a]",children:[s.jsx("header",{className:"sticky top-0 z-40 bg-[#0a0f1c]/90 backdrop-blur-xl border-b border-emerald-500/10",style:{paddingTop:"env(safe-area-inset-top)"},children:s.jsxs("div",{className:"px-5 py-4 flex items-center gap-4",children:[s.jsx(_.div,{whileHover:{scale:1.05},whileTap:{scale:.95},className:"w-12 h-12 bg-gradient-to-br from-emerald-400 to-emerald-600 rounded-xl flex items-center justify-center shadow-lg shadow-emerald-500/30",children:s.jsx("span",{className:"text-white font-bold text-xl",children:"F"})}),s.jsxs(_.button,{whileTap:{scale:.98},onClick:()=>d(!0),className:"flex-1 flex items-center gap-2 min-w-0 bg-white/[0.04] hover:bg-white/[0.06] rounded-xl px-3 py-2.5 border border-white/[0.06] hover:border-emerald-500/20 transition-all",children:[s.jsx("div",{className:"w-8 h-8 bg-emerald-500/20 rounded-lg flex items-center justify-center",children:s.jsx(me,{className:"text-emerald-400 text-sm"})}),s.jsxs("div",{className:"flex-1 min-w-0 text-left",children:[s.jsx("p",{className:"text-[10px] text-emerald-400 font-semibold uppercase tracking-wider",children:"Deliver to"}),s.jsxs("div",{className:"flex items-center gap-1.5",children:[s.jsx("p",{className:"text-sm font-medium text-white truncate",children:n?.label}),s.jsx(Os,{className:"text-white/40 text-[10px] flex-shrink-0"})]})]})]}),s.jsx(_.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>t("search"),className:"w-11 h-11 rounded-xl bg-white/[0.06] border border-white/[0.08] flex items-center justify-center hover:border-emerald-500/30 hover:bg-white/[0.08] transition-all",children:s.jsx(Ve,{className:"text-white/60"})}),s.jsxs(_.button,{whileHover:{scale:1.05},whileTap:{scale:.95},className:"w-11 h-11 rounded-xl bg-white/[0.06] border border-white/[0.08] flex items-center justify-center relative hover:border-emerald-500/30 hover:bg-white/[0.08] transition-all",children:[s.jsx(Qa,{className:"text-white/60"}),s.jsx("span",{className:"absolute top-2 right-2 w-2.5 h-2.5 bg-emerald-400 rounded-full border-2 border-[#0a0f1c] animate-pulse"})]})]})}),s.jsxs("main",{className:"px-5 py-6 space-y-7",children:[s.jsxs(_.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:[s.jsxs("h1",{className:"text-2xl font-bold text-white flex items-center gap-2",children:[j.text," ",s.jsx("span",{className:"text-2xl",children:j.emoji})]}),s.jsx("p",{className:"text-white/50 mt-1",children:"What would you like to order today?"})]}),s.jsxs(_.button,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},whileTap:{scale:.99},onClick:()=>t("search"),className:"w-full flex items-center gap-3 px-4 py-4 bg-white/[0.04] border border-white/[0.08] rounded-2xl hover:border-emerald-500/20 hover:bg-white/[0.06] transition-all",children:[s.jsx(Ve,{className:"text-white/30"}),s.jsx("span",{className:"flex-1 text-left text-white/30",children:"Search products, stores..."}),s.jsx("div",{className:"w-9 h-9 bg-gradient-to-br from-emerald-400 to-emerald-600 rounded-xl flex items-center justify-center shadow-lg shadow-emerald-500/30",children:s.jsx(Ve,{className:"text-white text-xs"})})]}),s.jsx("div",{className:"flex items-center gap-2 overflow-x-auto pb-2 scrollbar-hide -mx-5 px-5",children:M.map((w,E)=>s.jsx(No,{name:w.name,emoji:w.emoji,isActive:y===w.name,onClick:()=>L(w.name)},w.name))}),s.jsxs("section",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h2",{className:"text-lg font-bold text-white",children:"Stores Near You"}),s.jsxs("span",{className:"text-sm text-emerald-400 bg-emerald-500/10 px-3 py-1 rounded-full border border-emerald-500/20",children:[p.length," stores"]})]}),g?s.jsx("div",{className:"space-y-4",children:[1,2].map(w=>s.jsx("div",{className:"h-56 bg-white/[0.04] rounded-2xl animate-pulse border border-white/[0.06]"},w))}):p.length>0?s.jsx("div",{className:"space-y-4",children:p.map((w,E)=>s.jsx(wo,{store:w,index:E,onClick:()=>e?.(w),isFavorite:N.includes(w.id),onFavoriteToggle:v},w.id))}):s.jsxs(_.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center py-16 bg-white/[0.04] rounded-2xl border border-white/[0.08]",children:[s.jsx("div",{className:"w-16 h-16 bg-white/[0.06] rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx(ve,{className:"text-white/20 text-2xl"})}),s.jsx("p",{className:"text-white/50",children:"No stores nearby"}),s.jsx("p",{className:"text-white/30 text-sm mt-1",children:"Try changing your location"})]})]}),h.length>0&&s.jsxs("section",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("h2",{className:"text-lg font-bold text-white flex items-center gap-2",children:["Trending Now ",s.jsx("span",{className:"text-orange-400",children:""})]}),s.jsxs(_.button,{whileHover:{x:4},className:"text-sm text-emerald-400 font-medium flex items-center gap-1",children:["See all ",s.jsx(Ge,{className:"text-xs"})]})]}),s.jsx("div",{className:"flex gap-3 overflow-x-auto pb-2 scrollbar-hide -mx-5 px-5",children:h.map((w,E)=>s.jsx(jo,{product:w,onAdd:r,index:E},E))})]})]}),s.jsx("div",{className:"h-28"}),s.jsx(Lo,{isOpen:c,onClose:()=>d(!1),location:n,onSelect:w=>{i(w),d(!1)}})]})},So=[{value:"inherit",label:"Use store default",description:"Follow your stores default policy"},{value:"non_returnable",label:"Non-returnable",description:"No returns or replacements"},{value:"replacement_available",label:"Replacement available",description:"Replace if defective/wrong"},{value:"return_within_1h",label:"Return within 1 hour",description:"Return or replace within 1 hour"},{value:"return_within_24h",label:"Return within 24 hours",description:"Return or replace within 24 hours"},{value:"return_within_3d",label:"Return within 3 days",description:"Return or replace within 3 days"}];function ui(t){return So.find(r=>r.value===t)?.label??t}function hi(t,e){const r=t?.returnPolicy;return r&&r!=="inherit"?r:e||"replacement_available"}function ko(t,e){if(!Array.isArray(e)||e.length===0||t<=0)return{discountAmount:0,appliedOffer:null};let r=0,n=null;for(const i of e){if(!i.enabled)continue;let o=0;if(i.type==="percent_all")o=t*(i.value||0)/100;else if(i.type==="percent_above"){const l=parseFloat(i.minOrderValue)||0;t>=l&&(o=t*(i.value||0)/100)}o>r&&(r=o,n=i)}return{discountAmount:Math.round(r*100)/100,appliedOffer:n}}const pr=t=>{const e={All:"",Food:"",Grocery:"",Vegetables:"",Fruits:"",Dairy:"",Beverages:"",Beverage:"",Drink:"",Snacks:"","Personal Care":"","Hair Care":"",Health:"",Household:"",Electronics:"",Clothing:"",Liquor:"",General:""};return e[t]||e[t?.split(" ")[0]]||""},Eo=({product:t,cartQuantity:e,onAdd:r,onUpdate:n,onClick:i,storeReturnPolicy:o})=>{const l=t.sellingPrice||t.price||0,c=t.mrp||l,d=c>l,p=d?Math.round((1-l/c)*100):0,u=t.offerLabel||(p>0?`${p}% OFF`:null),h=t.stock!==void 0&&t.stock<=0||t.quantity!==void 0&&t.quantity<=0||!t.inStock,f=hi(t,o),g=ui(f);return s.jsxs("div",{onClick:()=>i&&i(t),className:`group bg-[#151c2c] hover:bg-[#1a2235] rounded-xl overflow-hidden border border-white/[0.06] hover:border-emerald-500/30 transition-all duration-200 cursor-pointer ${h?"opacity-60":""}`,children:[s.jsxs("div",{className:"relative h-24 sm:h-28 bg-white rounded-t-xl overflow-hidden",children:[t.imageUrl||t.image?s.jsx("img",{src:t.imageUrl||t.image,alt:t.name,className:"w-full h-full object-contain p-2 group-hover:scale-105 transition-transform duration-300"}):s.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gradient-to-br from-gray-100 to-gray-50 text-2xl",children:""}),u&&!h&&s.jsxs("span",{className:"absolute top-1 left-1 bg-gradient-to-r from-amber-500 to-amber-600 text-white text-[8px] font-bold px-1.5 py-0.5 rounded shadow-sm flex items-center gap-0.5",children:[s.jsx(xs,{className:"text-[7px]"}),u]}),f==="non_returnable"&&s.jsxs("span",{className:"absolute top-1 right-1 bg-red-500/80 text-white text-[8px] font-semibold px-1.5 py-0.5 rounded shadow-sm flex items-center gap-0.5",children:[s.jsx(Is,{className:"text-[7px]"}),"No Return"]}),h&&s.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-[1px] flex items-center justify-center",children:s.jsx("span",{className:"text-white text-[9px] font-semibold bg-red-500/80 px-2 py-0.5 rounded",children:"Out of Stock"})})]}),s.jsxs("div",{className:"p-2",children:[s.jsx("p",{className:"text-[10px] sm:text-[11px] text-white/90 font-medium line-clamp-2 leading-tight min-h-[28px]",children:t.name}),s.jsxs("div",{className:"flex items-center justify-between mt-0.5",children:[s.jsx("p",{className:"text-[9px] text-white/40 truncate",children:t.unit||"1 unit"}),f!=="non_returnable"&&f!=="replacement_available"&&s.jsxs("span",{className:"text-[8px] text-emerald-400/70 flex items-center gap-0.5",children:[s.jsx(Is,{className:"text-[7px]"}),g]})]}),s.jsxs("div",{className:"flex items-center justify-between mt-1.5 gap-1",children:[s.jsxs("div",{className:"flex flex-col",children:[s.jsxs("span",{className:"text-white font-bold text-xs sm:text-sm",children:["",l]}),d&&s.jsxs("span",{className:"text-white/40 text-[9px] line-through",children:["",c]})]}),e>0&&!h?s.jsxs("div",{className:"flex items-center bg-emerald-500 rounded-md h-6",children:[s.jsx("button",{onClick:m=>{m.stopPropagation(),n(t.id,e-1)},className:"w-6 h-6 flex items-center justify-center text-white hover:bg-emerald-600 rounded-l-md transition-colors",children:s.jsx(gs,{size:7})}),s.jsx("span",{className:"text-white font-bold text-[10px] min-w-[16px] text-center",children:e}),s.jsx("button",{onClick:m=>{m.stopPropagation(),n(t.id,e+1)},className:"w-6 h-6 flex items-center justify-center text-white hover:bg-emerald-600 rounded-r-md transition-colors",children:s.jsx(vt,{size:7})})]}):s.jsx("button",{onClick:m=>{m.stopPropagation(),!h&&r(t)},disabled:h,className:`h-6 px-2.5 rounded-md text-[9px] font-bold transition-all ${h?"bg-white/10 text-white/30":"bg-emerald-500 hover:bg-emerald-600 text-white active:scale-95"}`,children:"ADD"})]})]})]})},Po=({product:t,store:e,isOpen:r,onClose:n,cartQuantity:i,onAdd:o,onUpdate:l,storeReturnPolicy:c})=>{const d=t?.sellingPrice||t?.price||0,p=t?.mrp||d,u=p>d,h=t?.offerLabel||(u?`${Math.round((1-d/p)*100)}% OFF`:null),f=t?.stock!==void 0&&t?.stock<=0||t?.quantity!==void 0&&t?.quantity<=0||!t?.inStock,g=hi(t,c),m=ui(g),N=p>d?p-d:0;a.useEffect(()=>{if(r){const y=window.getComputedStyle(document.body).overflow;return document.body.style.overflow="hidden",()=>{document.body.style.overflow=y}}},[r]);const x=y=>{y.target===y.currentTarget&&y.preventDefault()};return!r||!t?null:s.jsx(Ie,{children:r&&s.jsxs(s.Fragment,{children:[s.jsx(_.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},onClick:n,onTouchMove:x,className:"fixed inset-0 z-[100] bg-black/70 backdrop-blur-md touch-none",style:{paddingTop:"env(safe-area-inset-top)",paddingBottom:"env(safe-area-inset-bottom)"}}),s.jsxs(_.div,{initial:{scale:.95,opacity:0,y:20},animate:{scale:1,opacity:1,y:0},exit:{scale:.95,opacity:0,y:20},transition:{type:"spring",damping:25,stiffness:300,mass:.8},onClick:y=>y.stopPropagation(),className:"fixed top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 z-[101] bg-[#0a0f1c] rounded-2xl border border-white/10 shadow-2xl w-[calc(100%-2rem)] sm:w-[90%] max-w-2xl max-h-[90vh] overflow-y-auto",style:{WebkitOverflowScrolling:"touch"},children:[s.jsx("button",{onClick:n,className:"absolute top-4 right-4 w-10 h-10 rounded-full bg-white/10 hover:bg-white/20 active:bg-white/30 flex items-center justify-center transition-all z-10 touch-manipulation","aria-label":"Close",children:s.jsx(Ft,{className:"text-white/70 text-sm"})}),s.jsxs("div",{className:"relative h-56 sm:h-64 md:h-80 bg-gradient-to-br from-white to-gray-50 rounded-t-2xl overflow-hidden",children:[t.imageUrl||t.image?s.jsx("img",{src:t.imageUrl||t.image,alt:t.name,className:"w-full h-full object-contain p-8"}):s.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gradient-to-br from-gray-100 to-gray-50 text-6xl",children:""}),h&&!f&&s.jsxs("div",{className:"absolute top-4 left-4 bg-gradient-to-r from-amber-500 to-amber-600 text-white px-3 py-1.5 rounded-full shadow-lg flex items-center gap-1.5",children:[s.jsx(xs,{className:"text-xs"}),s.jsx("span",{className:"font-bold text-sm",children:h})]}),f&&s.jsx("div",{className:"absolute inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx(ss,{className:"text-red-400 text-4xl mx-auto mb-2"}),s.jsx("span",{className:"text-white font-bold text-lg",children:"Out of Stock"})]})})]}),s.jsxs("div",{className:"p-5 md:p-6 space-y-4",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-start justify-between gap-3 mb-3",children:[s.jsx("h2",{className:"text-xl md:text-2xl font-bold text-white flex-1 leading-tight pr-2",children:t.name}),t.category&&s.jsx("span",{className:"px-2.5 py-1 bg-emerald-500/20 text-emerald-300 rounded-full text-[10px] md:text-xs font-medium flex-shrink-0",children:t.category})]}),s.jsxs("div",{className:"space-y-1",children:[t.brand&&s.jsxs("p",{className:"text-white/60 text-sm",children:["Brand: ",s.jsx("span",{className:"text-white/80 font-medium",children:t.brand})]}),t.sku&&s.jsxs("p",{className:"text-white/40 text-xs",children:["SKU: ",t.sku]})]})]}),t.description&&s.jsxs("div",{className:"bg-white/5 rounded-xl p-4 border border-white/10",children:[s.jsxs("h3",{className:"text-white/70 text-sm font-medium mb-2 flex items-center gap-2",children:[s.jsx(Xe,{className:"text-emerald-400"}),"Description"]}),s.jsx("p",{className:"text-white/60 text-sm leading-relaxed",children:t.description})]}),s.jsxs("div",{className:"bg-gradient-to-r from-emerald-500/10 via-emerald-500/5 to-cyan-500/10 rounded-xl p-4 md:p-5 border border-emerald-500/20 shadow-lg shadow-emerald-500/5",children:[s.jsxs("div",{className:"flex flex-wrap items-baseline gap-2 md:gap-3 mb-3",children:[s.jsxs("span",{className:"text-2xl md:text-3xl font-bold text-white",children:["",d]}),u&&s.jsxs(s.Fragment,{children:[s.jsxs("span",{className:"text-lg md:text-xl text-white/40 line-through",children:["",p]}),N>0&&s.jsxs("span",{className:"text-xs md:text-sm text-emerald-400 font-semibold bg-emerald-500/10 px-2 py-0.5 rounded-full",children:["Save ",N]})]})]}),s.jsxs("div",{className:"flex flex-wrap items-center gap-3 md:gap-4 text-xs md:text-sm",children:[s.jsxs("div",{className:"flex items-center gap-1.5 text-white/70",children:[s.jsx(oo,{className:"text-[10px]"}),s.jsx("span",{children:t.unit||"1 unit"})]}),t.quantity!==void 0&&s.jsxs("div",{className:"flex items-center gap-1.5 text-white/70",children:[s.jsx(ct,{className:"text-[10px] text-emerald-400"}),s.jsx("span",{className:t.quantity>0?"text-emerald-400":"text-red-400",children:t.quantity>0?`In Stock (${t.quantity})`:"Out of Stock"})]})]})]}),s.jsxs("div",{className:"bg-white/5 rounded-xl p-4 border border-white/10",children:[s.jsxs("h3",{className:"text-white/80 text-sm font-semibold mb-3 flex items-center gap-2",children:[s.jsx(Is,{className:"text-emerald-400 text-sm"}),"Return & Replacement Policy"]}),s.jsx("div",{className:"space-y-2",children:g==="non_returnable"?s.jsxs("div",{className:"flex items-start gap-3 p-3 bg-red-500/10 rounded-lg border border-red-500/20",children:[s.jsx(ss,{className:"text-red-400 text-base flex-shrink-0 mt-0.5"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"text-red-300 font-semibold text-sm mb-1",children:"Non-returnable"}),s.jsx("p",{className:"text-red-300/70 text-xs leading-relaxed",children:"This item cannot be returned or replaced once purchased."})]})]}):g==="replacement_available"?s.jsxs("div",{className:"flex items-start gap-3 p-3 bg-amber-500/10 rounded-lg border border-amber-500/20",children:[s.jsx(ct,{className:"text-amber-400 text-base flex-shrink-0 mt-0.5"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"text-amber-300 font-semibold text-sm mb-1",children:"Replacement Available"}),s.jsx("p",{className:"text-amber-300/70 text-xs leading-relaxed",children:"Replace if defective, damaged, or wrong item received."})]})]}):s.jsxs("div",{className:"flex items-start gap-3 p-3 bg-emerald-500/10 rounded-lg border border-emerald-500/20",children:[s.jsx(ct,{className:"text-emerald-400 text-base flex-shrink-0 mt-0.5"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"text-emerald-300 font-semibold text-sm mb-1",children:m}),s.jsx("p",{className:"text-emerald-300/70 text-xs leading-relaxed",children:g.includes("1h")?"Return or replace within 1 hour of delivery.":g.includes("24h")?"Return or replace within 24 hours of delivery.":g.includes("3d")?"Return or replace within 3 days of delivery.":"Return or replace as per store policy."})]})]})})]}),(t.barcode||t.packSize)&&s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[t.barcode&&s.jsxs("div",{className:"bg-white/5 rounded-lg p-3 border border-white/10",children:[s.jsx("p",{className:"text-white/40 text-xs mb-1",children:"Barcode"}),s.jsx("p",{className:"text-white text-sm font-medium",children:t.barcode})]}),t.packSize&&s.jsxs("div",{className:"bg-white/5 rounded-lg p-3 border border-white/10",children:[s.jsx("p",{className:"text-white/40 text-xs mb-1",children:"Pack Size"}),s.jsx("p",{className:"text-white text-sm font-medium",children:t.packSize})]})]}),s.jsx("div",{className:"pt-4 border-t border-white/10",children:f?s.jsx("button",{disabled:!0,className:"w-full py-4 bg-white/10 text-white/40 rounded-xl font-semibold cursor-not-allowed touch-manipulation",children:"Out of Stock"}):i>0?s.jsxs("div",{className:"flex items-center gap-3 md:gap-4",children:[s.jsxs("div",{className:"flex-1 flex items-center justify-between bg-emerald-500/20 rounded-xl p-2 border border-emerald-500/30",children:[s.jsx("button",{onClick:y=>{y.stopPropagation(),l(t.id,i-1)},className:"w-10 h-10 rounded-lg bg-emerald-500 text-white flex items-center justify-center active:bg-emerald-600 active:scale-95 transition-all touch-manipulation","aria-label":"Decrease quantity",children:s.jsx(gs,{className:"text-sm"})}),s.jsx("span",{className:"text-white font-bold text-lg min-w-[2rem] text-center",children:i}),s.jsx("button",{onClick:y=>{y.stopPropagation(),l(t.id,i+1)},className:"w-10 h-10 rounded-lg bg-emerald-500 text-white flex items-center justify-center active:bg-emerald-600 active:scale-95 transition-all touch-manipulation","aria-label":"Increase quantity",children:s.jsx(vt,{className:"text-sm"})})]}),s.jsxs("button",{onClick:y=>{y.stopPropagation(),n()},className:"px-5 md:px-6 py-4 bg-emerald-500 text-white rounded-xl font-semibold active:bg-emerald-600 active:scale-95 transition-all flex items-center gap-2 touch-manipulation shadow-lg shadow-emerald-500/30",children:[s.jsx(As,{}),s.jsx("span",{className:"hidden sm:inline",children:"View Cart"}),s.jsx("span",{className:"sm:hidden",children:"Cart"})]})]}):s.jsxs("button",{onClick:y=>{y.stopPropagation(),o(t)},className:"w-full py-4 bg-gradient-to-r from-emerald-500 to-cyan-500 text-white rounded-xl font-semibold active:opacity-90 active:scale-[0.98] transition-all flex items-center justify-center gap-2 shadow-lg shadow-emerald-500/30 touch-manipulation",children:[s.jsx(As,{}),s.jsx("span",{children:"Add to Cart"}),s.jsxs("span",{className:"font-bold",children:[" ",d]})]})})]})]})]})})},Mo=({store:t,isOpen:e,onClose:r,customerDistance:n,isWithinDeliveryRange:i})=>{const o=t?.businessName||t?.name||"Store";return!e||!t?null:s.jsxs(s.Fragment,{children:[s.jsx(_.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:r,className:"fixed inset-0 z-50 bg-black/60"}),s.jsx(_.div,{initial:{y:"100%"},animate:{y:0},exit:{y:"100%"},transition:{type:"spring",damping:30,stiffness:300},className:"fixed bottom-0 left-0 right-0 z-50 bg-[#111827] rounded-t-2xl max-h-[70vh] overflow-y-auto",children:s.jsxs("div",{className:"p-5",style:{paddingBottom:"calc(env(safe-area-inset-bottom) + 20px)"},children:[s.jsx("div",{className:"w-10 h-1 bg-white/20 rounded-full mx-auto mb-4"}),s.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[s.jsx("div",{className:"w-12 h-12 bg-white/[0.06] rounded-xl flex items-center justify-center overflow-hidden",children:t.logoUrl?s.jsx("img",{src:t.logoUrl,alt:"",className:"w-full h-full object-cover"}):s.jsx(ve,{className:"text-emerald-400"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"text-lg font-bold text-white",children:o}),s.jsx("p",{className:"text-white/50 text-sm",children:t.category||"General Store"})]}),s.jsx("button",{onClick:r,className:"w-8 h-8 rounded-full bg-white/[0.06] flex items-center justify-center",children:s.jsx(Ft,{className:"text-white/60 text-sm"})})]}),t.description&&s.jsx("p",{className:"text-white/60 text-sm mb-4",children:t.description}),s.jsxs("div",{className:"space-y-2",children:[t.deliveryEnabled!==!1&&!i&&n!==null&&s.jsxs("div",{className:"p-3 bg-red-500/10 rounded-xl border border-red-500/30",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx(me,{className:"text-red-400 text-sm"}),s.jsx("span",{className:"text-red-400 text-xs font-bold",children:"Out of Delivery Range"})]}),s.jsxs("p",{className:"text-red-400/80 text-xs",children:["You are ",s.jsxs("span",{className:"font-bold",children:[n," km"]})," away from this store. They only deliver within ",s.jsxs("span",{className:"font-bold",children:[t.deliveryRadius||10," km"]}),"."]}),t.pickupEnabled&&s.jsxs("p",{className:"text-amber-400 text-xs mt-2 flex items-center gap-1",children:[s.jsx(ve,{className:"text-xs"}),"Store pickup is still available!"]})]}),t.deliveryEnabled!==!1&&s.jsxs("div",{className:`p-3 rounded-xl border ${i?"bg-gradient-to-r from-emerald-500/10 to-cyan-500/10 border-emerald-500/20":"bg-white/[0.02] border-white/10"}`,children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(ut,{className:i?"text-emerald-400 text-sm":"text-white/40 text-sm"}),s.jsx("span",{className:i?"text-emerald-400 text-xs font-medium":"text-white/50 text-xs font-medium",children:"Delivery Info"})]}),!i&&s.jsx("span",{className:"text-[9px] text-red-400 bg-red-500/10 px-2 py-0.5 rounded-full",children:"Not Available"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[parseFloat(t.minOrderValue)>0&&s.jsxs("div",{className:"p-2 bg-white/[0.04] rounded-lg",children:[s.jsx("p",{className:"text-white/40 text-[9px]",children:"Min. Order"}),s.jsxs("p",{className:"text-white text-sm font-bold",children:["",t.minOrderValue]})]}),parseFloat(t.freeDeliveryAbove)>0&&s.jsxs("div",{className:"p-2 bg-emerald-500/10 rounded-lg border border-emerald-500/20",children:[s.jsx("p",{className:"text-emerald-400 text-[9px]",children:"Free Delivery"}),s.jsxs("p",{className:"text-emerald-400 text-sm font-bold",children:["Above ",t.freeDeliveryAbove]})]}),s.jsxs("div",{className:"p-2 bg-white/[0.04] rounded-lg",children:[s.jsx("p",{className:"text-white/40 text-[9px]",children:"Delivery Fee"}),s.jsx("p",{className:"text-white text-sm font-bold",children:t.distanceBasedFee?`${t.baseFee||20}+`:`${t.deliveryFee||20}`})]}),s.jsxs("div",{className:"p-2 bg-white/[0.04] rounded-lg",children:[s.jsx("p",{className:"text-white/40 text-[9px]",children:"Delivers within"}),s.jsxs("p",{className:"text-white text-sm font-bold",children:[t.deliveryRadius||5," km"]})]})]}),t.distanceBasedFee&&s.jsxs("p",{className:"text-white/40 text-[10px] mt-2",children:["* Delivery fee: ",t.baseFee||20," base + ",t.perKmFee||5,"/km after ",t.baseDistance||2,"km"]})]}),t.pickupEnabled&&s.jsxs("div",{className:"flex items-center gap-3 p-3 bg-purple-500/10 rounded-xl border border-purple-500/20",children:[s.jsx(ve,{className:"text-purple-400"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"text-purple-400 text-[10px]",children:"Store Pickup Available"}),s.jsx("p",{className:"text-white text-sm",children:"Skip delivery fee - pick up at store"})]})]}),s.jsxs("div",{className:"flex items-center gap-3 p-3 bg-white/[0.04] rounded-xl",children:[s.jsx(me,{className:"text-emerald-400"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"text-white/40 text-[10px]",children:"Address"}),s.jsx("p",{className:"text-white text-sm",children:t.address||"Not available"})]})]}),s.jsxs("div",{className:"flex items-center gap-3 p-3 bg-white/[0.04] rounded-xl",children:[s.jsx(we,{className:"text-blue-400"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"text-white/40 text-[10px]",children:"Hours"}),s.jsxs("p",{className:"text-white text-sm",children:[t.openTime||"9 AM"," - ",t.closeTime||"9 PM"]})]})]}),t.phone&&s.jsxs("a",{href:`tel:${t.phone}`,className:"flex items-center gap-3 p-3 bg-emerald-500/10 rounded-xl border border-emerald-500/30",children:[s.jsx(ft,{className:"text-emerald-400"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"text-emerald-400 text-[10px]",children:"Call Store"}),s.jsx("p",{className:"text-white text-sm font-medium",children:t.phone})]}),s.jsx(Ge,{className:"text-emerald-400 text-sm"})]})]})]})})]})},Do=(t,e,r,n)=>{const o=(r-t)*Math.PI/180,l=(n-e)*Math.PI/180,c=Math.sin(o/2)*Math.sin(o/2)+Math.cos(t*Math.PI/180)*Math.cos(r*Math.PI/180)*Math.sin(l/2)*Math.sin(l/2);return 6371*(2*Math.atan2(Math.sqrt(c),Math.sqrt(1-c)))},Oo=({storeId:t,onBack:e,onCartClick:r})=>{const[n,i]=a.useState(null),[o,l]=a.useState([]),[c,d]=a.useState(["All"]),[p,u]=a.useState("All"),[h,f]=a.useState(""),[g,m]=a.useState(!0),[N,x]=a.useState(!1),[y,L]=a.useState(!1),[M,b]=a.useState(null),[j,v]=a.useState(null),[w,E]=a.useState(null),[S,D]=a.useState(!0),{addToCart:O,updateQuantity:A,getItemQuantity:B,getCartTotals:T,cartStore:z}=Rt(),{itemCount:W,total:ee}=T(),H=n?.businessName||n?.name||"Store";a.useEffect(()=>{navigator.geolocation&&navigator.geolocation.getCurrentPosition(C=>{v({lat:C.coords.latitude,lng:C.coords.longitude})},C=>{console.log("Location not available:",C.message)},{enableHighAccuracy:!0,timeout:1e4})},[]),a.useEffect(()=>{if(n&&j){let C,I;if(n.location&&(C=n.location.latitude||n.location._lat,I=n.location.longitude||n.location._long),C&&I){const q=Do(j.lat,j.lng,C,I),$=Math.round(q*10)/10;E($);const de=n.deliveryRadius||10;D($<=de)}}},[n,j]),a.useEffect(()=>{(async()=>{if(t){m(!0);try{const[I,q,$]=await Promise.all([di(t),go(t),xo(t)]);i(I),l(q||[]),d(["All",...$||[]])}catch(I){console.error("Error:",I)}finally{m(!1)}}})()},[t]);const X=a.useMemo(()=>o.filter(C=>{const I=p==="All"||C.category===p,q=!h||C.name?.toLowerCase().includes(h.toLowerCase());return I&&q}),[o,p,h]),Y=C=>C==="All"?o.length:o.filter(I=>I.category===C).length,se=C=>{O(C,n)};if(g)return s.jsx("div",{className:"min-h-screen bg-[#0a0f1c] flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"w-10 h-10 border-2 border-emerald-500/30 border-t-emerald-500 rounded-full animate-spin mx-auto mb-3"}),s.jsx("p",{className:"text-white/50 text-sm",children:"Loading..."})]})});if(!n)return s.jsxs("div",{className:"min-h-screen bg-[#0a0f1c] flex flex-col items-center justify-center p-6",children:[s.jsx(ve,{className:"text-white/20 text-4xl mb-3"}),s.jsx("p",{className:"text-white/50 mb-4",children:"Store not found"}),s.jsx("button",{onClick:e,className:"px-6 py-2 bg-emerald-500 text-white rounded-lg text-sm font-medium",children:"Go Back"})]});const re=n.deliveryEnabled!==!1,U=n.pickupEnabled===!0;return!S&&w!==null&&!U&&re?s.jsx("div",{className:"min-h-screen bg-[#0a0f1c] flex flex-col items-center justify-center p-6",children:s.jsxs("div",{className:"max-w-sm text-center",children:[s.jsx("div",{className:"w-20 h-20 rounded-2xl overflow-hidden bg-white/[0.06] mx-auto mb-4",children:n.logoUrl?s.jsx("img",{src:n.logoUrl,alt:H,className:"w-full h-full object-cover"}):s.jsx("div",{className:"w-full h-full bg-gradient-to-br from-red-500/20 to-red-600/10 flex items-center justify-center",children:s.jsx(ve,{className:"text-red-400 text-2xl"})})}),s.jsx("h2",{className:"text-white font-bold text-xl mb-2",children:H}),s.jsx("p",{className:"text-white/50 text-sm mb-6",children:n.category||"General Store"}),s.jsx("div",{className:"w-16 h-16 bg-red-500/20 rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx(me,{className:"text-red-400 text-2xl"})}),s.jsx("h3",{className:"text-red-400 font-semibold text-lg mb-2",children:"Store Not Available"}),s.jsxs("p",{className:"text-white/60 text-sm mb-2",children:["You are ",s.jsxs("span",{className:"text-red-400 font-semibold",children:[w," km"]})," away from this store."]}),s.jsxs("p",{className:"text-white/50 text-sm mb-6",children:["This store only delivers within ",s.jsxs("span",{className:"text-white font-medium",children:[n.deliveryRadius||10," km"]})," and does not offer store pickup."]}),s.jsx("div",{className:"bg-white/[0.04] border border-white/10 rounded-xl p-4 mb-6",children:s.jsxs("div",{className:"flex items-center justify-center gap-6 text-sm",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-white/40 text-xs",children:"Delivery Range"}),s.jsxs("p",{className:"text-white font-semibold",children:[n.deliveryRadius||10," km"]})]}),s.jsx("div",{className:"w-px h-8 bg-white/10"}),s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-white/40 text-xs",children:"Your Distance"}),s.jsxs("p",{className:"text-red-400 font-semibold",children:[w," km"]})]}),s.jsx("div",{className:"w-px h-8 bg-white/10"}),s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-white/40 text-xs",children:"Store Pickup"}),s.jsx("p",{className:"text-red-400 font-semibold",children:"Not Available"})]})]})}),s.jsx("button",{onClick:e,className:"w-full py-3 bg-emerald-500 text-white rounded-xl font-semibold hover:bg-emerald-600 transition-colors",children:"Browse Other Stores"}),s.jsx("p",{className:"text-white/30 text-xs mt-4",children:"Try stores closer to your location"})]})}):s.jsxs("div",{className:"min-h-screen bg-[#0a0f1c]",children:[s.jsxs("header",{className:"fixed top-0 left-0 right-0 z-50 bg-[#111827] border-b border-white/[0.06]",style:{paddingTop:"env(safe-area-inset-top)"},children:[s.jsxs("div",{className:"flex items-center gap-3 px-3 lg:px-4 py-3",children:[s.jsx("button",{onClick:e,className:"w-9 h-9 rounded-full bg-white/[0.06] flex items-center justify-center hover:bg-white/[0.1] transition-colors",children:s.jsx(Oe,{className:"text-white text-sm"})}),s.jsx("div",{className:"w-10 h-10 rounded-xl overflow-hidden bg-white/[0.06] flex-shrink-0",children:n.logoUrl?s.jsx("img",{src:n.logoUrl,alt:H,className:"w-full h-full object-cover"}):s.jsx("div",{className:"w-full h-full bg-gradient-to-br from-emerald-500/20 to-emerald-600/10 flex items-center justify-center",children:s.jsx(ve,{className:"text-emerald-400"})})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-1.5",children:[s.jsx("h1",{className:"text-white font-bold text-sm sm:text-base truncate",children:H}),n.isVerified&&s.jsx(ii,{className:"text-emerald-400 flex-shrink-0 text-sm"})]}),s.jsx("p",{className:"text-white/50 text-xs truncate",children:n.category||"General Store"})]}),s.jsxs("div",{className:"hidden md:flex items-center gap-4",children:[s.jsxs("div",{className:"flex items-center gap-1.5",children:[s.jsx(ze,{className:"text-amber-400 text-xs"}),s.jsx("span",{className:"text-white text-sm font-medium",children:n.rating?.toFixed(1)||"0.0"})]}),s.jsx("div",{className:"w-px h-4 bg-white/[0.1]"}),s.jsxs("div",{className:"flex items-center gap-1.5",children:[s.jsx(we,{className:"text-emerald-400 text-xs"}),s.jsxs("span",{className:"text-white text-sm",children:[n.baseDeliveryTime||n.avgDeliveryTime||30," min"]})]}),s.jsx("div",{className:"w-px h-4 bg-white/[0.1]"}),s.jsxs("div",{className:"flex items-center gap-1.5",children:[s.jsx(He,{className:"text-blue-400 text-xs"}),s.jsxs("span",{className:"text-white text-sm",children:["",n.deliveryFee||20]})]}),parseFloat(n.freeDeliveryAbove)>0&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"w-px h-4 bg-white/[0.1]"}),s.jsxs("span",{className:"flex items-center gap-1.5 px-2.5 py-1 bg-emerald-500/10 rounded-full text-emerald-400 text-xs font-medium",children:[s.jsx(rs,{className:"text-xs"}),"Free delivery above ",n.freeDeliveryAbove]})]}),n.isActive&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"w-px h-4 bg-white/[0.1]"}),s.jsxs("span",{className:"flex items-center gap-1.5 px-2.5 py-1 bg-emerald-500/15 rounded-full text-emerald-400 text-xs font-medium border border-emerald-500/30",children:[s.jsx("span",{className:"w-1.5 h-1.5 bg-emerald-400 rounded-full animate-pulse"}),"Open Now"]})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{onClick:()=>x(!0),className:"w-9 h-9 rounded-full bg-white/[0.06] flex items-center justify-center hover:bg-white/[0.1] transition-colors",children:s.jsx(Xe,{className:"text-white/60 text-sm"})}),s.jsx("button",{onClick:()=>L(!y),className:"w-9 h-9 rounded-full bg-white/[0.06] flex items-center justify-center hover:bg-white/[0.1] transition-colors",children:s.jsx(oi,{className:y?"text-red-500 text-sm":"text-white/40 text-sm"})}),s.jsx("button",{className:"hidden sm:flex w-9 h-9 rounded-full bg-white/[0.06] items-center justify-center hover:bg-white/[0.1] transition-colors",children:s.jsx(co,{className:"text-white/60 text-sm"})})]})]}),s.jsxs("div",{className:"md:hidden flex items-center gap-3 px-3 pb-3 overflow-x-auto scrollbar-hide",children:[s.jsxs("div",{className:"flex items-center gap-1.5 flex-shrink-0",children:[s.jsx(ze,{className:"text-amber-400 text-[10px]"}),s.jsx("span",{className:"text-white text-xs font-medium",children:n.rating?.toFixed(1)||"0.0"})]}),s.jsx("div",{className:"w-px h-3 bg-white/[0.1]"}),s.jsxs("div",{className:"flex items-center gap-1.5 flex-shrink-0",children:[s.jsx(we,{className:"text-emerald-400 text-[10px]"}),s.jsxs("span",{className:"text-white text-xs",children:[n.baseDeliveryTime||n.avgDeliveryTime||30," min"]})]}),s.jsx("div",{className:"w-px h-3 bg-white/[0.1]"}),s.jsxs("div",{className:"flex items-center gap-1.5 flex-shrink-0",children:[s.jsx(He,{className:"text-blue-400 text-[10px]"}),s.jsxs("span",{className:"text-white text-xs",children:["",n.deliveryFee||20]})]}),parseFloat(n.freeDeliveryAbove)>0&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"w-px h-3 bg-white/[0.1]"}),s.jsxs("span",{className:"flex items-center gap-1 px-2 py-0.5 bg-emerald-500/10 rounded-full text-emerald-400 text-[10px] font-medium flex-shrink-0",children:[s.jsx(rs,{className:"text-[8px]"}),"Free >",n.freeDeliveryAbove]})]}),n.isActive&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"w-px h-3 bg-white/[0.1]"}),s.jsxs("span",{className:"flex items-center gap-1 px-2 py-0.5 bg-emerald-500/15 rounded-full text-emerald-400 text-[10px] font-medium border border-emerald-500/30 flex-shrink-0",children:[s.jsx("span",{className:"w-1 h-1 bg-emerald-400 rounded-full animate-pulse"}),"Open Now"]})]}),w!==null&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"w-px h-3 bg-white/[0.1]"}),s.jsxs("span",{className:"flex items-center gap-1 px-2 py-0.5 bg-blue-500/15 rounded-full text-blue-400 text-[10px] font-medium flex-shrink-0",children:[s.jsx(me,{className:"text-[8px]"}),w," km away"]})]})]}),n.deliveryEnabled!==!1&&!S&&w!==null&&s.jsxs("div",{className:"mx-3 mb-2 p-2.5 bg-red-500/10 border border-red-500/30 rounded-xl flex items-center gap-2",children:[s.jsx("div",{className:"w-8 h-8 bg-red-500/20 rounded-lg flex items-center justify-center flex-shrink-0",children:s.jsx(me,{className:"text-red-400 text-sm"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"text-red-400 text-xs font-semibold",children:"Out of Delivery Range"}),s.jsxs("p",{className:"text-red-400/70 text-[10px]",children:["You are ",w," km away. Store delivers within ",n.deliveryRadius||10," km.",n.pickupEnabled&&" Store pickup is still available."]})]})]}),s.jsx("div",{className:"px-3 lg:px-4 pb-3 lg:ml-52 xl:ml-56",children:s.jsxs("div",{className:"relative",children:[s.jsx(Ve,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-white/40 text-sm"}),s.jsx("input",{type:"text",placeholder:`Search in ${H}`,value:h,onChange:C=>f(C.target.value),className:"w-full h-9 pl-9 pr-9 bg-white/[0.06] rounded-lg text-white text-sm placeholder-white/40 focus:outline-none focus:ring-1 focus:ring-emerald-500/50 focus:bg-white/[0.08] transition-colors"}),h&&s.jsx("button",{onClick:()=>f(""),className:"absolute right-3 top-1/2 -translate-y-1/2",children:s.jsx(Ft,{className:"text-white/40 text-sm hover:text-white/60"})})]})})]}),s.jsxs("main",{className:"pt-[140px] md:pt-[110px]",children:[s.jsx("div",{className:"lg:hidden sticky top-[140px] md:top-[110px] z-20 bg-[#0a0f1c]/95 backdrop-blur-md border-b border-white/[0.06]",children:s.jsx("div",{className:"flex gap-2 px-3 py-2.5 overflow-x-auto scrollbar-hide",children:c.map(C=>s.jsxs("button",{onClick:()=>u(C),className:`flex-shrink-0 px-3 py-1.5 rounded-full text-[11px] font-medium transition-all ${p===C?"bg-emerald-500 text-white shadow-md shadow-emerald-500/20":"bg-[#151c2c] text-white/60 border border-white/[0.08] hover:border-white/20"}`,children:[s.jsx("span",{className:"mr-1",children:pr(C)}),C,s.jsxs("span",{className:"ml-1 opacity-60",children:["(",Y(C),")"]})]},C))})}),s.jsxs("div",{className:"flex-1 relative",children:[s.jsxs("aside",{className:"hidden lg:flex flex-col fixed left-0 top-[110px] bottom-0 w-52 xl:w-56 border-r border-white/[0.06] bg-[#0a0f1c] z-30 overflow-y-auto",children:[s.jsxs("div",{className:"p-3 flex-1",children:[s.jsx("h3",{className:"text-white/50 text-[10px] font-semibold uppercase tracking-wider mb-3 px-2",children:"Categories"}),s.jsx("div",{className:"space-y-1",children:c.map(C=>s.jsxs("button",{onClick:()=>u(C),className:`w-full flex items-center gap-2.5 px-3 py-2.5 rounded-lg text-left transition-all ${p===C?"bg-emerald-500/15 text-emerald-400 border border-emerald-500/30":"text-white/70 hover:bg-white/[0.04] hover:text-white"}`,children:[s.jsx("span",{className:"text-base",children:pr(C)}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:`text-sm font-medium truncate ${p===C?"text-emerald-400":""}`,children:C}),s.jsxs("p",{className:"text-[10px] text-white/40",children:[Y(C)," items"]})]}),p===C&&s.jsx("div",{className:"w-1.5 h-1.5 bg-emerald-400 rounded-full"})]},C))})]}),s.jsx("div",{className:"h-20 flex-shrink-0"})]}),s.jsxs("div",{className:"lg:ml-52 xl:ml-56",children:[s.jsx("div",{className:"sticky top-0 z-20 bg-[#0a0f1c]/95 backdrop-blur-md px-3 lg:px-4 py-3 flex items-center justify-between border-b border-white/[0.06]",children:s.jsxs("div",{children:[s.jsx("h2",{className:"text-white font-semibold text-sm",children:p==="All"?"All Products":p}),s.jsxs("p",{className:"text-white/40 text-xs",children:[X.length," products"]})]})}),s.jsxs("div",{className:"p-3 lg:p-4",children:[X.length>0?s.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-4 xl:grid-cols-5 2xl:grid-cols-6 gap-2 sm:gap-3",children:X.map(C=>s.jsx(Eo,{product:C,cartQuantity:B(C.id),onAdd:se,onUpdate:A,onClick:I=>b(I),storeReturnPolicy:n?.returnPolicyDefault},C.id))}):s.jsxs("div",{className:"flex flex-col items-center justify-center py-20",children:[s.jsx(Ve,{className:"text-white/20 text-2xl mb-3"}),s.jsx("p",{className:"text-white/50 text-sm",children:"No products found"})]}),s.jsx("div",{className:"h-24"})]})]})]})]}),s.jsx(Ie,{children:W>0&&z?.id===t&&s.jsx(_.div,{initial:{y:100},animate:{y:0},exit:{y:100},className:"fixed bottom-0 left-0 right-0 z-40 bg-[#0a0f1c]/95 backdrop-blur-md border-t border-white/[0.06]",style:{paddingBottom:"env(safe-area-inset-bottom)"},children:s.jsx("div",{className:"p-3 lg:pl-56 xl:pl-60",children:s.jsxs("button",{onClick:r,className:"w-full bg-emerald-500 rounded-xl p-3 flex items-center justify-between shadow-xl shadow-emerald-500/30 hover:bg-emerald-600 transition-colors",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-9 h-9 bg-white/20 rounded-lg flex items-center justify-center",children:s.jsx(As,{className:"text-white"})}),s.jsxs("div",{className:"text-left",children:[s.jsxs("p",{className:"text-white font-semibold",children:[W," item",W>1?"s":""]}),s.jsx("p",{className:"text-white/70 text-xs",children:H})]})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("span",{className:"text-white font-bold text-lg",children:["",ee]}),s.jsx("div",{className:"w-8 h-8 bg-white/20 rounded-lg flex items-center justify-center",children:s.jsx(Ge,{className:"text-white"})})]})]})})})}),s.jsx(Ie,{children:N&&s.jsx(Mo,{store:n,isOpen:N,onClose:()=>x(!1),customerDistance:w,isWithinDeliveryRange:S})}),s.jsx(Po,{product:M,store:n,isOpen:!!M,onClose:()=>b(null),cartQuantity:M?B(M.id):0,onAdd:se,onUpdate:A,storeReturnPolicy:n?.returnPolicyDefault})]})};var is;(function(t){t.Heavy="HEAVY",t.Medium="MEDIUM",t.Light="LIGHT"})(is||(is={}));var Rs;(function(t){t.Success="SUCCESS",t.Warning="WARNING",t.Error="ERROR"})(Rs||(Rs={}));const mi=Vs("Haptics",{web:()=>Hs(()=>import("./web-CycTsNy7.js"),__vite__mapDeps([2,3,4,1])).then(t=>new t.HapticsWeb)}),Ao=Object.freeze(Object.defineProperty({__proto__:null,Haptics:mi,get ImpactStyle(){return is},get NotificationType(){return Rs}},Symbol.toStringTag,{value:"Module"})),js=async()=>{try{await mi.impact({style:is.Light})}catch{}},Io=({product:t,cartQuantity:e,onAdd:r,onUpdate:n,onStoreClick:i})=>{const o=t.sellingPrice||t.price||0,l=t.mrp||o;return s.jsxs("div",{className:"bg-[#141c2e]/50 backdrop-blur-xl rounded-xl border border-white/10/50 p-3 flex gap-3",children:[s.jsx("div",{className:"w-20 h-20 bg-[#141c2e] rounded-lg flex-shrink-0 overflow-hidden border border-white/10/50",children:t.imageUrl||t.image?s.jsx("img",{src:t.imageUrl||t.image,alt:t.name,className:"w-full h-full object-cover"}):s.jsx("div",{className:"w-full h-full flex items-center justify-center text-2xl",children:""})}),s.jsxs("div",{className:"flex-1 min-w-0 flex flex-col justify-between",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-white text-sm line-clamp-2",children:t.name}),s.jsxs("button",{onClick:()=>i(t.storeId),className:"flex items-center gap-1 text-xs text-[#05E06C]400 mt-1",children:[s.jsx(ve,{className:"text-[10px]"}),t.storeName,s.jsx(me,{className:"text-[10px] ml-1"}),t.storeDistance,"km"]})]}),s.jsxs("div",{className:"flex items-center justify-between mt-2",children:[s.jsxs("div",{children:[s.jsxs("span",{className:"font-bold text-white",children:["",o]}),l>o&&s.jsxs("span",{className:"text-xs text-slate-500 line-through ml-1",children:["",l]})]}),e>0?s.jsxs("div",{className:"flex items-center gap-2 bg-gradient-to-r from-emerald-500 to-teal-500 rounded-lg overflow-hidden shadow-lg shadow-emerald-500/20",children:[s.jsx("button",{onClick:()=>{js(),n(t.id,e-1)},className:"w-7 h-7 flex items-center justify-center text-white",children:s.jsx(gs,{className:"text-xs"})}),s.jsx("span",{className:"text-white font-semibold min-w-[16px] text-center text-sm",children:e}),s.jsx("button",{onClick:()=>{js(),n(t.id,e+1)},className:"w-7 h-7 flex items-center justify-center text-white",children:s.jsx(vt,{className:"text-xs"})})]}):s.jsx("button",{onClick:()=>{js(),r(t)},className:"px-3 py-1.5 bg-gradient-to-r from-emerald-500 to-teal-500 text-white rounded-lg text-sm font-semibold shadow-lg shadow-emerald-500/20",children:"ADD"})]})]})]})},Ro=({category:t,onClick:e})=>s.jsxs("button",{onClick:()=>e(t.name),className:`flex items-center gap-2 px-3 py-2 rounded-xl bg-gradient-to-br ${t.color} text-white text-sm font-medium whitespace-nowrap border border-white/10 shadow-lg`,children:[s.jsx("span",{children:t.icon}),t.name]}),To=({location:t,onBack:e,onStoreSelect:r})=>{const[n,i]=a.useState(""),[o,l]=a.useState([]),[c,d]=a.useState([]),[p,u]=a.useState([]),[h,f]=a.useState(!1),[g,m]=a.useState(!1),{addToCart:N,updateQuantity:x,getItemQuantity:y,cartStore:L}=Rt();a.useEffect(()=>{(async()=>{if(t?.lat&&t?.lng){const E=await yo(t.lat,t.lng,5);d(E)}const w=localStorage.getItem("flyp_recent_searches");if(w)try{u(JSON.parse(w).slice(0,5))}catch{}})()},[t]);const M=a.useCallback(async v=>{if(!(!v.trim()||!t?.lat)){f(!0),m(!0);try{const w=await vo(v,t.lat,t.lng,5);l(w);const E=[v,...p.filter(S=>S!==v)].slice(0,5);u(E),localStorage.setItem("flyp_recent_searches",JSON.stringify(E))}catch(w){console.error("Search error:",w)}finally{f(!1)}}},[t,p]),b=()=>{n.trim()&&M(n)},j=v=>{const w={id:v.storeId,businessName:v.storeName,deliveryFee:20,minOrderValue:100},E=N(v,w);!E.success&&E.error==="DIFFERENT_STORE"&&alert(E.message)};return s.jsxs("div",{className:"min-h-screen bg-[#060D2D]",children:[s.jsx("div",{className:"bg-[#060D2D]/80 backdrop-blur-xl sticky top-0 z-10 border-b border-slate-800",style:{paddingTop:"env(safe-area-inset-top)"},children:s.jsxs("div",{className:"flex items-center gap-3 px-4 py-3",children:[s.jsx("button",{onClick:e,className:"w-10 h-10 rounded-full bg-[#141c2e] border border-white/10 flex items-center justify-center",children:s.jsx(Oe,{className:"text-white/60"})}),s.jsxs("div",{className:"flex-1 relative",children:[s.jsx(Ve,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-500"}),s.jsx("input",{type:"text",placeholder:"Search products...",value:n,onChange:v=>i(v.target.value),onKeyDown:v=>v.key==="Enter"&&b(),autoFocus:!0,className:"w-full pl-10 pr-10 py-2.5 bg-[#141c2e] border border-white/10 rounded-xl text-sm text-white placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-emerald-500"}),n&&s.jsx("button",{onClick:()=>{i(""),l([]),m(!1)},className:"absolute right-3 top-1/2 -translate-y-1/2",children:s.jsx(Ft,{className:"text-slate-500"})})]}),s.jsx("button",{onClick:b,className:"px-4 py-2.5 bg-gradient-to-r from-emerald-500 to-teal-500 text-white rounded-xl text-sm font-semibold shadow-lg shadow-emerald-500/20",children:"Search"})]})}),s.jsxs("div",{className:"px-4 py-4",children:[!g&&s.jsxs(s.Fragment,{children:[p.length>0&&s.jsxs("div",{className:"mb-6",children:[s.jsx("h3",{className:"text-sm font-semibold text-white mb-3",children:"Recent Searches"}),s.jsx("div",{className:"space-y-2",children:p.map((v,w)=>s.jsxs("button",{onClick:()=>{i(v),M(v)},className:"flex items-center gap-3 w-full text-left py-2",children:[s.jsx(ro,{className:"text-slate-500"}),s.jsx("span",{className:"text-white/70",children:v})]},w))})]}),c.length>0&&s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-semibold text-white mb-3",children:"Browse by Category"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:c.map((v,w)=>s.jsx(Ro,{category:v,onClick:E=>{i(E),M(E)}},w))})]})]}),h&&s.jsx("div",{className:"flex items-center justify-center py-12",children:s.jsx("div",{className:"w-10 h-10 rounded-full border-4 border-emerald-500 border-t-transparent animate-spin"})}),g&&!h&&s.jsxs(s.Fragment,{children:[s.jsxs("p",{className:"text-sm text-white/60 mb-4",children:[o.length,' results for "',n,'"']}),o.length>0?s.jsx("div",{className:"space-y-3",children:o.map(v=>s.jsx(Io,{product:v,cartQuantity:y(v.id),onAdd:j,onUpdate:x,onStoreClick:r},`${v.storeId}-${v.id}`))}):s.jsxs("div",{className:"text-center py-12",children:[s.jsx("div",{className:"w-16 h-16 rounded-full bg-[#141c2e] border border-white/10 flex items-center justify-center mx-auto mb-4",children:s.jsx(Ve,{className:"text-white/30 text-2xl"})}),s.jsx("p",{className:"text-white/60 mb-2",children:"No products found"}),s.jsx("p",{className:"text-sm text-slate-500",children:"Try a different search term"})]})]})]}),s.jsx("div",{className:"h-24"})]})},_o=({item:t,onUpdate:e,onRemove:r})=>s.jsxs("div",{className:"flex items-center gap-3 py-3 border-b border-white/[0.06] last:border-0",children:[s.jsx("div",{className:"w-14 h-14 bg-white rounded-lg flex-shrink-0 overflow-hidden",children:t.image?s.jsx("img",{src:t.image,alt:t.name,className:"w-full h-full object-contain p-1"}):s.jsx("div",{className:"w-full h-full flex items-center justify-center text-xl bg-gray-100",children:""})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-1.5 flex-wrap",children:[s.jsx("h3",{className:"font-medium text-white text-sm leading-tight line-clamp-1",children:t.name}),t.offerLabel&&s.jsx("span",{className:"px-1.5 py-0.5 bg-amber-500/20 text-amber-300 text-[10px] rounded flex-shrink-0",children:t.offerLabel})]}),s.jsx("p",{className:"text-xs text-white/40 mt-0.5",children:t.unit||"1 unit"}),s.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[s.jsxs("span",{className:"text-white font-bold text-sm",children:["",t.price*t.quantity]}),t.mrp!=null&&t.mrp>t.price&&s.jsxs("span",{className:"text-[10px] text-white/40 line-through",children:["",(t.mrp||t.price)*t.quantity]}),t.quantity>1&&s.jsxs("span",{className:"text-[10px] text-white/40",children:["",t.price,"  ",t.quantity]})]})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("button",{onClick:()=>t.quantity===1?r(t.productId):e(t.productId,t.quantity-1),className:`w-7 h-7 rounded-md flex items-center justify-center transition-colors ${t.quantity===1?"bg-red-500/20 text-red-400":"bg-white/[0.06] text-white/60 hover:bg-white/[0.1]"}`,children:t.quantity===1?s.jsx(li,{className:"text-[10px]"}):s.jsx(gs,{className:"text-[10px]"})}),s.jsx("span",{className:"font-bold text-white text-sm w-6 text-center",children:t.quantity}),s.jsx("button",{onClick:()=>e(t.productId,t.quantity+1),className:"w-7 h-7 rounded-md bg-emerald-500/20 text-emerald-400 flex items-center justify-center hover:bg-emerald-500/30 transition-colors",children:s.jsx(vt,{className:"text-[10px]"})})]})]}),Fo=({onBack:t,onCheckout:e})=>{const{cartItems:r,cartStore:n,updateQuantity:i,removeFromCart:o,clearCart:l,getCartTotals:c}=Rt(),{subtotal:d,deliveryFee:p,baseDeliveryFee:u,platformFee:h,total:f,itemCount:g,savings:m,meetsMinOrder:N,freeDeliveryAbove:x,qualifiesForFreeDelivery:y,amountForFreeDelivery:L}=c(),[M,b]=a.useState(!1),[j,v]=a.useState(!0),w=n?.minOrder||0,E=w>0?Math.max(0,w-d):0,S=w===0||d>=w,D=a.useMemo(()=>M||r.length<=5?r:r.slice(0,5),[r,M]),O=r.length-5;return r.length===0?s.jsxs("div",{className:"min-h-screen bg-[#0a0f1c] flex flex-col",children:[s.jsx("header",{className:"fixed top-0 left-0 right-0 z-50 bg-[#111827] border-b border-white/[0.06]",style:{paddingTop:"env(safe-area-inset-top)"},children:s.jsxs("div",{className:"flex items-center gap-3 px-4 py-3",children:[s.jsx("button",{onClick:t,className:"w-9 h-9 rounded-full bg-white/[0.06] flex items-center justify-center",children:s.jsx(Oe,{className:"text-white text-sm"})}),s.jsx("h1",{className:"font-bold text-white text-lg",children:"My Cart"})]})}),s.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center px-6 pt-20",children:[s.jsx("div",{className:"w-24 h-24 rounded-2xl bg-[#151c2c] border border-white/[0.08] flex items-center justify-center mb-4",children:s.jsx(ns,{className:"text-emerald-400 text-4xl"})}),s.jsx("h2",{className:"text-xl font-bold text-white mb-2",children:"Your cart is empty"}),s.jsx("p",{className:"text-white/50 text-center mb-6 text-sm",children:"Explore nearby stores and add items to your cart"}),s.jsx("button",{onClick:t,className:"px-6 py-3 bg-emerald-500 text-white font-semibold rounded-xl",children:"Start Shopping"})]})]}):s.jsxs("div",{className:"min-h-screen bg-[#0a0f1c]",children:[s.jsxs("header",{className:"fixed top-0 left-0 right-0 z-50 bg-[#111827] border-b border-white/[0.06]",style:{paddingTop:"env(safe-area-inset-top)"},children:[s.jsxs("div",{className:"flex items-center justify-between px-4 py-3",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("button",{onClick:t,className:"w-9 h-9 rounded-full bg-white/[0.06] flex items-center justify-center",children:s.jsx(Oe,{className:"text-white text-sm"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"font-bold text-white text-base",children:"My Cart"}),s.jsxs("p",{className:"text-xs text-white/50",children:[g," items  ",d]})]})]}),s.jsx("button",{onClick:()=>{window.confirm("Clear all items from cart?")&&l()},className:"text-red-400 text-xs font-semibold px-3 py-1.5 rounded-lg hover:bg-red-500/10 transition-colors",children:"Clear All"})]}),n&&s.jsx("div",{className:"px-4 pb-3",children:s.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[s.jsx("div",{className:"w-6 h-6 rounded-md bg-emerald-500/20 flex items-center justify-center",children:s.jsx(ve,{className:"text-emerald-400 text-xs"})}),s.jsx("span",{className:"text-white font-medium truncate",children:n.name||n.businessName}),s.jsx("span",{className:"text-white/40",children:""}),s.jsxs("span",{className:"text-white/50 text-xs",children:[n.avgDeliveryTime||30," min"]})]})})]}),s.jsxs("main",{className:"pt-[110px] pb-[220px]",children:[s.jsx("div",{className:"px-4",children:s.jsxs("div",{className:"bg-[#151c2c] rounded-xl border border-white/[0.06] overflow-hidden",children:[s.jsxs("div",{className:"px-4 py-3 border-b border-white/[0.06] flex items-center justify-between bg-white/[0.02]",children:[s.jsxs("span",{className:"text-white font-medium text-sm",children:[r.length," Items"]}),r.length>5&&s.jsxs("button",{onClick:()=>b(!M),className:"text-emerald-400 text-xs font-medium flex items-center gap-1",children:[M?"Show Less":`+${O} more`,M?s.jsx(ur,{className:"text-[10px]"}):s.jsx(Os,{className:"text-[10px]"})]})]}),s.jsx("div",{className:"px-4 divide-y divide-white/[0.04]",children:D.map(A=>s.jsx(_o,{item:A,onUpdate:i,onRemove:o},A.productId))}),!M&&r.length>5&&s.jsxs("button",{onClick:()=>b(!0),className:"w-full py-3 text-center text-emerald-400 text-sm font-medium border-t border-white/[0.06] bg-white/[0.02] hover:bg-white/[0.04] transition-colors",children:["View all ",r.length," items"]})]})}),s.jsx("div",{className:"px-4 mt-4",children:s.jsxs("button",{className:"w-full bg-[#151c2c] rounded-xl p-3 flex items-center gap-3 border border-dashed border-emerald-500/30 hover:border-emerald-500/50 transition-colors",children:[s.jsx("div",{className:"w-9 h-9 rounded-lg bg-emerald-500/10 flex items-center justify-center",children:s.jsx(xs,{className:"text-emerald-400 text-sm"})}),s.jsxs("div",{className:"flex-1 text-left",children:[s.jsx("p",{className:"font-medium text-white text-sm",children:"Apply Coupon"}),s.jsx("p",{className:"text-xs text-white/40",children:"Save more on your order"})]}),s.jsx(Ge,{className:"text-white/30 text-sm"})]})}),s.jsx("div",{className:"px-4 mt-4",children:s.jsxs("div",{className:"bg-[#151c2c] rounded-xl border border-white/[0.06] overflow-hidden",children:[s.jsxs("button",{onClick:()=>v(!j),className:"w-full px-4 py-3 flex items-center justify-between bg-white/[0.02]",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-7 h-7 rounded-md bg-amber-500/20 flex items-center justify-center",children:s.jsx(Ms,{className:"text-amber-400 text-sm"})}),s.jsx("span",{className:"font-medium text-white text-sm",children:"Bill Details"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("span",{className:"text-white font-bold",children:["",f]}),j?s.jsx(ur,{className:"text-white/40 text-xs"}):s.jsx(Os,{className:"text-white/40 text-xs"})]})]}),s.jsx(Ie,{children:j&&s.jsx(_.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.2},className:"overflow-hidden",children:s.jsxs("div",{className:"px-4 pb-4 pt-2 space-y-2 text-sm",children:[s.jsxs("div",{className:"flex justify-between text-white/60",children:[s.jsx("span",{children:"Item Total"}),s.jsxs("span",{className:"text-white",children:["",d]})]}),s.jsxs("div",{className:"flex justify-between text-white/60",children:[s.jsx("span",{children:"Delivery Fee"}),y?s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("span",{className:"text-white/40 line-through text-xs",children:["",u]}),s.jsx("span",{className:"text-emerald-400 font-medium",children:"FREE"})]}):s.jsxs("span",{className:"text-white",children:["",p]})]}),s.jsxs("div",{className:"flex justify-between text-white/60",children:[s.jsx("span",{children:"Platform Fee"}),s.jsxs("span",{className:"text-white",children:["",h]})]}),y&&u>0&&s.jsxs("div",{className:"flex justify-between text-emerald-400",children:[s.jsx("span",{children:"Free Delivery Savings"}),s.jsxs("span",{children:["-",u]})]}),m>0&&s.jsxs("div",{className:"flex justify-between text-emerald-400",children:[s.jsx("span",{children:"Product Savings"}),s.jsxs("span",{children:["-",m]})]}),s.jsxs("div",{className:"flex justify-between pt-2 border-t border-white/[0.06] font-bold",children:[s.jsx("span",{className:"text-white",children:"To Pay"}),s.jsxs("span",{className:"text-white text-base",children:["",f]})]})]})})})]})}),!S&&w>0&&s.jsx("div",{className:"px-4 mt-4",children:s.jsxs("div",{className:"bg-amber-500/10 border border-amber-500/30 rounded-xl p-3 flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-lg bg-amber-500/20 flex items-center justify-center",children:s.jsx(ns,{className:"text-amber-400"})}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("p",{className:"font-semibold text-amber-400 text-sm",children:["Add ",E," more"]}),s.jsxs("p",{className:"text-xs text-amber-400/70",children:["Minimum order is ",w]})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("p",{className:"text-xs text-white/40",children:"Current"}),s.jsxs("p",{className:"text-sm font-bold text-white",children:["",d]})]})]})}),x>0&&s.jsx("div",{className:"px-4 mt-4",children:y?s.jsxs("div",{className:"bg-emerald-500/10 border border-emerald-500/30 rounded-xl p-3 flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-lg bg-emerald-500 flex items-center justify-center",children:s.jsx(rs,{className:"text-white"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"font-semibold text-emerald-400 text-sm",children:"Free Delivery Unlocked!"}),s.jsxs("p",{className:"text-xs text-emerald-400/70",children:["You saved ",u," on delivery"]})]}),s.jsx("div",{className:"px-2 py-1 bg-emerald-500/20 rounded-lg",children:s.jsx("span",{className:"text-emerald-400 text-xs font-bold",children:"FREE"})})]}):s.jsxs("div",{className:"bg-blue-500/10 border border-blue-500/30 rounded-xl p-3",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[s.jsx("div",{className:"w-8 h-8 rounded-lg bg-blue-500/20 flex items-center justify-center",children:s.jsx(ut,{className:"text-blue-400 text-sm"})}),s.jsx("div",{className:"flex-1",children:s.jsxs("p",{className:"text-blue-400 text-sm font-medium",children:["Add ",L," more for free delivery"]})}),s.jsxs("span",{className:"text-white/40 text-xs",children:["",x]})]}),s.jsx("div",{className:"h-1.5 bg-white/10 rounded-full overflow-hidden",children:s.jsx("div",{className:"h-full bg-gradient-to-r from-blue-500 to-blue-400 rounded-full transition-all duration-300",style:{width:`${Math.min(d/x*100,100)}%`}})})]})}),m>0&&s.jsx("div",{className:"px-4 mt-4",children:s.jsxs("div",{className:"bg-emerald-500/10 border border-emerald-500/20 rounded-xl p-3 flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-lg bg-emerald-500 flex items-center justify-center",children:s.jsx(Ms,{className:"text-white"})}),s.jsxs("div",{children:[s.jsxs("p",{className:"font-semibold text-emerald-400 text-sm",children:["You're saving ",m]}),s.jsx("p",{className:"text-xs text-emerald-400/70",children:"on this order"})]})]})})]}),s.jsxs("div",{className:"fixed left-0 right-0 z-40 px-4 pb-3",style:{bottom:"calc(80px + env(safe-area-inset-bottom))"},children:[!S&&w>0&&s.jsxs("div",{className:"mb-2 bg-[#151c2c] rounded-xl p-2 border border-amber-500/30",children:[s.jsxs("div",{className:"flex items-center justify-between text-xs mb-1",children:[s.jsxs("span",{className:"text-amber-400",children:["",d," / ",w]}),s.jsxs("span",{className:"text-white/50",children:["Add ",E," more"]})]}),s.jsx("div",{className:"h-1.5 bg-white/10 rounded-full overflow-hidden",children:s.jsx("div",{className:"h-full bg-gradient-to-r from-amber-500 to-amber-400 rounded-full transition-all duration-300",style:{width:`${Math.min(d/w*100,100)}%`}})})]}),s.jsxs("button",{onClick:S?e:void 0,disabled:!S,className:`w-full py-4 rounded-xl font-bold flex items-center justify-center gap-3 transition-colors ${S?"bg-emerald-500 hover:bg-emerald-600 text-white shadow-xl shadow-emerald-500/40":"bg-slate-700 text-white/40 cursor-not-allowed"}`,children:[s.jsx("span",{children:S?"Proceed to Checkout":`Add ${E} more`}),s.jsxs("span",{className:`px-3 py-1 rounded-lg text-sm font-semibold ${S?"bg-white/20":"bg-white/10"}`,children:["",d]})]})]})]})},Bo=async t=>{try{const{customerId:e,customerName:r,customerPhone:n,storeId:i,storeName:o,storePhone:l,items:c,subtotal:d,discountAmount:p=0,appliedOffer:u=null,deliveryFee:h,platformFee:f,total:g,orderType:m="delivery",deliveryAddress:N,deliverySlot:x,customerDistance:y,isScheduledDelivery:L,deliveryDate:M,deliveryDateLabel:b,pickupSlot:j,pickupDate:v,pickupDateLabel:w,pickupInstructions:E,scheduledTime:S,paymentMethod:D,payNow:O=g,payLater:A=0,paymentDueDate:B,specialInstructions:T}=t,z=`ORD${Date.now().toString(36).toUpperCase()}`;let W="pending";D==="UPI"?W="paid":D==="PAY_LATER"?W="pay_later":D==="PARTIAL"&&(W="partial_paid");const ee={orderNumber:z,customerId:e,customerName:r,customerPhone:n,storeId:i,storeName:o,storePhone:l,items:c,subtotal:d,discountAmount:p,appliedOffer:u?{type:u.type,value:u.value,minOrderValue:u.minOrderValue}:null,deliveryFee:h,platformFee:f,total:g,orderType:m,deliveryAddress:m==="delivery"?N:null,deliverySlot:m==="delivery"?x:null,customerDistance:m==="delivery"?y:null,isScheduledDelivery:m==="delivery"?!!L:!1,deliveryDate:m==="delivery"&&L?M:null,deliveryDateLabel:m==="delivery"&&L?b:null,pickupSlot:m==="pickup"?j:null,pickupDate:m==="pickup"?v:null,pickupDateLabel:m==="pickup"?w:null,pickupInstructions:m==="pickup"?E:null,scheduledTime:S||null,paymentMethod:D,paymentStatus:W,payNow:O,payLater:A,paymentDueDate:B||null,amountPaid:D==="PAY_LATER"?0:O,amountDue:A,status:"pending",statusHistory:{pending:Pe()},specialInstructions:T||"",deliveryPartner:null,deliveryPartnerPhone:null,estimatedDeliveryMinutes:null,createdAt:Pe(),updatedAt:Pe()},H=await $s(Me(he,"customerOrders"),ee);return await Gn(Ee(he,"stores",i,"customerOrders",H.id),{...ee,orderId:H.id}),{success:!0,orderId:H.id,orderNumber:z}}catch(e){return console.error("Error placing order:",e),{success:!1,error:e.message}}},zo=async(t,e=20)=>{try{const r=Me(he,"customerOrders"),n=fs(r,zs("customerId","==",t),Us(e*2)),o=(await gt(n)).docs.map(l=>({id:l.id,...l.data(),createdAt:l.data().createdAt?.toDate?.()||new Date}));return o.sort((l,c)=>c.createdAt-l.createdAt),o.slice(0,e)}catch(r){throw console.error("Error fetching orders:",r),r}},Uo=(t,e)=>{const r=Ee(he,"customerOrders",t);return Zn(r,n=>{n.exists()&&e({id:n.id,...n.data(),createdAt:n.data().createdAt?.toDate?.()||new Date})},n=>{console.error("Error in order subscription:",n)})},$o=async(t,e)=>{try{const{storeRating:r,storeReview:n,deliveryPersonRating:i,deliveryPersonReview:o,deliveryPersonName:l,deliveryPersonId:c}=e,d=Ee(he,"customerOrders",t),p=await mt(d);if(!p.exists())return{success:!1,error:"Order not found"};const u=p.data(),h={ratedAt:Pe()};if(r!==void 0&&(h.storeRating=r,n&&(h.storeReview=n)),u.orderType==="delivery"&&i!==void 0&&(h.deliveryPersonRating=i,o&&(h.deliveryPersonReview=o),l&&(h.deliveryPersonName=l),c&&(h.deliveryPersonId=c)),await Mt(d,h),r!==void 0&&u.storeId){const f=Me(he,"stores",u.storeId,"reviews");await $s(f,{orderId:t,customerId:u.customerId,customerName:u.customerName,rating:r,review:n||"",createdAt:Pe(),orderDate:u.createdAt});const g=Ee(he,"stores",u.storeId),m=await mt(g);if(m.exists()){const y=[...m.data().reviews||[],r],L=y.reduce((M,b)=>M+b,0)/y.length;await Mt(g,{rating:Math.round(L*10)/10,totalReviews:y.length,reviews:y.slice(-100)})}}return{success:!0}}catch(r){return console.error("Error rating order:",r),{success:!1,error:r.message}}},pi=(t,e="delivery")=>{const r=e==="pickup",n={pending:{label:"Order Placed",description:"Waiting for store to accept",color:"text-yellow-500",bgColor:"bg-yellow-500/20",icon:"",step:1},confirmed:{label:"Confirmed",description:"Store has accepted your order",color:"text-blue-500",bgColor:"bg-blue-500/20",icon:"",step:2},preparing:{label:"Preparing",description:"Your order is being packed",color:"text-orange-500",bgColor:"bg-orange-500/20",icon:"",step:3},ready:{label:r?"Ready for Pickup":"Ready",description:r?"Your order is ready to collect":"Your order is ready for delivery",color:"text-purple-500",bgColor:"bg-purple-500/20",icon:r?"":"",step:4},out_for_delivery:{label:"Out for Delivery",description:"Your order is on the way",color:"text-cyan-500",bgColor:"bg-cyan-500/20",icon:"",step:5},delivered:{label:r?"Picked Up":"Delivered",description:r?"Order picked up successfully":"Order delivered successfully",color:"text-green-500",bgColor:"bg-green-500/20",icon:"",step:r?5:6},cancelled:{label:"Cancelled",description:"Order was cancelled",color:"text-red-500",bgColor:"bg-red-500/20",icon:"",step:0}};return n[t]||n.pending};var bt=Tn();function At(t){"@babel/helpers - typeof";return At=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},At(t)}function Ho(t,e){if(At(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(At(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Vo(t){var e=Ho(t,"string");return At(e)=="symbol"?e:e+""}function k(t,e,r){return(e=Vo(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function fi(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Ns,fr;function Wo(){if(fr)return Ns;fr=1;var t=function(r,n,i,o,l,c,d,p){if(!r){var u;if(n===void 0)u=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var h=[i,o,l,c,d,p],f=0;u=new Error(n.replace(/%s/g,function(){return h[f++]})),u.name="Invariant Violation"}throw u.framesToPop=1,u}};return Ns=t,Ns}var Go=Wo(),pe=fi(Go),K=a.createContext(null);function Zo(){pe(!!a.useContext,"useGoogleMap is React hook and requires React version 16.8+");var t=a.useContext(K);return pe(!!t,"useGoogleMap needs a GoogleMap available up in the tree"),t}function qo(t,e,r){return Object.keys(t).reduce(function(i,o){return e(i,t[o],o)},r)}function Ko(t,e){Object.keys(t).forEach(r=>e(t[r],r))}function Yo(t,e,r,n){var i={},o=(l,c)=>{var d=r[c];d!==e[c]&&(i[c]=d,l(n,d))};return Ko(t,o),i}function Jo(t,e,r){var n=qo(r,function(o,l,c){return typeof t[c]=="function"&&o.push(google.maps.event.addListener(e,l,t[c])),o},[]);return n}function Qo(t){google.maps.event.removeListener(t)}function Q(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];t.forEach(Qo)}function J(t){var{updaterMap:e,eventMap:r,prevProps:n,nextProps:i,instance:o}=t,l=Jo(i,o,r);return Yo(e,n,i,o),l}var gr={onDblClick:"dblclick",onDragEnd:"dragend",onDragStart:"dragstart",onMapTypeIdChanged:"maptypeid_changed",onMouseMove:"mousemove",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseDown:"mousedown",onMouseUp:"mouseup",onRightClick:"rightclick",onTilesLoaded:"tilesloaded",onBoundsChanged:"bounds_changed",onCenterChanged:"center_changed",onClick:"click",onDrag:"drag",onHeadingChanged:"heading_changed",onIdle:"idle",onProjectionChanged:"projection_changed",onResize:"resize",onTiltChanged:"tilt_changed",onZoomChanged:"zoom_changed"},xr={extraMapTypes(t,e){e.forEach(function(n,i){t.mapTypes.set(String(i),n)})},center(t,e){t.setCenter(e)},clickableIcons(t,e){t.setClickableIcons(e)},heading(t,e){t.setHeading(e)},mapTypeId(t,e){t.setMapTypeId(e)},options(t,e){t.setOptions(e)},streetView(t,e){t.setStreetView(e)},tilt(t,e){t.setTilt(e)},zoom(t,e){t.setZoom(e)}};function Xo(t){var{children:e,options:r,id:n,mapContainerStyle:i,mapContainerClassName:o,center:l,onClick:c,onDblClick:d,onDrag:p,onDragEnd:u,onDragStart:h,onMouseMove:f,onMouseOut:g,onMouseOver:m,onMouseDown:N,onMouseUp:x,onRightClick:y,onCenterChanged:L,onLoad:M,onUnmount:b}=t,[j,v]=a.useState(null),w=a.useRef(null),[E,S]=a.useState(null),[D,O]=a.useState(null),[A,B]=a.useState(null),[T,z]=a.useState(null),[W,ee]=a.useState(null),[H,X]=a.useState(null),[Y,se]=a.useState(null),[re,U]=a.useState(null),[ne,C]=a.useState(null),[I,q]=a.useState(null),[$,de]=a.useState(null),[V,te]=a.useState(null);return a.useEffect(()=>{r&&j!==null&&j.setOptions(r)},[j,r]),a.useEffect(()=>{j!==null&&typeof l<"u"&&j.setCenter(l)},[j,l]),a.useEffect(()=>{j&&d&&(D!==null&&google.maps.event.removeListener(D),O(google.maps.event.addListener(j,"dblclick",d)))},[d]),a.useEffect(()=>{j&&u&&(A!==null&&google.maps.event.removeListener(A),B(google.maps.event.addListener(j,"dragend",u)))},[u]),a.useEffect(()=>{j&&h&&(T!==null&&google.maps.event.removeListener(T),z(google.maps.event.addListener(j,"dragstart",h)))},[h]),a.useEffect(()=>{j&&N&&(W!==null&&google.maps.event.removeListener(W),ee(google.maps.event.addListener(j,"mousedown",N)))},[N]),a.useEffect(()=>{j&&f&&(H!==null&&google.maps.event.removeListener(H),X(google.maps.event.addListener(j,"mousemove",f)))},[f]),a.useEffect(()=>{j&&g&&(Y!==null&&google.maps.event.removeListener(Y),se(google.maps.event.addListener(j,"mouseout",g)))},[g]),a.useEffect(()=>{j&&m&&(re!==null&&google.maps.event.removeListener(re),U(google.maps.event.addListener(j,"mouseover",m)))},[m]),a.useEffect(()=>{j&&x&&(ne!==null&&google.maps.event.removeListener(ne),C(google.maps.event.addListener(j,"mouseup",x)))},[x]),a.useEffect(()=>{j&&y&&(I!==null&&google.maps.event.removeListener(I),q(google.maps.event.addListener(j,"rightclick",y)))},[y]),a.useEffect(()=>{j&&c&&($!==null&&google.maps.event.removeListener($),de(google.maps.event.addListener(j,"click",c)))},[c]),a.useEffect(()=>{j&&p&&(V!==null&&google.maps.event.removeListener(V),te(google.maps.event.addListener(j,"drag",p)))},[p]),a.useEffect(()=>{j&&L&&(E!==null&&google.maps.event.removeListener(E),S(google.maps.event.addListener(j,"center_changed",L)))},[c]),a.useEffect(()=>{var ge=w.current===null?null:new google.maps.Map(w.current,r);return v(ge),ge!==null&&M&&M(ge),()=>{ge!==null&&b&&b(ge)}},[]),s.jsx("div",{id:n,ref:w,style:i,className:o,children:s.jsx(K.Provider,{value:j,children:j!==null?e:null})})}a.memo(Xo);class el extends a.PureComponent{constructor(){super(...arguments),k(this,"state",{map:null}),k(this,"registeredEvents",[]),k(this,"mapRef",null),k(this,"getInstance",()=>this.mapRef===null?null:new google.maps.Map(this.mapRef,this.props.options)),k(this,"panTo",e=>{var r=this.getInstance();r&&r.panTo(e)}),k(this,"setMapCallback",()=>{this.state.map!==null&&this.props.onLoad&&this.props.onLoad(this.state.map)}),k(this,"getRef",e=>{this.mapRef=e})}componentDidMount(){var e=this.getInstance();this.registeredEvents=J({updaterMap:xr,eventMap:gr,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{map:e}},this.setMapCallback)}componentDidUpdate(e){this.state.map!==null&&(Q(this.registeredEvents),this.registeredEvents=J({updaterMap:xr,eventMap:gr,prevProps:e,nextProps:this.props,instance:this.state.map}))}componentWillUnmount(){this.state.map!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.map),Q(this.registeredEvents))}render(){return s.jsx("div",{id:this.props.id,ref:this.getRef,style:this.props.mapContainerStyle,className:this.props.mapContainerClassName,children:s.jsx(K.Provider,{value:this.state.map,children:this.state.map!==null?this.props.children:null})})}}function vr(t,e,r,n,i,o,l){try{var c=t[o](l),d=c.value}catch(p){return void r(p)}c.done?e(d):Promise.resolve(d).then(n,i)}function gi(t){return function(){var e=this,r=arguments;return new Promise(function(n,i){var o=t.apply(e,r);function l(d){vr(o,n,i,l,c,"next",d)}function c(d){vr(o,n,i,l,c,"throw",d)}l(void 0)})}}function xi(t){var{googleMapsApiKey:e,googleMapsClientId:r,version:n="weekly",language:i,region:o,libraries:l,channel:c,mapIds:d,authReferrerPolicy:p,apiUrl:u="https://maps.googleapis.com"}=t,h=[];return pe(e&&r||!(e&&r),"You need to specify either googleMapsApiKey or googleMapsClientId for @react-google-maps/api load script to work. You cannot use both at the same time."),e?h.push("key=".concat(e)):r&&h.push("client=".concat(r)),n&&h.push("v=".concat(n)),i&&h.push("language=".concat(i)),o&&h.push("region=".concat(o)),l&&l.length&&h.push("libraries=".concat(l.sort().join(","))),c&&h.push("channel=".concat(c)),d&&d.length&&h.push("map_ids=".concat(d.join(","))),p&&h.push("auth_referrer_policy=".concat(p)),h.push("loading=async"),h.push("callback=initMap"),"".concat(u,"/maps/api/js?").concat(h.join("&"))}var Ue=typeof document<"u";function vi(t){var{url:e,id:r,nonce:n}=t;return Ue?new Promise(function(o,l){var c=document.getElementById(r),d=window;if(c){var p=c.getAttribute("data-state");if(c.src===e&&p!=="error"){if(p==="ready")return o(r);var u=d.initMap,h=c.onerror;d.initMap=function(){u&&u(),o(r)},c.onerror=function(g){h&&h(g),l(g)};return}else c.remove()}var f=document.createElement("script");f.type="text/javascript",f.src=e,f.id=r,f.async=!0,f.nonce=n||"",f.onerror=function(m){f.setAttribute("data-state","error"),l(m)},d.initMap=function(){f.setAttribute("data-state","ready"),o(r)},document.head.appendChild(f)}).catch(i=>{throw console.error("injectScript error: ",i),i}):Promise.reject(new Error("document is undefined"))}function br(t){var e=t.href;return e&&(e.indexOf("https://fonts.googleapis.com/css?family=Roboto")===0||e.indexOf("https://fonts.googleapis.com/css?family=Google+Sans+Text")===0)?!0:t.tagName.toLowerCase()==="style"&&t.styleSheet&&t.styleSheet.cssText&&t.styleSheet.cssText.replace(`\r
`,"").indexOf(".gm-style")===0?(t.styleSheet.cssText="",!0):t.tagName.toLowerCase()==="style"&&t.innerHTML&&t.innerHTML.replace(`\r
`,"").indexOf(".gm-style")===0?(t.innerHTML="",!0):t.tagName.toLowerCase()==="style"&&!t.styleSheet&&!t.innerHTML}function Ws(){var t=document.getElementsByTagName("head")[0];if(t){var e=t.insertBefore.bind(t);t.insertBefore=function(i,o){return br(i)||Reflect.apply(e,t,[i,o]),i};var r=t.appendChild.bind(t);t.appendChild=function(i){return br(i)||Reflect.apply(r,t,[i]),i}}}var Lt=!1;function bi(){return s.jsx("div",{children:"Loading..."})}var It={id:"script-loader",version:"weekly"};class tl extends a.PureComponent{constructor(){super(...arguments),k(this,"check",null),k(this,"state",{loaded:!1}),k(this,"cleanupCallback",()=>{delete window.google.maps,this.injectScript()}),k(this,"isCleaningUp",gi(function*(){function e(r){if(!Lt)r();else if(Ue)var n=window.setInterval(function(){Lt||(window.clearInterval(n),r())},1)}return new Promise(e)})),k(this,"cleanup",()=>{Lt=!0;var e=document.getElementById(this.props.id);e&&e.parentNode&&e.parentNode.removeChild(e),Array.prototype.slice.call(document.getElementsByTagName("script")).filter(function(n){return typeof n.src=="string"&&n.src.includes("maps.googleapis")}).forEach(function(n){n.parentNode&&n.parentNode.removeChild(n)}),Array.prototype.slice.call(document.getElementsByTagName("link")).filter(function(n){return n.href==="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Google+Sans"}).forEach(function(n){n.parentNode&&n.parentNode.removeChild(n)}),Array.prototype.slice.call(document.getElementsByTagName("style")).filter(function(n){return n.innerText!==void 0&&n.innerText.length>0&&n.innerText.includes(".gm-")}).forEach(function(n){n.parentNode&&n.parentNode.removeChild(n)})}),k(this,"injectScript",()=>{this.props.preventGoogleFontsLoading&&Ws(),pe(!!this.props.id,'LoadScript requires "id" prop to be a string: %s',this.props.id);var e={id:this.props.id,nonce:this.props.nonce,url:xi(this.props)};vi(e).then(()=>{this.props.onLoad&&this.props.onLoad(),this.setState(function(){return{loaded:!0}})}).catch(r=>{this.props.onError&&this.props.onError(r),console.error(`
          There has been an Error with loading Google Maps API script, please check that you provided correct google API key (`.concat(this.props.googleMapsApiKey||"-",") or Client ID (").concat(this.props.googleMapsClientId||"-",`) to <LoadScript />
          Otherwise it is a Network issue.
        `))})}),k(this,"getRef",e=>{this.check=e})}componentDidMount(){if(Ue){if(window.google&&window.google.maps&&!Lt){console.error("google api is already presented");return}this.isCleaningUp().then(this.injectScript).catch(function(r){console.error("Error at injecting script after cleaning up: ",r)})}}componentDidUpdate(e){this.props.libraries!==e.libraries&&console.warn("Performance warning! LoadScript has been reloaded unintentionally! You should not pass `libraries` prop as new array. Please keep an array of libraries as static class property for Components and PureComponents, or just a const variable outside of component, or somewhere in config files or ENV variables"),Ue&&e.language!==this.props.language&&(this.cleanup(),this.setState(function(){return{loaded:!1}},this.cleanupCallback))}componentWillUnmount(){if(Ue){this.cleanup();var e=()=>{this.check||(delete window.google,Lt=!1)};window.setTimeout(e,1),this.props.onUnmount&&this.props.onUnmount()}}render(){return s.jsxs(s.Fragment,{children:[s.jsx("div",{ref:this.getRef}),this.state.loaded?this.props.children:this.props.loadingElement||s.jsx(bi,{})]})}}k(tl,"defaultProps",It);function sl(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.includes(n))continue;r[n]=t[n]}return r}function Gs(t,e){if(t==null)return{};var r,n,i=sl(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(n=0;n<o.length;n++)r=o[n],e.includes(r)||{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}var yr;function rl(t){var{id:e=It.id,version:r=It.version,nonce:n,googleMapsApiKey:i,googleMapsClientId:o,language:l,region:c,libraries:d,preventGoogleFontsLoading:p,channel:u,mapIds:h,authReferrerPolicy:f,apiUrl:g="https://maps.googleapis.com"}=t,m=a.useRef(!1),[N,x]=a.useState(!1),[y,L]=a.useState(void 0);a.useEffect(function(){return m.current=!0,()=>{m.current=!1}},[]),a.useEffect(function(){Ue&&p&&Ws()},[p]),a.useEffect(function(){N&&pe(!!window.google,"useLoadScript was marked as loaded, but window.google is not present. Something went wrong.")},[N]);var M=xi({version:r,googleMapsApiKey:i,googleMapsClientId:o,language:l,region:c,libraries:d,channel:u,mapIds:h,authReferrerPolicy:f,apiUrl:g});a.useEffect(function(){if(!Ue)return;function v(){m.current&&(x(!0),yr=M)}if(window.google&&window.google.maps&&yr===M){v();return}vi({id:e,url:M,nonce:n}).then(v).catch(function(E){m.current&&L(E),console.warn(`
        There has been an Error with loading Google Maps API script, please check that you provided correct google API key (`.concat(i||"-",") or Client ID (").concat(o||"-",`)
        Otherwise it is a Network issue.
      `)),console.error(E)})},[e,M,n]);var b=a.useRef(void 0);return a.useEffect(function(){b.current&&d!==b.current&&console.warn("Performance warning! LoadScript has been reloaded unintentionally! You should not pass `libraries` prop as new array. Please keep an array of libraries as static class property for Components and PureComponents, or just a const variable outside of component, or somewhere in config files or ENV variables"),b.current=d},[d]),{isLoaded:N,loadError:y,url:M}}var nl=["loadingElement","onLoad","onError","onUnmount","children"],il=s.jsx(bi,{});function al(t){var{loadingElement:e,onLoad:r,onError:n,onUnmount:i,children:o}=t,l=Gs(t,nl),{isLoaded:c,loadError:d}=rl(l);return a.useEffect(function(){c&&typeof r=="function"&&r()},[c,r]),a.useEffect(function(){d&&typeof n=="function"&&n(d)},[d,n]),a.useEffect(function(){return()=>{i&&i()}},[i]),c?o:e||il}a.memo(al);function ol(t,e,r,n){function i(o){return o instanceof r?o:new r(function(l){l(o)})}return new(r||(r=Promise))(function(o,l){function c(u){try{p(n.next(u))}catch(h){l(h)}}function d(u){try{p(n.throw(u))}catch(h){l(h)}}function p(u){u.done?o(u.value):i(u.value).then(c,d)}p((n=n.apply(t,[])).next())})}function ll(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var cl=function t(e,r){if(e===r)return!0;if(e&&r&&typeof e=="object"&&typeof r=="object"){if(e.constructor!==r.constructor)return!1;var n,i,o;if(Array.isArray(e)){if(n=e.length,n!=r.length)return!1;for(i=n;i--!==0;)if(!t(e[i],r[i]))return!1;return!0}if(e.constructor===RegExp)return e.source===r.source&&e.flags===r.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===r.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===r.toString();if(o=Object.keys(e),n=o.length,n!==Object.keys(r).length)return!1;for(i=n;i--!==0;)if(!Object.prototype.hasOwnProperty.call(r,o[i]))return!1;for(i=n;i--!==0;){var l=o[i];if(!t(e[l],r[l]))return!1}return!0}return e!==e&&r!==r},dl=ll(cl),wr="__googleMapsScriptId",lt;(function(t){t[t.INITIALIZED=0]="INITIALIZED",t[t.LOADING=1]="LOADING",t[t.SUCCESS=2]="SUCCESS",t[t.FAILURE=3]="FAILURE"})(lt||(lt={}));class Je{constructor(e){var{apiKey:r,authReferrerPolicy:n,channel:i,client:o,id:l=wr,language:c,libraries:d=[],mapIds:p,nonce:u,region:h,retries:f=3,url:g="https://maps.googleapis.com/maps/api/js",version:m}=e;if(this.callbacks=[],this.done=!1,this.loading=!1,this.errors=[],this.apiKey=r,this.authReferrerPolicy=n,this.channel=i,this.client=o,this.id=l||wr,this.language=c,this.libraries=d,this.mapIds=p,this.nonce=u,this.region=h,this.retries=f,this.url=g,this.version=m,Je.instance){if(!dl(this.options,Je.instance.options))throw new Error("Loader must not be called again with different options. ".concat(JSON.stringify(this.options)," !== ").concat(JSON.stringify(Je.instance.options)));return Je.instance}Je.instance=this}get options(){return{version:this.version,apiKey:this.apiKey,channel:this.channel,client:this.client,id:this.id,libraries:this.libraries,language:this.language,region:this.region,mapIds:this.mapIds,nonce:this.nonce,url:this.url,authReferrerPolicy:this.authReferrerPolicy}}get status(){return this.errors.length?lt.FAILURE:this.done?lt.SUCCESS:this.loading?lt.LOADING:lt.INITIALIZED}get failed(){return this.done&&!this.loading&&this.errors.length>=this.retries+1}createUrl(){var e=this.url;return e+="?callback=__googleMapsCallback&loading=async",this.apiKey&&(e+="&key=".concat(this.apiKey)),this.channel&&(e+="&channel=".concat(this.channel)),this.client&&(e+="&client=".concat(this.client)),this.libraries.length>0&&(e+="&libraries=".concat(this.libraries.join(","))),this.language&&(e+="&language=".concat(this.language)),this.region&&(e+="&region=".concat(this.region)),this.version&&(e+="&v=".concat(this.version)),this.mapIds&&(e+="&map_ids=".concat(this.mapIds.join(","))),this.authReferrerPolicy&&(e+="&auth_referrer_policy=".concat(this.authReferrerPolicy)),e}deleteScript(){var e=document.getElementById(this.id);e&&e.remove()}load(){return this.loadPromise()}loadPromise(){return new Promise((e,r)=>{this.loadCallback(n=>{n?r(n.error):e(window.google)})})}importLibrary(e){return this.execute(),google.maps.importLibrary(e)}loadCallback(e){this.callbacks.push(e),this.execute()}setScript(){var e,r;if(document.getElementById(this.id)){this.callback();return}var n={key:this.apiKey,channel:this.channel,client:this.client,libraries:this.libraries.length&&this.libraries,v:this.version,mapIds:this.mapIds,language:this.language,region:this.region,authReferrerPolicy:this.authReferrerPolicy};Object.keys(n).forEach(o=>!n[o]&&delete n[o]),!((r=(e=window?.google)===null||e===void 0?void 0:e.maps)===null||r===void 0)&&r.importLibrary||(o=>{var l,c,d,p="The Google Maps JavaScript API",u="google",h="importLibrary",f="__ib__",g=document,m=window;m=m[u]||(m[u]={});var N=m.maps||(m.maps={}),x=new Set,y=new URLSearchParams,L=()=>l||(l=new Promise((M,b)=>ol(this,void 0,void 0,function*(){var j;yield c=g.createElement("script"),c.id=this.id,y.set("libraries",[...x]+"");for(d in o)y.set(d.replace(/[A-Z]/g,v=>"_"+v[0].toLowerCase()),o[d]);y.set("callback",u+".maps."+f),c.src=this.url+"?"+y,N[f]=M,c.onerror=()=>l=b(Error(p+" could not load.")),c.nonce=this.nonce||((j=g.querySelector("script[nonce]"))===null||j===void 0?void 0:j.nonce)||"",g.head.append(c)})));N[h]?console.warn(p+" only loads once. Ignoring:",o):N[h]=function(M){for(var b=arguments.length,j=new Array(b>1?b-1:0),v=1;v<b;v++)j[v-1]=arguments[v];return x.add(M)&&L().then(()=>N[h](M,...j))}})(n);var i=this.libraries.map(o=>this.importLibrary(o));i.length||i.push(this.importLibrary("core")),Promise.all(i).then(()=>this.callback(),o=>{var l=new ErrorEvent("error",{error:o});this.loadErrorCallback(l)})}reset(){this.deleteScript(),this.done=!1,this.loading=!1,this.errors=[],this.onerrorEvent=null}resetIfRetryingFailed(){this.failed&&this.reset()}loadErrorCallback(e){if(this.errors.push(e),this.errors.length<=this.retries){var r=this.errors.length*Math.pow(2,this.errors.length);console.error("Failed to load Google Maps script, retrying in ".concat(r," ms.")),setTimeout(()=>{this.deleteScript(),this.setScript()},r)}else this.onerrorEvent=e,this.callback()}callback(){this.done=!0,this.loading=!1,this.callbacks.forEach(e=>{e(this.onerrorEvent)}),this.callbacks=[]}execute(){if(this.resetIfRetryingFailed(),!this.loading)if(this.done)this.callback();else{if(window.google&&window.google.maps&&window.google.maps.version){console.warn("Google Maps already loaded outside @googlemaps/js-api-loader. This may result in undesirable behavior as options and script parameters may not match."),this.callback();return}this.loading=!0,this.setScript()}}}var ul=["maps"];function hl(t){var{id:e=It.id,version:r=It.version,nonce:n,googleMapsApiKey:i,language:o,region:l,libraries:c=ul,preventGoogleFontsLoading:d,mapIds:p,authReferrerPolicy:u}=t,h=a.useRef(!1),[f,g]=a.useState(!1),[m,N]=a.useState(void 0);a.useEffect(function(){return h.current=!0,()=>{h.current=!1}},[]);var x=a.useMemo(()=>new Je({id:e,apiKey:i,version:r,libraries:c,language:o||"en",region:l||"US",mapIds:p||[],nonce:n||"",authReferrerPolicy:u||"origin"}),[e,i,r,c,o,l,p,n,u]);a.useEffect(function(){f||x.load().then(()=>{h.current&&g(!0)}).catch(M=>{N(M)})},[]),a.useEffect(()=>{Ue&&d&&Ws()},[d]);var y=a.useRef();return a.useEffect(()=>{y.current&&c!==y.current&&console.warn("Performance warning! LoadScript has been reloaded unintentionally! You should not pass `libraries` prop as new array. Please keep an array of libraries as static class property for Components and PureComponents, or just a const variable outside of component, or somewhere in config files or ENV variables"),y.current=c},[c]),{isLoaded:f,loadError:m}}function jr(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function as(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?jr(Object(r),!0).forEach(function(n){k(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):jr(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var Nr={},Lr={options(t,e){t.setOptions(e)}};function ml(t){var{options:e,onLoad:r,onUnmount:n}=t,i=a.useContext(K),[o,l]=a.useState(null);return a.useEffect(()=>{o!==null&&o.setMap(i)},[i]),a.useEffect(()=>{e&&o!==null&&o.setOptions(e)},[o,e]),a.useEffect(()=>{var c=new google.maps.TrafficLayer(as(as({},e),{},{map:i}));return l(c),r&&r(c),()=>{o!==null&&(n&&n(o),o.setMap(null))}},[]),null}a.memo(ml);class pl extends a.PureComponent{constructor(){super(...arguments),k(this,"state",{trafficLayer:null}),k(this,"setTrafficLayerCallback",()=>{this.state.trafficLayer!==null&&this.props.onLoad&&this.props.onLoad(this.state.trafficLayer)}),k(this,"registeredEvents",[])}componentDidMount(){var e=new google.maps.TrafficLayer(as(as({},this.props.options),{},{map:this.context}));this.registeredEvents=J({updaterMap:Lr,eventMap:Nr,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{trafficLayer:e}},this.setTrafficLayerCallback)}componentDidUpdate(e){this.state.trafficLayer!==null&&(Q(this.registeredEvents),this.registeredEvents=J({updaterMap:Lr,eventMap:Nr,prevProps:e,nextProps:this.props,instance:this.state.trafficLayer}))}componentWillUnmount(){this.state.trafficLayer!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.trafficLayer),Q(this.registeredEvents),this.state.trafficLayer.setMap(null))}render(){return null}}k(pl,"contextType",K);function fl(t){var{onLoad:e,onUnmount:r}=t,n=a.useContext(K),[i,o]=a.useState(null);return a.useEffect(()=>{i!==null&&i.setMap(n)},[n]),a.useEffect(()=>{var l=new google.maps.BicyclingLayer;return o(l),l.setMap(n),e&&e(l),()=>{l!==null&&(r&&r(l),l.setMap(null))}},[]),null}a.memo(fl);class gl extends a.PureComponent{constructor(){super(...arguments),k(this,"state",{bicyclingLayer:null}),k(this,"setBicyclingLayerCallback",()=>{this.state.bicyclingLayer!==null&&(this.state.bicyclingLayer.setMap(this.context),this.props.onLoad&&this.props.onLoad(this.state.bicyclingLayer))})}componentDidMount(){var e=new google.maps.BicyclingLayer;this.setState(()=>({bicyclingLayer:e}),this.setBicyclingLayerCallback)}componentWillUnmount(){this.state.bicyclingLayer!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.bicyclingLayer),this.state.bicyclingLayer.setMap(null))}render(){return null}}k(gl,"contextType",K);function xl(t){var{onLoad:e,onUnmount:r}=t,n=a.useContext(K),[i,o]=a.useState(null);return a.useEffect(()=>{i!==null&&i.setMap(n)},[n]),a.useEffect(()=>{var l=new google.maps.TransitLayer;return o(l),l.setMap(n),e&&e(l),()=>{i!==null&&(r&&r(i),i.setMap(null))}},[]),null}a.memo(xl);class vl extends a.PureComponent{constructor(){super(...arguments),k(this,"state",{transitLayer:null}),k(this,"setTransitLayerCallback",()=>{this.state.transitLayer!==null&&(this.state.transitLayer.setMap(this.context),this.props.onLoad&&this.props.onLoad(this.state.transitLayer))})}componentDidMount(){var e=new google.maps.TransitLayer;this.setState(function(){return{transitLayer:e}},this.setTransitLayerCallback)}componentWillUnmount(){this.state.transitLayer!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.transitLayer),this.state.transitLayer.setMap(null))}render(){return null}}k(vl,"contextType",K);function Cr(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function os(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Cr(Object(r),!0).forEach(function(n){k(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Cr(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var Sr={onCircleComplete:"circlecomplete",onMarkerComplete:"markercomplete",onOverlayComplete:"overlaycomplete",onPolygonComplete:"polygoncomplete",onPolylineComplete:"polylinecomplete",onRectangleComplete:"rectanglecomplete"},kr={drawingMode(t,e){t.setDrawingMode(e)},options(t,e){t.setOptions(e)}};function bl(t){var{options:e,drawingMode:r,onCircleComplete:n,onMarkerComplete:i,onOverlayComplete:o,onPolygonComplete:l,onPolylineComplete:c,onRectangleComplete:d,onLoad:p,onUnmount:u}=t,h=a.useContext(K),[f,g]=a.useState(null),[m,N]=a.useState(null),[x,y]=a.useState(null),[L,M]=a.useState(null),[b,j]=a.useState(null),[v,w]=a.useState(null),[E,S]=a.useState(null);return a.useEffect(()=>{f!==null&&f.setMap(h)},[h]),a.useEffect(()=>{e&&f!==null&&f.setOptions(e)},[f,e]),a.useEffect(()=>{f!==null&&f.setDrawingMode(r??null)},[f,r]),a.useEffect(()=>{f&&n&&(m!==null&&google.maps.event.removeListener(m),N(google.maps.event.addListener(f,"circlecomplete",n)))},[f,n]),a.useEffect(()=>{f&&i&&(x!==null&&google.maps.event.removeListener(x),y(google.maps.event.addListener(f,"markercomplete",i)))},[f,i]),a.useEffect(()=>{f&&o&&(L!==null&&google.maps.event.removeListener(L),M(google.maps.event.addListener(f,"overlaycomplete",o)))},[f,o]),a.useEffect(()=>{f&&l&&(b!==null&&google.maps.event.removeListener(b),j(google.maps.event.addListener(f,"polygoncomplete",l)))},[f,l]),a.useEffect(()=>{f&&c&&(v!==null&&google.maps.event.removeListener(v),w(google.maps.event.addListener(f,"polylinecomplete",c)))},[f,c]),a.useEffect(()=>{f&&d&&(E!==null&&google.maps.event.removeListener(E),S(google.maps.event.addListener(f,"rectanglecomplete",d)))},[f,d]),a.useEffect(()=>{pe(!!google.maps.drawing,"Did you include prop libraries={['drawing']} in the URL? %s",google.maps.drawing);var D=new google.maps.drawing.DrawingManager(os(os({},e),{},{map:h}));return r&&D.setDrawingMode(r),n&&N(google.maps.event.addListener(D,"circlecomplete",n)),i&&y(google.maps.event.addListener(D,"markercomplete",i)),o&&M(google.maps.event.addListener(D,"overlaycomplete",o)),l&&j(google.maps.event.addListener(D,"polygoncomplete",l)),c&&w(google.maps.event.addListener(D,"polylinecomplete",c)),d&&S(google.maps.event.addListener(D,"rectanglecomplete",d)),g(D),p&&p(D),()=>{f!==null&&(m&&google.maps.event.removeListener(m),x&&google.maps.event.removeListener(x),L&&google.maps.event.removeListener(L),b&&google.maps.event.removeListener(b),v&&google.maps.event.removeListener(v),E&&google.maps.event.removeListener(E),u&&u(f),f.setMap(null))}},[]),null}a.memo(bl);class yl extends a.PureComponent{constructor(e){super(e),k(this,"registeredEvents",[]),k(this,"state",{drawingManager:null}),k(this,"setDrawingManagerCallback",()=>{this.state.drawingManager!==null&&this.props.onLoad&&this.props.onLoad(this.state.drawingManager)}),pe(!!google.maps.drawing,"Did you include prop libraries={['drawing']} in the URL? %s",google.maps.drawing)}componentDidMount(){var e=new google.maps.drawing.DrawingManager(os(os({},this.props.options),{},{map:this.context}));this.registeredEvents=J({updaterMap:kr,eventMap:Sr,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{drawingManager:e}},this.setDrawingManagerCallback)}componentDidUpdate(e){this.state.drawingManager!==null&&(Q(this.registeredEvents),this.registeredEvents=J({updaterMap:kr,eventMap:Sr,prevProps:e,nextProps:this.props,instance:this.state.drawingManager}))}componentWillUnmount(){this.state.drawingManager!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.drawingManager),Q(this.registeredEvents),this.state.drawingManager.setMap(null))}render(){return null}}k(yl,"contextType",K);function Er(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function ht(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Er(Object(r),!0).forEach(function(n){k(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Er(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var Pr={onAnimationChanged:"animation_changed",onClick:"click",onClickableChanged:"clickable_changed",onCursorChanged:"cursor_changed",onDblClick:"dblclick",onDrag:"drag",onDragEnd:"dragend",onDraggableChanged:"draggable_changed",onDragStart:"dragstart",onFlatChanged:"flat_changed",onIconChanged:"icon_changed",onMouseDown:"mousedown",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onPositionChanged:"position_changed",onRightClick:"rightclick",onShapeChanged:"shape_changed",onTitleChanged:"title_changed",onVisibleChanged:"visible_changed",onZindexChanged:"zindex_changed"},Mr={animation(t,e){t.setAnimation(e)},clickable(t,e){t.setClickable(e)},cursor(t,e){t.setCursor(e)},draggable(t,e){t.setDraggable(e)},icon(t,e){t.setIcon(e)},label(t,e){t.setLabel(e)},map(t,e){t.setMap(e)},opacity(t,e){t.setOpacity(e)},options(t,e){t.setOptions(e)},position(t,e){t.setPosition(e)},shape(t,e){t.setShape(e)},title(t,e){t.setTitle(e)},visible(t,e){t.setVisible(e)},zIndex(t,e){t.setZIndex(e)}},ls={};function wl(t){var{position:e,options:r,clusterer:n,noClustererRedraw:i,children:o,draggable:l,visible:c,animation:d,clickable:p,cursor:u,icon:h,label:f,opacity:g,shape:m,title:N,zIndex:x,onClick:y,onDblClick:L,onDrag:M,onDragEnd:b,onDragStart:j,onMouseOut:v,onMouseOver:w,onMouseUp:E,onMouseDown:S,onRightClick:D,onClickableChanged:O,onCursorChanged:A,onAnimationChanged:B,onDraggableChanged:T,onFlatChanged:z,onIconChanged:W,onPositionChanged:ee,onShapeChanged:H,onTitleChanged:X,onVisibleChanged:Y,onZindexChanged:se,onLoad:re,onUnmount:U}=t,ne=a.useContext(K),[C,I]=a.useState(null),[q,$]=a.useState(null),[de,V]=a.useState(null),[te,ge]=a.useState(null),[xe,Re]=a.useState(null),[ie,Bt]=a.useState(null),[Ze,Te]=a.useState(null),[_e,ke]=a.useState(null),[et,wt]=a.useState(null),[Ne,tt]=a.useState(null),[zt,Ut]=a.useState(null),[Ce,$t]=a.useState(null),[st,Ht]=a.useState(null),[qe,Vt]=a.useState(null),[rt,bs]=a.useState(null),[nt,Wt]=a.useState(null),[jt,ae]=a.useState(null),[it,at]=a.useState(null),[P,R]=a.useState(null),[G,ce]=a.useState(null),[ue,le]=a.useState(null),[fe,be]=a.useState(null);a.useEffect(()=>{C!==null&&C.setMap(ne)},[ne]),a.useEffect(()=>{typeof r<"u"&&C!==null&&C.setOptions(r)},[C,r]),a.useEffect(()=>{typeof l<"u"&&C!==null&&C.setDraggable(l)},[C,l]),a.useEffect(()=>{e&&C!==null&&C.setPosition(e)},[C,e]),a.useEffect(()=>{typeof c<"u"&&C!==null&&C.setVisible(c)},[C,c]),a.useEffect(()=>{C?.setAnimation(d)},[C,d]),a.useEffect(()=>{C&&p!==void 0&&C.setClickable(p)},[C,p]),a.useEffect(()=>{C&&u!==void 0&&C.setCursor(u)},[C,u]),a.useEffect(()=>{C&&h!==void 0&&C.setIcon(h)},[C,h]),a.useEffect(()=>{C&&f!==void 0&&C.setLabel(f)},[C,f]),a.useEffect(()=>{C&&g!==void 0&&C.setOpacity(g)},[C,g]),a.useEffect(()=>{C&&m!==void 0&&C.setShape(m)},[C,m]),a.useEffect(()=>{C&&N!==void 0&&C.setTitle(N)},[C,N]),a.useEffect(()=>{C&&x!==void 0&&C.setZIndex(x)},[C,x]),a.useEffect(()=>{C&&L&&(q!==null&&google.maps.event.removeListener(q),$(google.maps.event.addListener(C,"dblclick",L)))},[L]),a.useEffect(()=>{C&&b&&(de!==null&&google.maps.event.removeListener(de),V(google.maps.event.addListener(C,"dragend",b)))},[b]),a.useEffect(()=>{C&&j&&(te!==null&&google.maps.event.removeListener(te),ge(google.maps.event.addListener(C,"dragstart",j)))},[j]),a.useEffect(()=>{C&&S&&(xe!==null&&google.maps.event.removeListener(xe),Re(google.maps.event.addListener(C,"mousedown",S)))},[S]),a.useEffect(()=>{C&&v&&(ie!==null&&google.maps.event.removeListener(ie),Bt(google.maps.event.addListener(C,"mouseout",v)))},[v]),a.useEffect(()=>{C&&w&&(Ze!==null&&google.maps.event.removeListener(Ze),Te(google.maps.event.addListener(C,"mouseover",w)))},[w]),a.useEffect(()=>{C&&E&&(_e!==null&&google.maps.event.removeListener(_e),ke(google.maps.event.addListener(C,"mouseup",E)))},[E]),a.useEffect(()=>{C&&D&&(et!==null&&google.maps.event.removeListener(et),wt(google.maps.event.addListener(C,"rightclick",D)))},[D]),a.useEffect(()=>{C&&y&&(Ne!==null&&google.maps.event.removeListener(Ne),tt(google.maps.event.addListener(C,"click",y)))},[y]),a.useEffect(()=>{C&&M&&(zt!==null&&google.maps.event.removeListener(zt),Ut(google.maps.event.addListener(C,"drag",M)))},[M]),a.useEffect(()=>{C&&O&&(Ce!==null&&google.maps.event.removeListener(Ce),$t(google.maps.event.addListener(C,"clickable_changed",O)))},[O]),a.useEffect(()=>{C&&A&&(st!==null&&google.maps.event.removeListener(st),Ht(google.maps.event.addListener(C,"cursor_changed",A)))},[A]),a.useEffect(()=>{C&&B&&(qe!==null&&google.maps.event.removeListener(qe),Vt(google.maps.event.addListener(C,"animation_changed",B)))},[B]),a.useEffect(()=>{C&&T&&(rt!==null&&google.maps.event.removeListener(rt),bs(google.maps.event.addListener(C,"draggable_changed",T)))},[T]),a.useEffect(()=>{C&&z&&(nt!==null&&google.maps.event.removeListener(nt),Wt(google.maps.event.addListener(C,"flat_changed",z)))},[z]),a.useEffect(()=>{C&&W&&(jt!==null&&google.maps.event.removeListener(jt),ae(google.maps.event.addListener(C,"icon_changed",W)))},[W]),a.useEffect(()=>{C&&ee&&(it!==null&&google.maps.event.removeListener(it),at(google.maps.event.addListener(C,"position_changed",ee)))},[ee]),a.useEffect(()=>{C&&H&&(P!==null&&google.maps.event.removeListener(P),R(google.maps.event.addListener(C,"shape_changed",H)))},[H]),a.useEffect(()=>{C&&X&&(G!==null&&google.maps.event.removeListener(G),ce(google.maps.event.addListener(C,"title_changed",X)))},[X]),a.useEffect(()=>{C&&Y&&(ue!==null&&google.maps.event.removeListener(ue),le(google.maps.event.addListener(C,"visible_changed",Y)))},[Y]),a.useEffect(()=>{C&&se&&(fe!==null&&google.maps.event.removeListener(fe),be(google.maps.event.addListener(C,"zindex_changed",se)))},[se]),a.useEffect(()=>{var Nt=ht(ht(ht({},r||ls),n?ls:{map:ne}),{},{position:e}),Z=new google.maps.Marker(Nt);return n?n.addMarker(Z,!!i):Z.setMap(ne),e&&Z.setPosition(e),typeof c<"u"&&Z.setVisible(c),typeof l<"u"&&Z.setDraggable(l),typeof p<"u"&&Z.setClickable(p),typeof u=="string"&&Z.setCursor(u),h&&Z.setIcon(h),typeof f<"u"&&Z.setLabel(f),typeof g<"u"&&Z.setOpacity(g),m&&Z.setShape(m),typeof N=="string"&&Z.setTitle(N),typeof x=="number"&&Z.setZIndex(x),L&&$(google.maps.event.addListener(Z,"dblclick",L)),b&&V(google.maps.event.addListener(Z,"dragend",b)),j&&ge(google.maps.event.addListener(Z,"dragstart",j)),S&&Re(google.maps.event.addListener(Z,"mousedown",S)),v&&Bt(google.maps.event.addListener(Z,"mouseout",v)),w&&Te(google.maps.event.addListener(Z,"mouseover",w)),E&&ke(google.maps.event.addListener(Z,"mouseup",E)),D&&wt(google.maps.event.addListener(Z,"rightclick",D)),y&&tt(google.maps.event.addListener(Z,"click",y)),M&&Ut(google.maps.event.addListener(Z,"drag",M)),O&&$t(google.maps.event.addListener(Z,"clickable_changed",O)),A&&Ht(google.maps.event.addListener(Z,"cursor_changed",A)),B&&Vt(google.maps.event.addListener(Z,"animation_changed",B)),T&&bs(google.maps.event.addListener(Z,"draggable_changed",T)),z&&Wt(google.maps.event.addListener(Z,"flat_changed",z)),W&&ae(google.maps.event.addListener(Z,"icon_changed",W)),ee&&at(google.maps.event.addListener(Z,"position_changed",ee)),H&&R(google.maps.event.addListener(Z,"shape_changed",H)),X&&ce(google.maps.event.addListener(Z,"title_changed",X)),Y&&le(google.maps.event.addListener(Z,"visible_changed",Y)),se&&be(google.maps.event.addListener(Z,"zindex_changed",se)),I(Z),re&&re(Z),()=>{q!==null&&google.maps.event.removeListener(q),de!==null&&google.maps.event.removeListener(de),te!==null&&google.maps.event.removeListener(te),xe!==null&&google.maps.event.removeListener(xe),ie!==null&&google.maps.event.removeListener(ie),Ze!==null&&google.maps.event.removeListener(Ze),_e!==null&&google.maps.event.removeListener(_e),et!==null&&google.maps.event.removeListener(et),Ne!==null&&google.maps.event.removeListener(Ne),Ce!==null&&google.maps.event.removeListener(Ce),st!==null&&google.maps.event.removeListener(st),qe!==null&&google.maps.event.removeListener(qe),rt!==null&&google.maps.event.removeListener(rt),nt!==null&&google.maps.event.removeListener(nt),jt!==null&&google.maps.event.removeListener(jt),it!==null&&google.maps.event.removeListener(it),G!==null&&google.maps.event.removeListener(G),ue!==null&&google.maps.event.removeListener(ue),fe!==null&&google.maps.event.removeListener(fe),U&&U(Z),n?n.removeMarker(Z,!!i):Z&&Z.setMap(null)}},[]);var ye=a.useMemo(()=>o?a.Children.map(o,Nt=>{if(!a.isValidElement(Nt))return Nt;var Z=Nt;return a.cloneElement(Z,{anchor:C})}):null,[o,C]);return s.jsx(s.Fragment,{children:ye})||null}a.memo(wl);class yi extends a.PureComponent{constructor(){super(...arguments),k(this,"registeredEvents",[])}componentDidMount(){var e=this;return gi(function*(){var r=ht(ht(ht({},e.props.options||ls),e.props.clusterer?ls:{map:e.context}),{},{position:e.props.position});e.marker=new google.maps.Marker(r),e.props.clusterer?e.props.clusterer.addMarker(e.marker,!!e.props.noClustererRedraw):e.marker.setMap(e.context),e.registeredEvents=J({updaterMap:Mr,eventMap:Pr,prevProps:{},nextProps:e.props,instance:e.marker}),e.props.onLoad&&e.props.onLoad(e.marker)})()}componentDidUpdate(e){this.marker&&(Q(this.registeredEvents),this.registeredEvents=J({updaterMap:Mr,eventMap:Pr,prevProps:e,nextProps:this.props,instance:this.marker}))}componentWillUnmount(){this.marker&&(this.props.onUnmount&&this.props.onUnmount(this.marker),Q(this.registeredEvents),this.props.clusterer?this.props.clusterer.removeMarker(this.marker,!!this.props.noClustererRedraw):this.marker&&this.marker.setMap(null))}render(){var e=this.props.children?a.Children.map(this.props.children,r=>{if(!a.isValidElement(r))return r;var n=r;return a.cloneElement(n,{anchor:this.marker})}):null;return e||null}}k(yi,"contextType",K);var jl=(function(){function t(e,r){e.getClusterer().extend(t,google.maps.OverlayView),this.cluster=e,this.clusterClassName=this.cluster.getClusterer().getClusterClass(),this.className=this.clusterClassName,this.styles=r,this.center=void 0,this.div=null,this.sums=null,this.visible=!1,this.boundsChangedListener=null,this.url="",this.height=0,this.width=0,this.anchorText=[0,0],this.anchorIcon=[0,0],this.textColor="black",this.textSize=11,this.textDecoration="none",this.fontWeight="bold",this.fontStyle="normal",this.fontFamily="Arial,sans-serif",this.backgroundPosition="0 0",this.cMouseDownInCluster=null,this.cDraggingMapByCluster=null,this.timeOut=null,this.setMap(e.getMap()),this.onBoundsChanged=this.onBoundsChanged.bind(this),this.onMouseDown=this.onMouseDown.bind(this),this.onClick=this.onClick.bind(this),this.onMouseOver=this.onMouseOver.bind(this),this.onMouseOut=this.onMouseOut.bind(this),this.onAdd=this.onAdd.bind(this),this.onRemove=this.onRemove.bind(this),this.draw=this.draw.bind(this),this.hide=this.hide.bind(this),this.show=this.show.bind(this),this.useStyle=this.useStyle.bind(this),this.setCenter=this.setCenter.bind(this),this.getPosFromLatLng=this.getPosFromLatLng.bind(this)}return t.prototype.onBoundsChanged=function(){this.cDraggingMapByCluster=this.cMouseDownInCluster},t.prototype.onMouseDown=function(){this.cMouseDownInCluster=!0,this.cDraggingMapByCluster=!1},t.prototype.onClick=function(e){if(this.cMouseDownInCluster=!1,!this.cDraggingMapByCluster){var r=this.cluster.getClusterer();if(google.maps.event.trigger(r,"click",this.cluster),google.maps.event.trigger(r,"clusterclick",this.cluster),r.getZoomOnClick()){var n=r.getMaxZoom(),i=this.cluster.getBounds(),o=r.getMap();o!==null&&"fitBounds"in o&&o.fitBounds(i),this.timeOut=window.setTimeout(function(){var l=r.getMap();if(l!==null){"fitBounds"in l&&l.fitBounds(i);var c=l.getZoom()||0;n!==null&&c>n&&l.setZoom(n+1)}},100)}e.cancelBubble=!0,e.stopPropagation&&e.stopPropagation()}},t.prototype.onMouseOver=function(){google.maps.event.trigger(this.cluster.getClusterer(),"mouseover",this.cluster)},t.prototype.onMouseOut=function(){google.maps.event.trigger(this.cluster.getClusterer(),"mouseout",this.cluster)},t.prototype.onAdd=function(){var e;this.div=document.createElement("div"),this.div.className=this.className,this.visible&&this.show(),(e=this.getPanes())===null||e===void 0||e.overlayMouseTarget.appendChild(this.div);var r=this.getMap();r!==null&&(this.boundsChangedListener=google.maps.event.addListener(r,"bounds_changed",this.onBoundsChanged),this.div.addEventListener("mousedown",this.onMouseDown),this.div.addEventListener("click",this.onClick),this.div.addEventListener("mouseover",this.onMouseOver),this.div.addEventListener("mouseout",this.onMouseOut))},t.prototype.onRemove=function(){this.div&&this.div.parentNode&&(this.hide(),this.boundsChangedListener!==null&&google.maps.event.removeListener(this.boundsChangedListener),this.div.removeEventListener("mousedown",this.onMouseDown),this.div.removeEventListener("click",this.onClick),this.div.removeEventListener("mouseover",this.onMouseOver),this.div.removeEventListener("mouseout",this.onMouseOut),this.div.parentNode.removeChild(this.div),this.timeOut!==null&&(window.clearTimeout(this.timeOut),this.timeOut=null),this.div=null)},t.prototype.draw=function(){if(this.visible&&this.div!==null&&this.center){var e=this.getPosFromLatLng(this.center);this.div.style.top=e!==null?"".concat(e.y,"px"):"0",this.div.style.left=e!==null?"".concat(e.x,"px"):"0"}},t.prototype.hide=function(){this.div&&(this.div.style.display="none"),this.visible=!1},t.prototype.show=function(){var e,r,n,i,o,l;if(this.div&&this.center){var c=this.sums===null||typeof this.sums.title>"u"||this.sums.title===""?this.cluster.getClusterer().getTitle():this.sums.title,d=this.backgroundPosition.split(" "),p=parseInt(((e=d[0])===null||e===void 0?void 0:e.replace(/^\s+|\s+$/g,""))||"0",10),u=parseInt(((r=d[1])===null||r===void 0?void 0:r.replace(/^\s+|\s+$/g,""))||"0",10),h=this.getPosFromLatLng(this.center);this.div.className=this.className,this.div.setAttribute("style","cursor: pointer; position: absolute; top: ".concat(h!==null?"".concat(h.y,"px"):"0","; left: ").concat(h!==null?"".concat(h.x,"px"):"0","; width: ").concat(this.width,"px; height: ").concat(this.height,"px; "));var f=document.createElement("img");f.alt=c,f.src=this.url,f.width=this.width,f.height=this.height,f.setAttribute("style","position: absolute; top: ".concat(u,"px; left: ").concat(p,"px")),this.cluster.getClusterer().enableRetinaIcons||(f.style.clip="rect(-".concat(u,"px, -").concat(p+this.width,"px, -").concat(u+this.height,", -").concat(p,")"));var g=document.createElement("div");g.setAttribute("style","position: absolute; top: ".concat(this.anchorText[0],"px; left: ").concat(this.anchorText[1],"px; color: ").concat(this.textColor,"; font-size: ").concat(this.textSize,"px; font-family: ").concat(this.fontFamily,"; font-weight: ").concat(this.fontWeight,"; fontStyle: ").concat(this.fontStyle,"; text-decoration: ").concat(this.textDecoration,"; text-align: center; width: ").concat(this.width,"px; line-height: ").concat(this.height,"px")),!((n=this.sums)===null||n===void 0)&&n.text&&(g.innerText="".concat((i=this.sums)===null||i===void 0?void 0:i.text)),!((o=this.sums)===null||o===void 0)&&o.html&&(g.innerHTML="".concat((l=this.sums)===null||l===void 0?void 0:l.html)),this.div.innerHTML="",this.div.appendChild(f),this.div.appendChild(g),this.div.title=c,this.div.style.display=""}this.visible=!0},t.prototype.useStyle=function(e){this.sums=e;var r=this.cluster.getClusterer().getStyles(),n=r[Math.min(r.length-1,Math.max(0,e.index-1))];n&&(this.url=n.url,this.height=n.height,this.width=n.width,n.className&&(this.className="".concat(this.clusterClassName," ").concat(n.className)),this.anchorText=n.anchorText||[0,0],this.anchorIcon=n.anchorIcon||[this.height/2,this.width/2],this.textColor=n.textColor||"black",this.textSize=n.textSize||11,this.textDecoration=n.textDecoration||"none",this.fontWeight=n.fontWeight||"bold",this.fontStyle=n.fontStyle||"normal",this.fontFamily=n.fontFamily||"Arial,sans-serif",this.backgroundPosition=n.backgroundPosition||"0 0")},t.prototype.setCenter=function(e){this.center=e},t.prototype.getPosFromLatLng=function(e){var r=this.getProjection().fromLatLngToDivPixel(e);return r!==null&&(r.x-=this.anchorIcon[1],r.y-=this.anchorIcon[0]),r},t})(),Nl=(function(){function t(e){this.markerClusterer=e,this.map=this.markerClusterer.getMap(),this.gridSize=this.markerClusterer.getGridSize(),this.minClusterSize=this.markerClusterer.getMinimumClusterSize(),this.averageCenter=this.markerClusterer.getAverageCenter(),this.markers=[],this.center=void 0,this.bounds=null,this.clusterIcon=new jl(this,this.markerClusterer.getStyles()),this.getSize=this.getSize.bind(this),this.getMarkers=this.getMarkers.bind(this),this.getCenter=this.getCenter.bind(this),this.getMap=this.getMap.bind(this),this.getClusterer=this.getClusterer.bind(this),this.getBounds=this.getBounds.bind(this),this.remove=this.remove.bind(this),this.addMarker=this.addMarker.bind(this),this.isMarkerInClusterBounds=this.isMarkerInClusterBounds.bind(this),this.calculateBounds=this.calculateBounds.bind(this),this.updateIcon=this.updateIcon.bind(this),this.isMarkerAlreadyAdded=this.isMarkerAlreadyAdded.bind(this)}return t.prototype.getSize=function(){return this.markers.length},t.prototype.getMarkers=function(){return this.markers},t.prototype.getCenter=function(){return this.center},t.prototype.getMap=function(){return this.map},t.prototype.getClusterer=function(){return this.markerClusterer},t.prototype.getBounds=function(){for(var e=new google.maps.LatLngBounds(this.center,this.center),r=this.getMarkers(),n=0,i=r;n<i.length;n++){var o=i[n],l=o.getPosition();l&&e.extend(l)}return e},t.prototype.remove=function(){this.clusterIcon.setMap(null),this.markers=[],delete this.markers},t.prototype.addMarker=function(e){var r;if(this.isMarkerAlreadyAdded(e))return!1;if(this.center){if(this.averageCenter){var n=e.getPosition();if(n){var i=this.markers.length+1;this.center=new google.maps.LatLng((this.center.lat()*(i-1)+n.lat())/i,(this.center.lng()*(i-1)+n.lng())/i),this.calculateBounds()}}}else{var n=e.getPosition();n&&(this.center=n,this.calculateBounds())}e.isAdded=!0,this.markers.push(e);var o=this.markers.length,l=this.markerClusterer.getMaxZoom(),c=(r=this.map)===null||r===void 0?void 0:r.getZoom();if(l!==null&&typeof c<"u"&&c>l)e.getMap()!==this.map&&e.setMap(this.map);else if(o<this.minClusterSize)e.getMap()!==this.map&&e.setMap(this.map);else if(o===this.minClusterSize)for(var d=0,p=this.markers;d<p.length;d++){var u=p[d];u.setMap(null)}else e.setMap(null);return!0},t.prototype.isMarkerInClusterBounds=function(e){if(this.bounds!==null){var r=e.getPosition();if(r)return this.bounds.contains(r)}return!1},t.prototype.calculateBounds=function(){this.bounds=this.markerClusterer.getExtendedBounds(new google.maps.LatLngBounds(this.center,this.center))},t.prototype.updateIcon=function(){var e,r=this.markers.length,n=this.markerClusterer.getMaxZoom(),i=(e=this.map)===null||e===void 0?void 0:e.getZoom();if(n!==null&&typeof i<"u"&&i>n){this.clusterIcon.hide();return}if(r<this.minClusterSize){this.clusterIcon.hide();return}this.center&&this.clusterIcon.setCenter(this.center),this.clusterIcon.useStyle(this.markerClusterer.getCalculator()(this.markers,this.markerClusterer.getStyles().length)),this.clusterIcon.show()},t.prototype.isMarkerAlreadyAdded=function(e){if(this.markers.includes)return this.markers.includes(e);for(var r=0;r<this.markers.length;r++)if(e===this.markers[r])return!0;return!1},t})();function Ll(t,e){var r=t.length,n=r.toString().length,i=Math.min(n,e);return{text:r.toString(),index:i,title:""}}var Cl=2e3,Sl=500,kl="https://developers.google.com/maps/documentation/javascript/examples/markerclusterer/m",El="png",Pl=[53,56,66,78,90],Ml="cluster",wi=(function(){function t(e,r,n){r===void 0&&(r=[]),n===void 0&&(n={}),this.getMinimumClusterSize=this.getMinimumClusterSize.bind(this),this.setMinimumClusterSize=this.setMinimumClusterSize.bind(this),this.getEnableRetinaIcons=this.getEnableRetinaIcons.bind(this),this.setEnableRetinaIcons=this.setEnableRetinaIcons.bind(this),this.addToClosestCluster=this.addToClosestCluster.bind(this),this.getImageExtension=this.getImageExtension.bind(this),this.setImageExtension=this.setImageExtension.bind(this),this.getExtendedBounds=this.getExtendedBounds.bind(this),this.getAverageCenter=this.getAverageCenter.bind(this),this.setAverageCenter=this.setAverageCenter.bind(this),this.getTotalClusters=this.getTotalClusters.bind(this),this.fitMapToMarkers=this.fitMapToMarkers.bind(this),this.getIgnoreHidden=this.getIgnoreHidden.bind(this),this.setIgnoreHidden=this.setIgnoreHidden.bind(this),this.getClusterClass=this.getClusterClass.bind(this),this.setClusterClass=this.setClusterClass.bind(this),this.getTotalMarkers=this.getTotalMarkers.bind(this),this.getZoomOnClick=this.getZoomOnClick.bind(this),this.setZoomOnClick=this.setZoomOnClick.bind(this),this.getBatchSizeIE=this.getBatchSizeIE.bind(this),this.setBatchSizeIE=this.setBatchSizeIE.bind(this),this.createClusters=this.createClusters.bind(this),this.onZoomChanged=this.onZoomChanged.bind(this),this.getImageSizes=this.getImageSizes.bind(this),this.setImageSizes=this.setImageSizes.bind(this),this.getCalculator=this.getCalculator.bind(this),this.setCalculator=this.setCalculator.bind(this),this.removeMarkers=this.removeMarkers.bind(this),this.resetViewport=this.resetViewport.bind(this),this.getImagePath=this.getImagePath.bind(this),this.setImagePath=this.setImagePath.bind(this),this.pushMarkerTo=this.pushMarkerTo.bind(this),this.removeMarker=this.removeMarker.bind(this),this.clearMarkers=this.clearMarkers.bind(this),this.setupStyles=this.setupStyles.bind(this),this.getGridSize=this.getGridSize.bind(this),this.setGridSize=this.setGridSize.bind(this),this.getClusters=this.getClusters.bind(this),this.getMaxZoom=this.getMaxZoom.bind(this),this.setMaxZoom=this.setMaxZoom.bind(this),this.getMarkers=this.getMarkers.bind(this),this.addMarkers=this.addMarkers.bind(this),this.getStyles=this.getStyles.bind(this),this.setStyles=this.setStyles.bind(this),this.addMarker=this.addMarker.bind(this),this.onRemove=this.onRemove.bind(this),this.getTitle=this.getTitle.bind(this),this.setTitle=this.setTitle.bind(this),this.repaint=this.repaint.bind(this),this.onIdle=this.onIdle.bind(this),this.redraw=this.redraw.bind(this),this.onAdd=this.onAdd.bind(this),this.draw=this.draw.bind(this),this.extend=this.extend.bind(this),this.extend(t,google.maps.OverlayView),this.markers=[],this.clusters=[],this.listeners=[],this.activeMap=null,this.ready=!1,this.gridSize=n.gridSize||60,this.minClusterSize=n.minimumClusterSize||2,this.maxZoom=n.maxZoom||null,this.styles=n.styles||[],this.title=n.title||"",this.zoomOnClick=!0,n.zoomOnClick!==void 0&&(this.zoomOnClick=n.zoomOnClick),this.averageCenter=!1,n.averageCenter!==void 0&&(this.averageCenter=n.averageCenter),this.ignoreHidden=!1,n.ignoreHidden!==void 0&&(this.ignoreHidden=n.ignoreHidden),this.enableRetinaIcons=!1,n.enableRetinaIcons!==void 0&&(this.enableRetinaIcons=n.enableRetinaIcons),this.imagePath=n.imagePath||kl,this.imageExtension=n.imageExtension||El,this.imageSizes=n.imageSizes||Pl,this.calculator=n.calculator||Ll,this.batchSize=n.batchSize||Cl,this.batchSizeIE=n.batchSizeIE||Sl,this.clusterClass=n.clusterClass||Ml,navigator.userAgent.toLowerCase().indexOf("msie")!==-1&&(this.batchSize=this.batchSizeIE),this.timerRefStatic=null,this.setupStyles(),this.addMarkers(r,!0),this.setMap(e)}return t.prototype.onZoomChanged=function(){var e,r;this.resetViewport(!1),(((e=this.getMap())===null||e===void 0?void 0:e.getZoom())===(this.get("minZoom")||0)||((r=this.getMap())===null||r===void 0?void 0:r.getZoom())===this.get("maxZoom"))&&google.maps.event.trigger(this,"idle")},t.prototype.onIdle=function(){this.redraw()},t.prototype.onAdd=function(){var e=this.getMap();this.activeMap=e,this.ready=!0,this.repaint(),e!==null&&(this.listeners=[google.maps.event.addListener(e,"zoom_changed",this.onZoomChanged),google.maps.event.addListener(e,"idle",this.onIdle)])},t.prototype.onRemove=function(){for(var e=0,r=this.markers;e<r.length;e++){var n=r[e];n.getMap()!==this.activeMap&&n.setMap(this.activeMap)}for(var i=0,o=this.clusters;i<o.length;i++){var l=o[i];l.remove()}this.clusters=[];for(var c=0,d=this.listeners;c<d.length;c++){var p=d[c];google.maps.event.removeListener(p)}this.listeners=[],this.activeMap=null,this.ready=!1},t.prototype.draw=function(){},t.prototype.getMap=function(){return null},t.prototype.getPanes=function(){return null},t.prototype.getProjection=function(){return{fromContainerPixelToLatLng:function(){return null},fromDivPixelToLatLng:function(){return null},fromLatLngToContainerPixel:function(){return null},fromLatLngToDivPixel:function(){return null},getVisibleRegion:function(){return null},getWorldWidth:function(){return 0}}},t.prototype.setMap=function(){},t.prototype.addListener=function(){return{remove:function(){}}},t.prototype.bindTo=function(){},t.prototype.get=function(){},t.prototype.notify=function(){},t.prototype.set=function(){},t.prototype.setValues=function(){},t.prototype.unbind=function(){},t.prototype.unbindAll=function(){},t.prototype.setupStyles=function(){if(!(this.styles.length>0))for(var e=0;e<this.imageSizes.length;e++)this.styles.push({url:"".concat(this.imagePath+(e+1),".").concat(this.imageExtension),height:this.imageSizes[e]||0,width:this.imageSizes[e]||0})},t.prototype.fitMapToMarkers=function(){for(var e=this.getMarkers(),r=new google.maps.LatLngBounds,n=0,i=e;n<i.length;n++){var o=i[n],l=o.getPosition();l&&r.extend(l)}var c=this.getMap();c!==null&&"fitBounds"in c&&c.fitBounds(r)},t.prototype.getGridSize=function(){return this.gridSize},t.prototype.setGridSize=function(e){this.gridSize=e},t.prototype.getMinimumClusterSize=function(){return this.minClusterSize},t.prototype.setMinimumClusterSize=function(e){this.minClusterSize=e},t.prototype.getMaxZoom=function(){return this.maxZoom},t.prototype.setMaxZoom=function(e){this.maxZoom=e},t.prototype.getStyles=function(){return this.styles},t.prototype.setStyles=function(e){this.styles=e},t.prototype.getTitle=function(){return this.title},t.prototype.setTitle=function(e){this.title=e},t.prototype.getZoomOnClick=function(){return this.zoomOnClick},t.prototype.setZoomOnClick=function(e){this.zoomOnClick=e},t.prototype.getAverageCenter=function(){return this.averageCenter},t.prototype.setAverageCenter=function(e){this.averageCenter=e},t.prototype.getIgnoreHidden=function(){return this.ignoreHidden},t.prototype.setIgnoreHidden=function(e){this.ignoreHidden=e},t.prototype.getEnableRetinaIcons=function(){return this.enableRetinaIcons},t.prototype.setEnableRetinaIcons=function(e){this.enableRetinaIcons=e},t.prototype.getImageExtension=function(){return this.imageExtension},t.prototype.setImageExtension=function(e){this.imageExtension=e},t.prototype.getImagePath=function(){return this.imagePath},t.prototype.setImagePath=function(e){this.imagePath=e},t.prototype.getImageSizes=function(){return this.imageSizes},t.prototype.setImageSizes=function(e){this.imageSizes=e},t.prototype.getCalculator=function(){return this.calculator},t.prototype.setCalculator=function(e){this.calculator=e},t.prototype.getBatchSizeIE=function(){return this.batchSizeIE},t.prototype.setBatchSizeIE=function(e){this.batchSizeIE=e},t.prototype.getClusterClass=function(){return this.clusterClass},t.prototype.setClusterClass=function(e){this.clusterClass=e},t.prototype.getMarkers=function(){return this.markers},t.prototype.getTotalMarkers=function(){return this.markers.length},t.prototype.getClusters=function(){return this.clusters},t.prototype.getTotalClusters=function(){return this.clusters.length},t.prototype.addMarker=function(e,r){this.pushMarkerTo(e),r||this.redraw()},t.prototype.addMarkers=function(e,r){for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var i=e[n];i&&this.pushMarkerTo(i)}r||this.redraw()},t.prototype.pushMarkerTo=function(e){var r=this;e.getDraggable()&&google.maps.event.addListener(e,"dragend",function(){r.ready&&(e.isAdded=!1,r.repaint())}),e.isAdded=!1,this.markers.push(e)},t.prototype.removeMarker_=function(e){var r=-1;if(this.markers.indexOf)r=this.markers.indexOf(e);else for(var n=0;n<this.markers.length;n++)if(e===this.markers[n]){r=n;break}return r===-1?!1:(e.setMap(null),this.markers.splice(r,1),!0)},t.prototype.removeMarker=function(e,r){var n=this.removeMarker_(e);return!r&&n&&this.repaint(),n},t.prototype.removeMarkers=function(e,r){for(var n=!1,i=0,o=e;i<o.length;i++){var l=o[i];n=n||this.removeMarker_(l)}return!r&&n&&this.repaint(),n},t.prototype.clearMarkers=function(){this.resetViewport(!0),this.markers=[]},t.prototype.repaint=function(){var e=this.clusters.slice();this.clusters=[],this.resetViewport(!1),this.redraw(),setTimeout(function(){for(var n=0,i=e;n<i.length;n++){var o=i[n];o.remove()}},0)},t.prototype.getExtendedBounds=function(e){var r=this.getProjection(),n=r.fromLatLngToDivPixel(new google.maps.LatLng(e.getNorthEast().lat(),e.getNorthEast().lng()));n!==null&&(n.x+=this.gridSize,n.y-=this.gridSize);var i=r.fromLatLngToDivPixel(new google.maps.LatLng(e.getSouthWest().lat(),e.getSouthWest().lng()));if(i!==null&&(i.x-=this.gridSize,i.y+=this.gridSize),n!==null){var o=r.fromDivPixelToLatLng(n);o!==null&&e.extend(o)}if(i!==null){var l=r.fromDivPixelToLatLng(i);l!==null&&e.extend(l)}return e},t.prototype.redraw=function(){this.createClusters(0)},t.prototype.resetViewport=function(e){for(var r=0,n=this.clusters;r<n.length;r++){var i=n[r];i.remove()}this.clusters=[];for(var o=0,l=this.markers;o<l.length;o++){var c=l[o];c.isAdded=!1,e&&c.setMap(null)}},t.prototype.distanceBetweenPoints=function(e,r){var n=6371,i=(r.lat()-e.lat())*Math.PI/180,o=(r.lng()-e.lng())*Math.PI/180,l=Math.sin(i/2)*Math.sin(i/2)+Math.cos(e.lat()*Math.PI/180)*Math.cos(r.lat()*Math.PI/180)*Math.sin(o/2)*Math.sin(o/2);return n*(2*Math.atan2(Math.sqrt(l),Math.sqrt(1-l)))},t.prototype.isMarkerInBounds=function(e,r){var n=e.getPosition();return n?r.contains(n):!1},t.prototype.addToClosestCluster=function(e){for(var r,n=4e4,i=null,o=0,l=this.clusters;o<l.length;o++){var c=l[o];r=c;var d=r.getCenter(),p=e.getPosition();if(d&&p){var u=this.distanceBetweenPoints(d,p);u<n&&(n=u,i=r)}}i&&i.isMarkerInClusterBounds(e)?i.addMarker(e):(r=new Nl(this),r.addMarker(e),this.clusters.push(r))},t.prototype.createClusters=function(e){var r=this;if(this.ready){e===0&&(google.maps.event.trigger(this,"clusteringbegin",this),this.timerRefStatic!==null&&(window.clearTimeout(this.timerRefStatic),delete this.timerRefStatic));for(var n=this.getMap(),i=n!==null&&("getBounds"in n)?n.getBounds():null,o=n?.getZoom()||0,l=o>3?new google.maps.LatLngBounds(i?.getSouthWest(),i?.getNorthEast()):new google.maps.LatLngBounds(new google.maps.LatLng(85.02070771743472,-178.48388434375),new google.maps.LatLng(-85.08136444384544,178.00048865625)),c=this.getExtendedBounds(l),d=Math.min(e+this.batchSize,this.markers.length),p=e;p<d;p++){var u=this.markers[p];u&&!u.isAdded&&this.isMarkerInBounds(u,c)&&(!this.ignoreHidden||this.ignoreHidden&&u.getVisible())&&this.addToClosestCluster(u)}if(d<this.markers.length)this.timerRefStatic=window.setTimeout(function(){r.createClusters(d)},0);else{this.timerRefStatic=null,google.maps.event.trigger(this,"clusteringend",this);for(var h=0,f=this.clusters;h<f.length;h++){var g=f[h];g.updateIcon()}}}},t.prototype.extend=function(e,r){return(function(i){for(var o in i.prototype){var l=o;this.prototype[l]=i.prototype[l]}return this}).apply(e,[r])},t})();function Dr(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Dl(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Dr(Object(r),!0).forEach(function(n){k(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Dr(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var Le={onClick:"click",onClusteringBegin:"clusteringbegin",onClusteringEnd:"clusteringend",onMouseOut:"mouseout",onMouseOver:"mouseover"},oe={averageCenter(t,e){t.setAverageCenter(e)},batchSizeIE(t,e){t.setBatchSizeIE(e)},calculator(t,e){t.setCalculator(e)},clusterClass(t,e){t.setClusterClass(e)},enableRetinaIcons(t,e){t.setEnableRetinaIcons(e)},gridSize(t,e){t.setGridSize(e)},ignoreHidden(t,e){t.setIgnoreHidden(e)},imageExtension(t,e){t.setImageExtension(e)},imagePath(t,e){t.setImagePath(e)},imageSizes(t,e){t.setImageSizes(e)},maxZoom(t,e){t.setMaxZoom(e)},minimumClusterSize(t,e){t.setMinimumClusterSize(e)},styles(t,e){t.setStyles(e)},title(t,e){t.setTitle(e)},zoomOnClick(t,e){t.setZoomOnClick(e)}},Ol={};function Al(t){var{children:e,options:r,averageCenter:n,batchSizeIE:i,calculator:o,clusterClass:l,enableRetinaIcons:c,gridSize:d,ignoreHidden:p,imageExtension:u,imagePath:h,imageSizes:f,maxZoom:g,minimumClusterSize:m,styles:N,title:x,zoomOnClick:y,onClick:L,onClusteringBegin:M,onClusteringEnd:b,onMouseOver:j,onMouseOut:v,onLoad:w,onUnmount:E}=t,[S,D]=a.useState(null),O=a.useContext(K),[A,B]=a.useState(null),[T,z]=a.useState(null),[W,ee]=a.useState(null),[H,X]=a.useState(null),[Y,se]=a.useState(null);return a.useEffect(()=>{S&&v&&(H!==null&&google.maps.event.removeListener(H),X(google.maps.event.addListener(S,Le.onMouseOut,v)))},[v]),a.useEffect(()=>{S&&j&&(Y!==null&&google.maps.event.removeListener(Y),se(google.maps.event.addListener(S,Le.onMouseOver,j)))},[j]),a.useEffect(()=>{S&&L&&(A!==null&&google.maps.event.removeListener(A),B(google.maps.event.addListener(S,Le.onClick,L)))},[L]),a.useEffect(()=>{S&&M&&(T!==null&&google.maps.event.removeListener(T),z(google.maps.event.addListener(S,Le.onClusteringBegin,M)))},[M]),a.useEffect(()=>{S&&b&&(W!==null&&google.maps.event.removeListener(W),z(google.maps.event.addListener(S,Le.onClusteringEnd,b)))},[b]),a.useEffect(()=>{typeof n<"u"&&S!==null&&oe.averageCenter(S,n)},[S,n]),a.useEffect(()=>{typeof i<"u"&&S!==null&&oe.batchSizeIE(S,i)},[S,i]),a.useEffect(()=>{typeof o<"u"&&S!==null&&oe.calculator(S,o)},[S,o]),a.useEffect(()=>{typeof l<"u"&&S!==null&&oe.clusterClass(S,l)},[S,l]),a.useEffect(()=>{typeof c<"u"&&S!==null&&oe.enableRetinaIcons(S,c)},[S,c]),a.useEffect(()=>{typeof d<"u"&&S!==null&&oe.gridSize(S,d)},[S,d]),a.useEffect(()=>{typeof p<"u"&&S!==null&&oe.ignoreHidden(S,p)},[S,p]),a.useEffect(()=>{typeof u<"u"&&S!==null&&oe.imageExtension(S,u)},[S,u]),a.useEffect(()=>{typeof h<"u"&&S!==null&&oe.imagePath(S,h)},[S,h]),a.useEffect(()=>{typeof f<"u"&&S!==null&&oe.imageSizes(S,f)},[S,f]),a.useEffect(()=>{typeof g<"u"&&S!==null&&oe.maxZoom(S,g)},[S,g]),a.useEffect(()=>{typeof m<"u"&&S!==null&&oe.minimumClusterSize(S,m)},[S,m]),a.useEffect(()=>{typeof N<"u"&&S!==null&&oe.styles(S,N)},[S,N]),a.useEffect(()=>{typeof x<"u"&&S!==null&&oe.title(S,x)},[S,x]),a.useEffect(()=>{typeof y<"u"&&S!==null&&oe.zoomOnClick(S,y)},[S,y]),a.useEffect(()=>{if(O){var re=Dl({},r||Ol),U=new wi(O,[],re);return n&&oe.averageCenter(U,n),i&&oe.batchSizeIE(U,i),o&&oe.calculator(U,o),l&&oe.clusterClass(U,l),c&&oe.enableRetinaIcons(U,c),d&&oe.gridSize(U,d),p&&oe.ignoreHidden(U,p),u&&oe.imageExtension(U,u),h&&oe.imagePath(U,h),f&&oe.imageSizes(U,f),g&&oe.maxZoom(U,g),m&&oe.minimumClusterSize(U,m),N&&oe.styles(U,N),x&&oe.title(U,x),y&&oe.zoomOnClick(U,y),v&&X(google.maps.event.addListener(U,Le.onMouseOut,v)),j&&se(google.maps.event.addListener(U,Le.onMouseOver,j)),L&&B(google.maps.event.addListener(U,Le.onClick,L)),M&&z(google.maps.event.addListener(U,Le.onClusteringBegin,M)),b&&ee(google.maps.event.addListener(U,Le.onClusteringEnd,b)),D(U),w&&w(U),()=>{H!==null&&google.maps.event.removeListener(H),Y!==null&&google.maps.event.removeListener(Y),A!==null&&google.maps.event.removeListener(A),T!==null&&google.maps.event.removeListener(T),W!==null&&google.maps.event.removeListener(W),E&&E(U)}}},[]),S!==null&&e(S)||null}a.memo(Al);class Il extends a.PureComponent{constructor(){super(...arguments),k(this,"registeredEvents",[]),k(this,"state",{markerClusterer:null}),k(this,"setClustererCallback",()=>{this.state.markerClusterer!==null&&this.props.onLoad&&this.props.onLoad(this.state.markerClusterer)})}componentDidMount(){if(this.context){var e=new wi(this.context,[],this.props.options);this.registeredEvents=J({updaterMap:oe,eventMap:Le,prevProps:{},nextProps:this.props,instance:e}),this.setState(()=>({markerClusterer:e}),this.setClustererCallback)}}componentDidUpdate(e){this.state.markerClusterer&&(Q(this.registeredEvents),this.registeredEvents=J({updaterMap:oe,eventMap:Le,prevProps:e,nextProps:this.props,instance:this.state.markerClusterer}))}componentWillUnmount(){this.state.markerClusterer!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.markerClusterer),Q(this.registeredEvents),this.state.markerClusterer.setMap(null))}render(){return this.state.markerClusterer!==null?this.props.children(this.state.markerClusterer):null}}k(Il,"contextType",K);function Or(t){t.cancelBubble=!0,t.stopPropagation&&t.stopPropagation()}var ji=(function(){function t(e){e===void 0&&(e={}),this.getCloseClickHandler=this.getCloseClickHandler.bind(this),this.closeClickHandler=this.closeClickHandler.bind(this),this.createInfoBoxDiv=this.createInfoBoxDiv.bind(this),this.addClickHandler=this.addClickHandler.bind(this),this.getCloseBoxImg=this.getCloseBoxImg.bind(this),this.getBoxWidths=this.getBoxWidths.bind(this),this.setBoxStyle=this.setBoxStyle.bind(this),this.setPosition=this.setPosition.bind(this),this.getPosition=this.getPosition.bind(this),this.setOptions=this.setOptions.bind(this),this.setContent=this.setContent.bind(this),this.setVisible=this.setVisible.bind(this),this.getContent=this.getContent.bind(this),this.getVisible=this.getVisible.bind(this),this.setZIndex=this.setZIndex.bind(this),this.getZIndex=this.getZIndex.bind(this),this.onRemove=this.onRemove.bind(this),this.panBox=this.panBox.bind(this),this.extend=this.extend.bind(this),this.close=this.close.bind(this),this.draw=this.draw.bind(this),this.show=this.show.bind(this),this.hide=this.hide.bind(this),this.open=this.open.bind(this),this.extend(t,google.maps.OverlayView),this.content=e.content||"",this.disableAutoPan=e.disableAutoPan||!1,this.maxWidth=e.maxWidth||0,this.pixelOffset=e.pixelOffset||new google.maps.Size(0,0),this.position=e.position||new google.maps.LatLng(0,0),this.zIndex=e.zIndex||null,this.boxClass=e.boxClass||"infoBox",this.boxStyle=e.boxStyle||{},this.closeBoxMargin=e.closeBoxMargin||"2px",this.closeBoxURL=e.closeBoxURL||"http://www.google.com/intl/en_us/mapfiles/close.gif",e.closeBoxURL===""&&(this.closeBoxURL=""),this.infoBoxClearance=e.infoBoxClearance||new google.maps.Size(1,1),typeof e.visible>"u"&&(typeof e.isHidden>"u"?e.visible=!0:e.visible=!e.isHidden),this.isHidden=!e.visible,this.alignBottom=e.alignBottom||!1,this.pane=e.pane||"floatPane",this.enableEventPropagation=e.enableEventPropagation||!1,this.div=null,this.closeListener=null,this.moveListener=null,this.mapListener=null,this.contextListener=null,this.eventListeners=null,this.fixedWidthSet=null}return t.prototype.createInfoBoxDiv=function(){var e=this,r=function(u){u.returnValue=!1,u.preventDefault&&u.preventDefault(),e.enableEventPropagation||Or(u)};if(!this.div){this.div=document.createElement("div"),this.setBoxStyle(),typeof this.content=="string"?this.div.innerHTML=this.getCloseBoxImg()+this.content:(this.div.innerHTML=this.getCloseBoxImg(),this.div.appendChild(this.content));var n=this.getPanes();if(n!==null&&n[this.pane].appendChild(this.div),this.addClickHandler(),this.div.style.width)this.fixedWidthSet=!0;else if(this.maxWidth!==0&&this.div.offsetWidth>this.maxWidth)this.div.style.width=this.maxWidth+"px",this.fixedWidthSet=!0;else{var i=this.getBoxWidths();this.div.style.width=this.div.offsetWidth-i.left-i.right+"px",this.fixedWidthSet=!1}if(this.panBox(this.disableAutoPan),!this.enableEventPropagation){this.eventListeners=[];for(var o=["mousedown","mouseover","mouseout","mouseup","click","dblclick","touchstart","touchend","touchmove"],l=0,c=o;l<c.length;l++){var d=c[l];this.eventListeners.push(google.maps.event.addListener(this.div,d,Or))}this.eventListeners.push(google.maps.event.addListener(this.div,"mouseover",function(){e.div&&(e.div.style.cursor="default")}))}this.contextListener=google.maps.event.addListener(this.div,"contextmenu",r),google.maps.event.trigger(this,"domready")}},t.prototype.getCloseBoxImg=function(){var e="";return this.closeBoxURL!==""&&(e='<img alt=""',e+=' aria-hidden="true"',e+=" src='"+this.closeBoxURL+"'",e+=" align=right",e+=" style='",e+=" position: relative;",e+=" cursor: pointer;",e+=" margin: "+this.closeBoxMargin+";",e+="'>"),e},t.prototype.addClickHandler=function(){this.closeListener=this.div&&this.div.firstChild&&this.closeBoxURL!==""?google.maps.event.addListener(this.div.firstChild,"click",this.getCloseClickHandler()):null},t.prototype.closeClickHandler=function(e){e.cancelBubble=!0,e.stopPropagation&&e.stopPropagation(),google.maps.event.trigger(this,"closeclick"),this.close()},t.prototype.getCloseClickHandler=function(){return this.closeClickHandler},t.prototype.panBox=function(e){if(this.div&&!e){var r=this.getMap();if(r instanceof google.maps.Map){var n=0,i=0,o=r.getBounds();o&&!o.contains(this.position)&&r.setCenter(this.position);var l=r.getDiv(),c=l.offsetWidth,d=l.offsetHeight,p=this.pixelOffset.width,u=this.pixelOffset.height,h=this.div.offsetWidth,f=this.div.offsetHeight,g=this.infoBoxClearance.width,m=this.infoBoxClearance.height,N=this.getProjection(),x=N.fromLatLngToContainerPixel(this.position);x!==null&&(x.x<-p+g?n=x.x+p-g:x.x+h+p+g>c&&(n=x.x+h+p+g-c),this.alignBottom?x.y<-u+m+f?i=x.y+u-m-f:x.y+u+m>d&&(i=x.y+u+m-d):x.y<-u+m?i=x.y+u-m:x.y+f+u+m>d&&(i=x.y+f+u+m-d)),n===0&&i===0||r.panBy(n,i)}}},t.prototype.setBoxStyle=function(){if(this.div){this.div.className=this.boxClass,this.div.style.cssText="";var e=this.boxStyle;for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(this.div.style[r]=e[r]);if(this.div.style.webkitTransform="translateZ(0)",typeof this.div.style.opacity<"u"&&this.div.style.opacity!==""){var n=parseFloat(this.div.style.opacity||"");this.div.style.msFilter='"progid:DXImageTransform.Microsoft.Alpha(Opacity='+n*100+')"',this.div.style.filter="alpha(opacity="+n*100+")"}this.div.style.position="absolute",this.div.style.visibility="hidden",this.zIndex!==null&&(this.div.style.zIndex=this.zIndex+""),this.div.style.overflow||(this.div.style.overflow="auto")}},t.prototype.getBoxWidths=function(){var e={top:0,bottom:0,left:0,right:0};if(!this.div)return e;if(document.defaultView){var r=this.div.ownerDocument,n=r&&r.defaultView?r.defaultView.getComputedStyle(this.div,""):null;n&&(e.top=parseInt(n.borderTopWidth||"",10)||0,e.bottom=parseInt(n.borderBottomWidth||"",10)||0,e.left=parseInt(n.borderLeftWidth||"",10)||0,e.right=parseInt(n.borderRightWidth||"",10)||0)}else if(document.documentElement.currentStyle){var i=this.div.currentStyle;i&&(e.top=parseInt(i.borderTopWidth||"",10)||0,e.bottom=parseInt(i.borderBottomWidth||"",10)||0,e.left=parseInt(i.borderLeftWidth||"",10)||0,e.right=parseInt(i.borderRightWidth||"",10)||0)}return e},t.prototype.onRemove=function(){this.div&&this.div.parentNode&&(this.div.parentNode.removeChild(this.div),this.div=null)},t.prototype.draw=function(){if(this.createInfoBoxDiv(),this.div){var e=this.getProjection(),r=e.fromLatLngToDivPixel(this.position);r!==null&&(this.div.style.left=r.x+this.pixelOffset.width+"px",this.alignBottom?this.div.style.bottom=-(r.y+this.pixelOffset.height)+"px":this.div.style.top=r.y+this.pixelOffset.height+"px"),this.isHidden?this.div.style.visibility="hidden":this.div.style.visibility="visible"}},t.prototype.setOptions=function(e){e===void 0&&(e={}),typeof e.boxClass<"u"&&(this.boxClass=e.boxClass,this.setBoxStyle()),typeof e.boxStyle<"u"&&(this.boxStyle=e.boxStyle,this.setBoxStyle()),typeof e.content<"u"&&this.setContent(e.content),typeof e.disableAutoPan<"u"&&(this.disableAutoPan=e.disableAutoPan),typeof e.maxWidth<"u"&&(this.maxWidth=e.maxWidth),typeof e.pixelOffset<"u"&&(this.pixelOffset=e.pixelOffset),typeof e.alignBottom<"u"&&(this.alignBottom=e.alignBottom),typeof e.position<"u"&&this.setPosition(e.position),typeof e.zIndex<"u"&&this.setZIndex(e.zIndex),typeof e.closeBoxMargin<"u"&&(this.closeBoxMargin=e.closeBoxMargin),typeof e.closeBoxURL<"u"&&(this.closeBoxURL=e.closeBoxURL),typeof e.infoBoxClearance<"u"&&(this.infoBoxClearance=e.infoBoxClearance),typeof e.isHidden<"u"&&(this.isHidden=e.isHidden),typeof e.visible<"u"&&(this.isHidden=!e.visible),typeof e.enableEventPropagation<"u"&&(this.enableEventPropagation=e.enableEventPropagation),this.div&&this.draw()},t.prototype.setContent=function(e){this.content=e,this.div&&(this.closeListener&&(google.maps.event.removeListener(this.closeListener),this.closeListener=null),this.fixedWidthSet||(this.div.style.width=""),typeof e=="string"?this.div.innerHTML=this.getCloseBoxImg()+e:(this.div.innerHTML=this.getCloseBoxImg(),this.div.appendChild(e)),this.fixedWidthSet||(this.div.style.width=this.div.offsetWidth+"px",typeof e=="string"?this.div.innerHTML=this.getCloseBoxImg()+e:(this.div.innerHTML=this.getCloseBoxImg(),this.div.appendChild(e))),this.addClickHandler()),google.maps.event.trigger(this,"content_changed")},t.prototype.setPosition=function(e){this.position=e,this.div&&this.draw(),google.maps.event.trigger(this,"position_changed")},t.prototype.setVisible=function(e){this.isHidden=!e,this.div&&(this.div.style.visibility=this.isHidden?"hidden":"visible")},t.prototype.setZIndex=function(e){this.zIndex=e,this.div&&(this.div.style.zIndex=e+""),google.maps.event.trigger(this,"zindex_changed")},t.prototype.getContent=function(){return this.content},t.prototype.getPosition=function(){return this.position},t.prototype.getZIndex=function(){return this.zIndex},t.prototype.getVisible=function(){var e=this.getMap();return typeof e>"u"||e===null?!1:!this.isHidden},t.prototype.show=function(){this.isHidden=!1,this.div&&(this.div.style.visibility="visible")},t.prototype.hide=function(){this.isHidden=!0,this.div&&(this.div.style.visibility="hidden")},t.prototype.open=function(e,r){var n=this;r&&(this.position=r.getPosition(),this.moveListener=google.maps.event.addListener(r,"position_changed",function(){var i=r.getPosition();n.setPosition(i)}),this.mapListener=google.maps.event.addListener(r,"map_changed",function(){n.setMap(r.map)})),this.setMap(e),this.div&&this.panBox()},t.prototype.close=function(){if(this.closeListener&&(google.maps.event.removeListener(this.closeListener),this.closeListener=null),this.eventListeners){for(var e=0,r=this.eventListeners;e<r.length;e++){var n=r[e];google.maps.event.removeListener(n)}this.eventListeners=null}this.moveListener&&(google.maps.event.removeListener(this.moveListener),this.moveListener=null),this.mapListener&&(google.maps.event.removeListener(this.mapListener),this.mapListener=null),this.contextListener&&(google.maps.event.removeListener(this.contextListener),this.contextListener=null),this.setMap(null)},t.prototype.extend=function(e,r){return(function(i){for(var o in i.prototype)Object.prototype.hasOwnProperty.call(this,o)||(this.prototype[o]=i.prototype[o]);return this}).apply(e,[r])},t})(),Rl=["position"],Tl=["position"];function Ar(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function cs(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Ar(Object(r),!0).forEach(function(n){k(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ar(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var Ir={onCloseClick:"closeclick",onContentChanged:"content_changed",onDomReady:"domready",onPositionChanged:"position_changed",onZindexChanged:"zindex_changed"},Rr={options(t,e){t.setOptions(e)},position(t,e){e instanceof google.maps.LatLng?t.setPosition(e):t.setPosition(new google.maps.LatLng(e.lat,e.lng))},visible(t,e){t.setVisible(e)},zIndex(t,e){t.setZIndex(e)}},_l={};function Fl(t){var{children:e,anchor:r,options:n,position:i,zIndex:o,onCloseClick:l,onDomReady:c,onContentChanged:d,onPositionChanged:p,onZindexChanged:u,onLoad:h,onUnmount:f}=t,g=a.useContext(K),[m,N]=a.useState(null),[x,y]=a.useState(null),[L,M]=a.useState(null),[b,j]=a.useState(null),[v,w]=a.useState(null),[E,S]=a.useState(null),D=a.useRef(null);return a.useEffect(()=>{g&&m!==null&&(m.close(),r?m.open(g,r):m.getPosition()&&m.open(g))},[g,m,r]),a.useEffect(()=>{n&&m!==null&&m.setOptions(n)},[m,n]),a.useEffect(()=>{if(i&&m!==null){var O=i instanceof google.maps.LatLng?i:new google.maps.LatLng(i.lat,i.lng);m.setPosition(O)}},[i]),a.useEffect(()=>{typeof o=="number"&&m!==null&&m.setZIndex(o)},[o]),a.useEffect(()=>{m&&l&&(x!==null&&google.maps.event.removeListener(x),y(google.maps.event.addListener(m,"closeclick",l)))},[l]),a.useEffect(()=>{m&&c&&(L!==null&&google.maps.event.removeListener(L),M(google.maps.event.addListener(m,"domready",c)))},[c]),a.useEffect(()=>{m&&d&&(b!==null&&google.maps.event.removeListener(b),j(google.maps.event.addListener(m,"content_changed",d)))},[d]),a.useEffect(()=>{m&&p&&(v!==null&&google.maps.event.removeListener(v),w(google.maps.event.addListener(m,"position_changed",p)))},[p]),a.useEffect(()=>{m&&u&&(E!==null&&google.maps.event.removeListener(E),S(google.maps.event.addListener(m,"zindex_changed",u)))},[u]),a.useEffect(()=>{if(g){var O=n||_l,{position:A}=O,B=Gs(O,Rl),T;A&&!(A instanceof google.maps.LatLng)&&(T=new google.maps.LatLng(A.lat,A.lng));var z=new ji(cs(cs({},B),T?{position:T}:{}));D.current=document.createElement("div"),N(z),l&&y(google.maps.event.addListener(z,"closeclick",l)),c&&M(google.maps.event.addListener(z,"domready",c)),d&&j(google.maps.event.addListener(z,"content_changed",d)),p&&w(google.maps.event.addListener(z,"position_changed",p)),u&&S(google.maps.event.addListener(z,"zindex_changed",u)),z.setContent(D.current),r?z.open(g,r):z.getPosition()?z.open(g):pe(!1,"You must provide either an anchor or a position prop for <InfoBox>."),h&&h(z)}return()=>{m!==null&&(x&&google.maps.event.removeListener(x),b&&google.maps.event.removeListener(b),L&&google.maps.event.removeListener(L),v&&google.maps.event.removeListener(v),E&&google.maps.event.removeListener(E),f&&f(m),m.close())}},[]),D.current?bt.createPortal(a.Children.only(e),D.current):null}a.memo(Fl);class Bl extends a.PureComponent{constructor(){super(...arguments),k(this,"registeredEvents",[]),k(this,"containerElement",null),k(this,"state",{infoBox:null}),k(this,"open",(e,r)=>{r?this.context!==null&&e.open(this.context,r):e.getPosition()?this.context!==null&&e.open(this.context):pe(!1,"You must provide either an anchor or a position prop for <InfoBox>.")}),k(this,"setInfoBoxCallback",()=>{this.state.infoBox!==null&&this.containerElement!==null&&(this.state.infoBox.setContent(this.containerElement),this.open(this.state.infoBox,this.props.anchor),this.props.onLoad&&this.props.onLoad(this.state.infoBox))})}componentDidMount(){var e=this.props.options||{},{position:r}=e,n=Gs(e,Tl),i;r&&!(r instanceof google.maps.LatLng)&&(i=new google.maps.LatLng(r.lat,r.lng));var o=new ji(cs(cs({},n),i?{position:i}:{}));this.containerElement=document.createElement("div"),this.registeredEvents=J({updaterMap:Rr,eventMap:Ir,prevProps:{},nextProps:this.props,instance:o}),this.setState({infoBox:o},this.setInfoBoxCallback)}componentDidUpdate(e){var{infoBox:r}=this.state;r!==null&&(Q(this.registeredEvents),this.registeredEvents=J({updaterMap:Rr,eventMap:Ir,prevProps:e,nextProps:this.props,instance:r}))}componentWillUnmount(){var{onUnmount:e}=this.props,{infoBox:r}=this.state;r!==null&&(e&&e(r),Q(this.registeredEvents),r.close())}render(){return this.containerElement?bt.createPortal(a.Children.only(this.props.children),this.containerElement):null}}k(Bl,"contextType",K);var Ls,Tr;function zl(){return Tr||(Tr=1,Ls=function t(e,r){if(e===r)return!0;if(e&&r&&typeof e=="object"&&typeof r=="object"){if(e.constructor!==r.constructor)return!1;var n,i,o;if(Array.isArray(e)){if(n=e.length,n!=r.length)return!1;for(i=n;i--!==0;)if(!t(e[i],r[i]))return!1;return!0}if(e.constructor===RegExp)return e.source===r.source&&e.flags===r.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===r.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===r.toString();if(o=Object.keys(e),n=o.length,n!==Object.keys(r).length)return!1;for(i=n;i--!==0;)if(!Object.prototype.hasOwnProperty.call(r,o[i]))return!1;for(i=n;i--!==0;){var l=o[i];if(!t(e[l],r[l]))return!1}return!0}return e!==e&&r!==r}),Ls}var Ul=zl(),_r=fi(Ul),Fr=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],Cs=1,Ct=8;class Zs{static from(e){if(!(e instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");var[r,n]=new Uint8Array(e,0,2);if(r!==219)throw new Error("Data does not appear to be in a KDBush format.");var i=n>>4;if(i!==Cs)throw new Error("Got v".concat(i," data when expected v").concat(Cs,"."));var o=Fr[n&15];if(!o)throw new Error("Unrecognized array type.");var[l]=new Uint16Array(e,2,1),[c]=new Uint32Array(e,4,1);return new Zs(c,l,o,e)}constructor(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:64,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Float64Array,i=arguments.length>3?arguments[3]:void 0;if(isNaN(e)||e<0)throw new Error("Unpexpected numItems value: ".concat(e,"."));this.numItems=+e,this.nodeSize=Math.min(Math.max(+r,2),65535),this.ArrayType=n,this.IndexArrayType=e<65536?Uint16Array:Uint32Array;var o=Fr.indexOf(this.ArrayType),l=e*2*this.ArrayType.BYTES_PER_ELEMENT,c=e*this.IndexArrayType.BYTES_PER_ELEMENT,d=(8-c%8)%8;if(o<0)throw new Error("Unexpected typed array class: ".concat(n,"."));i&&i instanceof ArrayBuffer?(this.data=i,this.ids=new this.IndexArrayType(this.data,Ct,e),this.coords=new this.ArrayType(this.data,Ct+c+d,e*2),this._pos=e*2,this._finished=!0):(this.data=new ArrayBuffer(Ct+l+c+d),this.ids=new this.IndexArrayType(this.data,Ct,e),this.coords=new this.ArrayType(this.data,Ct+c+d,e*2),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,(Cs<<4)+o]),new Uint16Array(this.data,2,1)[0]=r,new Uint32Array(this.data,4,1)[0]=e)}add(e,r){var n=this._pos>>1;return this.ids[n]=n,this.coords[this._pos++]=e,this.coords[this._pos++]=r,n}finish(){var e=this._pos>>1;if(e!==this.numItems)throw new Error("Added ".concat(e," items when expected ").concat(this.numItems,"."));return Ts(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(e,r,n,i){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");for(var{ids:o,coords:l,nodeSize:c}=this,d=[0,o.length-1,0],p=[];d.length;){var u=d.pop()||0,h=d.pop()||0,f=d.pop()||0;if(h-f<=c){for(var g=f;g<=h;g++){var m=l[2*g],N=l[2*g+1];m>=e&&m<=n&&N>=r&&N<=i&&p.push(o[g])}continue}var x=f+h>>1,y=l[2*x],L=l[2*x+1];y>=e&&y<=n&&L>=r&&L<=i&&p.push(o[x]),(u===0?e<=y:r<=L)&&(d.push(f),d.push(x-1),d.push(1-u)),(u===0?n>=y:i>=L)&&(d.push(x+1),d.push(h),d.push(1-u))}return p}within(e,r,n){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");for(var{ids:i,coords:o,nodeSize:l}=this,c=[0,i.length-1,0],d=[],p=n*n;c.length;){var u=c.pop()||0,h=c.pop()||0,f=c.pop()||0;if(h-f<=l){for(var g=f;g<=h;g++)Br(o[2*g],o[2*g+1],e,r)<=p&&d.push(i[g]);continue}var m=f+h>>1,N=o[2*m],x=o[2*m+1];Br(N,x,e,r)<=p&&d.push(i[m]),(u===0?e-n<=N:r-n<=x)&&(c.push(f),c.push(m-1),c.push(1-u)),(u===0?e+n>=N:r+n>=x)&&(c.push(m+1),c.push(h),c.push(1-u))}return d}}function Ts(t,e,r,n,i,o){if(!(i-n<=r)){var l=n+i>>1;Ni(t,e,l,n,i,o),Ts(t,e,r,n,l-1,1-o),Ts(t,e,r,l+1,i,1-o)}}function Ni(t,e,r,n,i,o){for(;i>n;){if(i-n>600){var l=i-n+1,c=r-n+1,d=Math.log(l),p=.5*Math.exp(2*d/3),u=.5*Math.sqrt(d*p*(l-p)/l)*(c-l/2<0?-1:1),h=Math.max(n,Math.floor(r-c*p/l+u)),f=Math.min(i,Math.floor(r+(l-c)*p/l+u));Ni(t,e,r,h,f,o)}var g=e[2*r+o],m=n,N=i;for(St(t,e,n,r),e[2*i+o]>g&&St(t,e,n,i);m<N;){for(St(t,e,m,N),m++,N--;e[2*m+o]<g;)m++;for(;e[2*N+o]>g;)N--}e[2*n+o]===g?St(t,e,n,N):(N++,St(t,e,N,i)),N<=r&&(n=N+1),r<=N&&(i=N-1)}}function St(t,e,r,n){Ss(t,r,n),Ss(e,2*r,2*n),Ss(e,2*r+1,2*n+1)}function Ss(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}function Br(t,e,r,n){var i=t-r,o=e-n;return i*i+o*o}var $l={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:t=>t},zr=Math.fround||(t=>e=>(t[0]=+e,t[0]))(new Float32Array(1)),Ke=2,Be=3,ks=4,Fe=5,Li=6;class Hl{constructor(e){this.options=Object.assign(Object.create($l),e),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(e){var{log:r,minZoom:n,maxZoom:i}=this.options;r&&console.time("total time");var o="prepare ".concat(e.length," points");r&&console.time(o),this.points=e;for(var l=[],c=0;c<e.length;c++){var d=e[c];if(d.geometry){var[p,u]=d.geometry.coordinates,h=zr(qt(p)),f=zr(Kt(u));l.push(h,f,1/0,c,-1,1),this.options.reduce&&l.push(0)}}var g=this.trees[i+1]=this._createTree(l);r&&console.timeEnd(o);for(var m=i;m>=n;m--){var N=+Date.now();g=this.trees[m]=this._createTree(this._cluster(g,m)),r&&console.log("z%d: %d clusters in %dms",m,g.numItems,+Date.now()-N)}return r&&console.timeEnd("total time"),this}getClusters(e,r){var n=((e[0]+180)%360+360)%360-180,i=Math.max(-90,Math.min(90,e[1])),o=e[2]===180?180:((e[2]+180)%360+360)%360-180,l=Math.max(-90,Math.min(90,e[3]));if(e[2]-e[0]>=360)n=-180,o=180;else if(n>o){var c=this.getClusters([n,i,180,l],r),d=this.getClusters([-180,i,o,l],r);return c.concat(d)}var p=this.trees[this._limitZoom(r)],u=p.range(qt(n),Kt(l),qt(o),Kt(i)),h=p.data,f=[];for(var g of u){var m=this.stride*g;f.push(h[m+Fe]>1?Ur(h,m,this.clusterProps):this.points[h[m+Be]])}return f}getChildren(e){var r=this._getOriginId(e),n=this._getOriginZoom(e),i="No cluster with the specified id.",o=this.trees[n];if(!o)throw new Error(i);var l=o.data;if(r*this.stride>=l.length)throw new Error(i);var c=this.options.radius/(this.options.extent*Math.pow(2,n-1)),d=l[r*this.stride],p=l[r*this.stride+1],u=o.within(d,p,c),h=[];for(var f of u){var g=f*this.stride;l[g+ks]===e&&h.push(l[g+Fe]>1?Ur(l,g,this.clusterProps):this.points[l[g+Be]])}if(h.length===0)throw new Error(i);return h}getLeaves(e,r,n){r=r||10,n=n||0;var i=[];return this._appendLeaves(i,e,r,n,0),i}getTile(e,r,n){var i=this.trees[this._limitZoom(e)],o=Math.pow(2,e),{extent:l,radius:c}=this.options,d=c/l,p=(n-d)/o,u=(n+1+d)/o,h={features:[]};return this._addTileFeatures(i.range((r-d)/o,p,(r+1+d)/o,u),i.data,r,n,o,h),r===0&&this._addTileFeatures(i.range(1-d/o,p,1,u),i.data,o,n,o,h),r===o-1&&this._addTileFeatures(i.range(0,p,d/o,u),i.data,-1,n,o,h),h.features.length?h:null}getClusterExpansionZoom(e){for(var r=this._getOriginZoom(e)-1;r<=this.options.maxZoom;){var n=this.getChildren(e);if(r++,n.length!==1)break;e=n[0].properties.cluster_id}return r}_appendLeaves(e,r,n,i,o){var l=this.getChildren(r);for(var c of l){var d=c.properties;if(d&&d.cluster?o+d.point_count<=i?o+=d.point_count:o=this._appendLeaves(e,d.cluster_id,n,i,o):o<i?o++:e.push(c),e.length===n)break}return o}_createTree(e){for(var r=new Zs(e.length/this.stride|0,this.options.nodeSize,Float32Array),n=0;n<e.length;n+=this.stride)r.add(e[n],e[n+1]);return r.finish(),r.data=e,r}_addTileFeatures(e,r,n,i,o,l){for(var c of e){var d=c*this.stride,p=r[d+Fe]>1,u=void 0,h=void 0,f=void 0;if(p)u=Ci(r,d,this.clusterProps),h=r[d],f=r[d+1];else{var g=this.points[r[d+Be]];u=g.properties;var[m,N]=g.geometry.coordinates;h=qt(m),f=Kt(N)}var x={type:1,geometry:[[Math.round(this.options.extent*(h*o-n)),Math.round(this.options.extent*(f*o-i))]],tags:u},y=void 0;p||this.options.generateId?y=r[d+Be]:y=this.points[r[d+Be]].id,y!==void 0&&(x.id=y),l.features.push(x)}}_limitZoom(e){return Math.max(this.options.minZoom,Math.min(Math.floor(+e),this.options.maxZoom+1))}_cluster(e,r){for(var{radius:n,extent:i,reduce:o,minPoints:l}=this.options,c=n/(i*Math.pow(2,r)),d=e.data,p=[],u=this.stride,h=0;h<d.length;h+=u)if(!(d[h+Ke]<=r)){d[h+Ke]=r;var f=d[h],g=d[h+1],m=e.within(d[h],d[h+1],c),N=d[h+Fe],x=N;for(var y of m){var L=y*u;d[L+Ke]>r&&(x+=d[L+Fe])}if(x>N&&x>=l){var M=f*N,b=g*N,j=void 0,v=-1,w=((h/u|0)<<5)+(r+1)+this.points.length;for(var E of m){var S=E*u;if(!(d[S+Ke]<=r)){d[S+Ke]=r;var D=d[S+Fe];M+=d[S]*D,b+=d[S+1]*D,d[S+ks]=w,o&&(j||(j=this._map(d,h,!0),v=this.clusterProps.length,this.clusterProps.push(j)),o(j,this._map(d,S)))}}d[h+ks]=w,p.push(M/x,b/x,1/0,w,-1,x),o&&p.push(v)}else{for(var O=0;O<u;O++)p.push(d[h+O]);if(x>1)for(var A of m){var B=A*u;if(!(d[B+Ke]<=r)){d[B+Ke]=r;for(var T=0;T<u;T++)p.push(d[B+T])}}}}return p}_getOriginId(e){return e-this.points.length>>5}_getOriginZoom(e){return(e-this.points.length)%32}_map(e,r,n){if(e[r+Fe]>1){var i=this.clusterProps[e[r+Li]];return n?Object.assign({},i):i}var o=this.points[e[r+Be]].properties,l=this.options.map(o);return n&&l===o?Object.assign({},l):l}}function Ur(t,e,r){return{type:"Feature",id:t[e+Be],properties:Ci(t,e,r),geometry:{type:"Point",coordinates:[Vl(t[e]),Wl(t[e+1])]}}}function Ci(t,e,r){var n=t[e+Fe],i=n>=1e4?"".concat(Math.round(n/1e3),"k"):n>=1e3?"".concat(Math.round(n/100)/10,"k"):n,o=t[e+Li],l=o===-1?{}:Object.assign({},r[o]);return Object.assign(l,{cluster:!0,cluster_id:t[e+Be],point_count:n,point_count_abbreviated:i})}function qt(t){return t/360+.5}function Kt(t){var e=Math.sin(t*Math.PI/180),r=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return r<0?0:r>1?1:r}function Vl(t){return(t-.5)*360}function Wl(t){var e=(180-t*360)*Math.PI/180;return 360*Math.atan(Math.exp(e))/Math.PI-90}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function Gl(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r}class je{static isAdvancedMarkerAvailable(e){return google.maps.marker&&e.getMapCapabilities().isAdvancedMarkersAvailable===!0}static isAdvancedMarker(e){return google.maps.marker&&e instanceof google.maps.marker.AdvancedMarkerElement}static setMap(e,r){this.isAdvancedMarker(e)?e.map=r:e.setMap(r)}static getPosition(e){if(this.isAdvancedMarker(e)){if(e.position){if(e.position instanceof google.maps.LatLng)return e.position;if(e.position.lat&&e.position.lng)return new google.maps.LatLng(e.position.lat,e.position.lng)}return new google.maps.LatLng(null)}return e.getPosition()}static getVisible(e){return this.isAdvancedMarker(e)?!0:e.getVisible()}}class _s{constructor(e){var{markers:r,position:n}=e;this.markers=r,n&&(n instanceof google.maps.LatLng?this._position=n:this._position=new google.maps.LatLng(n))}get bounds(){if(!(this.markers.length===0&&!this._position)){var e=new google.maps.LatLngBounds(this._position,this._position);for(var r of this.markers)e.extend(je.getPosition(r));return e}}get position(){return this._position||this.bounds.getCenter()}get count(){return this.markers.filter(e=>je.getVisible(e)).length}push(e){this.markers.push(e)}delete(){this.marker&&(je.setMap(this.marker,null),this.marker=void 0),this.markers.length=0}}class Zl{constructor(e){var{maxZoom:r=16}=e;this.maxZoom=r}noop(e){var{markers:r}=e;return ql(r)}}var ql=t=>{var e=t.map(r=>new _s({position:je.getPosition(r),markers:[r]}));return e};class Kl extends Zl{constructor(e){var{maxZoom:r,radius:n=60}=e,i=Gl(e,["maxZoom","radius"]);super({maxZoom:r}),this.state={zoom:-1},this.superCluster=new Hl(Object.assign({maxZoom:this.maxZoom,radius:n},i))}calculate(e){var r=!1,n={zoom:e.map.getZoom()};if(!_r(e.markers,this.markers)){r=!0,this.markers=[...e.markers];var i=this.markers.map(o=>{var l=je.getPosition(o),c=[l.lng(),l.lat()];return{type:"Feature",geometry:{type:"Point",coordinates:c},properties:{marker:o}}});this.superCluster.load(i)}return r||(this.state.zoom<=this.maxZoom||n.zoom<=this.maxZoom)&&(r=!_r(this.state,n)),this.state=n,r&&(this.clusters=this.cluster(e)),{clusters:this.clusters,changed:r}}cluster(e){var{map:r}=e;return this.superCluster.getClusters([-180,-90,180,90],Math.round(r.getZoom())).map(n=>this.transformCluster(n))}transformCluster(e){var{geometry:{coordinates:[r,n]},properties:i}=e;if(i.cluster)return new _s({markers:this.superCluster.getLeaves(i.cluster_id,1/0).map(l=>l.properties.marker),position:{lat:n,lng:r}});var o=i.marker;return new _s({markers:[o],position:je.getPosition(o)})}}class Yl{constructor(e,r){this.markers={sum:e.length};var n=r.map(o=>o.count),i=n.reduce((o,l)=>o+l,0);this.clusters={count:r.length,markers:{mean:i/r.length,sum:i,min:Math.min(...n),max:Math.max(...n)}}}}class Jl{render(e,r,n){var{count:i,position:o}=e,l=i>Math.max(10,r.clusters.markers.mean)?"#ff0000":"#0000ff",c='<svg fill="'.concat(l,`" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 240 240" width="50" height="50">
<circle cx="120" cy="120" opacity=".6" r="70" />
<circle cx="120" cy="120" opacity=".3" r="90" />
<circle cx="120" cy="120" opacity=".2" r="110" />
<text x="50%" y="50%" style="fill:#fff" text-anchor="middle" font-size="50" dominant-baseline="middle" font-family="roboto,arial,sans-serif">`).concat(i,`</text>
</svg>`),d="Cluster of ".concat(i," markers"),p=Number(google.maps.Marker.MAX_ZINDEX)+i;if(je.isAdvancedMarkerAvailable(n)){var u=new DOMParser,h=u.parseFromString(c,"image/svg+xml").documentElement;h.setAttribute("transform","translate(0 25)");var f={map:n,position:o,zIndex:p,title:d,content:h};return new google.maps.marker.AdvancedMarkerElement(f)}var g={position:o,zIndex:p,title:d,icon:{url:"data:image/svg+xml;base64,".concat(btoa(c)),anchor:new google.maps.Point(25,25)}};return new google.maps.Marker(g)}}function Ql(t,e){for(var r in e.prototype)t.prototype[r]=e.prototype[r]}class qs{constructor(){Ql(qs,google.maps.OverlayView)}}var Pt;(function(t){t.CLUSTERING_BEGIN="clusteringbegin",t.CLUSTERING_END="clusteringend",t.CLUSTER_CLICK="click"})(Pt||(Pt={}));var Xl=(t,e,r)=>{r.fitBounds(e.bounds)};class ec extends qs{constructor(e){var{map:r,markers:n=[],algorithmOptions:i={},algorithm:o=new Kl(i),renderer:l=new Jl,onClusterClick:c=Xl}=e;super(),this.markers=[...n],this.clusters=[],this.algorithm=o,this.renderer=l,this.onClusterClick=c,r&&this.setMap(r)}addMarker(e,r){this.markers.includes(e)||(this.markers.push(e),r||this.render())}addMarkers(e,r){e.forEach(n=>{this.addMarker(n,!0)}),r||this.render()}removeMarker(e,r){var n=this.markers.indexOf(e);return n===-1?!1:(je.setMap(e,null),this.markers.splice(n,1),r||this.render(),!0)}removeMarkers(e,r){var n=!1;return e.forEach(i=>{n=this.removeMarker(i,!0)||n}),n&&!r&&this.render(),n}clearMarkers(e){this.markers.length=0,e||this.render()}render(){var e=this.getMap();if(e instanceof google.maps.Map&&e.getProjection()){google.maps.event.trigger(this,Pt.CLUSTERING_BEGIN,this);var{clusters:r,changed:n}=this.algorithm.calculate({markers:this.markers,map:e,mapCanvasProjection:this.getProjection()});if(n||n==null){var i=new Set;for(var o of r)o.markers.length==1&&i.add(o.markers[0]);var l=[];for(var c of this.clusters)c.marker!=null&&(c.markers.length==1?i.has(c.marker)||je.setMap(c.marker,null):l.push(c.marker));this.clusters=r,this.renderClusters(),requestAnimationFrame(()=>l.forEach(d=>je.setMap(d,null)))}google.maps.event.trigger(this,Pt.CLUSTERING_END,this)}}onAdd(){this.idleListener=this.getMap().addListener("idle",this.render.bind(this)),this.render()}onRemove(){google.maps.event.removeListener(this.idleListener),this.reset()}reset(){this.markers.forEach(e=>je.setMap(e,null)),this.clusters.forEach(e=>e.delete()),this.clusters=[]}renderClusters(){var e=new Yl(this.markers,this.clusters),r=this.getMap();this.clusters.forEach(n=>{n.markers.length===1?n.marker=n.markers[0]:(n.marker=this.renderer.render(n,e,r),n.markers.forEach(i=>je.setMap(i,null)),this.onClusterClick&&n.marker.addListener("click",i=>{google.maps.event.trigger(this,Pt.CLUSTER_CLICK,n),this.onClusterClick(i,n,r)})),je.setMap(n.marker,r)})}}function $r(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Hr(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?$r(Object(r),!0).forEach(function(n){k(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):$r(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function tc(t){var e=Zo(),[r,n]=a.useState(null);return a.useEffect(()=>{if(e&&r===null){var i=new ec(Hr(Hr({},t),{},{map:e}));n(i)}},[e]),r}function sc(t){var{children:e,options:r}=t,n=tc(r);return n!==null?e(n):null}a.memo(sc);var Vr={onCloseClick:"closeclick",onContentChanged:"content_changed",onDomReady:"domready",onPositionChanged:"position_changed",onZindexChanged:"zindex_changed"},Wr={options(t,e){t.setOptions(e)},position(t,e){t.setPosition(e)},zIndex(t,e){t.setZIndex(e)}};function rc(t){var{children:e,anchor:r,options:n,position:i,zIndex:o,onCloseClick:l,onDomReady:c,onContentChanged:d,onPositionChanged:p,onZindexChanged:u,onLoad:h,onUnmount:f}=t,g=a.useContext(K),[m,N]=a.useState(null),[x,y]=a.useState(null),[L,M]=a.useState(null),[b,j]=a.useState(null),[v,w]=a.useState(null),[E,S]=a.useState(null),D=a.useRef(null);return a.useEffect(()=>{m!==null&&(m.close(),r?m.open(g,r):m.getPosition()&&m.open(g))},[g,m,r]),a.useEffect(()=>{n&&m!==null&&m.setOptions(n)},[m,n]),a.useEffect(()=>{i&&m!==null&&m.setPosition(i)},[i]),a.useEffect(()=>{typeof o=="number"&&m!==null&&m.setZIndex(o)},[o]),a.useEffect(()=>{m&&l&&(x!==null&&google.maps.event.removeListener(x),y(google.maps.event.addListener(m,"closeclick",l)))},[l]),a.useEffect(()=>{m&&c&&(L!==null&&google.maps.event.removeListener(L),M(google.maps.event.addListener(m,"domready",c)))},[c]),a.useEffect(()=>{m&&d&&(b!==null&&google.maps.event.removeListener(b),j(google.maps.event.addListener(m,"content_changed",d)))},[d]),a.useEffect(()=>{m&&p&&(v!==null&&google.maps.event.removeListener(v),w(google.maps.event.addListener(m,"position_changed",p)))},[p]),a.useEffect(()=>{m&&u&&(E!==null&&google.maps.event.removeListener(E),S(google.maps.event.addListener(m,"zindex_changed",u)))},[u]),a.useEffect(()=>{var O=new google.maps.InfoWindow(n);return N(O),D.current=document.createElement("div"),l&&y(google.maps.event.addListener(O,"closeclick",l)),c&&M(google.maps.event.addListener(O,"domready",c)),d&&j(google.maps.event.addListener(O,"content_changed",d)),p&&w(google.maps.event.addListener(O,"position_changed",p)),u&&S(google.maps.event.addListener(O,"zindex_changed",u)),O.setContent(D.current),i&&O.setPosition(i),o&&O.setZIndex(o),r?O.open(g,r):O.getPosition()?O.open(g):pe(!1,"You must provide either an anchor (typically render it inside a <Marker>) or a position props for <InfoWindow>."),h&&h(O),()=>{x&&google.maps.event.removeListener(x),b&&google.maps.event.removeListener(b),L&&google.maps.event.removeListener(L),v&&google.maps.event.removeListener(v),E&&google.maps.event.removeListener(E),f&&f(O),O.close()}},[]),D.current?bt.createPortal(a.Children.only(e),D.current):null}a.memo(rc);class nc extends a.PureComponent{constructor(){super(...arguments),k(this,"registeredEvents",[]),k(this,"containerElement",null),k(this,"state",{infoWindow:null}),k(this,"open",(e,r)=>{r?e.open(this.context,r):e.getPosition()?e.open(this.context):pe(!1,"You must provide either an anchor (typically render it inside a <Marker>) or a position props for <InfoWindow>.")}),k(this,"setInfoWindowCallback",()=>{this.state.infoWindow!==null&&this.containerElement!==null&&(this.state.infoWindow.setContent(this.containerElement),this.open(this.state.infoWindow,this.props.anchor),this.props.onLoad&&this.props.onLoad(this.state.infoWindow))})}componentDidMount(){var e=new google.maps.InfoWindow(this.props.options);this.containerElement=document.createElement("div"),this.registeredEvents=J({updaterMap:Wr,eventMap:Vr,prevProps:{},nextProps:this.props,instance:e}),this.setState(()=>({infoWindow:e}),this.setInfoWindowCallback)}componentDidUpdate(e){this.state.infoWindow!==null&&(Q(this.registeredEvents),this.registeredEvents=J({updaterMap:Wr,eventMap:Vr,prevProps:e,nextProps:this.props,instance:this.state.infoWindow}))}componentWillUnmount(){this.state.infoWindow!==null&&(Q(this.registeredEvents),this.props.onUnmount&&this.props.onUnmount(this.state.infoWindow),this.state.infoWindow.close())}render(){return this.containerElement?bt.createPortal(a.Children.only(this.props.children),this.containerElement):null}}k(nc,"contextType",K);function Gr(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function ds(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Gr(Object(r),!0).forEach(function(n){k(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Gr(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var Zr={onClick:"click",onDblClick:"dblclick",onDrag:"drag",onDragEnd:"dragend",onDragStart:"dragstart",onMouseDown:"mousedown",onMouseMove:"mousemove",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onRightClick:"rightclick"},qr={draggable(t,e){t.setDraggable(e)},editable(t,e){t.setEditable(e)},map(t,e){t.setMap(e)},options(t,e){t.setOptions(e)},path(t,e){t.setPath(e)},visible(t,e){t.setVisible(e)}},ic={};function ac(t){var{options:e,draggable:r,editable:n,visible:i,path:o,onDblClick:l,onDragEnd:c,onDragStart:d,onMouseDown:p,onMouseMove:u,onMouseOut:h,onMouseOver:f,onMouseUp:g,onRightClick:m,onClick:N,onDrag:x,onLoad:y,onUnmount:L}=t,M=a.useContext(K),[b,j]=a.useState(null),[v,w]=a.useState(null),[E,S]=a.useState(null),[D,O]=a.useState(null),[A,B]=a.useState(null),[T,z]=a.useState(null),[W,ee]=a.useState(null),[H,X]=a.useState(null),[Y,se]=a.useState(null),[re,U]=a.useState(null),[ne,C]=a.useState(null),[I,q]=a.useState(null);return a.useEffect(()=>{b!==null&&b.setMap(M)},[M]),a.useEffect(()=>{typeof e<"u"&&b!==null&&b.setOptions(e)},[b,e]),a.useEffect(()=>{typeof r<"u"&&b!==null&&b.setDraggable(r)},[b,r]),a.useEffect(()=>{typeof n<"u"&&b!==null&&b.setEditable(n)},[b,n]),a.useEffect(()=>{typeof i<"u"&&b!==null&&b.setVisible(i)},[b,i]),a.useEffect(()=>{typeof o<"u"&&b!==null&&b.setPath(o)},[b,o]),a.useEffect(()=>{b&&l&&(v!==null&&google.maps.event.removeListener(v),w(google.maps.event.addListener(b,"dblclick",l)))},[l]),a.useEffect(()=>{b&&c&&(E!==null&&google.maps.event.removeListener(E),S(google.maps.event.addListener(b,"dragend",c)))},[c]),a.useEffect(()=>{b&&d&&(D!==null&&google.maps.event.removeListener(D),O(google.maps.event.addListener(b,"dragstart",d)))},[d]),a.useEffect(()=>{b&&p&&(A!==null&&google.maps.event.removeListener(A),B(google.maps.event.addListener(b,"mousedown",p)))},[p]),a.useEffect(()=>{b&&u&&(T!==null&&google.maps.event.removeListener(T),z(google.maps.event.addListener(b,"mousemove",u)))},[u]),a.useEffect(()=>{b&&h&&(W!==null&&google.maps.event.removeListener(W),ee(google.maps.event.addListener(b,"mouseout",h)))},[h]),a.useEffect(()=>{b&&f&&(H!==null&&google.maps.event.removeListener(H),X(google.maps.event.addListener(b,"mouseover",f)))},[f]),a.useEffect(()=>{b&&g&&(Y!==null&&google.maps.event.removeListener(Y),se(google.maps.event.addListener(b,"mouseup",g)))},[g]),a.useEffect(()=>{b&&m&&(re!==null&&google.maps.event.removeListener(re),U(google.maps.event.addListener(b,"rightclick",m)))},[m]),a.useEffect(()=>{b&&N&&(ne!==null&&google.maps.event.removeListener(ne),C(google.maps.event.addListener(b,"click",N)))},[N]),a.useEffect(()=>{b&&x&&(I!==null&&google.maps.event.removeListener(I),q(google.maps.event.addListener(b,"drag",x)))},[x]),a.useEffect(()=>{var $=new google.maps.Polyline(ds(ds({},e||ic),{},{map:M}));return o&&$.setPath(o),typeof i<"u"&&$.setVisible(i),typeof n<"u"&&$.setEditable(n),typeof r<"u"&&$.setDraggable(r),l&&w(google.maps.event.addListener($,"dblclick",l)),c&&S(google.maps.event.addListener($,"dragend",c)),d&&O(google.maps.event.addListener($,"dragstart",d)),p&&B(google.maps.event.addListener($,"mousedown",p)),u&&z(google.maps.event.addListener($,"mousemove",u)),h&&ee(google.maps.event.addListener($,"mouseout",h)),f&&X(google.maps.event.addListener($,"mouseover",f)),g&&se(google.maps.event.addListener($,"mouseup",g)),m&&U(google.maps.event.addListener($,"rightclick",m)),N&&C(google.maps.event.addListener($,"click",N)),x&&q(google.maps.event.addListener($,"drag",x)),j($),y&&y($),()=>{v!==null&&google.maps.event.removeListener(v),E!==null&&google.maps.event.removeListener(E),D!==null&&google.maps.event.removeListener(D),A!==null&&google.maps.event.removeListener(A),T!==null&&google.maps.event.removeListener(T),W!==null&&google.maps.event.removeListener(W),H!==null&&google.maps.event.removeListener(H),Y!==null&&google.maps.event.removeListener(Y),re!==null&&google.maps.event.removeListener(re),ne!==null&&google.maps.event.removeListener(ne),L&&L($),$.setMap(null)}},[]),null}a.memo(ac);class oc extends a.PureComponent{constructor(){super(...arguments),k(this,"registeredEvents",[]),k(this,"state",{polyline:null}),k(this,"setPolylineCallback",()=>{this.state.polyline!==null&&this.props.onLoad&&this.props.onLoad(this.state.polyline)})}componentDidMount(){var e=new google.maps.Polyline(ds(ds({},this.props.options),{},{map:this.context}));this.registeredEvents=J({updaterMap:qr,eventMap:Zr,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{polyline:e}},this.setPolylineCallback)}componentDidUpdate(e){this.state.polyline!==null&&(Q(this.registeredEvents),this.registeredEvents=J({updaterMap:qr,eventMap:Zr,prevProps:e,nextProps:this.props,instance:this.state.polyline}))}componentWillUnmount(){this.state.polyline!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.polyline),Q(this.registeredEvents),this.state.polyline.setMap(null))}render(){return null}}k(oc,"contextType",K);function Kr(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Yr(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Kr(Object(r),!0).forEach(function(n){k(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Kr(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var Jr={onClick:"click",onDblClick:"dblclick",onDrag:"drag",onDragEnd:"dragend",onDragStart:"dragstart",onMouseDown:"mousedown",onMouseMove:"mousemove",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onRightClick:"rightclick"},Qr={draggable(t,e){t.setDraggable(e)},editable(t,e){t.setEditable(e)},map(t,e){t.setMap(e)},options(t,e){t.setOptions(e)},path(t,e){t.setPath(e)},paths(t,e){t.setPaths(e)},visible(t,e){t.setVisible(e)}};function lc(t){var{options:e,draggable:r,editable:n,visible:i,path:o,paths:l,onDblClick:c,onDragEnd:d,onDragStart:p,onMouseDown:u,onMouseMove:h,onMouseOut:f,onMouseOver:g,onMouseUp:m,onRightClick:N,onClick:x,onDrag:y,onLoad:L,onUnmount:M,onEdit:b}=t,j=a.useContext(K),[v,w]=a.useState(null),[E,S]=a.useState(null),[D,O]=a.useState(null),[A,B]=a.useState(null),[T,z]=a.useState(null),[W,ee]=a.useState(null),[H,X]=a.useState(null),[Y,se]=a.useState(null),[re,U]=a.useState(null),[ne,C]=a.useState(null),[I,q]=a.useState(null),[$,de]=a.useState(null);return a.useEffect(()=>{v!==null&&v.setMap(j)},[j]),a.useEffect(()=>{typeof e<"u"&&v!==null&&v.setOptions(e)},[v,e]),a.useEffect(()=>{typeof r<"u"&&v!==null&&v.setDraggable(r)},[v,r]),a.useEffect(()=>{typeof n<"u"&&v!==null&&v.setEditable(n)},[v,n]),a.useEffect(()=>{typeof i<"u"&&v!==null&&v.setVisible(i)},[v,i]),a.useEffect(()=>{typeof o<"u"&&v!==null&&v.setPath(o)},[v,o]),a.useEffect(()=>{typeof l<"u"&&v!==null&&v.setPaths(l)},[v,l]),a.useEffect(()=>{v&&typeof c=="function"&&(E!==null&&google.maps.event.removeListener(E),S(google.maps.event.addListener(v,"dblclick",c)))},[c]),a.useEffect(()=>{v&&(google.maps.event.addListener(v.getPath(),"insert_at",()=>{b?.(v)}),google.maps.event.addListener(v.getPath(),"set_at",()=>{b?.(v)}),google.maps.event.addListener(v.getPath(),"remove_at",()=>{b?.(v)}))},[v,b]),a.useEffect(()=>{v&&typeof d=="function"&&(D!==null&&google.maps.event.removeListener(D),O(google.maps.event.addListener(v,"dragend",d)))},[d]),a.useEffect(()=>{v&&typeof p=="function"&&(A!==null&&google.maps.event.removeListener(A),B(google.maps.event.addListener(v,"dragstart",p)))},[p]),a.useEffect(()=>{v&&typeof u=="function"&&(T!==null&&google.maps.event.removeListener(T),z(google.maps.event.addListener(v,"mousedown",u)))},[u]),a.useEffect(()=>{v&&typeof h=="function"&&(W!==null&&google.maps.event.removeListener(W),ee(google.maps.event.addListener(v,"mousemove",h)))},[h]),a.useEffect(()=>{v&&typeof f=="function"&&(H!==null&&google.maps.event.removeListener(H),X(google.maps.event.addListener(v,"mouseout",f)))},[f]),a.useEffect(()=>{v&&typeof g=="function"&&(Y!==null&&google.maps.event.removeListener(Y),se(google.maps.event.addListener(v,"mouseover",g)))},[g]),a.useEffect(()=>{v&&typeof m=="function"&&(re!==null&&google.maps.event.removeListener(re),U(google.maps.event.addListener(v,"mouseup",m)))},[m]),a.useEffect(()=>{v&&typeof N=="function"&&(ne!==null&&google.maps.event.removeListener(ne),C(google.maps.event.addListener(v,"rightclick",N)))},[N]),a.useEffect(()=>{v&&typeof x=="function"&&(I!==null&&google.maps.event.removeListener(I),q(google.maps.event.addListener(v,"click",x)))},[x]),a.useEffect(()=>{v&&typeof y=="function"&&($!==null&&google.maps.event.removeListener($),de(google.maps.event.addListener(v,"drag",y)))},[y]),a.useEffect(()=>{var V=new google.maps.Polygon(Yr(Yr({},e),{},{map:j}));return o&&V.setPath(o),l&&V.setPaths(l),typeof i<"u"&&V.setVisible(i),typeof n<"u"&&V.setEditable(n),typeof r<"u"&&V.setDraggable(r),c&&S(google.maps.event.addListener(V,"dblclick",c)),d&&O(google.maps.event.addListener(V,"dragend",d)),p&&B(google.maps.event.addListener(V,"dragstart",p)),u&&z(google.maps.event.addListener(V,"mousedown",u)),h&&ee(google.maps.event.addListener(V,"mousemove",h)),f&&X(google.maps.event.addListener(V,"mouseout",f)),g&&se(google.maps.event.addListener(V,"mouseover",g)),m&&U(google.maps.event.addListener(V,"mouseup",m)),N&&C(google.maps.event.addListener(V,"rightclick",N)),x&&q(google.maps.event.addListener(V,"click",x)),y&&de(google.maps.event.addListener(V,"drag",y)),w(V),L&&L(V),()=>{E!==null&&google.maps.event.removeListener(E),D!==null&&google.maps.event.removeListener(D),A!==null&&google.maps.event.removeListener(A),T!==null&&google.maps.event.removeListener(T),W!==null&&google.maps.event.removeListener(W),H!==null&&google.maps.event.removeListener(H),Y!==null&&google.maps.event.removeListener(Y),re!==null&&google.maps.event.removeListener(re),ne!==null&&google.maps.event.removeListener(ne),I!==null&&google.maps.event.removeListener(I),M&&M(V),V.setMap(null)}},[]),null}a.memo(lc);class cc extends a.PureComponent{constructor(){super(...arguments),k(this,"registeredEvents",[])}componentDidMount(){var e=this.props.options||{};this.polygon=new google.maps.Polygon(e),this.polygon.setMap(this.context),this.registeredEvents=J({updaterMap:Qr,eventMap:Jr,prevProps:{},nextProps:this.props,instance:this.polygon}),this.props.onLoad&&this.props.onLoad(this.polygon)}componentDidUpdate(e){this.polygon&&(Q(this.registeredEvents),this.registeredEvents=J({updaterMap:Qr,eventMap:Jr,prevProps:e,nextProps:this.props,instance:this.polygon}))}componentWillUnmount(){this.polygon&&(this.props.onUnmount&&this.props.onUnmount(this.polygon),Q(this.registeredEvents),this.polygon&&this.polygon.setMap(null))}render(){return null}}k(cc,"contextType",K);function Xr(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function us(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Xr(Object(r),!0).forEach(function(n){k(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Xr(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var en={onBoundsChanged:"bounds_changed",onClick:"click",onDblClick:"dblclick",onDrag:"drag",onDragEnd:"dragend",onDragStart:"dragstart",onMouseDown:"mousedown",onMouseMove:"mousemove",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onRightClick:"rightclick"},tn={bounds(t,e){t.setBounds(e)},draggable(t,e){t.setDraggable(e)},editable(t,e){t.setEditable(e)},map(t,e){t.setMap(e)},options(t,e){t.setOptions(e)},visible(t,e){t.setVisible(e)}};function dc(t){var{options:e,bounds:r,draggable:n,editable:i,visible:o,onDblClick:l,onDragEnd:c,onDragStart:d,onMouseDown:p,onMouseMove:u,onMouseOut:h,onMouseOver:f,onMouseUp:g,onRightClick:m,onClick:N,onDrag:x,onBoundsChanged:y,onLoad:L,onUnmount:M}=t,b=a.useContext(K),[j,v]=a.useState(null),[w,E]=a.useState(null),[S,D]=a.useState(null),[O,A]=a.useState(null),[B,T]=a.useState(null),[z,W]=a.useState(null),[ee,H]=a.useState(null),[X,Y]=a.useState(null),[se,re]=a.useState(null),[U,ne]=a.useState(null),[C,I]=a.useState(null),[q,$]=a.useState(null),[de,V]=a.useState(null);return a.useEffect(()=>{j!==null&&j.setMap(b)},[b]),a.useEffect(()=>{typeof e<"u"&&j!==null&&j.setOptions(e)},[j,e]),a.useEffect(()=>{typeof n<"u"&&j!==null&&j.setDraggable(n)},[j,n]),a.useEffect(()=>{typeof i<"u"&&j!==null&&j.setEditable(i)},[j,i]),a.useEffect(()=>{typeof o<"u"&&j!==null&&j.setVisible(o)},[j,o]),a.useEffect(()=>{typeof r<"u"&&j!==null&&j.setBounds(r)},[j,r]),a.useEffect(()=>{j&&l&&(w!==null&&google.maps.event.removeListener(w),E(google.maps.event.addListener(j,"dblclick",l)))},[l]),a.useEffect(()=>{j&&c&&(S!==null&&google.maps.event.removeListener(S),D(google.maps.event.addListener(j,"dragend",c)))},[c]),a.useEffect(()=>{j&&d&&(O!==null&&google.maps.event.removeListener(O),A(google.maps.event.addListener(j,"dragstart",d)))},[d]),a.useEffect(()=>{j&&p&&(B!==null&&google.maps.event.removeListener(B),T(google.maps.event.addListener(j,"mousedown",p)))},[p]),a.useEffect(()=>{j&&u&&(z!==null&&google.maps.event.removeListener(z),W(google.maps.event.addListener(j,"mousemove",u)))},[u]),a.useEffect(()=>{j&&h&&(ee!==null&&google.maps.event.removeListener(ee),H(google.maps.event.addListener(j,"mouseout",h)))},[h]),a.useEffect(()=>{j&&f&&(X!==null&&google.maps.event.removeListener(X),Y(google.maps.event.addListener(j,"mouseover",f)))},[f]),a.useEffect(()=>{j&&g&&(se!==null&&google.maps.event.removeListener(se),re(google.maps.event.addListener(j,"mouseup",g)))},[g]),a.useEffect(()=>{j&&m&&(U!==null&&google.maps.event.removeListener(U),ne(google.maps.event.addListener(j,"rightclick",m)))},[m]),a.useEffect(()=>{j&&N&&(C!==null&&google.maps.event.removeListener(C),I(google.maps.event.addListener(j,"click",N)))},[N]),a.useEffect(()=>{j&&x&&(q!==null&&google.maps.event.removeListener(q),$(google.maps.event.addListener(j,"drag",x)))},[x]),a.useEffect(()=>{j&&y&&(de!==null&&google.maps.event.removeListener(de),V(google.maps.event.addListener(j,"bounds_changed",y)))},[y]),a.useEffect(()=>{var te=new google.maps.Rectangle(us(us({},e),{},{map:b}));return typeof o<"u"&&te.setVisible(o),typeof i<"u"&&te.setEditable(i),typeof n<"u"&&te.setDraggable(n),typeof r<"u"&&te.setBounds(r),l&&E(google.maps.event.addListener(te,"dblclick",l)),c&&D(google.maps.event.addListener(te,"dragend",c)),d&&A(google.maps.event.addListener(te,"dragstart",d)),p&&T(google.maps.event.addListener(te,"mousedown",p)),u&&W(google.maps.event.addListener(te,"mousemove",u)),h&&H(google.maps.event.addListener(te,"mouseout",h)),f&&Y(google.maps.event.addListener(te,"mouseover",f)),g&&re(google.maps.event.addListener(te,"mouseup",g)),m&&ne(google.maps.event.addListener(te,"rightclick",m)),N&&I(google.maps.event.addListener(te,"click",N)),x&&$(google.maps.event.addListener(te,"drag",x)),y&&V(google.maps.event.addListener(te,"bounds_changed",y)),v(te),L&&L(te),()=>{w!==null&&google.maps.event.removeListener(w),S!==null&&google.maps.event.removeListener(S),O!==null&&google.maps.event.removeListener(O),B!==null&&google.maps.event.removeListener(B),z!==null&&google.maps.event.removeListener(z),ee!==null&&google.maps.event.removeListener(ee),X!==null&&google.maps.event.removeListener(X),se!==null&&google.maps.event.removeListener(se),U!==null&&google.maps.event.removeListener(U),C!==null&&google.maps.event.removeListener(C),q!==null&&google.maps.event.removeListener(q),de!==null&&google.maps.event.removeListener(de),M&&M(te),te.setMap(null)}},[]),null}a.memo(dc);class uc extends a.PureComponent{constructor(){super(...arguments),k(this,"registeredEvents",[]),k(this,"state",{rectangle:null}),k(this,"setRectangleCallback",()=>{this.state.rectangle!==null&&this.props.onLoad&&this.props.onLoad(this.state.rectangle)})}componentDidMount(){var e=new google.maps.Rectangle(us(us({},this.props.options),{},{map:this.context}));this.registeredEvents=J({updaterMap:tn,eventMap:en,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{rectangle:e}},this.setRectangleCallback)}componentDidUpdate(e){this.state.rectangle!==null&&(Q(this.registeredEvents),this.registeredEvents=J({updaterMap:tn,eventMap:en,prevProps:e,nextProps:this.props,instance:this.state.rectangle}))}componentWillUnmount(){this.state.rectangle!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.rectangle),Q(this.registeredEvents),this.state.rectangle.setMap(null))}render(){return null}}k(uc,"contextType",K);function sn(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function hs(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?sn(Object(r),!0).forEach(function(n){k(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):sn(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var rn={onCenterChanged:"center_changed",onRadiusChanged:"radius_changed",onClick:"click",onDblClick:"dblclick",onDrag:"drag",onDragEnd:"dragend",onDragStart:"dragstart",onMouseDown:"mousedown",onMouseMove:"mousemove",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onRightClick:"rightclick"},nn={center(t,e){t.setCenter(e)},draggable(t,e){t.setDraggable(e)},editable(t,e){t.setEditable(e)},map(t,e){t.setMap(e)},options(t,e){t.setOptions(e)},radius(t,e){t.setRadius(e)},visible(t,e){t.setVisible(e)}},hc={};function mc(t){var{options:e,center:r,radius:n,draggable:i,editable:o,visible:l,onDblClick:c,onDragEnd:d,onDragStart:p,onMouseDown:u,onMouseMove:h,onMouseOut:f,onMouseOver:g,onMouseUp:m,onRightClick:N,onClick:x,onDrag:y,onCenterChanged:L,onRadiusChanged:M,onLoad:b,onUnmount:j}=t,v=a.useContext(K),[w,E]=a.useState(null),[S,D]=a.useState(null),[O,A]=a.useState(null),[B,T]=a.useState(null),[z,W]=a.useState(null),[ee,H]=a.useState(null),[X,Y]=a.useState(null),[se,re]=a.useState(null),[U,ne]=a.useState(null),[C,I]=a.useState(null),[q,$]=a.useState(null),[de,V]=a.useState(null),[te,ge]=a.useState(null),[xe,Re]=a.useState(null);return a.useEffect(()=>{w!==null&&w.setMap(v)},[v]),a.useEffect(()=>{typeof e<"u"&&w!==null&&w.setOptions(e)},[w,e]),a.useEffect(()=>{typeof i<"u"&&w!==null&&w.setDraggable(i)},[w,i]),a.useEffect(()=>{typeof o<"u"&&w!==null&&w.setEditable(o)},[w,o]),a.useEffect(()=>{typeof l<"u"&&w!==null&&w.setVisible(l)},[w,l]),a.useEffect(()=>{typeof n=="number"&&w!==null&&w.setRadius(n)},[w,n]),a.useEffect(()=>{typeof r<"u"&&w!==null&&w.setCenter(r)},[w,r]),a.useEffect(()=>{w&&c&&(S!==null&&google.maps.event.removeListener(S),D(google.maps.event.addListener(w,"dblclick",c)))},[c]),a.useEffect(()=>{w&&d&&(O!==null&&google.maps.event.removeListener(O),A(google.maps.event.addListener(w,"dragend",d)))},[d]),a.useEffect(()=>{w&&p&&(B!==null&&google.maps.event.removeListener(B),T(google.maps.event.addListener(w,"dragstart",p)))},[p]),a.useEffect(()=>{w&&u&&(z!==null&&google.maps.event.removeListener(z),W(google.maps.event.addListener(w,"mousedown",u)))},[u]),a.useEffect(()=>{w&&h&&(ee!==null&&google.maps.event.removeListener(ee),H(google.maps.event.addListener(w,"mousemove",h)))},[h]),a.useEffect(()=>{w&&f&&(X!==null&&google.maps.event.removeListener(X),Y(google.maps.event.addListener(w,"mouseout",f)))},[f]),a.useEffect(()=>{w&&g&&(se!==null&&google.maps.event.removeListener(se),re(google.maps.event.addListener(w,"mouseover",g)))},[g]),a.useEffect(()=>{w&&m&&(U!==null&&google.maps.event.removeListener(U),ne(google.maps.event.addListener(w,"mouseup",m)))},[m]),a.useEffect(()=>{w&&N&&(C!==null&&google.maps.event.removeListener(C),I(google.maps.event.addListener(w,"rightclick",N)))},[N]),a.useEffect(()=>{w&&x&&(q!==null&&google.maps.event.removeListener(q),$(google.maps.event.addListener(w,"click",x)))},[x]),a.useEffect(()=>{w&&y&&(de!==null&&google.maps.event.removeListener(de),V(google.maps.event.addListener(w,"drag",y)))},[y]),a.useEffect(()=>{w&&L&&(te!==null&&google.maps.event.removeListener(te),ge(google.maps.event.addListener(w,"center_changed",L)))},[x]),a.useEffect(()=>{w&&M&&(xe!==null&&google.maps.event.removeListener(xe),Re(google.maps.event.addListener(w,"radius_changed",M)))},[M]),a.useEffect(()=>{var ie=new google.maps.Circle(hs(hs({},e||hc),{},{map:v}));return typeof n=="number"&&ie.setRadius(n),typeof r<"u"&&ie.setCenter(r),typeof n=="number"&&ie.setRadius(n),typeof l<"u"&&ie.setVisible(l),typeof o<"u"&&ie.setEditable(o),typeof i<"u"&&ie.setDraggable(i),c&&D(google.maps.event.addListener(ie,"dblclick",c)),d&&A(google.maps.event.addListener(ie,"dragend",d)),p&&T(google.maps.event.addListener(ie,"dragstart",p)),u&&W(google.maps.event.addListener(ie,"mousedown",u)),h&&H(google.maps.event.addListener(ie,"mousemove",h)),f&&Y(google.maps.event.addListener(ie,"mouseout",f)),g&&re(google.maps.event.addListener(ie,"mouseover",g)),m&&ne(google.maps.event.addListener(ie,"mouseup",m)),N&&I(google.maps.event.addListener(ie,"rightclick",N)),x&&$(google.maps.event.addListener(ie,"click",x)),y&&V(google.maps.event.addListener(ie,"drag",y)),L&&ge(google.maps.event.addListener(ie,"center_changed",L)),M&&Re(google.maps.event.addListener(ie,"radius_changed",M)),E(ie),b&&b(ie),()=>{S!==null&&google.maps.event.removeListener(S),O!==null&&google.maps.event.removeListener(O),B!==null&&google.maps.event.removeListener(B),z!==null&&google.maps.event.removeListener(z),ee!==null&&google.maps.event.removeListener(ee),X!==null&&google.maps.event.removeListener(X),se!==null&&google.maps.event.removeListener(se),U!==null&&google.maps.event.removeListener(U),C!==null&&google.maps.event.removeListener(C),q!==null&&google.maps.event.removeListener(q),te!==null&&google.maps.event.removeListener(te),xe!==null&&google.maps.event.removeListener(xe),j&&j(ie),ie.setMap(null)}},[]),null}a.memo(mc);class pc extends a.PureComponent{constructor(){super(...arguments),k(this,"registeredEvents",[]),k(this,"state",{circle:null}),k(this,"setCircleCallback",()=>{this.state.circle!==null&&this.props.onLoad&&this.props.onLoad(this.state.circle)})}componentDidMount(){var e=new google.maps.Circle(hs(hs({},this.props.options),{},{map:this.context}));this.registeredEvents=J({updaterMap:nn,eventMap:rn,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{circle:e}},this.setCircleCallback)}componentDidUpdate(e){this.state.circle!==null&&(Q(this.registeredEvents),this.registeredEvents=J({updaterMap:nn,eventMap:rn,prevProps:e,nextProps:this.props,instance:this.state.circle}))}componentWillUnmount(){if(this.state.circle!==null){var e;this.props.onUnmount&&this.props.onUnmount(this.state.circle),Q(this.registeredEvents),(e=this.state.circle)===null||e===void 0||e.setMap(null)}}render(){return null}}k(pc,"contextType",K);function an(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function ms(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?an(Object(r),!0).forEach(function(n){k(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):an(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var on={onClick:"click",onDblClick:"dblclick",onMouseDown:"mousedown",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onRightClick:"rightclick",onAddFeature:"addfeature",onRemoveFeature:"removefeature",onRemoveProperty:"removeproperty",onSetGeometry:"setgeometry",onSetProperty:"setproperty"},ln={add(t,e){t.add(e)},addgeojson(t,e,r){t.addGeoJson(e,r)},contains(t,e){t.contains(e)},foreach(t,e){t.forEach(e)},loadgeojson(t,e,r,n){t.loadGeoJson(e,r,n)},overridestyle(t,e,r){t.overrideStyle(e,r)},remove(t,e){t.remove(e)},revertstyle(t,e){t.revertStyle(e)},controlposition(t,e){t.setControlPosition(e)},controls(t,e){t.setControls(e)},drawingmode(t,e){t.setDrawingMode(e)},map(t,e){t.setMap(e)},style(t,e){t.setStyle(e)},togeojson(t,e){t.toGeoJson(e)}};function fc(t){var{options:e,onClick:r,onDblClick:n,onMouseDown:i,onMouseMove:o,onMouseOut:l,onMouseOver:c,onMouseUp:d,onRightClick:p,onAddFeature:u,onRemoveFeature:h,onRemoveProperty:f,onSetGeometry:g,onSetProperty:m,onLoad:N,onUnmount:x}=t,y=a.useContext(K),[L,M]=a.useState(null),[b,j]=a.useState(null),[v,w]=a.useState(null),[E,S]=a.useState(null),[D,O]=a.useState(null),[A,B]=a.useState(null),[T,z]=a.useState(null),[W,ee]=a.useState(null),[H,X]=a.useState(null),[Y,se]=a.useState(null),[re,U]=a.useState(null),[ne,C]=a.useState(null),[I,q]=a.useState(null),[$,de]=a.useState(null);return a.useEffect(()=>{L!==null&&L.setMap(y)},[y]),a.useEffect(()=>{L&&n&&(b!==null&&google.maps.event.removeListener(b),j(google.maps.event.addListener(L,"dblclick",n)))},[n]),a.useEffect(()=>{L&&i&&(v!==null&&google.maps.event.removeListener(v),w(google.maps.event.addListener(L,"mousedown",i)))},[i]),a.useEffect(()=>{L&&o&&(E!==null&&google.maps.event.removeListener(E),S(google.maps.event.addListener(L,"mousemove",o)))},[o]),a.useEffect(()=>{L&&l&&(D!==null&&google.maps.event.removeListener(D),O(google.maps.event.addListener(L,"mouseout",l)))},[l]),a.useEffect(()=>{L&&c&&(A!==null&&google.maps.event.removeListener(A),B(google.maps.event.addListener(L,"mouseover",c)))},[c]),a.useEffect(()=>{L&&d&&(T!==null&&google.maps.event.removeListener(T),z(google.maps.event.addListener(L,"mouseup",d)))},[d]),a.useEffect(()=>{L&&p&&(W!==null&&google.maps.event.removeListener(W),ee(google.maps.event.addListener(L,"rightclick",p)))},[p]),a.useEffect(()=>{L&&r&&(H!==null&&google.maps.event.removeListener(H),X(google.maps.event.addListener(L,"click",r)))},[r]),a.useEffect(()=>{L&&u&&(Y!==null&&google.maps.event.removeListener(Y),se(google.maps.event.addListener(L,"addfeature",u)))},[u]),a.useEffect(()=>{L&&h&&(re!==null&&google.maps.event.removeListener(re),U(google.maps.event.addListener(L,"removefeature",h)))},[h]),a.useEffect(()=>{L&&f&&(ne!==null&&google.maps.event.removeListener(ne),C(google.maps.event.addListener(L,"removeproperty",f)))},[f]),a.useEffect(()=>{L&&g&&(I!==null&&google.maps.event.removeListener(I),q(google.maps.event.addListener(L,"setgeometry",g)))},[g]),a.useEffect(()=>{L&&m&&($!==null&&google.maps.event.removeListener($),de(google.maps.event.addListener(L,"setproperty",m)))},[m]),a.useEffect(()=>{if(y!==null){var V=new google.maps.Data(ms(ms({},e),{},{map:y}));n&&j(google.maps.event.addListener(V,"dblclick",n)),i&&w(google.maps.event.addListener(V,"mousedown",i)),o&&S(google.maps.event.addListener(V,"mousemove",o)),l&&O(google.maps.event.addListener(V,"mouseout",l)),c&&B(google.maps.event.addListener(V,"mouseover",c)),d&&z(google.maps.event.addListener(V,"mouseup",d)),p&&ee(google.maps.event.addListener(V,"rightclick",p)),r&&X(google.maps.event.addListener(V,"click",r)),u&&se(google.maps.event.addListener(V,"addfeature",u)),h&&U(google.maps.event.addListener(V,"removefeature",h)),f&&C(google.maps.event.addListener(V,"removeproperty",f)),g&&q(google.maps.event.addListener(V,"setgeometry",g)),m&&de(google.maps.event.addListener(V,"setproperty",m)),M(V),N&&N(V)}return()=>{L&&(b!==null&&google.maps.event.removeListener(b),v!==null&&google.maps.event.removeListener(v),E!==null&&google.maps.event.removeListener(E),D!==null&&google.maps.event.removeListener(D),A!==null&&google.maps.event.removeListener(A),T!==null&&google.maps.event.removeListener(T),W!==null&&google.maps.event.removeListener(W),H!==null&&google.maps.event.removeListener(H),Y!==null&&google.maps.event.removeListener(Y),re!==null&&google.maps.event.removeListener(re),ne!==null&&google.maps.event.removeListener(ne),I!==null&&google.maps.event.removeListener(I),$!==null&&google.maps.event.removeListener($),x&&x(L),L.setMap(null))}},[]),null}a.memo(fc);class gc extends a.PureComponent{constructor(){super(...arguments),k(this,"registeredEvents",[]),k(this,"state",{data:null}),k(this,"setDataCallback",()=>{this.state.data!==null&&this.props.onLoad&&this.props.onLoad(this.state.data)})}componentDidMount(){if(this.context!==null){var e=new google.maps.Data(ms(ms({},this.props.options),{},{map:this.context}));this.registeredEvents=J({updaterMap:ln,eventMap:on,prevProps:{},nextProps:this.props,instance:e}),this.setState(()=>({data:e}),this.setDataCallback)}}componentDidUpdate(e){this.state.data!==null&&(Q(this.registeredEvents),this.registeredEvents=J({updaterMap:ln,eventMap:on,prevProps:e,nextProps:this.props,instance:this.state.data}))}componentWillUnmount(){this.state.data!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.data),Q(this.registeredEvents),this.state.data&&this.state.data.setMap(null))}render(){return null}}k(gc,"contextType",K);function cn(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function dn(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?cn(Object(r),!0).forEach(function(n){k(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):cn(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var un={onClick:"click",onDefaultViewportChanged:"defaultviewport_changed",onStatusChanged:"status_changed"},hn={options(t,e){t.setOptions(e)},url(t,e){t.setUrl(e)},zIndex(t,e){t.setZIndex(e)}};class xc extends a.PureComponent{constructor(){super(...arguments),k(this,"registeredEvents",[]),k(this,"state",{kmlLayer:null}),k(this,"setKmlLayerCallback",()=>{this.state.kmlLayer!==null&&this.props.onLoad&&this.props.onLoad(this.state.kmlLayer)})}componentDidMount(){var e=new google.maps.KmlLayer(dn(dn({},this.props.options),{},{map:this.context}));this.registeredEvents=J({updaterMap:hn,eventMap:un,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{kmlLayer:e}},this.setKmlLayerCallback)}componentDidUpdate(e){this.state.kmlLayer!==null&&(Q(this.registeredEvents),this.registeredEvents=J({updaterMap:hn,eventMap:un,prevProps:e,nextProps:this.props,instance:this.state.kmlLayer}))}componentWillUnmount(){this.state.kmlLayer!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.kmlLayer),Q(this.registeredEvents),this.state.kmlLayer.setMap(null))}render(){return null}}k(xc,"contextType",K);function Si(t,e){return typeof e=="function"?e(t.offsetWidth,t.offsetHeight):{x:0,y:0}}function vc(t,e){return new e(t.lat,t.lng)}function bc(t,e){return new e(new google.maps.LatLng(t.ne.lat,t.ne.lng),new google.maps.LatLng(t.sw.lat,t.sw.lng))}function yc(t,e,r){return t instanceof e?t:r(t,e)}function wc(t,e,r){return t instanceof e?t:r(t,e)}function jc(t,e,r){var n=t&&t.fromLatLngToDivPixel(r.getNorthEast()),i=t&&t.fromLatLngToDivPixel(r.getSouthWest());return n&&i?{left:"".concat(i.x+e.x,"px"),top:"".concat(n.y+e.y,"px"),width:"".concat(n.x-i.x-e.x,"px"),height:"".concat(i.y-n.y-e.y,"px")}:{left:"-9999px",top:"-9999px"}}function Nc(t,e,r){var n=t&&t.fromLatLngToDivPixel(r);if(n){var{x:i,y:o}=n;return{left:"".concat(i+e.x,"px"),top:"".concat(o+e.y,"px")}}return{left:"-9999px",top:"-9999px"}}function ki(t,e,r,n){return r!==void 0?jc(t,e,wc(r,google.maps.LatLngBounds,bc)):Nc(t,e,yc(n,google.maps.LatLng,vc))}function Lc(t,e){return t.left===e.left&&t.top===e.top&&t.width===e.height&&t.height===e.height}function mn(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Cc(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?mn(Object(r),!0).forEach(function(n){k(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):mn(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Sc(t,e,r,n,i){class o extends google.maps.OverlayView{constructor(c,d,p,u){super(),this.container=c,this.pane=d,this.position=p,this.bounds=u}onAdd(){var c,d=(c=this.getPanes())===null||c===void 0?void 0:c[this.pane];d?.appendChild(this.container)}draw(){var c=this.getProjection(),d=Cc({},this.container?Si(this.container,i):{x:0,y:0}),p=ki(c,d,this.bounds,this.position);for(var[u,h]of Object.entries(p))this.container.style[u]=h}onRemove(){this.container.parentNode!==null&&this.container.parentNode.removeChild(this.container)}}return new o(t,e,r,n)}function pn(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function kc(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?pn(Object(r),!0).forEach(function(n){k(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):pn(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function fn(t){if(!t)return"";var e=t instanceof google.maps.LatLng?t:new google.maps.LatLng(t.lat,t.lng);return e+""}function gn(t){if(!t)return"";var e=t instanceof google.maps.LatLngBounds?t:new google.maps.LatLngBounds(new google.maps.LatLng(t.south,t.east),new google.maps.LatLng(t.north,t.west));return e+""}function Ec(t){var{position:e,bounds:r,mapPaneName:n,zIndex:i,onLoad:o,onUnmount:l,getPixelPositionOffset:c,children:d}=t,p=a.useContext(K),u=a.useMemo(()=>{var f=document.createElement("div");return f.style.position="absolute",f},[]),h=a.useMemo(()=>Sc(u,n,e,r,c),[u,n,e,r]);return a.useEffect(()=>(o?.(h),h?.setMap(p),()=>{l?.(h),h?.setMap(null)}),[p,h]),a.useEffect(()=>{u.style.zIndex="".concat(i)},[i,u]),bt.createPortal(d,u)}a.memo(Ec);class yt extends a.PureComponent{constructor(e){super(e),k(this,"state",{paneEl:null,containerStyle:{position:"absolute"}}),k(this,"updatePane",()=>{var n=this.props.mapPaneName,i=this.overlayView.getPanes();pe(!!n,"OverlayView requires props.mapPaneName but got %s",n),i?this.setState({paneEl:i[n]}):this.setState({paneEl:null})}),k(this,"onAdd",()=>{var n,i;this.updatePane(),(n=(i=this.props).onLoad)===null||n===void 0||n.call(i,this.overlayView)}),k(this,"onPositionElement",()=>{var n=this.overlayView.getProjection(),i=kc({x:0,y:0},this.containerRef.current?Si(this.containerRef.current,this.props.getPixelPositionOffset):{}),o=ki(n,i,this.props.bounds,this.props.position);if(!Lc(o,{left:this.state.containerStyle.left,top:this.state.containerStyle.top,width:this.state.containerStyle.width,height:this.state.containerStyle.height})){var l,c,d,p;this.setState({containerStyle:{top:(l=o.top)!==null&&l!==void 0?l:0,left:(c=o.left)!==null&&c!==void 0?c:0,width:(d=o.width)!==null&&d!==void 0?d:0,height:(p=o.height)!==null&&p!==void 0?p:0,position:"absolute"}})}}),k(this,"draw",()=>{this.onPositionElement()}),k(this,"onRemove",()=>{var n,i;this.setState(()=>({paneEl:null})),(n=(i=this.props).onUnmount)===null||n===void 0||n.call(i,this.overlayView)}),this.containerRef=a.createRef();var r=new google.maps.OverlayView;r.onAdd=this.onAdd,r.draw=this.draw,r.onRemove=this.onRemove,this.overlayView=r}componentDidMount(){this.overlayView.setMap(this.context)}componentDidUpdate(e){var r=fn(e.position),n=fn(this.props.position),i=gn(e.bounds),o=gn(this.props.bounds);(r!==n||i!==o)&&this.overlayView.draw(),e.mapPaneName!==this.props.mapPaneName&&this.updatePane()}componentWillUnmount(){this.overlayView.setMap(null)}render(){var e=this.state.paneEl;return e?bt.createPortal(s.jsx("div",{ref:this.containerRef,style:this.state.containerStyle,children:a.Children.only(this.props.children)}),e):null}}k(yt,"FLOAT_PANE","floatPane");k(yt,"MAP_PANE","mapPane");k(yt,"MARKER_LAYER","markerLayer");k(yt,"OVERLAY_LAYER","overlayLayer");k(yt,"OVERLAY_MOUSE_TARGET","overlayMouseTarget");k(yt,"contextType",K);function Pc(){}function xn(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function vn(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?xn(Object(r),!0).forEach(function(n){k(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):xn(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var bn={onDblClick:"dblclick",onClick:"click"},yn={opacity(t,e){t.setOpacity(e)}};function Mc(t){var{url:e,bounds:r,options:n,visible:i}=t,o=a.useContext(K),l=new google.maps.LatLngBounds(new google.maps.LatLng(r.south,r.west),new google.maps.LatLng(r.north,r.east)),c=a.useMemo(()=>new google.maps.GroundOverlay(e,l,n),[]);return a.useEffect(()=>{c!==null&&c.setMap(o)},[o]),a.useEffect(()=>{typeof e<"u"&&c!==null&&(c.set("url",e),c.setMap(o))},[c,e]),a.useEffect(()=>{typeof i<"u"&&c!==null&&c.setOpacity(i?1:0)},[c,i]),a.useEffect(()=>{var d=new google.maps.LatLngBounds(new google.maps.LatLng(r.south,r.west),new google.maps.LatLng(r.north,r.east));typeof r<"u"&&c!==null&&(c.set("bounds",d),c.setMap(o))},[c,r]),null}a.memo(Mc);class Ei extends a.PureComponent{constructor(){super(...arguments),k(this,"registeredEvents",[]),k(this,"state",{groundOverlay:null}),k(this,"setGroundOverlayCallback",()=>{this.state.groundOverlay!==null&&this.props.onLoad&&this.props.onLoad(this.state.groundOverlay)})}componentDidMount(){pe(!!this.props.url||!!this.props.bounds,"For GroundOverlay, url and bounds are passed in to constructor and are immutable after instantiated. This is the behavior of Google Maps JavaScript API v3 ( See https://developers.google.com/maps/documentation/javascript/reference#GroundOverlay) Hence, use the corresponding two props provided by `react-google-maps-api`, url and bounds. In some cases, you'll need the GroundOverlay component to reflect the changes of url and bounds. You can leverage the React's key property to remount the component. Typically, just `key={url}` would serve your need. See https://github.com/tomchentw/react-google-maps/issues/655");var e=new google.maps.GroundOverlay(this.props.url,this.props.bounds,vn(vn({},this.props.options),{},{map:this.context}));this.registeredEvents=J({updaterMap:yn,eventMap:bn,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{groundOverlay:e}},this.setGroundOverlayCallback)}componentDidUpdate(e){this.state.groundOverlay!==null&&(Q(this.registeredEvents),this.registeredEvents=J({updaterMap:yn,eventMap:bn,prevProps:e,nextProps:this.props,instance:this.state.groundOverlay}))}componentWillUnmount(){this.state.groundOverlay&&(this.props.onUnmount&&this.props.onUnmount(this.state.groundOverlay),this.state.groundOverlay.setMap(null))}render(){return null}}k(Ei,"defaultProps",{onLoad:Pc});k(Ei,"contextType",K);function wn(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function ps(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?wn(Object(r),!0).forEach(function(n){k(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):wn(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var jn={},Nn={data(t,e){t.setData(e)},map(t,e){t.setMap(e)},options(t,e){t.setOptions(e)}};function Dc(t){var{data:e,onLoad:r,onUnmount:n,options:i}=t,o=a.useContext(K),[l,c]=a.useState(null);return a.useEffect(()=>{google.maps.visualization||pe(!!google.maps.visualization,'Did you include prop libraries={["visualization"]} in useJsApiScript? %s',google.maps.visualization)},[]),a.useEffect(()=>{pe(!!e,"data property is required in HeatmapLayer %s",e)},[e]),a.useEffect(()=>{l!==null&&l.setMap(o)},[o]),a.useEffect(()=>{i&&l!==null&&l.setOptions(i)},[l,i]),a.useEffect(()=>{var d=new google.maps.visualization.HeatmapLayer(ps(ps({},i),{},{data:e,map:o}));return c(d),r&&r(d),()=>{l!==null&&(n&&n(l),l.setMap(null))}},[]),null}a.memo(Dc);class Oc extends a.PureComponent{constructor(){super(...arguments),k(this,"registeredEvents",[]),k(this,"state",{heatmapLayer:null}),k(this,"setHeatmapLayerCallback",()=>{this.state.heatmapLayer!==null&&this.props.onLoad&&this.props.onLoad(this.state.heatmapLayer)})}componentDidMount(){pe(!!google.maps.visualization,'Did you include prop libraries={["visualization"]} to <LoadScript />? %s',google.maps.visualization),pe(!!this.props.data,"data property is required in HeatmapLayer %s",this.props.data);var e=new google.maps.visualization.HeatmapLayer(ps(ps({},this.props.options),{},{data:this.props.data,map:this.context}));this.registeredEvents=J({updaterMap:Nn,eventMap:jn,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{heatmapLayer:e}},this.setHeatmapLayerCallback)}componentDidUpdate(e){Q(this.registeredEvents),this.registeredEvents=J({updaterMap:Nn,eventMap:jn,prevProps:e,nextProps:this.props,instance:this.state.heatmapLayer})}componentWillUnmount(){this.state.heatmapLayer!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.heatmapLayer),Q(this.registeredEvents),this.state.heatmapLayer.setMap(null))}render(){return null}}k(Oc,"contextType",K);var Ln={onCloseClick:"closeclick",onPanoChanged:"pano_changed",onPositionChanged:"position_changed",onPovChanged:"pov_changed",onResize:"resize",onStatusChanged:"status_changed",onVisibleChanged:"visible_changed",onZoomChanged:"zoom_changed"},Cn={register(t,e,r){t.registerPanoProvider(e,r)},links(t,e){t.setLinks(e)},motionTracking(t,e){t.setMotionTracking(e)},options(t,e){t.setOptions(e)},pano(t,e){t.setPano(e)},position(t,e){t.setPosition(e)},pov(t,e){t.setPov(e)},visible(t,e){t.setVisible(e)},zoom(t,e){t.setZoom(e)}};class Ac extends a.PureComponent{constructor(){super(...arguments),k(this,"registeredEvents",[]),k(this,"state",{streetViewPanorama:null}),k(this,"setStreetViewPanoramaCallback",()=>{this.state.streetViewPanorama!==null&&this.props.onLoad&&this.props.onLoad(this.state.streetViewPanorama)})}componentDidMount(){var e,r,n=(e=(r=this.context)===null||r===void 0?void 0:r.getStreetView())!==null&&e!==void 0?e:null;this.registeredEvents=J({updaterMap:Cn,eventMap:Ln,prevProps:{},nextProps:this.props,instance:n}),this.setState(()=>({streetViewPanorama:n}),this.setStreetViewPanoramaCallback)}componentDidUpdate(e){this.state.streetViewPanorama!==null&&(Q(this.registeredEvents),this.registeredEvents=J({updaterMap:Cn,eventMap:Ln,prevProps:e,nextProps:this.props,instance:this.state.streetViewPanorama}))}componentWillUnmount(){this.state.streetViewPanorama!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.streetViewPanorama),Q(this.registeredEvents),this.state.streetViewPanorama.setVisible(!1))}render(){return null}}k(Ac,"contextType",K);class Ic extends a.PureComponent{constructor(){super(...arguments),k(this,"state",{streetViewService:null}),k(this,"setStreetViewServiceCallback",()=>{this.state.streetViewService!==null&&this.props.onLoad&&this.props.onLoad(this.state.streetViewService)})}componentDidMount(){var e=new google.maps.StreetViewService;this.setState(function(){return{streetViewService:e}},this.setStreetViewServiceCallback)}componentWillUnmount(){this.state.streetViewService!==null&&this.props.onUnmount&&this.props.onUnmount(this.state.streetViewService)}render(){return null}}k(Ic,"contextType",K);var Sn={onDirectionsChanged:"directions_changed"},kn={directions(t,e){t.setDirections(e)},map(t,e){t.setMap(e)},options(t,e){t.setOptions(e)},panel(t,e){t.setPanel(e)},routeIndex(t,e){t.setRouteIndex(e)}};class Rc extends a.PureComponent{constructor(){super(...arguments),k(this,"registeredEvents",[]),k(this,"state",{directionsRenderer:null}),k(this,"setDirectionsRendererCallback",()=>{this.state.directionsRenderer!==null&&(this.state.directionsRenderer.setMap(this.context),this.props.onLoad&&this.props.onLoad(this.state.directionsRenderer))})}componentDidMount(){var e=new google.maps.DirectionsRenderer(this.props.options);this.registeredEvents=J({updaterMap:kn,eventMap:Sn,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{directionsRenderer:e}},this.setDirectionsRendererCallback)}componentDidUpdate(e){this.state.directionsRenderer!==null&&(Q(this.registeredEvents),this.registeredEvents=J({updaterMap:kn,eventMap:Sn,prevProps:e,nextProps:this.props,instance:this.state.directionsRenderer}))}componentWillUnmount(){this.state.directionsRenderer!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.directionsRenderer),Q(this.registeredEvents),this.state.directionsRenderer&&this.state.directionsRenderer.setMap(null))}render(){return null}}k(Rc,"contextType",K);var En={onPlacesChanged:"places_changed"},Pn={bounds(t,e){t.setBounds(e)}};class Tc extends a.PureComponent{constructor(){super(...arguments),k(this,"registeredEvents",[]),k(this,"containerElement",a.createRef()),k(this,"state",{searchBox:null}),k(this,"setSearchBoxCallback",()=>{this.state.searchBox!==null&&this.props.onLoad&&this.props.onLoad(this.state.searchBox)})}componentDidMount(){if(pe(!!google.maps.places,'You need to provide libraries={["places"]} prop to <LoadScript /> component %s',google.maps.places),this.containerElement!==null&&this.containerElement.current!==null){var e=this.containerElement.current.querySelector("input");if(e!==null){var r=new google.maps.places.SearchBox(e,this.props.options);this.registeredEvents=J({updaterMap:Pn,eventMap:En,prevProps:{},nextProps:this.props,instance:r}),this.setState(function(){return{searchBox:r}},this.setSearchBoxCallback)}}}componentDidUpdate(e){this.state.searchBox!==null&&(Q(this.registeredEvents),this.registeredEvents=J({updaterMap:Pn,eventMap:En,prevProps:e,nextProps:this.props,instance:this.state.searchBox}))}componentWillUnmount(){this.state.searchBox!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.searchBox),Q(this.registeredEvents))}render(){return s.jsx("div",{ref:this.containerElement,children:a.Children.only(this.props.children)})}}k(Tc,"contextType",K);var Mn={onPlaceChanged:"place_changed"},Dn={bounds(t,e){t.setBounds(e)},restrictions(t,e){t.setComponentRestrictions(e)},fields(t,e){t.setFields(e)},options(t,e){t.setOptions(e)},types(t,e){t.setTypes(e)}};class Ks extends a.PureComponent{constructor(){super(...arguments),k(this,"registeredEvents",[]),k(this,"containerElement",a.createRef()),k(this,"state",{autocomplete:null}),k(this,"setAutocompleteCallback",()=>{this.state.autocomplete!==null&&this.props.onLoad&&this.props.onLoad(this.state.autocomplete)})}componentDidMount(){var e;pe(!!google.maps.places,'You need to provide libraries={["places"]} prop to <LoadScript /> component %s',google.maps.places);var r=(e=this.containerElement.current)===null||e===void 0?void 0:e.querySelector("input");if(r){var n=new google.maps.places.Autocomplete(r,this.props.options);this.registeredEvents=J({updaterMap:Dn,eventMap:Mn,prevProps:{},nextProps:this.props,instance:n}),this.setState(()=>({autocomplete:n}),this.setAutocompleteCallback)}}componentDidUpdate(e){Q(this.registeredEvents),this.registeredEvents=J({updaterMap:Dn,eventMap:Mn,prevProps:e,nextProps:this.props,instance:this.state.autocomplete})}componentWillUnmount(){this.state.autocomplete!==null&&Q(this.registeredEvents)}render(){return s.jsx("div",{ref:this.containerElement,className:this.props.className,children:a.Children.only(this.props.children)})}}k(Ks,"defaultProps",{className:""});k(Ks,"contextType",K);const _c="AIzaSyBPkkXZWll0VifG5kb0DDSsoV5UB-n5pFE",Fc=["places"],Bc={width:"100%",height:"200px",borderRadius:"12px"},zc={disableDefaultUI:!0,zoomControl:!0,streetViewControl:!1,mapTypeControl:!1,fullscreenControl:!1},On=async(t="light")=>{try{const{Haptics:e,ImpactStyle:r,NotificationType:n}=await Hs(async()=>{const{Haptics:i,ImpactStyle:o,NotificationType:l}=await Promise.resolve().then(()=>Ao);return{Haptics:i,ImpactStyle:o,NotificationType:l}},void 0);t==="success"?await e.notification({type:n.Success}):await e.impact({style:r.Light})}catch{}},Uc=t=>{if(!t)return 0;const e=t.match(/(\d{1,2}):(\d{2})\s*(AM|PM)/i);if(!e)return 0;let r=parseInt(e[1]);const n=parseInt(e[2]),i=e[3].toUpperCase();return i==="PM"&&r!==12&&(r+=12),i==="AM"&&r===12&&(r=0),r*60+n},$c=(t,e=30)=>{if(!t?.time)return!1;const r=t.time.split(" - ");if(r.length!==2)return!0;const n=r[0].trim(),i=Uc(n),o=new Date,l=o.getHours()*60+o.getMinutes();return i>l+e},kt=(t,e,r=30)=>{if(!t||!Array.isArray(t))return[];const n=t.filter(l=>l.enabled),i=new Date;return e.toDateString()===i.toDateString()?n.filter(l=>$c(l,r)):n},ot=t=>{const e=new Date,r=new Date(e);return r.setDate(r.getDate()+1),t.toDateString()===e.toDateString()?"Today":t.toDateString()===r.toDateString()?"Tomorrow":t.toLocaleDateString("en-IN",{weekday:"short",day:"numeric",month:"short"})},An=(t=7)=>{const e=[],r=new Date;for(let n=0;n<t;n++){const i=new Date(r);i.setDate(r.getDate()+n),e.push({date:i,label:ot(i),dayName:i.toLocaleDateString("en-IN",{weekday:"short"}),dayNum:i.getDate(),isToday:n===0,isTomorrow:n===1})}return e},In=({type:t,icon:e,label:r,description:n,isSelected:i,onSelect:o,disabled:l})=>s.jsx("button",{onClick:()=>!l&&o(t),disabled:l,className:`flex-1 p-4 rounded-xl border-2 transition-all ${l?"border-white/10 bg-[#141c2e]/50 opacity-50 cursor-not-allowed":i?"border-[#05E06C]500 bg-[#05E06C]/10":"border-white/10 bg-[#141c2e]/50 hover:border-white/10"}`,children:s.jsxs("div",{className:"flex flex-col items-center gap-2",children:[s.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center ${i?"bg-[#05E06C]":"bg-slate-700"}`,children:s.jsx(e,{className:`text-xl ${i?"text-white":"text-white/60"}`})}),s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:`font-semibold ${i?"text-[#05E06C]400":"text-white"}`,children:r}),s.jsx("p",{className:"text-xs text-white/40",children:n})]})]})}),Hc=({slot:t,isSelected:e,onSelect:r})=>s.jsxs("button",{onClick:()=>r(t),className:`flex-1 p-3 rounded-xl border-2 transition-all ${e?"border-[#05E06C]500 bg-[#05E06C]/10":"border-white/10 bg-[#141c2e]/50"}`,children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx(we,{className:e?"text-[#05E06C]400":"text-white/40"}),s.jsx("span",{className:`font-medium ${e?"text-[#05E06C]400":"text-white"}`,children:t.label})]}),s.jsx("p",{className:"text-xs text-white/40",children:t.description})]}),Vc=({slot:t,isSelected:e,onSelect:r})=>s.jsxs("button",{onClick:()=>r(t),className:`w-full p-3 rounded-xl border-2 flex items-center justify-between transition-all ${e?"border-emerald-500 bg-emerald-500/10":"border-white/10 bg-[#141c2e]/50 hover:border-white/20"}`,children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center ${e?"bg-emerald-500":"bg-white/[0.06]"}`,children:s.jsx(we,{className:e?"text-white text-sm":"text-white/40 text-sm"})}),s.jsx("span",{className:`font-medium ${e?"text-emerald-400":"text-white"}`,children:t.time})]}),e&&s.jsx(We,{className:"text-emerald-400"})]}),Rn=({days:t,selectedDate:e,onSelect:r})=>s.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2 -mx-1 px-1 scrollbar-hide",children:t.map((n,i)=>s.jsx("button",{onClick:()=>r(n.date),className:`flex-shrink-0 w-16 py-2 px-1 rounded-xl border-2 transition-all ${e?.toDateString()===n.date.toDateString()?"border-emerald-500 bg-emerald-500/10":"border-white/10 bg-[#141c2e]/50 hover:border-white/20"}`,children:s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:`text-[10px] font-medium ${e?.toDateString()===n.date.toDateString()?"text-emerald-400":n.isToday?"text-amber-400":"text-white/50"}`,children:n.isToday?"Today":n.isTomorrow?"Tmrw":n.dayName}),s.jsx("p",{className:`text-lg font-bold ${e?.toDateString()===n.date.toDateString()?"text-emerald-400":"text-white"}`,children:n.dayNum})]})},i))}),Wc=({method:t,isSelected:e,onSelect:r,badge:n})=>{const o={COD:hr,UPI:mr,CARD:dt,PAY_LATER:we,PARTIAL:mr}[t.id]||hr,c={emerald:{border:"border-[#05E06C]500",bg:"bg-[#05E06C]/10",icon:"bg-[#05E06C]",text:"text-[#05E06C]400",check:"text-[#05E06C]400"},amber:{border:"border-amber-500",bg:"bg-amber-500/10",icon:"bg-amber-500",text:"text-amber-400",check:"text-amber-400"},purple:{border:"border-purple-500",bg:"bg-purple-500/10",icon:"bg-purple-500",text:"text-purple-400",check:"text-purple-400"}}[t.color||"emerald"];return s.jsxs("button",{onClick:()=>r(t),className:`w-full p-4 rounded-xl border-2 flex items-center gap-3 transition-all ${e?`${c.border} ${c.bg}`:"border-white/10 bg-[#141c2e]/50"}`,children:[s.jsx("div",{className:`w-10 h-10 rounded-lg flex items-center justify-center ${e?c.icon:"bg-slate-700"}`,children:s.jsx(o,{className:e?"text-white":"text-white/60"})}),s.jsxs("div",{className:"flex-1 text-left",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("p",{className:`font-medium ${e?c.text:"text-white"}`,children:t.label}),n&&s.jsx("span",{className:`px-2 py-0.5 text-[10px] font-bold rounded-full ${n.color}`,children:n.text})]}),s.jsx("p",{className:"text-xs text-white/40",children:t.description})]}),e&&s.jsx(We,{className:c.check})]})},Gc=({address:t,isSelected:e,onSelect:r})=>s.jsx("button",{onClick:()=>r(t),className:`w-full p-4 rounded-xl border-2 text-left transition-all ${e?"border-emerald-500 bg-emerald-500/10":"border-white/10 bg-[#141c2e]/50"}`,children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:`w-10 h-10 rounded-lg flex items-center justify-center flex-shrink-0 ${e?"bg-emerald-500":"bg-slate-700"}`,children:s.jsx(me,{className:e?"text-white":"text-white/60"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("p",{className:"font-medium text-white",children:t.label}),t.latitude&&t.longitude&&s.jsx("span",{className:"px-1.5 py-0.5 bg-emerald-500/20 text-emerald-400 text-[9px] rounded font-medium",children:" Pinned"})]}),s.jsx("p",{className:"text-sm text-white/60 mt-1 line-clamp-2",children:t.address})]}),e&&s.jsx(We,{className:"text-emerald-400 flex-shrink-0"})]})}),Zc=({onBack:t,onOrderPlaced:e})=>{const{cartItems:r,cartStore:n,getCartTotals:i,clearCart:o}=Rt(),{customer:l,customerData:c,addAddress:d}=xt(),p=i(),[u,h]=a.useState(null),[f,g]=a.useState(!0),[m,N]=a.useState("delivery"),[x,y]=a.useState(c?.addresses?.find(P=>P.isDefault)||c?.addresses?.[0]||null),[L,M]=a.useState("asap"),[b,j]=a.useState(!1),[v,w]=a.useState(new Date),[E,S]=a.useState(null),[D,O]=a.useState(null),[A,B]=a.useState(new Date),[T,z]=a.useState("COD"),W=An(7),ee=An(7),[H,X]=a.useState(0),[Y,se]=a.useState(""),[re,U]=a.useState(!1),[ne,C]=a.useState(!c?.addresses?.length),[I,q]=a.useState({label:"Home",address:"",landmark:"",city:"",pincode:"",latitude:null,longitude:null}),$=a.useRef(null),de=a.useRef(null),[V,te]=a.useState({lat:20.5937,lng:78.9629}),[ge,xe]=a.useState(null),[Re,ie]=a.useState(!1),[Bt,Ze]=a.useState(!0),[Te,_e]=a.useState(null),[ke,et]=a.useState(!0),wt=(P,R,G,ce)=>{const le=(G-P)*Math.PI/180,fe=(ce-R)*Math.PI/180,be=Math.sin(le/2)*Math.sin(le/2)+Math.cos(P*Math.PI/180)*Math.cos(G*Math.PI/180)*Math.sin(fe/2)*Math.sin(fe/2);return 6371*(2*Math.atan2(Math.sqrt(be),Math.sqrt(1-be)))},{isLoaded:Ne,loadError:tt}=hl({id:"google-map-script",googleMapsApiKey:_c,libraries:Fc}),zt=a.useCallback(P=>{$.current=P},[]),Ut=a.useCallback(P=>{de.current=P},[]),Ce=a.useCallback((P,R)=>{window.google&&window.google.maps&&new window.google.maps.Geocoder().geocode({location:{lat:P,lng:R}},(ce,ue)=>{if(ue==="OK"&&ce[0]){const le=ce[0];let fe="",be="";le.address_components.forEach(ye=>{ye.types.includes("locality")&&(fe=ye.long_name),ye.types.includes("postal_code")&&(be=ye.long_name),(ye.types.includes("sublocality_level_1")||ye.types.includes("sublocality"))&&ye.long_name}),q(ye=>({...ye,address:le.formatted_address,city:fe||ye.city,pincode:be||ye.pincode,latitude:P,longitude:R}))}})},[]),$t=a.useCallback(()=>{if(de.current){const P=de.current.getPlace();if(P.geometry){const R=P.geometry.location.lat(),G=P.geometry.location.lng();xe({lat:R,lng:G}),te({lat:R,lng:G}),$.current&&($.current.panTo({lat:R,lng:G}),$.current.setZoom(16));let ce="",ue="";P.address_components&&P.address_components.forEach(le=>{le.types.includes("locality")&&(ce=le.long_name),le.types.includes("postal_code")&&(ue=le.long_name)}),q(le=>({...le,address:P.formatted_address||"",city:ce||le.city,pincode:ue||le.pincode,latitude:R,longitude:G}))}}},[]),st=a.useCallback(P=>{const R=P.latLng.lat(),G=P.latLng.lng();xe({lat:R,lng:G}),Ce(R,G)},[Ce]),Ht=a.useCallback(P=>{const R=P.latLng.lat(),G=P.latLng.lng();xe({lat:R,lng:G}),Ce(R,G)},[Ce]),qe=a.useCallback(()=>{if(!navigator.geolocation){alert("Geolocation is not supported by your browser");return}ie(!0),navigator.geolocation.getCurrentPosition(P=>{const R=P.coords.latitude,G=P.coords.longitude;xe({lat:R,lng:G}),te({lat:R,lng:G}),$.current&&($.current.panTo({lat:R,lng:G}),$.current.setZoom(16)),Ce(R,G),ie(!1),On("success")},P=>{console.error("Error getting location:",P),alert("Could not get your location. Please search or tap on the map."),ie(!1)},{enableHighAccuracy:!0,timeout:1e4})},[Ce]);a.useEffect(()=>{ne&&Ne&&!ge&&qe()},[ne,Ne]),a.useEffect(()=>{if(x&&u){let P,R;u.location&&(P=u.location.latitude||u.location._lat,R=u.location.longitude||u.location._long);const G=x.latitude,ce=x.longitude;if(P&&R&&G&&ce){const ue=wt(G,ce,P,R),le=Math.round(ue*10)/10;_e(le);const fe=u.deliveryRadius||10,be=le<=fe;Ze(be),!be&&u.pickupEnabled&&m==="delivery"&&N("pickup")}else Ze(!0),_e(null)}},[x,u,m]),a.useEffect(()=>{u&&navigator.geolocation&&navigator.geolocation.getCurrentPosition(P=>{const R=P.coords.latitude,G=P.coords.longitude;let ce,ue;if(u.location&&(ce=u.location.latitude||u.location._lat,ue=u.location.longitude||u.location._long),ce&&ue){const le=wt(R,G,ce,ue),fe=u.deliveryRadius||10,be=le<=fe;et(be),_e(Math.round(le*10)/10),!be&&u.pickupEnabled&&N("pickup")}},P=>{console.log("Could not get location for range check:",P)},{enableHighAccuracy:!0,timeout:5e3})},[u]),a.useEffect(()=>{(async()=>{if(n?.id)try{const R=await di(n.id);if(h(R),R?.pickupTimeSlots?.length>0){const G=new Date,ce=kt(R.pickupTimeSlots,G,30);if(ce.length>0)O(ce[0]);else{const ue=new Date(G);ue.setDate(ue.getDate()+1),B(ue);const le=kt(R.pickupTimeSlots,ue,30);le.length>0&&O(le[0])}}}catch(R){console.error("Error fetching store settings:",R)}finally{g(!1)}})()},[n?.id]),a.useEffect(()=>{if(u?.pickupTimeSlots&&A){const P=kt(u.pickupTimeSlots,A,30);P.length>0&&!P.find(R=>R.id===D?.id)?O(P[0]):P.length===0&&O(null)}},[A,u?.pickupTimeSlots]),a.useEffect(()=>{if(T==="PARTIAL"&&u?.minAdvancePercent){const P=Math.ceil(p.total*u.minAdvancePercent/100);X(P)}},[T,p.total,u?.minAdvancePercent]);const Vt=[{id:"asap",label:"ASAP",description:"Within 45-60 min"},{id:"2hr",label:"2 Hours",description:"Flexible delivery"}],rt=u?.deliveryTimeSlots||[{time:"9:00 AM - 12:00 PM",enabled:!0},{time:"12:00 PM - 3:00 PM",enabled:!0},{time:"3:00 PM - 6:00 PM",enabled:!0},{time:"6:00 PM - 9:00 PM",enabled:!0}],nt=(()=>{const P=[],R=u?.paymentOptions||{cod:!0,upi:!0};return R.cod!==!1&&P.push({id:"COD",label:"Cash on Delivery",description:"Pay when you receive",color:"emerald"}),R.upi!==!1&&P.push({id:"UPI",label:"UPI Payment",description:"GPay, PhonePe, Paytm",color:"emerald"}),R.payLater&&P.push({id:"PAY_LATER",label:"Pay Later",description:`Pay within ${u?.payLaterDays||7} days`,color:"amber",badge:{text:"CREDIT",color:"bg-amber-500/20 text-amber-400"}}),R.partialPayment&&P.push({id:"PARTIAL",label:"Pay Advance + Later",description:`Min ${u?.minAdvancePercent||50}% now, rest on delivery`,color:"purple",badge:{text:"SPLIT",color:"bg-purple-500/20 text-purple-400"}}),P})(),Wt=async()=>{if(!I.address||!I.city||!I.pincode){alert("Please fill all required fields");return}const P=`${I.address}${I.landmark?", "+I.landmark:""}, ${I.city} - ${I.pincode}`,R=await d({label:I.label||"Home",address:P,city:I.city,pincode:I.pincode,landmark:I.landmark,latitude:I.latitude,longitude:I.longitude,isDefault:!c?.addresses?.length});R.success&&(y(R.address),C(!1),xe(null),q({label:"Home",address:"",landmark:"",city:"",pincode:"",latitude:null,longitude:null}))},ae=(()=>{let P=m==="pickup"?0:p.deliveryFee;const{discountAmount:R,appliedOffer:G}=ko(p.subtotal,u?.storeOffers||[]);let ue=Math.max(0,p.subtotal-R)+P+p.platformFee,le=ue,fe=0;return T==="PAY_LATER"?(le=0,fe=ue):T==="PARTIAL"&&(le=H,fe=ue-H),{deliveryFee:P,finalTotal:ue,payNow:le,payLater:fe,discountAmount:R,appliedOffer:G}})(),it=async()=>{if(m==="delivery"&&!x){alert("Please add a delivery address");return}if(m==="delivery"&&!Bt&&Te!==null){alert(`Delivery is not available to your address. You are ${Te} km away, but the store only delivers within ${u?.deliveryRadius||10} km. Please choose Store Pickup instead.`);return}if(m==="pickup"&&!D){alert("Please select a pickup time slot");return}if(m==="delivery"&&b&&!E){alert("Please select a delivery time slot");return}U(!0);try{let P={isScheduledDelivery:!1,deliverySlot:null,deliveryDate:null,deliveryDateLabel:null};m==="delivery"&&(b&&E&&E.time?(P={isScheduledDelivery:!0,deliverySlot:E.time,deliveryDate:v.toISOString(),deliveryDateLabel:ot(v)},console.log("Scheduled delivery info:",P)):P={isScheduledDelivery:!1,deliverySlot:L,deliveryDate:null,deliveryDateLabel:null});const R={customerId:l.uid,customerName:c?.name||"Customer",customerPhone:l.phoneNumber||c?.phone||"",storeId:n.id,storeName:n.name||n.businessName||"Store",storePhone:u?.phone||"",items:r.map(ce=>({productId:ce.productId,name:ce.name,price:ce.price,quantity:ce.quantity,total:ce.price*ce.quantity})),subtotal:p.subtotal,discountAmount:ae.discountAmount||0,appliedOffer:ae.appliedOffer||null,deliveryFee:ae.deliveryFee,platformFee:p.platformFee,total:ae.finalTotal,orderType:m,deliveryAddress:m==="delivery"?x:null,customerDistance:m==="delivery"&&Te?Te:null,isScheduledDelivery:P.isScheduledDelivery,deliverySlot:P.deliverySlot,deliveryDate:P.deliveryDate,deliveryDateLabel:P.deliveryDateLabel,pickupSlot:m==="pickup"?D:null,pickupDate:m==="pickup"?A.toISOString():null,pickupDateLabel:m==="pickup"?ot(A):null,pickupInstructions:m==="pickup"?u?.pickupInstructions:null,paymentMethod:T,payNow:ae.payNow,payLater:ae.payLater,paymentDueDate:T==="PAY_LATER"?new Date(Date.now()+(u?.payLaterDays||7)*24*60*60*1e3).toISOString():null,specialInstructions:Y},G=await Bo(R);G.success?(await On("success"),o(),e?.(G.orderId,G.orderNumber)):alert(G.error||"Failed to place order")}catch(P){console.error("Order error:",P),alert("Something went wrong. Please try again.")}finally{U(!1)}};if(f)return s.jsx("div",{className:"min-h-screen bg-[#060D2D] flex items-center justify-center",children:s.jsx("div",{className:"w-8 h-8 border-2 border-[#05E06C]500 border-t-transparent rounded-full animate-spin"})});const at=u?.pickupEnabled&&u?.pickupTimeSlots?.some(P=>P.enabled);return s.jsxs("div",{className:"min-h-screen bg-[#060D2D]",children:[s.jsx("div",{className:"bg-[#060D2D]/80 backdrop-blur-xl sticky top-0 z-10 border-b border-white/5",children:s.jsxs("div",{className:"px-4 py-3 flex items-center gap-3",style:{paddingTop:"calc(env(safe-area-inset-top) + 12px)"},children:[s.jsx("button",{onClick:t,className:"w-10 h-10 rounded-full bg-[#141c2e] border border-white/10 flex items-center justify-center",children:s.jsx(Oe,{className:"text-white/60"})}),s.jsx("h1",{className:"font-bold text-white text-lg",children:"Checkout"})]})}),s.jsxs("div",{className:"px-4 py-4 space-y-6",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-white mb-3",children:"How would you like to receive?"}),!ke&&at&&s.jsxs("div",{className:"mb-4 p-3 bg-amber-500/10 border border-amber-500/30 rounded-xl flex items-start gap-2",children:[s.jsx(me,{className:"text-amber-400 mt-0.5 flex-shrink-0"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-amber-400 text-xs font-semibold",children:"Store Pickup Only"}),s.jsxs("p",{className:"text-amber-400/70 text-[11px] mt-0.5",children:["You are ",Te," km away from this store. Delivery is only available within ",u?.deliveryRadius||10," km. Please pick up your order from the store."]})]})]}),s.jsxs("div",{className:"flex gap-3",children:[ke&&s.jsx(In,{type:"delivery",icon:ut,label:"Delivery",description:"To your address",isSelected:m==="delivery",onSelect:N}),s.jsx(In,{type:"pickup",icon:ns,label:ke?"Pickup":"Store Pickup",description:ke?"From store":"Only option available",isSelected:m==="pickup",onSelect:N,disabled:!at}),!ke&&s.jsx("div",{className:"flex-1 p-4 rounded-xl border-2 border-white/5 bg-[#141c2e]/30 opacity-50 cursor-not-allowed",children:s.jsxs("div",{className:"flex flex-col items-center gap-2",children:[s.jsx("div",{className:"w-12 h-12 rounded-full flex items-center justify-center bg-slate-700/50",children:s.jsx(ut,{className:"text-xl text-white/30"})}),s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"font-semibold text-white/40",children:"Delivery"}),s.jsx("p",{className:"text-xs text-red-400/60",children:"Out of range"})]})]})})]}),!at&&ke&&s.jsxs("p",{className:"text-xs text-white/40 mt-2 flex items-center gap-1",children:[s.jsx(Xe,{}),"Pickup not available for this store"]})]}),s.jsx(Ie,{children:m==="delivery"&&ke&&s.jsxs(_.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},children:[s.jsx("h3",{className:"font-semibold text-white mb-3",children:"Delivery Address"}),ne?s.jsxs("div",{className:"bg-[#141c2e]/50 backdrop-blur-xl rounded-2xl p-5 border border-white/10",children:[s.jsxs("h4",{className:"font-medium text-white mb-4 flex items-center gap-2",children:[s.jsx(me,{className:"text-emerald-400"}),"Add Delivery Address"]}),s.jsxs("div",{className:"mb-4",children:[Ne&&s.jsx("div",{className:"mb-3",children:s.jsx(Ks,{onLoad:Ut,onPlaceChanged:$t,restrictions:{country:"in"},children:s.jsxs("div",{className:"relative",children:[s.jsx(lo,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-emerald-400"}),s.jsx("input",{type:"text",placeholder:"Search your location...",className:"w-full pl-10 pr-4 py-3 bg-slate-700 border border-white/10 rounded-xl text-sm text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-emerald-500"})]})})}),s.jsxs("div",{className:"relative rounded-xl overflow-hidden border border-white/10",children:[tt&&s.jsx("div",{className:"h-[200px] flex items-center justify-center bg-red-500/10 text-red-400 text-sm",children:s.jsx("p",{children:"Error loading map"})}),!Ne&&!tt&&s.jsx("div",{className:"h-[200px] flex items-center justify-center bg-slate-800",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"w-6 h-6 border-2 border-emerald-500 border-t-transparent rounded-full animate-spin mx-auto mb-2"}),s.jsx("p",{className:"text-white/60 text-xs",children:"Loading map..."})]})}),Ne&&!tt&&s.jsx(el,{mapContainerStyle:Bc,center:V,zoom:ge?16:5,options:zc,onLoad:zt,onClick:st,children:ge&&s.jsx(yi,{position:ge,draggable:!0,onDragEnd:Ht,icon:{url:"https://maps.google.com/mapfiles/ms/icons/red-dot.png",scaledSize:new window.google.maps.Size(40,40)}})}),Ne&&s.jsx("div",{className:"absolute bottom-2 left-2 right-2 flex justify-between items-center",children:s.jsx("span",{className:"px-2 py-1 bg-black/70 text-white text-[10px] rounded",children:ge?"Drag pin to adjust":"Tap to place pin"})})]}),s.jsx("button",{onClick:qe,disabled:Re||!Ne,className:"w-full mt-3 py-2.5 bg-emerald-500/20 border border-emerald-500/30 rounded-xl text-emerald-400 text-sm font-medium flex items-center justify-center gap-2 disabled:opacity-50",children:Re?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"w-4 h-4 border-2 border-emerald-400 border-t-transparent rounded-full animate-spin"}),"Getting location..."]}):s.jsxs(s.Fragment,{children:[s.jsx(to,{}),"Use Current Location"]})})]}),s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"block text-xs font-medium text-slate-400 mb-2",children:"Save as"}),s.jsx("div",{className:"flex gap-2",children:["Home","Office","Other"].map(P=>s.jsx("button",{onClick:()=>q({...I,label:P}),className:`px-4 py-2 rounded-lg text-sm font-medium transition-all ${I.label===P?"bg-emerald-500 text-white":"bg-slate-700 text-slate-300 hover:bg-slate-600"}`,children:P},P))})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-slate-400 mb-1",children:"Full Address *"}),s.jsx("textarea",{rows:2,placeholder:"House/Flat No., Building, Street",value:I.address,onChange:P=>q({...I,address:P.target.value}),className:"w-full px-4 py-3 bg-slate-700 border border-white/10 rounded-xl text-sm text-white placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-emerald-500 resize-none"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-slate-400 mb-1",children:"Landmark (Optional)"}),s.jsx("input",{type:"text",placeholder:"Near temple, opposite park, etc.",value:I.landmark,onChange:P=>q({...I,landmark:P.target.value}),className:"w-full px-4 py-3 bg-slate-700 border border-white/10 rounded-xl text-sm text-white placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-emerald-500"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-slate-400 mb-1",children:"City *"}),s.jsx("input",{type:"text",placeholder:"City",value:I.city,onChange:P=>q({...I,city:P.target.value}),className:"w-full px-4 py-3 bg-slate-700 border border-white/10 rounded-xl text-sm text-white placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-emerald-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-slate-400 mb-1",children:"Pincode *"}),s.jsx("input",{type:"text",placeholder:"Pincode",value:I.pincode,onChange:P=>q({...I,pincode:P.target.value.replace(/\D/g,"").slice(0,6)}),className:"w-full px-4 py-3 bg-slate-700 border border-white/10 rounded-xl text-sm text-white placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-emerald-500"})]})]})]}),I.latitude&&I.longitude&&s.jsxs("div",{className:"mt-3 px-3 py-2 bg-emerald-500/10 border border-emerald-500/20 rounded-lg flex items-center gap-2",children:[s.jsx(me,{className:"text-emerald-400 text-xs"}),s.jsxs("span",{className:"text-xs text-emerald-400",children:["Location pinned  Lat: ",I.latitude.toFixed(4),", Lng: ",I.longitude.toFixed(4)]})]}),s.jsxs("div",{className:"flex gap-3 mt-5",children:[c?.addresses?.length>0&&s.jsx("button",{onClick:()=>{C(!1),xe(null),q({label:"Home",address:"",landmark:"",city:"",pincode:"",latitude:null,longitude:null})},className:"flex-1 py-3 border border-white/10 rounded-xl text-white/60 font-medium",children:"Cancel"}),s.jsx("button",{onClick:Wt,disabled:!I.address||!I.city||!I.pincode,className:"flex-1 py-3 bg-emerald-500 text-white rounded-xl font-medium disabled:bg-slate-700 disabled:text-white/40",children:"Save Address"})]})]}):s.jsxs("div",{className:"space-y-3",children:[c?.addresses?.map(P=>s.jsx(Gc,{address:P,isSelected:x?.id===P.id,onSelect:y},P.id)),s.jsxs("button",{onClick:()=>C(!0),className:"w-full p-4 rounded-xl border-2 border-dashed border-[#05E06C]500/30 bg-[#05E06C]/5 flex items-center justify-center gap-2 text-[#05E06C]400 font-medium",children:[s.jsx(vt,{className:"text-sm"}),"Add New Address"]})]})]})}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-white mb-3",children:m==="delivery"?"Delivery Time":"Pickup Time"}),m==="delivery"?s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:()=>{j(!1),M("asap")},className:`flex-1 p-3 rounded-xl border-2 transition-all ${b?"border-white/10 bg-[#141c2e]/50":"border-emerald-500 bg-emerald-500/10"}`,children:s.jsxs("div",{className:"flex items-center justify-center gap-2",children:[s.jsx(ut,{className:b?"text-white/40":"text-emerald-400"}),s.jsx("span",{className:`font-medium ${b?"text-white":"text-emerald-400"}`,children:"Quick Delivery"})]})}),s.jsx("button",{onClick:()=>{j(!0),M("scheduled")},className:`flex-1 p-3 rounded-xl border-2 transition-all ${b?"border-emerald-500 bg-emerald-500/10":"border-white/10 bg-[#141c2e]/50"}`,children:s.jsxs("div",{className:"flex items-center justify-center gap-2",children:[s.jsx(we,{className:b?"text-emerald-400":"text-white/40"}),s.jsx("span",{className:`font-medium ${b?"text-emerald-400":"text-white"}`,children:"Schedule"})]})})]}),!b&&s.jsx("div",{className:"flex gap-2",children:Vt.map(P=>s.jsx(Hc,{slot:P,isSelected:L===P.id,onSelect:()=>M(P.id)},P.id))}),b&&s.jsxs("div",{className:"space-y-4 p-4 bg-[#141c2e]/50 rounded-xl border border-white/10",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-white/50 mb-2",children:"Select Delivery Date"}),s.jsx(Rn,{days:W,selectedDate:v,onSelect:w})]}),s.jsxs("div",{children:[s.jsxs("p",{className:"text-xs text-white/50 mb-2",children:["Delivery Slots for ",ot(v)]}),s.jsx("div",{className:"space-y-2",children:(()=>{const P=kt(rt,v,60);return P.length===0?s.jsxs("div",{className:"p-4 bg-amber-500/10 border border-amber-500/20 rounded-xl text-sm text-amber-400 flex items-center gap-2",children:[s.jsx(Xe,{}),s.jsx("span",{children:v.toDateString()===new Date().toDateString()?"No more slots available today. Please select another date.":"No delivery slots available for this date."})]}):P.map((R,G)=>s.jsxs("button",{onClick:()=>S(R),className:`w-full p-3 rounded-xl border-2 flex items-center justify-between transition-all ${E?.time===R.time?"border-emerald-500 bg-emerald-500/10":"border-white/10 bg-[#141c2e]/50 hover:border-white/20"}`,children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center ${E?.time===R.time?"bg-emerald-500":"bg-white/[0.06]"}`,children:s.jsx(we,{className:E?.time===R.time?"text-white text-sm":"text-white/40 text-sm"})}),s.jsx("span",{className:`font-medium ${E?.time===R.time?"text-emerald-400":"text-white"}`,children:R.time})]}),E?.time===R.time&&s.jsx(We,{className:"text-emerald-400"})]},G))})()})]}),E&&s.jsx("div",{className:"p-3 bg-emerald-500/10 border border-emerald-500/20 rounded-lg",children:s.jsxs("div",{className:"flex items-center gap-2 text-emerald-400 text-sm",children:[s.jsx(We,{className:"text-xs"}),s.jsxs("span",{children:["Scheduled for ",s.jsx("strong",{children:ot(v)})," at ",s.jsx("strong",{children:E.time})]})]})})]})]}):s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-white/50 mb-2",children:"Select Date"}),s.jsx(Rn,{days:ee,selectedDate:A,onSelect:B})]}),s.jsxs("div",{children:[s.jsxs("p",{className:"text-xs text-white/50 mb-2",children:["Available Slots for ",ot(A)]}),s.jsx("div",{className:"space-y-2",children:(()=>{const P=kt(u?.pickupTimeSlots,A,30);return P.length===0?s.jsxs("div",{className:"p-4 bg-amber-500/10 border border-amber-500/20 rounded-xl text-sm text-amber-400 flex items-center gap-2",children:[s.jsx(Xe,{}),s.jsx("span",{children:A.toDateString()===new Date().toDateString()?"No more slots available today. Please select tomorrow or another date.":"No pickup slots available for this date."})]}):P.map(R=>s.jsx(Vc,{slot:R,isSelected:D?.id===R.id,onSelect:()=>O(R)},R.id))})()})]}),u?.pickupInstructions&&s.jsxs("div",{className:"p-3 bg-blue-500/10 border border-blue-500/20 rounded-xl text-sm text-blue-400 flex items-start gap-2",children:[s.jsx(Xe,{className:"mt-0.5 flex-shrink-0"}),s.jsx("span",{children:u.pickupInstructions})]})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-white mb-3",children:"Payment Method"}),s.jsx("div",{className:"space-y-2",children:nt.map(P=>s.jsx(Wc,{method:P,isSelected:T===P.id,onSelect:()=>z(P.id),badge:P.badge},P.id))}),T==="PARTIAL"&&s.jsxs(_.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},className:"mt-3 p-4 bg-purple-500/10 border border-purple-500/20 rounded-xl",children:[s.jsxs("label",{className:"block text-sm font-medium text-purple-400 mb-2",children:["Advance Amount (Min: ",Math.ceil(ae.finalTotal*(u?.minAdvancePercent||50)/100),")"]}),s.jsx("input",{type:"number",value:H,onChange:P=>{const R=Math.ceil(ae.finalTotal*(u?.minAdvancePercent||50)/100),G=Math.max(R,Math.min(ae.finalTotal,parseInt(P.target.value)||0));X(G)},className:"w-full px-4 py-3 bg-[#141c2e] border border-purple-500/30 rounded-xl text-lg font-bold text-white focus:outline-none focus:ring-2 focus:ring-purple-500"}),s.jsxs("p",{className:"text-xs text-purple-400 mt-2",children:["Remaining ",ae.finalTotal-H," to be paid on ",m==="delivery"?"delivery":"pickup"]})]}),T==="PAY_LATER"&&s.jsx(_.div,{initial:{opacity:0},animate:{opacity:1},className:"mt-3 p-4 bg-amber-500/10 border border-amber-500/20 rounded-xl",children:s.jsxs("p",{className:"text-sm text-amber-400",children:[s.jsx("strong",{children:"Pay Later:"})," Full payment of ",ae.finalTotal.toFixed(2)," due within ",u?.payLaterDays||7," days"]})})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-white mb-3",children:"Special Instructions (Optional)"}),s.jsx("textarea",{placeholder:"Any special requests...",value:Y,onChange:P=>se(P.target.value),rows:2,className:"w-full px-4 py-3 bg-[#141c2e] border border-white/10 rounded-xl text-sm text-white placeholder-slate-500 resize-none focus:outline-none focus:ring-2 focus:ring-emerald-500"})]}),u?.storeOffers?.length>0&&u.storeOffers.some(P=>P.enabled)&&s.jsxs("div",{className:"rounded-xl border border-amber-500/30 bg-amber-500/10 p-4 flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-full bg-amber-500/20 flex items-center justify-center flex-shrink-0",children:s.jsx(xs,{className:"text-amber-400"})}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-amber-300 text-sm",children:"Store offers applied at checkout"}),s.jsx("p",{className:"text-white/50 text-xs mt-0.5",children:u.storeOffers.filter(P=>P.enabled).map(P=>P.type==="percent_all"?`${P.value}% off on all orders`:P.type==="percent_above"?`${P.value}% off on orders above ${P.minOrderValue||0}`:null).filter(Boolean).join("  ")})]})]}),s.jsxs("div",{className:"bg-[#141c2e]/50 backdrop-blur-xl rounded-2xl border border-white/10 p-5",children:[s.jsx("h3",{className:"font-semibold text-white mb-4",children:"Order Summary"}),s.jsxs("div",{className:"space-y-3 text-sm",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsxs("span",{className:"text-white/60",children:["Items (",p.itemCount,")"]}),s.jsxs("span",{className:"font-medium text-white",children:["",p.subtotal.toFixed(2)]})]}),ae.discountAmount>0&&s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-amber-400",children:ae.appliedOffer?.type==="percent_all"?`${ae.appliedOffer?.value}% off on all orders`:ae.appliedOffer?.type==="percent_above"?`${ae.appliedOffer?.value}% off (orders above ${ae.appliedOffer?.minOrderValue||0})`:"Store offer"}),s.jsxs("span",{className:"font-medium text-amber-400",children:["-",ae.discountAmount.toFixed(2)]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-white/60",children:m==="delivery"?"Delivery Fee":"Pickup"}),s.jsx("span",{className:`font-medium ${ae.deliveryFee===0?"text-emerald-400":"text-white"}`,children:ae.deliveryFee===0?"FREE":`${ae.deliveryFee}`})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-white/60",children:"Platform Fee"}),s.jsxs("span",{className:"font-medium text-white",children:["",p.platformFee]})]}),s.jsxs("div",{className:"border-t border-white/10 pt-3 mt-3",children:[s.jsxs("div",{className:"flex justify-between font-bold text-base",children:[s.jsx("span",{className:"text-white",children:"Total"}),s.jsxs("span",{className:"text-emerald-400",children:["",ae.finalTotal.toFixed(2)]})]}),(T==="PARTIAL"||T==="PAY_LATER")&&s.jsxs("div",{className:"mt-2 space-y-1",children:[s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{className:"text-white/60",children:"Pay Now"}),s.jsxs("span",{className:"font-semibold text-emerald-400",children:["",ae.payNow.toFixed(2)]})]}),s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{className:"text-white/60",children:"Pay Later"}),s.jsxs("span",{className:"font-semibold text-amber-400",children:["",ae.payLater.toFixed(2)]})]})]})]})]})]}),s.jsx("button",{onClick:it,disabled:re||m==="delivery"&&!x||m==="delivery"&&b&&!E||m==="pickup"&&!D,className:`w-full py-4 rounded-xl font-semibold text-lg flex items-center justify-center gap-2 transition-all ${re||m==="delivery"&&!x||m==="delivery"&&b&&!E||m==="pickup"&&!D?"bg-[#141c2e] text-white/40 cursor-not-allowed":"bg-gradient-to-r from-emerald-500 to-teal-500 text-white shadow-lg shadow-emerald-500/30"}`,children:re?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Placing Order..."]}):s.jsxs(s.Fragment,{children:["Place Order  ",ae.payNow>0?ae.payNow.toFixed(2):ae.finalTotal.toFixed(2),ae.payLater>0&&s.jsxs("span",{className:"text-white/70 text-sm ml-1",children:["(+",ae.payLater.toFixed(2)," later)"]})]})})]}),s.jsx("div",{className:"h-24"})]})},qc=({order:t,onClose:e})=>{const{customer:r,customerData:n}=xt(),[i,o]=a.useState([]),[l,c]=a.useState(""),[d,p]=a.useState(!1),u=a.useRef(null),h=a.useRef(null),f=()=>{u.current?.scrollIntoView({behavior:"smooth"})};a.useEffect(()=>{f()},[i]),a.useEffect(()=>{if(!t?.id)return;const y=Me(he,"orderChats",t.id,"messages"),L=fs(y,Ti("createdAt","asc")),M=Zn(L,b=>{const j=b.docs.map(v=>({id:v.id,...v.data(),createdAt:v.data().createdAt?.toDate()||new Date}));o(j)},b=>{console.error("Error fetching chat:",b)});return()=>M()},[t?.id]);const g=async()=>{if(!l.trim()||d)return;const y=l.trim();c(""),p(!0);try{const L=Me(he,"orderChats",t.id,"messages");await $s(L,{text:y,senderId:r?.uid||"customer",senderName:n?.name||"Customer",senderType:"customer",createdAt:Pe(),read:!1});const M=Ee(he,"orderChats",t.id);await Mt(M,{lastMessage:y,lastMessageAt:Pe(),lastMessageBy:"customer"}).catch(()=>{})}catch(L){console.error("Error sending message:",L),c(y)}finally{p(!1),h.current?.focus()}},m=y=>{y.key==="Enter"&&!y.shiftKey&&(y.preventDefault(),g())},N=y=>y.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),x=["Where are you?","How long?","I'm outside","Call me","Wait please"];return s.jsxs(_.div,{initial:{opacity:0,y:"100%"},animate:{opacity:1,y:0},exit:{opacity:0,y:"100%"},transition:{type:"spring",damping:25,stiffness:300},className:"fixed inset-0 bg-[#060D2D] z-50 flex flex-col",children:[s.jsxs("div",{className:"bg-gradient-to-r from-[#05E06C] to-[#04B857] text-white px-4 py-4",style:{paddingTop:"calc(env(safe-area-inset-top) + 16px)"},children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("button",{onClick:e,className:"w-10 h-10 rounded-full bg-white/20 flex items-center justify-center hover:bg-white/30 transition-all",children:s.jsx(Oe,{})}),s.jsxs("div",{className:"flex-1 flex items-center gap-3",children:[s.jsx("div",{className:"w-11 h-11 rounded-full bg-white/20 flex items-center justify-center text-lg",children:s.jsx(He,{})}),s.jsxs("div",{children:[s.jsx("h2",{className:"font-semibold text-base",children:t.deliveryAgent?.name||t.deliveryPartner||"Delivery Partner"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"w-2 h-2 rounded-full bg-green-300 animate-pulse"}),s.jsx("p",{className:"text-xs text-white/80",children:t.status==="out_for_delivery"?"On the way":"Delivery Agent"})]})]})]}),(t.deliveryAgent?.phone||t.deliveryPartnerPhone)&&s.jsx("a",{href:`tel:${t.deliveryAgent?.phone||t.deliveryPartnerPhone}`,className:"w-11 h-11 rounded-full bg-white flex items-center justify-center text-emerald-600 shadow-lg hover:scale-105 transition-all",children:s.jsx(ft,{})})]}),t.deliveryAgent?.vehicleNumber&&s.jsxs("div",{className:"mt-3 inline-flex items-center gap-2 bg-white/20 rounded-full px-3 py-1.5 text-xs",children:[s.jsx(He,{className:"text-white/70"}),s.jsx("span",{children:t.deliveryAgent.vehicleNumber}),s.jsx("span",{className:"text-white/50",children:""}),s.jsxs("span",{className:"text-white/70",children:["Order #",t.orderNumber?.slice(-6)||t.id?.slice(-6)]})]})]}),s.jsx("div",{className:"flex-1 overflow-y-auto px-4 py-4 bg-[#0A1340]",children:i.length===0?s.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-center px-6",children:[s.jsx("div",{className:"w-20 h-20 rounded-full bg-emerald-500/10 border border-[#05E06C]/20 flex items-center justify-center mb-4",children:s.jsx(He,{className:"text-3xl text-emerald-400"})}),s.jsx("h3",{className:"font-semibold text-white text-lg mb-2",children:"Chat with your delivery agent"}),s.jsx("p",{className:"text-sm text-white/40 max-w-xs leading-relaxed",children:"Coordinate delivery or share your location details"})]}):s.jsxs("div",{className:"space-y-4",children:[i.map(y=>{const L=y.senderType==="customer";return s.jsx(_.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:`flex ${L?"justify-end":"justify-start"}`,children:s.jsxs("div",{className:`max-w-[80%] rounded-2xl px-4 py-3 ${L?"bg-gradient-to-br from-[#05E06C] to-[#04B857] text-white rounded-tr-sm shadow-lg shadow-[#05E06C]/20":"bg-[#101B4A] border border-white/10 text-white rounded-tl-sm"}`,children:[!L&&s.jsx("p",{className:"text-xs font-medium text-emerald-400 mb-1",children:y.senderName}),s.jsx("p",{className:"text-sm leading-relaxed",children:y.text}),s.jsxs("div",{className:`flex items-center justify-end gap-1.5 mt-2 ${L?"text-white/70":"text-white/40"}`,children:[s.jsx("span",{className:"text-[10px]",children:N(y.createdAt)}),L&&(y.read?s.jsx(Xa,{className:"text-[10px]"}):s.jsx(We,{className:"text-[10px]"}))]})]})},y.id)}),s.jsx("div",{ref:u})]})}),s.jsx("div",{className:"px-4 py-2 bg-[#060D2D] border-t border-white/5",children:s.jsx("div",{className:"flex gap-2 overflow-x-auto pb-1 scrollbar-hide",children:x.map((y,L)=>s.jsx("button",{onClick:()=>c(y),className:"px-4 py-2 bg-[#101B4A] hover:bg-emerald-500/10 border border-white/10 hover:border-[#05E06C]/30 rounded-full text-sm text-white/70 hover:text-emerald-400 whitespace-nowrap transition-all",children:y},L))})}),s.jsx("div",{className:"bg-[#060D2D] border-t border-white/5 px-4 py-3",style:{paddingBottom:"calc(env(safe-area-inset-bottom) + 12px)"},children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("input",{ref:h,type:"text",value:l,onChange:y=>c(y.target.value),onKeyPress:m,placeholder:"Type a message...",className:"flex-1 px-5 py-3.5 bg-[#101B4A] rounded-full text-white placeholder-white/40 focus:outline-none focus:ring-2 focus:ring-emerald-500 border border-white/10 focus:border-[#05E06C]/50 transition-all text-sm"}),s.jsx("button",{onClick:g,disabled:!l.trim()||d,className:`w-12 h-12 rounded-full flex items-center justify-center transition-all ${l.trim()?"bg-gradient-to-br from-[#05E06C] to-[#04B857] text-white shadow-lg shadow-[#05E06C]/30 hover:shadow-[#05E06C]/50 hover:scale-105":"bg-[#101B4A] text-white/30 border border-white/10"}`,children:s.jsx(no,{className:`text-sm ${d?"animate-pulse":""}`})})]})})]})},Kc=t=>{if(!t)return null;try{const e=new Date(t),r=new Date,n=new Date(r);return n.setDate(n.getDate()+1),e.toDateString()===r.toDateString()?"Today":e.toDateString()===n.toDateString()?"Tomorrow":e.toLocaleDateString("en-IN",{weekday:"short",day:"numeric",month:"short"})}catch{return null}},Yc=({step:t,currentStep:e,label:r,time:n,isLast:i,icon:o})=>{const l=e>t,c=e===t;return s.jsxs("div",{className:"flex gap-3",children:[s.jsxs("div",{className:"flex flex-col items-center",children:[s.jsx("div",{className:`w-9 h-9 rounded-full flex items-center justify-center transition-all ${l?"bg-emerald-500 shadow-lg shadow-emerald-500/30":c?"bg-emerald-500/20 border-2 border-emerald-500 shadow-lg shadow-emerald-500/20":"bg-white/[0.06] border border-white/[0.1]"}`,children:l?s.jsx(We,{className:"text-white text-sm"}):s.jsx("div",{className:`w-2.5 h-2.5 rounded-full ${c?"bg-emerald-500 animate-pulse":"bg-white/20"}`})}),!i&&s.jsx("div",{className:`w-0.5 h-10 ${l?"bg-emerald-500":"bg-white/[0.08]"}`})]}),s.jsxs("div",{className:"flex-1 pb-6",children:[s.jsx("p",{className:`font-medium ${c?"text-emerald-400":l?"text-white":"text-white/30"}`,children:r}),n&&s.jsx("p",{className:"text-xs text-white/40 mt-0.5",children:n})]})]})},Jc=({orderId:t,onBack:e})=>{const[r,n]=a.useState(null),[i,o]=a.useState(!0),[l,c]=a.useState(!1),[d,p]=a.useState(!1);if(a.useEffect(()=>{if(!t)return;const x=Uo(t,y=>{n(y),o(!1),y?.status==="delivered"&&!y?.storeRating&&!d&&setTimeout(()=>{p(!0)},1e3)});return()=>x()},[t,d]),i)return s.jsxs("div",{className:"min-h-screen bg-[#0a0f1a] flex flex-col items-center justify-center",children:[s.jsx("div",{className:"w-12 h-12 rounded-full border-4 border-emerald-500 border-t-transparent animate-spin mb-4"}),s.jsx("p",{className:"text-white/40",children:"Loading order..."})]});if(!r)return s.jsxs("div",{className:"min-h-screen bg-[#0a0f1a] flex flex-col items-center justify-center px-6",children:[s.jsx("div",{className:"w-20 h-20 rounded-full bg-white/[0.04] flex items-center justify-center mb-4",children:s.jsx(Ds,{className:"text-white/20 text-3xl"})}),s.jsx("p",{className:"text-white/60 mb-4",children:"Order not found"}),s.jsx("button",{onClick:e,className:"text-emerald-400 font-medium",children:"Go Back"})]});const u=r.orderType==="pickup",h=pi(r.status,r.orderType)||{label:"Processing",description:"Order is being processed",color:"text-white/60",icon:"",step:1},m=u?[{step:1,label:"Order Placed",status:"pending"},{step:2,label:"Confirmed",status:"confirmed"},{step:3,label:"Preparing",status:"preparing"},{step:4,label:"Ready for Pickup",status:"ready"},{step:5,label:"Picked Up",status:"delivered"}]:[{step:1,label:"Order Placed",status:"pending"},{step:2,label:"Confirmed",status:"confirmed"},{step:3,label:"Preparing",status:"preparing"},{step:4,label:"Ready",status:"ready"},{step:5,label:"Out for Delivery",status:"out_for_delivery"},{step:6,label:"Delivered",status:"delivered"}],N=x=>{if(!Array.isArray(r.statusHistory))return x==="pending"&&r.createdAt?new Date(r.createdAt).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):null;const y=r.statusHistory.find(L=>L.status===x);return y?new Date(y.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):null};return s.jsxs("div",{className:"min-h-screen bg-[#0a0f1a]",children:[s.jsx("div",{className:"bg-[#0a0f1a]/90 backdrop-blur-xl sticky top-0 z-10 border-b border-white/[0.06]",children:s.jsxs("div",{className:"px-4 py-3 flex items-center gap-3",style:{paddingTop:"calc(env(safe-area-inset-top) + 12px)"},children:[s.jsx("button",{onClick:()=>{if(e)try{e()}catch(x){console.error("Navigation error:",x),window.history.length>1?window.history.back():window.location.href="/shop"}else window.history.length>1?window.history.back():window.location.href="/shop"},className:"w-10 h-10 rounded-full bg-white/[0.06] border border-white/[0.08] flex items-center justify-center hover:bg-white/[0.1] transition",children:s.jsx(Oe,{className:"text-white/60"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"font-bold text-white",children:"Track Order"}),s.jsxs("p",{className:"text-xs text-white/40",children:["#",r.orderNumber]})]})]})}),s.jsxs("div",{className:`mx-4 mt-4 p-4 rounded-2xl border ${u?"bg-purple-500/10 border-purple-500/20":"bg-cyan-500/10 border-cyan-500/20"}`,children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center text-2xl ${u?"bg-purple-500/20":"bg-cyan-500/20"}`,children:h.icon}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:`font-semibold text-lg ${h.color||"text-emerald-400"}`,children:h.label}),s.jsx("p",{className:"text-sm text-white/60",children:h.description})]})]}),r.status!=="delivered"&&r.status!=="cancelled"&&s.jsxs("div",{className:"mt-3 pt-3 border-t border-white/[0.08] flex items-center gap-2",children:[s.jsx(we,{className:"text-white/40"}),u?s.jsxs("span",{className:"text-sm text-white/60",children:["Pickup: ",s.jsx("span",{className:"text-white font-medium",children:r.pickupDateLabel||"Today"})," at ",s.jsx("span",{className:"text-white font-medium",children:r.pickupSlot?.time||"Store hours"})]}):r.estimatedDelivery?s.jsxs("span",{className:"text-sm text-white/60",children:["Estimated delivery by ",s.jsx("span",{className:"text-white font-medium",children:new Date(r.estimatedDelivery).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}):s.jsx("span",{className:"text-sm text-white/60",children:"Estimated time will be updated soon"})]})]}),r.status!=="cancelled"&&s.jsxs("div",{className:"mx-4 mt-4 bg-[#111827] rounded-2xl border border-white/[0.06] p-4",children:[s.jsx("h3",{className:"font-semibold text-white mb-4",children:"Order Progress"}),s.jsx("div",{children:m.map((x,y)=>s.jsx(Yc,{step:x.step,currentStep:h.step,label:x.label,time:N(x.status),isLast:y===m.length-1},x.step))})]}),!u&&(r.deliveryAgent||r.deliveryPartner)&&r.status==="out_for_delivery"&&s.jsxs(_.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"mx-4 mt-4 bg-gradient-to-r from-emerald-500 to-teal-500 rounded-2xl p-4 text-white shadow-xl shadow-emerald-500/20",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsx("h3",{className:"font-semibold",children:"Delivery Partner"}),s.jsxs("span",{className:"text-xs bg-white/20 px-2 py-1 rounded-full flex items-center gap-1",children:[s.jsx("span",{className:"w-2 h-2 bg-white rounded-full animate-pulse"}),"On the way"]})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-14 h-14 rounded-full bg-white/20 flex items-center justify-center",children:s.jsx(He,{className:"text-2xl"})}),s.jsxs("div",{children:[s.jsx("p",{className:"font-semibold text-lg",children:r.deliveryAgent?.name||r.deliveryPartner}),s.jsx("p",{className:"text-sm text-white/80",children:r.deliveryAgent?.vehicleNumber||"Delivery Agent"})]})]}),s.jsxs("div",{className:"flex gap-2",children:[(r.deliveryAgent?.phone||r.deliveryPartnerPhone)&&s.jsx("a",{href:`tel:${r.deliveryAgent?.phone||r.deliveryPartnerPhone}`,className:"w-11 h-11 rounded-full bg-white/20 flex items-center justify-center hover:bg-white/30 transition",children:s.jsx(ft,{})}),s.jsx("button",{onClick:()=>c(!0),className:"w-11 h-11 rounded-full bg-white flex items-center justify-center text-emerald-600",children:s.jsx(eo,{})})]})]})]}),u&&r.status==="ready"&&s.jsxs(_.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"mx-4 mt-4 bg-gradient-to-r from-purple-500 to-pink-500 rounded-2xl p-4 text-white shadow-xl shadow-purple-500/20",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsx("h3",{className:"font-semibold",children:"Ready for Pickup!"}),s.jsxs("span",{className:"text-xs bg-white/20 px-2 py-1 rounded-full flex items-center gap-1",children:[s.jsx(ct,{className:"text-xs"}),"Waiting for you"]})]}),s.jsx("p",{className:"text-white/90 text-sm mb-4",children:"Your order is packed and ready. Visit the store to collect it."}),s.jsxs("div",{className:"bg-white/10 rounded-xl p-3 mb-3",children:[s.jsx("p",{className:"text-white/70 text-xs mb-1",children:"Pickup Time"}),s.jsxs("p",{className:"font-semibold",children:[r.pickupDateLabel||"Today","  ",r.pickupSlot?.time||"During store hours"]})]}),r.pickupInstructions&&s.jsxs("div",{className:"bg-white/10 rounded-xl p-3",children:[s.jsx("p",{className:"text-white/70 text-xs mb-1",children:"Pickup Instructions"}),s.jsx("p",{className:"text-sm",children:r.pickupInstructions})]})]}),s.jsxs("div",{className:"mx-4 mt-4 bg-[#111827] rounded-2xl border border-white/[0.06] p-4",children:[s.jsx("h3",{className:"font-semibold text-white mb-3",children:"Store Details"}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center ${u?"bg-purple-500/10 border border-purple-500/20":"bg-blue-500/10 border border-blue-500/20"}`,children:s.jsx(ve,{className:u?"text-purple-400":"text-blue-400"})}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-white",children:r.storeName}),s.jsx("p",{className:"text-sm text-white/40",children:u?"Pickup location":"Store"})]})]}),s.jsx("div",{className:"flex gap-2",children:r.storePhone&&s.jsx("a",{href:`tel:${r.storePhone}`,className:"w-10 h-10 rounded-full bg-emerald-500/20 flex items-center justify-center",children:s.jsx(ft,{className:"text-emerald-400 text-sm"})})})]})]}),u?s.jsxs("div",{className:"mx-4 mt-4 bg-[#111827] rounded-2xl border border-white/[0.06] p-4",children:[s.jsx("h3",{className:"font-semibold text-white mb-3",children:"Pickup Details"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center gap-3 p-3 bg-purple-500/5 rounded-xl",children:[s.jsx(Ot,{className:"text-purple-400"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-white/40",children:"Date"}),s.jsx("p",{className:"text-white font-medium",children:r.pickupDateLabel||"Today"})]})]}),s.jsxs("div",{className:"flex items-center gap-3 p-3 bg-purple-500/5 rounded-xl",children:[s.jsx(we,{className:"text-purple-400"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-white/40",children:"Time Slot"}),s.jsx("p",{className:"text-white font-medium",children:r.pickupSlot?.time||"During store hours"})]})]}),r.pickupInstructions&&s.jsxs("div",{className:"p-3 bg-white/[0.03] rounded-xl",children:[s.jsx("p",{className:"text-xs text-white/40 mb-1",children:"Store Instructions"}),s.jsx("p",{className:"text-white/80 text-sm",children:r.pickupInstructions})]})]})]}):r.deliveryAddress&&s.jsxs("div",{className:"mx-4 mt-4 bg-[#111827] rounded-2xl border border-white/[0.06] p-4",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[s.jsx("h3",{className:"font-semibold text-white",children:r.isScheduledDelivery?"Scheduled Delivery":"Delivery Address"}),r.isScheduledDelivery&&s.jsx("span",{className:"px-2 py-0.5 bg-amber-500/20 text-amber-400 text-xs font-medium rounded-full",children:"Scheduled"})]}),(r.deliveryDateLabel||r.deliveryDate||r.deliverySlot&&r.deliverySlot.includes(" - "))&&s.jsx("div",{className:"mb-3 p-3 bg-amber-500/5 rounded-xl border border-amber-500/10",children:s.jsxs("div",{className:"flex gap-4",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ot,{className:"text-amber-400"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-white/40",children:"Delivery Date"}),s.jsx("p",{className:"text-white font-medium",children:r.deliveryDateLabel||Kc(r.deliveryDate)||"Scheduled"})]})]}),r.deliverySlot&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(we,{className:"text-amber-400"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-white/40",children:"Time Slot"}),s.jsx("p",{className:"text-white font-medium",children:r.deliverySlot})]})]})]})}),s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-xl bg-cyan-500/10 flex items-center justify-center",children:s.jsx(me,{className:"text-cyan-400"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"font-medium text-white",children:r.deliveryAddress?.label}),s.jsx("p",{className:"text-sm text-white/60 mt-0.5",children:r.deliveryAddress?.address}),r.deliveryAddress?.city&&s.jsxs("p",{className:"text-sm text-white/40",children:[r.deliveryAddress?.city," - ",r.deliveryAddress?.pincode]})]})]}),r.deliverySlot&&!r.deliverySlot.includes(" - ")&&!r.deliveryDateLabel&&s.jsxs("div",{className:"mt-3 pt-3 border-t border-white/[0.06] flex items-center gap-2",children:[s.jsx(we,{className:"text-white/40 text-sm"}),s.jsxs("span",{className:"text-sm text-white/60",children:["Delivery: ",r.deliverySlot==="asap"?"ASAP (45-60 min)":r.deliverySlot==="2hr"?"Within 2 Hours":r.deliverySlot]})]})]}),s.jsxs("div",{className:"mx-4 mt-4 bg-[#111827] rounded-2xl border border-white/[0.06] p-4",children:[s.jsxs("h3",{className:"font-semibold text-white mb-3",children:["Order Items (",r.items?.length||0,")"]}),s.jsx("div",{className:"space-y-3",children:r.items?.map((x,y)=>s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-12 h-12 rounded-xl bg-white/[0.04] flex items-center justify-center",children:x.image?s.jsx("img",{src:x.image,alt:x.name,className:"w-10 h-10 object-contain"}):s.jsx(Ds,{className:"text-white/20"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"text-sm font-medium text-white truncate",children:x.name}),s.jsxs("p",{className:"text-xs text-white/40",children:["Qty: ",x.quantity,"  ",x.price]})]}),s.jsxs("p",{className:"font-medium text-white",children:["",x.total||x.price*x.quantity]})]},y))}),s.jsxs("div",{className:"mt-4 pt-4 border-t border-white/[0.06] space-y-2 text-sm",children:[s.jsxs("div",{className:"flex justify-between text-white/50",children:[s.jsx("span",{children:"Subtotal"}),s.jsxs("span",{children:["",r.subtotal||r.total]})]}),!u&&r.deliveryFee>0&&s.jsxs("div",{className:"flex justify-between text-white/50",children:[s.jsx("span",{children:"Delivery Fee"}),s.jsxs("span",{children:["",r.deliveryFee]})]}),r.platformFee>0&&s.jsxs("div",{className:"flex justify-between text-white/50",children:[s.jsx("span",{children:"Platform Fee"}),s.jsxs("span",{children:["",r.platformFee]})]}),s.jsxs("div",{className:"flex justify-between font-semibold text-white pt-2 border-t border-white/[0.06]",children:[s.jsx("span",{children:"Total"}),s.jsxs("span",{className:"text-emerald-400",children:["",r.total]})]})]})]}),(()=>{const x=r.paymentMethod==="PAY_LATER"||r.paymentStatus==="pay_later",y=M=>{if(!M)return null;const b=M?.toDate?M.toDate():new Date(M),v=b-new Date,w=Math.ceil(v/(1e3*60*60*24));return w<0?{text:`Overdue by ${Math.abs(w)} days`,isOverdue:!0}:w===0?{text:"Due today",isOverdue:!1,isToday:!0}:w===1?{text:"Due tomorrow",isOverdue:!1}:{text:`Due ${b.toLocaleDateString("en-IN",{day:"numeric",month:"short"})}`,isOverdue:!1}},L=x&&r.paymentDueDate?y(r.paymentDueDate):null;return s.jsxs("div",{className:`mx-4 mt-4 rounded-2xl border p-4 ${x?L?.isOverdue?"bg-red-500/10 border-red-500/20":"bg-amber-500/10 border-amber-500/20":"bg-[#111827] border-white/[0.06]"}`,children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("h3",{className:"font-semibold text-white flex items-center gap-2",children:[x&&s.jsx(dt,{className:"text-amber-400"}),"Payment"]}),s.jsxs("span",{className:`px-2.5 py-1 rounded-lg text-xs font-medium flex items-center gap-1.5 ${r.paymentStatus==="paid"?"bg-green-500/20 text-green-400":x?L?.isOverdue?"bg-red-500/20 text-red-400":"bg-amber-500/20 text-amber-400":"bg-yellow-500/20 text-yellow-400"}`,children:[x&&s.jsx(dt,{className:"text-xs"}),r.paymentStatus==="paid"?"Paid":x?"Pay Later":"Pay on "+(u?"Pickup":"Delivery")]})]}),s.jsx("div",{className:"flex items-center justify-between text-sm",children:s.jsx("span",{className:"text-white/60",children:r.paymentMethod==="COD"?"Cash on Delivery":r.paymentMethod==="PAY_LATER"?"Credit / Pay Later":r.paymentMethod||"Cash"})}),x&&s.jsxs("div",{className:`mt-3 pt-3 border-t ${L?.isOverdue?"border-red-500/20":"border-amber-500/20"}`,children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("span",{className:"text-white/60 text-sm",children:"Amount Due"}),s.jsxs("span",{className:"text-white font-bold text-lg",children:["",r.amountDue||r.total]})]}),L&&s.jsxs("div",{className:`flex items-center gap-2 p-2.5 rounded-lg ${L.isOverdue?"bg-red-500/20":L.isToday?"bg-amber-500/20":"bg-white/5"}`,children:[L.isOverdue?s.jsx(ss,{className:"text-red-400"}):s.jsx(we,{className:"text-amber-400"}),s.jsx("span",{className:`text-sm font-medium ${L.isOverdue?"text-red-400":"text-amber-400"}`,children:L.text})]})]})]})})(),r.status==="delivered"&&!r.storeRating&&!d&&s.jsxs("div",{className:"mx-4 mt-4 p-4 bg-gradient-to-r from-yellow-500/10 to-amber-500/10 rounded-2xl border border-yellow-500/20",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[s.jsx("div",{className:"w-12 h-12 rounded-xl bg-yellow-500/20 flex items-center justify-center",children:s.jsx(ze,{className:"text-yellow-400 text-xl"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"font-semibold text-white",children:"Rate Your Experience"}),s.jsx("p",{className:"text-sm text-white/60",children:"Help us improve by rating your order"})]})]}),s.jsxs("button",{onClick:()=>p(!0),className:"w-full py-3 bg-yellow-500 text-white rounded-xl font-medium hover:bg-yellow-600 transition flex items-center justify-center gap-2",children:[s.jsx(ze,{}),"Rate Order"]})]}),(r.storeRating||r.deliveryPersonRating)&&s.jsxs("div",{className:"mx-4 mt-4 space-y-3",children:[r.storeRating&&s.jsxs("div",{className:"p-4 bg-[#111827] rounded-2xl border border-white/[0.06]",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[s.jsx(ve,{className:"text-blue-400"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"font-semibold text-white",children:r.storeName}),s.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[[1,2,3,4,5].map(x=>s.jsx(ze,{className:`text-sm ${x<=r.storeRating?"text-yellow-400 fill-yellow-400":"text-white/20"}`},x)),s.jsxs("span",{className:"text-xs text-white/50 ml-2",children:[r.storeRating,"/5"]})]})]})]}),r.storeReview&&s.jsx("p",{className:"text-sm text-white/70 mt-2",children:r.storeReview})]}),r.deliveryPersonRating&&s.jsxs("div",{className:"p-4 bg-[#111827] rounded-2xl border border-white/[0.06]",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[s.jsx(He,{className:"text-emerald-400"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"font-semibold text-white",children:r.deliveryPersonName||r.deliveryAgent?.name||"Delivery Person"}),s.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[[1,2,3,4,5].map(x=>s.jsx(ze,{className:`text-sm ${x<=r.deliveryPersonRating?"text-yellow-400 fill-yellow-400":"text-white/20"}`},x)),s.jsxs("span",{className:"text-xs text-white/50 ml-2",children:[r.deliveryPersonRating,"/5"]})]})]})]}),r.deliveryPersonReview&&s.jsx("p",{className:"text-sm text-white/70 mt-2",children:r.deliveryPersonReview})]})]}),s.jsx("div",{className:"h-28"}),s.jsx(Ie,{children:l&&r&&s.jsx(qc,{order:r,onClose:()=>c(!1)})}),s.jsx(Ie,{children:d&&r&&r.status==="delivered"&&s.jsx(Qc,{order:r,onClose:()=>p(!1),onSubmit:async x=>{(await $o(r.id,x)).success?(p(!1),n(L=>({...L,...x}))):alert("Failed to submit rating. Please try again.")}})})]})},Qc=({order:t,onClose:e,onSubmit:r})=>{const[n,i]=a.useState(0),[o,l]=a.useState(""),[c,d]=a.useState(0),[p,u]=a.useState(""),[h,f]=a.useState(!1),g=t.orderType==="delivery",m=async()=>{if(n===0){alert("Please rate the store");return}if(g&&c===0){alert("Please rate the delivery person");return}f(!0);try{await r({storeRating:n,storeReview:o.trim()||"",deliveryPersonRating:g?c:void 0,deliveryPersonReview:g&&p.trim()||"",deliveryPersonName:t.deliveryAgent?.name||t.deliveryPartner,deliveryPersonId:t.deliveryAgent?.id})}catch(x){console.error("Error submitting rating:",x),alert("Failed to submit rating. Please try again.")}finally{f(!1)}},N=({rating:x,onRatingChange:y,label:L})=>s.jsxs("div",{className:"space-y-2",children:[s.jsx("p",{className:"text-sm font-medium text-white/80",children:L}),s.jsxs("div",{className:"flex items-center gap-2",children:[[1,2,3,4,5].map(M=>s.jsx("button",{type:"button",onClick:()=>y(M),className:"transition-transform hover:scale-110 active:scale-95",children:s.jsx(ze,{className:`text-2xl ${M<=x?"text-yellow-400 fill-yellow-400":"text-white/20"}`})},M)),x>0&&s.jsxs("span",{className:"text-sm text-white/60 ml-2",children:[x,"/5"]})]})]});return s.jsx(_.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 px-4",onClick:e,children:s.jsxs(_.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-[#111827] rounded-2xl p-6 w-full max-w-md border border-white/10",onClick:x=>x.stopPropagation(),children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h2",{className:"text-xl font-bold text-white",children:"Rate Your Experience"}),s.jsx("button",{onClick:e,className:"w-8 h-8 rounded-full bg-white/10 flex items-center justify-center hover:bg-white/20 transition",children:s.jsx(Oe,{className:"text-white/60 text-sm"})})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"p-4 bg-white/5 rounded-xl border border-white/10",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[s.jsx("div",{className:"w-12 h-12 rounded-xl bg-blue-500/20 flex items-center justify-center",children:s.jsx(ve,{className:"text-blue-400"})}),s.jsxs("div",{children:[s.jsx("p",{className:"font-semibold text-white",children:t.storeName}),s.jsx("p",{className:"text-xs text-white/50",children:"Store"})]})]}),s.jsx(N,{rating:n,onRatingChange:i,label:"How was your experience with the store?"}),s.jsx("textarea",{value:o,onChange:x=>l(x.target.value),placeholder:"Write a review (optional)...",className:"mt-3 w-full px-3 py-2 bg-white/5 border border-white/10 rounded-lg text-white placeholder-white/40 text-sm resize-none",rows:"3"})]}),g&&(t.deliveryAgent||t.deliveryPartner)&&s.jsxs("div",{className:"p-4 bg-white/5 rounded-xl border border-white/10",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[s.jsx("div",{className:"w-12 h-12 rounded-xl bg-emerald-500/20 flex items-center justify-center",children:s.jsx(He,{className:"text-emerald-400"})}),s.jsxs("div",{children:[s.jsx("p",{className:"font-semibold text-white",children:t.deliveryAgent?.name||t.deliveryPartner||"Delivery Person"}),s.jsx("p",{className:"text-xs text-white/50",children:"Delivery Partner"})]})]}),s.jsx(N,{rating:c,onRatingChange:d,label:"How was the delivery experience?"}),s.jsx("textarea",{value:p,onChange:x=>u(x.target.value),placeholder:"Write a review (optional)...",className:"mt-3 w-full px-3 py-2 bg-white/5 border border-white/10 rounded-lg text-white placeholder-white/40 text-sm resize-none",rows:"3"})]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{onClick:e,disabled:h,className:"flex-1 px-4 py-3 bg-white/10 text-white/70 rounded-xl font-medium hover:bg-white/20 transition disabled:opacity-50",children:"Skip"}),s.jsx("button",{onClick:m,disabled:h||n===0||g&&c===0,className:"flex-1 px-4 py-3 bg-emerald-500 text-white rounded-xl font-medium hover:bg-emerald-600 transition disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:h?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Submitting..."]}):s.jsxs(s.Fragment,{children:[s.jsx(We,{}),"Submit Rating"]})})]})]})]})})},Xc=t=>{if(!t)return null;try{const e=new Date(t),r=new Date,n=new Date(r);return n.setDate(n.getDate()+1),e.toDateString()===r.toDateString()?"Today":e.toDateString()===n.toDateString()?"Tomorrow":e.toLocaleDateString("en-IN",{weekday:"short",day:"numeric",month:"short"})}catch{return null}},ed=t=>{if(!t)return null;const n=(t?.toDate?t.toDate():new Date(t))-new Date,i=Math.ceil(n/(1e3*60*60*24));return i<0?{text:`Overdue by ${Math.abs(i)} days`,isOverdue:!0}:i===0?{text:"Due today",isOverdue:!1,isToday:!0}:i===1?{text:"Due tomorrow",isOverdue:!1}:{text:`Due in ${i} days`,isOverdue:!1}},td=({order:t,onClick:e})=>{const r=pi(t.status,t.orderType),n=t.items?.reduce((p,u)=>p+u.quantity,0)||0,i=new Date(t.createdAt).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"}),o=t.orderType==="pickup",l=!["delivered","cancelled"].includes(t.status),c=t.paymentMethod==="PAY_LATER"||t.paymentStatus==="pay_later",d=c&&t.paymentDueDate?ed(t.paymentDueDate):null;return s.jsxs(_.button,{whileTap:{scale:.98},onClick:()=>e(t),className:`w-full bg-[#111827] rounded-2xl border overflow-hidden text-left transition-all ${c&&d?.isOverdue?"border-red-500/30 shadow-lg shadow-red-500/5":l?"border-emerald-500/30 shadow-lg shadow-emerald-500/5":"border-white/[0.06]"}`,children:[s.jsxs("div",{className:`px-4 py-2 flex items-center justify-between ${o?"bg-purple-500/10 border-b border-purple-500/20":"bg-cyan-500/10 border-b border-cyan-500/20"}`,children:[s.jsxs("div",{className:"flex items-center gap-2",children:[o?s.jsxs(s.Fragment,{children:[s.jsx(ve,{className:"text-purple-400 text-xs"}),s.jsx("span",{className:"text-purple-300 text-xs font-medium",children:"Store Pickup"})]}):s.jsxs(s.Fragment,{children:[s.jsx(ut,{className:"text-cyan-400 text-xs"}),s.jsx("span",{className:"text-cyan-300 text-xs font-medium",children:"Delivery"})]}),c&&s.jsxs("span",{className:`px-2 py-0.5 rounded-full text-[10px] font-medium flex items-center gap-1 ml-1 ${t.paymentStatus==="paid"?"bg-green-500/20 text-green-300":"bg-amber-500/20 text-amber-300"}`,children:[t.paymentStatus==="paid"?s.jsx(ct,{className:"text-[8px]"}):s.jsx(dt,{className:"text-[8px]"}),t.paymentStatus==="paid"?"Paid":"Credit"]})]}),s.jsxs("div",{className:"flex items-center gap-1.5",children:[s.jsx("span",{className:`w-2 h-2 rounded-full ${t.status==="delivered"?"bg-green-500":t.status==="cancelled"?"bg-red-500":"bg-emerald-500 animate-pulse"}`}),s.jsx("span",{className:`text-xs font-medium ${r.color}`,children:r.label})]})]}),s.jsxs("div",{className:"p-4",children:[s.jsxs("div",{className:"flex items-start justify-between mb-3",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-12 h-12 rounded-xl bg-white/[0.06] flex items-center justify-center",children:s.jsx(ve,{className:"text-white/40"})}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-white",children:t.storeName}),s.jsxs("p",{className:"text-xs text-white/40",children:[i,"  #",t.orderNumber?.slice(-8)]})]})]}),s.jsx(Ge,{className:"text-white/30 mt-1"})]}),o?s.jsxs("div",{className:"flex items-center gap-3 mb-3 p-2 bg-purple-500/5 rounded-lg",children:[s.jsx(Ot,{className:"text-purple-400 text-sm"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"text-xs text-white/60",children:"Pickup scheduled"}),s.jsxs("p",{className:"text-sm text-white font-medium",children:[t.pickupDateLabel||"Today","  ",t.pickupSlot?.time||"Anytime"]})]})]}):t.deliveryAddress?s.jsxs("div",{className:"space-y-2 mb-3",children:[(t.deliveryDateLabel||t.deliveryDate||t.deliverySlot&&t.deliverySlot.includes(" - "))&&s.jsxs("div",{className:"flex items-center gap-3 p-2 bg-amber-500/5 rounded-lg border border-amber-500/10",children:[s.jsx(Ot,{className:"text-amber-400 text-sm"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"text-xs text-white/60",children:"Scheduled Delivery"}),s.jsxs("p",{className:"text-sm text-white font-medium",children:[t.deliveryDateLabel||Xc(t.deliveryDate)||"Scheduled","  ",t.deliverySlot||"Anytime"]})]})]}),s.jsxs("div",{className:"flex items-center gap-3 p-2 bg-cyan-500/5 rounded-lg",children:[s.jsx(me,{className:"text-cyan-400 text-sm"}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"text-xs text-white/60",children:"Delivering to"}),s.jsx("p",{className:"text-sm text-white font-medium truncate",children:t.deliveryAddress?.label||t.deliveryAddress?.address})]})]})]}):null,c&&(t.paymentStatus==="paid"?s.jsxs("div",{className:"flex items-center gap-3 mb-3 p-2.5 rounded-lg bg-green-500/10 border border-green-500/20",children:[s.jsx(ct,{className:"text-green-400 text-sm"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"text-xs text-green-400 font-medium",children:"Payment Received"}),s.jsxs("p",{className:"text-sm text-white font-medium",children:["",t.amountPaid||t.total," paid"]})]})]}):d?s.jsxs("div",{className:`flex items-center gap-3 mb-3 p-2.5 rounded-lg ${d.isOverdue?"bg-red-500/10 border border-red-500/20":d.isToday?"bg-amber-500/10 border border-amber-500/20":"bg-amber-500/5"}`,children:[d.isOverdue?s.jsx(ss,{className:"text-red-400 text-sm"}):s.jsx(dt,{className:"text-amber-400 text-sm"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:`text-xs ${d.isOverdue?"text-red-400":"text-amber-400"} font-medium`,children:d.text}),s.jsxs("p",{className:"text-sm text-white font-medium",children:["",t.amountDue||t.total," payment pending"]})]})]}):s.jsxs("div",{className:"flex items-center gap-3 mb-3 p-2.5 rounded-lg bg-amber-500/5",children:[s.jsx(dt,{className:"text-amber-400 text-sm"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"text-xs text-amber-400 font-medium",children:"Payment Pending"}),s.jsxs("p",{className:"text-sm text-white font-medium",children:["",t.amountDue||t.total," due"]})]})]})),s.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[s.jsxs("div",{className:"flex -space-x-2",children:[(t.items||[]).slice(0,3).map((p,u)=>s.jsx("div",{className:"w-8 h-8 rounded-lg bg-white/[0.08] border-2 border-[#111827] flex items-center justify-center",children:s.jsx(Ds,{className:"text-white/30 text-xs"})},u)),(t.items||[]).length>3&&s.jsx("div",{className:"w-8 h-8 rounded-lg bg-white/[0.08] border-2 border-[#111827] flex items-center justify-center",children:s.jsxs("span",{className:"text-white/50 text-xs",children:["+",t.items.length-3]})})]}),s.jsxs("span",{className:"text-sm text-white/50",children:[n," items"]})]}),s.jsxs("div",{className:"flex items-center justify-between pt-3 border-t border-white/[0.06]",children:[s.jsx("div",{className:"flex items-center gap-2",children:s.jsxs("span",{className:`px-2.5 py-1 rounded-lg text-xs font-medium flex items-center gap-1.5 ${r.bgColor} ${r.color}`,children:[s.jsx("span",{children:r.icon}),r.label]})}),s.jsxs("p",{className:"font-bold text-white text-lg",children:["",t.total]})]})]}),t.status==="delivered"&&s.jsx("div",{className:"px-4 pb-4",children:s.jsxs("button",{onClick:p=>{p.stopPropagation()},className:"w-full py-3 bg-emerald-500/10 border border-emerald-500/20 text-emerald-400 rounded-xl text-sm font-medium flex items-center justify-center gap-2 hover:bg-emerald-500/20 transition-colors",children:[s.jsx(ao,{className:"text-xs"}),"Reorder"]})})]})},sd=({onBack:t,onOrderClick:e})=>{const{customer:r}=xt(),[n,i]=a.useState([]),[o,l]=a.useState(!0),[c,d]=a.useState("all");a.useEffect(()=>{(async()=>{if(r?.uid){l(!0);try{const m=await zo(r.uid,50);i(m)}catch(m){console.error("Error fetching orders:",m)}finally{l(!1)}}})()},[r]);const p=n.filter(g=>c==="active"?!["delivered","cancelled"].includes(g.status):c==="completed"?g.status==="delivered":!0),u=p.reduce((g,m)=>{const N=new Date(m.createdAt).toLocaleDateString("en-IN",{day:"numeric",month:"long",year:"numeric"});return g[N]||(g[N]=[]),g[N].push(m),g},{}),h=n.filter(g=>!["delivered","cancelled"].includes(g.status)).length,f=n.filter(g=>g.status==="delivered").length;return s.jsxs("div",{className:"min-h-screen bg-[#0a0f1a]",children:[s.jsxs("div",{className:"bg-[#0a0f1a]/90 backdrop-blur-xl sticky top-0 z-10 border-b border-white/[0.06]",children:[s.jsxs("div",{className:"px-4 py-3 flex items-center gap-3",style:{paddingTop:"calc(env(safe-area-inset-top) + 12px)"},children:[s.jsx("button",{onClick:t,className:"w-10 h-10 rounded-full bg-white/[0.06] border border-white/[0.08] flex items-center justify-center",children:s.jsx(Oe,{className:"text-white/60"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h1",{className:"font-bold text-white text-lg",children:"My Orders"}),n.length>0&&s.jsxs("p",{className:"text-xs text-white/40",children:[h," active  ",f," completed"]})]})]}),s.jsx("div",{className:"px-4 pb-3 flex gap-2",children:[{id:"all",label:"All",count:n.length},{id:"active",label:"Active",count:h},{id:"completed",label:"Completed",count:f}].map(g=>s.jsxs("button",{onClick:()=>d(g.id),className:`px-4 py-2 rounded-xl text-sm font-medium transition-all flex items-center gap-2 ${c===g.id?"bg-emerald-500 text-white shadow-lg shadow-emerald-500/20":"bg-white/[0.06] text-white/50 border border-white/[0.08] hover:bg-white/[0.08]"}`,children:[g.label,g.count>0&&s.jsx("span",{className:`text-xs px-1.5 py-0.5 rounded-md ${c===g.id?"bg-white/20":"bg-white/[0.08]"}`,children:g.count})]},g.id))})]}),s.jsx("div",{className:"px-4 py-4 pb-28",children:o?s.jsxs("div",{className:"flex flex-col items-center justify-center py-16",children:[s.jsx("div",{className:"w-12 h-12 rounded-full border-4 border-emerald-500 border-t-transparent animate-spin mb-4"}),s.jsx("p",{className:"text-white/40 text-sm",children:"Loading orders..."})]}):p.length>0?s.jsx("div",{className:"space-y-6",children:Object.entries(u).map(([g,m])=>s.jsxs("div",{children:[s.jsxs("h3",{className:"text-sm font-medium text-white/40 mb-3 flex items-center gap-2",children:[s.jsx(Ot,{className:"text-xs"}),g]}),s.jsx("div",{className:"space-y-3",children:m.map(N=>s.jsx(td,{order:N,onClick:()=>e(N.id)},N.id))})]},g))}):s.jsxs("div",{className:"flex flex-col items-center justify-center py-16",children:[s.jsx("div",{className:"w-24 h-24 rounded-full bg-white/[0.04] border border-white/[0.08] flex items-center justify-center mb-4",children:s.jsx(ns,{className:"text-white/20 text-4xl"})}),s.jsx("h3",{className:"text-lg font-semibold text-white mb-2",children:"No orders yet"}),s.jsx("p",{className:"text-sm text-white/40 text-center max-w-[250px]",children:c==="active"?"You have no active orders right now":c==="completed"?"You have no completed orders yet":"Start ordering from nearby stores and your orders will appear here"}),s.jsx("button",{onClick:t,className:"mt-6 px-6 py-3 bg-emerald-500 text-white rounded-xl font-medium",children:"Browse Stores"})]})})]})},rd=()=>s.jsx("img",{src:"/assets/flyp_logo.png",alt:"FLYP",className:"w-12 h-12 object-contain"}),Ye=({icon:t,label:e,value:r,onClick:n,danger:i})=>s.jsxs("button",{onClick:n,className:`w-full flex items-center gap-4 px-4 py-3 ${i?"text-red-400":"text-white"}`,children:[s.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center ${i?"bg-red-500/10 border border-red-500/20":"bg-slate-700 border border-slate-600"}`,children:s.jsx(t,{className:i?"text-red-400":"text-slate-400"})}),s.jsxs("div",{className:"flex-1 text-left",children:[s.jsx("p",{className:"font-medium",children:e}),r&&s.jsx("p",{className:"text-sm text-white/40",children:r})]}),s.jsx(Ge,{className:"text-white/30"})]}),nd=({address:t,onEdit:e,onDelete:r,onSetDefault:n})=>s.jsxs("div",{className:"bg-[#101B4A]/50 backdrop-blur-xl rounded-xl border border-white/10/50 p-4",children:[s.jsx("div",{className:"flex items-start justify-between",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:"w-8 h-8 rounded-lg bg-emerald-500/10 border border-emerald-500/20 flex items-center justify-center flex-shrink-0",children:s.jsx(me,{className:"text-[#05E06C]400 text-sm"})}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("p",{className:"font-medium text-white",children:t.label}),t.isDefault&&s.jsx("span",{className:"px-2 py-0.5 bg-emerald-500/10 border border-emerald-500/20 text-[#05E06C]400 text-xs rounded-full",children:"Default"})]}),s.jsx("p",{className:"text-sm text-slate-400 mt-1",children:t.address})]})]})}),s.jsxs("div",{className:"flex gap-2 mt-3 pt-3 border-t border-white/10",children:[!t.isDefault&&s.jsx("button",{onClick:()=>n(t.id),className:"flex-1 py-2 text-sm text-[#05E06C]400 font-medium",children:"Set as Default"}),s.jsx("button",{onClick:()=>e(t),className:"px-4 py-2 text-sm text-slate-400",children:s.jsx(ai,{})}),s.jsx("button",{onClick:()=>r(t.id),className:"px-4 py-2 text-sm text-red-400",children:s.jsx(li,{})})]})]}),id=({onBack:t})=>{const{customer:e,customerData:r,updateProfile:n,logout:i,setDefaultAddress:o,addAddress:l}=xt(),[c,d]=a.useState(!1),[p,u]=a.useState(r?.name||""),[h,f]=a.useState(!1),[g,m]=a.useState(!1),[N,x]=a.useState({label:"",address:""}),y=async()=>{p.trim()&&p!==r?.name&&await n({name:p.trim()}),d(!1)},L=async()=>{N.label&&N.address&&(await l(N),x({label:"",address:""}),m(!1))},M=async()=>{window.confirm("Are you sure you want to logout?")&&await i()};return s.jsxs("div",{className:"min-h-screen bg-[#060D2D]",children:[s.jsxs("div",{className:"relative px-4 pt-6 pb-12 overflow-hidden",style:{paddingTop:"calc(env(safe-area-inset-top) + 24px)"},children:[s.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-slate-800 via-slate-900 to-slate-900"}),s.jsx("div",{className:"absolute -top-20 -right-20 w-60 h-60 rounded-full bg-emerald-500/10 blur-3xl"}),s.jsx("div",{className:"absolute -bottom-20 -left-20 w-60 h-60 rounded-full bg-teal-500/10 blur-3xl"}),s.jsxs("div",{className:"relative flex items-center gap-4",children:[s.jsx("div",{className:"w-20 h-20 rounded-full bg-[#101B4A] border-2 border-emerald-500/30 flex items-center justify-center",children:s.jsx(ci,{className:"text-[#05E06C]400 text-3xl"})}),s.jsxs("div",{className:"flex-1",children:[c?s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"text",value:p,onChange:b=>u(b.target.value),className:"flex-1 bg-[#101B4A] border border-white/10 rounded-lg px-3 py-2 text-white placeholder-slate-500 outline-none focus:ring-2 focus:ring-emerald-500",autoFocus:!0}),s.jsx("button",{onClick:y,className:"px-3 py-2 bg-emerald-500 rounded-lg text-white font-medium",children:"Save"})]}):s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("h2",{className:"text-xl font-bold text-white",children:r?.name||"Customer"}),s.jsx("button",{onClick:()=>d(!0),children:s.jsx(ai,{className:"text-white/40"})})]}),s.jsx("p",{className:"text-slate-400",children:e?.phoneNumber})]})]})]}),s.jsx("div",{className:"px-4 -mt-6",children:s.jsxs("div",{className:"bg-[#101B4A]/50 backdrop-blur-xl rounded-xl border border-white/10/50 p-4 flex",children:[s.jsxs("div",{className:"flex-1 text-center border-r border-white/10",children:[s.jsx("p",{className:"text-2xl font-bold text-white",children:r?.totalOrders||0}),s.jsx("p",{className:"text-xs text-white/40",children:"Total Orders"})]}),s.jsxs("div",{className:"flex-1 text-center",children:[s.jsx("p",{className:"text-2xl font-bold text-white",children:r?.addresses?.length||0}),s.jsx("p",{className:"text-xs text-white/40",children:"Saved Addresses"})]})]})}),s.jsxs("div",{className:"mt-6 px-4 space-y-4",children:[s.jsxs("div",{className:"bg-[#101B4A]/50 backdrop-blur-xl rounded-xl border border-white/10/50 overflow-hidden",children:[s.jsx("p",{className:"px-4 py-3 text-sm font-medium text-white/40 border-b border-white/10",children:"Account"}),s.jsx(Ye,{icon:ft,label:"Phone Number",value:e?.phoneNumber}),s.jsx(Ye,{icon:so,label:"Email",value:r?.email||"Not added"}),s.jsx(Ye,{icon:me,label:"Saved Addresses",value:`${r?.addresses?.length||0} addresses`,onClick:()=>f(!h)})]}),h&&s.jsxs("div",{className:"space-y-3",children:[r?.addresses?.map(b=>s.jsx(nd,{address:b,onSetDefault:o,onEdit:()=>{},onDelete:()=>{}},b.id)),g?s.jsxs("div",{className:"bg-[#101B4A]/50 backdrop-blur-xl rounded-xl border border-white/10/50 p-4 space-y-3",children:[s.jsx("input",{type:"text",placeholder:"Label (Home, Office, etc.)",value:N.label,onChange:b=>x({...N,label:b.target.value}),className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-sm text-white placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-emerald-500"}),s.jsx("textarea",{placeholder:"Full address",value:N.address,onChange:b=>x({...N,address:b.target.value}),rows:2,className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-sm text-white placeholder-slate-500 resize-none focus:outline-none focus:ring-2 focus:ring-emerald-500"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:()=>m(!1),className:"flex-1 py-2 border border-slate-600 rounded-lg text-slate-400",children:"Cancel"}),s.jsx("button",{onClick:L,className:"flex-1 py-2 bg-emerald-500 text-white rounded-lg",children:"Save"})]})]}):s.jsxs("button",{onClick:()=>m(!0),className:"w-full p-4 rounded-xl border-2 border-dashed border-emerald-500/30 bg-emerald-500/5 flex items-center justify-center gap-2 text-[#05E06C]400",children:[s.jsx(vt,{}),s.jsx("span",{children:"Add New Address"})]})]}),s.jsxs("div",{className:"bg-[#101B4A]/50 backdrop-blur-xl rounded-xl border border-white/10/50 overflow-hidden",children:[s.jsx("p",{className:"px-4 py-3 text-sm font-medium text-white/40 border-b border-white/10",children:"Support"}),s.jsx(Ye,{icon:io,label:"Help & Support"}),s.jsx(Ye,{icon:uo,label:"Privacy Policy"}),s.jsx(Ye,{icon:Xe,label:"About FLYP"})]}),s.jsx("div",{className:"bg-[#101B4A]/50 backdrop-blur-xl rounded-xl border border-white/10/50 overflow-hidden",children:s.jsx(Ye,{icon:ho,label:"Logout",onClick:M,danger:!0})}),s.jsxs("div",{className:"flex flex-col items-center py-6",children:[s.jsx(rd,{}),s.jsx("p",{className:"text-xs text-white/40 mt-3",children:"FLYP Customer App v1.0.0"})]})]}),s.jsx("div",{className:"h-24"})]})},ad=({orderNumber:t,onTrack:e,onHome:r})=>s.jsx(_.div,{initial:{opacity:0},animate:{opacity:1},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 px-6",children:s.jsxs(_.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},className:"bg-[#101B4A] rounded-2xl p-6 w-full max-w-sm text-center border border-white/10",children:[s.jsx("div",{className:"w-20 h-20 rounded-full bg-[#05E06C]/10 border border-[#05E06C]/20 flex items-center justify-center mx-auto mb-4",children:s.jsx("span",{className:"text-4xl",children:""})}),s.jsx("h2",{className:"text-xl font-bold text-white mb-2",children:"Order Placed!"}),s.jsx("p",{className:"text-white/60 mb-2",children:"Your order has been placed successfully"}),s.jsxs("p",{className:"text-sm text-[#05E06C] font-medium mb-6",children:["Order #",t]}),s.jsxs("div",{className:"space-y-3",children:[s.jsx("button",{onClick:e,className:"w-full py-3 bg-[#05E06C] text-white rounded-xl font-semibold shadow-lg shadow-[#05E06C]/20",children:"Track Order"}),s.jsx("button",{onClick:r,className:"w-full py-3 border border-white/10 text-white/70 rounded-xl font-semibold hover:bg-white/5 transition",children:"Back to Home"})]})]})}),od=()=>{const{isLoggedIn:t,loading:e}=xt(),[r,n]=a.useState("home"),[i,o]=a.useState("home"),[l,c]=a.useState([]),[d,p]=a.useState(null),[u,h]=a.useState(null),[f,g]=a.useState(null),[m,N]=a.useState(!1),[x,y]=a.useState(""),[L,M]=a.useState("");a.useEffect(()=>{t&&(()=>{if(!navigator.geolocation){console.log("Geolocation not supported"),p({lat:19.076,lng:72.8777,label:"Mumbai"});return}navigator.geolocation.getCurrentPosition(O=>{p({lat:O.coords.latitude,lng:O.coords.longitude,label:"Current Location"})},O=>{console.error("Location error:",O),p({lat:19.076,lng:72.8777,label:"Mumbai"})},{enableHighAccuracy:!0,timeout:1e4,maximumAge:3e5})})()},[t]);const b=(D,O={})=>{c(A=>[...A,i]),o(D),O.store&&h(O.store),O.orderId&&g(O.orderId)},j=()=>{try{if(i==="tracking"){if(g(null),l.length>0){const D=l[l.length-1];c(O=>O.slice(0,-1)),o(D),D==="orders"&&n("orders")}else o("orders"),n("orders");return}if(l.length>0){const D=l[l.length-1];c(O=>O.slice(0,-1)),o(D)}else o("home"),n("home")}catch(D){console.error("Navigation error:",D),window.history.length>1?window.history.back():(o("home"),n("home"),c([]))}},v=D=>{switch(n(D),c([]),D){case"home":o("home");break;case"search":o("search");break;case"cart":o("cart");break;case"orders":o("orders");break;case"profile":o("profile");break;default:o("home")}},w=D=>{b("store",{store:D})},E=(D,O)=>{M(D),y(O),N(!0)};if(e)return s.jsx("div",{className:"min-h-screen bg-[#060D2D] flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx(_.img,{src:"/assets/flyp_logo.png",alt:"FLYP",className:"w-24 h-24 mx-auto mb-6",animate:{scale:[1,1.1,1],opacity:[.7,1,.7]},transition:{duration:2,repeat:1/0}}),s.jsx("div",{className:"w-10 h-10 border-3 border-[#05E06C]/20 border-t-[#05E06C] rounded-full animate-spin mx-auto"})]})});if(!t)return s.jsx(po,{onLoginSuccess:()=>{}});const S=["home","search","cart","orders","profile"].includes(i);return s.jsxs("div",{className:"min-h-screen bg-[#060D2D]",children:[s.jsxs("main",{className:"bg-[#060D2D] min-h-screen",style:{paddingBottom:S?"calc(80px + env(safe-area-inset-bottom))":"0"},children:[i==="home"&&s.jsx("div",{className:"bg-[#060D2D] min-h-screen",children:s.jsx(Co,{location:d,onNavigate:v,onStoreSelect:w,onCategorySelect:D=>b("search")})}),i==="store"&&u&&s.jsx("div",{className:"bg-[#060D2D] min-h-screen",children:s.jsx(Oo,{storeId:u.id,onBack:j,onCartClick:()=>b("cart")})}),i==="search"&&s.jsx("div",{className:"bg-[#060D2D] min-h-screen",children:s.jsx(To,{location:d,onBack:()=>v("home"),onStoreSelect:D=>{b("store",{store:{id:D}})}})}),i==="cart"&&s.jsx("div",{className:"bg-[#060D2D] min-h-screen",children:s.jsx(Fo,{onBack:j,onCheckout:()=>b("checkout"),onStoreClick:D=>b("store",{store:{id:D}})})}),i==="checkout"&&s.jsx("div",{className:"bg-[#060D2D] min-h-screen",children:s.jsx(Zc,{onBack:j,onOrderPlaced:E})}),i==="tracking"&&f&&s.jsx("div",{className:"bg-[#060D2D] min-h-screen",children:s.jsx(Jc,{orderId:f,onBack:j})}),i==="orders"&&s.jsx("div",{className:"bg-[#060D2D] min-h-screen",children:s.jsx(sd,{onBack:()=>v("home"),onOrderClick:D=>b("tracking",{orderId:D})})}),i==="profile"&&s.jsx("div",{className:"bg-[#060D2D] min-h-screen",children:s.jsx(id,{onBack:()=>v("home")})})]}),S&&s.jsx(Ya,{activeTab:r,onTabChange:v}),m&&s.jsx(ad,{orderNumber:x,onTrack:()=>{N(!1),b("tracking",{orderId:L})},onHome:()=>{N(!1),v("home")}})]})},ld=()=>s.jsx(Ta,{children:s.jsx(zi,{children:s.jsx(od,{})})}),cd=()=>{const t=document.getElementById("splash");t&&(document.body.classList.add("app-loaded"),setTimeout(()=>{t.remove()},300))},dd=Bi.createRoot(document.getElementById("root"));dd.render(s.jsx($e.StrictMode,{children:s.jsx(ld,{})}));setTimeout(cd,500);"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/sw.js").catch(()=>{})});export{is as I,Rs as N,ei as W};
