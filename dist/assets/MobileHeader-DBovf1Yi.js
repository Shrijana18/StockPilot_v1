import{j as e,l as B}from"./index-DRC3F7i0.js";import{u as C,d as H,r as P,R as M}from"./router-BPBaD_i0.js";import{a2 as j,an as R,e as N,C as Q,R as $,ao as v,T as F,r as k,F as y,al as z,ap as A,X as O,g as E,aq as W,h as Y,ai as q}from"./index-CprmGC-M.js";import{Haptics as p,ImpactStyle as f}from"./index-CjDO0J1E.js";import{A as L}from"./index-DSciU07p.js";import{m as i}from"./proxy-BgUy8BPw.js";import{f as U}from"./firebase-DWi1MSv1.js";const b=async(t="light")=>{try{t==="light"?await p.impact({style:f.Light}):t==="medium"?await p.impact({style:f.Medium}):await p.impact({style:f.Heavy})}catch{}},Z=({activeTab:t,onTabChange:s,userRole:r="distributor",unreadCount:d=0})=>{C(),H();const[l,c]=P.useState(!1),m=r==="distributor"?[{id:"home",icon:v,label:"Home"},{id:"inventory",icon:F,label:"Inventory"},{id:"whatsapp",icon:N,label:"WhatsApp",badge:d},{id:"retailerRequests",icon:k,label:"Retailers"},{id:"profile",icon:y,label:"Profile"}]:r==="retailer"?[{id:"home",icon:v,label:"Home"},{id:"marketplace",icon:k,label:"Marketplace"},{id:"inventory",icon:F,label:"Inventory"},{id:"billing",icon:j,label:"Billing"},{id:"employees",icon:z,label:"Employees"},{id:"profile",icon:y,label:"Profile"}]:[],h=async a=>{await b("light"),s?.(a.id)},g=async a=>{switch(await b("medium"),c(!1),a){case"newInvoice":s?.("manualBilling");break;case"scanQR":break;case"newOrder":s?.("whatsapp");break}};return e.jsxs(e.Fragment,{children:[e.jsx(L,{children:l&&e.jsxs(e.Fragment,{children:[e.jsx(i.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>c(!1),className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-40"}),e.jsx(i.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},exit:{opacity:0,y:50},className:"fixed bottom-28 left-1/2 -translate-x-1/2 z-50 flex flex-col items-center gap-3",children:[{id:"newInvoice",icon:j,label:"New Invoice",color:"from-blue-500 to-blue-600"},{id:"scanQR",icon:R,label:"Scan QR",color:"from-purple-500 to-purple-600"},{id:"newOrder",icon:N,label:"WhatsApp Order",color:"from-green-500 to-green-600"}].map((a,o)=>e.jsxs(i.button,{initial:{opacity:0,y:20,scale:.8},animate:{opacity:1,y:0,scale:1,transition:{delay:o*.05}},exit:{opacity:0,y:20,scale:.8},onClick:()=>g(a.id),className:`flex items-center gap-3 px-5 py-3 rounded-full bg-gradient-to-r ${a.color} text-white shadow-lg shadow-black/30`,children:[e.jsx(a.icon,{className:"text-lg"}),e.jsx("span",{className:"font-medium",children:a.label})]},a.id))})]})}),e.jsxs("nav",{className:"fixed bottom-0 left-0 right-0 z-30 border-t border-white/5 relative",style:{background:"#0B0F14",paddingBottom:"max(6px, calc(env(safe-area-inset-bottom) * 0.6))"},children:[e.jsx("div",{className:"flex items-center justify-around px-1 py-1.5 relative",children:m.map((a,o)=>{const n=t===a.id;return r==="distributor"&&o===Math.floor(m.length/2)?e.jsxs(M.Fragment,{children:[e.jsx(I,{item:a,isActive:n,onPress:()=>h(a)}),e.jsxs(i.button,{whileTap:{scale:.9},onClick:async()=>{await b("medium"),c(!l)},className:`relative -mt-6 w-14 h-14 rounded-full flex items-center justify-center shadow-lg shadow-emerald-500/30 ${l?"bg-red-500":"bg-gradient-to-br from-emerald-400 to-cyan-500"}`,children:[e.jsx(i.div,{animate:{rotate:l?45:0},transition:{duration:.2},children:l?e.jsx(Q,{className:"text-white text-xl"}):e.jsx($,{className:"text-white text-xl"})}),!l&&e.jsx(i.div,{className:"absolute inset-0 rounded-full bg-emerald-400",animate:{scale:[1,1.2,1],opacity:[.5,0,.5]},transition:{duration:2,repeat:1/0}})]})]},a.id):e.jsx(I,{item:a,isActive:n,onPress:()=>h(a)},a.id)})}),e.jsx("div",{className:"absolute bottom-0 left-0 right-0 pointer-events-none",style:{height:"max(6px, calc(env(safe-area-inset-bottom) * 0.6))",background:"#0B0F14"},"aria-hidden":!0})]})]})},I=({item:t,isActive:s,onPress:r})=>{const d=t.icon;return e.jsxs(i.button,{whileTap:{scale:.9},onClick:r,className:"relative flex flex-col items-center justify-center min-w-0 flex-1 py-1",children:[s&&e.jsx(i.div,{layoutId:"activeTab",className:"absolute -top-0.5 w-9 h-1 rounded-full bg-gradient-to-r from-emerald-400 to-cyan-400",transition:{type:"spring",stiffness:500,damping:30}}),e.jsxs("div",{className:`relative ${s?"text-emerald-400":"text-gray-400"}`,children:[e.jsx(d,{className:`text-2xl transition-all ${s?"scale-105":""}`}),t.badge>0&&e.jsx("span",{className:"absolute -top-1 -right-2 min-w-[18px] h-[18px] px-1 text-[10px] font-bold bg-red-500 text-white rounded-full flex items-center justify-center",children:t.badge>99?"99+":t.badge})]}),e.jsx("span",{className:`text-[11px] mt-1 font-medium transition-all ${s?"text-emerald-400":"text-gray-500"}`,children:t.label})]})},x=async()=>{try{await p.impact({style:f.Light})}catch{}},ee=({title:t="FLYP",subtitle:s,showBack:r=!1,showSearch:d=!1,showNotifications:l=!0,notificationCount:c=0,onBackPress:u,onSearchPress:m,rightContent:h,transparent:g=!1})=>{const a=C(),[o,n]=P.useState(!1),w=async()=>{await x(),u?u():a(-1)},S=async()=>{await x(),n(!1);try{await U(B),a("/auth?type=login",{replace:!0})}catch(T){console.error("Logout error:",T)}};return e.jsxs(e.Fragment,{children:[e.jsx("header",{className:`fixed top-0 left-0 right-0 z-20 ${g?"bg-transparent":"bg-[#0B0F14] border-b border-white/5"}`,style:{paddingTop:"max(calc(env(safe-area-inset-top) - 12px), 2px)"},children:e.jsxs("div",{className:"flex items-center justify-between px-3 py-1.5",children:[e.jsx("div",{className:"flex items-center gap-2.5 min-w-0 flex-1",children:r?e.jsxs(e.Fragment,{children:[e.jsx(i.button,{whileTap:{scale:.9},onClick:w,className:"w-10 h-10 rounded-full bg-white/10 flex items-center justify-center flex-shrink-0",children:e.jsx(A,{className:"text-white text-base"})}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("h1",{className:"text-base font-bold text-white truncate",children:t}),s&&e.jsx("p",{className:"text-[11px] text-gray-400 truncate",children:s})]})]}):e.jsxs(e.Fragment,{children:[e.jsx("img",{src:"/assets/flyp_logo.png",alt:"",className:"h-14 w-14 flex-shrink-0 object-contain","aria-hidden":!0}),e.jsx("span",{className:"text-base font-bold text-white truncate",children:t==="FLYP"?s||"Retailer":t}),t!=="FLYP"&&s&&e.jsxs("span",{className:"text-[11px] text-gray-400 truncate hidden sm:inline",children:[" Â· ",s]})]})}),e.jsxs("div",{className:"flex items-center gap-2",children:[h,d&&e.jsx(i.button,{whileTap:{scale:.9},onClick:async()=>{await x(),m?.()},className:"w-11 h-11 rounded-full bg-white/10 flex items-center justify-center",children:e.jsx(O,{className:"text-white text-lg"})}),l&&e.jsxs(i.button,{whileTap:{scale:.9},onClick:x,className:"relative w-11 h-11 rounded-full bg-white/10 flex items-center justify-center",children:[e.jsx(E,{className:"text-white text-lg"}),c>0&&e.jsx("span",{className:"absolute -top-1 -right-1 min-w-[18px] h-[18px] px-1 text-[10px] font-bold bg-red-500 text-white rounded-full flex items-center justify-center",children:c>9?"9+":c})]}),e.jsx(i.button,{whileTap:{scale:.9},onClick:async()=>{await x(),n(!o)},className:"w-11 h-11 rounded-full bg-white/10 flex items-center justify-center",children:e.jsx(W,{className:"text-white text-lg"})})]})]})}),e.jsx(L,{children:o&&e.jsxs(e.Fragment,{children:[e.jsx(i.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>n(!1),className:"fixed inset-0 z-40"}),e.jsxs(i.div,{initial:{opacity:0,y:-10,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-10,scale:.95},className:"fixed top-20 right-4 z-50 w-48 bg-[#1e293b] rounded-xl shadow-xl border border-white/10 overflow-hidden",style:{marginTop:"env(safe-area-inset-top)"},children:[e.jsxs("button",{onClick:()=>{n(!1)},className:"w-full flex items-center gap-3 px-4 py-3 text-white hover:bg-white/10 transition-colors",children:[e.jsx(y,{className:"text-gray-400"}),e.jsx("span",{children:"Profile"})]}),e.jsxs("button",{onClick:()=>{n(!1)},className:"w-full flex items-center gap-3 px-4 py-3 text-white hover:bg-white/10 transition-colors",children:[e.jsx(Y,{className:"text-gray-400"}),e.jsx("span",{children:"Settings"})]}),e.jsx("div",{className:"h-px bg-white/10"}),e.jsxs("button",{onClick:S,className:"w-full flex items-center gap-3 px-4 py-3 text-red-400 hover:bg-red-500/10 transition-colors",children:[e.jsx(q,{}),e.jsx("span",{children:"Logout"})]})]})]})})]})};export{ee as M,Z as a};
