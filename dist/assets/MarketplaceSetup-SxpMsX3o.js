import{l as g,d as Ue,j as e,r as Re,s as Be,u as Me,g as Ie}from"./index-DRC3F7i0.js";import{r as n}from"./router-BPBaD_i0.js";import{r as N,y as h,z as p,p as $e,A as ze,B as ee,C as $,w as k,D as Ke,s as z,E as F,o as Ge,H as te,I as se,J as Ve,K,L as We,M as ae,N as G,O as le,P as Ye,Q as He,R as V,S as qe,q as Je}from"./index-CprmGC-M.js";import{R as Qe}from"./marketplaceOffers-DYmwRj2h.js";import{e as Xe,d as Ze}from"./firebase-DWi1MSv1.js";import{g as et,t as tt,s as st}from"./retailerMarketplaceService-JKOUhufm.js";import{u as at,A as lt,G as rt,M as it,I as ot,C as nt}from"./esm-LCaBFwtY.js";import{m as re}from"./proxy-BgUy8BPw.js";import"./vendor-Ckhrjn13.js";import"./index.esm-Bux_mLJ0.js";const dt="AIzaSyBPkkXZWll0VifG5kb0DDSsoV5UB-n5pFE",ct=["places"],mt={width:"100%",height:"300px",borderRadius:"12px"},xt={disableDefaultUI:!1,zoomControl:!0,streetViewControl:!1,mapTypeControl:!1,fullscreenControl:!0,styles:[{featureType:"poi",elementType:"labels",stylers:[{visibility:"off"}]}]},kt=()=>{const[ie,oe]=n.useState(!0),[W,Y]=n.useState(!1),[x,L]=n.useState(null),[ut,ne]=n.useState(null),[f,d]=n.useState({type:"",text:""}),[C,S]=n.useState(null),[D,P]=n.useState(null),[O,A]=n.useState(""),[T,E]=n.useState(""),[_,H]=n.useState(!1),[U,q]=n.useState(!1),R=n.useRef(null),B=n.useRef(null),[t,i]=n.useState({name:"",description:"",category:"General Store",phone:"",email:"",address:"",city:"",state:"",pincode:"",latitude:"",longitude:"",locationLocked:!1,logoUrl:"",bannerUrl:"",openTime:"09:00",closeTime:"21:00",workingDays:["Mon","Tue","Wed","Thu","Fri","Sat"],deliveryEnabled:!0,deliveryRadius:5,minOrderValue:100,deliveryFee:20,freeDeliveryAbove:500,distanceBasedFee:!1,baseFee:20,perKmFee:5,baseDistance:2,estimatedDeliveryPerKm:5,baseDeliveryTime:30,deliverySlots:["ASAP","2 Hours","4 Hours","Same Day"],paymentOptions:{cod:!0,upi:!0,payLater:!1,partialPayment:!1},payLaterDays:7,minAdvancePercent:50,pickupEnabled:!1,pickupTimeSlots:[{id:"1",time:"10:00 AM - 12:00 PM",enabled:!0},{id:"2",time:"12:00 PM - 02:00 PM",enabled:!0},{id:"3",time:"02:00 PM - 04:00 PM",enabled:!0},{id:"4",time:"04:00 PM - 06:00 PM",enabled:!0},{id:"5",time:"06:00 PM - 08:00 PM",enabled:!0}],pickupInstructions:"",returnPolicyDefault:"replacement_available",storeOffers:[]}),de=n.useRef(null),M=n.useRef(null),[J,w]=n.useState(!1),{isLoaded:j,loadError:I}=at({id:"google-map-script",googleMapsApiKey:dt,libraries:ct}),ce=n.useCallback(s=>{de.current=s},[]),me=n.useCallback(s=>{M.current=s},[]),xe=n.useCallback(()=>{if(!t.locationLocked&&M.current){const s=M.current.getPlace();if(s.geometry){const a=s.geometry.location.lat(),l=s.geometry.location.lng();i(r=>({...r,latitude:a.toFixed(6),longitude:l.toFixed(6),address:s.formatted_address||r.address})),s.address_components&&s.address_components.forEach(r=>{r.types.includes("locality")&&i(c=>({...c,city:r.long_name})),r.types.includes("postal_code")&&i(c=>({...c,pincode:r.long_name})),r.types.includes("administrative_area_level_1")&&i(c=>({...c,state:r.long_name}))}),d({type:"success",text:"Location set from search. Click Lock to save permanently."})}}},[t.locationLocked]),y=n.useCallback((s,a)=>{window.google&&window.google.maps&&new window.google.maps.Geocoder().geocode({location:{lat:s,lng:a}},(r,c)=>{c==="OK"&&r[0]&&(i(u=>({...u,address:r[0].formatted_address})),r[0].address_components.forEach(u=>{u.types.includes("locality")&&i(m=>({...m,city:u.long_name})),u.types.includes("postal_code")&&i(m=>({...m,pincode:u.long_name})),u.types.includes("administrative_area_level_1")&&i(m=>({...m,state:u.long_name}))}))})},[]),ue=n.useCallback(s=>{if(t.locationLocked)return;const a=s.latLng.lat(),l=s.latLng.lng();i(r=>({...r,latitude:a.toFixed(6),longitude:l.toFixed(6)})),y(a,l),w(!0),d({type:"success",text:"Location set! Drag the pin to adjust or click Lock to save."})},[t.locationLocked,y]),he=n.useCallback(s=>{if(t.locationLocked)return;const a=s.latLng.lat(),l=s.latLng.lng();i(r=>({...r,latitude:a.toFixed(6),longitude:l.toFixed(6)})),y(a,l),w(!0),d({type:"success",text:"Location updated! Click Lock to save permanently."})},[t.locationLocked,y]);n.useEffect(()=>{pe()},[]);const pe=async()=>{try{const s=g.currentUser?.uid;if(!s)return;const a=await Xe(Ze(Ue,"businesses",s));if(a.exists()){const r=a.data();ne(r),i(c=>({...c,name:r.businessName||"",phone:r.phone||"",email:r.email||"",address:r.address||"",city:r.city||"",state:r.state||"",pincode:r.pincode||"",logoUrl:r.logoUrl||""}))}const l=await et(s);l&&(L(l),i(r=>({...r,...l,latitude:l.location?.latitude||"",longitude:l.location?.longitude||"",returnPolicyDefault:l.returnPolicyDefault||"replacement_available",storeOffers:Array.isArray(l.storeOffers)?l.storeOffers:[]})),l.logoUrl&&A(l.logoUrl),l.bannerUrl&&E(l.bannerUrl))}catch(s){console.error("Error loading data:",s),d({type:"error",text:"Failed to load store data"})}finally{oe(!1)}},o=(s,a)=>{i(l=>({...l,[s]:a}))},be=s=>{i(a=>({...a,workingDays:a.workingDays.includes(s)?a.workingDays.filter(l=>l!==s):[...a.workingDays,s]}))},v=s=>{i(a=>({...a,paymentOptions:{...a.paymentOptions,[s]:!a.paymentOptions[s]}}))},ge=s=>{i(a=>({...a,pickupTimeSlots:a.pickupTimeSlots.map(l=>l.id===s?{...l,enabled:!l.enabled}:l)}))},fe=()=>{const s=Date.now().toString();i(a=>({...a,pickupTimeSlots:[...a.pickupTimeSlots,{id:s,time:"New Time Slot",enabled:!0}]}))},we=(s,a)=>{i(l=>({...l,pickupTimeSlots:l.pickupTimeSlots.map(r=>r.id===s?{...r,time:a}:r)}))},je=s=>{i(a=>({...a,pickupTimeSlots:a.pickupTimeSlots.filter(l=>l.id!==s)}))},Q=s=>{const a=`offer_${Date.now()}`,l=s==="percent_all"?{id:a,type:"percent_all",value:10,minOrderValue:null,enabled:!0}:{id:a,type:"percent_above",value:15,minOrderValue:500,enabled:!0};i(r=>({...r,storeOffers:[...r.storeOffers||[],l]}))},ye=s=>{i(a=>({...a,storeOffers:(a.storeOffers||[]).filter(l=>l.id!==s)}))},X=(s,a,l)=>{i(r=>({...r,storeOffers:(r.storeOffers||[]).map(c=>c.id===s?{...c,[a]:l}:c)}))},ve=s=>{const a=s.target.files?.[0];if(a){if(a.size>5*1024*1024){d({type:"error",text:"Logo image must be less than 5MB"});return}S(a);const l=new FileReader;l.onloadend=()=>A(l.result),l.readAsDataURL(a)}},Ne=s=>{const a=s.target.files?.[0];if(a){if(a.size>10*1024*1024){d({type:"error",text:"Banner image must be less than 10MB"});return}P(a);const l=new FileReader;l.onloadend=()=>E(l.result),l.readAsDataURL(a)}},Z=async(s,a)=>{const l=Re(Be,a);return await Me(l,s),await Ie(l)},ke=async()=>{if(!C)return;const s=g.currentUser?.uid;if(s){H(!0);try{const a=await Z(C,`stores/${s}/logo`);i(l=>({...l,logoUrl:a})),S(null),d({type:"success",text:"Logo uploaded successfully!"})}catch(a){console.error("Error uploading logo:",a),d({type:"error",text:"Failed to upload logo"})}finally{H(!1)}}},Fe=async()=>{if(!D)return;const s=g.currentUser?.uid;if(s){q(!0);try{const a=await Z(D,`stores/${s}/banner`);i(l=>({...l,bannerUrl:a})),P(null),d({type:"success",text:"Banner uploaded successfully!"})}catch(a){console.error("Error uploading banner:",a),d({type:"error",text:"Failed to upload banner"})}finally{q(!1)}}},Le=()=>{S(null),A(""),i(s=>({...s,logoUrl:""}))},Ce=()=>{P(null),E(""),i(s=>({...s,bannerUrl:""}))},Se=async()=>{const s=g.currentUser?.uid;if(s){Y(!0),d({type:"",text:""});try{const a={...t,location:{latitude:parseFloat(t.latitude)||0,longitude:parseFloat(t.longitude)||0,locked:t.locationLocked||!1},minOrderValue:parseFloat(t.minOrderValue)||0,deliveryFee:parseFloat(t.deliveryFee)||0,freeDeliveryAbove:parseFloat(t.freeDeliveryAbove)||0,deliveryRadius:parseFloat(t.deliveryRadius)||5,distanceBasedFee:t.distanceBasedFee||!1,baseFee:parseFloat(t.baseFee)||20,perKmFee:parseFloat(t.perKmFee)||5,baseDistance:parseFloat(t.baseDistance)||2,baseDeliveryTime:parseFloat(t.baseDeliveryTime)||30,estimatedDeliveryPerKm:parseFloat(t.estimatedDeliveryPerKm)||5,returnPolicyDefault:t.returnPolicyDefault||"replacement_available",storeOffers:Array.isArray(t.storeOffers)?t.storeOffers:[]};delete a.latitude,delete a.longitude;const l=await st(s,a);l.success?(d({type:"success",text:"Store settings saved successfully!"}),L({...x,...a})):d({type:"error",text:l.error||"Failed to save"})}catch(a){d({type:"error",text:a.message})}finally{Y(!1)}}},De=async()=>{const s=g.currentUser?.uid;if(!s||!x)return;const a=!x.isActive;(await tt(s,a)).success&&(L(r=>({...r,isActive:a})),d({type:"success",text:a?"Store is now OPEN for orders!":"Store is now CLOSED"}))},Pe=()=>{if(t.locationLocked){d({type:"error",text:"Location is locked. Unlock it first to update."});return}navigator.geolocation&&(d({type:"",text:""}),navigator.geolocation.getCurrentPosition(s=>{const a=s.coords.latitude,l=s.coords.longitude;i(r=>({...r,latitude:a.toFixed(6),longitude:l.toFixed(6)})),window.google&&window.google.maps&&new window.google.maps.Geocoder().geocode({location:{lat:a,lng:l}},(c,u)=>{u==="OK"&&c[0]&&(i(m=>({...m,address:c[0].formatted_address})),c[0].address_components.forEach(m=>{m.types.includes("locality")&&i(b=>({...b,city:m.long_name})),m.types.includes("postal_code")&&i(b=>({...b,pincode:m.long_name})),m.types.includes("administrative_area_level_1")&&i(b=>({...b,state:m.long_name}))}))}),d({type:"success",text:"Location captured! Click Lock to save this location permanently."})},s=>{d({type:"error",text:"Could not get location: "+s.message})},{enableHighAccuracy:!0}))},Oe=()=>{if(!t.latitude||!t.longitude){d({type:"error",text:"Please set a location first before locking."});return}i(s=>({...s,locationLocked:!s.locationLocked})),d({type:"success",text:t.locationLocked?"Location unlocked. You can now update it.":"Location locked! This location will be saved as your store address."})},Ae=n.useMemo(()=>{const s=parseFloat(t.latitude),a=parseFloat(t.longitude);return s&&a&&!isNaN(s)&&!isNaN(a)?{lat:s,lng:a}:{lat:20.5937,lng:78.9629}},[t.latitude,t.longitude]),Te=(parseFloat(t.deliveryRadius)||5)*1e3,Ee=["General Store","Grocery","Supermarket","Pharmacy","Electronics","Clothing","Hardware","Stationery","Bakery","Dairy","Fruits & Vegetables"],_e=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"];return ie?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"w-8 h-8 border-2 border-emerald-500 border-t-transparent rounded-full animate-spin"})}):e.jsxs("div",{className:"space-y-6",children:[x&&e.jsxs(re.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:`p-4 rounded-xl flex items-center justify-between ${x.isActive?"bg-emerald-500/20 border border-emerald-500/30":"bg-red-500/20 border border-red-500/30"}`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(N,{className:x.isActive?"text-emerald-400":"text-red-400"}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-semibold text-white",children:["Store is ",x.isActive?"OPEN":"CLOSED"]}),e.jsx("p",{className:"text-sm text-white/60",children:x.isActive?"Customers can see your store and place orders":"Your store is hidden from customers"})]})]}),e.jsxs("button",{onClick:De,className:`flex items-center gap-2 px-4 py-2 rounded-lg font-medium transition ${x.isActive?"bg-red-500/20 text-red-300 hover:bg-red-500/30":"bg-emerald-500/20 text-emerald-300 hover:bg-emerald-500/30"}`,children:[x.isActive?e.jsx(h,{}):e.jsx(p,{}),x.isActive?"Close Store":"Open Store"]})]}),f.text&&e.jsxs(re.div,{initial:{opacity:0},animate:{opacity:1},className:`p-3 rounded-lg flex items-center gap-2 ${f.type==="success"?"bg-emerald-500/20 text-emerald-300":"bg-red-500/20 text-red-300"}`,children:[f.type==="success"?e.jsx($e,{}):e.jsx(ze,{}),f.text]}),e.jsxs("div",{className:"bg-white/5 rounded-xl p-5 border border-white/10",children:[e.jsxs("h3",{className:"text-lg font-semibold text-white mb-4 flex items-center gap-2",children:[e.jsx(N,{className:"text-emerald-400"}),"Store Information"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-white/60 mb-1",children:"Store Name *"}),e.jsx("input",{type:"text",value:t.name,onChange:s=>o("name",s.target.value),className:"w-full px-4 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/40 focus:outline-none focus:border-emerald-500",placeholder:"Your Store Name"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-white/60 mb-1",children:"Category"}),e.jsx("select",{value:t.category,onChange:s=>o("category",s.target.value),className:"w-full px-4 py-2 bg-white/10 border border-white/20 rounded-lg text-white focus:outline-none focus:border-emerald-500",children:Ee.map(s=>e.jsx("option",{value:s,className:"bg-slate-800",children:s},s))})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm text-white/60 mb-1",children:"Description"}),e.jsx("textarea",{value:t.description,onChange:s=>o("description",s.target.value),rows:2,className:"w-full px-4 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/40 focus:outline-none focus:border-emerald-500",placeholder:"Brief description of your store..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-white/60 mb-1",children:"Phone *"}),e.jsx("input",{type:"tel",value:t.phone,onChange:s=>o("phone",s.target.value),className:"w-full px-4 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/40 focus:outline-none focus:border-emerald-500",placeholder:"+91 9999999999"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-white/60 mb-1",children:"Email"}),e.jsx("input",{type:"email",value:t.email,onChange:s=>o("email",s.target.value),className:"w-full px-4 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/40 focus:outline-none focus:border-emerald-500",placeholder:"store@example.com"})]})]})]}),e.jsxs("div",{className:"bg-white/5 rounded-xl p-5 border border-white/10",children:[e.jsxs("h3",{className:"text-lg font-semibold text-white mb-4 flex items-center gap-2",children:[e.jsx(ee,{className:"text-emerald-400"}),"Store Images"]}),e.jsx("p",{className:"text-white/60 text-sm mb-4",children:"Add images to make your store stand out to customers"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-white/60 mb-2",children:"Store Logo"}),e.jsx("p",{className:"text-white/40 text-xs mb-3",children:"Square image, shown on store cards and headers"}),e.jsxs("div",{className:"relative",children:[O||t.logoUrl?e.jsxs("div",{className:"relative group",children:[e.jsx("div",{className:"w-32 h-32 rounded-xl overflow-hidden border-2 border-white/20 bg-white/5",children:e.jsx("img",{src:O||t.logoUrl,alt:"Store Logo",className:"w-full h-full object-cover"})}),e.jsx("button",{onClick:Le,className:"absolute -top-2 -right-2 w-6 h-6 bg-red-500 rounded-full flex items-center justify-center text-white hover:bg-red-600 transition",children:e.jsx($,{size:10})}),C&&e.jsxs("button",{onClick:ke,disabled:_,className:"absolute -bottom-2 left-1/2 -translate-x-1/2 px-3 py-1 bg-emerald-500 text-white text-xs rounded-full hover:bg-emerald-600 transition disabled:opacity-50 flex items-center gap-1",children:[_?e.jsx("div",{className:"w-3 h-3 border border-white border-t-transparent rounded-full animate-spin"}):e.jsx(k,{size:10}),_?"Uploading...":"Upload"]})]}):e.jsxs("button",{onClick:()=>R.current?.click(),className:"w-32 h-32 rounded-xl border-2 border-dashed border-white/20 bg-white/5 flex flex-col items-center justify-center gap-2 hover:border-emerald-500/50 hover:bg-emerald-500/5 transition",children:[e.jsx(Ke,{className:"text-white/40 text-xl"}),e.jsx("span",{className:"text-white/40 text-xs",children:"Add Logo"})]}),e.jsx("input",{ref:R,type:"file",accept:"image/*",onChange:ve,className:"hidden"})]}),!O&&!t.logoUrl&&e.jsxs("button",{onClick:()=>R.current?.click(),className:"mt-3 px-4 py-2 bg-white/10 text-white/70 rounded-lg text-sm hover:bg-white/15 transition flex items-center gap-2",children:[e.jsx(k,{size:12}),"Choose Image"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-white/60 mb-2",children:"Store Banner / Cover"}),e.jsx("p",{className:"text-white/40 text-xs mb-3",children:"Wide image (16:9), shown on store detail page"}),e.jsxs("div",{className:"relative",children:[T||t.bannerUrl?e.jsxs("div",{className:"relative group",children:[e.jsx("div",{className:"w-full h-32 rounded-xl overflow-hidden border-2 border-white/20 bg-white/5",children:e.jsx("img",{src:T||t.bannerUrl,alt:"Store Banner",className:"w-full h-full object-cover"})}),e.jsx("button",{onClick:Ce,className:"absolute -top-2 -right-2 w-6 h-6 bg-red-500 rounded-full flex items-center justify-center text-white hover:bg-red-600 transition",children:e.jsx($,{size:10})}),D&&e.jsxs("button",{onClick:Fe,disabled:U,className:"absolute -bottom-2 left-1/2 -translate-x-1/2 px-3 py-1 bg-emerald-500 text-white text-xs rounded-full hover:bg-emerald-600 transition disabled:opacity-50 flex items-center gap-1",children:[U?e.jsx("div",{className:"w-3 h-3 border border-white border-t-transparent rounded-full animate-spin"}):e.jsx(k,{size:10}),U?"Uploading...":"Upload"]})]}):e.jsxs("button",{onClick:()=>B.current?.click(),className:"w-full h-32 rounded-xl border-2 border-dashed border-white/20 bg-white/5 flex flex-col items-center justify-center gap-2 hover:border-emerald-500/50 hover:bg-emerald-500/5 transition",children:[e.jsx(ee,{className:"text-white/40 text-xl"}),e.jsx("span",{className:"text-white/40 text-xs",children:"Add Banner"})]}),e.jsx("input",{ref:B,type:"file",accept:"image/*",onChange:Ne,className:"hidden"})]}),!T&&!t.bannerUrl&&e.jsxs("button",{onClick:()=>B.current?.click(),className:"mt-3 px-4 py-2 bg-white/10 text-white/70 rounded-lg text-sm hover:bg-white/15 transition flex items-center gap-2",children:[e.jsx(k,{size:12}),"Choose Image"]})]})]}),e.jsx("p",{className:"text-white/40 text-xs mt-4",children:"ðŸ’¡ Tip: High-quality images help customers recognize and trust your store"})]}),e.jsxs("div",{className:"bg-white/5 rounded-xl p-5 border border-white/10",children:[e.jsxs("h3",{className:"text-lg font-semibold text-white mb-4 flex items-center gap-2",children:[e.jsx(z,{className:"text-emerald-400"}),"Store Location",t.locationLocked&&e.jsxs("span",{className:"ml-2 px-2 py-0.5 bg-emerald-500/20 text-emerald-300 text-xs rounded-full flex items-center gap-1",children:[e.jsx(F,{className:"text-[10px]"}),"Locked"]})]}),e.jsxs("div",{className:`mb-4 p-3 rounded-lg flex items-start gap-3 ${t.locationLocked?"bg-emerald-500/10 border border-emerald-500/20":"bg-amber-500/10 border border-amber-500/20"}`,children:[e.jsx(Ge,{className:t.locationLocked?"text-emerald-400 mt-0.5":"text-amber-400 mt-0.5"}),e.jsx("div",{className:"flex-1",children:e.jsx("p",{className:`text-sm ${t.locationLocked?"text-emerald-300":"text-amber-300"}`,children:t.locationLocked?"Store location is locked and saved. Customers will see this location.":"Set your exact store location and lock it to prevent accidental changes."})})]}),j&&!t.locationLocked&&e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm text-white/60 mb-1",children:"Search Location"}),e.jsx(lt,{onLoad:me,onPlaceChanged:xe,restrictions:{country:"in"},children:e.jsx("input",{type:"text",placeholder:"Search for your store location...",className:"w-full px-4 py-2.5 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/40 focus:outline-none focus:border-emerald-500"})})]}),e.jsxs("div",{className:"mb-4 rounded-xl overflow-hidden border-2 border-white/20 relative",children:[I&&e.jsx("div",{className:"h-[300px] flex items-center justify-center bg-red-500/10 text-red-400",children:e.jsx("p",{children:"Error loading Google Maps"})}),!j&&!I&&e.jsx("div",{className:"h-[300px] flex items-center justify-center bg-white/5",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-8 h-8 border-2 border-emerald-500 border-t-transparent rounded-full animate-spin mx-auto mb-2"}),e.jsx("p",{className:"text-white/60 text-sm",children:"Loading Google Maps..."})]})}),j&&!I&&e.jsx(rt,{mapContainerStyle:mt,center:Ae,zoom:t.latitude&&t.longitude?15:5,options:{...xt,draggableCursor:t.locationLocked?"default":"crosshair"},onLoad:ce,onClick:ue,children:t.latitude&&t.longitude&&e.jsxs(e.Fragment,{children:[e.jsx(it,{position:{lat:parseFloat(t.latitude),lng:parseFloat(t.longitude)},icon:{url:t.locationLocked?"https://maps.google.com/mapfiles/ms/icons/green-dot.png":"https://maps.google.com/mapfiles/ms/icons/red-dot.png",scaledSize:new window.google.maps.Size(45,45)},draggable:!t.locationLocked,onDragEnd:he,onClick:()=>w(!0),cursor:t.locationLocked?"pointer":"grab",title:t.locationLocked?"Your Store Location (Locked)":"Drag to set your store location"}),J&&e.jsx(ot,{position:{lat:parseFloat(t.latitude),lng:parseFloat(t.longitude)},onCloseClick:()=>w(!1),options:{pixelOffset:new window.google.maps.Size(0,-40)},children:e.jsxs("div",{className:"p-2 min-w-[220px] max-w-[300px]",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2 pb-2 border-b",children:[e.jsx("div",{className:`w-10 h-10 ${t.locationLocked?"bg-emerald-500":"bg-orange-500"} rounded-full flex items-center justify-center`,children:e.jsx(N,{className:"text-white text-lg"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-gray-800 text-sm",children:t.locationLocked?"Your Store Location":"Set Your Location"}),e.jsx("span",{className:`text-[10px] ${t.locationLocked?"bg-emerald-100 text-emerald-700":"bg-orange-100 text-orange-700"} px-1.5 py-0.5 rounded inline-flex items-center gap-1`,children:t.locationLocked?e.jsxs(e.Fragment,{children:[e.jsx(F,{className:"text-[8px]"})," Locked & Saved"]}):e.jsxs(e.Fragment,{children:[e.jsx(te,{className:"text-[8px]"})," Drag pin to adjust"]})})]})]}),t.name&&e.jsx("p",{className:"text-sm font-semibold text-gray-700 mb-1",children:t.name}),t.address&&e.jsx("p",{className:"text-xs text-gray-600 mb-2 leading-relaxed",children:t.address}),e.jsxs("div",{className:"flex flex-wrap gap-2 text-[10px] text-gray-500 border-t pt-2 mt-2",children:[t.city&&e.jsx("span",{className:"bg-gray-100 px-2 py-0.5 rounded",children:t.city}),t.pincode&&e.jsx("span",{className:"bg-blue-50 text-blue-600 px-2 py-0.5 rounded",children:t.pincode})]}),e.jsxs("div",{className:"mt-2 pt-2 border-t text-[10px] text-gray-400 flex justify-between",children:[e.jsxs("span",{children:["Lat: ",parseFloat(t.latitude).toFixed(5)]}),e.jsxs("span",{children:["Lng: ",parseFloat(t.longitude).toFixed(5)]})]}),t.deliveryEnabled&&t.deliveryRadius&&e.jsxs("div",{className:"mt-2 pt-2 border-t text-xs text-emerald-600 flex items-center gap-1",children:[e.jsx(se,{className:"text-xs"}),"Delivery Area: ",t.deliveryRadius," km radius"]}),!t.locationLocked&&e.jsx("div",{className:"mt-2 pt-2 border-t",children:e.jsx("p",{className:"text-[10px] text-orange-600 italic",children:'Drag the pin or click elsewhere on the map to set your exact store location, then click "Lock Location" to save.'})})]})}),t.deliveryEnabled&&e.jsx(nt,{center:{lat:parseFloat(t.latitude),lng:parseFloat(t.longitude)},radius:Te,options:{strokeColor:"#10b981",strokeOpacity:.8,strokeWeight:2,fillColor:"#10b981",fillOpacity:.1}})]})}),t.locationLocked&&e.jsxs("div",{className:"absolute top-2 right-2 px-2 py-1 bg-emerald-500/90 text-white text-xs rounded-lg flex items-center gap-1 z-10",children:[e.jsx(F,{className:"text-[10px]"}),"Location Locked"]}),j&&e.jsxs(e.Fragment,{children:[!t.latitude&&!t.longitude&&e.jsxs("div",{className:"absolute bottom-2 left-2 right-2 px-3 py-2 bg-blue-600/90 text-white text-xs rounded-lg z-10 text-center",children:[e.jsx(z,{className:"inline mr-1"}),"Click on map or use search to place your store pin"]}),t.latitude&&t.longitude&&!t.locationLocked&&e.jsxs("div",{className:"absolute bottom-2 left-2 px-3 py-2 bg-orange-500/90 text-white text-xs rounded-lg z-10 flex items-center gap-2",children:[e.jsx(z,{className:"text-sm animate-bounce"}),e.jsx("span",{children:"Drag the red pin to adjust location"})]}),t.latitude&&t.longitude&&t.locationLocked&&!J&&e.jsxs("div",{className:"absolute bottom-2 right-2 px-2 py-1 bg-emerald-600/90 text-white text-xs rounded-lg z-10 flex items-center gap-1",children:[e.jsx(N,{className:"text-[10px]"}),"Your Store Location - Click pin for details"]})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-2 mb-4",children:[e.jsxs("button",{onClick:Pe,disabled:t.locationLocked,className:`px-4 py-2 rounded-lg flex items-center gap-2 transition ${t.locationLocked?"bg-white/5 text-white/30 cursor-not-allowed":"bg-blue-500/20 text-blue-300 hover:bg-blue-500/30"}`,children:[e.jsx(Ve,{}),"Get Current Location"]}),e.jsxs("button",{onClick:Oe,className:`px-4 py-2 rounded-lg flex items-center gap-2 transition ${t.locationLocked?"bg-amber-500/20 text-amber-300 hover:bg-amber-500/30":"bg-emerald-500/20 text-emerald-300 hover:bg-emerald-500/30"}`,children:[t.locationLocked?e.jsx(te,{}):e.jsx(F,{}),t.locationLocked?"Unlock Location":"Lock Location"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm text-white/60 mb-1",children:"Address *"}),e.jsx("input",{type:"text",value:t.address,onChange:s=>o("address",s.target.value),className:"w-full px-4 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/40 focus:outline-none focus:border-emerald-500",placeholder:"Shop address..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-white/60 mb-1",children:"City *"}),e.jsx("input",{type:"text",value:t.city,onChange:s=>o("city",s.target.value),className:"w-full px-4 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/40 focus:outline-none focus:border-emerald-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-white/60 mb-1",children:"Pincode *"}),e.jsx("input",{type:"text",value:t.pincode,onChange:s=>o("pincode",s.target.value),className:"w-full px-4 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/40 focus:outline-none focus:border-emerald-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-white/60 mb-1",children:"Latitude"}),e.jsx("input",{type:"text",value:t.latitude,onChange:s=>!t.locationLocked&&o("latitude",s.target.value),disabled:t.locationLocked,className:`w-full px-4 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/40 focus:outline-none focus:border-emerald-500 ${t.locationLocked?"opacity-60 cursor-not-allowed":""}`,placeholder:"e.g., 18.5204"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-white/60 mb-1",children:"Longitude"}),e.jsx("input",{type:"text",value:t.longitude,onChange:s=>!t.locationLocked&&o("longitude",s.target.value),disabled:t.locationLocked,className:`w-full px-4 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/40 focus:outline-none focus:border-emerald-500 ${t.locationLocked?"opacity-60 cursor-not-allowed":""}`,placeholder:"e.g., 73.8567"})]})]})]}),e.jsxs("div",{className:"bg-white/5 rounded-xl p-5 border border-white/10",children:[e.jsxs("h3",{className:"text-lg font-semibold text-white mb-4 flex items-center gap-2",children:[e.jsx(K,{className:"text-emerald-400"}),"Operating Hours"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-white/60 mb-1",children:"Opening Time"}),e.jsx("input",{type:"time",value:t.openTime,onChange:s=>o("openTime",s.target.value),className:"w-full px-4 py-2 bg-white/10 border border-white/20 rounded-lg text-white focus:outline-none focus:border-emerald-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-white/60 mb-1",children:"Closing Time"}),e.jsx("input",{type:"time",value:t.closeTime,onChange:s=>o("closeTime",s.target.value),className:"w-full px-4 py-2 bg-white/10 border border-white/20 rounded-lg text-white focus:outline-none focus:border-emerald-500"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-white/60 mb-2",children:"Working Days"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:_e.map(s=>e.jsx("button",{onClick:()=>be(s),className:`px-3 py-1.5 rounded-lg text-sm font-medium transition ${t.workingDays.includes(s)?"bg-emerald-500 text-white":"bg-white/10 text-white/60 hover:bg-white/20"}`,children:s},s))})]})]}),e.jsxs("div",{className:"bg-white/5 rounded-xl p-5 border border-white/10",children:[e.jsxs("h3",{className:"text-lg font-semibold text-white mb-4 flex items-center gap-2",children:[e.jsx(se,{className:"text-emerald-400"}),"Delivery Settings"]}),e.jsx("div",{className:"flex items-center gap-3 mb-4",children:e.jsxs("button",{onClick:()=>o("deliveryEnabled",!t.deliveryEnabled),className:`flex items-center gap-2 px-4 py-2 rounded-lg transition ${t.deliveryEnabled?"bg-emerald-500 text-white":"bg-white/10 text-white/60"}`,children:[t.deliveryEnabled?e.jsx(h,{}):e.jsx(p,{}),"Delivery ",t.deliveryEnabled?"Enabled":"Disabled"]})}),t.deliveryEnabled&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"p-4 bg-emerald-500/5 rounded-xl border border-emerald-500/20",children:[e.jsxs("h4",{className:"text-white font-medium mb-3 flex items-center gap-2",children:[e.jsx(We,{className:"text-emerald-400"}),"Delivery Area"]}),e.jsx("p",{className:"text-white/50 text-sm mb-4",children:"Set the radius where you can deliver. The green circle on the map shows your delivery area."}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-sm text-white/60 mb-1",children:"Delivery Radius (km)"}),e.jsx("input",{type:"range",min:"1",max:"50",value:t.deliveryRadius,onChange:s=>o("deliveryRadius",s.target.value),className:"w-full h-2 bg-white/10 rounded-lg appearance-none cursor-pointer accent-emerald-500"})]}),e.jsx("div",{className:"w-20",children:e.jsx("input",{type:"number",value:t.deliveryRadius,onChange:s=>o("deliveryRadius",s.target.value),className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white text-center focus:outline-none focus:border-emerald-500"})}),e.jsx("span",{className:"text-white/60",children:"km"})]}),e.jsxs("p",{className:"text-white/40 text-xs mt-2",children:["Customers beyond ",t.deliveryRadius," km won't be able to place delivery orders"]})]}),e.jsxs("div",{className:"p-4 bg-blue-500/5 rounded-xl border border-blue-500/20",children:[e.jsxs("h4",{className:"text-white font-medium mb-3 flex items-center gap-2",children:[e.jsx(ae,{className:"text-blue-400"}),"Order Requirements"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-white/60 mb-1",children:"Minimum Order Value (â‚¹)"}),e.jsx("input",{type:"number",value:t.minOrderValue,onChange:s=>o("minOrderValue",s.target.value),className:"w-full px-4 py-2 bg-white/10 border border-white/20 rounded-lg text-white focus:outline-none focus:border-blue-500",placeholder:"0 for no minimum"}),e.jsx("p",{className:"text-white/40 text-xs mt-1",children:"Set to 0 for no minimum order requirement"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-white/60 mb-1",children:"Free Delivery Above (â‚¹)"}),e.jsx("input",{type:"number",value:t.freeDeliveryAbove,onChange:s=>o("freeDeliveryAbove",s.target.value),className:"w-full px-4 py-2 bg-white/10 border border-white/20 rounded-lg text-white focus:outline-none focus:border-blue-500",placeholder:"0 for no free delivery"}),e.jsx("p",{className:"text-white/40 text-xs mt-1",children:"Orders above this amount get free delivery"})]})]})]}),e.jsxs("div",{className:"p-4 bg-amber-500/5 rounded-xl border border-amber-500/20",children:[e.jsxs("h4",{className:"text-white font-medium mb-3 flex items-center gap-2",children:[e.jsx(G,{className:"text-amber-400"}),"Delivery Fee"]}),e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("button",{onClick:()=>o("distanceBasedFee",!1),className:`px-4 py-2 rounded-lg text-sm font-medium transition ${t.distanceBasedFee?"bg-white/10 text-white/60 hover:bg-white/15":"bg-amber-500 text-white"}`,children:"Flat Fee"}),e.jsx("button",{onClick:()=>o("distanceBasedFee",!0),className:`px-4 py-2 rounded-lg text-sm font-medium transition ${t.distanceBasedFee?"bg-amber-500 text-white":"bg-white/10 text-white/60 hover:bg-white/15"}`,children:"Distance Based"})]}),t.distanceBasedFee?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-white/60 mb-1",children:"Base Fee (â‚¹)"}),e.jsx("input",{type:"number",value:t.baseFee,onChange:s=>o("baseFee",s.target.value),className:"w-full px-4 py-2 bg-white/10 border border-white/20 rounded-lg text-white focus:outline-none focus:border-amber-500",placeholder:"20"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-white/60 mb-1",children:"Base Distance (km)"}),e.jsx("input",{type:"number",value:t.baseDistance,onChange:s=>o("baseDistance",s.target.value),className:"w-full px-4 py-2 bg-white/10 border border-white/20 rounded-lg text-white focus:outline-none focus:border-amber-500",placeholder:"2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-white/60 mb-1",children:"Per km Fee (â‚¹)"}),e.jsx("input",{type:"number",value:t.perKmFee,onChange:s=>o("perKmFee",s.target.value),className:"w-full px-4 py-2 bg-white/10 border border-white/20 rounded-lg text-white focus:outline-none focus:border-amber-500",placeholder:"5"})]})]}),e.jsx("div",{className:"p-3 bg-white/5 rounded-lg",children:e.jsxs("p",{className:"text-white/60 text-sm",children:[e.jsx("strong",{className:"text-white",children:"Example:"})," For a customer 5 km away:",e.jsx("br",{}),"Base â‚¹",t.baseFee||20," + (",5-(t.baseDistance||2)," km Ã— â‚¹",t.perKmFee||5,") =",e.jsxs("strong",{className:"text-amber-400 ml-1",children:["â‚¹",(parseFloat(t.baseFee)||20)+(5-(parseFloat(t.baseDistance)||2))*(parseFloat(t.perKmFee)||5)]})]})})]}):e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-white/60 mb-1",children:"Delivery Fee (â‚¹)"}),e.jsx("input",{type:"number",value:t.deliveryFee,onChange:s=>o("deliveryFee",s.target.value),className:"w-full px-4 py-2 bg-white/10 border border-white/20 rounded-lg text-white focus:outline-none focus:border-amber-500",placeholder:"20"}),e.jsx("p",{className:"text-white/40 text-xs mt-1",children:"Same fee for all deliveries within your area"})]})]}),e.jsxs("div",{className:"p-4 bg-cyan-500/5 rounded-xl border border-cyan-500/20",children:[e.jsxs("h4",{className:"text-white font-medium mb-3 flex items-center gap-2",children:[e.jsx(K,{className:"text-cyan-400"}),"Estimated Delivery Time"]}),e.jsx("p",{className:"text-white/50 text-sm mb-4",children:"Set how delivery time is calculated for customers"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-white/60 mb-1",children:"Base Preparation Time (mins)"}),e.jsx("input",{type:"number",value:t.baseDeliveryTime,onChange:s=>o("baseDeliveryTime",s.target.value),className:"w-full px-4 py-2 bg-white/10 border border-white/20 rounded-lg text-white focus:outline-none focus:border-cyan-500",placeholder:"30"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-white/60 mb-1",children:"Minutes per km"}),e.jsx("input",{type:"number",value:t.estimatedDeliveryPerKm,onChange:s=>o("estimatedDeliveryPerKm",s.target.value),className:"w-full px-4 py-2 bg-white/10 border border-white/20 rounded-lg text-white focus:outline-none focus:border-cyan-500",placeholder:"5"})]})]}),e.jsx("div",{className:"mt-3 p-3 bg-white/5 rounded-lg",children:e.jsxs("p",{className:"text-white/60 text-sm",children:[e.jsx("strong",{className:"text-white",children:"Example:"})," For a customer 3 km away:",e.jsx("br",{}),t.baseDeliveryTime||30," mins + (3 km Ã— ",t.estimatedDeliveryPerKm||5," mins) =",e.jsxs("strong",{className:"text-cyan-400 ml-1",children:[(parseFloat(t.baseDeliveryTime)||30)+3*(parseFloat(t.estimatedDeliveryPerKm)||5)," mins"]})]})})]}),e.jsxs("div",{className:"p-4 bg-purple-500/5 rounded-xl border border-purple-500/20",children:[e.jsx("h4",{className:"text-white font-medium mb-3",children:"What customers will see:"}),e.jsxs("div",{className:"space-y-2",children:[parseFloat(t.minOrderValue)>0&&e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx("span",{className:"text-red-400",children:"â€¢"}),e.jsxs("span",{className:"text-white/70",children:["Minimum order: ",e.jsxs("strong",{className:"text-white",children:["â‚¹",t.minOrderValue]})]})]}),parseFloat(t.freeDeliveryAbove)>0&&e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx("span",{className:"text-emerald-400",children:"â€¢"}),e.jsxs("span",{className:"text-white/70",children:["Free delivery above: ",e.jsxs("strong",{className:"text-emerald-400",children:["â‚¹",t.freeDeliveryAbove]})]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx("span",{className:"text-blue-400",children:"â€¢"}),e.jsxs("span",{className:"text-white/70",children:["Delivery fee: ",e.jsx("strong",{className:"text-white",children:t.distanceBasedFee?`â‚¹${t.baseFee} + â‚¹${t.perKmFee}/km`:`â‚¹${t.deliveryFee}`})]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx("span",{className:"text-amber-400",children:"â€¢"}),e.jsxs("span",{className:"text-white/70",children:["Delivers within: ",e.jsxs("strong",{className:"text-white",children:[t.deliveryRadius," km"]})]})]})]})]})]})]}),e.jsxs("div",{className:"bg-white/5 rounded-xl p-5 border border-white/10",children:[e.jsxs("h3",{className:"text-lg font-semibold text-white mb-4 flex items-center gap-2",children:[e.jsx(le,{className:"text-emerald-400"}),"Payment Options"]}),e.jsx("p",{className:"text-white/60 text-sm mb-4",children:"Configure which payment methods customers can use at checkout"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsxs("button",{onClick:()=>v("cod"),className:`p-4 rounded-xl border-2 flex items-center gap-3 transition ${t.paymentOptions?.cod?"border-emerald-500 bg-emerald-500/10":"border-white/20 bg-white/5"}`,children:[e.jsx("div",{className:`w-10 h-10 rounded-lg flex items-center justify-center ${t.paymentOptions?.cod?"bg-emerald-500":"bg-white/10"}`,children:e.jsx(G,{className:"text-white"})}),e.jsxs("div",{className:"text-left flex-1",children:[e.jsx("p",{className:"text-white font-medium",children:"Cash on Delivery"}),e.jsx("p",{className:"text-white/50 text-xs",children:"Pay when order is delivered"})]}),t.paymentOptions?.cod?e.jsx(h,{className:"text-emerald-400 text-xl"}):e.jsx(p,{className:"text-white/30 text-xl"})]}),e.jsxs("button",{onClick:()=>v("upi"),className:`p-4 rounded-xl border-2 flex items-center gap-3 transition ${t.paymentOptions?.upi?"border-emerald-500 bg-emerald-500/10":"border-white/20 bg-white/5"}`,children:[e.jsx("div",{className:`w-10 h-10 rounded-lg flex items-center justify-center ${t.paymentOptions?.upi?"bg-emerald-500":"bg-white/10"}`,children:e.jsx(le,{className:"text-white"})}),e.jsxs("div",{className:"text-left flex-1",children:[e.jsx("p",{className:"text-white font-medium",children:"UPI Payment"}),e.jsx("p",{className:"text-white/50 text-xs",children:"GPay, PhonePe, Paytm"})]}),t.paymentOptions?.upi?e.jsx(h,{className:"text-emerald-400 text-xl"}):e.jsx(p,{className:"text-white/30 text-xl"})]})]}),e.jsxs("div",{className:"border-t border-white/10 pt-4 mt-4",children:[e.jsxs("h4",{className:"text-white font-medium mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"px-2 py-0.5 bg-amber-500/20 text-amber-300 text-xs rounded-full",children:"Premium"}),"Credit Options"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("button",{onClick:()=>v("payLater"),className:`w-full p-4 rounded-xl border-2 flex items-center gap-3 transition ${t.paymentOptions?.payLater?"border-amber-500 bg-amber-500/10":"border-white/20 bg-white/5"}`,children:[e.jsx("div",{className:`w-10 h-10 rounded-lg flex items-center justify-center ${t.paymentOptions?.payLater?"bg-amber-500":"bg-white/10"}`,children:e.jsx(K,{className:"text-white"})}),e.jsxs("div",{className:"text-left flex-1",children:[e.jsx("p",{className:"text-white font-medium",children:"Pay Later"}),e.jsx("p",{className:"text-white/50 text-xs",children:"Allow customers to pay after delivery"})]}),t.paymentOptions?.payLater?e.jsx(h,{className:"text-amber-400 text-xl"}):e.jsx(p,{className:"text-white/30 text-xl"})]}),t.paymentOptions?.payLater&&e.jsxs("div",{className:"ml-4 p-4 bg-white/5 rounded-lg border border-white/10",children:[e.jsx("label",{className:"block text-sm text-white/60 mb-2",children:"Payment Due In (Days)"}),e.jsx("input",{type:"number",value:t.payLaterDays,onChange:s=>o("payLaterDays",s.target.value),min:"1",max:"30",className:"w-32 px-4 py-2 bg-white/10 border border-white/20 rounded-lg text-white focus:outline-none focus:border-amber-500"})]}),e.jsxs("button",{onClick:()=>v("partialPayment"),className:`w-full p-4 rounded-xl border-2 flex items-center gap-3 transition ${t.paymentOptions?.partialPayment?"border-purple-500 bg-purple-500/10":"border-white/20 bg-white/5"}`,children:[e.jsx("div",{className:`w-10 h-10 rounded-lg flex items-center justify-center ${t.paymentOptions?.partialPayment?"bg-purple-500":"bg-white/10"}`,children:e.jsx(G,{className:"text-white"})}),e.jsxs("div",{className:"text-left flex-1",children:[e.jsx("p",{className:"text-white font-medium",children:"Partial Payment (Advance + Later)"}),e.jsx("p",{className:"text-white/50 text-xs",children:"Customer pays part now, rest on delivery"})]}),t.paymentOptions?.partialPayment?e.jsx(h,{className:"text-purple-400 text-xl"}):e.jsx(p,{className:"text-white/30 text-xl"})]}),t.paymentOptions?.partialPayment&&e.jsxs("div",{className:"ml-4 p-4 bg-white/5 rounded-lg border border-white/10",children:[e.jsx("label",{className:"block text-sm text-white/60 mb-2",children:"Minimum Advance Payment (%)"}),e.jsx("input",{type:"number",value:t.minAdvancePercent,onChange:s=>o("minAdvancePercent",s.target.value),min:"10",max:"90",className:"w-32 px-4 py-2 bg-white/10 border border-white/20 rounded-lg text-white focus:outline-none focus:border-purple-500"}),e.jsx("p",{className:"text-white/40 text-xs mt-1",children:"Remaining amount to be paid on delivery"})]})]})]})]})]}),e.jsxs("div",{className:"bg-white/5 rounded-xl p-5 border border-white/10",children:[e.jsxs("h3",{className:"text-lg font-semibold text-white mb-2 flex items-center gap-2",children:[e.jsx(Ye,{className:"text-amber-400"}),"Offers & Return Policy"]}),e.jsx("p",{className:"text-white/50 text-sm mb-4",children:"Attract customers with store-wide offers (like Blinkit/Instamart). Set your default return policy â€“ per-product overrides can be set in Products."}),e.jsxs("div",{className:"mb-5",children:[e.jsxs("label",{className:"block text-sm text-white/60 mb-2 flex items-center gap-2",children:[e.jsx(He,{className:"text-white/40"}),"Default return policy for all products"]}),e.jsx("select",{value:t.returnPolicyDefault||"replacement_available",onChange:s=>o("returnPolicyDefault",s.target.value),className:"w-full md:max-w-sm px-4 py-2.5 bg-white/10 border border-white/20 rounded-lg text-white focus:outline-none focus:border-amber-500",children:Qe.filter(s=>s.value!=="inherit").map(s=>e.jsxs("option",{value:s.value,className:"bg-slate-800",children:[s.label," â€“ ",s.description]},s.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-white/60 mb-2",children:"Store-wide offers"}),e.jsx("p",{className:"text-white/40 text-xs mb-3",children:'e.g. "20% off on all orders" or "30% off on orders above â‚¹500"'}),e.jsxs("div",{className:"flex flex-wrap gap-2 mb-3",children:[e.jsxs("button",{type:"button",onClick:()=>Q("percent_all"),className:"flex items-center gap-1.5 px-3 py-2 bg-amber-500/20 text-amber-300 rounded-lg text-sm hover:bg-amber-500/30 transition",children:[e.jsx(V,{className:"text-xs"}),"% off on all orders"]}),e.jsxs("button",{type:"button",onClick:()=>Q("percent_above"),className:"flex items-center gap-1.5 px-3 py-2 bg-amber-500/20 text-amber-300 rounded-lg text-sm hover:bg-amber-500/30 transition",children:[e.jsx(V,{className:"text-xs"}),"% off on orders above â‚¹"]})]}),e.jsx("div",{className:"space-y-2",children:(t.storeOffers||[]).map(s=>e.jsxs("div",{className:"flex flex-wrap items-center gap-2 p-3 rounded-lg border border-amber-500/20 bg-amber-500/5",children:[e.jsx("input",{type:"number",min:"1",max:"99",value:s.value,onChange:a=>X(s.id,"value",parseInt(a.target.value,10)||0),className:"w-14 px-2 py-1.5 bg-white/10 border border-white/20 rounded text-white text-sm"}),e.jsx("span",{className:"text-white/70 text-sm",children:"% off"}),s.type==="percent_above"&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-white/50 text-sm",children:"on orders above"}),e.jsx("span",{className:"text-white/40",children:"â‚¹"}),e.jsx("input",{type:"number",min:"0",value:s.minOrderValue??"",onChange:a=>X(s.id,"minOrderValue",a.target.value===""?null:parseFloat(a.target.value)||0),placeholder:"500",className:"w-24 px-2 py-1.5 bg-white/10 border border-white/20 rounded text-white text-sm"})]}),s.type==="percent_all"&&e.jsx("span",{className:"text-white/50 text-sm",children:"on all orders"}),e.jsx("button",{type:"button",onClick:()=>ye(s.id),className:"ml-auto p-1.5 rounded bg-red-500/20 text-red-400 hover:bg-red-500/30 transition",title:"Remove offer",children:e.jsx($,{className:"text-xs"})})]},s.id))}),(t.storeOffers||[]).length===0&&e.jsx("p",{className:"text-white/30 text-sm italic",children:"No store-wide offers. Add one above."})]})]}),e.jsxs("div",{className:"bg-white/5 rounded-xl p-5 border border-white/10",children:[e.jsxs("h3",{className:"text-lg font-semibold text-white mb-4 flex items-center gap-2",children:[e.jsx(ae,{className:"text-emerald-400"}),"Store Pickup"]}),e.jsx("div",{className:"flex items-center gap-3 mb-4",children:e.jsxs("button",{onClick:()=>o("pickupEnabled",!t.pickupEnabled),className:`flex items-center gap-2 px-4 py-2 rounded-lg transition ${t.pickupEnabled?"bg-emerald-500 text-white":"bg-white/10 text-white/60"}`,children:[t.pickupEnabled?e.jsx(h,{}):e.jsx(p,{}),"Pickup ",t.pickupEnabled?"Enabled":"Disabled"]})}),e.jsx("p",{className:"text-white/60 text-sm mb-4",children:"Allow customers to pick up orders from your store"}),t.pickupEnabled&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("label",{className:"text-sm text-white/60",children:"Pickup Time Slots"}),e.jsxs("button",{onClick:fe,className:"flex items-center gap-1 px-3 py-1 bg-emerald-500/20 text-emerald-300 rounded-lg text-sm hover:bg-emerald-500/30 transition",children:[e.jsx(V,{className:"text-xs"}),"Add Slot"]})]}),e.jsx("div",{className:"space-y-2",children:t.pickupTimeSlots?.map(s=>e.jsxs("div",{className:`flex items-center gap-3 p-3 rounded-lg border transition ${s.enabled?"border-emerald-500/30 bg-emerald-500/5":"border-white/10 bg-white/5"}`,children:[e.jsx("button",{onClick:()=>ge(s.id),className:`w-8 h-8 rounded-lg flex items-center justify-center transition ${s.enabled?"bg-emerald-500":"bg-white/10"}`,children:s.enabled?e.jsx(h,{className:"text-white"}):e.jsx(p,{className:"text-white/40"})}),e.jsx("input",{type:"text",value:s.time,onChange:a=>we(s.id,a.target.value),className:"flex-1 px-3 py-1.5 bg-white/10 border border-white/20 rounded-lg text-white text-sm focus:outline-none focus:border-emerald-500"}),e.jsx("button",{onClick:()=>je(s.id),className:"w-8 h-8 rounded-lg bg-red-500/20 text-red-400 flex items-center justify-center hover:bg-red-500/30 transition",children:e.jsx(qe,{className:"text-xs"})})]},s.id))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-white/60 mb-2",children:"Pickup Instructions (Optional)"}),e.jsx("textarea",{value:t.pickupInstructions,onChange:s=>o("pickupInstructions",s.target.value),rows:2,placeholder:"e.g., Pick up from counter 2, bring order ID...",className:"w-full px-4 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/40 focus:outline-none focus:border-emerald-500"})]})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs("button",{onClick:Se,disabled:W,className:"flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-emerald-500 to-cyan-500 text-white font-semibold rounded-xl hover:opacity-90 transition disabled:opacity-50",children:[W?e.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):e.jsx(Je,{}),"Save Store Settings"]})})]})};export{kt as default};
