import{j as e,d as j}from"./index-DRC3F7i0.js";import{r as u}from"./router-BPBaD_i0.js";import{c as C,g as v}from"./firebase-DWi1MSv1.js";const y=(t,i)=>{let o;return(...a)=>{o&&clearTimeout(o),o=setTimeout(()=>t(...a),i)}},x=()=>`CUST-${Math.floor(1e3+Math.random()*9e3)}`,_=({customer:t,onChange:i,userId:o})=>{const[a,h]=u.useState([]),[b,r]=u.useState(!1),f=async s=>{if(!o||!s)return;const m=C(j,"businesses",o,"customers"),l=await v(m),n=[],N=s.toLowerCase();l.forEach(p=>{const d=p.data();(d.name&&d.name.toLowerCase().includes(N)||d.phone&&d.phone.includes(s))&&n.push({id:p.id,...d})}),h(n),r(!0)},g=u.useCallback(y(s=>f(s),300),[]),c=async s=>{const{name:m,value:l}=s.target;m==="name"&&(l.length>1?g(l):(h([]),r(!1))),i(n=>({...n,[m]:l,custId:n?.custId||x()}))},w=s=>{h([]),r(!1),i({...s,custId:s?.custId||x()})};return e.jsx("div",{className:"p-4 md:p-6 rounded-xl mb-6 space-y-4 bg-white/10 backdrop-blur-xl border border-white/10 shadow-[0_8px_40px_rgba(0,0,0,0.35)] text-white",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-6",children:[e.jsxs("label",{className:"flex flex-col space-y-1 relative",htmlFor:"name",children:[e.jsx("span",{className:"mb-1 font-medium text-white/80",children:"Customer Name"}),e.jsx("input",{id:"name",type:"text",name:"name",value:t?.name||"",onChange:c,placeholder:"Enter customer name",className:"p-2 rounded bg-white/10 border border-white/20 text-white placeholder-white/60 focus:outline-none focus:ring-2 focus:ring-emerald-400/50",autoComplete:"off",onBlur:()=>setTimeout(()=>r(!1),150),onFocus:()=>{a.length>0&&r(!0)}}),b&&a.length>0&&e.jsxs("div",{className:"mb-2 p-2 rounded bg-white/5 backdrop-blur-xl border border-white/10",children:[e.jsx("div",{className:"font-medium mb-1",children:"Select Customer"}),e.jsx("ul",{className:"border border-white/10 rounded bg-[#0B0F14]/70 backdrop-blur-xl shadow-[0_8px_30px_rgba(0,0,0,0.35)] max-h-40 overflow-y-auto z-10 w-full",children:a.map(s=>e.jsxs("li",{onClick:()=>w(s),className:"p-2 hover:bg-white/10 cursor-pointer border-b border-white/10 flex flex-col",children:[e.jsxs("div",{className:"font-semibold text-base",children:["üë§ ",s.name," ",e.jsxs("span",{className:"text-xs text-white/60",children:["‚Ä¢ ",s.custId]})]}),e.jsxs("div",{className:"text-sm text-white/70 mt-1",children:["üìû ",s.phone||"No Phone"," ¬†¬† üìç ",s.address||"No Address"]})]},s.custId||s.id))})]})]}),e.jsxs("label",{className:"flex flex-col space-y-1",htmlFor:"phone",children:[e.jsx("span",{className:"mb-1 font-medium text-white/80",children:"Phone Number"}),e.jsx("input",{id:"phone",type:"tel",name:"phone",value:t?.phone||"",onChange:c,placeholder:"Enter phone number",className:"p-2 rounded bg-white/10 border border-white/20 text-white placeholder-white/60 focus:outline-none focus:ring-2 focus:ring-emerald-400/50"})]}),e.jsxs("label",{className:"flex flex-col space-y-1",htmlFor:"email",children:[e.jsx("span",{className:"mb-1 font-medium text-white/80",children:"Email Address"}),e.jsx("input",{id:"email",type:"email",name:"email",value:t?.email||"",onChange:c,placeholder:"Enter email address",className:"p-2 rounded bg-white/10 border border-white/20 text-white placeholder-white/60 focus:outline-none focus:ring-2 focus:ring-emerald-400/50"})]}),e.jsxs("label",{className:"flex flex-col space-y-1",htmlFor:"address",children:[e.jsx("span",{className:"mb-1 font-medium text-white/80",children:"Customer Address"}),e.jsx("input",{id:"address",type:"text",name:"address",value:t?.address||"",onChange:c,placeholder:"Enter customer address",className:"p-2 rounded bg-white/10 border border-white/20 text-white placeholder-white/60 focus:outline-none focus:ring-2 focus:ring-emerald-400/50"})]})]})})};export{_ as C};
