import{l as K,d as g,y,j as e}from"./index-DRC3F7i0.js";import{r as i}from"./router-BPBaD_i0.js";import{c as v,p as R,d as q,e as W,q as L,o as $,g as le,l as ie,s as de}from"./firebase-DWi1MSv1.js";import{a as ce,T as _,I as oe,n as xe,U as me,R as F,p as G,K as ue,C as he}from"./index-CprmGC-M.js";import{O as pe}from"./OrderDetailModal-BXc_IbAw.js";import{D as be}from"./DistributorOrderRequestForm-0fxn6v9l.js";import"./orderStatus-BwkCpksU.js";import{m as h}from"./proxy-BgUy8BPw.js";import{A as T}from"./index-DSciU07p.js";import"./vendor-Ckhrjn13.js";import"./index.esm-Bux_mLJ0.js";import"./calcProforma-Ep9qGXtN.js";import"./pricing-SUVGnFgL.js";const Re=()=>{const[w,O]=i.useState("connected"),[H,J]=i.useState([]),[C,X]=i.useState([]),[U,Z]=i.useState(""),[ee,I]=i.useState(!0),[x,f]=i.useState(null),[te,j]=i.useState(!1),[Q,S]=i.useState(null),[se,k]=i.useState(!1),[V,ne]=i.useState([]),[ae,P]=i.useState(!1),[B,ge]=i.useState(null),[D,we]=i.useState([]),[l,fe]=i.useState(!1);i.useEffect(()=>{const t=K.currentUser?.uid;if(!t)return;I(!0);const s=v(g,`businesses/${t}/connectedProductOwners`),a=R(L(s,$("connectedAt","desc")),async r=>{const d=[];console.log(`[ProductOwnerConnection] Found ${r.docs.length} product owner connections`);for(const c of r.docs){const u=c.data(),p=u.productOwnerId||c.id;console.log(`[ProductOwnerConnection] Processing connection: ${p}`,u);try{const E=q(g,"businesses",p),Y=await W(E);if(Y.exists()){const z=Y.data();console.log(`[ProductOwnerConnection] Fetched business data for ${p}:`,z),d.push({id:c.id,productOwnerId:p,...z,...u,connectionStatus:u.status||"connected",connectedAt:u.connectedAt})}else console.warn(`[ProductOwnerConnection] Business document not found for ${p}, using connection data only`),d.push({id:c.id,productOwnerId:p,...u,connectionStatus:u.status||"connected"})}catch(E){console.error(`[ProductOwnerConnection] Error fetching product owner details for ${p}:`,E),d.push({id:c.id,productOwnerId:p,...u,connectionStatus:u.status||"connected"})}}console.log("[ProductOwnerConnection] Final owners list:",d),J(d),I(!1)},r=>{console.error("[ProductOwnerConnection] Error fetching product owners:",r),console.error("[ProductOwnerConnection] Error code:",r.code),console.error("[ProductOwnerConnection] Error message:",r.message),y.error("Failed to load product owners. Please check console for details."),I(!1)}),m=v(g,`businesses/${t}/productOwnerOrders`),b=R(L(m,$("createdAt","desc")),r=>{X(r.docs.map(d=>({id:d.id,...d.data()})))},r=>{console.error("Error fetching product owner orders:",r)}),o=v(g,`businesses/${t}/sentOrdersToProductOwners`),n=R(L(o,$("createdAt","desc")),r=>{ne(r.docs.map(d=>({id:d.id,...d.data()})))},r=>{console.error("Error fetching sent order requests:",r)});return()=>{a(),b(),n()}},[]);const M=H.filter(t=>{const s=U.toLowerCase();return t.businessName?.toLowerCase().includes(s)||t.productOwnerName?.toLowerCase().includes(s)||t.productOwnerEmail?.toLowerCase().includes(s)||t.productOwnerId?.toLowerCase().includes(s)}),re=t=>{switch(t){case"connected":return"bg-emerald-400/20 text-emerald-300 border-emerald-400/30";case"pending":return"bg-yellow-400/20 text-yellow-300 border-yellow-400/30";case"inactive":return"bg-gray-400/20 text-gray-300 border-gray-400/30";default:return"bg-blue-400/20 text-blue-300 border-blue-400/30"}},A=t=>{switch(t){case"assigned":return"bg-blue-400/20 text-blue-300";case"accepted":return"bg-emerald-400/20 text-emerald-300";case"in_transit":return"bg-orange-400/20 text-orange-300";case"delivered":return"bg-green-400/20 text-green-300";case"cancelled":return"bg-red-400/20 text-red-300";default:return"bg-gray-400/20 text-gray-300"}},N=t=>t?t.toDate?t.toDate().toLocaleDateString():new Date(t).toLocaleDateString():"N/A";return e.jsxs(h.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-6 text-white p-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Product Owner Connections"}),e.jsx("p",{className:"text-white/70 text-sm mt-1",children:"Manage your product owner network and view assigned orders"})]}),e.jsx("button",{onClick:async()=>{const t=K.currentUser?.uid;if(t){y.info("Refreshing connections...");try{const s=v(g,`businesses/${t}/connectedProductOwners`),a=await le(s);if(a.empty){y.info(`No product owner connections found. Your FLYP ID: ${t}. Share this with product owners to connect.`);return}let m=0;for(const b of a.docs){const o=b.data(),n=o.productOwnerId||b.id;try{const r=q(g,"businesses",n),d=await W(r);if(d.exists()){const c=d.data();await ie(q(g,`businesses/${t}/connectedProductOwners/${n}`),{productOwnerId:n,productOwnerName:c.businessName||o.productOwnerName||"Product Owner",productOwnerEmail:c.email||o.productOwnerEmail||"",productOwnerPhone:c.phone||o.productOwnerPhone||"",productOwnerAddress:c.address||o.productOwnerAddress||"",productOwnerCity:c.city||o.productOwnerCity||"",productOwnerState:c.state||o.productOwnerState||"",status:"connected",updatedAt:de()},{merge:!0}),m++}}catch(r){console.warn(`Error updating product owner ${n}:`,r)}}m>0?y.success(`Refreshed ${m} connection(s)!`):y.info("All connections are up to date.")}catch(s){console.error("Error refreshing connections:",s),y.error("Failed to refresh connections: "+(s.message||"Unknown error"))}}},className:"px-4 py-2 bg-blue-500 hover:bg-blue-600 rounded-lg text-white text-sm font-medium transition flex items-center gap-2",children:"ðŸ”„ Refresh Connections"})]}),e.jsx("div",{className:"flex gap-2 border-b border-white/10",children:[{id:"connected",label:"Connected Product Owners",icon:e.jsx(ce,{})},{id:"orders",label:"Assigned Orders",icon:e.jsx(_,{})},{id:"sentRequests",label:"Sent Order Requests",icon:e.jsx(_,{})},{id:"tracking",label:"Track Orders",icon:e.jsx(oe,{})}].map(t=>e.jsxs("button",{onClick:()=>O(t.id),className:`px-4 py-2 flex items-center gap-2 transition ${w===t.id?"border-b-2 border-emerald-400 text-emerald-300":"text-white/70 hover:text-white"}`,children:[t.icon," ",t.label]},t.id))}),w==="connected"&&e.jsxs(h.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(xe,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-white/50"}),e.jsx("input",{type:"text",placeholder:"Search product owners...",value:U,onChange:t=>Z(t.target.value),className:"w-full pl-10 pr-4 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-emerald-400/50"})]}),ee?e.jsx("div",{className:"text-center py-12 text-white/50",children:"Loading product owners..."}):M.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:M.map(t=>e.jsxs(h.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"rounded-xl border border-white/10 bg-white/5 backdrop-blur-xl p-4 hover:bg-white/10 transition",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-lg",children:t.businessName||t.productOwnerName||"Unnamed"}),e.jsx("p",{className:"text-sm text-white/70",children:t.ownerName||t.productOwnerName})]}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs border ${re(t.connectionStatus)}`,children:t.connectionStatus})]}),e.jsxs("div",{className:"space-y-2 text-sm text-white/70 mb-4",children:[t.productOwnerEmail&&e.jsxs("p",{children:[e.jsx("span",{className:"text-white/50",children:"Email:"})," ",t.productOwnerEmail]}),t.connectedAt&&e.jsxs("p",{children:[e.jsx("span",{className:"text-white/50",children:"Connected:"})," ",N(t.connectedAt)]}),e.jsxs("p",{className:"text-xs text-emerald-400 font-mono",children:[e.jsx("span",{className:"text-white/50",children:"FLYP ID:"})," ",t.productOwnerId||t.id]})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("button",{onClick:()=>{f(t),k(!0)},className:"w-full px-3 py-2 bg-emerald-500 hover:bg-emerald-600 rounded-lg text-white text-sm font-medium transition",children:"Send Order Request"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>{f(t),O("orders")},className:"flex-1 px-3 py-2 bg-emerald-500/20 hover:bg-emerald-500/30 border border-emerald-400/30 rounded-lg text-emerald-300 text-sm transition",children:"View Orders"}),e.jsx("button",{onClick:()=>{f(t),j(!0)},className:"px-3 py-2 bg-blue-500/20 hover:bg-blue-500/30 border border-blue-400/30 rounded-lg text-blue-300 text-sm transition",children:e.jsx(me,{})})]})]})]},t.id))}):e.jsx("div",{className:"text-center py-12 text-white/50",children:"No product owners found. Product owners can connect with you using your FLYP ID."})]}),w==="orders"&&e.jsxs(h.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-4",children:[x&&e.jsx("div",{className:"mb-4 p-3 rounded-lg bg-blue-500/10 border border-blue-400/20",children:e.jsxs("p",{className:"text-sm text-white/80",children:["Showing orders from: ",e.jsx("span",{className:"font-semibold",children:x.businessName||x.productOwnerName}),e.jsx("button",{onClick:()=>f(null),className:"ml-2 text-xs text-blue-300 hover:text-blue-200",children:"Clear filter"})]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full border-collapse",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-white/10",children:[e.jsx("th",{className:"text-left p-3 text-sm font-semibold text-white/80",children:"Order ID"}),e.jsx("th",{className:"text-left p-3 text-sm font-semibold text-white/80",children:"Product"}),e.jsx("th",{className:"text-left p-3 text-sm font-semibold text-white/80",children:"Product Owner"}),e.jsx("th",{className:"text-left p-3 text-sm font-semibold text-white/80",children:"Quantity"}),e.jsx("th",{className:"text-left p-3 text-sm font-semibold text-white/80",children:"Priority"}),e.jsx("th",{className:"text-left p-3 text-sm font-semibold text-white/80",children:"Status"}),e.jsx("th",{className:"text-left p-3 text-sm font-semibold text-white/80",children:"Assigned Date"}),e.jsx("th",{className:"text-left p-3 text-sm font-semibold text-white/80",children:"Actions"})]})}),e.jsx("tbody",{children:C.filter(t=>x?t.productOwnerId===x.productOwnerId:!0).length>0?C.filter(t=>x?t.productOwnerId===x.productOwnerId:!0).map(t=>e.jsxs("tr",{className:"border-b border-white/5 hover:bg-white/5 transition",children:[e.jsxs("td",{className:"p-3 text-sm font-mono",children:["#",t.id.slice(0,8)]}),e.jsx("td",{className:"p-3 text-sm",children:t.items&&t.items.length>0?e.jsxs("div",{className:"space-y-1",children:[e.jsxs("span",{className:"font-medium",children:[t.items.length," item(s)"]}),e.jsxs("div",{className:"text-xs text-white/60",children:[t.items.slice(0,2).map((s,a)=>e.jsxs("div",{children:[s.productName||"Unnamed Product"," (Ã—",s.quantity||1,")"]},a)),t.items.length>2&&e.jsxs("div",{children:["+",t.items.length-2," more..."]})]})]}):e.jsx("span",{className:"text-white/50",children:"No items"})}),e.jsx("td",{className:"p-3 text-sm",children:t.productOwnerName||t.productOwnerName||"N/A"}),e.jsx("td",{className:"p-3 text-sm",children:t.items&&t.items.length>0?t.items.reduce((s,a)=>s+(parseInt(a.quantity)||0),0):t.quantity||0}),e.jsx("td",{className:"p-3 text-sm",children:e.jsx("span",{className:`px-2 py-1 rounded text-xs ${t.priority==="urgent"?"bg-red-500/20 text-red-300":t.priority==="high"?"bg-orange-500/20 text-orange-300":t.priority==="low"?"bg-gray-500/20 text-gray-300":"bg-blue-500/20 text-blue-300"}`,children:t.priority||"normal"})}),e.jsx("td",{className:"p-3",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${A(t.status)}`,children:t.status||"assigned"})}),e.jsx("td",{className:"p-3 text-sm text-white/70",children:t.assignedAt?N(t.assignedAt):"N/A"}),e.jsx("td",{className:"p-3",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>{S(t),j(!0)},className:"px-3 py-1.5 bg-emerald-500/20 hover:bg-emerald-500/30 border border-emerald-400/30 rounded-lg text-emerald-300 text-sm font-medium transition-all hover:scale-105",children:"View"}),(t.status==="DELIVERED"||t.status==="Delivered"||t.statusCode==="DELIVERED")&&!t.inventorySynced&&e.jsxs("button",{onClick:()=>handleAddToInventoryClick(t),disabled:l,className:"px-3 py-1.5 bg-blue-500/20 hover:bg-blue-500/30 border border-blue-400/30 rounded-lg text-blue-300 text-sm font-medium transition-all hover:scale-105 flex items-center gap-1 disabled:opacity-50",title:"Add to Inventory",children:[e.jsx(F,{className:"text-xs"})," Inventory"]}),(t.status==="DELIVERED"||t.status==="Delivered"||t.statusCode==="DELIVERED")&&t.inventorySynced&&e.jsxs("span",{className:"px-3 py-1.5 bg-emerald-500/20 border border-emerald-400/30 rounded-lg text-emerald-300 text-sm font-medium flex items-center gap-1",children:[e.jsx(G,{className:"text-xs"})," Added"]})]})})]},t.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:8,className:"p-8 text-center text-white/50",children:"No orders assigned yet"})})})]})})]}),w==="sentRequests"&&e.jsx(h.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-4",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full border-collapse",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-white/10",children:[e.jsx("th",{className:"p-3 text-left text-sm font-semibold text-white/70",children:"Order ID"}),e.jsx("th",{className:"p-3 text-left text-sm font-semibold text-white/70",children:"Product Owner"}),e.jsx("th",{className:"p-3 text-left text-sm font-semibold text-white/70",children:"Items"}),e.jsx("th",{className:"p-3 text-left text-sm font-semibold text-white/70",children:"Total"}),e.jsx("th",{className:"p-3 text-left text-sm font-semibold text-white/70",children:"Payment"}),e.jsx("th",{className:"p-3 text-left text-sm font-semibold text-white/70",children:"Status"}),e.jsx("th",{className:"p-3 text-left text-sm font-semibold text-white/70",children:"Requested"}),e.jsx("th",{className:"p-3 text-left text-sm font-semibold text-white/70",children:"Actions"})]})}),e.jsx("tbody",{children:V.length>0?V.map(t=>e.jsxs("tr",{className:"border-b border-white/5 hover:bg-white/5 transition",children:[e.jsxs("td",{className:"p-3 text-sm font-mono",children:["#",t.id.slice(0,8)]}),e.jsx("td",{className:"p-3 text-sm",children:t.productOwnerName||"N/A"}),e.jsx("td",{className:"p-3 text-sm",children:t.items&&t.items.length>0?e.jsxs("div",{className:"space-y-1",children:[e.jsxs("span",{className:"font-medium",children:[t.items.length," item(s)"]}),e.jsxs("div",{className:"text-xs text-white/60",children:[t.items.slice(0,2).map((s,a)=>e.jsxs("div",{children:[s.productName||"Unnamed Product"," (Ã—",s.quantity||1,")"]},a)),t.items.length>2&&e.jsxs("div",{children:["+",t.items.length-2," more..."]})]})]}):e.jsx("span",{className:"text-white/50",children:"No items"})}),e.jsxs("td",{className:"p-3 text-sm font-semibold text-emerald-400",children:["â‚¹",(t.grandTotal||t.itemsSubTotal||0).toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})]}),e.jsx("td",{className:"p-3 text-sm",children:t.paymentModeLabel||t.paymentMode||"N/A"}),e.jsx("td",{className:"p-3",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${A(t.status)}`,children:t.status||"requested"})}),e.jsx("td",{className:"p-3 text-sm text-white/70",children:t.createdAt?N(t.createdAt):"N/A"}),e.jsx("td",{className:"p-3",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>{S(t),j(!0)},className:"px-3 py-1.5 bg-emerald-500/20 hover:bg-emerald-500/30 border border-emerald-400/30 rounded-lg text-emerald-300 text-sm font-medium transition-all hover:scale-105",children:"View"}),(t.status==="DELIVERED"||t.status==="Delivered"||t.statusCode==="DELIVERED")&&!t.inventorySynced&&e.jsxs("button",{onClick:()=>handleAddToInventoryClick(t),disabled:l,className:"px-3 py-1.5 bg-blue-500/20 hover:bg-blue-500/30 border border-blue-400/30 rounded-lg text-blue-300 text-sm font-medium transition-all hover:scale-105 flex items-center gap-1 disabled:opacity-50",title:"Add to Inventory",children:[e.jsx(F,{className:"text-xs"})," Inventory"]}),(t.status==="DELIVERED"||t.status==="Delivered"||t.statusCode==="DELIVERED")&&t.inventorySynced&&e.jsxs("span",{className:"px-3 py-1.5 bg-emerald-500/20 border border-emerald-400/30 rounded-lg text-emerald-300 text-sm font-medium flex items-center gap-1",children:[e.jsx(G,{className:"text-xs"})," Added"]})]})})]},t.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:8,className:"p-8 text-center text-white/50",children:"No order requests sent yet"})})})]})})}),w==="tracking"&&e.jsx(h.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-4",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:C.map(t=>e.jsxs(h.div,{className:"rounded-xl border border-white/10 bg-white/5 backdrop-blur-xl p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("h4",{className:"font-semibold",children:["Order #",t.id.slice(0,8)]}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${A(t.status)}`,children:t.status})]}),e.jsxs("div",{className:"space-y-2 text-sm text-white/70",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-white/50",children:"Items:"}),t.items&&t.items.length>0?e.jsxs("div",{className:"mt-1 space-y-1",children:[t.items.slice(0,2).map((s,a)=>e.jsxs("div",{className:"text-sm",children:[s.productName||"Unnamed Product"," (Ã—",s.quantity||1,")"]},a)),t.items.length>2&&e.jsxs("div",{className:"text-xs text-white/50",children:["+",t.items.length-2," more..."]})]}):e.jsx("span",{className:"text-white ml-2",children:"No items"})]}),e.jsxs("p",{children:[e.jsx("span",{className:"text-white/50",children:"Product Owner:"})," ",t.productOwnerName||"N/A"]}),e.jsxs("p",{children:[e.jsx("span",{className:"text-white/50",children:"Total Quantity:"})," ",t.items&&t.items.length>0?t.items.reduce((s,a)=>s+(parseInt(a.quantity)||0),0):t.quantity||0]})]}),e.jsx("div",{className:"mt-4 pt-4 border-t border-white/10",children:e.jsxs("div",{className:"flex items-center gap-2 text-xs text-white/50",children:[e.jsx(ue,{})," ",t.assignedAt?N(t.assignedAt):"N/A"]})})]},t.id))})}),e.jsx(T,{children:se&&x&&e.jsx(be,{productOwner:x,onClose:()=>{k(!1),f(null)},onSuccess:()=>{k(!1),f(null),O("sentRequests")}})}),e.jsx(T,{children:te&&Q&&e.jsx(pe,{order:Q,onClose:()=>{j(!1),S(null)},readOnly:!0,isDistributorOrderRequest:w==="sentRequests",onUpdate:()=>{}})}),e.jsx(T,{children:ae&&B&&e.jsx(h.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/90 backdrop-blur-sm z-[60] flex items-center justify-center p-4",onClick:()=>!l&&P(!1),children:e.jsxs(h.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},onClick:t=>t.stopPropagation(),className:"bg-slate-900 rounded-xl border border-white/10 w-full max-w-4xl max-h-[90vh] overflow-hidden shadow-2xl flex flex-col",children:[e.jsxs("div",{className:"sticky top-0 bg-gradient-to-r from-slate-900/98 via-slate-800/95 to-slate-900/98 backdrop-blur-xl border-b border-white/10 p-6 flex items-center justify-between z-10",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-white",children:"Add Items to Inventory"}),e.jsxs("p",{className:"text-white/60 text-sm mt-1",children:["Order ID: #",B.id?.slice(0,8)]}),e.jsx("p",{className:"text-white/60 text-sm",children:"Review and edit items before adding to inventory"})]}),e.jsx("button",{onClick:()=>P(!1),disabled:l,className:"p-2 rounded-lg hover:bg-white/10 text-white/70 hover:text-white transition-all disabled:opacity-50",children:e.jsx(he,{className:"text-lg"})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6 space-y-4 custom-scrollbar",children:D.map((t,s)=>{const a=t.existingProduct,m=a?t.existingProduct.quantity:0,b=Number(t.finalQuantity||t.quantity||0),o=t.action==="update"?m+b:b;return e.jsxs("div",{className:`bg-white/5 border rounded-xl p-5 ${a&&t.action==="update"?"border-emerald-400/30 bg-emerald-500/5":"border-white/10"}`,children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-1",children:t.productName}),a&&e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx("span",{className:"px-2 py-1 bg-emerald-500/20 text-emerald-300 text-xs rounded border border-emerald-400/30",children:"Exists in Inventory"}),e.jsxs("span",{className:"text-white/50 text-xs",children:["Current Qty: ",m," ",t.unit]})]})]}),e.jsx("div",{className:"flex gap-2",children:a&&e.jsx("button",{onClick:()=>handleInventoryItemChange(s,"action",t.action==="update"?"new":"update"),disabled:l,className:`px-3 py-1.5 rounded-lg text-xs font-medium transition ${t.action==="update"?"bg-emerald-500/20 text-emerald-300 border border-emerald-400/30":"bg-blue-500/20 text-blue-300 border border-blue-400/30"} disabled:opacity-50`,children:t.action==="update"?"Update Existing":"Add as New"})})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs text-white/50 mb-1",children:["Quantity ",t.action==="update"&&`(Will add to ${m})`]}),e.jsx("input",{type:"number",value:t.finalQuantity||t.quantity||0,onChange:n=>handleInventoryItemChange(s,"finalQuantity",n.target.value),disabled:l,min:"0",className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white text-sm disabled:opacity-50"}),t.action==="update"&&e.jsxs("p",{className:"text-xs text-emerald-400 mt-1",children:["Total: ",o," ",t.unit]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-white/50 mb-1",children:"Cost Price (â‚¹)"}),e.jsx("input",{type:"number",value:t.finalCostPrice||t.costPrice||0,onChange:n=>handleInventoryItemChange(s,"finalCostPrice",n.target.value),disabled:l,min:"0",step:"0.01",className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white text-sm disabled:opacity-50"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-white/50 mb-1",children:"Selling Price (â‚¹)"}),e.jsx("input",{type:"number",value:t.finalSellingPrice||t.sellingPrice||0,onChange:n=>handleInventoryItemChange(s,"finalSellingPrice",n.target.value),disabled:l,min:"0",step:"0.01",className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white text-sm disabled:opacity-50"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-white/50 mb-1",children:"SKU"}),e.jsx("input",{type:"text",value:t.finalSku||t.sku||"",onChange:n=>handleInventoryItemChange(s,"finalSku",n.target.value),disabled:l||t.action==="update",className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white text-sm disabled:opacity-50",placeholder:"Auto-generated"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-white/50 mb-1",children:"Brand"}),e.jsx("input",{type:"text",value:t.finalBrand||t.brand||"",onChange:n=>handleInventoryItemChange(s,"finalBrand",n.target.value),disabled:l,className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white text-sm disabled:opacity-50"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-white/50 mb-1",children:"Category"}),e.jsx("input",{type:"text",value:t.finalCategory||t.category||"",onChange:n=>handleInventoryItemChange(s,"finalCategory",n.target.value),disabled:l,className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white text-sm disabled:opacity-50"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-white/50 mb-1",children:"Unit"}),e.jsx("input",{type:"text",value:t.finalUnit||t.unit||"",onChange:n=>handleInventoryItemChange(s,"finalUnit",n.target.value),disabled:l,className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white text-sm disabled:opacity-50"})]})]})]},s)})}),e.jsxs("div",{className:"sticky bottom-0 bg-gradient-to-r from-slate-900/98 via-slate-800/95 to-slate-900/98 backdrop-blur-xl border-t border-white/10 p-6 flex items-center justify-between",children:[e.jsx("button",{onClick:()=>P(!1),disabled:l,className:"px-4 py-2 bg-white/10 hover:bg-white/20 rounded-lg text-white transition disabled:opacity-50",children:"Cancel"}),e.jsxs("button",{onClick:handleAddToInventory,disabled:l||!D||D.length===0,className:"px-6 py-2 bg-emerald-500 hover:bg-emerald-600 disabled:bg-emerald-500/50 disabled:cursor-not-allowed rounded-lg text-white font-semibold transition flex items-center gap-2",children:[e.jsx(F,{})," ",l?"Adding...":"Add to Inventory"]})]})]})})}),e.jsx("style",{children:`
        .custom-scrollbar::-webkit-scrollbar {
          width: 8px;
        }
        .custom-scrollbar::-webkit-scrollbar-track {
          background: rgba(255, 255, 255, 0.05);
          border-radius: 4px;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb {
          background: rgba(16, 185, 129, 0.3);
          border-radius: 4px;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb:hover {
          background: rgba(16, 185, 129, 0.5);
        }
      `})]})};export{Re as default};
