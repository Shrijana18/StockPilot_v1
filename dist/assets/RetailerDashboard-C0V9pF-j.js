import{j as i,d as J,l as xe,y as Vt,r as Aw,s as Dw,u as Tw,g as Iw,o as zn,N as Oe,_ as Mw}from"./index-DRC3F7i0.js";import{r as x,R as pe,u as Z0,c as Ss,f as Ew}from"./router-BPBaD_i0.js";import{A as Ue}from"./index-DSciU07p.js";import{m as U}from"./proxy-BgUy8BPw.js";import{P as _w}from"./POSBilling-BOIPLYLF.js";import{i as su,c as ue,g as ye,l as Kt,d as ve,b as Rr,a as df,u as lt,q as _e,w as gt,o as $t,p as ht,v as Tn,ab as Rw,n as J0,s as Ke,t as Ra,e as Yt,f as $w}from"./firebase-DWi1MSv1.js";import{C as Lw}from"./CustomerForm-oVhzeonX.js";import Fw from"./Billing-C0qzZp_W.js";import Bw from"./ProfileSettings-b0gwSSn1.js";import{E as ff,a as fo,b as dr,_ as eg,c as qw,e as Uw}from"./pdf-DQxUCnop.js";import{O as ba}from"./orderStatus-BwkCpksU.js";import{f as ou,C as lu,B as cu,a as uu,b as du,d as fu,e as hu}from"./index-o1kP7bB5.js";import zw from"./ManualEntryForm-DXfm1qN8.js";import Vw from"./OCRUploadForm-C4mXc3jQ.js";import Ww from"./AddInventoryAI-zxizO1Ls.js";import Hw from"./ViewInventory-xVU3Snek.js";import{h as tg}from"./BillingSettings-DR-owPbP.js";import{g as br,r as rg}from"./vendor-Ckhrjn13.js";import{r as Kw,u as Yw}from"./useTranslation-C_4YkXWs.js";import{r as Gw,b as Qw,_ as Xw,c as Zw,p as he,q as ng,k as Jw,n as e1,l as hf}from"./stockManagement-G1X58IbZ.js";import{_ as ga,t as t1}from"./defineProperty-D3rvHmj4.js";import{_ as ge}from"./extends-CF3RwP-h.js";import{c as mf}from"./proformaDefaults-BAnk_cr8.js";import r1 from"./ManageEmployee-Dj0cKIKg.js";import{u as pf,k as Tr,A as mu,K as ks,T as pu,am as Na,o as Oi,aJ as n1,aK as a1,p as Ci,ao as ho,a2 as jn,ak as Nn,aF as gf,a as xf,al as vf,aS as i1,F as ta,X as ra,af as s1,ag as o1,g as l1,ah as c1,h as u1,ai as d1,n as f1,r as bf,C as h1,ac as m1}from"./index-CprmGC-M.js";import{b as p1}from"./aiForecastingEngine-DtSDBlba.js";import g1 from"./MarketplaceSetup-SxpMsX3o.js";import x1 from"./MarketplaceProducts-D3UBa6Kh.js";import v1 from"./CustomerOrders-DH_mm2MX.js";import"./index.esm-Bux_mLJ0.js";import"./index-aK8Jn4kw.js";import"./FileSaver.min-DVuNBBJs.js";import"./index-CbpqHhv-.js";import"./bidi-DLACMwmw.js";import"./WhatsAppConnection-C8P9Ymrj.js";import"./whatsappConfig-B767RKqS.js";import"./LanguageSwitcher-BHE27wEu.js";import"./MagicScanDisplay-BEI3JqVX.js";import"./pricing-SUVGnFgL.js";import"./logInventoryChange-kGfLyhaN.js";import"./looseProductUtils-DQPoVx_a.js";import"./AdvancedBrandInputForm-SuxBeOfL.js";import"./fetchGoogleImages-y1ah5QvM.js";import"./RestockOrderHistory-BifXGS1-.js";import"./index-BrhajXHK.js";import"./dayjs.min-BE7Gq_ss.js";import"./marketplaceOffers-DYmwRj2h.js";import"./retailerMarketplaceService-JKOUhufm.js";import"./esm-LCaBFwtY.js";import"./deliveryEmployeeService-DSIf8GOm.js";const b1=1100;function y1({duration:e=.5,volume:t=.08}={}){try{const r=window.AudioContext||window.webkitAudioContext;if(!r)return;const n=new r,a=n.createOscillator(),s=n.createGain(),o=n.createBiquadFilter();o.type="lowpass",o.frequency.value=1600,a.type="triangle",a.frequency.setValueAtTime(180,n.currentTime),a.frequency.exponentialRampToValueAtTime(30,n.currentTime+e),s.gain.value=t,s.gain.exponentialRampToValueAtTime(1e-4,n.currentTime+e),a.connect(o),o.connect(s),s.connect(n.destination),a.start(),a.stop(n.currentTime+e),a.onended=()=>n.close?.()}catch{}}const w1="mode_sfx";function j1({triggerKey:e,mode:t,onDone:r}){const[n,a]=x.useState(!1),s=typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-reduced-motion: reduce)").matches;x.useEffect(()=>{if(e==null)return;a(!0);try{const u=window.localStorage?.getItem(w1);!s&&u!=="off"&&y1({duration:.55,volume:.09})}catch{}const d=setTimeout(()=>{a(!1),r?.()},s?400:b1);return()=>clearTimeout(d)},[e]);const o=t==="pos",l=o?"rgba(16,185,129,0.55)":"rgba(124,58,237,0.55)",c=o?"rgba(34,211,238,0.55)":"rgba(236,72,153,0.55)";return i.jsx(Ue,{mode:"wait",children:n&&i.jsxs(U.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.18},className:"fixed inset-0 pointer-events-none z-[130]",style:{willChange:"opacity, transform",transform:"translateZ(0)",backfaceVisibility:"hidden"},children:[i.jsx("div",{className:"absolute inset-0 bg-black/45"}),i.jsx(U.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.4},className:"absolute inset-0",style:{background:"radial-gradient(80% 60% at 50% 50%, rgba(0,0,0,0) 40%, rgba(0,0,0,0.35) 100%)",pointerEvents:"none"}}),i.jsx(U.div,{initial:{scale:.78,opacity:0},animate:{scale:1.1,opacity:1},exit:{scale:1.16,opacity:0},transition:{duration:s?.3:.95,ease:"easeOut"},className:"absolute inset-0",style:{background:`radial-gradient(1200px 480px at 50% -5%, ${c}, transparent 70%),
                           radial-gradient(900px 380px at 50% 105%, ${l}, transparent 70%)`,mixBlendMode:"screen",willChange:"transform, opacity",transform:"translateZ(0)"}}),i.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:i.jsx(N1,{mode:t,reduceMotion:s})}),i.jsx(P1,{colorA:l,colorB:c}),!s&&i.jsx(O1,{colorA:l,colorB:c}),!s&&i.jsx(E1,{colorA:l,colorB:c}),!s&&i.jsx(R1,{}),!s&&i.jsxs(i.Fragment,{children:[i.jsx(C1,{colorA:l,colorB:c}),i.jsx(A1,{mode:t}),i.jsx(T1,{mode:t}),i.jsx(I1,{}),i.jsx(M1,{mode:t}),i.jsx(_1,{})]})]},`cin-${e}`)})}function N1({mode:e,reduceMotion:t}){const r=e==="pos",n=r?"#34d399":"#a78bfa",a=r?"#22d3ee":"#f472b6";return i.jsxs("div",{className:"relative",style:{width:260,height:260},children:[i.jsx(U.div,{initial:{scale:.82,rotate:0,opacity:.9},animate:{scale:1.06,rotate:t?0:220,opacity:1},exit:{scale:1.12,opacity:0},transition:{duration:t?.3:.95,ease:"easeOut"},className:"absolute inset-0 rounded-full",style:{boxShadow:`0 0 0 2px ${n} inset, 0 0 80px ${a}`,filter:"blur(0.2px)",willChange:"transform, opacity",transform:"translateZ(0)"}}),!t&&i.jsxs(i.Fragment,{children:[i.jsx(mo,{radius:95,size:10,color:n,delay:0}),i.jsx(mo,{radius:95,size:8,color:a,delay:.08}),i.jsx(mo,{radius:70,size:7,color:a,reverse:!0,delay:.12})]}),i.jsx(U.div,{initial:{scale:.86,opacity:0},animate:{scale:1,opacity:1},exit:{scale:1.05,opacity:0},transition:{duration:t?.25:.6,ease:"easeOut",delay:t?0:.1},className:"absolute inset-0 flex items-center justify-center",style:{willChange:"transform, opacity",transform:"translateZ(0)"},children:i.jsx(U.div,{initial:{scale:.82,rotate:-8},animate:{scale:1,rotate:0},exit:{scale:1.08,rotate:6},transition:{duration:t?.2:.5,ease:"easeOut"},children:r?i.jsx(k1,{}):i.jsx(S1,{})},r?"pos":"dash")})]})}function mo({radius:e=80,size:t=8,color:r="#22d3ee",reverse:n=!1,delay:a=0}){return i.jsx(U.div,{initial:{rotate:0},animate:{rotate:n?-360:360},transition:{repeat:0,duration:1.05,ease:"linear",delay:a},className:"absolute inset-0",style:{borderRadius:"50%",border:"1px solid rgba(255,255,255,0.08)",willChange:"transform, opacity",transform:"translateZ(0)"},children:i.jsx("div",{className:"absolute rounded-full",style:{width:t,height:t,background:r,boxShadow:`0 0 16px ${r}`,left:"50%",top:"50%",transform:`rotate(0deg) translate(${e}px)`}})})}function S1(){return i.jsxs("svg",{width:"120",height:"120",viewBox:"0 0 120 120",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[i.jsx("rect",{x:"14",y:"16",width:"40",height:"32",rx:"8",fill:"#a78bfa",stroke:"white",strokeOpacity:"0.35",strokeWidth:"2"}),i.jsx("rect",{x:"66",y:"16",width:"40",height:"20",rx:"8",fill:"#f472b6",stroke:"white",strokeOpacity:"0.35",strokeWidth:"2"}),i.jsx("rect",{x:"14",y:"56",width:"40",height:"48",rx:"10",fill:"#f472b6",stroke:"white",strokeOpacity:"0.35",strokeWidth:"2"}),i.jsx("rect",{x:"66",y:"40",width:"40",height:"64",rx:"10",fill:"#a78bfa",stroke:"white",strokeOpacity:"0.35",strokeWidth:"2"})]})}function k1(){return i.jsxs("svg",{width:"120",height:"120",viewBox:"0 0 120 120",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[i.jsx("rect",{x:"26",y:"26",width:"68",height:"16",rx:"8",fill:"#22d3ee",stroke:"white",strokeOpacity:"0.35",strokeWidth:"2"}),i.jsx("rect",{x:"18",y:"46",width:"84",height:"30",rx:"10",fill:"#34d399",stroke:"white",strokeOpacity:"0.35",strokeWidth:"2"}),i.jsx("path",{d:"M34 78h52l-6 10a10 10 0 0 1-8 4H48a10 10 0 0 1-8-4l-6-10z",fill:"#22d3ee",stroke:"white",strokeOpacity:"0.25"}),i.jsx("circle",{cx:"48",cy:"94",r:"6.5",fill:"#34d399",stroke:"white",strokeOpacity:"0.35"}),i.jsx("circle",{cx:"72",cy:"94",r:"6.5",fill:"#34d399",stroke:"white",strokeOpacity:"0.35"})]})}function P1({colorA:e="rgba(255,255,255,0.2)",colorB:t="rgba(255,255,255,0.2)"}){return i.jsxs("svg",{className:"absolute inset-0 w-full h-full opacity-[0.12]",xmlns:"http://www.w3.org/2000/svg",children:[i.jsxs("defs",{children:[i.jsx("pattern",{id:"hex",width:"22",height:"19",patternUnits:"userSpaceOnUse",patternTransform:"scale(1)",children:i.jsx("path",{d:"M11 0l11 6.5v6.5L11 19 0 13V6.5L11 0z",fill:"none",stroke:"white",strokeOpacity:"0.35"})}),i.jsxs("linearGradient",{id:"lg",x1:"0",x2:"1",y1:"0",y2:"1",children:[i.jsx("stop",{offset:"0%",stopColor:e}),i.jsx("stop",{offset:"100%",stopColor:t})]})]}),i.jsx("rect",{width:"100%",height:"100%",fill:"url(#hex)"}),i.jsx("rect",{width:"100%",height:"100%",fill:"url(#lg)"})]})}function O1({colorA:e,colorB:t}){return i.jsx(U.div,{initial:{opacity:0},animate:{opacity:.35},exit:{opacity:0},transition:{duration:.9},className:"pointer-events-none absolute inset-0",style:{background:`radial-gradient(800px 300px at 10% 20%, ${e}, transparent 60%),
           radial-gradient(700px 260px at 90% 30%, ${t}, transparent 60%),
           radial-gradient(700px 260px at 50% 110%, ${e}, transparent 60%)`,mixBlendMode:"screen",filter:"blur(6px)",willChange:"transform, opacity",transform:"translateZ(0)"}})}function C1({colorA:e="rgba(255,255,255,0.4)",colorB:t="rgba(255,255,255,0.2)"}){return i.jsx(U.div,{initial:{scale:0,opacity:.7},animate:{scale:6,opacity:0},transition:{duration:1.2,ease:"easeOut"},className:"absolute inset-0 flex items-center justify-center",style:{mixBlendMode:"screen",willChange:"transform, opacity",transform:"translateZ(0)"},children:i.jsx("div",{className:"w-64 h-64 rounded-full",style:{boxShadow:`0 0 0 3px ${e} inset, 0 0 64px ${t}, 0 0 120px ${e}`,background:`radial-gradient(circle, ${e} 0%, transparent 60%)`}})})}function A1({mode:e}){const t=e==="pos",r=t?"#34d399":"#a78bfa",n=t?"#22d3ee":"#f472b6",a=Array.from({length:18});return i.jsx(i.Fragment,{children:a.map((s,o)=>i.jsx(U.div,{initial:{x:0,y:0,opacity:1,scale:1},animate:{x:Math.cos(o/a.length*2*Math.PI)*(160+o%5*22),y:Math.sin(o/a.length*2*Math.PI)*(160+o%5*22),opacity:0,scale:.2},transition:{duration:1,ease:"easeOut",delay:o*.015},className:"absolute left-1/2 top-1/2",style:{width:6,height:6,borderRadius:9999,background:o%2===0?r:n,boxShadow:`0 0 10px ${o%2===0?r:n}, 0 0 20px ${o%2===0?r:n}`}},o))})}function D1({type:e="cart",color:t="#fff",size:r=20}){const n=r;return e==="receipt"?i.jsxs("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[i.jsx("path",{d:"M7 3h10a1 1 0 0 1 1 1v16l-2-1-2 1-2-1-2 1-2-1-2 1V4a1 1 0 0 1 1-1z",fill:t,opacity:"0.9"}),i.jsx("path",{d:"M9 7h6M9 11h6M9 15h4",stroke:"white",strokeOpacity:"0.7",strokeWidth:"1.5",strokeLinecap:"round"})]}):e==="box"?i.jsxs("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[i.jsx("path",{d:"M3 7l9-4 9 4-9 4-9-4z",fill:t,opacity:"0.9"}),i.jsx("path",{d:"M3 7v10l9 4 9-4V7",stroke:"white",strokeOpacity:"0.65"})]}):e==="bar"?i.jsxs("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[i.jsx("rect",{x:"4",y:"10",width:"4",height:"8",rx:"1",fill:t}),i.jsx("rect",{x:"10",y:"6",width:"4",height:"12",rx:"1",fill:t}),i.jsx("rect",{x:"16",y:"3",width:"4",height:"15",rx:"1",fill:t})]}):e==="line"?i.jsx("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:i.jsx("path",{d:"M4 16l5-5 3 3 6-6",stroke:t,strokeWidth:"2.2",strokeLinecap:"round",strokeLinejoin:"round"})}):i.jsxs("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[i.jsx("path",{d:"M4 5h2l2.2 9.5a2 2 0 0 0 2 1.5h6.6a2 2 0 0 0 2-1.5L20 8H7",stroke:t,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),i.jsx("circle",{cx:"10",cy:"20",r:"1.8",fill:t}),i.jsx("circle",{cx:"17",cy:"20",r:"1.8",fill:t})]})}function T1({mode:e}){const t=e==="pos",r=t?"#34d399":"#a78bfa",n=t?"#22d3ee":"#f472b6",a=t?[{icon:"cart",radius:120,color:r,delay:0},{icon:"receipt",radius:95,color:n,delay:.05},{icon:"box",radius:145,color:r,delay:.1}]:[{icon:"bar",radius:120,color:r,delay:0},{icon:"line",radius:95,color:n,delay:.05},{icon:"receipt",radius:145,color:r,delay:.1}];return i.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:a.map((s,o)=>i.jsx(U.div,{initial:{rotate:0,opacity:0},animate:{rotate:360,opacity:1},exit:{opacity:0},transition:{duration:1,ease:"linear",delay:s.delay},className:"absolute",style:{width:s.radius*2,height:s.radius*2,borderRadius:"50%",willChange:"transform, opacity",transform:"translateZ(0)"},children:i.jsx("div",{className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2",style:{transform:`translate(${s.radius}px, -50%)`},children:i.jsx("div",{style:{filter:"drop-shadow(0 0 8px rgba(255,255,255,0.45))"},children:i.jsx(D1,{type:s.icon,color:s.color,size:24})})})},o))})}function I1(){return i.jsx(U.div,{initial:{x:"-120%",opacity:0},animate:{x:"120%",opacity:1},exit:{opacity:0},transition:{duration:.9,ease:"easeInOut"},className:"pointer-events-none fixed top-0 bottom-0 w-[35%] z-[131]",style:{willChange:"transform, opacity",transform:"translateZ(0)",background:"linear-gradient(90deg, rgba(255,255,255,0) 0%, rgba(255,255,255,0.12) 45%, rgba(255,255,255,0) 100%)",filter:"blur(8px)",mixBlendMode:"screen"}})}function M1({mode:e}){const t=e==="pos"?"Switching to POS Modeâ€¦":"Returning to Dashboardâ€¦";return i.jsx("div",{className:"fixed inset-0 flex items-start justify-center mt-24 z-[132] pointer-events-none",children:i.jsx(U.div,{initial:{y:-12,opacity:0},animate:{y:0,opacity:1},exit:{opacity:0},transition:{duration:.4,ease:"easeOut"},className:"px-4 py-2 rounded-full text-sm font-medium",style:{willChange:"transform, opacity",transform:"translateZ(0)",color:"white",background:"linear-gradient(90deg, rgba(255,255,255,0.12), rgba(255,255,255,0.04))",border:"1px solid rgba(255,255,255,0.18)",boxShadow:"0 8px 24px rgba(0,0,0,0.25)",backdropFilter:"blur(10px)"},children:t},t)})}function E1({colorA:e,colorB:t}){return i.jsx(U.div,{initial:{scale:.5,rotate:0,opacity:0},animate:{scale:1.4,rotate:360,opacity:.35},exit:{scale:1.6,opacity:0},transition:{duration:1.1,ease:"easeInOut"},className:"absolute inset-0",style:{background:`conic-gradient(from 180deg at 50% 50%, ${e}, ${t}, ${e})`,borderRadius:"50%",mixBlendMode:"screen",filter:"blur(60px)",willChange:"transform, opacity"}})}function _1(){return i.jsx(U.div,{initial:{opacity:0},animate:{opacity:[0,1,0]},transition:{duration:.6,ease:"easeInOut",delay:.5},className:"absolute inset-0 bg-white",style:{mixBlendMode:"overlay",willChange:"opacity"}})}function R1(){return i.jsxs(i.Fragment,{children:[i.jsx(U.div,{initial:{x:0},animate:{x:"-110%"},exit:{opacity:0},transition:{duration:.9,ease:"easeInOut"},className:"fixed top-0 bottom-0 left-0 w-1/2",style:{background:"linear-gradient(90deg, rgba(0,0,0,0.5), rgba(0,0,0,0.15))",backdropFilter:"blur(4px)"}}),i.jsx(U.div,{initial:{x:0},animate:{x:"110%"},exit:{opacity:0},transition:{duration:.9,ease:"easeInOut"},className:"fixed top-0 bottom-0 right-0 w-1/2",style:{background:"linear-gradient(270deg, rgba(0,0,0,0.5), rgba(0,0,0,0.15))",backdropFilter:"blur(4px)"}})]})}const $1=new Set(["dashboard","pos"]),yf=e=>$1.has(String(e))?String(e):"dashboard",ag=x.createContext({mode:"dashboard",isPos:!1,setMode:()=>{},flash:()=>{}}),L1=({children:e})=>{let t="dashboard";if(typeof window<"u"){const f=new URLSearchParams(window.location.search).get("mode"),h=window.localStorage?.getItem("mode");t=yf(f||h||"dashboard")}const[r,n]=x.useState(t),[a,s]=x.useState(null),[o,l]=x.useState(0),c=()=>l(f=>f+1),d=f=>{const h=yf(f);n(m=>{if(m===h)return m;try{c()}catch{}return s(h),m})};x.useEffect(()=>{if(!(typeof window>"u"))try{window.localStorage.setItem("mode",r);const f=new URL(window.location.href);f.searchParams.set("mode",r),window.history.replaceState(null,"",f.toString())}catch{}},[r]),x.useEffect(()=>{if(typeof window>"u")return;const f=m=>{m.key==="mode"&&d(m.newValue)},h=()=>{const m=new URLSearchParams(window.location.search).get("mode");m&&d(m)};return window.addEventListener("storage",f),window.addEventListener("popstate",h),()=>{window.removeEventListener("storage",f),window.removeEventListener("popstate",h)}},[]);const u=x.useMemo(()=>({mode:r,isPos:r==="pos",setMode:d,flash:c}),[r]);return i.jsxs(ag.Provider,{value:u,children:[i.jsx(Ue,{mode:"wait",children:a&&i.jsx(j1,{triggerKey:o,mode:a,onDone:()=>{n(a),s(null)}},`cin-${o}`)}),e]})},gu=()=>x.useContext(ag),F1=["veg","nonveg","thali","chaat","biryani","pizza","burger","sandwich","fries","tea","coffee","rice","dosa","idli","tandoor","wraps","salads","mains","desserts","drinks","cocktail","mocktail","wings","nachos","noodles","cake","pastry"],B1={veg:'<svg viewBox="0 0 24 24" fill="currentColor" aria-hidden="true"><circle cx="12" cy="12" r="10"/></svg>',nonveg:'<svg viewBox="0 0 24 24" fill="currentColor" aria-hidden="true"><rect x="4" y="4" width="16" height="16" rx="3"/></svg>',thali:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true"><circle cx="12" cy="12" r="9"/><circle cx="9" cy="12" r="2" fill="currentColor"/><circle cx="15" cy="12" r="2" fill="currentColor"/></svg>',chaat:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true"><path d="M4 14h16l-2 4H6l-2-4z"/><path d="M8 10a4 4 0 018 0"/></svg>',biryani:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true"><path d="M4 12h16"/><path d="M6 16h12"/><path d="M8 8h8"/></svg>',pizza:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true"><path d="M12 3l9 18H3L12 3z"/><circle cx="10" cy="14" r="1.2" fill="currentColor"/><circle cx="13.5" cy="11" r="1.2" fill="currentColor"/></svg>',burger:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true"><rect x="4" y="7" width="16" height="4" rx="2" fill="currentColor"/><rect x="4" y="13" width="16" height="4" rx="2"/></svg>',sandwich:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true"><path d="M4 8l8-3 8 3v8l-8 3-8-3z"/><path d="M6 10h12M6 14h12"/></svg>',fries:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true"><path d="M7 5l1 4M12 4l0 5M16 5l-1 4"/><path d="M5 9h14l-2 10H7L5 9z"/></svg>',tea:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true"><rect x="4" y="8" width="12" height="8" rx="3"/><path d="M16 10h2a2 2 0 010 4h-2"/></svg>',coffee:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true"><path d="M5 8h11v6a4 4 0 01-4 4H9a4 4 0 01-4-4V8z"/><path d="M16 10h2a2 2 0 010 4h-2"/></svg>',rice:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true"><path d="M4 15h16l-2 4H6l-2-4z"/><path d="M8 12a4 4 0 018 0"/></svg>',dosa:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true"><path d="M3 12h18"/><path d="M6 12a6 6 0 0012 0"/></svg>',idli:'<svg viewBox="0 0 24 24" fill="currentColor" aria-hidden="true"><circle cx="12" cy="12" r="6"/></svg>',tandoor:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true"><path d="M6 19a6 6 0 1112 0H6z"/><path d="M12 5v4"/></svg>',wraps:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true"><rect x="6" y="6" width="12" height="12" rx="6"/></svg>',salads:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true"><circle cx="9" cy="12" r="3"/><circle cx="15" cy="12" r="3"/></svg>',mains:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true"><path d="M4 8h16v8H4z"/><path d="M4 12h16"/></svg>',desserts:'<svg viewBox="0 0 24 24" fill="currentColor" aria-hidden="true"><path d="M6 14h12l-2 5H8l-2-5z"/></svg>',drinks:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true"><path d="M6 4h12l-2 6H8L6 4z"/><path d="M9 10v8a3 3 0 006 0v-8"/></svg>',cocktail:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true"><path d="M4 4h16l-8 7-8-7z"/><path d="M12 11v7"/></svg>',mocktail:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true"><path d="M7 5h10l-5 6-5-6z"/><path d="M12 11v7"/></svg>',wings:'<svg viewBox="0 0 24 24" fill="currentColor" aria-hidden="true"><path d="M5 12c3-5 11-5 14 0-3 5-11 5-14 0z"/></svg>',nachos:'<svg viewBox="0 0 24 24" fill="currentColor" aria-hidden="true"><path d="M12 4l8 14H4L12 4z"/></svg>',noodles:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true"><path d="M4 10h16M6 14h12"/><path d="M8 7v3M12 7v3M16 7v3"/></svg>',cake:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true"><path d="M6 12h12v6H6z"/><path d="M12 6v3"/></svg>',pastry:'<svg viewBox="0 0 24 24" fill="currentColor" aria-hidden="true"><rect x="5" y="8" width="14" height="8" rx="2"/></svg>'},q1={veg:"ðŸ¥—",nonveg:"ðŸ—",thali:"ðŸ½ï¸",chaat:"ðŸ¥™",biryani:"ðŸ›",pizza:"ðŸ•",burger:"ðŸ”",sandwich:"ðŸ¥ª",fries:"ðŸŸ",tea:"ðŸ«–",coffee:"â˜•",rice:"ðŸš",dosa:"ðŸ¥ž",idli:"ðŸ˜",tandoor:"ðŸ”¥",wraps:"ðŸŒ¯",salads:"ðŸ¥—",mains:"ðŸ½ï¸",desserts:"ðŸ°",drinks:"ðŸ¥¤",cocktail:"ðŸ¸",mocktail:"ðŸ¹",wings:"ðŸ—",nachos:"ðŸ§€",noodles:"ðŸœ",cake:"ðŸŽ‚",pastry:"ðŸ§"};function ig(e){return B1[e]||""}function sg(e){return q1[e]||"â–"}const wf=(e="")=>e+Math.random().toString(36).substring(2,10)+Date.now().toString(36),ar=(e="veg")=>String(e).toLowerCase().replace(/\s+/g,"").replace("-","")==="nonveg"?"nonveg":"veg",jf=e=>e==="veg"?"ðŸ¥—":e==="nonveg"?"ðŸ—":e==="burgers"?"ðŸ”":e==="sandwiches"?"ðŸ¥ª":e==="tandoor"?"ðŸ”¥":e==="beverages"?"ðŸ¥¤":e==="breads"?"ðŸ¥–":e==="rice"?"ðŸš":e==="tiffin"?"ðŸ½ï¸":e==="dosa"?"ðŸ«“":e==="pastries"?"ðŸ§":e==="cakes"?"ðŸŽ‚":e==="fries"?"ðŸŸ":"ðŸ½ï¸",Hr=(e="")=>{const t=String(e).toLowerCase();return{veg:"veg",nonveg:"nonveg",burgers:"burger",sandwiches:"sandwich",tandoor:"tandoor",beverages:"drink",drinks:"drink",breads:"bread",rice:"rice",tiffin:"plate",dosa:"dosa",pastries:"pastry",cakes:"cake",fries:"fries",wraps:"wrap",sides:"side",quickbites:"snack",vegpizza:"pizza-veg",nonvegpizza:"pizza-nonveg",cocktails:"cocktail",mocktails:"mocktail",smallplates:"small-plate"}[t]||null},ri=({token:e,fallback:t,className:r="w-4 h-4"})=>{if(e){const n=ig(e);if(n)return i.jsx("span",{className:r,dangerouslySetInnerHTML:{__html:n}});const a=sg(e);return i.jsx("span",{className:r,style:{display:"inline-flex",alignItems:"center",justifyContent:"center"},children:a})}return i.jsx("span",{className:r,style:{display:"inline-flex",alignItems:"center",justifyContent:"center"},children:t||"ðŸ½ï¸"})},po=[{id:"veg",name:"Veg",icon:"veg"},{id:"nonveg",name:"Non-Veg",icon:"nonveg"},{id:"sandwiches",name:"Sandwiches",icon:"sandwich"},{id:"burgers",name:"Burgers",icon:"burger"},{id:"tandoor",name:"Tandoor",icon:"tandoor"},{id:"rice",name:"Rice",icon:"rice"}],Nf={cafe:{label:"CafÃ© Starter",description:"Coffee, tea, sandwiches, light bites.",categories:[{id:"beverages",name:"Beverages",icon:"drink"},{id:"sandwiches",name:"Sandwiches",icon:"sandwich"},{id:"quickbites",name:"Quick Bites",icon:"snack"}],items:[{name:"Filter Coffee",price:35,tax:5,type:"veg",categoryId:"beverages"},{name:"Masala Chai",price:25,tax:5,type:"veg",categoryId:"beverages"},{name:"Cold Coffee",price:120,tax:5,type:"veg",categoryId:"beverages"},{name:"Veg Grill Sandwich",price:110,tax:5,type:"veg",categoryId:"sandwiches"},{name:"Cheese Toast",price:90,tax:5,type:"veg",categoryId:"quickbites"}]},north:{label:"North Indian",description:"Curries, breads, rice â€” classic thali picks.",categories:[{id:"veg",name:"Veg",icon:"veg"},{id:"nonveg",name:"Non-Veg",icon:"nonveg"},{id:"breads",name:"Breads",icon:"bread"},{id:"rice",name:"Rice",icon:"rice"}],items:[{name:"Paneer Butter Masala",price:220,tax:5,type:"veg",categoryId:"veg"},{name:"Dal Tadka",price:160,tax:5,type:"veg",categoryId:"veg"},{name:"Chicken Curry",price:260,tax:5,type:"nonveg",categoryId:"nonveg"},{name:"Butter Naan",price:40,tax:5,type:"veg",categoryId:"breads"},{name:"Jeera Rice",price:140,tax:5,type:"veg",categoryId:"rice"}]},south:{label:"South Indian",description:"Idli, dosa, vada, filter coffee.",categories:[{id:"tiffin",name:"Tiffin",icon:"plate"},{id:"dosa",name:"Dosa",icon:"dosa"},{id:"beverages",name:"Beverages",icon:"drink"}],items:[{name:"Idli (2 pc)",price:40,tax:5,type:"veg",categoryId:"tiffin"},{name:"Medu Vada (2 pc)",price:50,tax:5,type:"veg",categoryId:"tiffin"},{name:"Masala Dosa",price:90,tax:5,type:"veg",categoryId:"dosa"},{name:"Mysore Masala Dosa",price:120,tax:5,type:"veg",categoryId:"dosa"},{name:"Filter Coffee",price:35,tax:5,type:"veg",categoryId:"beverages"}]},pizzeria:{label:"Pizzeria",description:"Classic and loaded pizzas, sides and drinks.",categories:[{id:"vegpizza",name:"Veg Pizzas",icon:"pizza-veg"},{id:"nonvegpizza",name:"Non-Veg Pizzas",icon:"pizza-nonveg"},{id:"sides",name:"Sides",icon:"side"},{id:"drinks",name:"Drinks",icon:"drink"}],items:[{name:"Margherita",price:199,tax:5,type:"veg",categoryId:"vegpizza"},{name:"Farmhouse",price:349,tax:5,type:"veg",categoryId:"vegpizza"},{name:"Chicken Pepperoni",price:399,tax:5,type:"nonveg",categoryId:"nonvegpizza"},{name:"Garlic Bread",price:129,tax:5,type:"veg",categoryId:"sides"},{name:"Cola",price:60,tax:0,type:"veg",categoryId:"drinks"}]},fastfood:{label:"Fast Food",description:"Burgers, fries, wraps, shakes.",categories:[{id:"burgers",name:"Burgers",icon:"burger"},{id:"wraps",name:"Wraps",icon:"wrap"},{id:"fries",name:"Fries",icon:"fries"},{id:"beverages",name:"Beverages",icon:"drink"}],items:[{name:"Veg Burger",price:89,tax:5,type:"veg",categoryId:"burgers"},{name:"Chicken Burger",price:129,tax:5,type:"nonveg",categoryId:"burgers"},{name:"Paneer Wrap",price:139,tax:5,type:"veg",categoryId:"wraps"},{name:"French Fries",price:79,tax:5,type:"veg",categoryId:"fries"},{name:"Thick Shake",price:149,tax:5,type:"veg",categoryId:"beverages"}]},bar:{label:"Bar",description:"Cocktails, mocktails and small plates.",categories:[{id:"cocktails",name:"Cocktails",icon:"cocktail"},{id:"mocktails",name:"Mocktails",icon:"mocktail"},{id:"smallplates",name:"Small Plates",icon:"small-plate"}],items:[{name:"Mojito",price:299,tax:18,type:"veg",categoryId:"cocktails"},{name:"Whiskey Sour",price:349,tax:18,type:"veg",categoryId:"cocktails"},{name:"Virgin Mary",price:199,tax:5,type:"veg",categoryId:"mocktails"},{name:"Nachos",price:199,tax:5,type:"veg",categoryId:"smallplates"},{name:"Chicken Wings",price:299,tax:5,type:"nonveg",categoryId:"smallplates"}]},bakery:{label:"Bakery / Desserts",description:"Cakes, pastries and shakes.",categories:[{id:"cakes",name:"Cakes",icon:"cake"},{id:"pastries",name:"Pastries",icon:"pastry"},{id:"beverages",name:"Beverages",icon:"drink"}],items:[{name:"Chocolate Truffle Slice",price:90,tax:5,type:"veg",categoryId:"pastries"},{name:"Black Forest Cake (1/2 kg)",price:450,tax:5,type:"veg",categoryId:"cakes"},{name:"Red Velvet Pastry",price:110,tax:5,type:"veg",categoryId:"pastries"},{name:"Thick Chocolate Shake",price:160,tax:5,type:"veg",categoryId:"beverages"}]}},U1=({onBack:e})=>{const[t,r]=x.useState(""),[n,a]=x.useState("grid"),[s,o]=x.useState(!1),[l,c]=x.useState([]),[d,u]=x.useState(""),[f,h]=x.useState([]),[m,b]=x.useState("manual"),[g,p]=x.useState(!1),[v,w]=x.useState(!1),[y,S]=x.useState("add"),[j,k]=x.useState({id:"",name:"",icon:""}),[N,P]=x.useState(!1),[D,C]=x.useState("add"),[O,A]=x.useState({id:"",name:"",price:"",tax:"",type:"veg",image:"",categoryId:"",available:!0}),[B,M]=x.useState({industry:"restaurant",cuisine:"north",priceBand:"mid",vegRatio:70}),F=x.useRef(null),V=x.useMemo(()=>Array.from({length:28}).map((I,X)=>({id:X,top:Math.random()*100,left:Math.random()*100,size:2+Math.random()*2,delay:Math.random()*6,opacity:.25+Math.random()*.35})),[]),q=()=>su().currentUser?.uid||null,K=I=>ue(J,"businesses",I,"categories"),ne=I=>{c(X=>{const fe=new Map(X.map(ce=>[ce.id,ce]));for(const ce of I)fe.has(ce.id)||fe.set(ce.id,{...fe.get(ce.id),...ce});return Array.from(fe.values())})},Z=async(I=[])=>{const X=q();if(!X||!I.length)return;const fe=K(X),ce=[];for(const be of I){const je=be.id||wf("cat"),qe=be.icon||Hr(je)||null;await Kt(ve(fe,je),{name:be.name||je,icon:qe},{merge:!0}),ce.push({id:je,name:be.name||je,icon:qe})}c(be=>{const je=new Map(be.map(qe=>[qe.id,qe]));return ce.forEach(qe=>je.set(qe.id,{...je.get(qe.id)||{},...qe})),Array.from(je.values())})},T=async I=>{const X=q();if(!X)return;const fe=ue(J,"businesses",X,"items"),ce=[];for(const be of I){const je={...be,type:ar(be.type),available:be.available!==!1},qe=await Rr(fe,je);ce.push({...je,id:qe.id})}h(be=>[...be,...ce])},_=async I=>{const X=Nf[I];X&&(await Z(X.categories),await T(X.items.map(fe=>({...fe,type:ar(fe.type)}))),X.categories[0]&&u(X.categories[0].id),p(!1))},Y=async I=>{if(!I)return;const fe=(await I.text()).split(/\r?\n/).map(Te=>Te.trim()).filter(Boolean);if(fe.length===0)return;const ce=fe[0].toLowerCase(),je=/(^|,)name(,|$)/.test(ce)?fe.slice(1):fe,qe=[];for(const Te of je){const nr=[];let wn="",ei=!1;for(let ea=0;ea<Te.length;ea++){const ti=Te[ea];if(ti==='"')ei=!ei;else if(ti===","&&!ei){nr.push(wn),wn="";continue}(ti!==","||ei)&&(wn+=ti)}nr.push(wn);const[cf,uf,Sw,kw,Pw="veg",Ow="",Cw="true"]=nr.map(ea=>String(ea||"").replace(/^"|"$/g,"").trim());!cf||!uf||qe.push({name:cf.trim(),categoryId:uf.trim(),price:parseFloat(Sw)||0,tax:parseFloat(kw)||0,type:ar(Pw),image:Ow||"",available:String(Cw).toLowerCase()!=="false"})}const Be=Array.from(new Set(qe.map(Te=>Te.categoryId))).map(Te=>({id:Te,name:Te.split(/[_\s-]+/).map(nr=>nr.charAt(0).toUpperCase()+nr.slice(1)).join(" "),icon:Hr(Te)||null}));await Z(Be),await T(qe),Be[0]&&u(Be[0].id),p(!1)},ee=async()=>{const I={north:["veg","nonveg","breads","rice"],south:["tiffin","dosa","beverages"],continental:["salads","mains","desserts"],mixed:["veg","nonveg","quickbites"]},X={veg:"Veg",nonveg:"Non-Veg",breads:"Breads",rice:"Rice",tiffin:"Tiffin",dosa:"Dosa",beverages:"Beverages",salads:"Salads",mains:"Mains",desserts:"Desserts",quickbites:"Quick Bites"},fe=(I[B.cuisine]||I.north).map(Be=>({id:Be,name:X[Be]||Be,icon:Hr(Be)||null}));ne(fe),await Z(fe);const ce=[],be=Math.min(100,Math.max(0,Number(B.vegRatio)||60)),je=()=>Math.random()*100<be?"veg":"nonveg",qe=B.priceBand==="low"?80:B.priceBand==="high"?260:150;fe.forEach(Be=>{for(let Te=0;Te<3;Te++){const nr=je(),wn=Be.id==="veg"?["Paneer Masala","Aloo Mutter","Veg Kadhai"][Te]:Be.id==="nonveg"?["Chicken Curry","Kadai Chicken","Mutton Rogan"][Te]||"Chicken Roast":Be.id==="breads"?["Butter Naan","Tandoori Roti","Lachha Paratha"][Te]:Be.id==="rice"?["Jeera Rice","Veg Pulao","Curd Rice"][Te]:Be.id==="tiffin"?["Idli","Medu Vada","Upma"][Te]:Be.id==="dosa"?["Masala Dosa","Mysore Dosa","Plain Dosa"][Te]:Be.id==="beverages"?["Filter Coffee","Masala Chai","Lassi"][Te]:Be.id==="salads"?["Greek Salad","Caesar Salad","Quinoa Salad"][Te]:Be.id==="mains"?["Grilled Chicken","Pasta Alfredo","Veg Steak"][Te]:Be.id==="desserts"?["Brownie","Cheesecake","Gulab Jamun"][Te]:["Quick Bite A","Quick Bite B","Quick Bite C"][Te];ce.push({name:wn,categoryId:Be.id,price:Math.max(20,Math.round(qe+(Te-1)*30+(nr==="veg"?-10:20))),tax:Be.id==="beverages"?0:5,type:ar(nr),image:"",available:!0})}}),await T(ce),fe[0]&&u(fe[0].id),p(!1)};x.useEffect(()=>{(async()=>{try{const I=q();if(!I)return;const X=ue(J,"businesses",I,"items"),fe=await ye(X);if(fe.empty)await T([{name:"Paneer Butter Masala",price:180,tax:5,type:"veg",categoryId:"veg",available:!0},{name:"Chicken Curry",price:220,tax:5,type:"nonveg",categoryId:"nonveg",available:!0},{name:"Veg Sandwich",price:120,tax:5,type:"veg",categoryId:"sandwiches",available:!0},{name:"Cheese Burger",price:150,tax:5,type:"veg",categoryId:"burgers",available:!0},{name:"Tandoori Roti",price:25,tax:5,type:"veg",categoryId:"breads",available:!0},{name:"Veg Fried Rice",price:160,tax:5,type:"veg",categoryId:"rice",available:!0}]);else{const ce=[];fe.forEach(be=>{const je=be.data()||{};ce.push({id:be.id,...je,type:ar(je.type),available:je.available!==!1})}),h(ce)}}catch(I){console.error("Error fetching items:",I)}})()},[]),x.useEffect(()=>{(async()=>{const I=q();if(!I)return;const X=K(I),fe=await ye(X);if(fe.empty)await Promise.all(po.map(ce=>Kt(ve(X,ce.id),{name:ce.name,icon:ce.icon||Hr(ce.id)||null},{merge:!0}))),c(po.map(ce=>({...ce,icon:ce.icon||Hr(ce.id)||null}))),u(po[0]?.id||"");else{const ce=[];fe.forEach(be=>ce.push({id:be.id,...be.data()||{}})),c(ce),u(ce[0]?.id||"")}})()},[]);const[W,H]=x.useState(d);x.useEffect(()=>H(d),[d]);const le=I=>I.available!==!1,$=async I=>{try{const X=q();if(!X)return;const fe=ve(J,"businesses",X,"items",I.id),ce=!le(I);await lt(fe,{available:ce}),h(be=>be.map(je=>je.id===I.id?{...je,available:ce}:je))}catch(X){console.error("Failed to toggle availability",X)}},[L,G]=x.useState(!1),R=()=>{S("add"),k({id:"",name:"",icon:""}),G(!0)},E=I=>{S("edit"),k({id:I.id,name:I.name||"",icon:I.icon||""}),G(!0)},te=async I=>{if(!window.confirm("Delete this category?"))return;const X=q();if(X)try{await df(ve(K(X),I))}catch(fe){console.error("Failed to delete category:",fe)}if(c(fe=>fe.filter(ce=>ce.id!==I)),h(fe=>fe.filter(ce=>ce.categoryId!==I)),d===I){const fe=l.filter(ce=>ce.id!==I);u(fe[0]?.id||"")}},re=async()=>{if(!j.name.trim())return;const I=q();if(!I)return;const X=K(I),fe={name:j.name,icon:j.icon||null};if(y==="add"){const ce=wf("cat");try{await Kt(ve(X,ce),fe,{merge:!0}),c(be=>[...be,{id:ce,...fe}]),u(ce)}catch(be){console.error("Failed to add category:",be)}}else if(y==="edit")try{await lt(ve(X,j.id),fe),c(ce=>ce.map(be=>be.id===j.id?{...be,...fe}:be))}catch(ce){console.error("Failed to update category:",ce)}G(!1)},ae=()=>{C("add"),A({id:"",name:"",price:"",tax:"",type:"veg",image:"",categoryId:d,available:!0}),P(!0)},Q=I=>{C("edit"),A({...I}),P(!0)},oe=async I=>{if(window.confirm("Delete this item?"))try{const X=q();if(!X)return;const fe=ve(J,"businesses",X,"items",I);await df(fe),h(ce=>ce.filter(be=>be.id!==I))}catch(X){console.error("Error deleting item:",X)}},Ee=async()=>{if(!O.name.trim()||O.price===""||O.price===null)return;const I=q();if(I)try{if(D==="add"){const X={...O,price:parseFloat(O.price),tax:parseFloat(O.tax)||0,type:ar(O.type),available:O.available!==!1};delete X.id;const fe=ue(J,"businesses",I,"items"),ce=await Rr(fe,X);h(be=>[...be,{...X,id:ce.id}])}else if(D==="edit"){const X={...O,price:parseFloat(O.price),tax:parseFloat(O.tax)||0,type:ar(O.type)},{id:fe,...ce}=X,be=ve(J,"businesses",I,"items",fe);await lt(be,ce),h(je=>je.map(qe=>qe.id===fe?{...X}:qe))}P(!1)}catch(X){console.error("Error saving item:",X)}},we=l.find(I=>I.id===d),mt=f.filter(I=>I.categoryId===d).filter(I=>!s&&I.available===!1?!1:t.trim()?I.name.toLowerCase().includes(t.toLowerCase()):!0);return i.jsxs("div",{className:"relative w-full min-h-screen bg-transparent",children:[i.jsxs("div",{className:"pointer-events-none fixed inset-0 opacity-[0.9]",children:[i.jsx("div",{className:"absolute -top-1/3 -left-1/4 w-[70%] h-[70%] rounded-full blur-3xl bg-emerald-500/20"}),i.jsx("div",{className:"absolute -bottom-1/3 -right-1/4 w-[70%] h-[70%] rounded-full blur-3xl bg-cyan-500/20"}),i.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(ellipse_at_bottom,_rgba(16,185,129,0.08),_transparent_50%),radial-gradient(ellipse_at_top,_rgba(6,182,212,0.05),_transparent_40%)]"}),i.jsx("div",{className:"absolute inset-0 pointer-events-none bg-[radial-gradient(circle_at_center,rgba(0,0,0,0)_45%,rgba(0,0,0,0.28))]"})]}),i.jsx("div",{className:"pointer-events-none fixed inset-0 z-0",children:V.map(I=>i.jsx(U.span,{className:"absolute rounded-full bg-white",style:{top:`${I.top}%`,left:`${I.left}%`,width:I.size,height:I.size,opacity:I.opacity},animate:{opacity:[0,I.opacity,0]},transition:{repeat:1/0,duration:6+I.delay,ease:"easeInOut",delay:I.delay}},I.id))}),i.jsx("div",{className:"sticky top-0 z-30 bg-transparent backdrop-blur-sm",children:i.jsxs("div",{className:"px-4 py-3 flex items-center gap-3",children:[e&&i.jsx("button",{onClick:e,className:"rounded-lg bg-gradient-to-r from-emerald-400 via-teal-300 to-cyan-400 text-slate-900 px-4 py-2 text-sm font-semibold shadow hover:shadow-emerald-600/30 hover:shadow-lg transition",children:"â† Back to POS"}),i.jsx("h1",{className:"text-lg font-semibold text-white/90",children:"Menu Builder"}),i.jsx("div",{className:"flex-1"}),i.jsx("div",{className:"flex items-center gap-2",children:["manual","quick","ai"].map(I=>i.jsx("button",{onClick:()=>b(I),className:`px-3 py-2 rounded-lg text-sm capitalize ${m===I?"bg-emerald-500 text-slate-900 font-semibold shadow":"text-white/80 hover:bg-white/5"}`,children:I==="manual"?"Manual":I==="quick"?"Quick Start":"AI"},I))}),i.jsxs("div",{className:"hidden md:flex items-center gap-2",children:[i.jsxs("div",{className:"relative",children:[i.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-white/40",children:"ðŸ”"}),i.jsx("input",{value:t,onChange:I=>r(I.target.value),placeholder:"Search itemsâ€¦",className:"pl-9 pr-3 py-2 rounded-xl border border-white/10 bg-white/5 text-white/90 placeholder:text-white/40 backdrop-blur outline-none text-sm focus:ring-2 focus:ring-emerald-300/40"})]}),i.jsxs("div",{className:"inline-flex rounded-xl overflow-hidden border border-white/10",children:[i.jsx("button",{onClick:()=>a("grid"),className:`px-3 py-2 text-sm ${n==="grid"?"bg-white/10 text-white":"text-white/70 hover:bg-white/5"}`,children:"Grid"}),i.jsx("button",{onClick:()=>a("list"),className:`px-3 py-2 text-sm ${n==="list"?"bg-white/10 text-white":"text-white/70 hover:bg-white/5"}`,children:"List"})]}),i.jsxs("label",{className:"flex items-center gap-2 text-sm text-white/80",children:[i.jsx("input",{type:"checkbox",className:"accent-emerald-400",checked:s,onChange:I=>o(I.target.checked)}),"Show unavailable"]})]}),i.jsx("button",{onClick:()=>p(I=>!I),className:`ml-2 rounded-lg border border-white/10 px-3 py-2 text-sm ${f.length===0?"bg-emerald-500 text-slate-900 font-semibold shadow hover:shadow-lg":"text-white/90 hover:bg-white/5"}`,children:"Quick Start"}),i.jsx("button",{onClick:()=>w(!0),className:"ml-2 rounded-lg border border-white/10 text-white/90 px-3 py-2 text-sm hover:bg-white/5",children:"Preview Menu"}),i.jsx("button",{onClick:R,className:"ml-2 rounded-lg border border-white/10 text-white/90 px-3 py-2 text-sm hover:bg-white/5",children:"+ Category"}),i.jsx("button",{onClick:ae,className:"rounded-lg bg-gradient-to-r from-emerald-400 via-teal-300 to-cyan-400 text-slate-900 px-3 py-2 text-sm font-semibold shadow hover:shadow-lg",children:"+ Item"})]})}),m==="manual"&&i.jsxs("div",{className:"relative z-20 flex min-h-[calc(100vh-160px)] px-4 md:px-6 pb-4",children:[i.jsxs("div",{className:"w-1/4 min-w-[210px] bg-white/5 backdrop-blur flex flex-col shadow-[inset_-1px_0_rgba(255,255,255,0.06)] rounded-xl border border-white/10",children:[i.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-white/10",children:[i.jsx("h2",{className:"text-lg font-semibold tracking-wide text-white/90",children:"Categories"}),i.jsx(U.button,{whileHover:{scale:1.1,rotate:5},whileTap:{scale:.95},className:"rounded-full bg-emerald-500 text-white w-8 h-8 flex items-center justify-center shadow-md",onClick:R,title:"Add Category",children:i.jsx("span",{className:"text-xl font-bold",children:"+"})})]}),i.jsxs("div",{className:"flex-1 overflow-y-auto px-2 py-3",children:[l.length===0&&i.jsx("div",{className:"text-center text-white/40 mt-8",children:"No categories"}),l.map(I=>i.jsxs(U.div,{layout:!0,initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{type:"spring",damping:22,stiffness:200},className:`group flex items-center mb-2 last:mb-0 rounded-lg px-3 py-2 cursor-pointer transition ${d===I.id?"ring-2 ring-emerald-400/60 bg-white/10":"hover:bg-white/5"}`,onClick:()=>u(I.id),children:[i.jsx("span",{className:"mr-2 text-white/90",children:i.jsx(ri,{token:I.icon||Hr(I.id),fallback:jf(I.id),className:"w-5 h-5"})}),i.jsx("span",{className:"flex-1 font-medium text-white/90 truncate",children:I.name}),i.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity ml-2",children:[i.jsx("button",{className:"text-xs text-white/60 hover:text-emerald-300 px-1",onClick:X=>{X.stopPropagation(),E(I)},title:"Edit",children:i.jsx("svg",{width:"16",height:"16",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:i.jsx("path",{d:"M15.232 5.232l3.536 3.536M16.732 3.732a2.5 2.5 0 113.536 3.536L7 21H3v-4L16.732 3.732z"})})}),i.jsx("button",{className:"text-xs text-white/60 hover:text-red-400 px-1",onClick:X=>{X.stopPropagation(),te(I.id)},title:"Delete",children:i.jsx("svg",{width:"16",height:"16",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:i.jsx("path",{d:"M6 18L18 6M6 6l12 12"})})})]})]},I.id))]})]}),i.jsxs("div",{className:"flex-1 flex flex-col ml-4 rounded-xl border border-white/10 bg-white/5 backdrop-blur",children:[i.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-white/10",children:[i.jsx("h2",{className:"text-lg font-semibold tracking-wide text-white/90",children:we?we.name:"Select a Category"}),i.jsx("div",{className:"md:hidden flex-1"}),i.jsx("div",{className:"md:hidden flex items-center gap-2",children:i.jsxs("div",{className:"relative",children:[i.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-white/40",children:"ðŸ”"}),i.jsx("input",{value:t,onChange:I=>r(I.target.value),placeholder:"Search itemsâ€¦",className:"pl-9 pr-3 py-2 rounded-xl border border-white/10 bg-white/5 text-white/90 placeholder:text-white/40 backdrop-blur outline-none text-sm focus:ring-2 focus:ring-emerald-300/40"})]})})]}),i.jsx("div",{className:"flex-1 overflow-y-auto p-6 bg-[radial-gradient(1200px_600px_at_60%_20%,rgba(16,185,129,0.06),transparent),radial-gradient(1000px_500px_at_80%_80%,rgba(6,182,212,0.05),transparent)]",children:we?n==="grid"?i.jsx(U.div,{layout:!0,className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-5",children:i.jsxs(Ue,{children:[mt.length===0&&i.jsx(U.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"col-span-full text-center text-white/40 mt-8",children:"No items match your filters."},"no-items"),mt.map(I=>i.jsxs(U.div,{layout:!0,initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:20},transition:{type:"spring",damping:18,stiffness:160},className:`relative flex flex-col rounded-2xl p-4 group border border-white/10 bg-white/5 text-white/90 shadow-[0_10px_30px_rgba(0,0,0,0.35)] backdrop-blur transition transform hover:-translate-y-1 hover:shadow-[0_18px_46px_rgba(20,184,166,0.35)] ${I.available===!1?"opacity-60":""}`,children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[ar(I.type)==="veg"?i.jsx("span",{className:"w-3 h-3 bg-emerald-400 rounded-full border border-emerald-600",title:"Veg"}):i.jsx("span",{className:"w-3 h-3 bg-red-400 rounded-full border border-red-600",title:"Non-Veg"}),i.jsx("span",{className:"text-sm font-semibold truncate",children:I.name})]}),I.image&&i.jsx("img",{src:I.image,alt:I.name,className:"w-full h-28 object-cover rounded-lg mb-2 border border-white/10",onError:X=>X.currentTarget.style.display="none"}),i.jsx("div",{className:"flex-1"}),i.jsxs("div",{className:"flex justify-between items-center mt-2",children:[i.jsxs("span",{className:"text-base font-bold",children:["â‚¹",I.price]}),i.jsxs("span",{className:"text-xs text-white/60",children:["Tax: ",I.tax,"%"]})]}),i.jsxs("div",{className:"mt-3 flex items-center justify-between",children:[i.jsxs("label",{className:"flex items-center gap-2 text-xs text-white/70",children:[i.jsx("input",{type:"checkbox",checked:I.available!==!1,onChange:()=>$(I)}),"Available"]}),i.jsxs("div",{className:"flex gap-1 opacity-100 md:opacity-0 md:group-hover:opacity-100 transition-opacity",children:[i.jsx("button",{className:"text-xs text-white/60 hover:text-emerald-300 p-1",onClick:()=>Q(I),title:"Edit",children:"âœï¸"}),i.jsx("button",{className:"text-xs text-white/60 hover:text-red-400 p-1",onClick:()=>oe(I.id),title:"Delete",children:"ðŸ—‘ï¸"})]})]})]},I.id))]})}):i.jsx("div",{className:"divide-y rounded-xl border border-white/10",children:mt.map(I=>i.jsxs("div",{className:`flex items-center gap-3 p-3 ${I.available===!1?"opacity-60":""}`,children:[I.image?i.jsx("img",{src:I.image,alt:I.name,className:"w-14 h-14 rounded object-cover border border-white/10"}):i.jsx("div",{className:"w-14 h-14 rounded bg-white/5 border border-white/10"}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("div",{className:"font-medium text-white/90 truncate",children:I.name}),i.jsxs("div",{className:"text-xs text-white/60",children:["Tax ",I.tax,"% â€¢ ",ar(I.type)==="veg"?"veg":"non-veg"]})]}),i.jsxs("div",{className:"w-24 text-right font-semibold text-white/90",children:["â‚¹",I.price]}),i.jsxs("label",{className:"ml-2 flex items-center gap-1 text-xs text-white/70",children:[i.jsx("input",{type:"checkbox",checked:I.available!==!1,onChange:()=>$(I)}),"Available"]}),i.jsx("button",{className:"ml-2 text-xs text-white/60 hover:text-emerald-300",onClick:()=>Q(I),children:"Edit"}),i.jsx("button",{className:"ml-1 text-xs text-white/60 hover:text-red-400",onClick:()=>oe(I.id),children:"Delete"})]},I.id))}):i.jsx("div",{className:"text-center text-white/40 mt-8",children:"Select a category to view items."})})]})]}),m==="quick"&&i.jsx("div",{className:"relative z-20 mx-4 md:mx-6 mb-4",children:i.jsxs("div",{className:"rounded-2xl border border-white/10 bg-slate-950/80 text-white shadow-xl overflow-hidden",children:[i.jsxs("div",{className:"px-5 py-4 border-b border-white/10 bg-slate-900/60 backdrop-blur flex items-center gap-3",children:[i.jsx("h3",{className:"text-lg font-semibold",children:"Quick Start"}),i.jsx("span",{className:"text-white/60 text-sm",children:"Create your menu in minutes"})]}),i.jsxs("div",{className:"p-6 grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{children:[i.jsx("div",{className:"mb-3 text-white/80 font-medium",children:"Use a template"}),i.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:Object.entries(Nf).map(([I,X])=>i.jsxs("button",{onClick:()=>_(I),className:"text-left rounded-xl border border-white/10 bg-white/5 hover:bg-white/10 transition p-4 w-full",children:[i.jsx("div",{className:"text-base font-semibold mb-1",children:X.label}),i.jsx("div",{className:"text-sm text-white/70",children:X.description}),i.jsxs("div",{className:"mt-3 text-xs text-white/50",children:[X.categories.length," categories â€¢ ",X.items.length," items"]})]},I))})]}),i.jsxs("div",{children:[i.jsx("div",{className:"mb-3 text-white/80 font-medium",children:"Import from CSV / Sheet"}),i.jsxs("div",{className:"rounded-xl border border-white/10 bg-white/5 p-4",children:[i.jsx("p",{className:"text-sm text-white/70",children:"Upload a CSV with columns:"}),i.jsxs("pre",{className:"mt-2 text-xs text-white/60 bg-black/30 rounded p-3 overflow-x-auto",children:["name,categoryId,price,tax,type,image,available",`
`,"Idli,veg,40,5,veg,,true"]}),i.jsxs("div",{className:"mt-3 flex items-center gap-2",children:[i.jsx("input",{ref:F,type:"file",accept:".csv",className:"hidden",onChange:I=>Y(I.target.files?.[0])}),i.jsx("button",{className:"rounded-lg bg-gradient-to-r from-emerald-400 via-teal-300 to-cyan-400 text-slate-900 px-3 py-2 text-sm font-semibold shadow hover:shadow-lg",onClick:()=>F.current?.click(),children:"Upload CSV"})]})]}),i.jsxs("div",{className:"mt-6 rounded-xl border border-white/10 bg-white/5 p-4",children:[i.jsx("div",{className:"mb-2 text-white/80 font-medium",children:"Start empty"}),i.jsx("p",{className:"text-sm text-white/70 mb-3",children:"Add categories and items manually. You can always open Quick Start later."})]})]})]})]})}),m==="ai"&&i.jsx("div",{className:"relative z-20 mx-4 md:mx-6 mb-4",children:i.jsxs("div",{className:"rounded-2xl border border-white/10 bg-slate-950/80 text-white shadow-xl overflow-hidden p-6",children:[i.jsx("h3",{className:"text-lg font-semibold mb-4",children:"âœ¨ AI Menu Generator"}),i.jsx("p",{className:"text-sm text-white/70 mb-4",children:"Describe your place and weâ€™ll scaffold categories and items for you."}),i.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-white/70 text-xs mb-1",children:"Industry"}),i.jsxs("select",{className:"w-full border border-white/10 bg-white/5 text-white rounded px-2 py-2 text-sm",value:B.industry,onChange:I=>M(X=>({...X,industry:I.target.value})),children:[i.jsx("option",{value:"restaurant",children:"Restaurant"}),i.jsx("option",{value:"cafe",children:"CafÃ©"}),i.jsx("option",{value:"pizzeria",children:"Pizzeria"}),i.jsx("option",{value:"fastfood",children:"Fast Food"}),i.jsx("option",{value:"bar",children:"Bar"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-white/70 text-xs mb-1",children:"Cuisine"}),i.jsxs("select",{className:"w-full border border-white/10 bg-white/5 text-white rounded px-2 py-2 text-sm",value:B.cuisine,onChange:I=>M(X=>({...X,cuisine:I.target.value})),children:[i.jsx("option",{value:"north",children:"North Indian"}),i.jsx("option",{value:"south",children:"South Indian"}),i.jsx("option",{value:"continental",children:"Continental"}),i.jsx("option",{value:"mixed",children:"Mixed"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-white/70 text-xs mb-1",children:"Price band"}),i.jsxs("select",{className:"w-full border border-white/10 bg-white/5 text-white rounded px-2 py-2 text-sm",value:B.priceBand,onChange:I=>M(X=>({...X,priceBand:I.target.value})),children:[i.jsx("option",{value:"low",children:"Low"}),i.jsx("option",{value:"mid",children:"Mid"}),i.jsx("option",{value:"high",children:"High"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-white/70 text-xs mb-1",children:"Veg ratio (%)"}),i.jsx("input",{type:"number",min:"0",max:"100",className:"w-full border border-white/10 bg-white/5 text-white rounded px-2 py-2 text-sm",value:B.vegRatio,onChange:I=>M(X=>({...X,vegRatio:I.target.value}))})]})]}),i.jsx("button",{className:"rounded-lg bg-gradient-to-r from-emerald-400 via-teal-300 to-cyan-400 text-slate-900 px-3 py-2 text-sm font-semibold shadow hover:shadow-lg",onClick:ee,children:"Generate Menu"})]})}),i.jsx(Ue,{children:L&&i.jsx(U.div,{className:"fixed inset-0 z-40 flex items-center justify-center bg-black/60",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:i.jsxs(U.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{type:"spring",stiffness:200,damping:24},className:"bg-slate-900 text-white border border-white/10 rounded-xl shadow-2xl w-[28rem] p-6",onClick:I=>I.stopPropagation(),children:[i.jsx("h3",{className:"text-lg font-semibold mb-4",children:y==="add"?"Add Category":"Edit Category"}),i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{className:"block text-white/70 text-xs mb-1",children:"Name"}),i.jsx("input",{type:"text",className:"w-full border border-white/10 bg-white/5 text-white placeholder:text-white/40 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-emerald-300/40",placeholder:"Category name",value:j.name,onChange:I=>k(X=>({...X,name:I.target.value})),autoFocus:!0})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("label",{className:"block text-white/70 text-xs",children:"Icon"}),i.jsxs("div",{className:"flex items-center gap-2 text-xs text-white/60",children:[i.jsx("span",{children:"Selected:"}),i.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded bg-white/5 border border-white/10",children:[i.jsx(ri,{token:j.icon||"empty",fallback:"ðŸ½ï¸"}),i.jsx("code",{className:"opacity-70",children:j.icon||"none"})]})]})]}),i.jsx("div",{className:"grid grid-cols-8 gap-2 max-h-40 overflow-y-auto p-2 rounded border border-white/10 bg-white/5",children:F1.map(I=>i.jsx("button",{type:"button",className:`p-2 rounded border transition ${j.icon===I?"border-emerald-400 bg-emerald-500/20":"border-white/10 bg-white/5 hover:bg-white/10"}`,onClick:()=>k(X=>({...X,icon:I})),title:I,children:i.jsx(ri,{token:I,fallback:"ðŸ½ï¸"})},I))})]}),i.jsxs("div",{className:"flex justify-end gap-2 mt-5",children:[i.jsx("button",{className:"px-4 py-2 rounded bg-white/5 hover:bg-white/10 text-white/80",onClick:()=>G(!1),children:"Cancel"}),i.jsx(U.button,{whileHover:{scale:1.04},whileTap:{scale:.96},className:"px-4 py-2 rounded bg-emerald-500 hover:bg-emerald-600 text-white font-medium",onClick:re,children:y==="add"?"Add":"Save"})]})]})})}),i.jsx(Ue,{children:N&&i.jsx(U.div,{className:"fixed inset-0 z-40 flex items-center justify-center bg-black/60",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:i.jsxs(U.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{type:"spring",stiffness:200,damping:24},className:"bg-slate-900 text-white border border-white/10 rounded-2xl shadow-2xl w-96 p-7",onClick:I=>I.stopPropagation(),children:[i.jsx("h3",{className:"text-lg font-semibold mb-4",children:D==="add"?"Add Item":"Edit Item"}),i.jsxs("form",{onSubmit:I=>{I.preventDefault(),Ee()},children:[i.jsxs("div",{className:"mb-3",children:[i.jsx("label",{className:"block text-white/70 text-sm mb-1",children:"Name"}),i.jsx("input",{type:"text",className:"w-full border border-white/10 bg-white/5 text-white placeholder:text-white/40 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-emerald-300/40",placeholder:"Item name",value:O.name,onChange:I=>A(X=>({...X,name:I.target.value})),required:!0})]}),i.jsxs("div",{className:"mb-3 flex gap-3",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("label",{className:"block text-white/70 text-sm mb-1",children:"Price (â‚¹)"}),i.jsx("input",{type:"number",min:"0",step:"0.01",className:"w-full border border-white/10 bg-white/5 text-white placeholder:text-white/40 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-emerald-300/40",placeholder:"Price",value:O.price,onChange:I=>A(X=>({...X,price:I.target.value.replace(/^0+(?!\.)/,"")})),required:!0})]}),i.jsxs("div",{className:"w-24",children:[i.jsx("label",{className:"block text-white/70 text-sm mb-1",children:"Tax %"}),i.jsx("input",{type:"number",min:"0",step:"0.01",className:"w-full border border-white/10 bg-white/5 text-white placeholder:text-white/40 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-emerald-300/40",placeholder:"Tax",value:O.tax,onChange:I=>A(X=>({...X,tax:I.target.value.replace(/^0+(?!\.)/,"")}))})]})]}),i.jsxs("div",{className:"mb-3 flex gap-3",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("label",{className:"block text-white/70 text-sm mb-1",children:"Type"}),i.jsxs("select",{className:"w-full border border-white/10 bg-white/5 text-white placeholder:text-white/40 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-emerald-300/40",value:O.type,onChange:I=>A(X=>({...X,type:I.target.value})),children:[i.jsx("option",{value:"veg",children:"Veg"}),i.jsx("option",{value:"nonveg",children:"Non-Veg"})]})]}),i.jsxs("div",{className:"flex-1",children:[i.jsx("label",{className:"block text-white/70 text-sm mb-1",children:"Image URL"}),i.jsx("input",{type:"url",className:"w-full border border-white/10 bg-white/5 text-white placeholder:text-white/40 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-emerald-300/40",placeholder:"https://...",value:O.image,onChange:I=>A(X=>({...X,image:I.target.value}))})]})]}),i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsxs("label",{className:"flex items-center gap-2 text-xs text-white/70",children:[i.jsx("input",{type:"checkbox",checked:O.available!==!1,onChange:I=>A(X=>({...X,available:I.target.checked}))}),"Available"]}),i.jsxs("div",{className:"text-xs text-white/50",children:["Category: ",we?.name||"â€”"]})]}),i.jsxs("div",{className:"flex justify-end gap-2 mt-1",children:[i.jsx("button",{type:"button",className:"px-4 py-2 rounded bg-white/5 hover:bg-white/10 text-white/80",onClick:()=>P(!1),children:"Cancel"}),i.jsx(U.button,{whileHover:{scale:1.04},whileTap:{scale:.96},type:"submit",className:"px-4 py-2 rounded bg-emerald-500 hover:bg-emerald-600 text-white font-medium",children:D==="add"?"Add":"Save"})]})]})]})})}),i.jsx(Ue,{children:v&&i.jsx(U.div,{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:i.jsxs(U.div,{initial:{y:30,opacity:0},animate:{y:0,opacity:1},exit:{y:30,opacity:0},transition:{type:"spring",stiffness:220,damping:24},className:"relative w-[92vw] max-w-6xl max-h-[86vh] overflow-hidden rounded-2xl border border-white/10 bg-slate-950 text-white shadow-2xl",children:[i.jsxs("div",{className:"flex items-center gap-3 px-5 py-3 border-b border-white/10 bg-slate-900/60 backdrop-blur",children:[i.jsx("h3",{className:"text-lg font-semibold",children:"Live Menu Preview"}),i.jsx("span",{className:"text-white/50 text-sm",children:"(what your staff/guests see)"}),i.jsx("div",{className:"flex-1"}),i.jsx("button",{onClick:()=>w(!1),className:"rounded-lg px-3 py-2 text-sm bg-white/10 hover:bg-white/15",children:"Close"})]}),i.jsxs("div",{className:"flex h-[72vh]",children:[i.jsx("div",{className:"w-56 border-r border-white/10 p-4 bg-white/5",children:i.jsx("div",{className:"space-y-2",children:l.map(I=>i.jsx("button",{onClick:()=>H(I.id),className:`w-full text-left px-3 py-2 rounded-lg transition border ${W===I.id?"bg-emerald-500/15 border-emerald-300/30":"bg-white/5 border-white/10 hover:bg-white/10"}`,children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(ri,{token:I.icon||Hr(I.id),fallback:jf(I.id)}),i.jsx("span",{className:"truncate",children:I.name})]})},I.id))})}),i.jsxs("div",{className:"flex-1 p-5 overflow-y-auto bg-[radial-gradient(1200px_600px_at_60%_20%,rgba(16,185,129,0.06),transparent),radial-gradient(1000px_500px_at_80%_80%,rgba(6,182,212,0.05),transparent)]",children:[i.jsxs("div",{className:"mb-4 flex items-center gap-3",children:[i.jsxs("div",{className:"relative max-w-sm w-full",children:[i.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-white/40",children:"ðŸ”"}),i.jsx("input",{value:t,onChange:I=>r(I.target.value),placeholder:"Search itemsâ€¦",className:"w-full pl-9 pr-3 py-2 rounded-xl border border-white/10 bg-white/5 text-white/90 placeholder:text-white/40 backdrop-blur outline-none text-sm focus:ring-2 focus:ring-emerald-300/40"})]}),i.jsxs("div",{className:"text-white/60 text-sm",children:[f.filter(I=>I.categoryId===W&&(s||le(I))).length," items"]}),i.jsx("div",{className:"flex-1"}),i.jsxs("label",{className:"flex items-center gap-2 text-sm text-white/80",children:[i.jsx("input",{type:"checkbox",className:"accent-emerald-400",checked:s,onChange:I=>o(I.target.checked)}),"Show unavailable"]}),i.jsx("button",{onClick:ae,className:"rounded-lg bg-gradient-to-r from-emerald-400 via-teal-300 to-cyan-400 text-slate-900 px-3 py-2 text-sm font-semibold shadow hover:shadow-lg",children:"+ Item"})]}),i.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-5",children:f.filter(I=>I.categoryId===W).filter(I=>s||le(I)).filter(I=>!t.trim()||I.name.toLowerCase().includes(t.toLowerCase())).map(I=>i.jsxs("div",{className:`relative rounded-2xl p-4 border border-white/10 bg-white/5 backdrop-blur shadow-[0_10px_30px_rgba(0,0,0,0.35)] ${le(I)?"":"opacity-60"}`,children:[I.image&&i.jsx("img",{src:I.image,alt:I.name,className:"w-full h-28 object-cover rounded-lg mb-2 border border-white/10",onError:X=>X.target.style.display="none"}),i.jsxs("div",{className:"flex items-center gap-2",children:[I.type==="veg"?i.jsx("span",{className:"w-3 h-3 bg-emerald-400 rounded-full border border-emerald-600"}):i.jsx("span",{className:"w-3 h-3 bg-red-400 rounded-full border border-red-600"}),i.jsx("div",{className:"font-medium truncate",children:I.name}),i.jsxs("div",{className:"ml-auto font-semibold",children:["â‚¹",I.price]})]}),i.jsxs("div",{className:"mt-3 flex items-center justify-between",children:[i.jsxs("label",{className:"flex items-center gap-2 text-xs text-white/70",children:[i.jsx("input",{type:"checkbox",checked:le(I),onChange:()=>$(I)}),"Available"]}),i.jsxs("div",{className:"flex gap-2 text-xs",children:[i.jsx("button",{className:"text-white/60 hover:text-emerald-300",onClick:()=>Q(I),children:"Edit"}),i.jsx("button",{className:"text-white/60 hover:text-red-400",onClick:()=>oe(I.id),children:"Delete"})]})]})]},I.id))})]})]})]})})})]})};function z1({onBack:e}){const[t,r]=pe.useState([]),[n,a]=pe.useState("all"),s=()=>xe.currentUser?.uid;pe.useEffect(()=>{const f=s();if(!f)return;const h=ue(J,"businesses",f,"kitchenOrders");let m;try{m=_e(h,gt("status","!=","completed"),$t("status"),$t("createdAt","asc"))}catch{m=_e(h,$t("createdAt","desc"))}const b=ht(m,g=>{const p=[];g.forEach(v=>{const w=v.data();w.status!=="completed"&&p.push({id:v.id,...w})}),p.sort((v,w)=>{const y={pending:0,preparing:1,ready:2,served:3},S=y[v.status]??4,j=y[w.status]??4;return S!==j?S-j:(v.createdAt||0)-(w.createdAt||0)}),r(p)},g=>{console.error("Error fetching orders:",g);const p=_e(h,$t("createdAt","desc"));ht(p,v=>{const w=[];v.forEach(y=>{const S=y.data();S.status!=="completed"&&w.push({id:y.id,...S})}),r(w)})});return()=>b()},[]);const o=async(f,h)=>{const m=s();if(m)try{const b=ve(J,"businesses",m,"kitchenOrders",f);await lt(b,{status:h,updatedAt:Date.now(),...h==="ready"&&{readyAt:Date.now()},...h==="served"&&{servedAt:Date.now()}})}catch(b){console.error("Error updating order status:",b),alert("Failed to update order status")}},l=n==="all"?t:t.filter(f=>f.status===n),c={pending:t.filter(f=>f.status==="pending").length,preparing:t.filter(f=>f.status==="preparing").length,ready:t.filter(f=>f.status==="ready").length},d=f=>{switch(f){case"pending":return"border-amber-500/50 bg-amber-500/10";case"preparing":return"border-blue-500/50 bg-blue-500/10";case"ready":return"border-emerald-500/50 bg-emerald-500/10";case"served":return"border-slate-500/50 bg-slate-500/10";default:return"border-white/10 bg-white/5"}},u=f=>{switch(f){case"pending":return"Pending";case"preparing":return"Preparing";case"ready":return"Ready";case"served":return"Served";default:return f}};return i.jsxs("div",{className:"relative w-full min-h-screen bg-transparent",children:[i.jsxs("div",{className:"pointer-events-none fixed inset-0 opacity-[0.9]",children:[i.jsx("div",{className:"absolute -top-1/3 -left-1/4 w-[70%] h-[70%] rounded-full blur-3xl bg-orange-500/20"}),i.jsx("div",{className:"absolute -bottom-1/3 -right-1/4 w-[70%] h-[70%] rounded-full blur-3xl bg-red-500/20"})]}),i.jsx("div",{className:"sticky top-0 z-20 bg-slate-900/80 backdrop-blur-sm border-b border-white/10",children:i.jsxs("div",{className:"px-4 py-3 flex items-center gap-3",children:[e&&i.jsx("button",{onClick:e,className:"rounded-lg bg-gradient-to-r from-orange-400 via-red-300 to-pink-400 text-slate-900 px-4 py-2 text-sm font-semibold shadow hover:shadow-lg transition",children:"â† Back"}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-lg font-semibold text-white/90",children:"Kitchen Display System"}),i.jsx("p",{className:"text-xs text-white/60",children:"Manage orders in real-time"})]}),i.jsx("div",{className:"flex-1"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs("button",{onClick:()=>a("all"),className:`px-3 py-1.5 rounded-lg text-xs font-semibold transition ${n==="all"?"bg-white/20 text-white":"bg-white/5 text-white/60 hover:bg-white/10"}`,children:["All (",t.length,")"]}),i.jsxs("button",{onClick:()=>a("pending"),className:`px-3 py-1.5 rounded-lg text-xs font-semibold transition ${n==="pending"?"bg-amber-500/20 text-amber-300":"bg-white/5 text-white/60 hover:bg-white/10"}`,children:["Pending (",c.pending,")"]}),i.jsxs("button",{onClick:()=>a("preparing"),className:`px-3 py-1.5 rounded-lg text-xs font-semibold transition ${n==="preparing"?"bg-blue-500/20 text-blue-300":"bg-white/5 text-white/60 hover:bg-white/10"}`,children:["Preparing (",c.preparing,")"]}),i.jsxs("button",{onClick:()=>a("ready"),className:`px-3 py-1.5 rounded-lg text-xs font-semibold transition ${n==="ready"?"bg-emerald-500/20 text-emerald-300":"bg-white/5 text-white/60 hover:bg-white/10"}`,children:["Ready (",c.ready,")"]})]})]})}),i.jsx("div",{className:"relative z-10 p-6",children:i.jsx("div",{className:"max-w-7xl mx-auto",children:l.length===0?i.jsxs("div",{className:"text-center py-20 text-white/60",children:[i.jsx("div",{className:"text-6xl mb-4",children:"ðŸ‘¨â€ðŸ³"}),i.jsx("div",{className:"text-xl font-semibold mb-2",children:"No orders"}),i.jsx("div",{className:"text-sm",children:"Orders from POS will appear here"})]}):i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:i.jsx(Ue,{children:l.map(f=>i.jsxs(U.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,scale:.9},className:`rounded-xl border p-4 ${d(f.status)}`,children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsxs("div",{children:[i.jsx("div",{className:"font-semibold text-white text-lg",children:f.customerName||f.tableId||"Order"}),f.tableId&&i.jsxs("div",{className:"text-xs text-white/60 mt-1",children:["Table: ",f.tableId]})]}),i.jsx("div",{className:`px-2 py-1 rounded text-xs font-semibold ${f.status==="pending"?"bg-amber-500/20 text-amber-300":f.status==="preparing"?"bg-blue-500/20 text-blue-300":f.status==="ready"?"bg-emerald-500/20 text-emerald-300":"bg-slate-500/20 text-slate-300"}`,children:u(f.status)})]}),i.jsx("div",{className:"space-y-2 mb-4",children:(f.items||f.lines||[]).map((h,m)=>i.jsxs("div",{className:"flex items-center justify-between text-sm",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("span",{className:"text-white/60",children:["Ã—",h.qty||h.quantity||1]}),i.jsx("span",{className:"text-white",children:h.product?.name||h.product?.productName||h.name||"Item"})]}),h.note&&i.jsxs("span",{className:"text-xs text-white/40 italic",children:["(",h.note,")"]})]},m))}),i.jsx("div",{className:"text-xs text-white/40 mb-3",children:f.createdAt?new Date(f.createdAt).toLocaleTimeString():"Just now"}),i.jsxs("div",{className:"flex gap-2",children:[f.status==="pending"&&i.jsx("button",{onClick:()=>o(f.id,"preparing"),className:"flex-1 px-3 py-2 rounded-lg bg-blue-500/20 hover:bg-blue-500/30 text-blue-300 text-sm font-semibold transition",children:"Start Preparing"}),f.status==="preparing"&&i.jsx("button",{onClick:()=>o(f.id,"ready"),className:"flex-1 px-3 py-2 rounded-lg bg-emerald-500/20 hover:bg-emerald-500/30 text-emerald-300 text-sm font-semibold transition",children:"Mark Ready"}),f.status==="ready"&&i.jsx("button",{onClick:()=>o(f.id,"served"),className:"flex-1 px-3 py-2 rounded-lg bg-slate-500/20 hover:bg-slate-500/30 text-slate-300 text-sm font-semibold transition",children:"Mark Served"})]})]},f.id))})})})})]})}function V1({onBack:e}){const[t,r]=pe.useState("home");return t==="menu"?i.jsx(U1,{onBack:()=>r("home")}):t==="orders"?i.jsx(z1,{onBack:()=>r("home")}):i.jsxs("div",{className:"relative w-full min-h-screen bg-transparent",children:[i.jsxs("div",{className:"pointer-events-none fixed inset-0 opacity-[0.9]",children:[i.jsx("div",{className:"absolute -top-1/3 -left-1/4 w-[70%] h-[70%] rounded-full blur-3xl bg-orange-500/20"}),i.jsx("div",{className:"absolute -bottom-1/3 -right-1/4 w-[70%] h-[70%] rounded-full blur-3xl bg-red-500/20"}),i.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(ellipse_at_bottom,_rgba(249,115,22,0.08),_transparent_50%),radial-gradient(ellipse_at_top,_rgba(239,68,68,0.05),_transparent_40%)]"}),i.jsx("div",{className:"absolute inset-0 pointer-events-none bg-[radial-gradient(circle_at_center,rgba(0,0,0,0)_45%,rgba(0,0,0,0.32))]"}),i.jsx("div",{className:"absolute inset-0",children:[...Array(24)].map((n,a)=>i.jsx("div",{className:"absolute w-1 h-1 rounded-full bg-white/20",style:{top:`${a*37%100}%`,left:`${a*53%100}%`,opacity:.5,transform:`scale(${.6+a%5*.1})`}},a))})]}),i.jsx("div",{className:"sticky top-0 z-20 bg-transparent backdrop-blur-sm border-b border-white/10",children:i.jsxs("div",{className:"px-4 py-3 flex items-center gap-3",children:[e&&i.jsx("button",{onClick:e,className:"rounded-lg bg-gradient-to-r from-orange-400 via-red-300 to-pink-400 text-slate-900 px-4 py-2 text-sm font-semibold shadow hover:shadow-lg transition",children:"â† Back to POS"}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-lg font-semibold text-white/90",children:"Kitchen Display System"}),i.jsx("p",{className:"text-xs text-white/60",children:"Manage menus and kitchen orders"})]}),i.jsx("div",{className:"flex-1"})]})}),i.jsx("div",{className:"relative z-10 min-h-[calc(100vh-128px)] flex items-start justify-center p-6",children:i.jsxs("div",{className:"max-w-5xl w-full grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs(U.button,{whileHover:{scale:1.02,y:-2},whileTap:{scale:.98},onClick:()=>r("menu"),className:"group relative text-left rounded-2xl border border-white/10 bg-gradient-to-br from-slate-900/60 to-slate-800/40 backdrop-blur-xl p-6 shadow-lg hover:shadow-orange-500/30 transition min-h-[140px]",children:[i.jsx("div",{className:"absolute inset-0 rounded-2xl bg-gradient-to-r from-orange-400/10 via-red-400/10 to-transparent opacity-0 group-hover:opacity-100 blur-xl transition"}),i.jsxs("div",{className:"relative z-10",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[i.jsx("span",{className:"text-3xl",children:"ðŸ“œ"}),i.jsxs("div",{className:"text-white",children:[i.jsx("div",{className:"text-lg font-semibold",children:"Menu Builder"}),i.jsx("div",{className:"text-sm text-white/70",children:"Create & manage categories and items, toggle availability, preview live menu."})]})]}),i.jsxs("div",{className:"mt-4 inline-flex items-center gap-2 text-orange-300 font-medium",children:["Open ",i.jsx("span",{children:"â†’"})]})]})]}),i.jsxs(U.button,{whileHover:{scale:1.02,y:-2},whileTap:{scale:.98},onClick:()=>r("orders"),className:"group relative text-left rounded-2xl border border-white/10 bg-gradient-to-br from-slate-900/60 to-slate-800/40 backdrop-blur-xl p-6 shadow-lg hover:shadow-red-500/30 transition min-h-[140px]",children:[i.jsx("div",{className:"absolute inset-0 rounded-2xl bg-gradient-to-r from-red-400/10 via-pink-400/10 to-transparent opacity-0 group-hover:opacity-100 blur-xl transition"}),i.jsxs("div",{className:"relative z-10",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[i.jsx("span",{className:"text-3xl",children:"ðŸ‘¨â€ðŸ³"}),i.jsxs("div",{className:"text-white",children:[i.jsx("div",{className:"text-lg font-semibold",children:"Kitchen Order Board"}),i.jsx("div",{className:"text-sm text-white/70",children:"View and manage orders in real-time. Track status: Pending â†’ Preparing â†’ Ready â†’ Served."})]})]}),i.jsxs("div",{className:"mt-4 inline-flex items-center gap-2 text-red-300 font-medium",children:["Open ",i.jsx("span",{children:"â†’"})]})]})]}),i.jsxs("div",{className:"relative rounded-2xl border border-white/10 bg-gradient-to-br from-slate-800/40 to-slate-900/60 backdrop-blur-xl p-6 text-white/70 shadow-inner min-h-[140px]",children:[i.jsx("span",{className:"absolute top-4 right-4 text-xs px-2 py-1 rounded-full bg-white/10 text-white/60",children:"Coming Soon"}),i.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[i.jsx("span",{className:"text-2xl",children:"ðŸ­"}),i.jsxs("div",{children:[i.jsx("div",{className:"text-lg font-semibold text-white/90",children:"Kitchen Stations"}),i.jsx("div",{className:"text-sm",children:"Assign categories to stations (Tandoor, Fry, Grill) for ticket routing."})]})]})]}),i.jsxs("div",{className:"relative rounded-2xl border border-white/10 bg-gradient-to-br from-slate-800/40 to-slate-900/60 backdrop-blur-xl p-6 text-white/70 shadow-inner min-h-[140px]",children:[i.jsx("span",{className:"absolute top-4 right-4 text-xs px-2 py-1 rounded-full bg-white/10 text-white/60",children:"Coming Soon"}),i.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[i.jsx("span",{className:"text-2xl",children:"âš™ï¸"}),i.jsxs("div",{children:[i.jsx("div",{className:"text-lg font-semibold text-white/90",children:"KDS Settings"}),i.jsx("div",{className:"text-sm",children:"Theme, tax defaults, printers and shortcuts."})]})]})]})]})})]})}const Kr=()=>xe.currentUser?.uid,W1=(e="veg")=>String(e).toLowerCase().replace(/\s+/g,"").replace("-","")==="nonveg"?"nonveg":"veg",H1=({token:e,fallback:t,className:r="w-4 h-4"})=>{if(e){const n=ig(e);if(n)return i.jsx("span",{className:r,dangerouslySetInnerHTML:{__html:n}});const a=sg(e);return i.jsx("span",{className:r,style:{display:"inline-flex",alignItems:"center",justifyContent:"center"},children:a})}return i.jsx("span",{className:r,style:{display:"inline-flex",alignItems:"center",justifyContent:"center"},children:t||"ðŸ½ï¸"})},go=e=>(e??0).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}),Sf={pending:"bg-blue-500/20 text-blue-300 border-blue-500/50",preparing:"bg-amber-500/20 text-amber-300 border-amber-500/50",ready:"bg-emerald-500/20 text-emerald-300 border-emerald-500/50",served:"bg-slate-500/20 text-slate-300 border-slate-500/50"},K1={pending:"Pending",preparing:"Preparing",ready:"Ready",served:"Served"};function Y1({open:e,onClose:t,children:r,size:n="md"}){if(!e)return null;const a={sm:"max-w-md",md:"max-w-lg",lg:"max-w-2xl",xl:"max-w-4xl"};return i.jsx("div",{className:"fixed inset-0 z-[9999] bg-black/60 backdrop-blur-md flex items-center justify-center p-4",onClick:t,children:i.jsx(U.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},className:`w-full ${a[n]} max-h-[90vh] overflow-y-auto rounded-2xl border border-white/10 bg-gradient-to-br from-slate-900/95 to-slate-800/95 backdrop-blur-xl p-6 shadow-2xl ring-1 ring-white/5`,onClick:s=>s.stopPropagation(),children:r})})}function G1({table:e,customer:t,onBack:r,onOrderSentToKitchen:n,billing:a,inventory:s,onTableUpdate:o}){const[l,c]=pe.useState([]),[d,u]=pe.useState([]),[f,h]=pe.useState(""),[m,b]=pe.useState([]),[g,p]=pe.useState([]),[v,w]=pe.useState(""),[y,S]=pe.useState(!1),[j,k]=pe.useState(!1),[N,P]=pe.useState(t||{name:"",phone:"",email:""}),[D,C]=pe.useState(!1),[O,A]=pe.useState(e||{}),[B,M]=pe.useState(null),[F,V]=pe.useState(!1);pe.useEffect(()=>{const $=Kr();if(!$)return;(async()=>{try{const G=ue(J,"businesses",$,"categories"),R=await ye(G),E=[];R.forEach(Q=>{E.push({id:Q.id,...Q.data()})}),c(E),E.length>0&&h(E[0].id);const te=ue(J,"businesses",$,"items"),re=await ye(te),ae=[];re.forEach(Q=>{const oe=Q.data();oe.available!==!1&&ae.push({id:Q.id,...oe})}),u(ae)}catch(G){console.error("Error loading menu data:",G)}})()},[]),pe.useEffect(()=>{e&&A(e)},[e]),pe.useEffect(()=>{if(!e?.id){p([]),M(null);return}const $=Kr();if(!$)return;const L=ue(J,"businesses",$,"kitchenOrders");let G;try{G=_e(L,gt("tableId","==",e.id),gt("status","!=","completed"))}catch{G=_e(L,gt("tableId","==",e.id))}const R=ht(G,E=>{const te=[];E.forEach(ae=>{const Q=ae.data();Q.status!=="completed"&&Q.status!=="served"&&te.push({id:ae.id,...Q})}),te.sort((ae,Q)=>(ae.createdAt||0)-(Q.createdAt||0)),p(te);const re=te.find(ae=>["pending","preparing","ready"].includes(ae.status))||te[0];M(re?.id||null)},E=>{if(console.error("Error loading kitchen orders:",E),E.code==="failed-precondition"){const te=_e(L,gt("tableId","==",e.id));ht(te,re=>{const ae=[];re.forEach(oe=>{const Ee=oe.data();Ee.status!=="completed"&&Ee.status!=="served"&&ae.push({id:oe.id,...Ee})}),ae.sort((oe,Ee)=>(oe.createdAt||0)-(Ee.createdAt||0)),p(ae);const Q=ae.find(oe=>["pending","preparing","ready"].includes(oe.status))||ae[0];M(Q?.id||null)})}});return()=>R()},[e?.id]);const q=pe.useMemo(()=>{let $=d;if(f&&($=$.filter(L=>L.categoryId===f)),v.trim()){const L=v.toLowerCase();$=$.filter(G=>(G.name||"").toLowerCase().includes(L))}return $},[d,f,v]),K=pe.useCallback(($,L=1)=>{b(G=>{const R=G.findIndex(E=>E.product.id===$.id);if(R>=0){const E=[...G];return E[R]={...E[R],qty:E[R].qty+L},E}return[...G,{product:$,qty:L}]})},[]),ne=pe.useCallback($=>{b(L=>L.filter(G=>G.product.id!==$))},[]),Z=pe.useCallback(($,L)=>{if(L<=0){ne($);return}b(G=>G.map(R=>R.product.id===$?{...R,qty:L}:R))},[ne]),T=pe.useMemo(()=>{let $=0,L=0;m.forEach(R=>{const E=Number(R.product.price||0),te=R.qty||1,re=Number(R.product.tax||0)/100,ae=E*te,Q=ae*re;$+=ae,L+=Q});const G=$+L;return{subTotal:+$.toFixed(2),tax:+L.toFixed(2),grandTotal:+G.toFixed(2)}},[m]),_=pe.useCallback(async()=>{if(!e?.id)return;const $=Kr();if($){C(!0);try{const L=ve(J,"businesses",$,"tables",e.id);await lt(L,{name:O.name||`Table ${O.number}`,capacity:Number(O.capacity)||4,zone:O.zone||"main",updatedAt:Date.now()}),k(!1),o&&o()}catch(L){console.error("Error updating table:",L),alert("Failed to update table")}finally{C(!1)}}},[e?.id,O,o]),Y=pe.useCallback(async()=>{if(m.length===0){alert("Cart is empty");return}const $=Kr();if(!$){alert("Not authenticated");return}C(!0);try{const L=ue(J,"businesses",$,"kitchenOrders");if(B){const R=g.find(E=>E.id===B);if(R&&["pending","preparing","ready"].includes(R.status)){const E=R.items||R.lines||[],te=m.map(we=>({product:we.product,qty:we.qty})),re=[...E];te.forEach(we=>{const rt=re.findIndex(mt=>mt.product?.id===we.product?.id);rt>=0?re[rt]={...re[rt],qty:(re[rt].qty||1)+(we.qty||1)}:re.push(we)});let ae=0,Q=0;re.forEach(we=>{const rt=Number(we.product?.price||0),mt=we.qty||1,I=Number(we.product?.tax||0)/100,X=rt*mt,fe=X*I;ae+=X,Q+=fe});const oe=ae+Q,Ee=ve(L,B);await lt(Ee,{items:re,lines:re.map(we=>({product:we.product,qty:we.qty})),totals:{subTotal:+ae.toFixed(2),tax:+Q.toFixed(2),grandTotal:+oe.toFixed(2)},updatedAt:Date.now(),lastAddedAt:Date.now()}),b([]),alert("Items added to existing order!");return}}const G={items:m.map(R=>({product:R.product,qty:R.qty})),lines:m,totals:T,tableId:e?.id||null,customerId:N?.id||null,customerName:N?.name||e?.name||"Walk-in",status:"pending",createdAt:Date.now(),sentAt:Date.now()};await Rr(L,G),n&&await n(G),b([]),alert("Order sent to kitchen!")}catch(L){console.error("Error sending order to kitchen:",L),alert("Failed to send order to kitchen")}finally{C(!1)}},[m,T,e,N,n,B,g]),ee=pe.useCallback(async()=>{if(!e?.id||g.length===0)return;const $=Kr();if($&&confirm(`Close all orders for ${O.name||`Table ${O.number}`}?`)){C(!0);try{const L=g.map(R=>{const E=ve(J,"businesses",$,"kitchenOrders",R.id);return lt(E,{status:"completed",completedAt:Date.now(),updatedAt:Date.now()})});await Promise.all(L);const G=ve(J,"businesses",$,"tables",e.id);await lt(G,{status:"available",updatedAt:Date.now()}),alert("All orders closed. Table is now available."),r&&r()}catch(L){console.error("Error closing orders:",L),alert("Failed to close orders")}finally{C(!1)}}},[e?.id,O,g,r]),W=pe.useCallback(async()=>{if(m.length===0&&g.length===0){alert("No items to checkout");return}if(!a?.createInvoice){alert("Billing service not available");return}C(!0);try{const $=[...m];g.forEach(re=>{(re.items||re.lines||[]).forEach(ae=>{const Q=$.findIndex(oe=>oe.product?.id===ae.product?.id);Q>=0?$[Q]={...$[Q],qty:($[Q].qty||1)+(ae.qty||1)}:$.push({product:ae.product,qty:ae.qty||1})})});let L=0,G=0;$.forEach(re=>{const ae=Number(re.product?.price||0),Q=re.qty||1,oe=Number(re.product?.tax||0)/100,Ee=ae*Q,we=Ee*oe;L+=Ee,G+=we});const R=L+G,E={lines:$,totals:{subTotal:+L.toFixed(2),tax:+G.toFixed(2),grandTotal:+R.toFixed(2)},customer:N,payments:[{method:"Cash",amount:+R.toFixed(2)}],mode:"POS",meta:{source:"restaurant-pos",tableId:e?.id,tableName:O.name||e?.name,businessName:a?.businessInfo?.name||"",businessAddress:a?.businessInfo?.address||"",gstNumber:a?.businessInfo?.gstNumber||""}},{id:te}=await a.createInvoice(E);if(g.length>0){const re=Kr(),ae=g.map(Q=>{const oe=ve(J,"businesses",re,"kitchenOrders",Q.id);return lt(oe,{status:"completed",invoiceId:te,completedAt:Date.now(),updatedAt:Date.now()})});await Promise.all(ae)}if(e?.id){const re=Kr(),ae=ve(J,"businesses",re,"tables",e.id);await lt(ae,{status:"available",updatedAt:Date.now()})}b([]),alert(`Invoice ${te} created successfully!`),r&&r()}catch($){console.error("Error during checkout:",$),alert("Failed to create invoice")}finally{C(!1)}},[m,N,e,O,a,r,g]);l.find($=>$.id===f);const H=g.length>0,le=g.find($=>$.id===B);return i.jsxs("div",{className:"relative w-full min-h-screen bg-transparent",children:[i.jsxs("div",{className:"pointer-events-none fixed inset-0 opacity-[0.9]",children:[i.jsx("div",{className:"absolute -top-1/3 -left-1/4 w-[70%] h-[70%] rounded-full blur-3xl bg-orange-500/20"}),i.jsx("div",{className:"absolute -bottom-1/3 -right-1/4 w-[70%] h-[70%] rounded-full blur-3xl bg-red-500/20"})]}),i.jsx("div",{className:"sticky top-0 z-30 bg-slate-900/90 backdrop-blur-sm border-b border-white/10",children:i.jsxs("div",{className:"px-4 py-3 flex items-center gap-3",children:[i.jsx("button",{onClick:r,className:"rounded-lg bg-gradient-to-r from-emerald-400 via-teal-300 to-cyan-400 text-slate-900 px-4 py-2 text-sm font-semibold shadow hover:shadow-lg transition",children:"â† Back to Tables"}),e&&i.jsxs("div",{className:"flex items-center gap-3 px-4 py-2 rounded-lg bg-orange-500/20 border border-orange-500/50 group",children:[i.jsx("div",{className:"w-10 h-10 rounded-full bg-orange-500/30 flex items-center justify-center text-orange-300 font-bold text-lg",children:O.number||"T"}),i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"text-sm font-semibold text-white flex items-center gap-2",children:[O.name||`Table ${O.number}`,i.jsx("button",{onClick:()=>k(!0),className:"opacity-0 group-hover:opacity-100 transition-opacity text-xs text-orange-300 hover:text-orange-200",title:"Edit table",children:"âœï¸"})]}),i.jsxs("div",{className:"text-xs text-white/70",children:["Capacity: ",O.capacity||4," â€¢ Zone: ",O.zone||"Main"]})]}),H&&i.jsx("button",{onClick:ee,className:"px-3 py-1.5 text-xs rounded-lg bg-red-500/20 hover:bg-red-500/30 text-red-300 border border-red-500/50 transition",title:"Close all orders",children:"Close Orders"})]}),t&&!e&&i.jsx("div",{className:"flex items-center gap-3 px-4 py-2 rounded-lg bg-blue-500/20 border border-blue-500/50",children:i.jsx("div",{className:"text-sm font-semibold text-white",children:"Walk-in Customer"})}),i.jsx("div",{className:"flex-1"}),i.jsx("button",{onClick:()=>S(!0),className:"rounded-lg border border-white/10 bg-white/5 hover:bg-white/10 px-4 py-2 text-sm text-white/90 transition",children:N?.name?N.name:"Customer"})]})}),i.jsxs("div",{className:"relative z-10 flex h-[calc(100vh-64px)]",children:[i.jsxs("div",{className:"flex-1 flex flex-col border-r border-white/10 overflow-hidden",children:[i.jsx("div",{className:"px-4 py-3 border-b border-white/10 bg-white/5 backdrop-blur-sm overflow-x-auto",children:i.jsx("div",{className:"flex gap-2",children:l.map($=>i.jsxs("button",{onClick:()=>h($.id),className:`px-4 py-2 rounded-lg text-sm font-medium transition-all shrink-0 flex items-center gap-2 ${f===$.id?"bg-gradient-to-r from-orange-500 to-red-500 text-white shadow-lg":"bg-white/5 text-white/80 hover:bg-white/10"}`,children:[i.jsx(H1,{token:$.icon,fallback:"ðŸ½ï¸",className:"w-4 h-4"}),i.jsx("span",{children:$.name})]},$.id))})}),i.jsx("div",{className:"px-4 py-3 border-b border-white/10",children:i.jsxs("div",{className:"relative",children:[i.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-white/40",children:"ðŸ”"}),i.jsx("input",{type:"text",value:v,onChange:$=>w($.target.value),placeholder:"Search menu items...",className:"w-full pl-10 pr-4 py-2 rounded-lg border border-white/10 bg-white/5 text-white placeholder:text-white/40 focus:ring-2 focus:ring-orange-500/50 focus:border-orange-500/50 outline-none"})]})}),i.jsxs("div",{className:"flex-1 overflow-y-auto p-4",children:[i.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-4",children:q.map($=>{const G=m.find(E=>E.product.id===$.id)?.qty||0,R=W1($.type)==="veg";return i.jsxs(U.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"relative rounded-xl border border-white/10 bg-gradient-to-br from-white/5 to-white/[0.02] p-3 hover:bg-white/10 transition-all group",children:[$.image&&i.jsx("img",{src:$.image,alt:$.name,className:"w-full h-32 object-cover rounded-lg mb-2 border border-white/10",onError:E=>E.currentTarget.style.display="none"}),i.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[R?i.jsx("span",{className:"w-3 h-3 bg-emerald-400 rounded-full border border-emerald-600",title:"Veg"}):i.jsx("span",{className:"w-3 h-3 bg-red-400 rounded-full border border-red-600",title:"Non-Veg"}),i.jsx("div",{className:"text-sm font-semibold text-white truncate flex-1",children:$.name})]}),i.jsxs("div",{className:"text-lg font-bold text-white mb-2",children:["â‚¹",$.price]}),$.tax>0&&i.jsxs("div",{className:"text-xs text-white/60 mb-2",children:["Tax: ",$.tax,"%"]}),G>0?i.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[i.jsx("button",{onClick:()=>Z($.id,G-1),className:"w-8 h-8 rounded-lg bg-white/10 hover:bg-white/20 text-white font-bold flex items-center justify-center transition",children:"âˆ’"}),i.jsx("span",{className:"flex-1 text-center font-bold text-white",children:G}),i.jsx("button",{onClick:()=>Z($.id,G+1),className:"w-8 h-8 rounded-lg bg-orange-500 hover:bg-orange-600 text-white font-bold flex items-center justify-center transition",children:"+"})]}):i.jsx("button",{onClick:()=>K($,1),className:"w-full mt-2 py-2 rounded-lg bg-gradient-to-r from-orange-500 to-red-500 hover:from-orange-600 hover:to-red-600 text-white font-semibold transition shadow-lg",children:"Add"})]},$.id)})}),q.length===0&&i.jsxs("div",{className:"text-center py-12 text-white/60",children:[i.jsx("div",{className:"text-4xl mb-3",children:"ðŸ½ï¸"}),i.jsx("div",{children:"No items found"})]})]})]}),i.jsxs("div",{className:"w-[420px] bg-gradient-to-br from-slate-900/50 to-slate-800/50 backdrop-blur-xl border-l border-white/10 flex flex-col",children:[H&&i.jsxs("div",{className:"border-b border-white/10 bg-white/5",children:[i.jsxs("button",{onClick:()=>V($=>!$),className:"w-full p-3 flex items-center justify-between hover:bg-white/5 transition",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"text-sm font-semibold text-white",children:"Order Status"}),i.jsx("span",{className:"px-2 py-0.5 text-xs rounded-full bg-orange-500/20 text-orange-300",children:g.length})]}),i.jsx("svg",{className:`w-4 h-4 text-white/60 transition-transform ${F?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),i.jsx(Ue,{children:F&&i.jsxs(U.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.2},className:"overflow-hidden",children:[i.jsx("div",{className:"px-3 pb-3 space-y-2 max-h-48 overflow-y-auto",children:g.map($=>i.jsxs("div",{className:`rounded-lg border p-2 ${Sf[$.status]||Sf.pending} ${$.id===B?"ring-2 ring-orange-500/50":""}`,children:[i.jsxs("div",{className:"flex items-center justify-between mb-1",children:[i.jsx("span",{className:"text-xs font-semibold",children:K1[$.status]||"Pending"}),$.id===B&&i.jsx("span",{className:"text-[10px] text-orange-300 bg-orange-500/20 px-1.5 py-0.5 rounded",children:"Active"})]}),i.jsxs("div",{className:"text-xs opacity-80 mb-1",children:[$.items?.length||$.lines?.length||0," items"]}),i.jsxs("div",{className:"text-[10px] opacity-70",children:[new Date($.createdAt).toLocaleTimeString(),$.lastAddedAt&&$.lastAddedAt!==$.createdAt&&i.jsxs("span",{children:[" â€¢ Updated ",new Date($.lastAddedAt).toLocaleTimeString()]})]})]},$.id))}),le&&i.jsx("div",{className:"px-3 pb-3 text-xs text-orange-300 bg-orange-500/10 px-2 py-1 rounded border border-orange-500/30 mx-3 mb-3",children:"New items will be added to the active order"})]})})]}),i.jsxs("div",{className:"p-4 border-b border-white/10 bg-white/5",children:[i.jsx("div",{className:"text-lg font-semibold text-white mb-1",children:"Order Cart"}),i.jsxs("div",{className:"text-sm text-white/60",children:[m.length," items"]})]}),i.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-3",children:[m.map($=>i.jsx("div",{className:"rounded-lg border border-white/10 bg-white/5 p-3",children:i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("div",{className:"text-sm font-semibold text-white truncate",children:$.product.name}),i.jsxs("div",{className:"text-xs text-white/60 mt-1",children:["â‚¹",$.product.price," each"]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("button",{onClick:()=>Z($.product.id,$.qty-1),className:"w-7 h-7 rounded-lg bg-white/10 hover:bg-white/20 text-white font-bold flex items-center justify-center transition",children:"âˆ’"}),i.jsx("span",{className:"w-8 text-center font-bold text-white",children:$.qty}),i.jsx("button",{onClick:()=>Z($.product.id,$.qty+1),className:"w-7 h-7 rounded-lg bg-white/10 hover:bg-white/20 text-white font-bold flex items-center justify-center transition",children:"+"})]}),i.jsx("div",{className:"text-right",children:i.jsxs("div",{className:"text-sm font-bold text-white",children:["â‚¹",($.product.price*$.qty).toFixed(2)]})}),i.jsx("button",{onClick:()=>ne($.product.id),className:"w-7 h-7 rounded-lg bg-red-500/20 hover:bg-red-500/30 text-red-400 font-bold flex items-center justify-center transition",children:"Ã—"})]})},$.product.id)),m.length===0&&i.jsxs("div",{className:"text-center py-12 text-white/60",children:[i.jsx("div",{className:"text-4xl mb-3",children:"ðŸ›’"}),i.jsx("div",{children:"Cart is empty"}),i.jsx("div",{className:"text-xs mt-2",children:"Add items from the menu"})]})]}),i.jsxs("div",{className:"p-4 border-t border-white/10 bg-gradient-to-t from-slate-900/95 to-slate-800/95 backdrop-blur-xl space-y-3",children:[i.jsxs("div",{className:"space-y-1",children:[i.jsxs("div",{className:"flex justify-between text-sm text-white/80",children:[i.jsx("span",{children:"Subtotal"}),i.jsxs("span",{children:["â‚¹",go(T.subTotal)]})]}),T.tax>0&&i.jsxs("div",{className:"flex justify-between text-sm text-white/80",children:[i.jsx("span",{children:"Tax"}),i.jsxs("span",{children:["â‚¹",go(T.tax)]})]}),i.jsxs("div",{className:"flex justify-between text-lg font-bold text-white pt-2 border-t border-white/10",children:[i.jsx("span",{children:"Total"}),i.jsxs("span",{className:"bg-gradient-to-r from-orange-400 to-red-400 bg-clip-text text-transparent",children:["â‚¹",go(T.grandTotal)]})]})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:Y,disabled:m.length===0||D,className:"flex-1 py-3 rounded-lg bg-gradient-to-r from-orange-500 to-red-500 hover:from-orange-600 hover:to-red-600 text-white font-semibold shadow-lg disabled:opacity-50 disabled:cursor-not-allowed transition",children:D?"Sending...":B?"Add to Order":"Send to Kitchen"}),i.jsx("button",{onClick:W,disabled:m.length===0&&!H||D,className:"flex-1 py-3 rounded-lg bg-gradient-to-r from-emerald-500 to-teal-500 hover:from-emerald-600 hover:to-teal-600 text-white font-semibold shadow-lg disabled:opacity-50 disabled:cursor-not-allowed transition",children:D?"Processing...":"Checkout"})]}),i.jsx("button",{onClick:()=>b([]),disabled:m.length===0,className:"w-full py-2 rounded-lg border border-white/10 bg-white/5 hover:bg-white/10 text-white/80 disabled:opacity-50 disabled:cursor-not-allowed transition",children:"Clear Cart"})]})]})]}),i.jsxs(Y1,{open:j,onClose:()=>k(!1),size:"sm",children:[i.jsx("div",{className:"text-lg font-bold text-white mb-4",children:"Edit Table"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-white/70 mb-1",children:"Table Name"}),i.jsx("input",{type:"text",value:O.name||"",onChange:$=>A(L=>({...L,name:$.target.value})),className:"w-full rounded-lg border border-white/10 bg-white/5 px-3 py-2 text-white focus:ring-2 focus:ring-orange-500/50 focus:border-orange-500/50 outline-none",placeholder:`Table ${O.number||""}`})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-white/70 mb-1",children:"Capacity"}),i.jsx("input",{type:"number",value:O.capacity||4,onChange:$=>A(L=>({...L,capacity:parseInt($.target.value)||4})),className:"w-full rounded-lg border border-white/10 bg-white/5 px-3 py-2 text-white focus:ring-2 focus:ring-orange-500/50 focus:border-orange-500/50 outline-none",min:"1"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-white/70 mb-1",children:"Zone"}),i.jsxs("select",{value:O.zone||"main",onChange:$=>A(L=>({...L,zone:$.target.value})),className:"w-full rounded-lg border border-white/10 bg-white/5 px-3 py-2 text-white focus:ring-2 focus:ring-orange-500/50 focus:border-orange-500/50 outline-none",children:[i.jsx("option",{value:"main",children:"Main Dining"}),i.jsx("option",{value:"outdoor",children:"Outdoor"}),i.jsx("option",{value:"vip",children:"VIP Area"}),i.jsx("option",{value:"bar",children:"Bar Area"}),i.jsx("option",{value:"private",children:"Private Room"})]})]})]}),i.jsxs("div",{className:"flex justify-end gap-2 mt-6",children:[i.jsx("button",{onClick:()=>k(!1),className:"px-4 py-2 rounded-lg border border-white/10 bg-white/5 hover:bg-white/10 text-white transition",disabled:D,children:"Cancel"}),i.jsx("button",{onClick:_,className:"px-4 py-2 rounded-lg bg-gradient-to-r from-orange-500 to-red-500 hover:from-orange-600 hover:to-red-600 text-white font-semibold transition shadow-lg disabled:opacity-50",disabled:D,children:D?"Saving...":"Save"})]})]}),y&&i.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm",onClick:()=>S(!1),children:i.jsxs(U.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},onClick:$=>$.stopPropagation(),className:"w-full max-w-md rounded-2xl border border-white/10 bg-slate-900/95 backdrop-blur-xl p-6 shadow-2xl",children:[i.jsx("h3",{className:"text-lg font-bold text-white mb-4",children:"Customer Information"}),i.jsx(Lw,{customer:N,setCustomer:P}),i.jsx("div",{className:"flex justify-end gap-2 mt-4",children:i.jsx("button",{onClick:()=>S(!1),className:"px-4 py-2 rounded-lg border border-white/10 bg-white/5 hover:bg-white/10 text-white transition",children:"Close"})})]})})]})}function Q1({open:e,onClose:t,onTableCreated:r,editingTable:n=null}){const[a,s]=pe.useState(""),[o,l]=pe.useState(""),[c,d]=pe.useState(4),[u,f]=pe.useState("main"),[h,m]=pe.useState(!1),b=()=>xe.currentUser?.uid;pe.useEffect(()=>{e&&(n?(s(n.number?.toString()||""),l(n.name||""),d(n.capacity||4),f(n.zone||"main")):(s(""),l(""),d(4),f("main")))},[e,n]);const g=async p=>{if(p.preventDefault(),!n&&!a.trim())return;const v=b();if(v){m(!0);try{if(n){const w=ve(J,"businesses",v,"tables",n.id);await lt(w,{name:o.trim()||`Table ${n.number}`,capacity:parseInt(c,10)||4,zone:u||"main",updatedAt:Date.now()})}else{const w=ue(J,"businesses",v,"tables");await Rr(w,{number:parseInt(a,10),name:o.trim()||`Table ${a}`,capacity:parseInt(c,10)||4,status:"available",zone:u||"main",createdAt:Date.now()})}r&&r(),t(),s(""),l(""),d(4),f("main")}catch(w){console.error(`Error ${n?"updating":"creating"} table:`,w);const y=w.message||w.code||"Unknown error";alert(`Failed to ${n?"update":"create"} table: ${y}`)}finally{m(!1)}}};return e?i.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm",onClick:t,children:i.jsxs(U.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},onClick:p=>p.stopPropagation(),className:"w-full max-w-md rounded-2xl border border-white/10 bg-slate-900/95 backdrop-blur-xl p-6 shadow-2xl",children:[i.jsxs("div",{className:"mb-4",children:[i.jsx("h2",{className:"text-xl font-bold text-white",children:n?"Edit Table":"Add New Table"}),i.jsx("p",{className:"text-sm text-white/60 mt-1",children:n?"Update table details":"Quick setup for your restaurant"})]}),i.jsxs("form",{onSubmit:g,className:"space-y-4",children:[!n&&i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-white/90 mb-1.5",children:"Table Number *"}),i.jsx("input",{type:"number",value:a,onChange:p=>s(p.target.value),placeholder:"e.g., 1",required:!0,autoFocus:!0,className:"w-full rounded-lg border border-white/10 bg-white/5 px-4 py-2.5 text-white placeholder:text-white/40 focus:border-emerald-500/50 focus:ring-2 focus:ring-emerald-500/20 focus:outline-none transition"})]}),n&&i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-white/90 mb-1.5",children:"Table Number"}),i.jsx("div",{className:"w-full rounded-lg border border-white/10 bg-white/5 px-4 py-2.5 text-white/60",children:n.number}),i.jsx("p",{className:"text-xs text-white/50 mt-1",children:"Table number cannot be changed"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-white/90 mb-1.5",children:"Table Name (Optional)"}),i.jsx("input",{type:"text",value:o,onChange:p=>l(p.target.value),placeholder:"Auto-generated if empty",className:"w-full rounded-lg border border-white/10 bg-white/5 px-4 py-2.5 text-white placeholder:text-white/40 focus:border-emerald-500/50 focus:ring-2 focus:ring-emerald-500/20 focus:outline-none transition"})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-white/90 mb-1.5",children:"Capacity"}),i.jsx("input",{type:"number",value:c,onChange:p=>d(p.target.value),min:"1",max:"20",className:"w-full rounded-lg border border-white/10 bg-white/5 px-4 py-2.5 text-white focus:border-emerald-500/50 focus:ring-2 focus:ring-emerald-500/20 focus:outline-none transition"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-white/90 mb-1.5",children:"Zone"}),i.jsxs("select",{value:u,onChange:p=>f(p.target.value),className:"w-full rounded-lg border border-white/10 bg-white/5 px-4 py-2.5 text-white focus:border-emerald-500/50 focus:ring-2 focus:ring-emerald-500/20 focus:outline-none transition",children:[i.jsx("option",{value:"main",children:"Main"}),i.jsx("option",{value:"outdoor",children:"Outdoor"}),i.jsx("option",{value:"vip",children:"VIP"}),i.jsx("option",{value:"bar",children:"Bar"})]})]})]}),i.jsxs("div",{className:"flex gap-3 pt-2",children:[i.jsx("button",{type:"button",onClick:t,className:"flex-1 rounded-lg border border-white/10 bg-white/5 px-4 py-2.5 text-white hover:bg-white/10 transition",children:"Cancel"}),i.jsx("button",{type:"submit",disabled:h||!n&&!a.trim(),className:"flex-1 rounded-lg bg-gradient-to-r from-emerald-500 to-teal-500 px-4 py-2.5 font-semibold text-white shadow-lg hover:shadow-emerald-500/25 disabled:opacity-50 disabled:cursor-not-allowed transition",children:h?n?"Updating...":"Creating...":n?"Update Table":"Create Table"})]})]})]})}):null}function X1({onBack:e}){const[t,r]=pe.useState("select"),[n,a]=pe.useState(null),[s,o]=pe.useState(null),[l,c]=pe.useState([]),[d,u]=pe.useState([]),[f,h]=pe.useState(!1),[m,b]=pe.useState(null),[g,p]=pe.useState("all"),v=()=>xe.currentUser?.uid;pe.useEffect(()=>{const A=v();if(!A)return;const B=ue(J,"businesses",A,"tables"),M=ht(B,F=>{const V=[];F.forEach(q=>{V.push({id:q.id,...q.data()})}),c(V.sort((q,K)=>(q.number||0)-(K.number||0)))});return()=>M()},[]),pe.useEffect(()=>{const A=v();if(!A)return;const B=ue(J,"businesses",A,"kitchenOrders"),M=_e(B,gt("status","!=","completed"),$t("createdAt","desc")),F=ht(M,V=>{const q=[];V.forEach(K=>{const ne=K.data();ne.status!=="completed"&&ne.status!=="served"&&q.push({id:K.id,...ne})}),u(q)},V=>{console.error("Error fetching kitchen orders:",V);const q=_e(B,$t("createdAt","desc"));ht(q,K=>{const ne=[];K.forEach(Z=>{const T=Z.data();T.status!=="completed"&&T.status!=="served"&&ne.push({id:Z.id,...T})}),u(ne)})});return()=>F()},[]);const w=A=>{const B=d.filter(F=>F.tableId===A);if(B.length===0)return{status:"available",orderCount:0,latestOrder:null};const M=B[0];return{status:"occupied",orderCount:B.length,latestOrder:M,orderStatus:M.status}},y=A=>{a(A),o(null),r("billing")},S=(A,B)=>{A.stopPropagation(),b(B),h(!0)},j=()=>{a(null),o({name:"",phone:"",email:""}),r("billing")},k=pe.useMemo(()=>{const A=async()=>{const B=v();if(!B)return[];const M=ue(J,"businesses",B,"items");try{return(await ye(M)).docs.map(V=>({id:V.id,...V.data()})).filter(V=>V.available!==!1)}catch{return[]}};return{listAll:A,searchProducts:async B=>{const M=v();if(!M)return[];const F=ue(J,"businesses",M,"items");if(!B||!B.trim())return await A();try{return(await ye(F)).docs.map(K=>({id:K.id,...K.data()})).filter(K=>K.available!==!1).filter(K=>(K.name||"").toLowerCase().includes(B.toLowerCase()))}catch{return[]}},listCategories:async()=>{const B=v();if(!B)return[];const M=ue(J,"businesses",B,"categories");try{return(await ye(M)).docs.map(V=>({id:V.id,...V.data()}))}catch{return[]}},listByCategory:async B=>{const M=v();if(!M)return[];const F=ue(J,"businesses",M,"items");try{return(await ye(F)).docs.map(q=>({id:q.id,...q.data()})).filter(q=>q.categoryId===B&&q.available!==!1)}catch{return[]}}}},[]),N=pe.useMemo(()=>({createInvoice:async A=>{const B=v();if(!B)throw new Error("User not authenticated");const M=ue(J,"businesses",B,"finalizedInvoices"),F=`INV-${Date.now()}`,V=ve(M,F);return await Kt(V,{...A,invoiceId:F,createdAt:Date.now(),issuedAt:Date.now()}),{id:F}}}),[]);if(t==="billing")return i.jsx(G1,{mode:"restaurant",inventory:k,billing:N,onBack:()=>{r("select"),a(null),o(null)},onTableUpdate:()=>{},table:n,customer:s,onOrderSentToKitchen:async A=>{const B=v();if(B)try{const M=ue(J,"businesses",B,"kitchenOrders");if(await Rr(M,{invoiceId:A.invoiceId||null,items:A.lines||A.items||[],lines:A.lines||[],totals:A.totals||{},tableId:n?.id||null,customerId:s?.id||null,customerName:s?.name||n?.name||"Walk-in",status:"pending",createdAt:Date.now(),sentAt:Date.now()}),n?.id){const F=ve(J,"businesses",B,"tables",n.id);await lt(F,{status:"occupied",lastOrderAt:Date.now()})}}catch(M){console.error("Error sending order to kitchen:",M),alert("Failed to send order to kitchen")}}});const P=["all",...new Set(l.map(A=>A.zone).filter(Boolean))],D=g==="all"?l:l.filter(A=>A.zone===g),C=D.filter(A=>w(A.id).status==="available").length,O=D.filter(A=>w(A.id).status==="occupied").length;return i.jsxs("div",{className:"relative w-full min-h-screen bg-transparent",children:[i.jsxs("div",{className:"pointer-events-none fixed inset-0 opacity-[0.9]",children:[i.jsx("div",{className:"absolute -top-1/3 -left-1/4 w-[70%] h-[70%] rounded-full blur-3xl bg-emerald-500/20"}),i.jsx("div",{className:"absolute -bottom-1/3 -right-1/4 w-[70%] h-[70%] rounded-full blur-3xl bg-cyan-500/20"})]}),i.jsx("div",{className:"sticky top-0 z-20 bg-slate-900/80 backdrop-blur-sm border-b border-white/10",children:i.jsxs("div",{className:"px-4 py-3 flex items-center gap-3",children:[e&&i.jsx("button",{onClick:e,className:"rounded-lg bg-gradient-to-r from-emerald-400 via-teal-300 to-cyan-400 text-slate-900 px-4 py-2 text-sm font-semibold shadow hover:shadow-lg transition",children:"â† Back"}),i.jsxs("div",{className:"flex-1",children:[i.jsx("h1",{className:"text-lg font-semibold text-white/90",children:"Restaurant POS"}),i.jsx("p",{className:"text-xs text-white/60",children:"Select table or customer to start"})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"w-2 h-2 rounded-full bg-emerald-500"}),i.jsxs("span",{className:"text-white/80",children:[C," Available"]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"w-2 h-2 rounded-full bg-orange-500"}),i.jsxs("span",{className:"text-white/80",children:[O," Occupied"]})]})]}),i.jsx("button",{onClick:()=>{window.location.href.includes("dashboard")?window.location.href=window.location.href.split("?")[0]+"?mode=pos&view=kds&tab=menu":alert("Menu Builder: Navigate to POS > Kitchen Display > Menu Builder")},className:"rounded-lg border border-white/10 bg-white/5 hover:bg-white/10 px-4 py-2 text-sm font-medium text-white/90 transition",title:"Open Menu Builder to create/edit menu items",children:"ðŸ“œ Menu Builder"}),i.jsx("button",{onClick:()=>h(!0),className:"rounded-lg bg-gradient-to-r from-emerald-500 to-teal-500 px-4 py-2 text-sm font-semibold text-white shadow-lg hover:shadow-emerald-500/25 transition",children:"+ Add Table"})]})]})}),i.jsx("div",{className:"relative z-10 min-h-[calc(100vh-128px)] p-6",children:i.jsxs("div",{className:"max-w-7xl mx-auto",children:[i.jsxs(U.button,{whileHover:{scale:1.01,y:-2},whileTap:{scale:.99},onClick:j,className:"w-full mb-6 group relative text-left rounded-2xl border border-white/10 bg-gradient-to-br from-slate-900/80 to-slate-800/60 backdrop-blur-xl p-6 shadow-lg hover:shadow-emerald-500/30 transition",children:[i.jsx("div",{className:"absolute inset-0 rounded-2xl bg-gradient-to-r from-emerald-400/10 via-cyan-400/10 to-transparent opacity-0 group-hover:opacity-100 blur-xl transition"}),i.jsxs("div",{className:"relative z-10 flex items-center gap-4",children:[i.jsx("div",{className:"w-14 h-14 rounded-xl bg-gradient-to-br from-emerald-500/20 to-teal-500/20 flex items-center justify-center text-3xl",children:"ðŸ‘¤"}),i.jsxs("div",{className:"flex-1",children:[i.jsx("div",{className:"text-xl font-semibold text-white",children:"Walk-in Customer"}),i.jsx("div",{className:"text-sm text-white/70 mt-1",children:"Start order for a walk-in customer"})]}),i.jsx("span",{className:"text-2xl text-emerald-300",children:"â†’"})]})]}),P.length>2&&i.jsx("div",{className:"flex gap-2 mb-4 flex-wrap",children:P.map(A=>i.jsx("button",{onClick:()=>p(A),className:`px-4 py-2 rounded-lg text-sm font-medium transition ${g===A?"bg-emerald-500/20 text-emerald-300 border border-emerald-500/50":"bg-white/5 text-white/60 hover:bg-white/10 border border-white/10"}`,children:A==="all"?"All Zones":A.charAt(0).toUpperCase()+A.slice(1)},A))}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("h2",{className:"text-lg font-semibold text-white",children:"Tables"}),i.jsxs("div",{className:"text-sm text-white/60",children:[D.length," tables"]})]}),D.length===0?i.jsxs("div",{className:"text-center py-12 text-white/60",children:[i.jsx("div",{className:"text-4xl mb-3",children:"ðŸª‘"}),i.jsx("div",{children:"No tables created yet"}),i.jsx("button",{onClick:()=>h(!0),className:"mt-4 rounded-lg border border-white/10 bg-white/5 hover:bg-white/10 px-4 py-2 text-sm text-white transition",children:"Create First Table"})]}):i.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-4",children:i.jsx(Ue,{children:D.map(A=>{const B=w(A.id),M=B.status==="occupied",F=A.status==="reserved",V=A.status==="cleaning";return i.jsxs(U.button,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},whileHover:{scale:1.05,y:-2},whileTap:{scale:.95},onClick:()=>y(A),disabled:V,className:`relative rounded-xl border p-4 text-left transition-all ${M?"border-orange-500/50 bg-orange-500/10 hover:bg-orange-500/20 shadow-lg shadow-orange-500/10":F?"border-amber-500/50 bg-amber-500/10 hover:bg-amber-500/20":V?"border-slate-500/50 bg-slate-500/10 opacity-50 cursor-not-allowed":"border-emerald-500/30 bg-emerald-500/5 hover:bg-emerald-500/10 hover:border-emerald-500/50"}`,children:[M&&i.jsx("div",{className:"absolute top-2 right-2",children:i.jsx("div",{className:`px-2 py-1 rounded-full text-xs font-semibold ${B.orderStatus==="pending"?"bg-amber-500/20 text-amber-300":B.orderStatus==="preparing"?"bg-blue-500/20 text-blue-300":"bg-emerald-500/20 text-emerald-300"}`,children:B.orderStatus==="pending"?"Pending":B.orderStatus==="preparing"?"Preparing":B.orderStatus==="ready"?"Ready":"Active"})}),i.jsxs("div",{className:"flex items-center justify-between mb-2 group",children:[i.jsx("div",{className:`text-lg font-bold ${M?"text-orange-300":F?"text-amber-300":"text-emerald-300"}`,children:A.name||`Table ${A.number}`}),i.jsx("button",{onClick:q=>S(q,A),className:"opacity-0 group-hover:opacity-100 transition-opacity w-6 h-6 rounded-lg bg-white/10 hover:bg-white/20 flex items-center justify-center text-white/80 hover:text-white text-xs",title:"Edit table",children:"âœï¸"})]}),i.jsxs("div",{className:"flex items-center gap-3 text-sm text-white/60 mb-2",children:[i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx("span",{children:"ðŸ‘¥"}),i.jsx("span",{children:A.capacity||4})]}),M&&B.orderCount>0&&i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx("span",{children:"ðŸ“‹"}),i.jsx("span",{children:B.orderCount})]})]}),A.zone&&i.jsxs("div",{className:"text-xs text-white/40 mt-1",children:["Zone: ",A.zone]}),i.jsx("div",{className:"absolute bottom-2 right-2",children:i.jsx("div",{className:`w-2 h-2 rounded-full ${M?"bg-orange-500":F?"bg-amber-500":V?"bg-slate-500":"bg-emerald-500"}`})})]},A.id)})})})]})]})}),i.jsx(Q1,{open:f,onClose:()=>{h(!1),b(null)},editingTable:m,onTableCreated:()=>{h(!1),b(null)}})]})}function Z1({onBack:e,onOpenBilling:t,onOpenKDS:r,onOpenTables:n,onOpenQR:a}){const{setMode:s}=gu(),o=Z0(),[l,c]=pe.useState("landing"),d=()=>{if(r)return r();c("kds")},u=()=>{c("restaurant")},f={listAll:async()=>{if(!xe.currentUser)return[];const S=xe.currentUser.uid,j=ue(J,"businesses",S,"products"),k=500;let N=_e(j,$t("createdAt","desc"),Tn(k));const P=[];let D=null,C=0;for(;C++<50;){const O=await ye(N);if(!O.size)break;P.push(...O.docs.map(B=>({id:B.id,...B.data()})));const A=O.docs[O.docs.length-1];if(!A||D&&A.id===D.id)break;D=A,N=_e(j,$t("createdAt","desc"),Rw(A),Tn(k))}return P},searchProducts:async S=>{if(!xe.currentUser)return[];const j=xe.currentUser.uid,k=ue(J,"businesses",j,"products");if(!S||!S.trim())return await f.listAll();const N=_e(k,gt("productName",">=",S),gt("productName","<=",S+"ï£¿"));let P=await ye(N);if(!P.size)try{const D=_e(k,gt("name",">=",S),gt("name","<=",S+"ï£¿"));P=await ye(D)}catch{}return P.docs.map(D=>({id:D.id,...D.data()}))},listPopular:async(S=24)=>{if(!xe.currentUser)return[];const j=xe.currentUser.uid,k=ue(J,"businesses",j,"products");try{const P=await ye(_e(k,$t("createdAt","desc"),Tn(S)));if(P.size)return P.docs.map(D=>({id:D.id,...D.data()}))}catch{}return(await ye(k)).docs.slice(0,S).map(P=>({id:P.id,...P.data()}))}},h=()=>{if(t)return t();c("billing")},m=()=>{if(e)return e();try{o&&o("/dashboard"),s&&s("dashboard")}catch{if(window.history.length>1)return window.history.back();window.location.assign("/dashboard")}};if(l==="billing")return i.jsx(_w,{mode:"retail",onBack:()=>c("landing"),inventory:f});if(l==="kds")return i.jsx(V1,{onBack:()=>c("landing")});if(l==="restaurant")return i.jsx(X1,{onBack:()=>c("landing")});const b={animate:{backgroundPosition:["0% 50%","100% 50%","0% 50%"],transition:{duration:6,repeat:1/0,ease:"linear"}}},g={hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.15,delayChildren:.3}}},p={hidden:{opacity:0,y:10},show:{opacity:1,y:0,transition:{duration:.4}}},v={hidden:{opacity:0,y:10},show:S=>({opacity:1,y:0,transition:{delay:S*.1,duration:.4}})},w={initial:{scale:1},hover:{scale:1.08}},y={initial:{opacity:0,scale:0},hover:S=>({opacity:1,scale:1,x:68*Math.cos(S/4*2*Math.PI-Math.PI/2),y:68*Math.sin(S/4*2*Math.PI-Math.PI/2),transition:{type:"spring",stiffness:300,damping:20,delay:S*.08}})};return i.jsxs("div",{className:"relative min-h-[calc(100vh-140px)] grid grid-rows-[auto_1fr] gap-4 overflow-hidden",children:[i.jsx(U.div,{"aria-hidden":!0,initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.6},className:"pointer-events-none absolute -top-24 -left-24 w-[520px] h-[520px] rounded-full bg-gradient-to-br from-emerald-400/20 via-teal-300/20 to-cyan-400/20 blur-3xl"}),i.jsx(U.div,{"aria-hidden":!0,initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.8,delay:.1},className:"pointer-events-none absolute -bottom-24 -right-24 w-[520px] h-[520px] rounded-full bg-gradient-to-br from-cyan-400/15 via-sky-300/15 to-violet-400/15 blur-3xl"}),i.jsx(U.div,{"aria-hidden":!0,initial:{opacity:0},animate:{opacity:.15},transition:{duration:3,repeat:1/0,repeatType:"reverse"},className:"pointer-events-none absolute top-0 left-1/2 w-[800px] h-[400px] rounded-full bg-gradient-to-r from-purple-400 via-pink-400 to-red-400 blur-2xl -translate-x-1/2"}),i.jsx(U.div,{"aria-hidden":!0,initial:{opacity:0},animate:{opacity:.12},transition:{duration:4,repeat:1/0,repeatType:"reverse",delay:1},className:"pointer-events-none absolute bottom-0 right-1/3 w-[700px] h-[350px] rounded-full bg-gradient-to-tr from-blue-400 via-cyan-400 to-green-400 blur-3xl"}),[...Array(14)].map((S,j)=>i.jsx(U.div,{"aria-hidden":!0,className:"pointer-events-none absolute w-1 h-1 rounded-full bg-white/70",style:{left:`${j*7%100}%`,top:`${j*13%90}%`},initial:{opacity:0},animate:{opacity:[0,1,0]},transition:{duration:3+j%5,delay:j*.2,repeat:1/0}},j)),i.jsx("div",{className:"sticky top-0 z-40 bg-white/80 dark:bg-slate-900/80 backdrop-blur border-b border-slate-200 dark:border-slate-800",children:i.jsxs("div",{className:"px-4 py-3 flex items-center gap-3",children:[i.jsx("button",{onClick:m,className:"rounded-lg bg-gradient-to-r from-emerald-400 via-teal-300 to-cyan-400 text-slate-900 px-4 py-2 text-sm font-semibold shadow hover:shadow-lg transition",children:"â† Back to Dashboard"}),i.jsx("h1",{className:"text-xl font-semibold flex-1",children:"POS Home"})]})}),i.jsxs(U.section,{className:"max-w-7xl mx-auto w-full px-4",initial:"hidden",animate:"show",variants:g,children:[i.jsx(U.h2,{variants:b,animate:"animate",className:"text-2xl md:text-3xl font-bold bg-gradient-to-r from-emerald-400 via-teal-300 to-cyan-400 bg-[length:200%_200%] bg-clip-text text-transparent select-none",children:"Welcome to FLYP POS"}),i.jsx(U.p,{variants:p,className:"mt-2 text-slate-600 dark:text-slate-300 max-w-2xl",children:"Fast, flexible, and beautiful pointâ€‘ofâ€‘sale built on your existing FLYP data. Choose a workspace below to begin."}),i.jsxs(U.div,{variants:p,className:"mt-5 flex flex-wrap gap-3",children:[i.jsx(U.button,{whileTap:{scale:.98},whileHover:{y:-2},onClick:h,className:"rounded-xl px-4 py-2 font-semibold text-slate-900 bg-gradient-to-r from-emerald-400 via-teal-300 to-cyan-400 hover:shadow-[0_10px_30px_rgba(16,185,129,0.35)]",children:"Start Billing"}),i.jsx(U.button,{whileTap:{scale:.98},whileHover:{y:-2},onClick:u,className:"rounded-xl px-4 py-2 font-semibold text-white bg-gradient-to-r from-orange-500 via-red-500 to-pink-500 hover:shadow-[0_10px_30px_rgba(249,115,22,0.35)]",children:"Restaurant POS"})]})]}),i.jsx(U.section,{className:"max-w-7xl mx-auto w-full px-4",initial:"hidden",animate:"show",variants:g,children:i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[i.jsxs(U.button,{custom:0,variants:v,whileHover:{y:-3},whileTap:{scale:.98},onClick:h,className:"group rounded-2xl border border-white/10 bg-white/5 hover:bg-white/10 p-5 text-left transition",children:[i.jsx("div",{className:"text-2xl",children:"ðŸ§¾"}),i.jsx("div",{className:"mt-2 text-lg font-semibold",children:"Billing POS"}),i.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-300",children:"Scan, search, add-to-cart, split payments, GST-aware totals."}),i.jsx("div",{className:"mt-3 text-sm text-emerald-300 group-hover:translate-x-0.5 transition",children:"Open â†’"})]}),i.jsxs(U.button,{custom:1,variants:v,whileHover:{y:-3},whileTap:{scale:.98},onClick:u,className:"group rounded-2xl border border-white/10 bg-white/5 hover:bg-white/10 p-5 text-left transition",children:[i.jsx("div",{className:"text-2xl",children:"ðŸ½ï¸"}),i.jsx("div",{className:"mt-2 text-lg font-semibold",children:"Restaurant POS"}),i.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-300",children:"Table/customer selection, menu ordering, send to kitchen."}),i.jsx("div",{className:"mt-3 text-sm text-orange-300 group-hover:translate-x-0.5 transition",children:"Open â†’"})]}),i.jsxs(U.button,{custom:2,variants:v,whileHover:{y:-3},whileTap:{scale:.98},onClick:d,className:"group rounded-2xl border border-white/10 bg-white/5 hover:bg-white/10 p-5 text-left transition",children:[i.jsx("div",{className:"text-2xl",children:"ðŸ‘¨â€ðŸ³"}),i.jsx("div",{className:"mt-2 text-lg font-semibold",children:"Kitchen Display (KDS)"}),i.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-300",children:"Live queue by course & station, bump tickets, prep timers."}),i.jsx("div",{className:"mt-3 text-sm text-emerald-300 group-hover:translate-x-0.5 transition",children:"Open â†’"})]}),i.jsxs(U.button,{custom:3,variants:v,whileHover:{y:-3},whileTap:{scale:.98},onClick:()=>a&&a(),className:"group rounded-2xl border border-white/10 bg-white/5 hover:bg-white/10 p-5 text-left transition",children:[i.jsx("div",{className:"text-2xl",children:"ðŸ“±"}),i.jsx("div",{className:"mt-2 text-lg font-semibold",children:"QR Orders"}),i.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-300",children:"Selfâ€‘serve menus, table QR, live order inbox and confirmations."}),i.jsx("div",{className:"mt-3 text-sm text-emerald-300 group-hover:translate-x-0.5 transition",children:"Open â†’"})]}),i.jsxs(U.div,{custom:4,variants:v,className:"rounded-2xl border border-white/10 bg-white/5 p-5",children:[i.jsx("div",{className:"text-2xl",children:"âš¡"}),i.jsx("div",{className:"mt-2 text-lg font-semibold",children:"Quick Actions"}),i.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-300",children:"Hold/Resume, Fast Checkout, Shortcuts â€” coming soon."})]}),i.jsxs(U.div,{custom:5,variants:v,className:"rounded-2xl border border-white/10 bg-white/5 p-5",children:[i.jsx("div",{className:"text-2xl",children:"âš™ï¸"}),i.jsx("div",{className:"mt-2 text-lg font-semibold",children:"Settings"}),i.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-300",children:"Theme, shortcuts, printers â€” coming soon."})]})]})}),i.jsx("div",{className:"fixed bottom-6 right-6 z-50 flex items-center justify-center",children:i.jsxs(U.div,{className:"relative w-16 h-16 rounded-full bg-gradient-to-r from-emerald-400 via-teal-300 to-cyan-400 shadow-xl cursor-pointer flex items-center justify-center text-white font-bold text-lg select-none",initial:"initial",whileHover:"hover",variants:w,title:"FLYP POS","aria-label":"FLYP POS central button",children:["FLYP",[0,1,2,3].map(S=>i.jsxs(U.button,{custom:S,variants:y,initial:"initial",whileHover:"hover",onClick:j=>{j.stopPropagation(),S===0?h():S===1?u():S===2?d():S===3&&a&&a()},className:"absolute w-10 h-10 rounded-full bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-800 shadow-xl flex items-center justify-center text-sm",title:S===0?"Start Billing":S===1?"Restaurant POS":S===2?"Kitchen Display System":"QR Orders",style:{top:"50%",left:"50%",transformOrigin:"center"},children:[S===0&&"ðŸ§¾",S===1&&"ðŸ½ï¸",S===2&&"ðŸ‘¨â€ðŸ³",S===3&&"ðŸ“±"]},S))]})})]})}function xo({className:e=""}){const{isPos:t,setMode:r}=gu(),n=t?1:0;x.useEffect(()=>{const o=l=>{l.key?.toLowerCase()==="m"&&l.shiftKey&&(l.preventDefault(),r(t?"dashboard":"pos"))};return window.addEventListener("keydown",o),()=>window.removeEventListener("keydown",o)},[t,r]);const a=[{key:"dashboard",label:"Dashboard"},{key:"pos",label:"POS"}],s=t?"pos":"dashboard";return i.jsx("div",{className:`relative flex justify-center w-full select-none ${e}`,role:"tablist","aria-label":"Mode switcher",children:i.jsxs("div",{className:"relative inline-flex items-center rounded-full p-1 bg-gradient-to-r from-slate-800/60 via-slate-900/60 to-slate-800/60 backdrop-blur-xl border border-white/10 shadow-[0_8px_32px_rgba(0,0,0,0.45)]",style:{boxShadow:"inset 0 0 0 1px rgba(255,255,255,0.08), 0 12px 40px rgba(16,185,129,0.25)"},children:[i.jsx("span",{"aria-hidden":!0,className:"absolute top-1 bottom-1 w-1/2 rounded-full bg-gradient-to-r from-emerald-400 via-teal-300 to-cyan-400 shadow-[0_0_20px_rgba(16,185,129,0.8)] transition-transform duration-500 ease-out will-change-transform motion-reduce:transition-none",style:{transform:`translateX(${n*100}%)`}}),a.map(o=>{const l=o.key===s;return i.jsx("button",{type:"button",onClick:()=>r(o.key),"aria-pressed":l,role:"tab","aria-selected":l,className:`relative z-10 px-6 py-2 text-sm md:text-base font-semibold rounded-full transition-colors duration-300 focus:outline-none focus-visible:ring-2 focus-visible:ring-emerald-300/70 focus-visible:ring-offset-2 focus-visible:ring-offset-slate-900 ${l?"text-slate-900":"text-white/70 hover:text-white"}`,"data-testid":`mode-${o.key}`,children:o.label},o.key)})]})})}function Tt({k:e,v:t,bold:r}){return i.jsxs("div",{className:`flex justify-between ${r?"font-semibold text-white":""}`,children:[i.jsx("span",{children:e}),i.jsxs("span",{children:["â‚¹",Number(t||0).toFixed(2)]})]})}function J1({proforma:e,distributorState:t,retailerState:r}){if(!e)return null;const n=e?.taxType==="IGST"?`IGST (Interstate: ${t||"â€”"} â†’ ${r||"â€”"})`:`CGST + SGST (Intrastate: ${t||"â€”"} â†’ ${r||"â€”"})`;return i.jsxs("div",{className:"rounded-xl border border-white/10 bg-white/5 p-4",children:[i.jsx("h3",{className:"text-white font-semibold mb-3",children:"Proforma"}),i.jsxs("div",{className:"text-sm text-white/80 space-y-1",children:[i.jsx(Tt,{k:"Subâ€‘Total (preâ€‘charges)",v:e?.subTotal}),i.jsx(Tt,{k:"+ Delivery",v:e?.orderCharges?.delivery}),i.jsx(Tt,{k:"+ Packing",v:e?.orderCharges?.packing}),i.jsx(Tt,{k:"+ Insurance",v:e?.orderCharges?.insurance}),i.jsx(Tt,{k:"+ Other",v:e?.orderCharges?.other}),i.jsx(Tt,{k:"âˆ’ Order Discount",v:e?.discountTotal}),i.jsx(Tt,{k:"Taxable Base",v:e?.taxableBase,bold:!0}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{children:"Tax Type"}),i.jsx("span",{children:n})]}),e?.taxType==="IGST"?i.jsx(Tt,{k:"IGST",v:e?.taxBreakup?.igst}):i.jsxs(i.Fragment,{children:[i.jsx(Tt,{k:"CGST",v:e?.taxBreakup?.cgst}),i.jsx(Tt,{k:"SGST",v:e?.taxBreakup?.sgst})]}),i.jsx(Tt,{k:"Round Off",v:e?.roundOff}),i.jsx(Tt,{k:"Grand Total",v:e?.grandTotal,bold:!0})]})]})}function og({distributorId:e,retailerId:t,orderId:r,disabled:n,hasProforma:a=!0,distributorPath:s,onAccepted:o}){const l=J0(),[c,d]=x.useState(!1),[u,f]=x.useState(!1);async function h(){if(!(n||c)){if(!a){Vt.error("No proforma found to accept. Please refresh and try again.");return}d(!0);try{const m={statusCode:ba.ACCEPTED,status:"Accepted",statusTimestamps:{acceptedAt:Ke()},proformaLocked:!0,updatedAt:Ke(),acceptedBy:t,acceptedSource:"RETAILER",promotionReady:!0},b=ve(l,`businesses/${t}/sentOrders/${r}`),g=ve(l,`businesses/${e}/orderRequests/${r}`);await lt(b,m),await lt(g,m),o?.(r,{status:"Accepted",statusCode:ba.ACCEPTED,proformaLocked:!0,acceptedAt:new Date}),Vt.success("Proforma accepted. The distributor can now proceed to pack/ship."),f(!1)}catch(m){console.error("Error accepting proforma:",m),Vt.error(m?.code==="permission-denied"?"You don't have permission to accept this order from this screen.":"Failed to accept proforma. Please try again.")}finally{d(!1)}}}return i.jsxs(i.Fragment,{children:[i.jsx("button",{onClick:()=>!n&&a&&f(!0),disabled:n||c||!a,className:`rounded-lg px-4 py-2 font-semibold text-white ${n||c||!a?"bg-emerald-500/60 cursor-not-allowed":"bg-emerald-500/90 hover:bg-emerald-500"}`,title:a?"Accept Proforma":"Proforma not available",children:c?"Accepting...":"Accept Proforma"}),u&&i.jsxs("div",{className:"fixed inset-0 z-[100] grid place-items-center","aria-modal":"true",role:"dialog",children:[i.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:()=>!c&&f(!1)}),i.jsxs("div",{className:"relative z-[101] w-full max-w-md rounded-2xl bg-[#1b2330] border border-white/10 shadow-xl p-6 text-white",children:[i.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Accept this Proforma?"}),i.jsx("p",{className:"text-sm text-white/80 mb-4",children:"This will lock prices and taxes for this order. The distributor can proceed to packing & shipping."}),i.jsxs("div",{className:"flex justify-end gap-2",children:[i.jsx("button",{onClick:()=>!c&&f(!1),className:"px-4 py-2 rounded-lg bg-white/10 hover:bg-white/15 border border-white/20",disabled:c,children:"Cancel"}),i.jsx("button",{onClick:h,disabled:c,className:`px-4 py-2 rounded-lg font-semibold text-white ${c?"bg-emerald-500/60 cursor-not-allowed":"bg-emerald-500/90 hover:bg-emerald-500"}`,children:c?"Accepting...":"Confirm & Accept"})]})]})]})]})}const Ce=(e=0)=>{const t=Number(e||0);return new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:2}).format(t)},ni=e=>{let t=null;return!e||(typeof e?.toDate=="function"?t=e.toDate():e instanceof Date&&(t=e),!t)?"-":new Intl.DateTimeFormat("en-GB",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(t)},Sn=e=>{if(!e)return null;if(typeof e?.toDate=="function")return e.toDate();if(typeof e?.seconds=="number")return new Date(e.seconds*1e3);if(typeof e=="number")return new Date(e);const t=new Date(e);return Number.isNaN(t.getTime())?null:t},ir=e=>Sn(e?.timestamp)||Sn(e?.createdAt)||Sn(e?.created_at)||Sn(e?.updatedAt)||Sn(e?.date)||Sn(e?.proforma?.date)||null,na=e=>{const t=e?.chargesSnapshot?.breakdown||null,r=t||e?.proforma||{},n=Array.isArray(e?.items)?e.items.reduce((S,j)=>{const k=j.price!==void 0&&j.price!==null?Number(j.price):Number(j.unitPrice||0),N=Number((j.quantity??j.qty)||0);return S+k*N},0):0,a=[r.subtotal,r.subTotal,r.itemsTotal].find(S=>S!=null)??n,s=[r.discountAmount,r.discountTotal,r.totalDiscount,r.discountAmt].find(S=>S!=null)??0,o=r.taxBreakup||{},l=[r.cgst,r.cgstAmount,o.cgst].find(S=>S!=null)??0,c=[r.sgst,r.sgstAmount,o.sgst].find(S=>S!=null)??0,d=[r.igst,r.igstAmount,o.igst].find(S=>S!=null)??0;let u=[r.taxTotal,r.totalTax].find(S=>S!=null)??Number(l)+Number(c)+Number(d);const f=r.orderCharges||{},h=[r.delivery,f.delivery].find(S=>S!=null)??0,m=[r.packing,f.packing].find(S=>S!=null)??0,b=[r.insurance,f.insurance].find(S=>S!=null)??0,g=[r.other,r.otherCharges,r.additionalCharges,f.other].find(S=>S!=null)??0,p=[r.rounding,r.roundOff,f.roundOff].find(S=>S!=null)??0,v=t?Number(t.delivery||0)+Number(t.packing||0)+Number(t.insurance||0)+Number(t.other||0):null,w=v!==null?v:Number(h)+Number(m)+Number(b)+Number(g);let y=[r.grandTotal,r.totalAmount,e?.totalAmount].find(S=>S!=null);if(y==null&&(y=Number(a)-Number(s)+Number(u)+Number(w)+Number(p)),(u==null||Number.isNaN(Number(u)))&&y!==void 0){const S=Number(a)-Number(s)+Number(w)+Number(p);u=Math.max(0,Number(y)-S)}return{itemsTotal:Number(a||0),discount:Number(s||0),cgst:Number(l||0),sgst:Number(c||0),igst:Number(d||0),taxTotal:Number(u||0),shipping:Number(w||0),other:0,rounding:Number(p||0),grand:Number(y||0)}},ej=e=>{const t=e?.statusCode,r=e?.status;return t==="PROFORMA_SENT"||t==="QUOTED"||r==="Quoted"||r==="PROFORMA_SENT"||e?.proforma&&(t==="QUOTED"||r==="Quoted")||e?.chargesSnapshot&&(t==="QUOTED"||r==="Quoted")},tj=()=>{const[e,t]=x.useState([]),[r,n]=x.useState([]),[a,s]=x.useState(""),[o,l]=x.useState("All"),[c,d]=x.useState("All Time"),[u,f]=x.useState(null),[h,m]=x.useState(null),[b,g]=x.useState(""),[p,v]=x.useState("");x.useEffect(()=>{let N=null,P=null;return N=Ra(xe,D=>{if(P){try{P()}catch{}P=null}if(D){f(D);const C=ue(J,`businesses/${D.uid}/sentOrders`);P=ht(C,O=>{const A=O.docs.map(B=>({id:B.id,...B.data()}));t(A),n(A)})}else f(null),t([]),n([])}),()=>{if(P)try{P()}catch{}if(N)try{N()}catch{}}},[]),x.useEffect(()=>{let N=e;if(o!=="All"&&(N=N.filter(P=>{const D=P.status,C=P.statusCode;return o==="Quoted"?D==="Quoted"||C==="QUOTED"||C==="PROFORMA_SENT":o==="Requested"?D==="Requested"||C==="REQUESTED":o==="Accepted"?D==="Accepted"||C==="ACCEPTED":o==="Rejected"?D==="Rejected"||C==="REJECTED":o==="Modified"?D==="Modified"||C==="MODIFIED":D===o})),a.trim()){const P=a.toLowerCase();N=N.filter(D=>(D.distributorId?.toLowerCase()||"").includes(P)||(D.id?.toLowerCase()||"").includes(P)||(D.distributorName?.toLowerCase()||"").includes(P)||(D.distributorCity?.toLowerCase()||"").includes(P)||(D.distributorState?.toLowerCase()||"").includes(P)||(D.distributorEmail?.toLowerCase()||"").includes(P))}if(c==="Today"){const P=new Date;N=N.filter(D=>{const C=ir(D);return C&&C.getDate()===P.getDate()&&C.getMonth()===P.getMonth()&&C.getFullYear()===P.getFullYear()})}else if(c==="This Week"){const P=new Date,D=new Date(P);D.setDate(P.getDate()-P.getDay()),N=N.filter(C=>{const O=ir(C);return O&&O>=D&&O<=P})}else if(c==="Custom Range"&&b&&p){const P=new Date(b),D=new Date(p);N=N.filter(C=>{const O=ir(C);return O&&O>=P&&O<=D})}N=N.sort((P,D)=>{const C=ir(P),O=ir(D),A=C?C.getTime():0;return(O?O.getTime():0)-A}),n(N)},[o,a,e,c,b,p]);const w=N=>{m(h===N?null:N)},y=()=>{const N=["Order ID","Distributor","Status","Amount","Date"],P=r.map(B=>[B.id,B.distributorName,B.status,Ce(k(B)),ni(ir(B))]),D=[N,...P].map(B=>B.join(",")).join(`
`),C=new Blob([D],{type:"text/csv"}),O=URL.createObjectURL(C),A=document.createElement("a");A.href=O,A.download="order-history.csv",A.click()},S=()=>{const N=new ff,P=[["Order ID","Distributor","Status","Amount","Date"]],D=r.map(C=>[C.id,C.distributorName,C.status,Ce(k(C)),ni(ir(C))]);N.text("Order History (Retailer)",14,16),fo(N,{startY:20,head:P,body:D,styles:{fontSize:8}}),N.save("order-history.pdf")},j=(N,P)=>{const D=["Product","Brand","SKU","Qty","Unit","Price"],C=(N.items||[]).map(O=>[O.productName||O.name||"â€”",O.brand||"â€”",O.sku,O.quantity??O.qty,O.unit,`â‚¹${O.price!==void 0&&O.price!==null?O.price:O.unitPrice||0}`]);if(P==="pdf"){const O=new ff,A=(F,V)=>`${F}: ${V||"â€”"}`,B=ni(ir(N));O.setFontSize(12),O.text(`Order ID: ${N.id}`,14,14),O.text(A("Date",B),14,22),O.text(A("Status",N.status),14,30),O.text(A("Payment Mode",N.paymentMode),14,38),O.text(A("Order Note",N.note),14,46),O.text(A("Distributor",N.distributorName),14,58),O.text(A("Distributor Location",`${N.distributorCity||"â€”"}, ${N.distributorState||"â€”"}`),14,66),O.text(A("Distributor Phone",N.distributorPhone),14,74),O.text(A("Distributor Email",N.distributorEmail),14,82),O.text(A("Retailer ID",u?.uid),14,94);const M=na(N);O.setFontSize(11),O.text("Amount Breakdown",120,58),fo(O,{startY:62,margin:{left:120},head:[["Label","Amount"]],body:[["Items Total",Ce(M.itemsTotal)],["Discount",Ce(-M.discount)],["CGST",Ce(M.cgst)],["SGST",Ce(M.sgst)],["IGST",Ce(M.igst)],["Other/Shipping",Ce(M.shipping+M.other)],["Rounding",Ce(M.rounding)],["Grand Total",Ce(M.grand)]],styles:{fontSize:8},headStyles:{fillColor:[240,240,240],textColor:20}}),fo(O,{startY:O.lastAutoTable?O.lastAutoTable.finalY+6:102,head:[["Product","Brand","SKU","Qty","Unit","Price"]],body:(N.items||[]).map(F=>[F.productName||F.name||"â€”",F.brand||"â€”",F.sku,F.quantity??F.qty,F.unit,`â‚¹${F.price!==void 0&&F.price!==null?F.price:F.unitPrice||0}`]),styles:{fontSize:8}}),O.save(`order-${N.id}.pdf`)}else if(P==="csv"||P==="excel"){const O=na(N),A=[[],["Amount Breakdown"],["Items Total",O.itemsTotal],["Discount",-O.discount],["CGST",O.cgst],["SGST",O.sgst],["IGST",O.igst],["Other/Shipping",O.shipping+O.other],["Rounding",O.rounding],["Grand Total",O.grand]],B=[D,...C,...A].map(q=>Array.isArray(q)?q.join(","):q).join(`
`),M=new Blob([B],{type:"text/csv"}),F=URL.createObjectURL(M),V=document.createElement("a");V.href=F,V.download=`order-${N.id}.${P==="excel"?"xls":"csv"}`,V.click()}},k=N=>{const P=N?.chargesSnapshot?.breakdown?.grandTotal;if(typeof P=="number"&&!Number.isNaN(P))return P;const{grand:D}=na(N);return D};return i.jsxs("div",{className:"text-white",children:[i.jsxs("div",{className:"flex flex-col lg:flex-row gap-4 mb-4",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 flex-1",children:[i.jsx("input",{type:"text",placeholder:"Search by distributor or order ID",className:"px-3 py-2 rounded-xl w-full sm:w-1/2 lg:w-1/3 bg-white/10 border border-white/20 text-white placeholder-white/60 focus:outline-none focus:ring-2 focus:ring-emerald-400/50 text-sm",value:a,onChange:N=>s(N.target.value)}),i.jsxs("div",{className:"flex gap-2 sm:gap-3",children:[i.jsxs("select",{className:"px-3 py-2 rounded-xl bg-white/10 border border-white/20 text-white focus:outline-none focus:ring-2 focus:ring-emerald-400/50 text-sm flex-1 sm:flex-none",value:o,onChange:N=>l(N.target.value),children:[i.jsx("option",{children:"All"}),i.jsx("option",{children:"Requested"}),i.jsx("option",{children:"Quoted"}),i.jsx("option",{children:"Accepted"}),i.jsx("option",{children:"Rejected"}),i.jsx("option",{children:"Modified"})]}),i.jsxs("select",{className:"px-3 py-2 rounded-xl bg-white/10 border border-white/20 text-white focus:outline-none focus:ring-2 focus:ring-emerald-400/50 text-sm flex-1 sm:flex-none",value:c,onChange:N=>d(N.target.value),children:[i.jsx("option",{children:"All Time"}),i.jsx("option",{children:"Today"}),i.jsx("option",{children:"This Week"}),i.jsx("option",{children:"Custom Range"})]})]})]}),i.jsxs("div",{className:"flex gap-2 flex-shrink-0",children:[i.jsxs("button",{onClick:y,className:"px-3 py-2 rounded-xl text-xs sm:text-sm font-medium text-slate-900 bg-gradient-to-r from-emerald-400 via-teal-300 to-cyan-400 hover:shadow-[0_8px_24px_rgba(16,185,129,0.35)] whitespace-nowrap",children:[i.jsx("span",{className:"hidden sm:inline",children:"Export CSV"}),i.jsx("span",{className:"sm:hidden",children:"CSV"})]}),i.jsxs("button",{onClick:S,className:"px-3 py-2 rounded-xl text-xs sm:text-sm font-medium text-slate-900 bg-gradient-to-r from-emerald-400 via-teal-300 to-cyan-400 hover:shadow-[0_8px_24px_rgba(16,185,129,0.35)] whitespace-nowrap",children:[i.jsx("span",{className:"hidden sm:inline",children:"Export PDF"}),i.jsx("span",{className:"sm:hidden",children:"PDF"})]})]})]}),c==="Custom Range"&&i.jsxs("div",{className:"flex gap-2 items-center mb-4",children:[i.jsx("label",{children:"From:"}),i.jsx("input",{type:"date",value:b,onChange:N=>g(N.target.value),className:"px-2 py-1 rounded-xl bg-white/10 border border-white/20 text-white focus:outline-none focus:ring-2 focus:ring-emerald-400/50"}),i.jsx("label",{children:"To:"}),i.jsx("input",{type:"date",value:p,onChange:N=>v(N.target.value),className:"px-2 py-1 rounded-xl bg-white/10 border border-white/20 text-white focus:outline-none focus:ring-2 focus:ring-emerald-400/50"})]}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full rounded-xl overflow-hidden bg-white/5 backdrop-blur-xl border border-white/10 text-sm",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"bg-white/10 text-left text-white/80",children:[i.jsx("th",{className:"p-2 border border-white/10 min-w-[120px]",children:"Order ID"}),i.jsx("th",{className:"p-2 border border-white/10 min-w-[200px]",children:"Distributor (Name)"}),i.jsx("th",{className:"p-2 border border-white/10 min-w-[100px]",children:"Status"}),i.jsx("th",{className:"p-2 border border-white/10 min-w-[100px]",children:"Amount"}),i.jsx("th",{className:"p-2 border border-white/10 min-w-[120px]",children:"Date"})]})}),i.jsx("tbody",{children:r.map(N=>i.jsxs(pe.Fragment,{children:[i.jsxs("tr",{onClick:()=>w(N.id),className:"cursor-pointer hover:bg-white/10",children:[i.jsx("td",{className:"p-2 border border-white/10",children:N.id}),i.jsxs("td",{className:"p-2 border border-white/10",children:[i.jsx("div",{children:N.distributorName||"â€”"}),i.jsxs("div",{className:"text-xs text-white/60",children:[N.distributorCity||"â€”",", ",N.distributorState||"â€”"]}),i.jsx("div",{className:"text-xs text-white/40",children:N.distributorId})]}),i.jsxs("td",{className:"p-2 border border-white/10",children:[i.jsx("span",{className:`px-2 py-1 rounded text-xs font-semibold ${N.status==="Accepted"||N.statusCode==="ACCEPTED"?"bg-emerald-400/20 text-emerald-300 border border-emerald-300/30":N.status==="Rejected"||N.statusCode==="REJECTED"?"bg-rose-400/20 text-rose-300 border border-rose-300/30":N.status==="Modified"||N.statusCode==="MODIFIED"?"bg-amber-400/20 text-amber-300 border border-amber-300/30":N.status==="Quoted"||N.statusCode==="QUOTED"||N.statusCode==="PROFORMA_SENT"?"bg-yellow-400/20 text-yellow-300 border border-yellow-300/30":"bg-white/10 text-white/70 border border-white/15"}`,children:N.status||N.statusCode||"Unknown"}),N.status==="Rejected"&&N.rejectionNote&&i.jsxs("div",{className:"text-xs text-rose-300 mt-1",children:["Reason: ",N.rejectionNote]})]}),i.jsx("td",{className:"p-2 border border-white/10",children:Ce(k(N))}),i.jsx("td",{className:"p-2 border border-white/10",children:ni(ir(N))})]}),h===N.id&&i.jsx("tr",{className:"bg-white/5",children:i.jsxs("td",{colSpan:"5",className:"p-4 border border-white/10",children:[ej(N)&&i.jsxs("div",{className:"mb-4 space-y-3",children:[N.proforma?i.jsx(J1,{proforma:N.proforma,distributorState:N.distributorState,retailerState:N.retailerState}):(()=>{const P=na(N);return i.jsxs("div",{className:"rounded-lg border border-white/10 bg-white/5 p-3 text-sm",children:[i.jsx("div",{className:"text-white/80 font-semibold mb-2",children:"Proforma Summary"}),i.jsxs("div",{className:"space-y-1",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{children:"Items Total"}),i.jsx("span",{children:Ce(P.itemsTotal)})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{children:"Discount"}),i.jsxs("span",{children:["-",Ce(P.discount)]})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{children:"CGST"}),i.jsx("span",{children:Ce(P.cgst)})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{children:"SGST"}),i.jsx("span",{children:Ce(P.sgst)})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{children:"IGST"}),i.jsx("span",{children:Ce(P.igst)})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{children:"Other/Shipping"}),i.jsx("span",{children:Ce(P.shipping)})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{children:"Rounding"}),i.jsx("span",{children:Ce(P.rounding)})]}),i.jsx("div",{className:"h-px bg-white/10 my-2"}),i.jsxs("div",{className:"flex justify-between font-semibold text-emerald-300",children:[i.jsx("span",{children:"Grand Total"}),i.jsx("span",{children:Ce(P.grand)})]})]})]})})(),i.jsx("div",{className:"flex gap-2",children:i.jsx(og,{distributorId:N.distributorId,retailerId:u?.uid,orderId:N.id,hasProforma:!!N.proforma})})]}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:i.jsxs("div",{className:"rounded-lg border border-white/10 bg-white/5 p-3",children:[i.jsx("div",{className:"text-white/80 text-sm mb-2 font-semibold",children:"Amount Breakdown"}),(()=>{const P=na(N);return i.jsxs("div",{className:"space-y-1 text-sm",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{children:"Items Total"}),i.jsx("span",{children:Ce(P.itemsTotal)})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{children:"Discount"}),i.jsxs("span",{children:["-",Ce(P.discount)]})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{children:"CGST"}),i.jsx("span",{children:Ce(P.cgst)})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{children:"SGST"}),i.jsx("span",{children:Ce(P.sgst)})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{children:"IGST"}),i.jsx("span",{children:Ce(P.igst)})]}),i.jsxs("div",{className:"flex justify-between font-medium text-white/90",children:[i.jsx("span",{children:"Tax Total"}),i.jsx("span",{children:Ce(P.taxTotal||P.cgst+P.sgst+P.igst)})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{children:"Other/Shipping"}),i.jsx("span",{children:Ce(P.shipping+P.other)})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{children:"Rounding"}),i.jsx("span",{children:Ce(P.rounding)})]}),i.jsx("div",{className:"h-px bg-white/10 my-2"}),i.jsxs("div",{className:"flex justify-between font-semibold text-emerald-300",children:[i.jsx("span",{children:"Grand Total"}),i.jsx("span",{children:Ce(P.grand)})]}),i.jsx("div",{className:"text-[11px] text-white/50 mt-1",children:"Formula: Items Total - Discount + CGST + SGST + IGST + Other/Shipping + Rounding = Grand Total"})]})})()]})}),i.jsxs("div",{className:"text-sm mb-2 text-white/80",children:[i.jsx("strong",{children:"Order Note:"})," ",N.note||"â€”",i.jsx("br",{}),i.jsx("strong",{children:"Payment Mode:"})," ",N.paymentMode||"â€”",i.jsx("br",{}),N.status==="Rejected"&&N.rejectionNote&&i.jsxs(i.Fragment,{children:[i.jsx("strong",{children:"Rejection Reason:"})," ",N.rejectionNote,i.jsx("br",{})]}),i.jsx("strong",{children:"Items:"}),i.jsx("br",{}),i.jsx("strong",{children:"Distributor Info:"})," ",N.distributorCity||"N/A",", ",N.distributorState||"N/A",i.jsx("br",{}),i.jsx("strong",{children:"Phone:"})," ",N.distributorPhone||"â€”",i.jsx("br",{}),i.jsx("strong",{children:"Email:"})," ",N.distributorEmail||"â€”",i.jsx("br",{})]}),i.jsxs("div",{className:"flex gap-2 mb-2",children:[i.jsx("button",{onClick:()=>j(N,"pdf"),className:"px-3 py-1 rounded-lg text-sm font-medium text-slate-900 bg-gradient-to-r from-emerald-400 via-teal-300 to-cyan-400 hover:shadow-[0_6px_20px_rgba(16,185,129,0.35)]",children:"PDF"}),i.jsx("button",{onClick:()=>j(N,"csv"),className:"px-3 py-1 rounded-lg text-sm font-medium text-slate-900 bg-gradient-to-r from-emerald-400 via-teal-300 to-cyan-400 hover:shadow-[0_6px_20px_rgba(16,185,129,0.35)]",children:"CSV"}),i.jsx("button",{onClick:()=>j(N,"excel"),className:"px-3 py-1 rounded-lg text-sm font-medium text-slate-900 bg-gradient-to-r from-emerald-400 via-teal-300 to-cyan-400 hover:shadow-[0_6px_20px_rgba(16,185,129,0.35)]",children:"Excel"})]}),i.jsxs("table",{className:"w-full text-sm border",children:[i.jsx("thead",{className:"bg-white/10",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-1 border",children:"Product"}),i.jsx("th",{className:"p-1 border",children:"Brand"}),i.jsx("th",{className:"p-1 border",children:"SKU"}),i.jsx("th",{className:"p-1 border",children:"Qty"}),i.jsx("th",{className:"p-1 border",children:"Unit"}),i.jsx("th",{className:"p-1 border",children:"Price"})]})}),i.jsx("tbody",{children:(N.items||[]).map((P,D)=>i.jsxs("tr",{children:[i.jsx("td",{className:"p-1 border",children:P.productName||P.name||"â€”"}),i.jsx("td",{className:"p-1 border",children:P.brand||"â€”"}),i.jsx("td",{className:"p-1 border",children:P.sku}),i.jsx("td",{className:"p-1 border",children:P.quantity??P.qty}),i.jsx("td",{className:"p-1 border",children:P.unit}),i.jsxs("td",{className:"p-1 border",children:["â‚¹",P.price!==void 0&&P.price!==null?P.price:P.unitPrice||0]})]},D))})]})]})})]},N.id))})]})})]})},nt=[];for(let e=0;e<256;++e)nt.push((e+256).toString(16).slice(1));function rj(e,t=0){return(nt[e[t+0]]+nt[e[t+1]]+nt[e[t+2]]+nt[e[t+3]]+"-"+nt[e[t+4]]+nt[e[t+5]]+"-"+nt[e[t+6]]+nt[e[t+7]]+"-"+nt[e[t+8]]+nt[e[t+9]]+"-"+nt[e[t+10]]+nt[e[t+11]]+nt[e[t+12]]+nt[e[t+13]]+nt[e[t+14]]+nt[e[t+15]]).toLowerCase()}let vo;const nj=new Uint8Array(16);function aj(){if(!vo){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");vo=crypto.getRandomValues.bind(crypto)}return vo(nj)}const ij=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),kf={randomUUID:ij};function bo(e,t,r){if(kf.randomUUID&&!e)return kf.randomUUID();e=e||{};const n=e.random??e.rng?.()??aj();if(n.length<16)throw new Error("Random bytes length must be >= 16");return n[6]=n[6]&15|64,n[8]=n[8]&63|128,rj(n)}const sj=({order:e,onClose:t})=>{const r=su(),[n,a]=x.useState((e.items||[]).map(u=>({...u,sellingPrice:"",category:u.category||"",brand:u.brand||"",imageFile:null,imageUrl:"",sku:u.sku||"",unit:u.unit||""}))),[s,o]=x.useState(!1),l=(u,f,h)=>{const m=[...n];m[u][f]=h,a(m)},c=(u,f)=>{const h=[...n];h[u].imageFile=f,a(h)},d=async()=>{o(!0);try{const u=n.map(async(h,m)=>{let b="";if(h.imageFile){const S=Aw(Dw,`products/${bo()}`);await Tw(S,h.imageFile),b=await Iw(S)}const g=bo(),p={name:h.productName||h.name||`Product ${m+1}`,sku:h.sku||`SKU-${bo().slice(0,6)}`,quantity:Number(h.quantity||0),unit:h.unit||"unit",costPrice:Number(h.price||0),sellingPrice:Number(h.sellingPrice||0),brand:h.brand||"",category:h.category||"",imageUrl:b,distributorPrice:Number(h.price||0),sourceOrderId:e.id,createdAt:Ke()};console.log("Saving product to inventory:",p);const v=ue(J,"businesses",r.currentUser.uid,"products"),w=_e(v,gt("name","==",p.name),gt("brand","==",p.brand)),y=await ye(w);if(y.empty)await Kt(ve(v,g),p),console.log("Created new product:",g);else{const S=y.docs[0],j=S.data(),k=Number(j.quantity||0)+Number(p.quantity);await lt(S.ref,{quantity:k,costPrice:p.costPrice,sellingPrice:p.sellingPrice,lastUpdatedFromOrder:e.id}),console.log("Updated existing product:",S.id)}});await Promise.all(u),console.log("All products saved successfully.");const f=ve(J,"businesses",r.currentUser.uid,"sentOrders",e.id);await lt(f,{inventorySynced:!0,"statusTimestamps.inventorySyncedAt":Ke()}),alert("Items added to inventory!"),t()}catch(u){console.error("Inventory addition failed:",u),alert("Failed to add items.")}finally{o(!1)}};return i.jsxs("div",{className:"p-4",children:[i.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Add Delivered Items to Inventory"}),n.map((u,f)=>i.jsxs("div",{className:"border p-3 mb-3 rounded-md",children:[i.jsx("p",{children:i.jsx("strong",{children:u.productName||u.name})}),i.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-2",children:[i.jsxs("div",{children:[i.jsx("label",{children:"Quantity"}),i.jsx("input",{value:u.quantity,disabled:!0,className:"w-full border px-2 py-1 rounded"})]}),i.jsxs("div",{children:[i.jsx("label",{children:"Distributor Price"}),i.jsx("input",{value:u.price,disabled:!0,className:"w-full border px-2 py-1 rounded"})]}),i.jsxs("div",{children:[i.jsx("label",{children:"Selling Price"}),i.jsx("input",{type:"number",value:u.sellingPrice,onChange:h=>l(f,"sellingPrice",h.target.value),className:"w-full border px-2 py-1 rounded"})]}),i.jsxs("div",{children:[i.jsx("label",{children:"Brand"}),i.jsx("input",{value:u.brand,onChange:h=>l(f,"brand",h.target.value),className:"w-full border px-2 py-1 rounded"})]}),i.jsxs("div",{children:[i.jsx("label",{children:"Category"}),i.jsx("input",{value:u.category,onChange:h=>l(f,"category",h.target.value),className:"w-full border px-2 py-1 rounded"})]}),i.jsxs("div",{children:[i.jsx("label",{children:"Upload Image"}),i.jsx("input",{type:"file",accept:"image/*",onChange:h=>c(f,h.target.files[0])})]}),i.jsxs("div",{children:[i.jsx("label",{children:"Unit"}),i.jsx("input",{value:u.unit,onChange:h=>l(f,"unit",h.target.value),className:"w-full border px-2 py-1 rounded"})]}),i.jsxs("div",{children:[i.jsx("label",{children:"SKU"}),i.jsx("input",{value:u.sku,onChange:h=>l(f,"sku",h.target.value),className:"w-full border px-2 py-1 rounded"})]})]})]},f)),i.jsxs("div",{className:"flex justify-between mt-4",children:[i.jsx("button",{onClick:t,className:"bg-gray-400 text-white px-4 py-2 rounded",children:"Cancel"}),i.jsx("button",{onClick:d,disabled:s,className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:s?"Adding...":"Add to Inventory"})]})]})},oj=()=>{const[e,t]=x.useState([]),[r,n]=x.useState(!0),[a,s]=x.useState("All"),[o,l]=x.useState(null),[c,d]=x.useState(null),u=su(),f=J0(),h=j=>j?.statusCode==="DIRECT",m=j=>{const k=j?.statusCode,N=j?.status;return k==="PROFORMA_SENT"||k==="QUOTED"||N==="Quoted"||N==="PROFORMA_SENT"||j?.proforma&&(k==="QUOTED"||N==="Quoted")||j?.chargesSnapshot&&(k==="QUOTED"||N==="Quoted")},b=j=>{const k=j?.chargesSnapshot?.breakdown||j?.proforma||{},N=k?.taxBreakup||{};return{...k,cgst:k.cgst??N.cgst??0,sgst:k.sgst??N.sgst??0,igst:k.igst??N.igst??0}},g=j=>j?.chargesSnapshot?.defaultsUsed||{},p=(j,k,N)=>{if(typeof j=="number")return j;const P=Number(k??0);if(N>0&&P>0)return Number((P/N*100).toFixed(2))},v=j=>{if(!j)return"Not specified";if(j?.seconds)return new Date(j.seconds*1e3).toLocaleDateString();if(j instanceof Date)return j.toLocaleDateString();if(typeof j=="string"){if(/^\d{4}-\d{2}-\d{2}$/.test(j)){const k=new Date(j+"T00:00:00");return isNaN(k.getTime())?j:k.toLocaleDateString()}return j}try{const k=new Date(j);return isNaN(k.getTime())?"Not specified":k.toLocaleDateString()}catch{return"Not specified"}},w=j=>{if(!j)return"N/A";if(typeof j=="string")return j;if(typeof j=="object"){if(typeof j.label=="string"&&j.label.trim())return j.label.trim();const k=(j.code||j.type||"").toString().toLowerCase();if(k){if(k.includes("split"))return"Split Payment";if(k==="credit"||k.includes("credit_cycle")||k.includes("creditcycle"))return"Credit Cycle";if(k==="cod"||k.includes("cash_on_delivery"))return"COD";if(k==="upi")return"UPI";if(k.includes("net"))return"Net Banking";if(k.includes("cheque")||k.includes("check"))return"Cheque";if(k.includes("advance"))return"Advance Payment"}if(j.isSplit)return"Split Payment";if(j.isCredit)return"Credit Cycle";if(j.isCOD)return"COD";if(j.isUPI)return"UPI";if(j.isNetBanking)return"Net Banking";if(j.isCheque)return"Cheque";if(j.isAdvance)return"Advance Payment";if(typeof j.raw=="string"&&j.raw.trim())return j.raw.trim()}return"N/A"};x.useEffect(()=>{(()=>{const k=u.currentUser;if(!k)return;const N=_e(ue(f,"businesses",k.uid,"sentOrders")),P=ht(N,D=>{const C=D.docs.map(O=>({id:O.id,...O.data()})).sort((O,A)=>A.timestamp?.seconds-O.timestamp?.seconds);t(C),n(!1)});return()=>P()})()},[u]);const y=a==="All"?e:e.filter(j=>{const k=j.status,N=j.statusCode;return a==="Quoted"?k==="Quoted"||N==="QUOTED"||N==="PROFORMA_SENT":a==="Requested"?k==="Requested"||N==="REQUESTED":a==="Accepted"?k==="Accepted"||N==="ACCEPTED":a==="Rejected"?k==="Rejected"||N==="REJECTED":a==="Modified"?k==="Modified"||N==="MODIFIED":k===a}),S=["Requested","Quoted","Accepted","Modified","Shipped","Delivered"];return i.jsxs("div",{className:"p-3 sm:p-4 lg:p-6 text-white",children:[i.jsxs("div",{className:"mb-3 sm:mb-4",children:[i.jsx("label",{className:"mr-2 font-semibold text-white/80 text-sm sm:text-base",children:"Filter by Status:"}),i.jsxs("select",{value:a,onChange:j=>s(j.target.value),className:"w-full sm:w-auto px-3 py-2 rounded-xl bg-white/10 border border-white/20 text-white focus:outline-none focus:ring-2 focus:ring-emerald-400/50 text-sm sm:text-base",children:[i.jsx("option",{children:"All"}),i.jsx("option",{children:"Requested"}),i.jsx("option",{children:"Quoted"}),i.jsx("option",{children:"Accepted"}),i.jsx("option",{children:"Rejected"}),i.jsx("option",{children:"Pending"}),i.jsx("option",{children:"Modified"}),i.jsx("option",{children:"Delivered"})]})]}),r?i.jsx("p",{className:"text-white/80 text-sm sm:text-base",children:"Loading orders..."}):y.length===0?i.jsx("p",{className:"text-white/70 text-sm sm:text-base",children:"No orders found for this filter."}):i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full table-auto rounded-xl overflow-hidden bg-white/5 backdrop-blur-xl border border-white/10 min-w-[800px]",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"bg-white/10 text-white/80",children:[i.jsx("th",{className:"px-2 sm:px-3 py-2 border border-white/10 min-w-[120px]",children:"Distributor"}),i.jsx("th",{className:"px-2 sm:px-3 py-2 border border-white/10 min-w-[120px]",children:"Order Date"}),i.jsx("th",{className:"px-2 sm:px-3 py-2 border border-white/10 min-w-[80px]",children:"Items"}),i.jsx("th",{className:"px-2 sm:px-3 py-2 border border-white/10 min-w-[100px]",children:"Status"}),i.jsx("th",{className:"px-2 sm:px-3 py-2 border border-white/10 min-w-[120px]",children:"Delivery ETA"}),i.jsx("th",{className:"px-2 sm:px-3 py-2 border border-white/10 min-w-[200px]",children:"Progress"})]})}),i.jsx("tbody",{children:y.map(j=>i.jsxs(pe.Fragment,{children:[i.jsxs("tr",{onClick:()=>l(k=>k===j.id?null:j.id),className:"cursor-pointer hover:bg-white/10",children:[i.jsx("td",{className:"px-2 sm:px-3 py-2 border border-white/10 text-xs sm:text-sm",children:j.distributorName||"N/A"}),i.jsx("td",{className:"px-2 sm:px-3 py-2 border border-white/10 text-xs sm:text-sm",children:j.timestamp?.toDate().toLocaleString()||"N/A"}),i.jsx("td",{className:"px-2 sm:px-3 py-2 border border-white/10 text-xs sm:text-sm text-center",children:j.items?.length||0}),i.jsxs("td",{className:"px-2 sm:px-3 py-2 border border-white/10 font-medium text-xs sm:text-sm",children:[j.status||j.statusCode||"Unknown",(j.status==="Rejected"||j.statusCode==="REJECTED")&&j.rejectionNote&&i.jsxs("div",{className:"text-xs text-rose-300 mt-1",children:["Reason: ",j.rejectionNote]})]}),i.jsx("td",{className:"px-2 sm:px-3 py-2 border border-white/10 text-xs sm:text-sm",children:v(j.expectedDeliveryDate||j.eta)}),i.jsx("td",{className:"px-2 sm:px-3 py-2 border border-white/10 text-xs sm:text-sm",children:j.status==="Rejected"||j.statusCode==="REJECTED"?i.jsxs("div",{className:"flex gap-1 text-xs",children:[i.jsx("span",{className:"text-emerald-400 font-semibold",children:"Requested"}),i.jsx("span",{children:"â†’"}),i.jsx("span",{className:"text-rose-400 font-semibold",children:"Rejected"})]}):i.jsx("div",{className:"flex gap-1 text-xs",children:S.map((k,N)=>{const D=(()=>{const C=j.status||j.statusCode||"";return C==="Requested"||C==="REQUESTED"?0:C==="Quoted"||C==="QUOTED"||C==="PROFORMA_SENT"?1:C==="Accepted"||C==="ACCEPTED"?2:C==="Modified"||C==="MODIFIED"?3:C==="Shipped"||C==="SHIPPED"?4:C==="Delivered"||C==="DELIVERED"?5:0})();return i.jsxs(pe.Fragment,{children:[i.jsx("span",{className:D===N?"text-emerald-300 font-semibold":D>N?"text-emerald-400 font-semibold":"text-white/40",children:k}),N!==S.length-1&&i.jsx("span",{children:"â†’"})]},N)})})})]}),o===j.id&&i.jsx("tr",{children:i.jsx("td",{colSpan:"6",className:"p-4 bg-white/5",children:i.jsxs("div",{className:"text-sm text-white/80",children:[i.jsxs("p",{children:[i.jsx("strong",{children:"Order ID:"})," ",j.id]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Distributor Name:"})," ",j.distributorName||"N/A"]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Distributor Email:"})," ",j.distributorEmail||"N/A"]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Distributor Phone:"})," ",j.distributorPhone||"N/A"]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Distributor Address:"})," ",j.distributorAddress||"N/A"]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Payment Mode:"})," ",w(j.paymentMode)]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Note:"})," ",j.note||"â€”"]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Delivery ETA:"})," ",v(j.expectedDeliveryDate||j.eta)]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Status:"})," ",j.status]}),j.statusTimestamps&&i.jsxs("div",{className:"mt-2 space-y-1 text-sm text-white/80",children:[j.statusTimestamps.requestedAt&&i.jsxs("p",{children:[i.jsx("strong",{children:"Requested At:"})," ",new Date(j.statusTimestamps.requestedAt.seconds*1e3).toLocaleString()]}),j.statusTimestamps.quotedAt&&i.jsxs("p",{children:[i.jsx("strong",{children:"Quoted At:"})," ",new Date(j.statusTimestamps.quotedAt.seconds*1e3).toLocaleString()]}),j.statusTimestamps.acceptedAt&&i.jsxs("p",{children:[i.jsx("strong",{children:"Accepted At:"})," ",new Date(j.statusTimestamps.acceptedAt.seconds*1e3).toLocaleString()]}),j.statusTimestamps.modifiedAt&&i.jsxs("p",{children:[i.jsx("strong",{children:"Modified At:"})," ",new Date(j.statusTimestamps.modifiedAt.seconds*1e3).toLocaleString()]}),j.statusTimestamps.shippedAt&&i.jsxs("p",{children:[i.jsx("strong",{children:"Shipped At:"})," ",new Date(j.statusTimestamps.shippedAt.seconds*1e3).toLocaleString()]}),j.statusTimestamps.deliveredAt&&i.jsxs("p",{children:[i.jsx("strong",{children:"Delivered At:"})," ",new Date(j.statusTimestamps.deliveredAt.seconds*1e3).toLocaleString()]})]}),(()=>{const k=b(j),N=g(j),P=k?.taxType||(k?.igst>0?"IGST":"CGST_SGST"),D=Number(k?.taxableBase??0),C=p(N.cgstRate,k.cgst,D),O=p(N.sgstRate,k.sgst,D),A=p(N.igstRate??N.gstRate,k.igst,D),B=(F,V)=>i.jsxs("div",{className:"flex justify-between py-0.5",children:[i.jsx("span",{children:F}),i.jsxs("span",{children:["â‚¹",Number(V||0).toFixed(2)]})]}),M=(F,V)=>i.jsxs("div",{className:"flex justify-between py-0.5",children:[i.jsx("span",{children:F}),i.jsxs("span",{children:[Number(V||0).toFixed(2),"%"]})]});return!k||Object.keys(k).length===0?null:i.jsxs("div",{className:"mb-4 mt-3 p-3 rounded-lg border border-white/10 bg-white/5",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("h4",{className:"font-semibold",children:h(j)?"Order Charges (Direct)":"Proforma Summary"}),h(j)&&i.jsx("span",{className:"text-xs px-2 py-0.5 rounded-full bg-emerald-500/15 text-emerald-300 border border-emerald-400/20",children:"Direct"})]}),i.jsxs("div",{className:"text-sm text-white/85",children:[B("Subâ€‘Total (preâ€‘charges)",k.subTotal||k.itemsSubTotal),B("Delivery",k.delivery),B("Packing",k.packing),B("Insurance",k.insurance),B("Other",k.other),M("Discount %",k.discountPct),B("Discount â‚¹",k.discountAmt),B("Round Off",k.roundOff),i.jsxs("div",{className:"flex justify-between py-0.5",children:[i.jsx("span",{children:"Tax Type"}),i.jsx("span",{children:P==="IGST"?"IGST":"CGST + SGST"})]}),P==="IGST"?i.jsxs("div",{className:"flex justify-between py-0.5",children:[i.jsx("span",{children:`IGST${A!==void 0?` (${A}%)`:""}`}),i.jsxs("span",{children:["â‚¹",Number(k.igst||0).toFixed(2)]})]}):i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"flex justify-between py-0.5",children:[i.jsx("span",{children:`CGST${C!==void 0?` (${C}%)`:""}`}),i.jsxs("span",{children:["â‚¹",Number(k.cgst||0).toFixed(2)]})]}),i.jsxs("div",{className:"flex justify-between py-0.5",children:[i.jsx("span",{children:`SGST${O!==void 0?` (${O}%)`:""}`}),i.jsxs("span",{children:["â‚¹",Number(k.sgst||0).toFixed(2)]})]})]}),i.jsxs("div",{className:"flex justify-between py-0.5 font-semibold",children:[i.jsx("span",{children:"Grand Total"}),i.jsxs("span",{children:["â‚¹",Number(k.grandTotal||0).toFixed(2)]})]})]}),m(j)&&i.jsx("div",{className:"flex gap-2 mt-3",children:i.jsx(og,{distributorId:j.distributorId,retailerId:u.currentUser?.uid,orderId:j.id,hasProforma:!0})}),h(j)&&i.jsx("div",{className:"text-xs text-emerald-300 mt-2",children:"Direct order â€” no proforma acceptance needed."})]})})(),i.jsxs("div",{className:"mt-3",children:[i.jsx("strong",{children:"Products:"}),i.jsxs("table",{className:"w-full mt-2 text-sm rounded-lg overflow-hidden border border-white/10 bg-white/5 backdrop-blur-xl",children:[i.jsx("thead",{className:"bg-white/10",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-3 py-1 text-left border border-white/10",children:"Product Name"}),i.jsx("th",{className:"px-3 py-1 text-left border border-white/10",children:"Brand"}),i.jsx("th",{className:"px-3 py-1 text-left border border-white/10",children:"Category"}),i.jsx("th",{className:"px-3 py-1 text-left border border-white/10",children:"Quantity"}),i.jsx("th",{className:"px-3 py-1 text-left border border-white/10",children:"Unit"}),i.jsx("th",{className:"px-3 py-1 text-left border border-white/10",children:"Price"}),i.jsx("th",{className:"px-3 py-1 text-left border border-white/10",children:"Subtotal"})]})}),i.jsx("tbody",{children:(j.items||[]).map((k,N)=>i.jsxs("tr",{children:[i.jsx("td",{className:"px-3 py-1 border border-white/10",children:k.name||k.productName||"â€”"}),i.jsx("td",{className:"px-3 py-1 border border-white/10",children:k.brand||"â€”"}),i.jsx("td",{className:"px-3 py-1 border border-white/10",children:k.category||"â€”"}),i.jsx("td",{className:"px-3 py-1 border border-white/10",children:k.quantity??k.qty??0}),i.jsx("td",{className:"px-3 py-1 border border-white/10",children:k.unit}),i.jsxs("td",{className:"px-3 py-1 border border-white/10",children:["â‚¹",parseFloat(k.price||k.unitPrice||k.sellingPrice||0).toFixed(2)]}),i.jsxs("td",{className:"px-3 py-1 border border-white/10",children:["â‚¹",(parseFloat(k.price||k.unitPrice||k.sellingPrice||0)*parseFloat(k.quantity??k.qty??0)).toFixed(2)]})]},N))})]})]}),i.jsxs("div",{className:"mt-3 font-semibold text-white",children:["Total Price: â‚¹",(j.items||[]).reduce((k,N)=>{const P=parseFloat(N.price||N.unitPrice||N.sellingPrice||0),D=parseFloat(N.quantity??N.qty??0);return k+P*D},0).toFixed(2)]}),j.status==="Delivered"&&(j.inventorySynced?i.jsx("button",{className:"mt-3 px-4 py-2 rounded-xl bg-white/20 text-white/80 cursor-not-allowed",disabled:!0,children:"âœ… Added to Inventory"}):i.jsx("button",{className:"mt-3 px-4 py-2 rounded-xl font-medium text-slate-900 bg-gradient-to-r from-emerald-400 via-teal-300 to-cyan-400 hover:shadow-[0_8px_24px_rgba(16,185,129,0.35)]",onClick:()=>d(j),children:"Add Items to Inventory"}))]})})})]},j.id))})]})}),c&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-40 flex justify-center items-center z-50",children:i.jsx("div",{className:"rounded-xl w-11/12 max-w-3xl p-4 overflow-y-auto max-h-[90vh] border border-white/10 bg-[#0B0F14]/90 backdrop-blur-xl text-white shadow-[0_12px_40px_rgba(0,0,0,0.5)]",children:i.jsx(sj,{order:c,onClose:()=>d(null),onSuccess:()=>{Vt.success("Items successfully added to inventory!"),d(null)}})})})]})},sr=(e=0)=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:2}).format(Number(e||0)),ai=(e,t=0)=>e==null||isNaN(Number(e))?"":`${Number(e).toFixed(t)}%`,aa=e=>Math.abs(Number(e||0))<1e-9;function lj({invoice:e,onClose:t}){const r=e?.proforma||{},n=r?.orderCharges||{},a=r?.taxBreakup||{},s=Array.isArray(r?.lines)?r.lines:[],o=x.useMemo(()=>{const h=Array.from(new Set(s.map(m=>Number(m?.gstRate??0)).filter(m=>Number.isFinite(m))));return h.length===0?"â€”":h.length===1?`${h[0]}%`:"Mixed"},[s]),l={name:e?.distributorName||"-",email:e?.distributorEmail||"-",phone:e?.distributorPhone||"-",city:e?.distributorCity||"-",state:e?.distributorState||"-"},c={name:e?.retailerBusinessName||e?.retailerName||"-",email:e?.retailerEmail||"-",phone:e?.retailerPhone||"-",address:e?.retailerAddress||"-"},d={orderId:e?.id||e?.orderId||"-",date:(()=>{const h=r?.date;try{if(h?.toDate)return h.toDate().toLocaleString("en-GB");const m=new Date(h);if(!isNaN(m.getTime()))return m.toLocaleString("en-GB")}catch{}return new Date().toLocaleString("en-GB")})(),paymentMode:e?.paymentMode||"-",paymentStatus:e?.paymentStatus||"-"},u={grossItems:Number(r?.grossItems||0),lineDiscountTotal:Number(r?.lineDiscountTotal||0),itemsSubTotal:Number(r?.itemsSubTotal??r?.orderCharges?.subTotal??0),delivery:Number(n?.delivery||0),packing:Number(n?.packing||0),insurance:Number(n?.insurance||0),other:Number(n?.other||0),discountPct:Number(n?.discountPct||0),discountAmt:Number(r?.discountTotal||0),taxableBase:Number(r?.taxBreakup?.taxableBase??r?.taxableBase??0),roundOff:Number(n?.roundOff||0),cgst:Number(a?.cgst||0),sgst:Number(a?.sgst||0),igst:Number(a?.igst||0),grandTotal:Number(r?.grandTotal||0),taxType:a?.taxType||(e?.distributorState&&e?.retailerState&&e?.distributorState!==e?.retailerState?"IGST":"CGST_SGST")},f=({label:h,value:m,dim:b,bold:g})=>i.jsxs("div",{className:`flex items-center justify-between ${g?"font-semibold text-white":""}`,children:[i.jsx("span",{className:b?"text-white/60":"text-white/80",children:h}),i.jsx("span",{className:g?"text-white":"text-white/90",children:sr(m)})]});return x.useEffect(()=>{const h=document.documentElement.style.overflow,m=document.body.style.overflow;return document.documentElement.style.overflow="hidden",document.body.style.overflow="hidden",()=>{document.documentElement.style.overflow=h,document.body.style.overflow=m}},[]),Ss.createPortal(i.jsx("div",{className:"fixed inset-0 z-[1000] flex items-center justify-center p-4 bg-black/60",children:i.jsxs("div",{className:"invoice-modal relative w-[96vw] max-w-6xl max-h-[92vh] rounded-2xl border border-white/10 bg-[#0F1216] text-white shadow-[0_10px_50px_rgba(0,0,0,0.65)] flex flex-col",children:[i.jsxs("div",{className:"sticky top-0 z-10 border-b border-white/10 bg-[#0F1216]/95 backdrop-blur px-4 py-3 rounded-t-2xl",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("div",{className:"text-sm text-white/70",children:"INVOICE"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("button",{onClick:()=>window.print(),className:"px-3 py-1.5 rounded-lg bg-white/10 hover:bg-white/15 text-sm",children:"Print / Save PDF"}),i.jsx("button",{onClick:t,className:"px-3 py-1.5 rounded-lg bg-white/10 hover:bg-white/15 text-sm",children:"Close"})]})]}),i.jsxs("div",{className:"mt-1 text-xs text-white/60 flex flex-wrap gap-x-4 gap-y-1",children:[i.jsxs("span",{children:[i.jsx("span",{className:"text-white/70",children:"Order ID:"})," ",d.orderId]}),i.jsx("span",{children:"â€¢"}),i.jsxs("span",{children:[i.jsx("span",{className:"text-white/70",children:"Date:"})," ",d.date]}),i.jsx("span",{children:"â€¢"}),i.jsxs("span",{children:[i.jsx("span",{className:"text-white/70",children:"Distributor:"})," ",l.name]})]})]}),i.jsxs("div",{className:"invoice-modal__content flex-1 min-h-0 overflow-y-auto p-4 md:p-6 space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsxs("div",{className:"rounded-xl border border-white/10 bg-white/[0.04] p-4",children:[i.jsx("div",{className:"text-xs uppercase tracking-wide text-white/60 mb-1",children:"Sold By"}),i.jsx("div",{className:"font-medium",children:l.name}),i.jsxs("div",{className:"text-white/70 text-sm",children:["Email: ",l.email]}),i.jsxs("div",{className:"text-white/70 text-sm",children:["Phone: ",l.phone]}),i.jsxs("div",{className:"text-white/70 text-sm",children:["City/State: ",l.city,", ",l.state]})]}),i.jsxs("div",{className:"rounded-xl border border-white/10 bg-white/[0.04] p-4",children:[i.jsx("div",{className:"text-xs uppercase tracking-wide text-white/60 mb-1",children:"Sold To"}),i.jsx("div",{className:"font-medium",children:c.name}),i.jsxs("div",{className:"text-white/70 text-sm",children:["Email: ",c.email]}),i.jsxs("div",{className:"text-white/70 text-sm",children:["Phone: ",c.phone]}),i.jsxs("div",{className:"text-white/70 text-sm",children:["Address: ",c.address]})]}),i.jsxs("div",{className:"rounded-xl border border-white/10 bg-white/[0.04] p-4",children:[i.jsx("div",{className:"text-xs uppercase tracking-wide text-white/60 mb-1",children:"Order"}),i.jsxs("div",{className:"text-white/70 text-sm",children:["Payment Mode: ",d.paymentMode]}),i.jsxs("div",{className:"text-white/70 text-sm",children:["Payment Status: ",d.paymentStatus]}),i.jsxs("div",{className:"text-white/70 text-sm",children:["GST Rate: ",o]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[i.jsxs("div",{className:"lg:col-span-2",children:[i.jsx("div",{className:"overflow-hidden rounded-xl border border-white/10",children:i.jsx("div",{className:"max-h-[40vh] overflow-auto",children:i.jsxs("table",{className:"w-full text-sm",children:[i.jsx("thead",{className:"sticky top-0 bg-[#131a20] text-xs uppercase tracking-wide text-emerald-300",children:i.jsxs("tr",{children:[i.jsx("th",{className:"border-b border-white/10 px-3 py-2 text-left",children:"Product"}),i.jsx("th",{className:"border-b border-white/10 px-3 py-2 text-center",children:"Qty"}),i.jsx("th",{className:"border-b border-white/10 px-3 py-2 text-right",children:"Price"}),i.jsx("th",{className:"border-b border-white/10 px-3 py-2 text-right",children:"Disc %"}),i.jsx("th",{className:"border-b border-white/10 px-3 py-2 text-right",children:"Disc â‚¹"}),i.jsx("th",{className:"border-b border-white/10 px-3 py-2 text-right",children:"GST %"}),i.jsx("th",{className:"border-b border-white/10 px-3 py-2 text-right",children:"Line Total"})]})}),i.jsxs("tbody",{children:[s.map((h,m)=>{const b=Number(h?.qty||0),g=Number(h?.price||0),p=Number(h?.itemDiscountPct||0),v=Number(h?.discountAmount||0),w=Number(h?.taxable??b*g-v),y=Number(h?.gstRate||0);return i.jsxs("tr",{className:m%2?"bg-white/5":"bg-white/[0.02]",children:[i.jsxs("td",{className:"px-3 py-2 align-top",children:[i.jsx("div",{className:"font-medium",children:h?.name||"-"}),i.jsxs("div",{className:"text-xs text-white/60",children:[h?.sku||""," ",h?.uom?`â€¢ ${h.uom}`:""]})]}),i.jsx("td",{className:"px-3 py-2 text-center align-top",children:b}),i.jsx("td",{className:"px-3 py-2 text-right align-top",children:sr(g)}),i.jsx("td",{className:"px-3 py-2 text-right align-top",children:ai(p)}),i.jsx("td",{className:"px-3 py-2 text-right align-top",children:sr(v)}),i.jsx("td",{className:"px-3 py-2 text-right align-top",children:ai(y)}),i.jsx("td",{className:"px-3 py-2 text-right align-top",children:sr(w)})]},m)}),s.length===0&&i.jsx("tr",{children:i.jsx("td",{className:"px-3 py-4 text-center text-white/60",colSpan:7,children:"No items"})})]})]})})}),i.jsxs("div",{className:"rounded-lg border border-white/10 bg-[#0f151a] mt-3 p-3 text-sm",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-white/70",children:"Gross Items Total"}),i.jsx("span",{className:"font-medium",children:sr(u.grossItems)})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-white/70",children:"âˆ’ Line Discounts"}),i.jsx("span",{className:"font-medium",children:sr(u.lineDiscountTotal)})]}),i.jsxs("div",{className:"flex items-center justify-between font-semibold text-white",children:[i.jsx("span",{children:"Items Subâ€‘Total"}),i.jsx("span",{children:sr(u.itemsSubTotal)})]})]})]}),i.jsx("aside",{className:"lg:col-span-1",children:i.jsxs("div",{className:"sticky top-[88px] space-y-3",children:[i.jsxs("div",{className:"rounded-xl border border-emerald-500/20 bg-emerald-500/10 p-4",children:[i.jsx("div",{className:"text-xs uppercase tracking-wide text-emerald-300",children:"Grand Total"}),i.jsx("div",{className:"mt-1 text-2xl font-extrabold text-emerald-300",children:sr(u.grandTotal)})]}),i.jsxs("div",{className:"rounded-lg border border-white/10 bg-[#0f151a] p-4 text-sm text-white/90",children:[i.jsx("div",{className:"text-xs uppercase tracking-wide text-white/60 mb-2",children:"Charges & Discount"}),i.jsx(f,{label:"Delivery",value:u.delivery,dim:aa(u.delivery)}),i.jsx(f,{label:"Packing",value:u.packing,dim:aa(u.packing)}),i.jsx(f,{label:"Insurance",value:u.insurance,dim:aa(u.insurance)}),i.jsx(f,{label:"Other",value:u.other,dim:aa(u.other)}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("span",{className:"text-white/80",children:["âˆ’ Order Discount ",ai(u.discountPct)&&`(${ai(u.discountPct)})`]}),i.jsx("span",{className:"text-white/90",children:sr(u.discountAmt)})]}),i.jsx("div",{className:"mt-3 text-xs uppercase tracking-wide text-white/60",children:"Taxable"}),i.jsx(f,{label:"Taxable Base",value:u.taxableBase,bold:!0}),i.jsxs("div",{className:"flex items-center justify-between mt-2",children:[i.jsx("span",{className:"text-white/70",children:"Tax Type"}),i.jsx("span",{className:"font-medium",children:u.taxType==="IGST"?"IGST (Interstate)":"CGST + SGST (Intrastate)"})]}),i.jsx("div",{className:"mt-2 border-t border-white/10 pt-2"}),!!u.cgst&&i.jsx(f,{label:"CGST",value:u.cgst}),!!u.sgst&&i.jsx(f,{label:"SGST",value:u.sgst}),!!u.igst&&i.jsx(f,{label:"IGST",value:u.igst}),!u.cgst&&!u.sgst&&!u.igst&&i.jsx("div",{className:"text-white/60",children:"No taxes"}),!aa(u.roundOff)&&i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"mt-2 border-t border-white/10 pt-2"}),i.jsx(f,{label:"Round Off",value:u.roundOff})]})]})]})})]}),i.jsx("div",{className:"text-xs text-white/60 mt-2",children:i.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-2",children:[i.jsx("div",{children:"Thank you for your business."}),i.jsx("div",{className:"italic",children:"This is a computerâ€‘generated invoice."})]})})]}),i.jsx("style",{children:`
          @media print {
            .invoice-modal { width: 100% !important; max-height: none !important; box-shadow: none !important; border: none !important; }
            .invoice-modal__content { overflow: visible !important; padding: 24px !important; }
            .sticky { position: static !important; }
            button { display: none !important; }
          }
        `})]})}),document.body)}const cj=(e=0)=>{const t=Number(e||0);return new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:2}).format(t)},oc=e=>{if(!e)return null;if(typeof e?.toDate=="function")return e.toDate();if(typeof e?.seconds=="number")return new Date(e.seconds*1e3);if(e instanceof Date)return e;const t=new Date(e);return isNaN(t)?null:t},uj=e=>{const t=oc(e);return t?new Intl.DateTimeFormat("en-GB",{day:"2-digit",month:"2-digit",year:"numeric"}).format(t):"-"},lc=e=>e?.statusTimestamps?.deliveredAt||e?.proforma?.date||e?.deliveredAt||e?.createdAt||null,dj=e=>e?.chargesSnapshot?.breakdown||e?.orderCharges||e?.proforma?.orderCharges||e?.breakdown||{},fj=(e,t)=>e?.chargesSnapshot?.breakdown?.taxBreakup||e?.proforma?.taxBreakup||t?.taxBreakup||e?.chargesSnapshot?.taxBreakup||e?.breakdown||{},cc=e=>{if(e?.proforma?.grandTotal!=null)return Number(e.proforma.grandTotal);const t=dj(e);if(t?.grandTotal!=null)return Number(t.grandTotal);const r=fj(e,t),n=Number(r.cgst??0)+Number(r.sgst??0)+Number(r.igst??0),a=Number(t.roundOff??0);if(t?.taxableBase!=null)return Number(t.taxableBase||0)+n+a;const s=Number(t.itemsSubTotal??t.subTotal??0),o=Number(t.delivery??0)+Number(t.packing??0)+Number(t.insurance??0)+Number(t.other??0),l=Number(t.discountAmt??0);return s+o-l+n+a},hj=e=>uj(lc(e)),mj=e=>cj(cc(e)),pj=()=>i.jsxs("div",{className:"bg-white/5 border border-white/10 p-4 rounded-lg shadow animate-pulse",children:[i.jsx("div",{className:"h-5 w-1/2 bg-white/10 rounded mb-3"}),i.jsx("div",{className:"h-3 w-2/3 bg-white/10 rounded mb-2"}),i.jsx("div",{className:"h-3 w-1/3 bg-white/10 rounded mb-2"}),i.jsx("div",{className:"h-4 w-1/4 bg-white/10 rounded"})]}),gj=()=>{const[e,t]=x.useState([]),[r,n]=x.useState(!0),[a,s]=x.useState(null),[o,l]=x.useState(""),[c,d]=x.useState("newest");x.useEffect(()=>{const h=Ra(xe,async m=>{if(m){n(!0);try{const b=_e(ue(J,"businesses",m.uid,"sentOrders"),gt("status","==","Delivered")),p=(await ye(b)).docs.map(v=>({id:v.id,...v.data()}));t(p)}catch(b){console.error("Failed to load invoices",b),t([])}finally{n(!1)}}});return()=>h&&h()},[]);const u=x.useMemo(()=>{const h=o.trim().toLowerCase();let m=[...e];return h&&(m=m.filter(b=>{const g=(b.distributorName||"Distributor").toLowerCase(),p=String(b.id||"").toLowerCase();return g.includes(h)||p.includes(h)})),m.sort((b,g)=>{const p=oc(lc(b))?.getTime()||0,v=oc(lc(g))?.getTime()||0,w=Number(cc(b)||0),y=Number(cc(g)||0),S=(b.distributorName||"").toLowerCase(),j=(g.distributorName||"").toLowerCase();switch(c){case"amountHigh":return y-w;case"amountLow":return w-y;case"name":return S.localeCompare(j);case"newest":default:return v-p}}),m},[e,o,c]),f=async h=>{try{await navigator.clipboard.writeText(h)}catch{console.warn("Clipboard not available")}};return i.jsx("div",{className:"p-4 text-white",children:i.jsxs("div",{className:"max-w-7xl mx-auto",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("h2",{className:"text-xl font-semibold",children:"My Invoices"}),i.jsxs("div",{className:"flex items-center gap-3 text-sm",children:[i.jsx("input",{value:o,onChange:h=>l(h.target.value),placeholder:"Search distributor or order idâ€¦",className:"px-3 py-2 rounded bg-white/5 border border-white/10 focus:outline-none focus:ring-2 focus:ring-cyan-400/40"}),i.jsxs("select",{value:c,onChange:h=>d(h.target.value),className:"px-3 py-2 rounded bg-white/5 border border-white/10 focus:outline-none",children:[i.jsx("option",{value:"newest",children:"Newest"}),i.jsx("option",{value:"amountHigh",children:"Amount: High â†’ Low"}),i.jsx("option",{value:"amountLow",children:"Amount: Low â†’ High"}),i.jsx("option",{value:"name",children:"Distributor A â†’ Z"})]}),i.jsxs("span",{className:"text-xs text-white/70",children:[u.length," invoice",u.length!==1?"s":""]})]})]}),r?i.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:Array.from({length:6}).map((h,m)=>i.jsx(pj,{},m))}):u.length===0?i.jsx("div",{className:"mt-10 flex items-center justify-center",children:i.jsxs("div",{className:"text-center text-white/80",children:[i.jsx("div",{className:"text-3xl mb-2",children:"ðŸ§¾"}),i.jsx("div",{className:"font-medium",children:"No invoices found"}),i.jsx("div",{className:"text-sm text-white/60",children:"Delivered orders will automatically appear here."})]})}):i.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:u.map(h=>{const m=hj(h),b=mj(h),g=h.distributorName||"Distributor",p=h.orderId||h.id;return i.jsxs("div",{className:"relative bg-white/5 border border-white/10 p-4 rounded-lg shadow transition hover:border-cyan-400/40 hover:shadow-cyan-500/10",children:[i.jsxs("div",{className:"flex items-start justify-between",children:[i.jsxs("div",{children:[i.jsx("div",{className:"font-semibold text-lg leading-tight",children:g}),i.jsxs("div",{className:"mt-1 text-xs text-white/60 flex items-center gap-2",children:[i.jsx("span",{children:"Order ID:"}),i.jsx("span",{className:"font-mono text-white/80",children:p}),i.jsx("button",{onClick:()=>f(p),className:"px-1.5 py-0.5 text-[10px] rounded bg-white/10 hover:bg-white/15 border border-white/10",title:"Copy Order ID",children:"Copy"})]})]}),i.jsx("span",{className:"text-[10px] px-2 py-1 rounded-full bg-emerald-400/10 border border-emerald-400/30 text-emerald-200",children:"Delivered"}),(h?.skipProforma||h?.statusCode==="DIRECT")&&i.jsx("span",{className:"ml-2 text-[10px] px-2 py-1 rounded-full bg-cyan-400/10 border border-cyan-400/30 text-cyan-200",children:"Direct"})]}),i.jsxs("div",{className:"mt-3 text-sm text-white/80",children:[i.jsxs("div",{children:["Date: ",m]}),h?.paymentMode&&i.jsxs("div",{className:"mt-0.5",children:["Payment: ",i.jsx("span",{className:"text-white/90",children:h.paymentMode})]})]}),i.jsxs("div",{className:"mt-2 text-sm",children:[i.jsx("span",{className:"text-white/70",children:"Grand Total:"})," ",i.jsx("span",{className:"font-semibold",children:b})]}),i.jsxs("div",{className:"mt-3 flex items-center gap-3 text-sm",children:[i.jsx("button",{onClick:()=>s(h),className:"px-3 py-1.5 rounded bg-cyan-500/20 border border-cyan-400/30 hover:bg-cyan-500/25 text-cyan-100",children:"View Invoice"}),i.jsx("button",{disabled:!0,className:"px-3 py-1.5 rounded bg-white/5 border border-white/10 text-white/40 cursor-not-allowed",title:"Coming soon",children:"Download PDF"})]})]},p)})}),a&&i.jsx(lj,{invoice:a,onClose:()=>s(null)})]})})},xj=()=>{const[e,t]=x.useState("status");return i.jsxs("div",{className:"p-4 text-white",children:[i.jsx("h2",{className:"text-2xl font-semibold mb-4 bg-clip-text text-transparent bg-gradient-to-r from-white via-white to-emerald-200",children:"Order History"}),i.jsxs("div",{className:"flex gap-4 mb-6",children:[i.jsx("button",{onClick:()=>t("status"),className:`px-4 py-2 rounded-xl transition ${e==="status"?"bg-emerald-500 text-slate-900 shadow-[0_8px_24px_rgba(16,185,129,0.35)]":"bg-white/10 text-white hover:bg-white/15 border border-white/15"}`,children:"ðŸ“Š Order Status"}),i.jsx("button",{onClick:()=>t("track"),className:`px-4 py-2 rounded-xl transition ${e==="track"?"bg-emerald-500 text-slate-900 shadow-[0_8px_24px_rgba(16,185,129,0.35)]":"bg-white/10 text-white hover:bg-white/15 border border-white/15"}`,children:"ðŸšš Track Orders"}),i.jsx("button",{onClick:()=>t("invoice"),className:`px-4 py-2 rounded-xl transition ${e==="invoice"?"bg-emerald-500 text-slate-900 shadow-[0_8px_24px_rgba(16,185,129,0.35)]":"bg-white/10 text-white hover:bg-white/15 border border-white/15"}`,children:"ðŸ§¾ Invoices"})]}),i.jsxs("div",{className:"p-4 rounded-xl bg-white/10 backdrop-blur-xl border border-white/10 shadow-[0_8px_30px_rgba(0,0,0,0.35)]",children:[e==="status"&&i.jsx(tj,{}),e==="track"&&i.jsxs("div",{children:[i.jsx(oj,{}),i.jsx("p",{className:"text-white/70 text-sm mt-4 ml-1",children:"Track order status across: Requested â†’ Accepted/Rejected/Modified â†’ Shipped â†’ Delivered"})]}),e==="invoice"&&i.jsx(gj,{})]})]})};lu.register(cu,uu,du,fu,hu);const vj=()=>{const[e,t]=x.useState({totalCustomers:0,returningCustomers:0,retentionRate:0,chartData:[]});x.useEffect(()=>{(async()=>{const a=xe.currentUser?.uid;if(!a)return;const s=ue(J,`businesses/${a}/finalizedInvoices`),o=await ye(s),l={};o.docs.forEach(h=>{const b=h.data().customer||{},g=b.custId||b.phone||b.email||b.name;l[g]||(l[g]={custId:b.custId,name:b.name,visits:0}),l[g].visits+=1});const c=Object.keys(l).length,d=Object.values(l).filter(h=>h.visits>1).length,u=c>0?(d/c*100).toFixed(1):0,f=Object.values(l).sort((h,m)=>m.visits-h.visits).map(h=>({name:h.name||"Unknown",visits:h.visits}));t({totalCustomers:c,returningCustomers:d,retentionRate:u,chartData:f})})()},[]);const r={labels:e.chartData.map(n=>n.name),datasets:[{label:"Visits",data:e.chartData.map(n=>n.visits),backgroundColor:"#3B82F6"}]};return i.jsxs("div",{className:"bg-slate-900/60 border border-white/10 backdrop-blur-sm shadow rounded p-4 mb-6",children:[i.jsx("h2",{className:"text-lg font-bold mb-2 bg-clip-text text-transparent bg-gradient-to-r from-cyan-400 via-blue-400 to-indigo-400",children:"ðŸ“ˆ Customer Retention"}),i.jsxs("p",{className:"text-gray-300",children:["Total Customers: ",i.jsx("strong",{className:"text-white",children:e.totalCustomers})]}),i.jsxs("p",{className:"text-gray-300",children:["Returning Customers: ",i.jsx("strong",{className:"text-white",children:e.returningCustomers})]}),i.jsxs("p",{className:"text-gray-300",children:["Retention Rate: ",i.jsxs("strong",{className:"text-white",children:[e.retentionRate,"%"]})]}),e.chartData.length>0&&i.jsx("div",{className:"mt-4",children:i.jsx(ou,{data:r,options:{responsive:!0,plugins:{legend:{display:!1}},backgroundColor:"transparent"}})})]})},bj=()=>{const[e,t]=x.useState([]);return x.useEffect(()=>{(async()=>{const n=xe.currentUser?.uid;if(!n)return;const a=ue(J,`businesses/${n}/finalizedInvoices`),o=(await ye(a)).docs.map(d=>d.data()),l={};o.forEach(d=>{const u=d.customer||{},f=u.custId||u.phone||u.email||u.name;l[f]||(l[f]={custId:u.custId,name:u.name,phone:u.phone,totalSpend:0,orders:0}),l[f].orders+=1,l[f].totalSpend+=d.totalAmount||0});const c=Object.values(l).map(d=>({...d,avgOrderValue:d.orders>0?(d.totalSpend/d.orders).toFixed(2):"0.00"})).sort((d,u)=>u.totalSpend-d.totalSpend).slice(0,5);t(c)})()},[]),i.jsxs("div",{className:"bg-slate-900/60 border border-white/10 backdrop-blur-sm shadow rounded p-4 mb-6",children:[i.jsx("h2",{className:"text-lg font-bold mb-4 bg-clip-text text-transparent bg-gradient-to-r from-yellow-400 via-orange-400 to-pink-500",children:"ðŸ›ï¸ Top Loyal / High-Spend Customers"}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full border border-transparent text-sm bg-slate-800",children:[i.jsx("thead",{className:"bg-slate-700 bg-opacity-50 text-white",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 text-left",children:"Name"}),i.jsx("th",{className:"p-2 text-left",children:"Phone"}),i.jsx("th",{className:"p-2 text-center",children:"Orders"}),i.jsx("th",{className:"p-2 text-right",children:"Total Spend"}),i.jsx("th",{className:"p-2 text-right",children:"Avg Order Value"})]})}),i.jsx("tbody",{children:e.map((r,n)=>i.jsxs("tr",{className:`border-t border-slate-700 ${n%2===0?"bg-slate-800":"bg-slate-900"} hover:bg-slate-700`,children:[i.jsx("td",{className:"p-2 text-white",children:r.name||"N/A"}),i.jsx("td",{className:"p-2 text-white",children:r.phone||"N/A"}),i.jsx("td",{className:"p-2 text-center text-gray-300",children:r.orders}),i.jsxs("td",{className:"p-2 text-right text-white",children:["â‚¹",r.totalSpend.toFixed(2)]}),i.jsxs("td",{className:"p-2 text-right text-white",children:["â‚¹",r.avgOrderValue]})]},n))})]})})]})},yj=()=>{const[e,t]=x.useState([]);return x.useEffect(()=>{(async()=>{const n=xe.currentUser?.uid;if(!n)return;const a=ue(J,`businesses/${n}/finalizedInvoices`),o=(await ye(a)).docs.map(d=>d.data()),l={};o.forEach(d=>{const u=d.customer||{},f=u.custId||u.phone||u.email||u.name;l[f]||(l[f]={custId:u.custId,name:u.name,phone:u.phone,visits:0,totalSpend:0,products:{}}),l[f].visits+=1,l[f].totalSpend+=d.totalAmount||0,(d.cartItems||[]).forEach(h=>{l[f].products[h.name]||(l[f].products[h.name]=0),l[f].products[h.name]+=h.quantity})});const c=Object.values(l).map(d=>({...d,topProducts:Object.entries(d.products).sort((u,f)=>f[1]-u[1]).slice(0,3).map(([u,f])=>`${u} (${f})`).join(", ")})).sort((d,u)=>u.visits-d.visits);t(c)})()},[]),i.jsxs("div",{className:"bg-slate-900/60 border border-white/10 backdrop-blur-sm shadow rounded p-4 mb-6",children:[i.jsx("h2",{className:"text-lg font-bold mb-4 text-white bg-clip-text text-transparent bg-gradient-to-r from-cyan-400 via-fuchsia-400 to-teal-400 inline-block",children:"ðŸ“Š Products Bought by Each Customer"}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full text-sm bg-slate-900/70 rounded",children:[i.jsx("thead",{children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-3 text-left bg-slate-800/70 text-white font-semibold border-b border-white/10",children:"Customer Name"}),i.jsx("th",{className:"p-3 text-center bg-slate-800/70 text-white font-semibold border-b border-white/10",children:"Visits"}),i.jsx("th",{className:"p-3 text-left bg-slate-800/70 text-white font-semibold border-b border-white/10",children:"Top Products"}),i.jsx("th",{className:"p-3 text-right bg-slate-800/70 text-white font-semibold border-b border-white/10",children:"Total Spend"})]})}),i.jsx("tbody",{children:e.map((r,n)=>i.jsxs("tr",{className:`transition-colors ${n%2===0?"bg-slate-900/60":"bg-slate-800/60"} hover:bg-fuchsia-900/40 border-b border-white/5`,children:[i.jsx("td",{className:"p-3 text-white",children:r.name||"N/A"}),i.jsx("td",{className:"p-3 text-center text-fuchsia-200",children:r.visits}),i.jsx("td",{className:"p-3 text-slate-200",children:r.topProducts}),i.jsxs("td",{className:"p-3 text-right text-cyan-200",children:["â‚¹",r.totalSpend.toFixed(2)]})]},n))})]})})]})};lu.register(cu,uu,du,fu,hu);const wj=()=>{const[e,t]=x.useState(new Array(24).fill(0));x.useEffect(()=>{(async()=>{const s=xe.currentUser?.uid;if(!s)return;const o=ue(J,`businesses/${s}/finalizedInvoices`),l=await ye(o),c=new Array(24).fill(0),d=new Set;l.docs.forEach(u=>{const f=u.data(),h=f.issuedAt||f.createdAt;if(!h)return;const b=new Date(h).getHours(),g=f.customer||{},v=`${g.custId||g.phone||g.email||g.name}-${b}`;d.has(v)||(d.add(v),c[b]++)}),t(c)})()},[]);const r={labels:Array.from({length:24},(a,s)=>`${s}:00`),datasets:[{label:"Invoices",data:e,backgroundColor:"rgba(16,185,129,0.8)"}]},n={responsive:!0,plugins:{legend:{display:!1}},scales:{x:{ticks:{color:"#e5e7eb"},grid:{color:"rgba(255,255,255,0.04)"}},y:{beginAtZero:!0,stepSize:1,ticks:{color:"#e5e7eb"},grid:{color:"rgba(255,255,255,0.08)"}}}};return i.jsxs("div",{className:"bg-slate-900/60 border border-white/10 backdrop-blur-sm shadow rounded p-4 mb-6",children:[i.jsx("h2",{className:"text-lg font-bold mb-4 bg-clip-text text-transparent bg-gradient-to-r from-emerald-400 via-cyan-400 to-blue-400",children:"ðŸ•“ Hourly Customer Visit Trends"}),i.jsx(ou,{data:r,options:n})]})},jj=()=>{const[e,t]=x.useState([]);return x.useEffect(()=>{(async()=>{const n=xe.currentUser?.uid;if(!n)return;const a=ue(J,`businesses/${n}/finalizedInvoices`),o=(await ye(a)).docs.map(c=>c.data()),l={};o.forEach(c=>{const d=c.customer||{},u=d.custId||d.phone||d.email||d.name;l[u]||(l[u]={custId:d.custId,name:d.name,phone:d.phone,email:d.email,visits:0,totalSpend:0,products:{}}),l[u].visits+=1,l[u].totalSpend+=c.totalAmount||0,(c.cartItems||[]).forEach(f=>{l[u].products[f.name]||(l[u].products[f.name]=0),l[u].products[f.name]+=f.quantity})}),t(Object.values(l))})()},[]),i.jsxs("div",{className:"p-4 bg-black/70 rounded-lg border border-white/20 shadow-lg",children:[i.jsx("h2",{className:"text-3xl font-extrabold mb-6 bg-gradient-to-r from-indigo-400 via-purple-400 to-pink-400 bg-clip-text text-transparent",children:"Customer Insights"}),i.jsx("div",{className:"space-y-4",children:e.map((r,n)=>i.jsxs("div",{className:"border border-white/10 p-4 rounded-lg shadow bg-slate-900/60 text-white",children:[i.jsxs("p",{className:"font-semibold text-white",children:[r.name," (",r.phone,")"]}),i.jsxs("p",{className:"text-gray-300",children:["Total Visits: ",r.visits]}),i.jsxs("p",{className:"text-gray-300",children:["Total Spend: â‚¹",r.totalSpend.toFixed(2)]}),i.jsxs("p",{className:"text-gray-300",children:["Top Products: ",Object.entries(r.products).map(([a,s])=>`${a} (${s})`).join(", ")]})]},n))})]})},Nj=()=>{const[e,t]=x.useState([]);return x.useEffect(()=>{(async()=>{const n=xe.currentUser?.uid;if(!n)return;const a=ue(J,`businesses/${n}/finalizedInvoices`),s=await ye(a),o={};s.docs.forEach(c=>{const u=c.data().customer||{},f=u.custId||u.phone||u.email||u.name;o[f]||(o[f]={custId:u.custId,name:u.name,phone:u.phone,visits:0}),o[f].visits+=1});const l=Object.values(o).map(c=>({...c,tier:c.visits>=10?"ðŸ¥‡ Platinum":c.visits>=5?"ðŸ¥ˆ Gold":c.visits>=1?"ðŸ¥‰ Silver":"New"})).sort((c,d)=>d.visits-c.visits);t(l)})()},[]),i.jsxs("div",{className:"bg-slate-900/60 border border-white/10 backdrop-blur-sm shadow rounded p-4 mb-6",children:[i.jsx("h2",{className:"text-lg font-bold mb-4 bg-clip-text text-transparent bg-gradient-to-r from-pink-400 via-purple-400 to-indigo-400",children:"ðŸŽ¯ Customer Loyalty Tiers"}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:e.map((r,n)=>i.jsxs("div",{className:"bg-slate-800/60 border border-white/10 rounded-lg p-4 shadow text-white",children:[i.jsxs("p",{children:[i.jsx("span",{className:"font-semibold text-gray-300",children:"Name:"})," ",i.jsxs("span",{className:"text-white",children:[r.name," (",r.phone,")"]})]}),i.jsxs("p",{children:[i.jsx("span",{className:"font-semibold text-gray-300",children:"Visits:"})," ",i.jsx("span",{className:"text-white",children:r.visits})]}),i.jsxs("p",{children:[i.jsx("span",{className:"font-semibold text-gray-300",children:"Tier:"})," ",i.jsx("strong",{className:"text-white",children:r.tier})]})]},n))})]})};lu.register(cu,uu,du,fu,hu);const Sj=()=>{const[e,t]=x.useState([]);x.useEffect(()=>{(async()=>{const s=xe.currentUser?.uid;if(!s)return;const o=ue(J,`businesses/${s}/finalizedInvoices`),l=await ye(o),c={},d={};l.docs.forEach(f=>{const h=f.data(),m=h.customer||{},b=m.custId||m.phone||m.email||m.name;(h.cartItems||[]).forEach(g=>{const p=g.name||"Unnamed",v=`${b}-${p}`;d[v]||(d[v]=g.quantity,c[p]=(c[p]||0)+g.quantity)})});const u=Object.entries(c).sort((f,h)=>h[1]-f[1]).slice(0,5).map(([f,h])=>({name:f,qty:h}));t(u)})()},[]);const r={labels:e.map(a=>a.name),datasets:[{label:"Quantity Sold",data:e.map(a=>a.qty),backgroundColor:"rgba(99,102,241,0.8)"}]},n={responsive:!0,plugins:{legend:{display:!1}},scales:{y:{beginAtZero:!0,stepSize:1,ticks:{color:"#e5e7eb"},grid:{color:"rgba(255,255,255,0.08)"}},x:{ticks:{color:"#e5e7eb"},grid:{color:"rgba(255,255,255,0.04)"}}}};return i.jsxs("div",{className:"bg-slate-900/60 border border-white/10 backdrop-blur-sm shadow rounded p-4 mb-6",children:[i.jsx("h2",{className:"text-lg font-bold mb-4 bg-clip-text text-transparent bg-gradient-to-r from-indigo-400 via-purple-400 to-pink-500",children:"ðŸ›’ Top 5 Most Frequently Bought Products"}),i.jsx(ou,{data:r,options:n})]})},kj=({custId:e})=>i.jsxs("div",{className:"p-6",children:[i.jsx("h1",{className:"text-2xl font-bold mb-4",children:"ðŸ‘¥ Customer Analysis"}),i.jsx(vj,{custId:e}),i.jsx(bj,{custId:e}),i.jsx(yj,{custId:e}),i.jsx(wj,{custId:e}),i.jsx(Sj,{custId:e}),i.jsx(jj,{custId:e}),i.jsx(Nj,{custId:e})]}),Pj=(e,t=800)=>{const[r,n]=x.useState(0),a=x.useRef();return x.useEffect(()=>{const s=performance.now(),o=0,l=Number(e||0),c=d=>{const u=Math.min(1,(d-s)/t),f=1-Math.pow(1-u,3);n(o+(l-o)*f),u<1&&(a.current=requestAnimationFrame(c))};return cancelAnimationFrame(a.current),a.current=requestAnimationFrame(c),()=>cancelAnimationFrame(a.current)},[e,t]),r},Oj=(e=.15)=>{const t=x.useRef(null),[r,n]=x.useState(!1);return x.useEffect(()=>{if(r)return;const a=t.current;if(!a)return;const s=new IntersectionObserver(([o])=>{o.isIntersecting&&(n(!0),s.disconnect())},{threshold:e});return s.observe(a),()=>s.disconnect()},[r,e]),[t,r]},Cj=()=>i.jsx("style",{children:`
    @keyframes slideUpFade { 
      from { opacity:0; transform: translateY(10px) scale(.98); filter: blur(2px); } 
      to   { opacity:1; transform: translateY(0) scale(1);   filter: blur(0); } 
    }
    @keyframes floaty { 0%{ transform: translateY(0)} 50%{ transform: translateY(-2px)} 100%{ transform: translateY(0)} }
    .animate-in-up { animation: slideUpFade .6s cubic-bezier(.22,.61,.36,1) both; }
    .pre-animate { opacity:0; transform: translateY(10px) scale(.98); filter: blur(2px); }
    @media (prefers-reduced-motion: reduce) {
      .animate-in-up { animation: none !important; }
      .pre-animate { opacity:1 !important; transform:none !important; filter:none !important; }
    }

    /* Polished KPI card */
    .kpi-card{
      position:relative;
      border-radius:14px;
      background: rgba(255,255,255,.06);
      border:1px solid rgba(255,255,255,.12);
      backdrop-filter: blur(10px);
      box-shadow: 0 8px 40px rgba(0,0,0,.35);
      transition: transform .18s ease, box-shadow .18s ease, border-color .18s ease, background .18s ease;
      will-change: transform;
      overflow:hidden;
      text-align:left;
      align-items:flex-start;
      justify-content:space-between;
    }
    .kpi-card::before{
      content:"";
      position:absolute; inset:0;
      border-radius: inherit;
      padding:1px; /* gradient border thickness */
      background: linear-gradient(135deg, rgba(59,245,152,.35), rgba(0,204,255,.25));
      -webkit-mask:
        linear-gradient(#000 0 0) content-box, 
        linear-gradient(#000 0 0);
      -webkit-mask-composite: xor;
              mask-composite: exclude;
      opacity:.0;
      transition:opacity .2s ease;
      pointer-events:none;
    }
    .kpi-card:hover{
      transform: translateY(-2px);
      box-shadow: 0 0 20px rgba(0,255,255,.25), 0 8px 40px rgba(0,0,0,.35);
      background: rgba(255,255,255,.10);
      border-color: rgba(255,255,255,.18);
    }
    .kpi-card:hover::before{ opacity:1; }

    .kpi-icon{
      width:40px; height:40px; border-radius:12px;
      display:grid; place-items:center;
      font-size:22px;
      background:
        radial-gradient(120% 120% at 0% 0%, rgba(29,185,84,.22), transparent 70%),
        radial-gradient(120% 120% at 100% 0%, rgba(0,255,255,.22), transparent 70%);
      box-shadow: inset 0 0 0 1px rgba(255,255,255,.15);
      animation: floaty 3s ease-in-out infinite;
    }

    .kpi-menu{ position:absolute; top:10px; right:10px; }
    .kpi-dotbtn{
      padding:2px 6px; border-radius:8px;
      color: rgba(255,255,255,.7);
      transition: background .15s ease, color .15s ease;
    }
    .kpi-dotbtn:hover{ background: rgba(255,255,255,.12); color: #fff; }
    .kpi-pop{
      position:absolute; top:36px; right:10px; z-index:10;
      width:180px; padding:6px;
      border-radius:12px;
      background: rgba(10,12,14,.9);
      border:1px solid rgba(255,255,255,.1);
      box-shadow: 0 12px 36px rgba(0,0,0,.45);
      backdrop-filter: blur(8px);
    }
    .kpi-pop button{
      width:100%; text-align:left;
      padding:8px 10px; border-radius:8px;
      color:#fff; font-size:13px;
    }
    .kpi-pop button:hover{ background: rgba(255,255,255,.08); }
  `}),Aj=({data:e=[]})=>{if(!e||e.length<2)return null;const t=140,r=40,n=3,a=Math.min(...e),o=Math.max(...e)-a||1,l=e.map((c,d)=>{const u=n+d*(t-n*2)/(e.length-1),f=r-n-(c-a)*(r-n*2)/o;return`${u},${f}`}).join(" ");return i.jsxs("svg",{viewBox:`0 0 ${t} ${r}`,preserveAspectRatio:"none",className:"block w-[140px] h-10",children:[i.jsxs("defs",{children:[i.jsxs("linearGradient",{id:"kpi-stroke",x1:"0",y1:"0",x2:"1",y2:"0",children:[i.jsx("stop",{offset:"0%",stopColor:"rgba(59,245,152,1)"}),i.jsx("stop",{offset:"100%",stopColor:"rgba(0,204,255,1)"})]}),i.jsxs("linearGradient",{id:"kpi-fill",x1:"0",y1:"0",x2:"0",y2:"1",children:[i.jsx("stop",{offset:"0%",stopColor:"rgba(59,245,152,0.24)"}),i.jsx("stop",{offset:"100%",stopColor:"rgba(0,204,255,0)"})]})]}),i.jsx("polyline",{points:l,fill:"none",stroke:"url(#kpi-stroke)",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),i.jsx("polygon",{points:`${l} ${t-n},${r-n} ${n},${r-n}`,fill:"url(#kpi-fill)",opacity:"0.6"}),i.jsxs("circle",{r:"2.2",fill:"#fff",children:[i.jsx("animate",{attributeName:"cx",dur:"0.0s",to:l.split(" ").slice(-1)[0].split(",")[0],fill:"freeze"}),i.jsx("animate",{attributeName:"cy",dur:"0.0s",to:l.split(" ").slice(-1)[0].split(",")[1],fill:"freeze"})]})]})},Dj=(e,t=14)=>{const r=new Date;r.setHours(0,0,0,0);const n=Array.from({length:t},(s,o)=>{const l=new Date(r);return l.setDate(l.getDate()-(t-1-o)),{key:l.toISOString().slice(0,10),total:0,count:0,byMode:{cash:0,card:0,upi:0,unknown:0}}}),a=s=>{const o=s instanceof Date?s:new Date(s?.seconds?s.seconds*1e3:s);return isNaN(o)?null:(o.setHours(0,0,0,0),o.toISOString().slice(0,10))};return e.forEach(s=>{const o=a(s?.issueDate||s?.createdAt||s?.timestamp);if(!o)return;const l=n.find(u=>u.key===o);if(!l)return;const c=(s?.paymentMode||"").toLowerCase(),d=Number(s?.totalAmount??s?.total??0);if(l.count+=1,!(c==="credit"&&s?.isPaid!==!0))if(c==="split"){const u=s?.splitPayment||{};l.byMode.cash+=parseFloat(u.cash||0),l.byMode.card+=parseFloat(u.card||0),l.byMode.upi+=parseFloat(u.upi||0),l.total+=parseFloat(u.cash||0)+parseFloat(u.card||0)+parseFloat(u.upi||0)}else if(c==="cash"||c==="card"||c==="upi")l.byMode[c]+=d,l.total+=d;else if(c==="credit"&&s?.isPaid===!0){const u=(s?.paidVia||"").toLowerCase();u==="cash"||u==="card"||u==="upi"?l.byMode[u]+=d:l.byMode.unknown+=d,l.total+=d}else l.byMode.unknown+=0}),n},Tj=({kpi:e,index:t})=>{const r=Pj(e.value),n=e.key==="aov"||e.key==="rev"||(e.key||"").startsWith("pay-"),a=typeof e.value=="number"?n?`â‚¹${Math.round(r).toLocaleString("en-IN")}`:Math.round(r).toLocaleString("en-IN"):e.formatted||String(e.value),[s,o]=Oj(.12);return i.jsxs("div",{ref:s,className:`kpi-card ${o?"animate-in-up":"pre-animate"} p-3 sm:p-4 flex items-center justify-between gap-3 sm:gap-4 group`,style:{animationDelay:o?`${t*90}ms`:void 0},title:e.formatted||e.label,role:"figure","aria-label":`${e.label}: ${e.formatted||e.value}`,children:[i.jsxs("div",{className:"flex items-center gap-4 min-w-0",children:[i.jsx("div",{className:"kpi-icon","aria-hidden":!0,children:e.icon}),i.jsx("div",{className:"min-w-0",children:i.jsxs("div",{className:"flex flex-col justify-between h-full",children:[i.jsx("div",{className:"text-xs text-white/70 whitespace-pre-line leading-snug",children:e.label}),i.jsx("div",{className:"text-2xl font-extrabold text-white leading-tight",children:a}),i.jsxs("div",{className:"text-[10px] text-white/50 mt-1 italic tracking-wide",children:[e.key==="rev"&&"ðŸ’¹ Strong month-on-month growth",e.key==="cnt"&&"ðŸ§¾ Steady billing frequency",e.key==="aov"&&"ðŸ“ˆ Average order size stable",e.key==="cust"&&"ðŸ‘¥ Loyal customer base",e.key?.startsWith("pay-")&&"ðŸ’° Payment trend healthy"]})]})})]}),Array.isArray(e.trend)&&e.trend.length>1&&i.jsxs("div",{className:"hidden md:block ml-auto relative",children:[i.jsx(Aj,{data:e.trend}),i.jsx("div",{className:"absolute bottom-0 left-0 w-full h-[2px] bg-gradient-to-r from-teal-400/50 via-cyan-400/30 to-transparent animate-pulse"})]}),!Array.isArray(e.trend)||e.trend.length<=1?i.jsx("div",{className:"absolute bottom-0 left-0 w-full h-[2px] bg-gradient-to-r from-teal-400/50 via-cyan-400/30 to-transparent animate-pulse"}):null]})},Ij=({invoiceData:e=[]})=>{const{isNativeApp:t}=zn(),r=e.filter(g=>g?.paymentMode?.toLowerCase?.()==="credit"?g?.isPaid===!0:!0),n=r.reduce((g,p)=>g+Number(p?.totalAmount??p?.total??0),0),a=r.length,s=a>0?n/a:0,o=e.reduce((g,p)=>{const v=(p?.paymentMode||"").toLowerCase(),w=Number(p?.totalAmount??p?.total??0);if(v==="credit"&&p?.isPaid!==!0)return g;if(v==="split"){const y=p?.splitPayment||{};g.cash=(g.cash||0)+(parseFloat(y.cash)||0),g.card=(g.card||0)+(parseFloat(y.card)||0),g.upi=(g.upi||0)+(parseFloat(y.upi)||0)}else if(v==="credit"){const y=(p?.paidVia||"").toLowerCase();g[y]=(g[y]||0)+w}else["cash","card","upi"].includes(v)?g[v]=(g[v]||0)+w:g.unknown=(g.unknown||0)+w;return g},{}),l=new Set(r.map(g=>g?.customer?.email||g?.customer?.name||"")).size,c=[{key:"rev",label:"Total Revenue",value:n,formatted:`â‚¹${Math.round(n).toLocaleString("en-IN")}`,icon:"ðŸ’°"},{key:"cnt",label:"Total Invoices",value:a,formatted:a.toLocaleString("en-IN"),icon:"ðŸ§¾"},{key:"aov",label:"Avg Order Value",value:s,formatted:`â‚¹${Math.round(s).toLocaleString("en-IN")}`,icon:"ðŸ“Š"},{key:"cust",label:"Total Customers",value:l,formatted:l.toLocaleString("en-IN"),icon:"ðŸ‘¥"}];if(o&&Object.keys(o).length){const g={cash:"ðŸ’µ",upi:"ðŸ“±",card:"ðŸ’³",unknown:"â“"},p={cash:"Cash",upi:"UPI",card:"Card",unknown:"Unknown"};Object.entries(o).forEach(([v,w])=>{const y=Number(w||0);c.push({key:`pay-${v}`,label:`Revenue via ${p[v]||v}`,value:y,formatted:`â‚¹${Math.round(y).toLocaleString("en-IN")}`,icon:g[v]||"ðŸ’³"})})}const d=Dj(r,14),u=d.map(g=>g.total),f=d.map(g=>g.count),h=d.map(g=>g.count?g.total/g.count:0),m={cash:d.map(g=>g.byMode.cash),card:d.map(g=>g.byMode.card),upi:d.map(g=>g.byMode.upi),unknown:d.map(g=>g.byMode.unknown)};c.forEach(g=>{if(g.key==="rev")g.trend=u;else if(g.key==="cnt")g.trend=f;else if(g.key==="aov")g.trend=h;else if(g.key?.startsWith("pay-")){const p=g.key.split("pay-")[1];m[p]&&(g.trend=m[p])}});const b=t?"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-3 sm:gap-4 mb-4":"grid grid-cols-1 md:grid-cols-4 gap-4";return i.jsxs("div",{className:b,children:[i.jsx(Cj,{}),c.map((g,p)=>i.jsx(Tj,{kpi:g,index:p},g.key||p))]})},Si=e=>`â‚¹${Number(e??0).toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})}`,Mj=({mode:e,isPaid:t,split:r,paidVia:n,dueDate:a})=>{const s="inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full text-[11px] border",o=d=>i.jsx("span",{className:"opacity-90",children:d}),l=d=>i.jsxs("span",{className:"whitespace-nowrap",children:[o("âœ…")," Paid via ",d]});if(e==="credit"){if(t){const u=(n||"").toLowerCase();return u==="cash"?i.jsx("span",{className:`${s} border-emerald-400/25 bg-emerald-500/15 text-emerald-200`,children:l("Cash")}):u==="upi"?i.jsx("span",{className:`${s} border-emerald-400/25 bg-emerald-500/15 text-emerald-200`,children:l("UPI")}):u==="card"?i.jsx("span",{className:`${s} border-emerald-400/25 bg-emerald-500/15 text-emerald-200`,children:l("Card")}):i.jsx("span",{className:`${s} border-emerald-400/25 bg-emerald-500/15 text-emerald-200`,children:l("")})}const d=a?tg(a.toDate?.()||a).local().format("DD MMM, YYYY"):"N/A";return i.jsxs("span",{className:`${s} border-amber-400/25 bg-amber-500/15 text-amber-200`,children:[i.jsx("span",{className:"opacity-90",children:"ðŸ•’"}),i.jsxs("span",{className:"whitespace-nowrap",children:["Credit â€¢ Due on ",d]})]})}const c=(e||"").toLowerCase();if(c==="cash")return i.jsxs("span",{className:`${s} border-white/15 bg-white/10 text-white/90`,children:[o("ðŸ’µ")," Cash"]});if(c==="card")return i.jsxs("span",{className:`${s} border-white/15 bg-white/10 text-white/90`,children:[o("ðŸ’³")," Card"]});if(c==="upi")return i.jsxs("span",{className:`${s} border-white/15 bg-white/10 text-white/90`,children:[o("ðŸ“²")," UPI"]});if(c==="split"){const d=r?.cash||0,u=r?.upi||0,f=r?.card||0;return i.jsxs("span",{className:`${s} border-white/15 bg-white/10 text-white/90`,children:[o("ðŸ”€")," Split (",Si(d)," / ",Si(u)," / ",Si(f),")"]})}return i.jsxs("span",{className:`${s} border-white/15 bg-white/10 text-white/80`,children:[o("â”")," Unknown"]})},Ej=({invoiceData:e})=>{const{isNativeApp:t,isMobileViewport:r}=zn(),n=[...e].sort((a,s)=>(s.createdAt?.toDate?.()||new Date(s.createdAt))-(a.createdAt?.toDate?.()||new Date(a.createdAt))).slice(0,5);return i.jsxs("div",{className:"relative rounded-2xl text-white w-full",children:[i.jsx("div",{className:"absolute inset-0 rounded-2xl bg-gradient-to-br from-sky-400/7 via-fuchsia-400/6 to-emerald-400/7 pointer-events-none"}),i.jsxs("div",{className:`relative ${t?"p-4 sm:p-5":"p-5"} rounded-[16px] bg-white/5 backdrop-blur-xl border border-white/10 ring-1 ring-white/5 shadow-[0_12px_40px_rgba(2,6,23,0.45)]`,children:[i.jsxs("div",{className:"flex items-center justify-between mb-3 sm:mb-3",children:[i.jsxs("div",{className:"flex items-center gap-2.5",children:[i.jsx("span",{className:"inline-flex h-6 w-6 items-center justify-center rounded-md bg-white/10 border border-white/10 ring-1 ring-white/10 shadow-[0_2px_8px_rgba(0,0,0,0.25)]",children:i.jsx("svg",{viewBox:"0 0 24 24",className:"h-3.5 w-3.5 text-emerald-200","aria-hidden":"true",children:i.jsx("path",{fill:"currentColor",d:"M6 2a1 1 0 00-1 1v18l2-1 2 1 2-1 2 1 2-1 2 1V3a1 1 0 00-1-1H6zm3 5h6a1 1 0 110 2H9a1 1 0 110-2zm0 4h6a1 1 0 110 2H9a1 1 0 110-2z"})})}),i.jsx("h3",{className:"text-[18px] md:text-[19px] font-semibold tracking-tight bg-clip-text text-transparent bg-gradient-to-r from-white via-white to-emerald-200",children:"Recent Invoices"})]}),i.jsxs("span",{className:"hidden sm:inline-flex items-center gap-2 rounded-full border border-white/10 bg-white/5 px-3 py-1 text-[13px] leading-none backdrop-blur",children:["Last ",n.length," records"]})]}),i.jsx("div",{className:`overflow-y-auto pr-1 ${t?"max-h-[350px]":"max-h-[300px]"}`,children:i.jsx("ul",{className:"space-y-2",children:n.map((a,s)=>{const o=a.createdAt?.toDate?.()||new Date(a.createdAt),l=a.paymentMode?.toLowerCase?.(),c=a.settings?.creditDueDate||a.creditDueDate||null,d=a.totalAmount??a.total??0;return i.jsx("li",{className:"rounded-xl border border-white/10 bg-white/5 hover:bg-white/8 transition-all p-3",children:i.jsxs("div",{className:"flex items-center justify-between gap-3",children:[i.jsxs("div",{className:"min-w-0",children:[i.jsx("div",{className:"flex items-center gap-2",children:i.jsx("span",{className:"text-sm font-semibold bg-clip-text text-transparent bg-gradient-to-r from-emerald-200 to-sky-300 truncate",children:a.customer?.name||"Unknown Customer"})}),i.jsxs("div",{className:"text-[11px] text-white/70 mt-0.5 truncate",children:["#",a.invoiceId||a.id||"â€”"," â€¢ ",tg(o).local().format("DD MMM, hh:mm A")]})]}),i.jsxs("div",{className:"flex items-center gap-3 shrink-0",children:[i.jsx(Mj,{mode:l,isPaid:a.isPaid,split:a.splitPayment,paidVia:a.paidVia,dueDate:c}),i.jsx("div",{className:"text-[15px] font-bold text-white tabular-nums",children:Si(d)})]})]})},s)})})})]})]})},Pf=5,_j=({userId:e})=>{const{isNativeApp:t,isMobileViewport:r}=zn(),[n,a]=x.useState([]),[s,o]=x.useState(!1);x.useEffect(()=>{(async()=>{try{if(!e)return;o(!0);const u=ue(J,"businesses",e,"products"),f=await ye(u),h=[];f.forEach(m=>{const b=m.data()||{},g=Number(b.quantity??0);g<=Pf&&h.push({...b,id:m.id,quantity:g})}),h.sort((m,b)=>m.quantity-b.quantity||String(m.productName||"").localeCompare(String(b.productName||""))),a(h)}catch(u){console.error("Error fetching low stock items:",u)}finally{o(!1)}})()},[e]);const l=x.useMemo(()=>{const d=n.filter(h=>h.quantity<=1).length,u=n.filter(h=>h.quantity>1&&h.quantity<=3).length,f=n.filter(h=>h.quantity>3&&h.quantity<=Pf).length;return{critical:d,warning:u,low:f,total:n.length}},[n]),c=({qty:d})=>{const u=d<=1?"bg-rose-500/15 text-rose-200 border-rose-400/25":d<=3?"bg-amber-500/15 text-amber-200 border-amber-400/25":"bg-sky-500/15 text-sky-200 border-sky-400/25";return i.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-[11px] border ${u}`,children:[i.jsx("span",{className:"opacity-80",children:"Qty"}),i.jsx("strong",{className:"tabular-nums",children:d})]})};return i.jsxs("div",{className:"relative rounded-2xl text-white w-full",children:[i.jsx("div",{className:"absolute inset-0 rounded-2xl bg-gradient-to-br from-fuchsia-400/6 via-sky-400/6 to-emerald-400/6 pointer-events-none"}),i.jsxs("div",{className:`relative ${t?"p-4 sm:p-5":"p-5"} rounded-[16px] bg-white/5 backdrop-blur-xl border border-white/10 ring-1 ring-white/5 shadow-[0_12px_40px_rgba(2,6,23,0.45)]`,children:[i.jsxs("div",{className:"flex items-center justify-between mb-3 sm:mb-3",children:[i.jsxs("div",{className:"flex items-center gap-2.5",children:[i.jsx("span",{className:"inline-flex h-6 w-6 items-center justify-center rounded-md bg-white/10 border border-white/10 ring-1 ring-white/10 shadow-[0_2px_8px_rgba(0,0,0,0.25)]",children:i.jsx("svg",{viewBox:"0 0 24 24",className:"h-3.5 w-3.5 text-amber-200","aria-hidden":"true",children:i.jsx("path",{fill:"currentColor",d:"M1 21h22L12 2 1 21zm12-3h-2v2h2v-2zm0-6h-2v5h2v-5z"})})}),i.jsx("h3",{className:"text-[18px] md:text-[19px] font-semibold tracking-tight bg-clip-text text-transparent bg-gradient-to-r from-white via-white to-emerald-200",children:"Low Stock Alerts"})]}),i.jsxs("span",{className:"hidden sm:inline-flex items-center gap-2 rounded-full border border-white/10 bg-white/5 px-3 py-1 text-[13px] leading-none backdrop-blur",children:[i.jsx("span",{className:"text-rose-200",children:l.critical})," critical â€¢ ",i.jsx("span",{className:"text-amber-200",children:l.warning})," warn â€¢ ",i.jsx("span",{className:"text-sky-200",children:l.low})," low"]})]}),s?i.jsx("div",{className:"text-sm text-white/70",children:"Loadingâ€¦"}):n.length===0?i.jsxs("div",{className:"flex items-center gap-2 text-sm text-white/70",children:[i.jsx("svg",{viewBox:"0 0 24 24",className:"h-4 w-4 opacity-70","aria-hidden":"true",children:i.jsx("path",{fill:"currentColor",d:"M12 22C6.48 22 2 17.52 2 12S6.48 2 12 2s10 4.48 10 10-4.48 10-10 10zm-1-6h2v2h-2v-2zm0-10h2v8h-2V6z"})}),"All items are sufficiently stocked."]}):i.jsx("div",{className:`overflow-y-auto pr-1 ${t?"max-h-[350px]":"max-h-[300px]"}`,children:i.jsx("ul",{className:"space-y-2 text-sm",children:n.map(d=>i.jsx("li",{className:"group rounded-xl border border-white/10 bg-white/5 hover:bg-white/8 transition-all p-3",children:i.jsxs("div",{className:"flex items-center justify-between gap-3",children:[i.jsxs("div",{className:"min-w-0",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"text-sm font-semibold bg-clip-text text-transparent bg-gradient-to-r from-emerald-200 to-sky-300 truncate",children:d.productName||"Unnamed Product"}),d.SKU&&i.jsxs("span",{className:"text-[11px] text-white/60",children:["â€¢ ",d.SKU]})]}),d.brand&&i.jsx("div",{className:"text-[11px] text-white/60 mt-0.5 truncate",children:d.brand})]}),i.jsx("div",{className:"shrink-0 flex items-center gap-2",children:i.jsx(c,{qty:d.quantity})})]})},d.id))})})]})]})},Of=e=>{if(!e)return null;const t=String(e).trim();if(t instanceof Date&&!isNaN(t))return t;if(typeof e=="object"&&e?.seconds){const o=new Date(e.seconds*1e3);return isNaN(o)?null:o}const r=t.includes("/")?"/":t.includes("-")?"-":"",n=r?t.split(r).map(o=>o.trim()):[],a=(o,l,c)=>{const d=new Date(Number(o),Number(l)-1,Number(c));return isNaN(d)?null:d};if(n.length===3){let[o,l,c]=n;if(c.length===4){let d=Number(o),u=Number(l),f=Number(c);if(u>=1&&u<=12&&d>=1&&d<=31){const h=a(f,u,d);if(h)return h}if(d=Number(l),u=Number(o),f=Number(c),u>=1&&u<=12&&d>=1&&d<=31){const h=a(f,u,d);if(h)return h}}else if(o.length===4){const d=Number(o),u=Number(l),f=Number(c),h=a(d,u,f);if(h)return h}}if(!r&&/^\d{8}$/.test(t)){let o=Number(t.slice(0,2)),l=Number(t.slice(2,4)),c=Number(t.slice(4));if(l>=1&&l<=12&&o>=1&&o<=31){const d=a(c,l,o);if(d)return d}if(l=Number(t.slice(0,2)),o=Number(t.slice(2,4)),c=Number(t.slice(4)),l>=1&&l<=12&&o>=1&&o<=31){const d=a(c,l,o);if(d)return d}}const s=new Date(t);return isNaN(s)?null:s},Pr=e=>`â‚¹${Number(e||0).toFixed(2)}`,Cf=e=>parseFloat(e?.splitPayment?.totalAmount||e?.totalAmount||e?.settings?.totalAmount||0)||0,Rj=({creditInvoices:e=[],dueToday:t=[],dueTomorrow:r=[],totalDue:n=0,businessName:a="Your Business",businessAddress:s="",layout:o="horizontal",onOpenInvoice:l})=>{const{isNativeApp:c,isMobileViewport:d}=zn(),[u,f]=x.useState("lanes"),[h,m]=x.useState(""),[b,g]=x.useState(!1),[p,v]=x.useState("dueAsc"),[w,y]=x.useState(!0),[S,j]=x.useState(""),k=x.useRef(null),[N,P]=x.useState(!1);x.useEffect(()=>{N&&k.current&&k.current.focus({preventScroll:!0})},[N,h]);const D=x.useMemo(()=>{const T=new Date;return T.setHours(0,0,0,0),T},[]),C=x.useMemo(()=>(e||[]).filter(T=>!T.isPaid).map(T=>{const _=T.creditDueDate||T.settings?.creditDueDate,Y=Of(_),ee=Cf(T);let W="Upcoming";if(Y){const H=Math.floor((Y-D)/864e5);H<0?W="Overdue":H===0?W="Due Today":H===1?W="Due Tomorrow":W="Upcoming"}else W="Invalid";return{raw:T,id:T.invoiceId||T.id||"N/A",name:T.customer?.name||T.name||"Customer",phone:T.customer?.phone||"",amount:ee,due:Y,status:W}}).filter(T=>h?T.name?.toLowerCase().includes(h.toLowerCase())||String(T.id).toLowerCase().includes(h.toLowerCase()):!0).filter(T=>S!==""?T.amount>=parseFloat(S||0):!0).filter(T=>b?T.status==="Overdue":!0),[e,h,b,D,S]),O=x.useMemo(()=>{const T=[...C];return p==="dueAsc"&&T.sort((_,Y)=>(_.due?.getTime?.()||0)-(Y.due?.getTime?.()||0)),p==="dueDesc"&&T.sort((_,Y)=>(Y.due?.getTime?.()||0)-(_.due?.getTime?.()||0)),p==="amountDesc"&&T.sort((_,Y)=>Y.amount-_.amount),p==="amountAsc"&&T.sort((_,Y)=>_.amount-Y.amount),T},[C,p]),A=x.useMemo(()=>{const T={Overdue:[],"Due Today":[],"Due Tomorrow":[],Upcoming:[]};return O.forEach(_=>{T[_.status]&&T[_.status].push(_)}),T},[O]),B=x.useMemo(()=>{const T=_=>_.reduce((Y,ee)=>Y+ee.amount,0);return{all:T(O),overdue:T(A.Overdue),today:T(A["Due Today"]),tomorrow:T(A["Due Tomorrow"]),upcoming:T(A.Upcoming)}},[O,A]),M=O.length>0,F=T=>{const _=T.raw||T,Y=_.customer?.phone?.replace("+91","").trim();if(!Y)return alert("Phone number missing");const ee=Of(_.creditDueDate||_.settings?.creditDueDate||""),W=ee?ee.toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"}):"N/A",H=Cf(_).toFixed(2),le=_.customer?.name||_.name||"Customer",$=_.invoiceId||_.id||"N/A",L=_.createdAt?.toDate?.()||new Date(_.createdAt),G=L?L.toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric"}):"N/A",R=_.items?.map(re=>`â€¢ ${re.productName||re.name} (${re.quantity||1} x â‚¹${re.price||0})`).join(`
`)||"No items listed.",E=`Hello *${le}*, ðŸ‘‹

This is a kind reminder regarding your purchase from *${a}*.

ðŸ§¾ *Invoice ID:* ${$}
ðŸ“… *Date of Purchase:* ${G}
ðŸ›ï¸ *Items Purchased:*
${R}

ðŸ’° *Total Due:* â‚¹${H}
ðŸ“† *Due Date:* ${W}

ðŸ’³ *How to Pay:*
- Visit our store & pay by Cash or Card
- UPI: upi_id@bank

Thank you for shopping with us!
We appreciate your timely payment. ðŸ™

â€“ ${a}
${s?s+`
`:""}_Powered by FLYP_`,te=`https://wa.me/91${Y}?text=${encodeURIComponent(E)}`;window.open(te,"_blank")},V=()=>{O.forEach(T=>F(T.raw))},q=({status:T})=>{const _={Overdue:"bg-rose-500/20 text-rose-200 border-rose-400/30","Due Today":"bg-emerald-500/20 text-emerald-200 border-emerald-400/30","Due Tomorrow":"bg-amber-500/20 text-amber-200 border-amber-400/30",Upcoming:"bg-sky-500/20 text-sky-200 border-sky-400/30"};return i.jsx("span",{className:`text-[11px] px-2 py-0.5 rounded-full border ${_[T]||"bg-white/10 text-white/70 border-white/20"}`,children:T})},K=()=>i.jsxs("div",{className:"flex flex-col gap-3 mb-3",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[i.jsxs("div",{className:"flex items-center gap-2.5",children:[i.jsx("span",{className:"relative inline-flex h-6 w-6 items-center justify-center rounded-md bg-white/10 border border-white/10 ring-1 ring-white/10 shadow-[0_2px_8px_rgba(0,0,0,0.25)]",children:i.jsx("svg",{"aria-hidden":"true",viewBox:"0 0 24 24",className:"h-3.5 w-3.5 text-emerald-200",children:i.jsx("path",{fill:"currentColor",d:"M19 4h-1V3a1 1 0 10-2 0v1H8V3a1 1 0 10-2 0v1H5a3 3 0 00-3 3v10a3 3 0 003 3h14a3 3 0 003-3V7a3 3 0 00-3-3zm1 13a1 1 0 01-1 1H5a1 1 0 01-1-1V10h16v7zm0-9H4V7a1 1 0 011-1h1v1a1 1 0 102 0V6h8v1a1 1 0 102 0V6h1a1 1 0 011 1v1z"})})}),i.jsx("h3",{className:"text-[18px] md:text-[19px] font-semibold tracking-tight bg-clip-text text-transparent bg-gradient-to-r from-white via-white to-emerald-200",children:"Credit Dues"})]}),i.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[i.jsxs("span",{className:"inline-flex items-center gap-2 rounded-full border border-white/10 bg-white/5 px-3 py-1 text-[13px] leading-none backdrop-blur",children:[i.jsx("span",{className:"text-white/70",children:"Total Due Pending"}),i.jsx("span",{className:"font-semibold text-white",children:Pr(B.all)}),i.jsxs("span",{className:"text-white/70",children:["/",O.length," invoice(s)"]})]}),M&&i.jsx("button",{onClick:V,className:"inline-flex items-center gap-2 px-3 py-2.5 sm:py-2 rounded-lg text-sm font-medium text-white/90 bg-white/5 border border-white/10 hover:bg-white/10 active:bg-white/15 min-h-[44px] touch-target",children:"âœ‰ï¸ Send All Reminders"})]})]}),i.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[i.jsx("input",{ref:k,onFocus:()=>P(!0),onBlur:()=>P(!1),value:h,onChange:T=>m(T.target.value),placeholder:"Search customer or invoice ID...",className:"w-full sm:w-64 rounded-lg bg-white/5 border border-white/10 px-3 py-3 sm:py-2.5 text-base sm:text-sm outline-none focus:border-emerald-300/30 placeholder:text-white/50 min-h-[48px] sm:min-h-0"}),i.jsx("input",{value:S,onChange:T=>j(T.target.value.replace(/[^0-9.]/g,"")),placeholder:"Min â‚¹",className:"w-28 rounded-lg bg-white/5 border border-white/10 px-3 py-3 sm:py-2.5 text-base sm:text-sm outline-none focus:border-emerald-300/30 placeholder:text-white/50 min-h-[48px] sm:min-h-0"}),i.jsxs("label",{className:"inline-flex items-center gap-2 text-sm text-white/80 bg-white/5 border border-white/10 px-3 py-2 rounded-lg",children:[i.jsx("input",{type:"checkbox",checked:b,onChange:T=>g(T.target.checked)}),"Only Overdue"]}),i.jsxs("label",{className:"inline-flex items-center gap-2 text-sm text-white/80 bg-white/5 border border-white/10 px-3 py-2 rounded-lg",children:[i.jsx("input",{type:"checkbox",checked:w,onChange:T=>y(T.target.checked)}),"Hide Empty Lanes"]}),i.jsxs("select",{value:p,onChange:T=>v(T.target.value),className:"rounded-lg bg-white/5 border border-white/10 px-3 py-3 sm:py-2.5 text-base sm:text-sm outline-none focus:border-emerald-300/30 min-h-[48px] sm:min-h-0",children:[i.jsx("option",{value:"dueAsc",children:"Sort: Due â†‘"}),i.jsx("option",{value:"dueDesc",children:"Sort: Due â†“"}),i.jsx("option",{value:"amountDesc",children:"Sort: Amount â†“"}),i.jsx("option",{value:"amountAsc",children:"Sort: Amount â†‘"})]}),i.jsxs("div",{className:"ml-auto flex gap-2",children:[i.jsxs("div",{className:"flex gap-1 bg-white/5 border border-white/10 rounded-lg p-1",children:[i.jsx("button",{onClick:()=>f("lanes"),className:`px-3.5 py-2 sm:py-1.5 text-sm rounded min-h-[44px] sm:min-h-0 touch-target ${u==="lanes"?"bg-white/10":""}`,children:"Lanes"}),i.jsx("button",{onClick:()=>f("table"),className:`px-3.5 py-2 sm:py-1.5 text-sm rounded min-h-[44px] sm:min-h-0 touch-target ${u==="table"?"bg-white/10":""}`,children:"Table"})]}),i.jsx("button",{onClick:()=>{const _=[["Customer","Invoice","Due Date","Status","Amount"]].concat(O.map(H=>[H.name,H.id,H.due?H.due.toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric"}):"Invalid Date",H.status,H.amount])).map(H=>H.map(le=>`"${String(le).replace(/"/g,'""')}"`).join(",")).join(`
`),Y=new Blob([_],{type:"text/csv;charset=utf-8;"}),ee=URL.createObjectURL(Y),W=document.createElement("a");W.href=ee,W.download="credit-dues.csv",W.click(),URL.revokeObjectURL(ee)},className:"px-3 py-2.5 sm:py-2 rounded-lg text-sm font-medium text-white bg-white/10 border border-white/10 hover:bg-white/15 active:bg-white/20 min-h-[44px] sm:min-h-0 touch-target",children:"Export CSV"})]})]}),i.jsxs("div",{className:"flex flex-wrap gap-2 text-xs",children:[i.jsxs("span",{className:"inline-flex items-center gap-2 rounded-full border border-rose-400/25 bg-rose-500/15 px-2.5 py-1 shadow-[0_0_0_1px_rgba(255,255,255,0.06)_inset]",children:[i.jsx("span",{children:"Overdue"}),i.jsx("span",{className:"font-semibold",children:Pr(B.overdue)}),i.jsxs("span",{className:"opacity-70",children:["/",A.Overdue.length]})]}),i.jsxs("span",{className:"inline-flex items-center gap-2 rounded-full border border-emerald-400/25 bg-emerald-500/15 px-2.5 py-1 shadow-[0_0_0_1px_rgba(255,255,255,0.06)_inset]",children:[i.jsx("span",{children:"Due Today"}),i.jsx("span",{className:"font-semibold",children:Pr(B.today)}),i.jsxs("span",{className:"opacity-70",children:["/",A["Due Today"].length]})]}),i.jsxs("span",{className:"inline-flex items-center gap-2 rounded-full border border-amber-400/25 bg-amber-500/15 px-2.5 py-1 shadow-[0_0_0_1px_rgba(255,255,255,0.06)_inset]",children:[i.jsx("span",{children:"Due Tomorrow"}),i.jsx("span",{className:"font-semibold",children:Pr(B.tomorrow)}),i.jsxs("span",{className:"opacity-70",children:["/",A["Due Tomorrow"].length]})]}),i.jsxs("span",{className:"inline-flex items-center gap-2 rounded-full border border-sky-400/25 bg-sky-500/15 px-2.5 py-1 shadow-[0_0_0_1px_rgba(255,255,255,0.06)_inset]",children:[i.jsx("span",{children:"Upcoming"}),i.jsx("span",{className:"font-semibold",children:Pr(B.upcoming)}),i.jsxs("span",{className:"opacity-70",children:["/",A.Upcoming.length]})]})]})]}),ne=()=>i.jsx("div",{className:"overflow-x-auto pb-2 w-full min-w-0",children:i.jsx("div",{className:"grid auto-cols-[minmax(260px,340px)] grid-flow-col gap-4 snap-x snap-mandatory min-w-full",children:[{key:"Overdue",color:"from-rose-500/15 to-rose-400/15",countColor:"text-rose-300"},{key:"Due Today",color:"from-emerald-500/15 to-teal-400/15",countColor:"text-emerald-300"},{key:"Due Tomorrow",color:"from-amber-500/15 to-yellow-400/15",countColor:"text-amber-300"},{key:"Upcoming",color:"from-sky-500/15 to-indigo-400/15",countColor:"text-sky-300"}].filter(T=>!w||A[T.key]&&A[T.key].length>0).map(T=>i.jsxs("section",{className:"snap-start rounded-xl border border-white/10 ring-1 ring-white/10 bg-white/5 backdrop-blur p-3 transition-transform hover:-translate-y-[1px]",children:[i.jsx("div",{className:"sticky top-0 z-10 -mt-px mb-2",children:i.jsxs("div",{className:"flex items-center justify-between rounded-t-xl border border-white/10 bg-white/5 px-3 py-2 shadow-[inset_0_-1px_0_rgba(255,255,255,0.05)]",children:[i.jsxs("div",{className:"relative pl-3",children:[i.jsx("span",{className:`absolute left-0 top-1/2 -translate-y-1/2 h-5 w-1 rounded-full bg-gradient-to-b ${T.color}`}),i.jsx("h4",{className:"font-semibold text-[13px] text-white/95 tracking-tight",children:T.key})]}),i.jsxs("div",{className:"text-[11px] font-medium flex items-center gap-2",children:[i.jsx("span",{className:`${T.countColor}`,children:A[T.key].length}),i.jsx("span",{className:"text-white/70",children:Pr(A[T.key].reduce((_,Y)=>_+Y.amount,0))})]})]})}),i.jsx("div",{className:`flex flex-col gap-2 overflow-y-auto pr-1 ${c?"max-h-[400px]":"max-h-80"}`,children:A[T.key].length?A[T.key].map(_=>i.jsxs("div",{className:"rounded-xl p-3 bg-white/5 backdrop-blur border border-white/10 ring-1 ring-white/5 hover:bg-white/10 transition-all hover:shadow-[0_8px_24px_rgba(0,0,0,0.25)]",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("div",{className:"text-sm font-semibold bg-clip-text text-transparent bg-gradient-to-r from-emerald-200 to-sky-300 truncate",children:_.name}),i.jsx(q,{status:_.status})]}),i.jsxs("div",{className:"flex items-center justify-between text-[11px] text-white/80 mt-0.5",children:[i.jsx("span",{children:_.id}),i.jsx("span",{children:_.due?_.due.toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric"}):"Invalid Date"})]}),i.jsx("div",{className:"text-[15px] font-bold text-white mt-1",children:Pr(_.amount)}),i.jsxs("div",{className:"mt-2 flex gap-2",children:[i.jsx("button",{onClick:()=>F(_.raw),className:"text-xs px-3 py-2 sm:px-2 sm:py-1 rounded font-medium text-slate-900 bg-gradient-to-r from-emerald-400 via-teal-300 to-cyan-400 hover:shadow-[0_6px_20px_rgba(16,185,129,0.35)] active:scale-[0.98] min-h-[40px] sm:min-h-0 touch-target",children:"Send Reminder"}),l&&i.jsx("button",{onClick:()=>l(_.raw),className:"text-xs px-3 py-2 sm:px-2 sm:py-1 rounded border border-white/15 text-white/90 hover:bg-white/10 active:bg-white/15 min-h-[40px] sm:min-h-0 touch-target",children:"Open"})]})]},_.id)):i.jsx("div",{className:"text-xs text-white/50",children:"No items"})})]},T.key))})}),Z=()=>i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full text-sm border border-white/10 bg-white/5 rounded-xl overflow-hidden",children:[i.jsx("thead",{className:"bg-white/10",children:i.jsxs("tr",{className:"text-left",children:[i.jsx("th",{className:"px-3 py-2",children:"Customer"}),i.jsx("th",{className:"px-3 py-2",children:"Invoice"}),i.jsx("th",{className:"px-3 py-2",children:"Due Date"}),i.jsx("th",{className:"px-3 py-2",children:"Status"}),i.jsx("th",{className:"px-3 py-2",children:"Amount"}),i.jsx("th",{className:"px-3 py-2",children:"Action"})]})}),i.jsx("tbody",{children:O.map(T=>i.jsxs("tr",{className:"border-t border-white/10 hover:bg-white/5",children:[i.jsx("td",{className:"px-3 py-2 text-white/90",children:i.jsx("div",{className:"text-sm font-semibold bg-clip-text text-transparent bg-gradient-to-r from-emerald-200 to-sky-300 truncate",children:T.name})}),i.jsx("td",{className:"px-3 py-2 text-white/70",children:T.id}),i.jsx("td",{className:"px-3 py-2 text-white/70",children:T.due?T.due.toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric"}):"Invalid Date"}),i.jsx("td",{className:"px-3 py-2",children:i.jsx(q,{status:T.status})}),i.jsx("td",{className:"px-3 py-2 font-semibold text-white",children:i.jsx("div",{className:"text-[15px] font-bold text-white mt-1",children:Pr(T.amount)})}),i.jsx("td",{className:"px-3 py-2",children:i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:()=>F(T.raw),className:"text-xs px-3 py-2 sm:px-2 sm:py-1 rounded font-medium text-slate-900 bg-gradient-to-r from-emerald-400 via-teal-300 to-cyan-400 hover:shadow-[0_6px_20px_rgba(16,185,129,0.35)] active:scale-[0.98] min-h-[40px] sm:min-h-0 touch-target",children:"Reminder"}),l&&i.jsx("button",{onClick:()=>l(T.raw),className:"text-xs px-3 py-2 sm:px-2 sm:py-1 rounded border border-white/15 text-white/90 hover:bg-white/10 active:bg-white/15 min-h-[40px] sm:min-h-0 touch-target",children:"Open"})]})})]},T.id))})]})});return i.jsxs("div",{className:`relative rounded-2xl text-white w-full ${c?"pb-2":""}`,children:[i.jsx("div",{className:"absolute inset-0 rounded-2xl bg-gradient-to-br from-emerald-400/7 via-fuchsia-400/6 to-sky-400/7 opacity-90 pointer-events-none"}),i.jsxs("div",{className:`relative rounded-[16px] bg-white/5 backdrop-blur-xl border border-white/10 ring-1 ring-white/5 shadow-[0_12px_40px_rgba(2,6,23,0.45)] ${c?"p-4 sm:p-5":"p-5"} min-w-0`,children:[i.jsx(K,{}),u==="lanes"?i.jsx(ne,{}):i.jsx(Z,{})]})]})},$j=({text:e="",className:t="",splitBy:r="chars",delay:n=.02,animate:a})=>{const s=r==="words"?e.split(" "):Array.from(e),o=({children:l,i:c})=>i.jsx(U.span,{className:t,style:{display:"inline-block",willChange:"transform,opacity",WebkitTextStroke:"0.4px rgba(255,255,255,0.22)",textShadow:"0 0 12px rgba(0,255,200,0.35)"},initial:a?.from??{opacity:0,y:26,rotateX:-20},animate:a?.to??{opacity:1,y:0,rotateX:0},transition:{...a?.transition??{ease:[.16,1,.3,1],duration:.55},delay:c*n},children:l});return i.jsx("span",{"aria-label":e,children:s.map((l,c)=>r!=="words"&&l===" "?i.jsx("span",{style:{display:"inline-block",width:"0.5ch"}},c):i.jsx(o,{i:c,children:r==="words"&&c<s.length-1?l+" ":l},c))})},Or=e=>`â‚¹${Math.round(Number(e||0)).toLocaleString("en-IN")}`,Lj=()=>{try{return JSON.parse(localStorage.getItem("hs_prefs")||"{}")}catch{return{}}},Fj=e=>{try{localStorage.setItem("hs_prefs",JSON.stringify(e))}catch{}},Bj={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},kn={hidden:{y:20,opacity:0},visible:{y:0,opacity:1,transition:{type:"spring",stiffness:100}}},qj=()=>i.jsx("style",{children:`
    .welcome-wrap {
      position: relative;
      border-radius: 16px;
      background: radial-gradient(120% 120% at 0% 0%, rgba(59,245,152,.10), transparent 60%),
                  radial-gradient(120% 120% at 100% 0%, rgba(0,204,255,.10), transparent 60%),
                  rgba(255,255,255,.06);
      border: 1px solid rgba(255,255,255,.14);
      backdrop-filter: blur(10px);
      overflow: hidden;
    }
    .welcome-glow {
      position:absolute; inset:auto -20% -40% -20%;
      height: 120px;
      background: radial-gradient(60% 60% at 50% 0%, rgba(0,255,200,.25), transparent 70%);
      filter: blur(20px); opacity:.5; pointer-events:none;
    }
    .ticker {
      display:flex; gap:.5rem; align-items:center; white-space:nowrap;
      overflow:hidden; mask-image: linear-gradient(90deg, transparent, #000 10%, #000 90%, transparent);
    }
    .ticker-track {
      display:flex; gap:.5rem; animation: marquee 28s linear infinite;
    }
    .ticker:hover .ticker-track { animation-play-state: paused; }
    @keyframes marquee { from { transform: translateX(0) } to { transform: translateX(-50%) } }
    .chip {
      display:inline-flex; align-items:center; gap:.35rem;
      padding: .35rem .55rem; border-radius:999px; font-size:12px;
      background: rgba(255,255,255,.08); border:1px solid rgba(255,255,255,.12);
    }
    .gear-btn {
      padding:4px 8px; border-radius:8px; background:rgba(255,255,255,.08);
      border:1px solid rgba(255,255,255,.12); color:#fff;
    }
    .btn {
      padding:.45rem .7rem; border-radius:10px; background:rgba(255,255,255,.10);
      border:1px solid rgba(255,255,255,.16); color:#fff;
    }
    @keyframes blink { 0%, 49% { opacity: 1 } 50%, 100% { opacity: 0 } }
    /* Aurora parallax behind welcome */
    .welcome-aurora{position:absolute;inset:-32px -24px 0 -24px;pointer-events:none;filter:blur(22px)}
    .welcome-aurora::after{content:"";position:absolute;inset:0;background:
      radial-gradient(32% 40% at calc(var(--mx,.45)*100%) calc(var(--my,.25)*100%),rgba(0,255,200,.18),transparent 60%),
      radial-gradient(30% 36% at calc((1 - var(--mx,.45))*100%) 0%,rgba(0,200,255,.15),transparent 65%);
      opacity:.9}
    /* Horizontal chip scroller with soft edges */
    .chip-scroller{position:relative;display:block;overflow-x:auto;white-space:nowrap;padding-bottom:2px;-ms-overflow-style:none;scrollbar-width:none;mask-image:linear-gradient(90deg,transparent,#000 6%,#000 94%,transparent)}
    .chip-scroller::-webkit-scrollbar{display:none}
    .chip-scroller .chip{margin-right:.5rem}
    /* Micro divider under section titles */
    .subtle-divider{height:1.5px;background:linear-gradient(90deg,rgba(0,255,200,.28),rgba(0,200,255,.12),transparent);filter:blur(.4px)}
  `}),Uj=({filterDates:e,filterType:t,headerRight:r})=>{const{isNativeApp:n,isMobileViewport:a}=zn(),[s,o]=x.useState([]),[l,c]=x.useState(null),[d,u]=x.useState(t||"All"),[f,h]=x.useState([]),[m,b]=x.useState({name:"",address:""}),g=x.useRef(null),p=x.useRef(null),v=T=>{const _=p.current;if(!_)return;const Y=_.getBoundingClientRect(),ee=(T.clientX-Y.left)/Y.width,W=(T.clientY-Y.top)/Y.height;_.style.setProperty("--mx",Math.max(0,Math.min(1,ee))),_.style.setProperty("--my",Math.max(0,Math.min(1,W)))},[w,y]=x.useState(()=>Lj()),S=T=>{const _={...w,[T]:!w[T]};y(_),Fj(_)};x.useEffect(()=>{const T=Ra(xe,_=>{if(_){c(_.uid),(async()=>{try{const H=ve(J,"businesses",_.uid),le=await Yt(H);if(le.exists()){const $=le.data();b({name:$.businessName||"Your Business",address:$.businessAddress||""})}}catch(H){console.error("Error fetching business info:",H)}})();const ee=ue(J,"businesses",_.uid,"finalizedInvoices"),W=ht(ee,H=>{const le=[];H.forEach($=>{le.push({...$.data(),id:$.id})}),o(le),h(j(le,t||"All",e))},H=>{console.error("Error in snapshot listener:",H)});return()=>W()}});return()=>T()},[]);const j=(T,_,Y={})=>{const ee=new Date,{start:W,end:H}=Y;return T.filter(le=>{const $=le.issuedAt?typeof le.issuedAt.toDate=="function"?le.issuedAt.toDate():new Date(le.issuedAt):null;if(!$)return!1;if(W&&H)return $>=W&&$<=H;if(_==="Today"){const L=new Date;L.setHours(0,0,0,0);const G=new Date;return G.setHours(23,59,59,999),$>=L&&$<=G}else if(_==="ThisWeek"){const L=new Date(ee),G=L.getDay(),R=G===0?6:G-1;L.setDate(L.getDate()-R),L.setHours(0,0,0,0);const E=new Date(L);return E.setDate(L.getDate()+6),E.setHours(23,59,59,999),$>=L&&$<=E}else if(_==="ThisMonth"){const L=new Date(ee.getFullYear(),ee.getMonth(),1),G=new Date(ee.getFullYear(),ee.getMonth()+1,0);return G.setHours(23,59,59,999),$>=L&&$<=G}else if(_==="ThisYear"){const L=new Date(ee.getFullYear(),0,1),G=new Date(ee.getFullYear(),11,31,23,59,59,999);return $>=L&&$<=G}return!0})};x.useEffect(()=>{h(j(s,d,e))},[d,e,s]),x.useEffect(()=>{u(t||"All")},[t]);const k=f.reduce((T,_)=>{const Y=parseFloat(_.totalAmount||_.total||0);return _.isPaid?T+Y:T},0),N=f.reduce((T,_)=>{if(!_.isPaid)return T;const Y=parseFloat(_.totalAmount||_.total||0),ee=(_.paymentMode||"").toLowerCase();if(ee==="split"){const W=_.splitPayment||{},H=parseFloat(W.cash||0),le=parseFloat(W.card||0),$=parseFloat(W.upi||0);T.Cash=(T.Cash||0)+H,T.Card=(T.Card||0)+le,T.UPI=(T.UPI||0)+$}else if(ee==="credit"){const W=(_.paidVia||"").toLowerCase();W==="cash"?T.Cash=(T.Cash||0)+Y:W==="card"?T.Card=(T.Card||0)+Y:W==="upi"?T.UPI=(T.UPI||0)+Y:T.Other=(T.Other||0)+Y}else{const W=ee==="cash"?"Cash":ee==="card"?"Card":ee==="upi"?"UPI":"Other";T[W]=(T[W]||0)+Y}return T},{}),P=f.filter(T=>T.paymentMode?.toLowerCase()==="credit"&&T.isPaid===!1&&(T.settings?.creditDueDate||T.creditDueDate)),D=new Date;D.setHours(0,0,0,0);const C=new Date(D);C.setDate(D.getDate()+1);const O=P.filter(T=>{const _=T.settings?.creditDueDate||T.creditDueDate,Y=new Date(`${_}T00:00:00`);return Y.setHours(0,0,0,0),Y.getTime()===D.getTime()}),A=O.reduce((T,_)=>T+parseFloat(_.totalAmount||_.settings?.totalAmount||0),0),B=P.filter(T=>{const _=T.settings?.creditDueDate||T.creditDueDate,Y=new Date(`${_}T00:00:00`);return Y.setHours(0,0,0,0),Y.getTime()===C.getTime()}),M=B.reduce((T,_)=>T+parseFloat(_.totalAmount||_.settings?.totalAmount||0),0),F=P.reduce((T,_)=>T+parseFloat(_.totalAmount||_.settings?.totalAmount||0),0),V=new Date().toLocaleDateString("en-IN",{weekday:"short",month:"short",day:"numeric"}),q=Object.entries(N||{}).sort((T,_)=>(_[1]||0)-(T[1]||0))[0]?.[0]||"â€”",K=[{icon:"ðŸ’°",text:`Revenue: ${Or(k)}`},{icon:"ðŸ§¾",text:`Invoices: ${f.length}`},{icon:"ðŸ’³",text:`Top Mode: ${q}`},{icon:"â°",text:`Due Today: ${Or(A)}`},{icon:"ðŸ“Œ",text:`Total Credit Due: ${Or(F)}`}],ne=()=>{const Y=document.createElement("canvas");Y.width=880,Y.height=480;const ee=Y.getContext("2d"),W=ee.createLinearGradient(0,0,880,480);W.addColorStop(0,"#0b1720"),W.addColorStop(1,"#132b33"),ee.fillStyle=W,ee.fillRect(0,0,880,480),ee.fillStyle="rgba(255,255,255,.85)",ee.font="700 28px Inter, system-ui",ee.fillText(`Snapshot â€” ${m.name||"Your Business"}`,32,52),ee.font="500 16px Inter, system-ui",ee.fillText(V,32,78),ee.font="600 20px Inter, system-ui",ee.fillText("KPIs",32,118);const H=[`Revenue: ${Or(k)}`,`Invoices: ${f.length}`,`Top Mode: ${q}`,`Due Today: ${Or(A)}`,`Total Credit Due: ${Or(F)}`];ee.font="500 18px Inter, system-ui",H.forEach(($,L)=>ee.fillText($,32,150+L*28));const le=document.createElement("a");le.href=Y.toDataURL("image/png"),le.download=`snapshot_${Date.now()}.png`,le.click()},Z=n?"px-4 md:px-6 py-4 md:py-3 text-white max-w-[1400px] mx-auto w-full":"px-4 md:px-6 py-2 space-y-6 text-white max-w-[1400px] mx-auto w-full";return i.jsxs(U.div,{className:Z,variants:Bj,initial:"hidden",animate:"visible",style:n?{paddingBottom:"calc(4rem + env(safe-area-inset-bottom))",display:"flex",flexDirection:"column",gap:"1.5rem"}:{},children:[i.jsx(qj,{}),i.jsxs(U.div,{variants:kn,className:"relative pt-2 md:pt-3 pb-3 md:pb-4",ref:p,onMouseMove:v,children:[i.jsx("div",{className:"welcome-aurora"}),i.jsxs("div",{className:"flex items-center justify-between gap-3 relative",children:[i.jsxs("div",{className:"min-w-0",children:[i.jsx("div",{className:"text-sm text-white/70",children:V}),i.jsx($j,{text:`Welcome back, ${m.name||"Retailer"} âœ¦`,className:"text-2xl md:text-4xl font-extrabold bg-clip-text text-transparent bg-gradient-to-r from-emerald-300 via-teal-200 to-cyan-300",splitBy:"chars",delay:.018,animate:{from:{opacity:0,y:26,rotateX:-20},to:{opacity:1,y:0,rotateX:0},transition:{ease:[.16,1,.3,1],duration:.55}}}),i.jsxs("div",{className:"text-white/70 text-sm mt-1",children:["Quick look: ",Or(k)," today Â· ",f.length," invoices Â· ",Or(F)," credit due"]})]}),i.jsxs("div",{className:"flex items-center gap-2 shrink-0",children:[i.jsx("button",{className:"btn min-h-[44px] sm:min-h-0 touch-target",onClick:ne,children:"Share snapshot"}),i.jsx("button",{className:"gear-btn min-h-[44px] sm:min-h-0 touch-target",onClick:()=>S("showTips"),title:"Customize",children:"âš™ï¸Ž"})]})]}),i.jsx("div",{className:"mt-3 chip-scroller",children:K.map((T,_)=>i.jsxs("span",{className:"chip",children:[i.jsx("span",{children:T.icon}),T.text]},_))}),w.showTips&&i.jsxs("div",{className:"mt-3 text-xs text-white/70 flex flex-wrap gap-2",children:[i.jsx("span",{className:"chip",children:"Tip: Click â€œCredit Duesâ€ header to jump to reminders"}),i.jsx("span",{className:"chip",children:"Tip: Filter by date from top bar to change KPIs"})]})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx(U.h2,{variants:kn,className:"text-lg font-semibold bg-clip-text text-transparent bg-gradient-to-r from-white via-white to-emerald-200",children:"ðŸ“Š Home Snapshot: Todayâ€™s KPIs"}),r?i.jsx("div",{className:"shrink-0 ml-3","data-slot":"homesnapshot-header-right",children:r}):null]}),i.jsx("div",{className:"subtle-divider mb-3"}),i.jsx(U.div,{variants:kn,children:i.jsx(Ij,{invoiceData:f,totalRevenue:k,paymentStats:N,dueToday:A,dueTomorrow:M,totalDue:F,totalDueCount:P?.filter(T=>T.isPaid===!1).length||0})}),i.jsx(U.section,{variants:kn,className:`mt-4 ${n?"mb-6":""} overflow-x-auto`,ref:g,children:i.jsxs("div",{className:"relative rounded-2xl min-w-0 w-full",children:[i.jsx("div",{className:"absolute inset-0 rounded-2xl p-[1px] bg-gradient-to-r from-cyan-500/10 to-fuchsia-500/10 pointer-events-none"}),i.jsx("div",{className:"relative rounded-[14px] bg-white/10 backdrop-blur-xl border border-white/10 p-4 md:p-5 w-full min-w-0 overflow-visible",children:i.jsx(Rj,{creditInvoices:P,dueToday:O,dueTomorrow:B,totalDue:F,businessName:m.name,businessAddress:m.address,layout:"horizontal"})})]})}),i.jsxs(U.div,{variants:kn,className:`flex items-center gap-2 text-xs text-white/70 ${n?"mb-4":""}`,children:[i.jsxs("button",{className:"gear-btn min-h-[44px] sm:min-h-0 touch-target",onClick:()=>S("showLowStock"),children:[w.showLowStock!==!1?"Hide":"Show"," Low Stock"]}),i.jsxs("button",{className:"gear-btn min-h-[44px] sm:min-h-0 touch-target",onClick:()=>S("showRecent"),children:[w.showRecent!==!1?"Hide":"Show"," Recent Invoices"]})]}),i.jsxs(U.div,{variants:kn,className:`grid grid-cols-1 md:grid-cols-2 gap-3 sm:gap-4 ${n?"mb-6":""}`,children:[w.showLowStock!==!1&&i.jsxs("div",{className:"relative rounded-2xl h-full",children:[i.jsx("div",{className:"absolute inset-0 rounded-2xl p-[1px] bg-gradient-to-r from-cyan-500/10 to-fuchsia-500/10 pointer-events-none"}),i.jsx("div",{className:"relative rounded-[14px] bg-white/10 backdrop-blur-xl border border-white/10 p-4 h-full",children:i.jsx(_j,{userId:l})})]}),w.showRecent!==!1&&i.jsxs("div",{className:"relative rounded-2xl h-full",children:[i.jsx("div",{className:"absolute inset-0 rounded-2xl p-[1px] bg-gradient-to-r from-cyan-500/10 to-fuchsia-500/10 pointer-events-none"}),i.jsx("div",{className:"relative rounded-[14px] bg-white/10 backdrop-blur-xl border border-white/10 p-4 h-full",children:i.jsx(Ej,{invoiceData:[...f].sort((T,_)=>new Date(_.createdAt)-new Date(T.createdAt))})})]})]})]})},lg=x.createContext(),zj=({children:e})=>{const[t,r]=x.useState(null),[n,a]=x.useState(null);return i.jsx(lg.Provider,{value:{selectedProduct:t,setSelectedProduct:r,selectedDate:n,setSelectedDate:a},children:e})},xu=()=>x.useContext(lg);var yo={},wo={},Af;function Vj(){return Af||(Af=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==="__proto__"}e.isUnsafeProperty=t})(wo)),wo}var jo={},Df;function cg(){return Df||(Df=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){switch(typeof r){case"number":case"symbol":return!1;case"string":return r.includes(".")||r.includes("[")||r.includes("]")}}e.isDeepKey=t})(jo)),jo}var No={},Tf;function ug(){return Tf||(Tf=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="string"||typeof r=="symbol"?r:Object.is(r?.valueOf?.(),-0)?"-0":String(r)}e.toKey=t})(No)),No}var So={},If;function vu(){return If||(If=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){const n=[],a=r.length;if(a===0)return n;let s=0,o="",l="",c=!1;for(r.charCodeAt(0)===46&&(n.push(""),s++);s<a;){const d=r[s];l?d==="\\"&&s+1<a?(s++,o+=r[s]):d===l?l="":o+=d:c?d==='"'||d==="'"?l=d:d==="]"?(c=!1,n.push(o),o=""):o+=d:d==="["?(c=!0,o&&(n.push(o),o="")):d==="."?o&&(n.push(o),o=""):o+=d,s++}return o&&n.push(o),n}e.toPath=t})(So)),So}var Mf;function bu(){return Mf||(Mf=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Vj(),r=cg(),n=ug(),a=vu();function s(l,c,d){if(l==null)return d;switch(typeof c){case"string":{if(t.isUnsafeProperty(c))return d;const u=l[c];return u===void 0?r.isDeepKey(c)?s(l,a.toPath(c),d):d:u}case"number":case"symbol":{typeof c=="number"&&(c=n.toKey(c));const u=l[c];return u===void 0?d:u}default:{if(Array.isArray(c))return o(l,c,d);if(Object.is(c?.valueOf(),-0)?c="-0":c=String(c),t.isUnsafeProperty(c))return d;const u=l[c];return u===void 0?d:u}}}function o(l,c,d){if(c.length===0)return d;let u=l;for(let f=0;f<c.length;f++){if(u==null||t.isUnsafeProperty(c[f]))return d;u=u[c[f]]}return u===void 0?d:u}e.get=s})(yo)),yo}var ko,Ef;function Wj(){return Ef||(Ef=1,ko=bu().get),ko}var Hj=Wj();const un=br(Hj);var xt=e=>e===0?0:e>0?1:-1,Ot=e=>typeof e=="number"&&e!=+e,en=e=>typeof e=="string"&&e.indexOf("%")===e.length-1,se=e=>(typeof e=="number"||e instanceof Number)&&!Ot(e),er=e=>se(e)||typeof e=="string",Kj=0,Sa=e=>{var t=++Kj;return"".concat(e||"").concat(t)},Gt=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!se(t)&&typeof t!="string")return n;var s;if(en(t)){if(r==null)return n;var o=t.indexOf("%");s=r*parseFloat(t.slice(0,o))/100}else s=+t;return Ot(s)&&(s=n),a&&r!=null&&s>r&&(s=r),s},dg=e=>{if(!Array.isArray(e))return!1;for(var t=e.length,r={},n=0;n<t;n++)if(!r[e[n]])r[e[n]]=!0;else return!0;return!1};function Ut(e,t,r){return se(e)&&se(t)?e+r*(t-e):t}function fg(e,t,r){if(!(!e||!e.length))return e.find(n=>n&&(typeof t=="function"?t(n):un(n,t))===r)}var Me=e=>e===null||typeof e>"u",$a=e=>Me(e)?e:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1)),Yj=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function yu(e){if(typeof e!="string")return!1;var t=Yj;return t.includes(e)}var Gj=["viewBox","children"],_f=["points","pathLength"],Po={svg:Gj,polygon:_f,polyline:_f},wu=(e,t)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(x.isValidElement(e)&&(r=e.props),typeof r!="object"&&typeof r!="function")return null;var n={};return Object.keys(r).forEach(a=>{yu(a)&&(n[a]=(s=>r[a](r,s)))}),n},Qj=(e,t,r)=>n=>(e(t,r,n),null),Ps=(e,t,r)=>{if(e===null||typeof e!="object"&&typeof e!="function")return null;var n=null;return Object.keys(e).forEach(a=>{var s=e[a];yu(a)&&typeof s=="function"&&(n||(n={}),n[a]=Qj(s,t,r))}),n},Xj=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"];function hg(e){if(typeof e!="string")return!1;var t=Xj;return t.includes(e)}function gn(e){var t=Object.entries(e).filter(r=>{var[n]=r;return hg(n)});return Object.fromEntries(t)}var Rf=e=>typeof e=="string"?e:e?e.displayName||e.name||"Component":"",$f=null,Oo=null,mg=e=>{if(e===$f&&Array.isArray(Oo))return Oo;var t=[];return x.Children.forEach(e,r=>{Me(r)||(Gw.isFragment(r)?t=t.concat(mg(r.props.children)):t.push(r))}),Oo=t,$f=e,t};function ju(e,t){var r=[],n=[];return Array.isArray(t)?n=t.map(a=>Rf(a)):n=[Rf(t)],mg(e).forEach(a=>{var s=un(a,"type.displayName")||un(a,"type.name");n.indexOf(s)!==-1&&r.push(a)}),r}var pg=e=>e&&typeof e=="object"&&"clipDot"in e?!!e.clipDot:!0,Zj=(e,t,r,n)=>{var a;if(typeof t=="symbol"||typeof t=="number")return!0;var s=(a=n&&Po?.[n])!==null&&a!==void 0?a:[],o=t.startsWith("data-"),l=typeof e!="function"&&(!!n&&s.includes(t)||hg(t)),c=!!r&&yu(t);return o||l||c},Le=(e,t,r)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var n=e;if(x.isValidElement(e)&&(n=e.props),typeof n!="object"&&typeof n!="function")return null;var a={};return Object.keys(n).forEach(s=>{var o;Zj((o=n)===null||o===void 0?void 0:o[s],s,t,r)&&(a[s]=n[s])}),a},Jj=["children","width","height","viewBox","className","style","title","desc"];function uc(){return uc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},uc.apply(null,arguments)}function eN(e,t){if(e==null)return{};var r,n,a=tN(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function tN(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var Nu=x.forwardRef((e,t)=>{var{children:r,width:n,height:a,viewBox:s,className:o,style:l,title:c,desc:d}=e,u=eN(e,Jj),f=s||{width:n,height:a,x:0,y:0},h=Oe("recharts-surface",o);return x.createElement("svg",uc({},Le(u,!0,"svg"),{className:h,width:n,height:a,style:l,viewBox:"".concat(f.x," ").concat(f.y," ").concat(f.width," ").concat(f.height),ref:t}),x.createElement("title",null,c),x.createElement("desc",null,d),r)}),rN=["children","className"];function dc(){return dc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},dc.apply(null,arguments)}function nN(e,t){if(e==null)return{};var r,n,a=aN(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function aN(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var Qt=x.forwardRef((e,t)=>{var{children:r,className:n}=e,a=nN(e,rN),s=Oe("recharts-layer",n);return x.createElement("g",dc({className:s},Le(a,!0),{ref:t}),r)}),gg=x.createContext(null),iN=()=>x.useContext(gg);function De(e){return function(){return e}}const xg=Math.cos,Ai=Math.sin,Xt=Math.sqrt,Di=Math.PI,Os=2*Di,fc=Math.PI,hc=2*fc,Gr=1e-6,sN=hc-Gr;function vg(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function oN(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return vg;const r=10**t;return function(n){this._+=n[0];for(let a=1,s=n.length;a<s;++a)this._+=Math.round(arguments[a]*r)/r+n[a]}}class lN{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?vg:oN(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,n,a){this._append`Q${+t},${+r},${this._x1=+n},${this._y1=+a}`}bezierCurveTo(t,r,n,a,s,o){this._append`C${+t},${+r},${+n},${+a},${this._x1=+s},${this._y1=+o}`}arcTo(t,r,n,a,s){if(t=+t,r=+r,n=+n,a=+a,s=+s,s<0)throw new Error(`negative radius: ${s}`);let o=this._x1,l=this._y1,c=n-t,d=a-r,u=o-t,f=l-r,h=u*u+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(h>Gr)if(!(Math.abs(f*c-d*u)>Gr)||!s)this._append`L${this._x1=t},${this._y1=r}`;else{let m=n-o,b=a-l,g=c*c+d*d,p=m*m+b*b,v=Math.sqrt(g),w=Math.sqrt(h),y=s*Math.tan((fc-Math.acos((g+h-p)/(2*v*w)))/2),S=y/w,j=y/v;Math.abs(S-1)>Gr&&this._append`L${t+S*u},${r+S*f}`,this._append`A${s},${s},0,0,${+(f*m>u*b)},${this._x1=t+j*c},${this._y1=r+j*d}`}}arc(t,r,n,a,s,o){if(t=+t,r=+r,n=+n,o=!!o,n<0)throw new Error(`negative radius: ${n}`);let l=n*Math.cos(a),c=n*Math.sin(a),d=t+l,u=r+c,f=1^o,h=o?a-s:s-a;this._x1===null?this._append`M${d},${u}`:(Math.abs(this._x1-d)>Gr||Math.abs(this._y1-u)>Gr)&&this._append`L${d},${u}`,n&&(h<0&&(h=h%hc+hc),h>sN?this._append`A${n},${n},0,1,${f},${t-l},${r-c}A${n},${n},0,1,${f},${this._x1=d},${this._y1=u}`:h>Gr&&this._append`A${n},${n},0,${+(h>=fc)},${f},${this._x1=t+n*Math.cos(s)},${this._y1=r+n*Math.sin(s)}`)}rect(t,r,n,a){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${n=+n}v${+a}h${-n}Z`}toString(){return this._}}function Su(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);t=n}return e},()=>new lN(t)}function ku(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function bg(e){this._context=e}bg.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function Cs(e){return new bg(e)}function yg(e){return e[0]}function wg(e){return e[1]}function jg(e,t){var r=De(!0),n=null,a=Cs,s=null,o=Su(l);e=typeof e=="function"?e:e===void 0?yg:De(e),t=typeof t=="function"?t:t===void 0?wg:De(t);function l(c){var d,u=(c=ku(c)).length,f,h=!1,m;for(n==null&&(s=a(m=o())),d=0;d<=u;++d)!(d<u&&r(f=c[d],d,c))===h&&((h=!h)?s.lineStart():s.lineEnd()),h&&s.point(+e(f,d,c),+t(f,d,c));if(m)return s=null,m+""||null}return l.x=function(c){return arguments.length?(e=typeof c=="function"?c:De(+c),l):e},l.y=function(c){return arguments.length?(t=typeof c=="function"?c:De(+c),l):t},l.defined=function(c){return arguments.length?(r=typeof c=="function"?c:De(!!c),l):r},l.curve=function(c){return arguments.length?(a=c,n!=null&&(s=a(n)),l):a},l.context=function(c){return arguments.length?(c==null?n=s=null:s=a(n=c),l):n},l}function ii(e,t,r){var n=null,a=De(!0),s=null,o=Cs,l=null,c=Su(d);e=typeof e=="function"?e:e===void 0?yg:De(+e),t=typeof t=="function"?t:De(t===void 0?0:+t),r=typeof r=="function"?r:r===void 0?wg:De(+r);function d(f){var h,m,b,g=(f=ku(f)).length,p,v=!1,w,y=new Array(g),S=new Array(g);for(s==null&&(l=o(w=c())),h=0;h<=g;++h){if(!(h<g&&a(p=f[h],h,f))===v)if(v=!v)m=h,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),b=h-1;b>=m;--b)l.point(y[b],S[b]);l.lineEnd(),l.areaEnd()}v&&(y[h]=+e(p,h,f),S[h]=+t(p,h,f),l.point(n?+n(p,h,f):y[h],r?+r(p,h,f):S[h]))}if(w)return l=null,w+""||null}function u(){return jg().defined(a).curve(o).context(s)}return d.x=function(f){return arguments.length?(e=typeof f=="function"?f:De(+f),n=null,d):e},d.x0=function(f){return arguments.length?(e=typeof f=="function"?f:De(+f),d):e},d.x1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:De(+f),d):n},d.y=function(f){return arguments.length?(t=typeof f=="function"?f:De(+f),r=null,d):t},d.y0=function(f){return arguments.length?(t=typeof f=="function"?f:De(+f),d):t},d.y1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:De(+f),d):r},d.lineX0=d.lineY0=function(){return u().x(e).y(t)},d.lineY1=function(){return u().x(e).y(r)},d.lineX1=function(){return u().x(n).y(t)},d.defined=function(f){return arguments.length?(a=typeof f=="function"?f:De(!!f),d):a},d.curve=function(f){return arguments.length?(o=f,s!=null&&(l=o(s)),d):o},d.context=function(f){return arguments.length?(f==null?s=l=null:l=o(s=f),d):s},d}class Ng{constructor(t,r){this._context=t,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,r){switch(t=+t,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,r,t,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,t,this._y0,t,r);break}}this._x0=t,this._y0=r}}function cN(e){return new Ng(e,!0)}function uN(e){return new Ng(e,!1)}const Pu={draw(e,t){const r=Xt(t/Di);e.moveTo(r,0),e.arc(0,0,r,0,Os)}},dN={draw(e,t){const r=Xt(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},Sg=Xt(1/3),fN=Sg*2,hN={draw(e,t){const r=Xt(t/fN),n=r*Sg;e.moveTo(0,-r),e.lineTo(n,0),e.lineTo(0,r),e.lineTo(-n,0),e.closePath()}},mN={draw(e,t){const r=Xt(t),n=-r/2;e.rect(n,n,r,r)}},pN=.8908130915292852,kg=Ai(Di/10)/Ai(7*Di/10),gN=Ai(Os/10)*kg,xN=-xg(Os/10)*kg,vN={draw(e,t){const r=Xt(t*pN),n=gN*r,a=xN*r;e.moveTo(0,-r),e.lineTo(n,a);for(let s=1;s<5;++s){const o=Os*s/5,l=xg(o),c=Ai(o);e.lineTo(c*r,-l*r),e.lineTo(l*n-c*a,c*n+l*a)}e.closePath()}},Co=Xt(3),bN={draw(e,t){const r=-Xt(t/(Co*3));e.moveTo(0,r*2),e.lineTo(-Co*r,-r),e.lineTo(Co*r,-r),e.closePath()}},It=-.5,Mt=Xt(3)/2,mc=1/Xt(12),yN=(mc/2+1)*3,wN={draw(e,t){const r=Xt(t/yN),n=r/2,a=r*mc,s=n,o=r*mc+r,l=-s,c=o;e.moveTo(n,a),e.lineTo(s,o),e.lineTo(l,c),e.lineTo(It*n-Mt*a,Mt*n+It*a),e.lineTo(It*s-Mt*o,Mt*s+It*o),e.lineTo(It*l-Mt*c,Mt*l+It*c),e.lineTo(It*n+Mt*a,It*a-Mt*n),e.lineTo(It*s+Mt*o,It*o-Mt*s),e.lineTo(It*l+Mt*c,It*c-Mt*l),e.closePath()}};function jN(e,t){let r=null,n=Su(a);e=typeof e=="function"?e:De(e||Pu),t=typeof t=="function"?t:De(t===void 0?64:+t);function a(){let s;if(r||(r=s=n()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),s)return r=null,s+""||null}return a.type=function(s){return arguments.length?(e=typeof s=="function"?s:De(s),a):e},a.size=function(s){return arguments.length?(t=typeof s=="function"?s:De(+s),a):t},a.context=function(s){return arguments.length?(r=s??null,a):r},a}function Ti(){}function Ii(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function Pg(e){this._context=e}Pg.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Ii(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Ii(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function NN(e){return new Pg(e)}function Og(e){this._context=e}Og.prototype={areaStart:Ti,areaEnd:Ti,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:Ii(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function SN(e){return new Og(e)}function Cg(e){this._context=e}Cg.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,n=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:Ii(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function kN(e){return new Cg(e)}function Ag(e){this._context=e}Ag.prototype={areaStart:Ti,areaEnd:Ti,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function PN(e){return new Ag(e)}function Lf(e){return e<0?-1:1}function Ff(e,t,r){var n=e._x1-e._x0,a=t-e._x1,s=(e._y1-e._y0)/(n||a<0&&-0),o=(r-e._y1)/(a||n<0&&-0),l=(s*a+o*n)/(n+a);return(Lf(s)+Lf(o))*Math.min(Math.abs(s),Math.abs(o),.5*Math.abs(l))||0}function Bf(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function Ao(e,t,r){var n=e._x0,a=e._y0,s=e._x1,o=e._y1,l=(s-n)/3;e._context.bezierCurveTo(n+l,a+l*t,s-l,o-l*r,s,o)}function Mi(e){this._context=e}Mi.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Ao(this,this._t0,Bf(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,Ao(this,Bf(this,r=Ff(this,e,t)),r);break;default:Ao(this,this._t0,r=Ff(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}};function Dg(e){this._context=new Tg(e)}(Dg.prototype=Object.create(Mi.prototype)).point=function(e,t){Mi.prototype.point.call(this,t,e)};function Tg(e){this._context=e}Tg.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,n,a,s){this._context.bezierCurveTo(t,e,n,r,s,a)}};function ON(e){return new Mi(e)}function CN(e){return new Dg(e)}function Ig(e){this._context=e}Ig.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),r===2)this._context.lineTo(e[1],t[1]);else for(var n=qf(e),a=qf(t),s=0,o=1;o<r;++s,++o)this._context.bezierCurveTo(n[0][s],a[0][s],n[1][s],a[1][s],e[o],t[o]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function qf(e){var t,r=e.length-1,n,a=new Array(r),s=new Array(r),o=new Array(r);for(a[0]=0,s[0]=2,o[0]=e[0]+2*e[1],t=1;t<r-1;++t)a[t]=1,s[t]=4,o[t]=4*e[t]+2*e[t+1];for(a[r-1]=2,s[r-1]=7,o[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=a[t]/s[t-1],s[t]-=n,o[t]-=n*o[t-1];for(a[r-1]=o[r-1]/s[r-1],t=r-2;t>=0;--t)a[t]=(o[t]-a[t+1])/s[t];for(s[r-1]=(e[r]+a[r-1])/2,t=0;t<r-1;++t)s[t]=2*e[t+1]-a[t+1];return[a,s]}function AN(e){return new Ig(e)}function As(e,t){this._context=e,this._t=t}As.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}break}}this._x=e,this._y=t}};function DN(e){return new As(e,.5)}function TN(e){return new As(e,0)}function IN(e){return new As(e,1)}function _n(e,t){if((o=e.length)>1)for(var r=1,n,a,s=e[t[0]],o,l=s.length;r<o;++r)for(a=s,s=e[t[r]],n=0;n<l;++n)s[n][1]+=s[n][0]=isNaN(a[n][1])?a[n][0]:a[n][1]}function pc(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function MN(e,t){return e[t]}function EN(e){const t=[];return t.key=e,t}function _N(){var e=De([]),t=pc,r=_n,n=MN;function a(s){var o=Array.from(e.apply(this,arguments),EN),l,c=o.length,d=-1,u;for(const f of s)for(l=0,++d;l<c;++l)(o[l][d]=[0,+n(f,o[l].key,d,s)]).data=f;for(l=0,u=ku(t(o));l<c;++l)o[u[l]].index=l;return r(o,u),o}return a.keys=function(s){return arguments.length?(e=typeof s=="function"?s:De(Array.from(s)),a):e},a.value=function(s){return arguments.length?(n=typeof s=="function"?s:De(+s),a):n},a.order=function(s){return arguments.length?(t=s==null?pc:typeof s=="function"?s:De(Array.from(s)),a):t},a.offset=function(s){return arguments.length?(r=s??_n,a):r},a}function RN(e,t){if((n=e.length)>0){for(var r,n,a=0,s=e[0].length,o;a<s;++a){for(o=r=0;r<n;++r)o+=e[r][a][1]||0;if(o)for(r=0;r<n;++r)e[r][a][1]/=o}_n(e,t)}}function $N(e,t){if((a=e.length)>0){for(var r=0,n=e[t[0]],a,s=n.length;r<s;++r){for(var o=0,l=0;o<a;++o)l+=e[o][r][1]||0;n[r][1]+=n[r][0]=-l/2}_n(e,t)}}function LN(e,t){if(!(!((o=e.length)>0)||!((s=(a=e[t[0]]).length)>0))){for(var r=0,n=1,a,s,o;n<s;++n){for(var l=0,c=0,d=0;l<o;++l){for(var u=e[t[l]],f=u[n][1]||0,h=u[n-1][1]||0,m=(f-h)/2,b=0;b<l;++b){var g=e[t[b]],p=g[n][1]||0,v=g[n-1][1]||0;m+=p-v}c+=f,d+=m*f}a[n-1][1]+=a[n-1][0]=r,c&&(r-=d/c)}a[n-1][1]+=a[n-1][0]=r,_n(e,t)}}var FN=["type","size","sizeType"];function gc(){return gc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},gc.apply(null,arguments)}function Uf(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function zf(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Uf(Object(r),!0).forEach(function(n){BN(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Uf(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function BN(e,t,r){return(t=qN(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function qN(e){var t=UN(e,"string");return typeof t=="symbol"?t:t+""}function UN(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function zN(e,t){if(e==null)return{};var r,n,a=VN(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function VN(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var Mg={symbolCircle:Pu,symbolCross:dN,symbolDiamond:hN,symbolSquare:mN,symbolStar:vN,symbolTriangle:bN,symbolWye:wN},WN=Math.PI/180,HN=e=>{var t="symbol".concat($a(e));return Mg[t]||Pu},KN=(e,t,r)=>{if(t==="area")return e;switch(r){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var n=18*WN;return 1.25*e*e*(Math.tan(n)-Math.tan(n*2)*Math.tan(n)**2)}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},YN=(e,t)=>{Mg["symbol".concat($a(e))]=t},Ou=e=>{var{type:t="circle",size:r=64,sizeType:n="area"}=e,a=zN(e,FN),s=zf(zf({},a),{},{type:t,size:r,sizeType:n}),o=()=>{var f=HN(t),h=jN().type(f).size(KN(r,n,t));return h()},{className:l,cx:c,cy:d}=s,u=Le(s,!0);return c===+c&&d===+d&&r===+r?x.createElement("path",gc({},u,{className:Oe("recharts-symbols",l),transform:"translate(".concat(c,", ").concat(d,")"),d:o()})):null};Ou.registerSymbol=YN;function xc(){return xc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},xc.apply(null,arguments)}function Vf(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function GN(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Vf(Object(r),!0).forEach(function(n){Cu(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Vf(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Cu(e,t,r){return(t=QN(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function QN(e){var t=XN(e,"string");return typeof t=="symbol"?t:t+""}function XN(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Et=32;class Au extends x.PureComponent{renderIcon(t,r){var{inactiveColor:n}=this.props,a=Et/2,s=Et/6,o=Et/3,l=t.inactive?n:t.color,c=r??t.type;if(c==="none")return null;if(c==="plainline")return x.createElement("line",{strokeWidth:4,fill:"none",stroke:l,strokeDasharray:t.payload.strokeDasharray,x1:0,y1:a,x2:Et,y2:a,className:"recharts-legend-icon"});if(c==="line")return x.createElement("path",{strokeWidth:4,fill:"none",stroke:l,d:"M0,".concat(a,"h").concat(o,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(2*o,",").concat(a,`
            H`).concat(Et,"M").concat(2*o,",").concat(a,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(o,",").concat(a),className:"recharts-legend-icon"});if(c==="rect")return x.createElement("path",{stroke:"none",fill:l,d:"M0,".concat(Et/8,"h").concat(Et,"v").concat(Et*3/4,"h").concat(-Et,"z"),className:"recharts-legend-icon"});if(x.isValidElement(t.legendIcon)){var d=GN({},t);return delete d.legendIcon,x.cloneElement(t.legendIcon,d)}return x.createElement(Ou,{fill:l,cx:a,cy:a,size:Et,sizeType:"diameter",type:c})}renderItems(){var{payload:t,iconSize:r,layout:n,formatter:a,inactiveColor:s,iconType:o}=this.props,l={x:0,y:0,width:Et,height:Et},c={display:n==="horizontal"?"inline-block":"block",marginRight:10},d={display:"inline-block",verticalAlign:"middle",marginRight:4};return t.map((u,f)=>{var h=u.formatter||a,m=Oe({"recharts-legend-item":!0,["legend-item-".concat(f)]:!0,inactive:u.inactive});if(u.type==="none")return null;var b=u.inactive?s:u.color,g=h?h(u.value,u,f):u.value;return x.createElement("li",xc({className:m,style:c,key:"legend-item-".concat(f)},Ps(this.props,u,f)),x.createElement(Nu,{width:r,height:r,viewBox:l,style:d,"aria-label":"".concat(g," legend icon")},this.renderIcon(u,o)),x.createElement("span",{className:"recharts-legend-item-text",style:{color:b}},g))})}render(){var{payload:t,layout:r,align:n}=this.props;if(!t||!t.length)return null;var a={padding:0,margin:0,textAlign:r==="horizontal"?n:"left"};return x.createElement("ul",{className:"recharts-default-legend",style:a},this.renderItems())}}Cu(Au,"displayName","Legend");Cu(Au,"defaultProps",{align:"center",iconSize:14,inactiveColor:"#ccc",layout:"horizontal",verticalAlign:"middle"});var Do={},To={},Wf;function ZN(){return Wf||(Wf=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){const a=new Map;for(let s=0;s<r.length;s++){const o=r[s],l=n(o);a.has(l)||a.set(l,o)}return Array.from(a.values())}e.uniqBy=t})(To)),To}var Io={},Hf;function Eg(){return Hf||(Hf=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r}e.identity=t})(Io)),Io}var Mo={},Eo={},_o={},Kf;function JN(){return Kf||(Kf=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Number.isSafeInteger(r)&&r>=0}e.isLength=t})(_o)),_o}var Yf;function Du(){return Yf||(Yf=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=JN();function r(n){return n!=null&&typeof n!="function"&&t.isLength(n.length)}e.isArrayLike=r})(Eo)),Eo}var Ro={},Gf;function e2(){return Gf||(Gf=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="object"&&r!==null}e.isObjectLike=t})(Ro)),Ro}var Qf;function t2(){return Qf||(Qf=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Du(),r=e2();function n(a){return r.isObjectLike(a)&&t.isArrayLike(a)}e.isArrayLikeObject=n})(Mo)),Mo}var $o={},Lo={},Xf;function r2(){return Xf||(Xf=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=bu();function r(n){return function(a){return t.get(a,n)}}e.property=r})(Lo)),Lo}var Fo={},Bo={},qo={},Uo={},Zf;function _g(){return Zf||(Zf=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r!==null&&(typeof r=="object"||typeof r=="function")}e.isObject=t})(Uo)),Uo}var zo={},Jf;function Rg(){return Jf||(Jf=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null||typeof r!="object"&&typeof r!="function"}e.isPrimitive=t})(zo)),zo}var Vo={},eh;function Tu(){return eh||(eh=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){return r===n||Number.isNaN(r)&&Number.isNaN(n)}e.eq=t})(Vo)),Vo}var th;function n2(){return th||(th=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Iu(),r=_g(),n=Rg(),a=Tu();function s(f,h,m){return typeof m!="function"?t.isMatch(f,h):o(f,h,function b(g,p,v,w,y,S){const j=m(g,p,v,w,y,S);return j!==void 0?!!j:o(g,p,b,S)},new Map)}function o(f,h,m,b){if(h===f)return!0;switch(typeof h){case"object":return l(f,h,m,b);case"function":return Object.keys(h).length>0?o(f,{...h},m,b):a.eq(f,h);default:return r.isObject(f)?typeof h=="string"?h==="":!0:a.eq(f,h)}}function l(f,h,m,b){if(h==null)return!0;if(Array.isArray(h))return d(f,h,m,b);if(h instanceof Map)return c(f,h,m,b);if(h instanceof Set)return u(f,h,m,b);const g=Object.keys(h);if(f==null)return g.length===0;if(g.length===0)return!0;if(b&&b.has(h))return b.get(h)===f;b&&b.set(h,f);try{for(let p=0;p<g.length;p++){const v=g[p];if(!n.isPrimitive(f)&&!(v in f)||h[v]===void 0&&f[v]!==void 0||h[v]===null&&f[v]!==null||!m(f[v],h[v],v,f,h,b))return!1}return!0}finally{b&&b.delete(h)}}function c(f,h,m,b){if(h.size===0)return!0;if(!(f instanceof Map))return!1;for(const[g,p]of h.entries()){const v=f.get(g);if(m(v,p,g,f,h,b)===!1)return!1}return!0}function d(f,h,m,b){if(h.length===0)return!0;if(!Array.isArray(f))return!1;const g=new Set;for(let p=0;p<h.length;p++){const v=h[p];let w=!1;for(let y=0;y<f.length;y++){if(g.has(y))continue;const S=f[y];let j=!1;if(m(S,v,p,f,h,b)&&(j=!0),j){g.add(y),w=!0;break}}if(!w)return!1}return!0}function u(f,h,m,b){return h.size===0?!0:f instanceof Set?d([...f],[...h],m,b):!1}e.isMatchWith=s,e.isSetMatch=u})(qo)),qo}var rh;function Iu(){return rh||(rh=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=n2();function r(n,a){return t.isMatchWith(n,a,()=>{})}e.isMatch=r})(Bo)),Bo}var Wo={},Ho={},Ko={},nh;function $g(){return nh||(nh=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Object.getOwnPropertySymbols(r).filter(n=>Object.prototype.propertyIsEnumerable.call(r,n))}e.getSymbols=t})(Ko)),Ko}var Yo={},ah;function Mu(){return ah||(ah=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null?r===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(r)}e.getTag=t})(Yo)),Yo}var Go={},ih;function Eu(){return ih||(ih=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t="[object RegExp]",r="[object String]",n="[object Number]",a="[object Boolean]",s="[object Arguments]",o="[object Symbol]",l="[object Date]",c="[object Map]",d="[object Set]",u="[object Array]",f="[object Function]",h="[object ArrayBuffer]",m="[object Object]",b="[object Error]",g="[object DataView]",p="[object Uint8Array]",v="[object Uint8ClampedArray]",w="[object Uint16Array]",y="[object Uint32Array]",S="[object BigUint64Array]",j="[object Int8Array]",k="[object Int16Array]",N="[object Int32Array]",P="[object BigInt64Array]",D="[object Float32Array]",C="[object Float64Array]";e.argumentsTag=s,e.arrayBufferTag=h,e.arrayTag=u,e.bigInt64ArrayTag=P,e.bigUint64ArrayTag=S,e.booleanTag=a,e.dataViewTag=g,e.dateTag=l,e.errorTag=b,e.float32ArrayTag=D,e.float64ArrayTag=C,e.functionTag=f,e.int16ArrayTag=k,e.int32ArrayTag=N,e.int8ArrayTag=j,e.mapTag=c,e.numberTag=n,e.objectTag=m,e.regexpTag=t,e.setTag=d,e.stringTag=r,e.symbolTag=o,e.uint16ArrayTag=w,e.uint32ArrayTag=y,e.uint8ArrayTag=p,e.uint8ClampedArrayTag=v})(Go)),Go}var Qo={},sh;function a2(){return sh||(sh=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView)}e.isTypedArray=t})(Qo)),Qo}var oh;function Lg(){return oh||(oh=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=$g(),r=Mu(),n=Eu(),a=Rg(),s=a2();function o(u,f){return l(u,void 0,u,new Map,f)}function l(u,f,h,m=new Map,b=void 0){const g=b?.(u,f,h,m);if(g!==void 0)return g;if(a.isPrimitive(u))return u;if(m.has(u))return m.get(u);if(Array.isArray(u)){const p=new Array(u.length);m.set(u,p);for(let v=0;v<u.length;v++)p[v]=l(u[v],v,h,m,b);return Object.hasOwn(u,"index")&&(p.index=u.index),Object.hasOwn(u,"input")&&(p.input=u.input),p}if(u instanceof Date)return new Date(u.getTime());if(u instanceof RegExp){const p=new RegExp(u.source,u.flags);return p.lastIndex=u.lastIndex,p}if(u instanceof Map){const p=new Map;m.set(u,p);for(const[v,w]of u)p.set(v,l(w,v,h,m,b));return p}if(u instanceof Set){const p=new Set;m.set(u,p);for(const v of u)p.add(l(v,void 0,h,m,b));return p}if(typeof Buffer<"u"&&Buffer.isBuffer(u))return u.subarray();if(s.isTypedArray(u)){const p=new(Object.getPrototypeOf(u)).constructor(u.length);m.set(u,p);for(let v=0;v<u.length;v++)p[v]=l(u[v],v,h,m,b);return p}if(u instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&u instanceof SharedArrayBuffer)return u.slice(0);if(u instanceof DataView){const p=new DataView(u.buffer.slice(0),u.byteOffset,u.byteLength);return m.set(u,p),c(p,u,h,m,b),p}if(typeof File<"u"&&u instanceof File){const p=new File([u],u.name,{type:u.type});return m.set(u,p),c(p,u,h,m,b),p}if(u instanceof Blob){const p=new Blob([u],{type:u.type});return m.set(u,p),c(p,u,h,m,b),p}if(u instanceof Error){const p=new u.constructor;return m.set(u,p),p.message=u.message,p.name=u.name,p.stack=u.stack,p.cause=u.cause,c(p,u,h,m,b),p}if(typeof u=="object"&&d(u)){const p=Object.create(Object.getPrototypeOf(u));return m.set(u,p),c(p,u,h,m,b),p}return u}function c(u,f,h=u,m,b){const g=[...Object.keys(f),...t.getSymbols(f)];for(let p=0;p<g.length;p++){const v=g[p],w=Object.getOwnPropertyDescriptor(u,v);(w==null||w.writable)&&(u[v]=l(f[v],v,h,m,b))}}function d(u){switch(r.getTag(u)){case n.argumentsTag:case n.arrayTag:case n.arrayBufferTag:case n.dataViewTag:case n.booleanTag:case n.dateTag:case n.float32ArrayTag:case n.float64ArrayTag:case n.int8ArrayTag:case n.int16ArrayTag:case n.int32ArrayTag:case n.mapTag:case n.numberTag:case n.objectTag:case n.regexpTag:case n.setTag:case n.stringTag:case n.symbolTag:case n.uint8ArrayTag:case n.uint8ClampedArrayTag:case n.uint16ArrayTag:case n.uint32ArrayTag:return!0;default:return!1}}e.cloneDeepWith=o,e.cloneDeepWithImpl=l,e.copyProperties=c})(Ho)),Ho}var lh;function i2(){return lh||(lh=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Lg();function r(n){return t.cloneDeepWithImpl(n,void 0,n,new Map,void 0)}e.cloneDeep=r})(Wo)),Wo}var ch;function s2(){return ch||(ch=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Iu(),r=i2();function n(a){return a=r.cloneDeep(a),s=>t.isMatch(s,a)}e.matches=n})(Fo)),Fo}var Xo={},Zo={},Jo={},uh;function o2(){return uh||(uh=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Lg(),r=Eu();function n(a,s){return t.cloneDeepWith(a,(o,l,c,d)=>{const u=s?.(o,l,c,d);if(u!==void 0)return u;if(typeof a=="object")switch(Object.prototype.toString.call(a)){case r.numberTag:case r.stringTag:case r.booleanTag:{const f=new a.constructor(a?.valueOf());return t.copyProperties(f,a),f}case r.argumentsTag:{const f={};return t.copyProperties(f,a),f.length=a.length,f[Symbol.iterator]=a[Symbol.iterator],f}default:return}})}e.cloneDeepWith=n})(Jo)),Jo}var dh;function l2(){return dh||(dh=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=o2();function r(n){return t.cloneDeepWith(n)}e.cloneDeep=r})(Zo)),Zo}var el={},tl={},fh;function Fg(){return fh||(fh=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=/^(?:0|[1-9]\d*)$/;function r(n,a=Number.MAX_SAFE_INTEGER){switch(typeof n){case"number":return Number.isInteger(n)&&n>=0&&n<a;case"symbol":return!1;case"string":return t.test(n)}}e.isIndex=r})(tl)),tl}var rl={},hh;function c2(){return hh||(hh=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Mu();function r(n){return n!==null&&typeof n=="object"&&t.getTag(n)==="[object Arguments]"}e.isArguments=r})(rl)),rl}var mh;function u2(){return mh||(mh=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=cg(),r=Fg(),n=c2(),a=vu();function s(o,l){let c;if(Array.isArray(l)?c=l:typeof l=="string"&&t.isDeepKey(l)&&o?.[l]==null?c=a.toPath(l):c=[l],c.length===0)return!1;let d=o;for(let u=0;u<c.length;u++){const f=c[u];if((d==null||!Object.hasOwn(d,f))&&!((Array.isArray(d)||n.isArguments(d))&&r.isIndex(f)&&f<d.length))return!1;d=d[f]}return!0}e.has=s})(el)),el}var ph;function d2(){return ph||(ph=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Iu(),r=ug(),n=l2(),a=bu(),s=u2();function o(l,c){switch(typeof l){case"object":{Object.is(l?.valueOf(),-0)&&(l="-0");break}case"number":{l=r.toKey(l);break}}return c=n.cloneDeep(c),function(d){const u=a.get(d,l);return u===void 0?s.has(d,l):c===void 0?u===void 0:t.isMatch(u,c)}}e.matchesProperty=o})(Xo)),Xo}var gh;function f2(){return gh||(gh=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Eg(),r=r2(),n=s2(),a=d2();function s(o){if(o==null)return t.identity;switch(typeof o){case"function":return o;case"object":return Array.isArray(o)&&o.length===2?a.matchesProperty(o[0],o[1]):n.matches(o);case"string":case"symbol":case"number":return r.property(o)}}e.iteratee=s})($o)),$o}var xh;function h2(){return xh||(xh=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=ZN(),r=Eg(),n=t2(),a=f2();function s(o,l=r.identity){return n.isArrayLikeObject(o)?t.uniqBy(Array.from(o),a.iteratee(l)):[]}e.uniqBy=s})(Do)),Do}var nl,vh;function m2(){return vh||(vh=1,nl=h2().uniqBy),nl}var p2=m2();const bh=br(p2);function Bg(e,t,r){return t===!0?bh(e,r):typeof t=="function"?bh(e,t):e}var al={exports:{}},il={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yh;function g2(){if(yh)return il;yh=1;var e=rg(),t=Kw();function r(d,u){return d===u&&(d!==0||1/d===1/u)||d!==d&&u!==u}var n=typeof Object.is=="function"?Object.is:r,a=t.useSyncExternalStore,s=e.useRef,o=e.useEffect,l=e.useMemo,c=e.useDebugValue;return il.useSyncExternalStoreWithSelector=function(d,u,f,h,m){var b=s(null);if(b.current===null){var g={hasValue:!1,value:null};b.current=g}else g=b.current;b=l(function(){function v(k){if(!w){if(w=!0,y=k,k=h(k),m!==void 0&&g.hasValue){var N=g.value;if(m(N,k))return S=N}return S=k}if(N=S,n(y,k))return N;var P=h(k);return m!==void 0&&m(N,P)?(y=k,N):(y=k,S=P)}var w=!1,y,S,j=f===void 0?null:f;return[function(){return v(u())},j===null?void 0:function(){return v(j())}]},[u,f,h,m]);var p=a(d,b[0],b[1]);return o(function(){g.hasValue=!0,g.value=p},[p]),c(p),p},il}var wh;function x2(){return wh||(wh=1,al.exports=g2()),al.exports}var v2=x2(),_u=x.createContext(null),b2=e=>e,Ve=()=>{var e=x.useContext(_u);return e?e.store.dispatch:b2},ki=()=>{},y2=()=>ki,w2=(e,t)=>e===t;function de(e){var t=x.useContext(_u);return v2.useSyncExternalStoreWithSelector(t?t.subscription.addNestedSub:y2,t?t.store.getState:ki,t?t.store.getState:ki,t?e:ki,w2)}function j2(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function N2(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function S2(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(r=>typeof r=="function")){const r=e.map(n=>typeof n=="function"?`function ${n.name||"unnamed"}()`:typeof n).join(", ");throw new TypeError(`${t}[${r}]`)}}var jh=e=>Array.isArray(e)?e:[e];function k2(e){const t=Array.isArray(e[0])?e[0]:e;return S2(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function P2(e,t){const r=[],{length:n}=e;for(let a=0;a<n;a++)r.push(e[a].apply(null,t));return r}var O2=class{constructor(e){this.value=e}deref(){return this.value}},C2=typeof WeakRef<"u"?WeakRef:O2,A2=0,Nh=1;function si(){return{s:A2,v:void 0,o:null,p:null}}function qg(e,t={}){let r=si();const{resultEqualityCheck:n}=t;let a,s=0;function o(){let l=r;const{length:c}=arguments;for(let f=0,h=c;f<h;f++){const m=arguments[f];if(typeof m=="function"||typeof m=="object"&&m!==null){let b=l.o;b===null&&(l.o=b=new WeakMap);const g=b.get(m);g===void 0?(l=si(),b.set(m,l)):l=g}else{let b=l.p;b===null&&(l.p=b=new Map);const g=b.get(m);g===void 0?(l=si(),b.set(m,l)):l=g}}const d=l;let u;if(l.s===Nh)u=l.v;else if(u=e.apply(null,arguments),s++,n){const f=a?.deref?.()??a;f!=null&&n(f,u)&&(u=f,s!==0&&s--),a=typeof u=="object"&&u!==null||typeof u=="function"?new C2(u):u}return d.s=Nh,d.v=u,u}return o.clearCache=()=>{r=si(),o.resetResultsCount()},o.resultsCount=()=>s,o.resetResultsCount=()=>{s=0},o}function D2(e,...t){const r=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,n=(...a)=>{let s=0,o=0,l,c={},d=a.pop();typeof d=="object"&&(c=d,d=a.pop()),j2(d,`createSelector expects an output function after the inputs, but received: [${typeof d}]`);const u={...r,...c},{memoize:f,memoizeOptions:h=[],argsMemoize:m=qg,argsMemoizeOptions:b=[]}=u,g=jh(h),p=jh(b),v=k2(a),w=f(function(){return s++,d.apply(null,arguments)},...g),y=m(function(){o++;const j=P2(v,arguments);return l=w.apply(null,j),l},...p);return Object.assign(y,{resultFunc:d,memoizedResultFunc:w,dependencies:v,dependencyRecomputations:()=>o,resetDependencyRecomputations:()=>{o=0},lastResult:()=>l,recomputations:()=>s,resetRecomputations:()=>{s=0},memoize:f,argsMemoize:m})};return Object.assign(n,{withTypes:()=>n}),n}var z=D2(qg),T2=Object.assign((e,t=z)=>{N2(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const r=Object.keys(e),n=r.map(s=>e[s]);return t(n,(...s)=>s.reduce((o,l,c)=>(o[r[c]]=l,o),{}))},{withTypes:()=>T2}),sl={},ol={},ll={},Sh;function I2(){return Sh||(Sh=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="symbol"?1:n===null?2:n===void 0?3:n!==n?4:0}const r=(n,a,s)=>{if(n!==a){const o=t(n),l=t(a);if(o===l&&o===0){if(n<a)return s==="desc"?1:-1;if(n>a)return s==="desc"?-1:1}return s==="desc"?l-o:o-l}return 0};e.compareValues=r})(ll)),ll}var cl={},ul={},kh;function Ug(){return kh||(kh=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="symbol"||r instanceof Symbol}e.isSymbol=t})(ul)),ul}var Ph;function M2(){return Ph||(Ph=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Ug(),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function a(s,o){return Array.isArray(s)?!1:typeof s=="number"||typeof s=="boolean"||s==null||t.isSymbol(s)?!0:typeof s=="string"&&(n.test(s)||!r.test(s))||o!=null&&Object.hasOwn(o,s)}e.isKey=a})(cl)),cl}var Oh;function E2(){return Oh||(Oh=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=I2(),r=M2(),n=vu();function a(s,o,l,c){if(s==null)return[];l=c?void 0:l,Array.isArray(s)||(s=Object.values(s)),Array.isArray(o)||(o=o==null?[null]:[o]),o.length===0&&(o=[null]),Array.isArray(l)||(l=l==null?[]:[l]),l=l.map(m=>String(m));const d=(m,b)=>{let g=m;for(let p=0;p<b.length&&g!=null;++p)g=g[b[p]];return g},u=(m,b)=>b==null||m==null?b:typeof m=="object"&&"key"in m?Object.hasOwn(b,m.key)?b[m.key]:d(b,m.path):typeof m=="function"?m(b):Array.isArray(m)?d(b,m):typeof b=="object"?b[m]:b,f=o.map(m=>(Array.isArray(m)&&m.length===1&&(m=m[0]),m==null||typeof m=="function"||Array.isArray(m)||r.isKey(m)?m:{key:m,path:n.toPath(m)}));return s.map(m=>({original:m,criteria:f.map(b=>u(b,m))})).slice().sort((m,b)=>{for(let g=0;g<f.length;g++){const p=t.compareValues(m.criteria[g],b.criteria[g],l[g]);if(p!==0)return p}return 0}).map(m=>m.original)}e.orderBy=a})(ol)),ol}var dl={},Ch;function _2(){return Ch||(Ch=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n=1){const a=[],s=Math.floor(n),o=(l,c)=>{for(let d=0;d<l.length;d++){const u=l[d];Array.isArray(u)&&c<s?o(u,c+1):a.push(u)}};return o(r,0),a}e.flatten=t})(dl)),dl}var fl={},Ah;function zg(){return Ah||(Ah=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Fg(),r=Du(),n=_g(),a=Tu();function s(o,l,c){return n.isObject(c)&&(typeof l=="number"&&r.isArrayLike(c)&&t.isIndex(l)&&l<c.length||typeof l=="string"&&l in c)?a.eq(c[l],o):!1}e.isIterateeCall=s})(fl)),fl}var Dh;function R2(){return Dh||(Dh=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=E2(),r=_2(),n=zg();function a(s,...o){const l=o.length;return l>1&&n.isIterateeCall(s,o[0],o[1])?o=[]:l>2&&n.isIterateeCall(o[0],o[1],o[2])&&(o=[o[0]]),t.orderBy(s,r.flatten(o),["asc"])}e.sortBy=a})(sl)),sl}var hl,Th;function $2(){return Th||(Th=1,hl=R2().sortBy),hl}var L2=$2();const Ds=br(L2);var Vg=e=>e.legend.settings,F2=e=>e.legend.size,B2=e=>e.legend.payload,q2=z([B2,Vg],(e,t)=>{var{itemSorter:r}=t,n=e.flat(1);return r?Ds(n,r):n});function U2(){return de(q2)}var oi=1;function Wg(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[t,r]=x.useState({height:0,left:0,top:0,width:0}),n=x.useCallback(a=>{if(a!=null){var s=a.getBoundingClientRect(),o={height:s.height,left:s.left,top:s.top,width:s.width};(Math.abs(o.height-t.height)>oi||Math.abs(o.left-t.left)>oi||Math.abs(o.top-t.top)>oi||Math.abs(o.width-t.width)>oi)&&r({height:o.height,left:o.left,top:o.top,width:o.width})}},[t.width,t.height,t.top,t.left,...e]);return[t,n]}function at(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var z2=typeof Symbol=="function"&&Symbol.observable||"@@observable",Ih=z2,ml=()=>Math.random().toString(36).substring(7).split("").join("."),V2={INIT:`@@redux/INIT${ml()}`,REPLACE:`@@redux/REPLACE${ml()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${ml()}`},Ei=V2;function Ru(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function Hg(e,t,r){if(typeof e!="function")throw new Error(at(2));if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(at(0));if(typeof t=="function"&&typeof r>"u"&&(r=t,t=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(at(1));return r(Hg)(e,t)}let n=e,a=t,s=new Map,o=s,l=0,c=!1;function d(){o===s&&(o=new Map,s.forEach((p,v)=>{o.set(v,p)}))}function u(){if(c)throw new Error(at(3));return a}function f(p){if(typeof p!="function")throw new Error(at(4));if(c)throw new Error(at(5));let v=!0;d();const w=l++;return o.set(w,p),function(){if(v){if(c)throw new Error(at(6));v=!1,d(),o.delete(w),s=null}}}function h(p){if(!Ru(p))throw new Error(at(7));if(typeof p.type>"u")throw new Error(at(8));if(typeof p.type!="string")throw new Error(at(17));if(c)throw new Error(at(9));try{c=!0,a=n(a,p)}finally{c=!1}return(s=o).forEach(w=>{w()}),p}function m(p){if(typeof p!="function")throw new Error(at(10));n=p,h({type:Ei.REPLACE})}function b(){const p=f;return{subscribe(v){if(typeof v!="object"||v===null)throw new Error(at(11));function w(){const S=v;S.next&&S.next(u())}return w(),{unsubscribe:p(w)}},[Ih](){return this}}}return h({type:Ei.INIT}),{dispatch:h,subscribe:f,getState:u,replaceReducer:m,[Ih]:b}}function W2(e){Object.keys(e).forEach(t=>{const r=e[t];if(typeof r(void 0,{type:Ei.INIT})>"u")throw new Error(at(12));if(typeof r(void 0,{type:Ei.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(at(13))})}function Kg(e){const t=Object.keys(e),r={};for(let s=0;s<t.length;s++){const o=t[s];typeof e[o]=="function"&&(r[o]=e[o])}const n=Object.keys(r);let a;try{W2(r)}catch(s){a=s}return function(o={},l){if(a)throw a;let c=!1;const d={};for(let u=0;u<n.length;u++){const f=n[u],h=r[f],m=o[f],b=h(m,l);if(typeof b>"u")throw l&&l.type,new Error(at(14));d[f]=b,c=c||b!==m}return c=c||n.length!==Object.keys(o).length,c?d:o}}function _i(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,r)=>(...n)=>t(r(...n)))}function H2(...e){return t=>(r,n)=>{const a=t(r,n);let s=()=>{throw new Error(at(15))};const o={getState:a.getState,dispatch:(c,...d)=>s(c,...d)},l=e.map(c=>c(o));return s=_i(...l)(a.dispatch),{...a,dispatch:s}}}function Yg(e){return Ru(e)&&"type"in e&&typeof e.type=="string"}var Gg=Symbol.for("immer-nothing"),Mh=Symbol.for("immer-draftable"),Ct=Symbol.for("immer-state");function Wt(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Rn=Object.getPrototypeOf;function dn(e){return!!e&&!!e[Ct]}function mr(e){return e?Qg(e)||Array.isArray(e)||!!e[Mh]||!!e.constructor?.[Mh]||La(e)||Is(e):!1}var K2=Object.prototype.constructor.toString();function Qg(e){if(!e||typeof e!="object")return!1;const t=Rn(e);if(t===null)return!0;const r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return r===Object?!0:typeof r=="function"&&Function.toString.call(r)===K2}function Ri(e,t){Ts(e)===0?Reflect.ownKeys(e).forEach(r=>{t(r,e[r],e)}):e.forEach((r,n)=>t(n,r,e))}function Ts(e){const t=e[Ct];return t?t.type_:Array.isArray(e)?1:La(e)?2:Is(e)?3:0}function vc(e,t){return Ts(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function Xg(e,t,r){const n=Ts(e);n===2?e.set(t,r):n===3?e.add(r):e[t]=r}function Y2(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function La(e){return e instanceof Map}function Is(e){return e instanceof Set}function Qr(e){return e.copy_||e.base_}function bc(e,t){if(La(e))return new Map(e);if(Is(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const r=Qg(e);if(t===!0||t==="class_only"&&!r){const n=Object.getOwnPropertyDescriptors(e);delete n[Ct];let a=Reflect.ownKeys(n);for(let s=0;s<a.length;s++){const o=a[s],l=n[o];l.writable===!1&&(l.writable=!0,l.configurable=!0),(l.get||l.set)&&(n[o]={configurable:!0,writable:!0,enumerable:l.enumerable,value:e[o]})}return Object.create(Rn(e),n)}else{const n=Rn(e);if(n!==null&&r)return{...e};const a=Object.create(n);return Object.assign(a,e)}}function $u(e,t=!1){return Ms(e)||dn(e)||!mr(e)||(Ts(e)>1&&Object.defineProperties(e,{set:{value:li},add:{value:li},clear:{value:li},delete:{value:li}}),Object.freeze(e),t&&Object.values(e).forEach(r=>$u(r,!0))),e}function li(){Wt(2)}function Ms(e){return Object.isFrozen(e)}var G2={};function fn(e){const t=G2[e];return t||Wt(0,e),t}var ka;function Zg(){return ka}function Q2(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function Eh(e,t){t&&(fn("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function yc(e){wc(e),e.drafts_.forEach(X2),e.drafts_=null}function wc(e){e===ka&&(ka=e.parent_)}function _h(e){return ka=Q2(ka,e)}function X2(e){const t=e[Ct];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function Rh(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];return e!==void 0&&e!==r?(r[Ct].modified_&&(yc(t),Wt(4)),mr(e)&&(e=$i(t,e),t.parent_||Li(t,e)),t.patches_&&fn("Patches").generateReplacementPatches_(r[Ct].base_,e,t.patches_,t.inversePatches_)):e=$i(t,r,[]),yc(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==Gg?e:void 0}function $i(e,t,r){if(Ms(t))return t;const n=t[Ct];if(!n)return Ri(t,(a,s)=>$h(e,n,t,a,s,r)),t;if(n.scope_!==e)return t;if(!n.modified_)return Li(e,n.base_,!0),n.base_;if(!n.finalized_){n.finalized_=!0,n.scope_.unfinalizedDrafts_--;const a=n.copy_;let s=a,o=!1;n.type_===3&&(s=new Set(a),a.clear(),o=!0),Ri(s,(l,c)=>$h(e,n,a,l,c,r,o)),Li(e,a,!1),r&&e.patches_&&fn("Patches").generatePatches_(n,r,e.patches_,e.inversePatches_)}return n.copy_}function $h(e,t,r,n,a,s,o){if(dn(a)){const l=s&&t&&t.type_!==3&&!vc(t.assigned_,n)?s.concat(n):void 0,c=$i(e,a,l);if(Xg(r,n,c),dn(c))e.canAutoFreeze_=!1;else return}else o&&r.add(a);if(mr(a)&&!Ms(a)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;$i(e,a),(!t||!t.scope_.parent_)&&typeof n!="symbol"&&(La(r)?r.has(n):Object.prototype.propertyIsEnumerable.call(r,n))&&Li(e,a)}}function Li(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&$u(t,r)}function Z2(e,t){const r=Array.isArray(e),n={type_:r?1:0,scope_:t?t.scope_:Zg(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let a=n,s=Lu;r&&(a=[n],s=Pa);const{revoke:o,proxy:l}=Proxy.revocable(a,s);return n.draft_=l,n.revoke_=o,l}var Lu={get(e,t){if(t===Ct)return e;const r=Qr(e);if(!vc(r,t))return J2(e,r,t);const n=r[t];return e.finalized_||!mr(n)?n:n===pl(e.base_,t)?(gl(e),e.copy_[t]=Nc(n,e)):n},has(e,t){return t in Qr(e)},ownKeys(e){return Reflect.ownKeys(Qr(e))},set(e,t,r){const n=Jg(Qr(e),t);if(n?.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){const a=pl(Qr(e),t),s=a?.[Ct];if(s&&s.base_===r)return e.copy_[t]=r,e.assigned_[t]=!1,!0;if(Y2(r,a)&&(r!==void 0||vc(e.base_,t)))return!0;gl(e),jc(e)}return e.copy_[t]===r&&(r!==void 0||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_[t]=!0),!0},deleteProperty(e,t){return pl(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,gl(e),jc(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const r=Qr(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:n.enumerable,value:r[t]}},defineProperty(){Wt(11)},getPrototypeOf(e){return Rn(e.base_)},setPrototypeOf(){Wt(12)}},Pa={};Ri(Lu,(e,t)=>{Pa[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});Pa.deleteProperty=function(e,t){return Pa.set.call(this,e,t,void 0)};Pa.set=function(e,t,r){return Lu.set.call(this,e[0],t,r,e[0])};function pl(e,t){const r=e[Ct];return(r?Qr(r):e)[t]}function J2(e,t,r){const n=Jg(t,r);return n?"value"in n?n.value:n.get?.call(e.draft_):void 0}function Jg(e,t){if(!(t in e))return;let r=Rn(e);for(;r;){const n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=Rn(r)}}function jc(e){e.modified_||(e.modified_=!0,e.parent_&&jc(e.parent_))}function gl(e){e.copy_||(e.copy_=bc(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var eS=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,r,n)=>{if(typeof t=="function"&&typeof r!="function"){const s=r;r=t;const o=this;return function(c=s,...d){return o.produce(c,u=>r.call(this,u,...d))}}typeof r!="function"&&Wt(6),n!==void 0&&typeof n!="function"&&Wt(7);let a;if(mr(t)){const s=_h(this),o=Nc(t,void 0);let l=!0;try{a=r(o),l=!1}finally{l?yc(s):wc(s)}return Eh(s,n),Rh(a,s)}else if(!t||typeof t!="object"){if(a=r(t),a===void 0&&(a=t),a===Gg&&(a=void 0),this.autoFreeze_&&$u(a,!0),n){const s=[],o=[];fn("Patches").generateReplacementPatches_(t,a,s,o),n(s,o)}return a}else Wt(1,t)},this.produceWithPatches=(t,r)=>{if(typeof t=="function")return(o,...l)=>this.produceWithPatches(o,c=>t(c,...l));let n,a;return[this.produce(t,r,(o,l)=>{n=o,a=l}),n,a]},typeof e?.autoFreeze=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof e?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){mr(e)||Wt(8),dn(e)&&(e=fr(e));const t=_h(this),r=Nc(e,void 0);return r[Ct].isManual_=!0,wc(t),r}finishDraft(e,t){const r=e&&e[Ct];(!r||!r.isManual_)&&Wt(9);const{scope_:n}=r;return Eh(n,t),Rh(void 0,n)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){const a=t[r];if(a.path.length===0&&a.op==="replace"){e=a.value;break}}r>-1&&(t=t.slice(r+1));const n=fn("Patches").applyPatches_;return dn(e)?n(e,t):this.produce(e,a=>n(a,t))}};function Nc(e,t){const r=La(e)?fn("MapSet").proxyMap_(e,t):Is(e)?fn("MapSet").proxySet_(e,t):Z2(e,t);return(t?t.scope_:Zg()).drafts_.push(r),r}function fr(e){return dn(e)||Wt(10,e),ex(e)}function ex(e){if(!mr(e)||Ms(e))return e;const t=e[Ct];let r;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=bc(e,t.scope_.immer_.useStrictShallowCopy_)}else r=bc(e,!0);return Ri(r,(n,a)=>{Xg(r,n,ex(a))}),t&&(t.finalized_=!1),r}var tS=new eS,tx=tS.produce;function rx(e){return({dispatch:r,getState:n})=>a=>s=>typeof s=="function"?s(r,n,e):a(s)}var rS=rx(),nS=rx,aS=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?_i:_i.apply(null,arguments)};function Ft(e,t){function r(...n){if(t){let a=t(...n);if(!a)throw new Error(Pt(0));return{type:e,payload:a.payload,..."meta"in a&&{meta:a.meta},..."error"in a&&{error:a.error}}}return{type:e,payload:n[0]}}return r.toString=()=>`${e}`,r.type=e,r.match=n=>Yg(n)&&n.type===e,r}var nx=class xa extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,xa.prototype)}static get[Symbol.species](){return xa}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new xa(...t[0].concat(this)):new xa(...t.concat(this))}};function Lh(e){return mr(e)?tx(e,()=>{}):e}function ci(e,t,r){return e.has(t)?e.get(t):e.set(t,r(t)).get(t)}function iS(e){return typeof e=="boolean"}var sS=()=>function(t){const{thunk:r=!0,immutableCheck:n=!0,serializableCheck:a=!0,actionCreatorCheck:s=!0}=t??{};let o=new nx;return r&&(iS(r)?o.push(rS):o.push(nS(r.extraArgument))),o},oS="RTK_autoBatch",Fh=e=>t=>{setTimeout(t,e)},lS=(e={type:"raf"})=>t=>(...r)=>{const n=t(...r);let a=!0,s=!1,o=!1;const l=new Set,c=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:Fh(10):e.type==="callback"?e.queueNotification:Fh(e.timeout),d=()=>{o=!1,s&&(s=!1,l.forEach(u=>u()))};return Object.assign({},n,{subscribe(u){const f=()=>a&&u(),h=n.subscribe(f);return l.add(u),()=>{h(),l.delete(u)}},dispatch(u){try{return a=!u?.meta?.[oS],s=!a,s&&(o||(o=!0,c(d))),n.dispatch(u)}finally{a=!0}}})},cS=e=>function(r){const{autoBatch:n=!0}=r??{};let a=new nx(e);return n&&a.push(lS(typeof n=="object"?n:void 0)),a};function uS(e){const t=sS(),{reducer:r=void 0,middleware:n,devTools:a=!0,preloadedState:s=void 0,enhancers:o=void 0}=e||{};let l;if(typeof r=="function")l=r;else if(Ru(r))l=Kg(r);else throw new Error(Pt(1));let c;typeof n=="function"?c=n(t):c=t();let d=_i;a&&(d=aS({trace:!1,...typeof a=="object"&&a}));const u=H2(...c),f=cS(u);let h=typeof o=="function"?o(f):f();const m=d(...h);return Hg(l,s,m)}function ax(e){const t={},r=[];let n;const a={addCase(s,o){const l=typeof s=="string"?s:s.type;if(!l)throw new Error(Pt(28));if(l in t)throw new Error(Pt(29));return t[l]=o,a},addAsyncThunk(s,o){return o.pending&&(t[s.pending.type]=o.pending),o.rejected&&(t[s.rejected.type]=o.rejected),o.fulfilled&&(t[s.fulfilled.type]=o.fulfilled),o.settled&&r.push({matcher:s.settled,reducer:o.settled}),a},addMatcher(s,o){return r.push({matcher:s,reducer:o}),a},addDefaultCase(s){return n=s,a}};return e(a),[t,r,n]}function dS(e){return typeof e=="function"}function fS(e,t){let[r,n,a]=ax(t),s;if(dS(e))s=()=>Lh(e());else{const l=Lh(e);s=()=>l}function o(l=s(),c){let d=[r[c.type],...n.filter(({matcher:u})=>u(c)).map(({reducer:u})=>u)];return d.filter(u=>!!u).length===0&&(d=[a]),d.reduce((u,f)=>{if(f)if(dn(u)){const m=f(u,c);return m===void 0?u:m}else{if(mr(u))return tx(u,h=>f(h,c));{const h=f(u,c);if(h===void 0){if(u===null)return u;throw Error("A case reducer on a non-draftable value must not return undefined")}return h}}return u},l)}return o.getInitialState=s,o}var hS="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",mS=(e=21)=>{let t="",r=e;for(;r--;)t+=hS[Math.random()*64|0];return t},pS=Symbol.for("rtk-slice-createasyncthunk");function gS(e,t){return`${e}/${t}`}function xS({creators:e}={}){const t=e?.asyncThunk?.[pS];return function(n){const{name:a,reducerPath:s=a}=n;if(!a)throw new Error(Pt(11));const o=(typeof n.reducers=="function"?n.reducers(bS()):n.reducers)||{},l=Object.keys(o),c={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},d={addCase(y,S){const j=typeof y=="string"?y:y.type;if(!j)throw new Error(Pt(12));if(j in c.sliceCaseReducersByType)throw new Error(Pt(13));return c.sliceCaseReducersByType[j]=S,d},addMatcher(y,S){return c.sliceMatchers.push({matcher:y,reducer:S}),d},exposeAction(y,S){return c.actionCreators[y]=S,d},exposeCaseReducer(y,S){return c.sliceCaseReducersByName[y]=S,d}};l.forEach(y=>{const S=o[y],j={reducerName:y,type:gS(a,y),createNotation:typeof n.reducers=="function"};wS(S)?NS(j,S,d,t):yS(j,S,d)});function u(){const[y={},S=[],j=void 0]=typeof n.extraReducers=="function"?ax(n.extraReducers):[n.extraReducers],k={...y,...c.sliceCaseReducersByType};return fS(n.initialState,N=>{for(let P in k)N.addCase(P,k[P]);for(let P of c.sliceMatchers)N.addMatcher(P.matcher,P.reducer);for(let P of S)N.addMatcher(P.matcher,P.reducer);j&&N.addDefaultCase(j)})}const f=y=>y,h=new Map,m=new WeakMap;let b;function g(y,S){return b||(b=u()),b(y,S)}function p(){return b||(b=u()),b.getInitialState()}function v(y,S=!1){function j(N){let P=N[y];return typeof P>"u"&&S&&(P=ci(m,j,p)),P}function k(N=f){const P=ci(h,S,()=>new WeakMap);return ci(P,N,()=>{const D={};for(const[C,O]of Object.entries(n.selectors??{}))D[C]=vS(O,N,()=>ci(m,N,p),S);return D})}return{reducerPath:y,getSelectors:k,get selectors(){return k(j)},selectSlice:j}}const w={name:a,reducer:g,actions:c.actionCreators,caseReducers:c.sliceCaseReducersByName,getInitialState:p,...v(s),injectInto(y,{reducerPath:S,...j}={}){const k=S??s;return y.inject({reducerPath:k,reducer:g},j),{...w,...v(k,!0)}}};return w}}function vS(e,t,r,n){function a(s,...o){let l=t(s);return typeof l>"u"&&n&&(l=r()),e(l,...o)}return a.unwrapped=e,a}var Dt=xS();function bS(){function e(t,r){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...r}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...r){return t(...r)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,r){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:r}},asyncThunk:e}}function yS({type:e,reducerName:t,createNotation:r},n,a){let s,o;if("reducer"in n){if(r&&!jS(n))throw new Error(Pt(17));s=n.reducer,o=n.prepare}else s=n;a.addCase(e,s).exposeCaseReducer(t,s).exposeAction(t,o?Ft(e,o):Ft(e))}function wS(e){return e._reducerDefinitionType==="asyncThunk"}function jS(e){return e._reducerDefinitionType==="reducerWithPrepare"}function NS({type:e,reducerName:t},r,n,a){if(!a)throw new Error(Pt(18));const{payloadCreator:s,fulfilled:o,pending:l,rejected:c,settled:d,options:u}=r,f=a(e,s,u);n.exposeAction(t,f),o&&n.addCase(f.fulfilled,o),l&&n.addCase(f.pending,l),c&&n.addCase(f.rejected,c),d&&n.addMatcher(f.settled,d),n.exposeCaseReducer(t,{fulfilled:o||ui,pending:l||ui,rejected:c||ui,settled:d||ui})}function ui(){}var SS="task",ix="listener",sx="completed",Fu="cancelled",kS=`task-${Fu}`,PS=`task-${sx}`,Sc=`${ix}-${Fu}`,OS=`${ix}-${sx}`,Es=class{constructor(e){this.code=e,this.message=`${SS} ${Fu} (reason: ${e})`}name="TaskAbortError";message},Bu=(e,t)=>{if(typeof e!="function")throw new TypeError(Pt(32))},Fi=()=>{},ox=(e,t=Fi)=>(e.catch(t),e),lx=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),sn=(e,t)=>{const r=e.signal;r.aborted||("reason"in r||Object.defineProperty(r,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},on=e=>{if(e.aborted){const{reason:t}=e;throw new Es(t)}};function cx(e,t){let r=Fi;return new Promise((n,a)=>{const s=()=>a(new Es(e.reason));if(e.aborted){s();return}r=lx(e,s),t.finally(()=>r()).then(n,a)}).finally(()=>{r=Fi})}var CS=async(e,t)=>{try{return await Promise.resolve(),{status:"ok",value:await e()}}catch(r){return{status:r instanceof Es?"cancelled":"rejected",error:r}}finally{t?.()}},Bi=e=>t=>ox(cx(e,t).then(r=>(on(e),r))),ux=e=>{const t=Bi(e);return r=>t(new Promise(n=>setTimeout(n,r)))},{assign:In}=Object,Bh={},_s="listenerMiddleware",AS=(e,t)=>{const r=n=>lx(e,()=>sn(n,e.reason));return(n,a)=>{Bu(n);const s=new AbortController;r(s);const o=CS(async()=>{on(e),on(s.signal);const l=await n({pause:Bi(s.signal),delay:ux(s.signal),signal:s.signal});return on(s.signal),l},()=>sn(s,PS));return a?.autoJoin&&t.push(o.catch(Fi)),{result:Bi(e)(o),cancel(){sn(s,kS)}}}},DS=(e,t)=>{const r=async(n,a)=>{on(t);let s=()=>{};const l=[new Promise((c,d)=>{let u=e({predicate:n,effect:(f,h)=>{h.unsubscribe(),c([f,h.getState(),h.getOriginalState()])}});s=()=>{u(),d()}})];a!=null&&l.push(new Promise(c=>setTimeout(c,a,null)));try{const c=await cx(t,Promise.race(l));return on(t),c}finally{s()}};return(n,a)=>ox(r(n,a))},dx=e=>{let{type:t,actionCreator:r,matcher:n,predicate:a,effect:s}=e;if(t)a=Ft(t).match;else if(r)t=r.type,a=r.match;else if(n)a=n;else if(!a)throw new Error(Pt(21));return Bu(s),{predicate:a,type:t,effect:s}},fx=In(e=>{const{type:t,predicate:r,effect:n}=dx(e);return{id:mS(),effect:n,type:t,predicate:r,pending:new Set,unsubscribe:()=>{throw new Error(Pt(22))}}},{withTypes:()=>fx}),qh=(e,t)=>{const{type:r,effect:n,predicate:a}=dx(t);return Array.from(e.values()).find(s=>(typeof r=="string"?s.type===r:s.predicate===a)&&s.effect===n)},kc=e=>{e.pending.forEach(t=>{sn(t,Sc)})},TS=e=>()=>{e.forEach(kc),e.clear()},Uh=(e,t,r)=>{try{e(t,r)}catch(n){setTimeout(()=>{throw n},0)}},hx=In(Ft(`${_s}/add`),{withTypes:()=>hx}),IS=Ft(`${_s}/removeAll`),mx=In(Ft(`${_s}/remove`),{withTypes:()=>mx}),MS=(...e)=>{console.error(`${_s}/error`,...e)},Fa=(e={})=>{const t=new Map,{extra:r,onError:n=MS}=e;Bu(n);const a=u=>(u.unsubscribe=()=>t.delete(u.id),t.set(u.id,u),f=>{u.unsubscribe(),f?.cancelActive&&kc(u)}),s=u=>{const f=qh(t,u)??fx(u);return a(f)};In(s,{withTypes:()=>s});const o=u=>{const f=qh(t,u);return f&&(f.unsubscribe(),u.cancelActive&&kc(f)),!!f};In(o,{withTypes:()=>o});const l=async(u,f,h,m)=>{const b=new AbortController,g=DS(s,b.signal),p=[];try{u.pending.add(b),await Promise.resolve(u.effect(f,In({},h,{getOriginalState:m,condition:(v,w)=>g(v,w).then(Boolean),take:g,delay:ux(b.signal),pause:Bi(b.signal),extra:r,signal:b.signal,fork:AS(b.signal,p),unsubscribe:u.unsubscribe,subscribe:()=>{t.set(u.id,u)},cancelActiveListeners:()=>{u.pending.forEach((v,w,y)=>{v!==b&&(sn(v,Sc),y.delete(v))})},cancel:()=>{sn(b,Sc),u.pending.delete(b)},throwIfCancelled:()=>{on(b.signal)}})))}catch(v){v instanceof Es||Uh(n,v,{raisedBy:"effect"})}finally{await Promise.all(p),sn(b,OS),u.pending.delete(b)}},c=TS(t);return{middleware:u=>f=>h=>{if(!Yg(h))return f(h);if(hx.match(h))return s(h.payload);if(IS.match(h)){c();return}if(mx.match(h))return o(h.payload);let m=u.getState();const b=()=>{if(m===Bh)throw new Error(Pt(23));return m};let g;try{if(g=f(h),t.size>0){const p=u.getState(),v=Array.from(t.values());for(const w of v){let y=!1;try{y=w.predicate(h,p,m)}catch(S){y=!1,Uh(n,S,{raisedBy:"predicate"})}y&&l(w,h,u,b)}}}finally{m=Bh}return g},startListening:s,stopListening:o,clearListeners:c}};function Pt(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var ES={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},px=Dt({name:"chartLayout",initialState:ES,reducers:{setLayout(e,t){e.layoutType=t.payload},setChartSize(e,t){e.width=t.payload.width,e.height=t.payload.height},setMargin(e,t){e.margin.top=t.payload.top,e.margin.right=t.payload.right,e.margin.bottom=t.payload.bottom,e.margin.left=t.payload.left},setScale(e,t){e.scale=t.payload}}}),{setMargin:_S,setLayout:RS,setChartSize:$S,setScale:LS}=px.actions,FS=px.reducer;function zh(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Vh(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?zh(Object(r),!0).forEach(function(n){BS(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):zh(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function BS(e,t,r){return(t=qS(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function qS(e){var t=US(e,"string");return typeof t=="symbol"?t:t+""}function US(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var qi=Math.PI/180,zS=e=>e*180/Math.PI,st=(e,t,r,n)=>({x:e+Math.cos(-qi*n)*r,y:t+Math.sin(-qi*n)*r}),VS=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(n.left||0)-(n.right||0)),Math.abs(r-(n.top||0)-(n.bottom||0)))/2},WS=(e,t)=>{var{x:r,y:n}=e,{x:a,y:s}=t;return Math.sqrt((r-a)**2+(n-s)**2)},HS=(e,t)=>{var{x:r,y:n}=e,{cx:a,cy:s}=t,o=WS({x:r,y:n},{x:a,y:s});if(o<=0)return{radius:o,angle:0};var l=(r-a)/o,c=Math.acos(l);return n>s&&(c=2*Math.PI-c),{radius:o,angle:zS(c),angleInRadian:c}},KS=e=>{var{startAngle:t,endAngle:r}=e,n=Math.floor(t/360),a=Math.floor(r/360),s=Math.min(n,a);return{startAngle:t-s*360,endAngle:r-s*360}},YS=(e,t)=>{var{startAngle:r,endAngle:n}=t,a=Math.floor(r/360),s=Math.floor(n/360),o=Math.min(a,s);return e+o*360},GS=(e,t)=>{var{x:r,y:n}=e,{radius:a,angle:s}=HS({x:r,y:n},t),{innerRadius:o,outerRadius:l}=t;if(a<o||a>l||a===0)return null;var{startAngle:c,endAngle:d}=KS(t),u=s,f;if(c<=d){for(;u>d;)u-=360;for(;u<c;)u+=360;f=u>=c&&u<=d}else{for(;u>c;)u-=360;for(;u<d;)u+=360;f=u>=d&&u<=c}return f?Vh(Vh({},t),{},{radius:a,angle:YS(u,t)}):null};function gx(e,t,r){return Array.isArray(e)&&e&&t+r!==0?e.slice(t,r+1):e}function Wh(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Rt(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Wh(Object(r),!0).forEach(function(n){QS(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Wh(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function QS(e,t,r){return(t=XS(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function XS(e){var t=ZS(e,"string");return typeof t=="symbol"?t:t+""}function ZS(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Je(e,t,r){return Me(e)||Me(t)?r:er(t)?un(e,t,r):typeof t=="function"?t(e):r}var JS=(e,t,r,n,a)=>{var s,o=-1,l=(s=t?.length)!==null&&s!==void 0?s:0;if(l<=1||e==null)return 0;if(n==="angleAxis"&&a!=null&&Math.abs(Math.abs(a[1]-a[0])-360)<=1e-6)for(var c=0;c<l;c++){var d=c>0?r[c-1].coordinate:r[l-1].coordinate,u=r[c].coordinate,f=c>=l-1?r[0].coordinate:r[c+1].coordinate,h=void 0;if(xt(u-d)!==xt(f-u)){var m=[];if(xt(f-u)===xt(a[1]-a[0])){h=f;var b=u+a[1]-a[0];m[0]=Math.min(b,(b+d)/2),m[1]=Math.max(b,(b+d)/2)}else{h=d;var g=f+a[1]-a[0];m[0]=Math.min(u,(g+u)/2),m[1]=Math.max(u,(g+u)/2)}var p=[Math.min(u,(h+u)/2),Math.max(u,(h+u)/2)];if(e>p[0]&&e<=p[1]||e>=m[0]&&e<=m[1]){({index:o}=r[c]);break}}else{var v=Math.min(d,f),w=Math.max(d,f);if(e>(v+u)/2&&e<=(w+u)/2){({index:o}=r[c]);break}}}else if(t){for(var y=0;y<l;y++)if(y===0&&e<=(t[y].coordinate+t[y+1].coordinate)/2||y>0&&y<l-1&&e>(t[y].coordinate+t[y-1].coordinate)/2&&e<=(t[y].coordinate+t[y+1].coordinate)/2||y===l-1&&e>(t[y].coordinate+t[y-1].coordinate)/2){({index:o}=t[y]);break}}return o},ek=(e,t,r)=>{if(t&&r){var{width:n,height:a}=r,{align:s,verticalAlign:o,layout:l}=t;if((l==="vertical"||l==="horizontal"&&o==="middle")&&s!=="center"&&se(e[s]))return Rt(Rt({},e),{},{[s]:e[s]+(n||0)});if((l==="horizontal"||l==="vertical"&&s==="center")&&o!=="middle"&&se(e[o]))return Rt(Rt({},e),{},{[o]:e[o]+(a||0)})}return e},Br=(e,t)=>e==="horizontal"&&t==="xAxis"||e==="vertical"&&t==="yAxis"||e==="centric"&&t==="angleAxis"||e==="radial"&&t==="radiusAxis",xx=(e,t,r,n)=>{if(n)return e.map(l=>l.coordinate);var a,s,o=e.map(l=>(l.coordinate===t&&(a=!0),l.coordinate===r&&(s=!0),l.coordinate));return a||o.push(t),s||o.push(r),o},vx=(e,t,r)=>{if(!e)return null;var{duplicateDomain:n,type:a,range:s,scale:o,realScaleType:l,isCategorical:c,categoricalDomain:d,tickCount:u,ticks:f,niceTicks:h,axisType:m}=e;if(!o)return null;var b=l==="scaleBand"&&o.bandwidth?o.bandwidth()/2:2,g=a==="category"&&o.bandwidth?o.bandwidth()/b:0;if(g=m==="angleAxis"&&s&&s.length>=2?xt(s[0]-s[1])*2*g:g,f||h){var p=(f||h||[]).map((v,w)=>{var y=n?n.indexOf(v):v;return{coordinate:o(y)+g,value:v,offset:g,index:w}});return p.filter(v=>!Ot(v.coordinate))}return c&&d?d.map((v,w)=>({coordinate:o(v)+g,value:v,index:w,offset:g})):o.ticks&&u!=null?o.ticks(u).map((v,w)=>({coordinate:o(v)+g,value:v,offset:g,index:w})):o.domain().map((v,w)=>({coordinate:o(v)+g,value:n?n[v]:v,index:w,offset:g}))},Hh=1e-4,tk=e=>{var t=e.domain();if(!(!t||t.length<=2)){var r=t.length,n=e.range(),a=Math.min(n[0],n[1])-Hh,s=Math.max(n[0],n[1])+Hh,o=e(t[0]),l=e(t[r-1]);(o<a||o>s||l<a||l>s)&&e.domain([t[0],t[r-1]])}},rk=(e,t)=>{if(!t||t.length!==2||!se(t[0])||!se(t[1]))return e;var r=Math.min(t[0],t[1]),n=Math.max(t[0],t[1]),a=[e[0],e[1]];return(!se(e[0])||e[0]<r)&&(a[0]=r),(!se(e[1])||e[1]>n)&&(a[1]=n),a[0]>n&&(a[0]=n),a[1]<r&&(a[1]=r),a},nk=e=>{var t=e.length;if(!(t<=0))for(var r=0,n=e[0].length;r<n;++r)for(var a=0,s=0,o=0;o<t;++o){var l=Ot(e[o][r][1])?e[o][r][0]:e[o][r][1];l>=0?(e[o][r][0]=a,e[o][r][1]=a+l,a=e[o][r][1]):(e[o][r][0]=s,e[o][r][1]=s+l,s=e[o][r][1])}},ak=e=>{var t=e.length;if(!(t<=0))for(var r=0,n=e[0].length;r<n;++r)for(var a=0,s=0;s<t;++s){var o=Ot(e[s][r][1])?e[s][r][0]:e[s][r][1];o>=0?(e[s][r][0]=a,e[s][r][1]=a+o,a=e[s][r][1]):(e[s][r][0]=0,e[s][r][1]=0)}},ik={sign:nk,expand:RN,none:_n,silhouette:$N,wiggle:LN,positive:ak},sk=(e,t,r)=>{var n=ik[r],a=_N().keys(t).value((s,o)=>+Je(s,o,0)).order(pc).offset(n);return a(e)};function ok(e){return e==null?void 0:String(e)}function Kh(e){var{axis:t,ticks:r,bandSize:n,entry:a,index:s,dataKey:o}=e;if(t.type==="category"){if(!t.allowDuplicatedCategory&&t.dataKey&&!Me(a[t.dataKey])){var l=fg(r,"value",a[t.dataKey]);if(l)return l.coordinate+n/2}return r[s]?r[s].coordinate+n/2:null}var c=Je(a,Me(o)?t.dataKey:o);return Me(c)?null:t.scale(c)}var Yh=e=>{var{axis:t,ticks:r,offset:n,bandSize:a,entry:s,index:o}=e;if(t.type==="category")return r[o]?r[o].coordinate+n:null;var l=Je(s,t.dataKey,t.scale.domain()[o]);return Me(l)?null:t.scale(l)-a/2+n},lk=e=>{var{numericAxis:t}=e,r=t.scale.domain();if(t.type==="number"){var n=Math.min(r[0],r[1]),a=Math.max(r[0],r[1]);return n<=0&&a>=0?0:a<0?a:n}return r[0]},ck=e=>{var t=e.flat(2).filter(se);return[Math.min(...t),Math.max(...t)]},uk=e=>[e[0]===1/0?0:e[0],e[1]===-1/0?0:e[1]],dk=(e,t,r)=>{if(e!=null)return uk(Object.keys(e).reduce((n,a)=>{var s=e[a],{stackedData:o}=s,l=o.reduce((c,d)=>{var u=gx(d,t,r),f=ck(u);return[Math.min(c[0],f[0]),Math.max(c[1],f[1])]},[1/0,-1/0]);return[Math.min(l[0],n[0]),Math.max(l[1],n[1])]},[1/0,-1/0]))},Gh=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Qh=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Oa=(e,t,r)=>{if(e&&e.scale&&e.scale.bandwidth){var n=e.scale.bandwidth();if(!r||n>0)return n}if(e&&t&&t.length>=2){for(var a=Ds(t,u=>u.coordinate),s=1/0,o=1,l=a.length;o<l;o++){var c=a[o],d=a[o-1];s=Math.min((c.coordinate||0)-(d.coordinate||0),s)}return s===1/0?0:s}return r?void 0:0};function Xh(e){var{tooltipEntrySettings:t,dataKey:r,payload:n,value:a,name:s}=e;return Rt(Rt({},t),{},{dataKey:r,payload:n,value:a,name:s})}function Rs(e,t){if(e)return String(e);if(typeof t=="string")return t}function fk(e,t,r,n,a){if(r==="horizontal"||r==="vertical"){var s=e>=a.left&&e<=a.left+a.width&&t>=a.top&&t<=a.top+a.height;return s?{x:e,y:t}:null}return n?GS({x:e,y:t},n):null}var hk=(e,t,r,n)=>{var a=t.find(d=>d&&d.index===r);if(a){if(e==="horizontal")return{x:a.coordinate,y:n.y};if(e==="vertical")return{x:n.x,y:a.coordinate};if(e==="centric"){var s=a.coordinate,{radius:o}=n;return Rt(Rt(Rt({},n),st(n.cx,n.cy,o,s)),{},{angle:s,radius:o})}var l=a.coordinate,{angle:c}=n;return Rt(Rt(Rt({},n),st(n.cx,n.cy,l,c)),{},{angle:c,radius:l})}return{x:0,y:0}},mk=(e,t)=>t==="horizontal"?e.x:t==="vertical"?e.y:t==="centric"?e.angle:e.radius,yr=e=>e.layout.width,wr=e=>e.layout.height,pk=e=>e.layout.scale,bx=e=>e.layout.margin,qu=z(e=>e.cartesianAxis.xAxis,e=>Object.values(e)),Uu=z(e=>e.cartesianAxis.yAxis,e=>Object.values(e)),gk="data-recharts-item-index",xk="data-recharts-item-data-key",$s=60;function Zh(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Cr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Zh(Object(r),!0).forEach(function(n){vk(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Zh(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function vk(e,t,r){return(t=bk(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function bk(e){var t=yk(e,"string");return typeof t=="symbol"?t:t+""}function yk(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var wk=e=>e.brush.height,et=z([yr,wr,bx,wk,qu,Uu,Vg,F2],(e,t,r,n,a,s,o,l)=>{var c=s.reduce((b,g)=>{var{orientation:p}=g;if(!g.mirror&&!g.hide){var v=typeof g.width=="number"?g.width:$s;return Cr(Cr({},b),{},{[p]:b[p]+v})}return b},{left:r.left||0,right:r.right||0}),d=a.reduce((b,g)=>{var{orientation:p}=g;return!g.mirror&&!g.hide?Cr(Cr({},b),{},{[p]:un(b,"".concat(p))+g.height}):b},{top:r.top||0,bottom:r.bottom||0}),u=Cr(Cr({},d),c),f=u.bottom;u.bottom+=n,u=ek(u,o,l);var h=e-u.left-u.right,m=t-u.top-u.bottom;return Cr(Cr({brushBottom:f},u),{},{width:Math.max(h,0),height:Math.max(m,0)})}),jk=z(et,e=>({x:e.left,y:e.top,width:e.width,height:e.height})),yx=z(yr,wr,(e,t)=>({x:0,y:0,width:e,height:t})),Nk=x.createContext(null),bt=()=>x.useContext(Nk)!=null,Ls=e=>e.brush,Fs=z([Ls,et,bx],(e,t,r)=>({height:e.height,x:se(e.x)?e.x:t.left,y:se(e.y)?e.y:t.top+t.height+t.brushBottom-(r?.bottom||0),width:se(e.width)?e.width:t.width})),zu=()=>{var e,t=bt(),r=de(jk),n=de(Fs),a=(e=de(Ls))===null||e===void 0?void 0:e.padding;return!t||!n||!a?r:{width:n.width-a.left-a.right,height:n.height-a.top-a.bottom,x:a.left,y:a.top}},Sk={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},wx=()=>{var e;return(e=de(et))!==null&&e!==void 0?e:Sk},Vu=()=>de(yr),Wu=()=>de(wr),kk={top:0,right:0,bottom:0,left:0},Pk=()=>{var e;return(e=de(t=>t.layout.margin))!==null&&e!==void 0?e:kk},Se=e=>e.layout.layoutType,Bs=()=>de(Se),Ok={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},jx=Dt({name:"legend",initialState:Ok,reducers:{setLegendSize(e,t){e.size.width=t.payload.width,e.size.height=t.payload.height},setLegendSettings(e,t){e.settings.align=t.payload.align,e.settings.layout=t.payload.layout,e.settings.verticalAlign=t.payload.verticalAlign,e.settings.itemSorter=t.payload.itemSorter},addLegendPayload(e,t){e.payload.push(t.payload)},removeLegendPayload(e,t){var r=fr(e).payload.indexOf(t.payload);r>-1&&e.payload.splice(r,1)}}}),{setLegendSize:Jh,setLegendSettings:Ck,addLegendPayload:Ak,removeLegendPayload:Dk}=jx.actions,Tk=jx.reducer,Ik=["contextPayload"];function Pc(){return Pc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Pc.apply(null,arguments)}function em(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function $n(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?em(Object(r),!0).forEach(function(n){Hu(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):em(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Hu(e,t,r){return(t=Mk(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Mk(e){var t=Ek(e,"string");return typeof t=="symbol"?t:t+""}function Ek(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function _k(e,t){if(e==null)return{};var r,n,a=Rk(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Rk(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function $k(e){return e.value}function Lk(e){var{contextPayload:t}=e,r=_k(e,Ik),n=Bg(t,e.payloadUniqBy,$k),a=$n($n({},r),{},{payload:n});return x.isValidElement(e.content)?x.cloneElement(e.content,a):typeof e.content=="function"?x.createElement(e.content,a):x.createElement(Au,a)}function Fk(e,t,r,n,a,s){var{layout:o,align:l,verticalAlign:c}=t,d,u;return(!e||(e.left===void 0||e.left===null)&&(e.right===void 0||e.right===null))&&(l==="center"&&o==="vertical"?d={left:((n||0)-s.width)/2}:d=l==="right"?{right:r&&r.right||0}:{left:r&&r.left||0}),(!e||(e.top===void 0||e.top===null)&&(e.bottom===void 0||e.bottom===null))&&(c==="middle"?u={top:((a||0)-s.height)/2}:u=c==="bottom"?{bottom:r&&r.bottom||0}:{top:r&&r.top||0}),$n($n({},d),u)}function Bk(e){var t=Ve();return x.useEffect(()=>{t(Ck(e))},[t,e]),null}function qk(e){var t=Ve();return x.useEffect(()=>(t(Jh(e)),()=>{t(Jh({width:0,height:0}))}),[t,e]),null}function Uk(e){var t=U2(),r=iN(),n=Pk(),{width:a,height:s,wrapperStyle:o,portal:l}=e,[c,d]=Wg([t]),u=Vu(),f=Wu(),h=u-(n.left||0)-(n.right||0),m=qs.getWidthOrHeight(e.layout,s,a,h),b=l?o:$n($n({position:"absolute",width:m?.width||a||"auto",height:m?.height||s||"auto"},Fk(o,e,n,u,f,c)),o),g=l??r;if(g==null)return null;var p=x.createElement("div",{className:"recharts-legend-wrapper",style:b,ref:d},x.createElement(Bk,{layout:e.layout,align:e.align,verticalAlign:e.verticalAlign,itemSorter:e.itemSorter}),x.createElement(qk,{width:c.width,height:c.height}),x.createElement(Lk,Pc({},e,m,{margin:n,chartWidth:u,chartHeight:f,contextPayload:t})));return Ss.createPortal(p,g)}class qs extends x.PureComponent{static getWidthOrHeight(t,r,n,a){return t==="vertical"&&se(r)?{height:r}:t==="horizontal"?{width:n||a}:null}render(){return x.createElement(Uk,this.props)}}Hu(qs,"displayName","Legend");Hu(qs,"defaultProps",{align:"center",iconSize:14,itemSorter:"value",layout:"horizontal",verticalAlign:"bottom"});function Oc(){return Oc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Oc.apply(null,arguments)}function tm(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function xl(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?tm(Object(r),!0).forEach(function(n){zk(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tm(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function zk(e,t,r){return(t=Vk(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Vk(e){var t=Wk(e,"string");return typeof t=="symbol"?t:t+""}function Wk(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Hk(e){return Array.isArray(e)&&er(e[0])&&er(e[1])?e.join(" ~ "):e}var Kk=e=>{var{separator:t=" : ",contentStyle:r={},itemStyle:n={},labelStyle:a={},payload:s,formatter:o,itemSorter:l,wrapperClassName:c,labelClassName:d,label:u,labelFormatter:f,accessibilityLayer:h=!1}=e,m=()=>{if(s&&s.length){var j={padding:0,margin:0},k=(l?Ds(s,l):s).map((N,P)=>{if(N.type==="none")return null;var D=N.formatter||o||Hk,{value:C,name:O}=N,A=C,B=O;if(D){var M=D(C,O,N,P,s);if(Array.isArray(M))[A,B]=M;else if(M!=null)A=M;else return null}var F=xl({display:"block",paddingTop:4,paddingBottom:4,color:N.color||"#000"},n);return x.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(P),style:F},er(B)?x.createElement("span",{className:"recharts-tooltip-item-name"},B):null,er(B)?x.createElement("span",{className:"recharts-tooltip-item-separator"},t):null,x.createElement("span",{className:"recharts-tooltip-item-value"},A),x.createElement("span",{className:"recharts-tooltip-item-unit"},N.unit||""))});return x.createElement("ul",{className:"recharts-tooltip-item-list",style:j},k)}return null},b=xl({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},r),g=xl({margin:0},a),p=!Me(u),v=p?u:"",w=Oe("recharts-default-tooltip",c),y=Oe("recharts-tooltip-label",d);p&&f&&s!==void 0&&s!==null&&(v=f(u,s));var S=h?{role:"status","aria-live":"assertive"}:{};return x.createElement("div",Oc({className:w,style:b},S),x.createElement("p",{className:y,style:g},x.isValidElement(v)?v:"".concat(v)),m())},ia="recharts-tooltip-wrapper",Yk={visibility:"hidden"};function Gk(e){var{coordinate:t,translateX:r,translateY:n}=e;return Oe(ia,{["".concat(ia,"-right")]:se(r)&&t&&se(t.x)&&r>=t.x,["".concat(ia,"-left")]:se(r)&&t&&se(t.x)&&r<t.x,["".concat(ia,"-bottom")]:se(n)&&t&&se(t.y)&&n>=t.y,["".concat(ia,"-top")]:se(n)&&t&&se(t.y)&&n<t.y})}function rm(e){var{allowEscapeViewBox:t,coordinate:r,key:n,offsetTopLeft:a,position:s,reverseDirection:o,tooltipDimension:l,viewBox:c,viewBoxDimension:d}=e;if(s&&se(s[n]))return s[n];var u=r[n]-l-(a>0?a:0),f=r[n]+a;if(t[n])return o[n]?u:f;var h=c[n];if(h==null)return 0;if(o[n]){var m=u,b=h;return m<b?Math.max(f,h):Math.max(u,h)}if(d==null)return 0;var g=f+l,p=h+d;return g>p?Math.max(u,h):Math.max(f,h)}function Qk(e){var{translateX:t,translateY:r,useTranslate3d:n}=e;return{transform:n?"translate3d(".concat(t,"px, ").concat(r,"px, 0)"):"translate(".concat(t,"px, ").concat(r,"px)")}}function Xk(e){var{allowEscapeViewBox:t,coordinate:r,offsetTopLeft:n,position:a,reverseDirection:s,tooltipBox:o,useTranslate3d:l,viewBox:c}=e,d,u,f;return o.height>0&&o.width>0&&r?(u=rm({allowEscapeViewBox:t,coordinate:r,key:"x",offsetTopLeft:n,position:a,reverseDirection:s,tooltipDimension:o.width,viewBox:c,viewBoxDimension:c.width}),f=rm({allowEscapeViewBox:t,coordinate:r,key:"y",offsetTopLeft:n,position:a,reverseDirection:s,tooltipDimension:o.height,viewBox:c,viewBoxDimension:c.height}),d=Qk({translateX:u,translateY:f,useTranslate3d:l})):d=Yk,{cssProperties:d,cssClasses:Gk({translateX:u,translateY:f,coordinate:r})}}function nm(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function di(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?nm(Object(r),!0).forEach(function(n){Cc(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):nm(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Cc(e,t,r){return(t=Zk(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Zk(e){var t=Jk(e,"string");return typeof t=="symbol"?t:t+""}function Jk(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class eP extends x.PureComponent{constructor(){super(...arguments),Cc(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),Cc(this,"handleKeyDown",t=>{if(t.key==="Escape"){var r,n,a,s;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(r=(n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==null&&r!==void 0?r:0,y:(a=(s=this.props.coordinate)===null||s===void 0?void 0:s.y)!==null&&a!==void 0?a:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var t,r;this.state.dismissed&&(((t=this.props.coordinate)===null||t===void 0?void 0:t.x)!==this.state.dismissedAtCoordinate.x||((r=this.props.coordinate)===null||r===void 0?void 0:r.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:t,allowEscapeViewBox:r,animationDuration:n,animationEasing:a,children:s,coordinate:o,hasPayload:l,isAnimationActive:c,offset:d,position:u,reverseDirection:f,useTranslate3d:h,viewBox:m,wrapperStyle:b,lastBoundingBox:g,innerRef:p,hasPortalFromProps:v}=this.props,{cssClasses:w,cssProperties:y}=Xk({allowEscapeViewBox:r,coordinate:o,offsetTopLeft:d,position:u,reverseDirection:f,tooltipBox:{height:g.height,width:g.width},useTranslate3d:h,viewBox:m}),S=v?{}:di(di({transition:c&&t?"transform ".concat(n,"ms ").concat(a):void 0},y),{},{pointerEvents:"none",visibility:!this.state.dismissed&&t&&l?"visible":"hidden",position:"absolute",top:0,left:0}),j=di(di({},S),{},{visibility:!this.state.dismissed&&t&&l?"visible":"hidden"},b);return x.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:w,style:j,ref:p},s)}}var tP=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),Vn={isSsr:tP()},Nx=()=>de(e=>e.rootProps.accessibilityLayer);function At(e){return Number.isFinite(e)}function Ui(e){return typeof e=="number"&&e>0&&Number.isFinite(e)}function Ac(){return Ac=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ac.apply(null,arguments)}function am(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function im(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?am(Object(r),!0).forEach(function(n){rP(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):am(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function rP(e,t,r){return(t=nP(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function nP(e){var t=aP(e,"string");return typeof t=="symbol"?t:t+""}function aP(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var sm={curveBasisClosed:SN,curveBasisOpen:kN,curveBasis:NN,curveBumpX:cN,curveBumpY:uN,curveLinearClosed:PN,curveLinear:Cs,curveMonotoneX:ON,curveMonotoneY:CN,curveNatural:AN,curveStep:DN,curveStepAfter:IN,curveStepBefore:TN},fi=e=>At(e.x)&&At(e.y),sa=e=>e.x,oa=e=>e.y,iP=(e,t)=>{if(typeof e=="function")return e;var r="curve".concat($a(e));return(r==="curveMonotone"||r==="curveBump")&&t?sm["".concat(r).concat(t==="vertical"?"Y":"X")]:sm[r]||Cs},sP=e=>{var{type:t="linear",points:r=[],baseLine:n,layout:a,connectNulls:s=!1}=e,o=iP(t,a),l=s?r.filter(fi):r,c;if(Array.isArray(n)){var d=s?n.filter(f=>fi(f)):n,u=l.map((f,h)=>im(im({},f),{},{base:d[h]}));return a==="vertical"?c=ii().y(oa).x1(sa).x0(f=>f.base.x):c=ii().x(sa).y1(oa).y0(f=>f.base.y),c.defined(fi).curve(o),c(u)}return a==="vertical"&&se(n)?c=ii().y(oa).x1(sa).x0(n):se(n)?c=ii().x(sa).y1(oa).y0(n):c=jg().x(sa).y(oa),c.defined(fi).curve(o),c(l)},Sx=e=>{var{className:t,points:r,path:n,pathRef:a}=e;if((!r||!r.length)&&!n)return null;var s=r&&r.length?sP(e):n;return x.createElement("path",Ac({},gn(e),wu(e),{className:Oe("recharts-curve",t),d:s===null?void 0:s,ref:a}))},oP=["x","y","top","left","width","height","className"];function Dc(){return Dc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Dc.apply(null,arguments)}function om(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function lP(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?om(Object(r),!0).forEach(function(n){cP(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):om(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function cP(e,t,r){return(t=uP(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function uP(e){var t=dP(e,"string");return typeof t=="symbol"?t:t+""}function dP(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function fP(e,t){if(e==null)return{};var r,n,a=hP(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function hP(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var mP=(e,t,r,n,a,s)=>"M".concat(e,",").concat(a,"v").concat(n,"M").concat(s,",").concat(t,"h").concat(r),pP=e=>{var{x:t=0,y:r=0,top:n=0,left:a=0,width:s=0,height:o=0,className:l}=e,c=fP(e,oP),d=lP({x:t,y:r,top:n,left:a,width:s,height:o},c);return!se(t)||!se(r)||!se(s)||!se(o)||!se(n)||!se(a)?null:x.createElement("path",Dc({},Le(d,!0),{className:Oe("recharts-cross",l),d:mP(t,r,s,o,n,a)}))};function gP(e,t,r,n){var a=n/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-a:r.left+.5,y:e==="horizontal"?r.top+.5:t.y-a,width:e==="horizontal"?n:r.width-1,height:e==="horizontal"?r.height-1:n}}function lm(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function xP(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?lm(Object(r),!0).forEach(function(n){vP(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):lm(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function vP(e,t,r){return(t=bP(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function bP(e){var t=yP(e,"string");return typeof t=="symbol"?t:t+""}function yP(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function rr(e,t){var r=xP({},e),n=t,a=Object.keys(t),s=a.reduce((o,l)=>(o[l]===void 0&&n[l]!==void 0&&(o[l]=n[l]),o),r);return s}var vl={},bl={},yl={},cm;function wP(){return cm||(cm=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){if(!r||typeof r!="object")return!1;const n=Object.getPrototypeOf(r);return n===null||n===Object.prototype||Object.getPrototypeOf(n)===null?Object.prototype.toString.call(r)==="[object Object]":!1}e.isPlainObject=t})(yl)),yl}var um;function jP(){return um||(um=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=wP(),r=$g(),n=Mu(),a=Eu(),s=Tu();function o(d,u,f){return l(d,u,void 0,void 0,void 0,void 0,f)}function l(d,u,f,h,m,b,g){const p=g(d,u,f,h,m,b);if(p!==void 0)return p;if(typeof d==typeof u)switch(typeof d){case"bigint":case"string":case"boolean":case"symbol":case"undefined":return d===u;case"number":return d===u||Object.is(d,u);case"function":return d===u;case"object":return c(d,u,b,g)}return c(d,u,b,g)}function c(d,u,f,h){if(Object.is(d,u))return!0;let m=n.getTag(d),b=n.getTag(u);if(m===a.argumentsTag&&(m=a.objectTag),b===a.argumentsTag&&(b=a.objectTag),m!==b)return!1;switch(m){case a.stringTag:return d.toString()===u.toString();case a.numberTag:{const v=d.valueOf(),w=u.valueOf();return s.eq(v,w)}case a.booleanTag:case a.dateTag:case a.symbolTag:return Object.is(d.valueOf(),u.valueOf());case a.regexpTag:return d.source===u.source&&d.flags===u.flags;case a.functionTag:return d===u}f=f??new Map;const g=f.get(d),p=f.get(u);if(g!=null&&p!=null)return g===u;f.set(d,u),f.set(u,d);try{switch(m){case a.mapTag:{if(d.size!==u.size)return!1;for(const[v,w]of d.entries())if(!u.has(v)||!l(w,u.get(v),v,d,u,f,h))return!1;return!0}case a.setTag:{if(d.size!==u.size)return!1;const v=Array.from(d.values()),w=Array.from(u.values());for(let y=0;y<v.length;y++){const S=v[y],j=w.findIndex(k=>l(S,k,void 0,d,u,f,h));if(j===-1)return!1;w.splice(j,1)}return!0}case a.arrayTag:case a.uint8ArrayTag:case a.uint8ClampedArrayTag:case a.uint16ArrayTag:case a.uint32ArrayTag:case a.bigUint64ArrayTag:case a.int8ArrayTag:case a.int16ArrayTag:case a.int32ArrayTag:case a.bigInt64ArrayTag:case a.float32ArrayTag:case a.float64ArrayTag:{if(typeof Buffer<"u"&&Buffer.isBuffer(d)!==Buffer.isBuffer(u)||d.length!==u.length)return!1;for(let v=0;v<d.length;v++)if(!l(d[v],u[v],v,d,u,f,h))return!1;return!0}case a.arrayBufferTag:return d.byteLength!==u.byteLength?!1:c(new Uint8Array(d),new Uint8Array(u),f,h);case a.dataViewTag:return d.byteLength!==u.byteLength||d.byteOffset!==u.byteOffset?!1:c(new Uint8Array(d),new Uint8Array(u),f,h);case a.errorTag:return d.name===u.name&&d.message===u.message;case a.objectTag:{if(!(c(d.constructor,u.constructor,f,h)||t.isPlainObject(d)&&t.isPlainObject(u)))return!1;const w=[...Object.keys(d),...r.getSymbols(d)],y=[...Object.keys(u),...r.getSymbols(u)];if(w.length!==y.length)return!1;for(let S=0;S<w.length;S++){const j=w[S],k=d[j];if(!Object.hasOwn(u,j))return!1;const N=u[j];if(!l(k,N,j,d,u,f,h))return!1}return!0}default:return!1}}finally{f.delete(d),f.delete(u)}}e.isEqualWith=o})(bl)),bl}var wl={},dm;function NP(){return dm||(dm=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(){}e.noop=t})(wl)),wl}var fm;function SP(){return fm||(fm=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=jP(),r=NP();function n(a,s){return t.isEqualWith(a,s,r.noop)}e.isEqual=n})(vl)),vl}var jl,hm;function kP(){return hm||(hm=1,jl=SP().isEqual),jl}var PP=kP();const OP=br(PP);var zi=1e-4,kx=(e,t)=>[0,3*e,3*t-6*e,3*e-3*t+1],Px=(e,t)=>e.map((r,n)=>r*t**n).reduce((r,n)=>r+n),mm=(e,t)=>r=>{var n=kx(e,t);return Px(n,r)},CP=(e,t)=>r=>{var n=kx(e,t),a=[...n.map((s,o)=>s*o).slice(1),0];return Px(a,r)},pm=function(){for(var t,r,n,a,s=arguments.length,o=new Array(s),l=0;l<s;l++)o[l]=arguments[l];if(o.length===1)switch(o[0]){case"linear":[t,n,r,a]=[0,0,1,1];break;case"ease":[t,n,r,a]=[.25,.1,.25,1];break;case"ease-in":[t,n,r,a]=[.42,0,1,1];break;case"ease-out":[t,n,r,a]=[.42,0,.58,1];break;case"ease-in-out":[t,n,r,a]=[0,0,.58,1];break;default:{var c=o[0].split("(");c[0]==="cubic-bezier"&&c[1].split(")")[0].split(",").length===4&&([t,n,r,a]=c[1].split(")")[0].split(",").map(b=>parseFloat(b)))}}else o.length===4&&([t,n,r,a]=o);var d=mm(t,r),u=mm(n,a),f=CP(t,r),h=b=>b>1?1:b<0?0:b,m=b=>{for(var g=b>1?1:b,p=g,v=0;v<8;++v){var w=d(p)-g,y=f(p);if(Math.abs(w-g)<zi||y<zi)return u(p);p=h(p-w/y)}return u(p)};return m.isStepper=!1,m},AP=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:r=100,damping:n=8,dt:a=17}=t,s=(o,l,c)=>{var d=-(o-l)*r,u=c*n,f=c+(d-u)*a/1e3,h=c*a/1e3+o;return Math.abs(h-l)<zi&&Math.abs(f)<zi?[l,0]:[h,f]};return s.isStepper=!0,s.dt=a,s},Ox=e=>{if(typeof e=="string")switch(e){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return pm(e);case"spring":return AP();default:if(e.split("(")[0]==="cubic-bezier")return pm(e)}return typeof e=="function"?e:null};function gm(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function xm(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?gm(Object(r),!0).forEach(function(n){DP(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):gm(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function DP(e,t,r){return(t=TP(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function TP(e){var t=IP(e,"string");return typeof t=="symbol"?t:t+""}function IP(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var MP=e=>e.replace(/([A-Z])/g,t=>"-".concat(t.toLowerCase())),EP=(e,t,r)=>e.map(n=>"".concat(MP(n)," ").concat(t,"ms ").concat(r)).join(","),_P=(e,t)=>[Object.keys(e),Object.keys(t)].reduce((r,n)=>r.filter(a=>n.includes(a))),Ca=(e,t)=>Object.keys(t).reduce((r,n)=>xm(xm({},r),{},{[n]:e(n,t[n])}),{});function vm(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function it(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?vm(Object(r),!0).forEach(function(n){RP(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):vm(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function RP(e,t,r){return(t=$P(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $P(e){var t=LP(e,"string");return typeof t=="symbol"?t:t+""}function LP(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Vi=(e,t,r)=>e+(t-e)*r,Tc=e=>{var{from:t,to:r}=e;return t!==r},Cx=(e,t,r)=>{var n=Ca((a,s)=>{if(Tc(s)){var[o,l]=e(s.from,s.to,s.velocity);return it(it({},s),{},{from:o,velocity:l})}return s},t);return r<1?Ca((a,s)=>Tc(s)?it(it({},s),{},{velocity:Vi(s.velocity,n[a].velocity,r),from:Vi(s.from,n[a].from,r)}):s,t):Cx(e,n,r-1)};function FP(e,t,r,n,a,s){var o,l=n.reduce((h,m)=>it(it({},h),{},{[m]:{from:e[m],velocity:0,to:t[m]}}),{}),c=()=>Ca((h,m)=>m.from,l),d=()=>!Object.values(l).filter(Tc).length,u=null,f=h=>{o||(o=h);var m=h-o,b=m/r.dt;l=Cx(r,l,b),a(it(it(it({},e),t),c())),o=h,d()||(u=s.setTimeout(f))};return()=>(u=s.setTimeout(f),()=>{u()})}function BP(e,t,r,n,a,s,o){var l=null,c=a.reduce((f,h)=>it(it({},f),{},{[h]:[e[h],t[h]]}),{}),d,u=f=>{d||(d=f);var h=(f-d)/n,m=Ca((g,p)=>Vi(...p,r(h)),c);if(s(it(it(it({},e),t),m)),h<1)l=o.setTimeout(u);else{var b=Ca((g,p)=>Vi(...p,r(1)),c);s(it(it(it({},e),t),b))}};return()=>(l=o.setTimeout(u),()=>{l()})}const Ax=(e,t,r,n,a,s)=>{var o=_P(e,t);return r.isStepper===!0?FP(e,t,r,o,a,s):BP(e,t,r,n,o,a,s)};function qP(e){var t,r=()=>null,n=!1,a=null,s=o=>{if(!n){if(Array.isArray(o)){if(!o.length)return;var l=o,[c,...d]=l;if(typeof c=="number"){a=e.setTimeout(s.bind(null,d),c);return}s(c),a=e.setTimeout(s.bind(null,d));return}typeof o=="string"&&(t=o,r(t)),typeof o=="object"&&(t=o,r(t)),typeof o=="function"&&o()}};return{stop:()=>{n=!0},start:o=>{n=!1,a&&(a(),a=null),s(o)},subscribe:o=>(r=o,()=>{r=()=>null}),getTimeoutController:()=>e}}class UP{setTimeout(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=performance.now(),a=null,s=o=>{o-n>=r?t(o):typeof requestAnimationFrame=="function"&&(a=requestAnimationFrame(s))};return a=requestAnimationFrame(s),()=>{cancelAnimationFrame(a)}}}function zP(){return qP(new UP)}var VP=x.createContext(zP);function Dx(e,t){var r=x.useContext(VP);return x.useMemo(()=>t??r(e),[e,t,r])}var WP=["children","begin","duration","attributeName","easing","isActive","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart","animationManager"];function Ic(){return Ic=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ic.apply(null,arguments)}function HP(e,t){if(e==null)return{};var r,n,a=KP(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function KP(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function bm(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Ar(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?bm(Object(r),!0).forEach(function(n){tn(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):bm(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function tn(e,t,r){return(t=YP(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function YP(e){var t=GP(e,"string");return typeof t=="symbol"?t:t+""}function GP(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class Ku extends x.PureComponent{constructor(t,r){super(t,r),tn(this,"mounted",!1),tn(this,"manager",void 0),tn(this,"stopJSAnimation",null),tn(this,"unSubscribe",null);var{isActive:n,attributeName:a,from:s,to:o,children:l,duration:c,animationManager:d}=this.props;if(this.manager=d,this.handleStyleChange=this.handleStyleChange.bind(this),this.changeStyle=this.changeStyle.bind(this),!n||c<=0){this.state={style:{}},typeof l=="function"&&(this.state={style:o});return}if(s){if(typeof l=="function"){this.state={style:s};return}this.state={style:a?{[a]:s}:s}}else this.state={style:{}}}componentDidMount(){var{isActive:t,canBegin:r}=this.props;this.mounted=!0,!(!t||!r)&&this.runAnimation(this.props)}componentDidUpdate(t){var{isActive:r,canBegin:n,attributeName:a,shouldReAnimate:s,to:o,from:l}=this.props,{style:c}=this.state;if(n){if(!r){var d={style:a?{[a]:o}:o};this.state&&c&&(a&&c[a]!==o||!a&&c!==o)&&this.setState(d);return}if(!(OP(t.to,o)&&t.canBegin&&t.isActive)){var u=!t.canBegin||!t.isActive;this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var f=u||s?l:t.to;if(this.state&&c){var h={style:a?{[a]:f}:f};(a&&c[a]!==f||!a&&c!==f)&&this.setState(h)}this.runAnimation(Ar(Ar({},this.props),{},{from:f,begin:0}))}}}componentWillUnmount(){this.mounted=!1;var{onAnimationEnd:t}=this.props;this.unSubscribe&&this.unSubscribe(),this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation(),t&&t()}handleStyleChange(t){this.changeStyle(t)}changeStyle(t){this.mounted&&this.setState({style:t})}runJSAnimation(t){var{from:r,to:n,duration:a,easing:s,begin:o,onAnimationEnd:l,onAnimationStart:c}=t,d=Ax(r,n,Ox(s),a,this.changeStyle,this.manager.getTimeoutController()),u=()=>{this.stopJSAnimation=d()};this.manager.start([c,o,u,a,l])}runAnimation(t){var{begin:r,duration:n,attributeName:a,to:s,easing:o,onAnimationStart:l,onAnimationEnd:c,children:d}=t;if(this.unSubscribe=this.manager.subscribe(this.handleStyleChange),typeof o=="function"||typeof d=="function"||o==="spring"){this.runJSAnimation(t);return}var u=a?{[a]:s}:s,f=EP(Object.keys(u),n,o);this.manager.start([l,r,Ar(Ar({},u),{},{transition:f}),n,c])}render(){var t=this.props,{children:r,begin:n,duration:a,attributeName:s,easing:o,isActive:l,from:c,to:d,canBegin:u,onAnimationEnd:f,shouldReAnimate:h,onAnimationReStart:m,animationManager:b}=t,g=HP(t,WP),p=x.Children.count(r),v=this.state.style;if(typeof r=="function")return r(v);if(!l||p===0||a<=0)return r;var w=y=>{var{style:S={},className:j}=y.props,k=x.cloneElement(y,Ar(Ar({},g),{},{style:Ar(Ar({},S),v),className:j}));return k};return p===1?w(x.Children.only(r)):x.createElement("div",null,x.Children.map(r,y=>w(y)))}}tn(Ku,"displayName","Animate");tn(Ku,"defaultProps",{begin:0,duration:1e3,attributeName:"",easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}});function Wi(e){var t,r=Dx((t=e.attributeName)!==null&&t!==void 0?t:Object.keys(e.to).join(","),e.animationManager);return x.createElement(Ku,Ic({},e,{animationManager:r}))}function Hi(){return Hi=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Hi.apply(null,arguments)}var ym=(e,t,r,n,a)=>{var s=Math.min(Math.abs(r)/2,Math.abs(n)/2),o=n>=0?1:-1,l=r>=0?1:-1,c=n>=0&&r>=0||n<0&&r<0?1:0,d;if(s>0&&a instanceof Array){for(var u=[0,0,0,0],f=0,h=4;f<h;f++)u[f]=a[f]>s?s:a[f];d="M".concat(e,",").concat(t+o*u[0]),u[0]>0&&(d+="A ".concat(u[0],",").concat(u[0],",0,0,").concat(c,",").concat(e+l*u[0],",").concat(t)),d+="L ".concat(e+r-l*u[1],",").concat(t),u[1]>0&&(d+="A ".concat(u[1],",").concat(u[1],",0,0,").concat(c,`,
        `).concat(e+r,",").concat(t+o*u[1])),d+="L ".concat(e+r,",").concat(t+n-o*u[2]),u[2]>0&&(d+="A ".concat(u[2],",").concat(u[2],",0,0,").concat(c,`,
        `).concat(e+r-l*u[2],",").concat(t+n)),d+="L ".concat(e+l*u[3],",").concat(t+n),u[3]>0&&(d+="A ".concat(u[3],",").concat(u[3],",0,0,").concat(c,`,
        `).concat(e,",").concat(t+n-o*u[3])),d+="Z"}else if(s>0&&a===+a&&a>0){var m=Math.min(s,a);d="M ".concat(e,",").concat(t+o*m,`
            A `).concat(m,",").concat(m,",0,0,").concat(c,",").concat(e+l*m,",").concat(t,`
            L `).concat(e+r-l*m,",").concat(t,`
            A `).concat(m,",").concat(m,",0,0,").concat(c,",").concat(e+r,",").concat(t+o*m,`
            L `).concat(e+r,",").concat(t+n-o*m,`
            A `).concat(m,",").concat(m,",0,0,").concat(c,",").concat(e+r-l*m,",").concat(t+n,`
            L `).concat(e+l*m,",").concat(t+n,`
            A `).concat(m,",").concat(m,",0,0,").concat(c,",").concat(e,",").concat(t+n-o*m," Z")}else d="M ".concat(e,",").concat(t," h ").concat(r," v ").concat(n," h ").concat(-r," Z");return d},QP={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Tx=e=>{var t=rr(e,QP),r=x.useRef(null),[n,a]=x.useState(-1);x.useEffect(()=>{if(r.current&&r.current.getTotalLength)try{var v=r.current.getTotalLength();v&&a(v)}catch{}},[]);var{x:s,y:o,width:l,height:c,radius:d,className:u}=t,{animationEasing:f,animationDuration:h,animationBegin:m,isAnimationActive:b,isUpdateAnimationActive:g}=t;if(s!==+s||o!==+o||l!==+l||c!==+c||l===0||c===0)return null;var p=Oe("recharts-rectangle",u);return g?x.createElement(Wi,{canBegin:n>0,from:{width:l,height:c,x:s,y:o},to:{width:l,height:c,x:s,y:o},duration:h,animationEasing:f,isActive:g},v=>{var{width:w,height:y,x:S,y:j}=v;return x.createElement(Wi,{canBegin:n>0,from:"0px ".concat(n===-1?1:n,"px"),to:"".concat(n,"px 0px"),attributeName:"strokeDasharray",begin:m,duration:h,isActive:b,easing:f},x.createElement("path",Hi({},Le(t,!0),{className:p,d:ym(S,j,w,y,d),ref:r})))}):x.createElement("path",Hi({},Le(t,!0),{className:p,d:ym(s,o,l,c,d)}))};function Ix(e){var{cx:t,cy:r,radius:n,startAngle:a,endAngle:s}=e,o=st(t,r,n,a),l=st(t,r,n,s);return{points:[o,l],cx:t,cy:r,radius:n,startAngle:a,endAngle:s}}function Mc(){return Mc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Mc.apply(null,arguments)}var XP=(e,t)=>{var r=xt(t-e),n=Math.min(Math.abs(t-e),359.999);return r*n},hi=e=>{var{cx:t,cy:r,radius:n,angle:a,sign:s,isExternal:o,cornerRadius:l,cornerIsExternal:c}=e,d=l*(o?1:-1)+n,u=Math.asin(l/d)/qi,f=c?a:a+s*u,h=st(t,r,d,f),m=st(t,r,n,f),b=c?a-s*u:a,g=st(t,r,d*Math.cos(u*qi),b);return{center:h,circleTangency:m,lineTangency:g,theta:u}},Mx=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:a,startAngle:s,endAngle:o}=e,l=XP(s,o),c=s+l,d=st(t,r,a,s),u=st(t,r,a,c),f="M ".concat(d.x,",").concat(d.y,`
    A `).concat(a,",").concat(a,`,0,
    `).concat(+(Math.abs(l)>180),",").concat(+(s>c),`,
    `).concat(u.x,",").concat(u.y,`
  `);if(n>0){var h=st(t,r,n,s),m=st(t,r,n,c);f+="L ".concat(m.x,",").concat(m.y,`
            A `).concat(n,",").concat(n,`,0,
            `).concat(+(Math.abs(l)>180),",").concat(+(s<=c),`,
            `).concat(h.x,",").concat(h.y," Z")}else f+="L ".concat(t,",").concat(r," Z");return f},ZP=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:a,cornerRadius:s,forceCornerRadius:o,cornerIsExternal:l,startAngle:c,endAngle:d}=e,u=xt(d-c),{circleTangency:f,lineTangency:h,theta:m}=hi({cx:t,cy:r,radius:a,angle:c,sign:u,cornerRadius:s,cornerIsExternal:l}),{circleTangency:b,lineTangency:g,theta:p}=hi({cx:t,cy:r,radius:a,angle:d,sign:-u,cornerRadius:s,cornerIsExternal:l}),v=l?Math.abs(c-d):Math.abs(c-d)-m-p;if(v<0)return o?"M ".concat(h.x,",").concat(h.y,`
        a`).concat(s,",").concat(s,",0,0,1,").concat(s*2,`,0
        a`).concat(s,",").concat(s,",0,0,1,").concat(-s*2,`,0
      `):Mx({cx:t,cy:r,innerRadius:n,outerRadius:a,startAngle:c,endAngle:d});var w="M ".concat(h.x,",").concat(h.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(u<0),",").concat(f.x,",").concat(f.y,`
    A`).concat(a,",").concat(a,",0,").concat(+(v>180),",").concat(+(u<0),",").concat(b.x,",").concat(b.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(u<0),",").concat(g.x,",").concat(g.y,`
  `);if(n>0){var{circleTangency:y,lineTangency:S,theta:j}=hi({cx:t,cy:r,radius:n,angle:c,sign:u,isExternal:!0,cornerRadius:s,cornerIsExternal:l}),{circleTangency:k,lineTangency:N,theta:P}=hi({cx:t,cy:r,radius:n,angle:d,sign:-u,isExternal:!0,cornerRadius:s,cornerIsExternal:l}),D=l?Math.abs(c-d):Math.abs(c-d)-j-P;if(D<0&&s===0)return"".concat(w,"L").concat(t,",").concat(r,"Z");w+="L".concat(N.x,",").concat(N.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(u<0),",").concat(k.x,",").concat(k.y,`
      A`).concat(n,",").concat(n,",0,").concat(+(D>180),",").concat(+(u>0),",").concat(y.x,",").concat(y.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(u<0),",").concat(S.x,",").concat(S.y,"Z")}else w+="L".concat(t,",").concat(r,"Z");return w},JP={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},Ex=e=>{var t=rr(e,JP),{cx:r,cy:n,innerRadius:a,outerRadius:s,cornerRadius:o,forceCornerRadius:l,cornerIsExternal:c,startAngle:d,endAngle:u,className:f}=t;if(s<a||d===u)return null;var h=Oe("recharts-sector",f),m=s-a,b=Gt(o,m,0,!0),g;return b>0&&Math.abs(d-u)<360?g=ZP({cx:r,cy:n,innerRadius:a,outerRadius:s,cornerRadius:Math.min(b,m/2),forceCornerRadius:l,cornerIsExternal:c,startAngle:d,endAngle:u}):g=Mx({cx:r,cy:n,innerRadius:a,outerRadius:s,startAngle:d,endAngle:u}),x.createElement("path",Mc({},Le(t,!0),{className:h,d:g}))};function eO(e,t,r){var n,a,s,o;if(e==="horizontal")n=t.x,s=n,a=r.top,o=r.top+r.height;else if(e==="vertical")a=t.y,o=a,n=r.left,s=r.left+r.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var{cx:l,cy:c,innerRadius:d,outerRadius:u,angle:f}=t,h=st(l,c,d,f),m=st(l,c,u,f);n=h.x,a=h.y,s=m.x,o=m.y}else return Ix(t);return[{x:n,y:a},{x:s,y:o}]}var Nl={},Sl={},kl={},wm;function tO(){return wm||(wm=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Ug();function r(n){return t.isSymbol(n)?NaN:Number(n)}e.toNumber=r})(kl)),kl}var jm;function rO(){return jm||(jm=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=tO();function r(n){return n?(n=t.toNumber(n),n===1/0||n===-1/0?(n<0?-1:1)*Number.MAX_VALUE:n===n?n:0):n===0?n:0}e.toFinite=r})(Sl)),Sl}var Nm;function nO(){return Nm||(Nm=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=zg(),r=rO();function n(a,s,o){o&&typeof o!="number"&&t.isIterateeCall(a,s,o)&&(s=o=void 0),a=r.toFinite(a),s===void 0?(s=a,a=0):s=r.toFinite(s),o=o===void 0?a<s?1:-1:r.toFinite(o);const l=Math.max(Math.ceil((s-a)/(o||1)),0),c=new Array(l);for(let d=0;d<l;d++)c[d]=a,a+=o;return c}e.range=n})(Nl)),Nl}var Pl,Sm;function aO(){return Sm||(Sm=1,Pl=nO().range),Pl}var iO=aO();const _x=br(iO);function Er(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function sO(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Yu(e){let t,r,n;e.length!==2?(t=Er,r=(l,c)=>Er(e(l),c),n=(l,c)=>e(l)-c):(t=e===Er||e===sO?e:oO,r=e,n=e);function a(l,c,d=0,u=l.length){if(d<u){if(t(c,c)!==0)return u;do{const f=d+u>>>1;r(l[f],c)<0?d=f+1:u=f}while(d<u)}return d}function s(l,c,d=0,u=l.length){if(d<u){if(t(c,c)!==0)return u;do{const f=d+u>>>1;r(l[f],c)<=0?d=f+1:u=f}while(d<u)}return d}function o(l,c,d=0,u=l.length){const f=a(l,c,d,u-1);return f>d&&n(l[f-1],c)>-n(l[f],c)?f-1:f}return{left:a,center:o,right:s}}function oO(){return 0}function Rx(e){return e===null?NaN:+e}function*lO(e,t){for(let r of e)r!=null&&(r=+r)>=r&&(yield r)}const cO=Yu(Er),Ba=cO.right;Yu(Rx).center;class km extends Map{constructor(t,r=fO){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),t!=null)for(const[n,a]of t)this.set(n,a)}get(t){return super.get(Pm(this,t))}has(t){return super.has(Pm(this,t))}set(t,r){return super.set(uO(this,t),r)}delete(t){return super.delete(dO(this,t))}}function Pm({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):r}function uO({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):(e.set(n,r),r)}function dO({_intern:e,_key:t},r){const n=t(r);return e.has(n)&&(r=e.get(n),e.delete(n)),r}function fO(e){return e!==null&&typeof e=="object"?e.valueOf():e}function hO(e=Er){if(e===Er)return $x;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,r)=>{const n=e(t,r);return n||n===0?n:(e(r,r)===0)-(e(t,t)===0)}}function $x(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const mO=Math.sqrt(50),pO=Math.sqrt(10),gO=Math.sqrt(2);function Ki(e,t,r){const n=(t-e)/Math.max(0,r),a=Math.floor(Math.log10(n)),s=n/Math.pow(10,a),o=s>=mO?10:s>=pO?5:s>=gO?2:1;let l,c,d;return a<0?(d=Math.pow(10,-a)/o,l=Math.round(e*d),c=Math.round(t*d),l/d<e&&++l,c/d>t&&--c,d=-d):(d=Math.pow(10,a)*o,l=Math.round(e/d),c=Math.round(t/d),l*d<e&&++l,c*d>t&&--c),c<l&&.5<=r&&r<2?Ki(e,t,r*2):[l,c,d]}function Ec(e,t,r){if(t=+t,e=+e,r=+r,!(r>0))return[];if(e===t)return[e];const n=t<e,[a,s,o]=n?Ki(t,e,r):Ki(e,t,r);if(!(s>=a))return[];const l=s-a+1,c=new Array(l);if(n)if(o<0)for(let d=0;d<l;++d)c[d]=(s-d)/-o;else for(let d=0;d<l;++d)c[d]=(s-d)*o;else if(o<0)for(let d=0;d<l;++d)c[d]=(a+d)/-o;else for(let d=0;d<l;++d)c[d]=(a+d)*o;return c}function _c(e,t,r){return t=+t,e=+e,r=+r,Ki(e,t,r)[2]}function Rc(e,t,r){t=+t,e=+e,r=+r;const n=t<e,a=n?_c(t,e,r):_c(e,t,r);return(n?-1:1)*(a<0?1/-a:a)}function Om(e,t){let r;for(const n of e)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function Cm(e,t){let r;for(const n of e)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function Lx(e,t,r=0,n=1/0,a){if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(e.length-1,n)),!(r<=t&&t<=n))return e;for(a=a===void 0?$x:hO(a);n>r;){if(n-r>600){const c=n-r+1,d=t-r+1,u=Math.log(c),f=.5*Math.exp(2*u/3),h=.5*Math.sqrt(u*f*(c-f)/c)*(d-c/2<0?-1:1),m=Math.max(r,Math.floor(t-d*f/c+h)),b=Math.min(n,Math.floor(t+(c-d)*f/c+h));Lx(e,t,m,b,a)}const s=e[t];let o=r,l=n;for(la(e,r,t),a(e[n],s)>0&&la(e,r,n);o<l;){for(la(e,o,l),++o,--l;a(e[o],s)<0;)++o;for(;a(e[l],s)>0;)--l}a(e[r],s)===0?la(e,r,l):(++l,la(e,l,n)),l<=t&&(r=l+1),t<=l&&(n=l-1)}return e}function la(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function xO(e,t,r){if(e=Float64Array.from(lO(e)),!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return Cm(e);if(t>=1)return Om(e);var n,a=(n-1)*t,s=Math.floor(a),o=Om(Lx(e,s).subarray(0,s+1)),l=Cm(e.subarray(s+1));return o+(l-o)*(a-s)}}function vO(e,t,r=Rx){if(!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return+r(e[0],0,e);if(t>=1)return+r(e[n-1],n-1,e);var n,a=(n-1)*t,s=Math.floor(a),o=+r(e[s],s,e),l=+r(e[s+1],s+1,e);return o+(l-o)*(a-s)}}function bO(e,t,r){e=+e,t=+t,r=(a=arguments.length)<2?(t=e,e=0,1):a<3?1:+r;for(var n=-1,a=Math.max(0,Math.ceil((t-e)/r))|0,s=new Array(a);++n<a;)s[n]=e+n*r;return s}function qt(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function jr(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const $c=Symbol("implicit");function Gu(){var e=new km,t=[],r=[],n=$c;function a(s){let o=e.get(s);if(o===void 0){if(n!==$c)return n;e.set(s,o=t.push(s)-1)}return r[o%r.length]}return a.domain=function(s){if(!arguments.length)return t.slice();t=[],e=new km;for(const o of s)e.has(o)||e.set(o,t.push(o)-1);return a},a.range=function(s){return arguments.length?(r=Array.from(s),a):r.slice()},a.unknown=function(s){return arguments.length?(n=s,a):n},a.copy=function(){return Gu(t,r).unknown(n)},qt.apply(a,arguments),a}function Qu(){var e=Gu().unknown(void 0),t=e.domain,r=e.range,n=0,a=1,s,o,l=!1,c=0,d=0,u=.5;delete e.unknown;function f(){var h=t().length,m=a<n,b=m?a:n,g=m?n:a;s=(g-b)/Math.max(1,h-c+d*2),l&&(s=Math.floor(s)),b+=(g-b-s*(h-c))*u,o=s*(1-c),l&&(b=Math.round(b),o=Math.round(o));var p=bO(h).map(function(v){return b+s*v});return r(m?p.reverse():p)}return e.domain=function(h){return arguments.length?(t(h),f()):t()},e.range=function(h){return arguments.length?([n,a]=h,n=+n,a=+a,f()):[n,a]},e.rangeRound=function(h){return[n,a]=h,n=+n,a=+a,l=!0,f()},e.bandwidth=function(){return o},e.step=function(){return s},e.round=function(h){return arguments.length?(l=!!h,f()):l},e.padding=function(h){return arguments.length?(c=Math.min(1,d=+h),f()):c},e.paddingInner=function(h){return arguments.length?(c=Math.min(1,h),f()):c},e.paddingOuter=function(h){return arguments.length?(d=+h,f()):d},e.align=function(h){return arguments.length?(u=Math.max(0,Math.min(1,h)),f()):u},e.copy=function(){return Qu(t(),[n,a]).round(l).paddingInner(c).paddingOuter(d).align(u)},qt.apply(f(),arguments)}function Fx(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return Fx(t())},e}function yO(){return Fx(Qu.apply(null,arguments).paddingInner(1))}function Xu(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function Bx(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function qa(){}var Aa=.7,Yi=1/Aa,Mn="\\s*([+-]?\\d+)\\s*",Da="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Jt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",wO=/^#([0-9a-f]{3,8})$/,jO=new RegExp(`^rgb\\(${Mn},${Mn},${Mn}\\)$`),NO=new RegExp(`^rgb\\(${Jt},${Jt},${Jt}\\)$`),SO=new RegExp(`^rgba\\(${Mn},${Mn},${Mn},${Da}\\)$`),kO=new RegExp(`^rgba\\(${Jt},${Jt},${Jt},${Da}\\)$`),PO=new RegExp(`^hsl\\(${Da},${Jt},${Jt}\\)$`),OO=new RegExp(`^hsla\\(${Da},${Jt},${Jt},${Da}\\)$`),Am={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Xu(qa,Ta,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Dm,formatHex:Dm,formatHex8:CO,formatHsl:AO,formatRgb:Tm,toString:Tm});function Dm(){return this.rgb().formatHex()}function CO(){return this.rgb().formatHex8()}function AO(){return qx(this).formatHsl()}function Tm(){return this.rgb().formatRgb()}function Ta(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=wO.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?Im(t):r===3?new vt(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?mi(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?mi(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=jO.exec(e))?new vt(t[1],t[2],t[3],1):(t=NO.exec(e))?new vt(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=SO.exec(e))?mi(t[1],t[2],t[3],t[4]):(t=kO.exec(e))?mi(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=PO.exec(e))?_m(t[1],t[2]/100,t[3]/100,1):(t=OO.exec(e))?_m(t[1],t[2]/100,t[3]/100,t[4]):Am.hasOwnProperty(e)?Im(Am[e]):e==="transparent"?new vt(NaN,NaN,NaN,0):null}function Im(e){return new vt(e>>16&255,e>>8&255,e&255,1)}function mi(e,t,r,n){return n<=0&&(e=t=r=NaN),new vt(e,t,r,n)}function DO(e){return e instanceof qa||(e=Ta(e)),e?(e=e.rgb(),new vt(e.r,e.g,e.b,e.opacity)):new vt}function Lc(e,t,r,n){return arguments.length===1?DO(e):new vt(e,t,r,n??1)}function vt(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}Xu(vt,Lc,Bx(qa,{brighter(e){return e=e==null?Yi:Math.pow(Yi,e),new vt(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Aa:Math.pow(Aa,e),new vt(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new vt(ln(this.r),ln(this.g),ln(this.b),Gi(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Mm,formatHex:Mm,formatHex8:TO,formatRgb:Em,toString:Em}));function Mm(){return`#${rn(this.r)}${rn(this.g)}${rn(this.b)}`}function TO(){return`#${rn(this.r)}${rn(this.g)}${rn(this.b)}${rn((isNaN(this.opacity)?1:this.opacity)*255)}`}function Em(){const e=Gi(this.opacity);return`${e===1?"rgb(":"rgba("}${ln(this.r)}, ${ln(this.g)}, ${ln(this.b)}${e===1?")":`, ${e})`}`}function Gi(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function ln(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function rn(e){return e=ln(e),(e<16?"0":"")+e.toString(16)}function _m(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new Ht(e,t,r,n)}function qx(e){if(e instanceof Ht)return new Ht(e.h,e.s,e.l,e.opacity);if(e instanceof qa||(e=Ta(e)),!e)return new Ht;if(e instanceof Ht)return e;e=e.rgb();var t=e.r/255,r=e.g/255,n=e.b/255,a=Math.min(t,r,n),s=Math.max(t,r,n),o=NaN,l=s-a,c=(s+a)/2;return l?(t===s?o=(r-n)/l+(r<n)*6:r===s?o=(n-t)/l+2:o=(t-r)/l+4,l/=c<.5?s+a:2-s-a,o*=60):l=c>0&&c<1?0:o,new Ht(o,l,c,e.opacity)}function IO(e,t,r,n){return arguments.length===1?qx(e):new Ht(e,t,r,n??1)}function Ht(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}Xu(Ht,IO,Bx(qa,{brighter(e){return e=e==null?Yi:Math.pow(Yi,e),new Ht(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Aa:Math.pow(Aa,e),new Ht(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,a=2*r-n;return new vt(Ol(e>=240?e-240:e+120,a,n),Ol(e,a,n),Ol(e<120?e+240:e-120,a,n),this.opacity)},clamp(){return new Ht(Rm(this.h),pi(this.s),pi(this.l),Gi(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Gi(this.opacity);return`${e===1?"hsl(":"hsla("}${Rm(this.h)}, ${pi(this.s)*100}%, ${pi(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Rm(e){return e=(e||0)%360,e<0?e+360:e}function pi(e){return Math.max(0,Math.min(1,e||0))}function Ol(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const Zu=e=>()=>e;function MO(e,t){return function(r){return e+r*t}}function EO(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}function _O(e){return(e=+e)==1?Ux:function(t,r){return r-t?EO(t,r,e):Zu(isNaN(t)?r:t)}}function Ux(e,t){var r=t-e;return r?MO(e,r):Zu(isNaN(e)?t:e)}const $m=(function e(t){var r=_O(t);function n(a,s){var o=r((a=Lc(a)).r,(s=Lc(s)).r),l=r(a.g,s.g),c=r(a.b,s.b),d=Ux(a.opacity,s.opacity);return function(u){return a.r=o(u),a.g=l(u),a.b=c(u),a.opacity=d(u),a+""}}return n.gamma=e,n})(1);function RO(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,n=t.slice(),a;return function(s){for(a=0;a<r;++a)n[a]=e[a]*(1-s)+t[a]*s;return n}}function $O(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function LO(e,t){var r=t?t.length:0,n=e?Math.min(r,e.length):0,a=new Array(n),s=new Array(r),o;for(o=0;o<n;++o)a[o]=Wn(e[o],t[o]);for(;o<r;++o)s[o]=t[o];return function(l){for(o=0;o<n;++o)s[o]=a[o](l);return s}}function FO(e,t){var r=new Date;return e=+e,t=+t,function(n){return r.setTime(e*(1-n)+t*n),r}}function Qi(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function BO(e,t){var r={},n={},a;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(a in t)a in e?r[a]=Wn(e[a],t[a]):n[a]=t[a];return function(s){for(a in r)n[a]=r[a](s);return n}}var Fc=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Cl=new RegExp(Fc.source,"g");function qO(e){return function(){return e}}function UO(e){return function(t){return e(t)+""}}function zO(e,t){var r=Fc.lastIndex=Cl.lastIndex=0,n,a,s,o=-1,l=[],c=[];for(e=e+"",t=t+"";(n=Fc.exec(e))&&(a=Cl.exec(t));)(s=a.index)>r&&(s=t.slice(r,s),l[o]?l[o]+=s:l[++o]=s),(n=n[0])===(a=a[0])?l[o]?l[o]+=a:l[++o]=a:(l[++o]=null,c.push({i:o,x:Qi(n,a)})),r=Cl.lastIndex;return r<t.length&&(s=t.slice(r),l[o]?l[o]+=s:l[++o]=s),l.length<2?c[0]?UO(c[0].x):qO(t):(t=c.length,function(d){for(var u=0,f;u<t;++u)l[(f=c[u]).i]=f.x(d);return l.join("")})}function Wn(e,t){var r=typeof t,n;return t==null||r==="boolean"?Zu(t):(r==="number"?Qi:r==="string"?(n=Ta(t))?(t=n,$m):zO:t instanceof Ta?$m:t instanceof Date?FO:$O(t)?RO:Array.isArray(t)?LO:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?BO:Qi)(e,t)}function Ju(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}function VO(e,t){t===void 0&&(t=e,e=Wn);for(var r=0,n=t.length-1,a=t[0],s=new Array(n<0?0:n);r<n;)s[r]=e(a,a=t[++r]);return function(o){var l=Math.max(0,Math.min(n-1,Math.floor(o*=n)));return s[l](o-l)}}function WO(e){return function(){return e}}function Xi(e){return+e}var Lm=[0,1];function ft(e){return e}function Bc(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:WO(isNaN(t)?NaN:.5)}function HO(e,t){var r;return e>t&&(r=e,e=t,t=r),function(n){return Math.max(e,Math.min(t,n))}}function KO(e,t,r){var n=e[0],a=e[1],s=t[0],o=t[1];return a<n?(n=Bc(a,n),s=r(o,s)):(n=Bc(n,a),s=r(s,o)),function(l){return s(n(l))}}function YO(e,t,r){var n=Math.min(e.length,t.length)-1,a=new Array(n),s=new Array(n),o=-1;for(e[n]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<n;)a[o]=Bc(e[o],e[o+1]),s[o]=r(t[o],t[o+1]);return function(l){var c=Ba(e,l,1,n)-1;return s[c](a[c](l))}}function Ua(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Us(){var e=Lm,t=Lm,r=Wn,n,a,s,o=ft,l,c,d;function u(){var h=Math.min(e.length,t.length);return o!==ft&&(o=HO(e[0],e[h-1])),l=h>2?YO:KO,c=d=null,f}function f(h){return h==null||isNaN(h=+h)?s:(c||(c=l(e.map(n),t,r)))(n(o(h)))}return f.invert=function(h){return o(a((d||(d=l(t,e.map(n),Qi)))(h)))},f.domain=function(h){return arguments.length?(e=Array.from(h,Xi),u()):e.slice()},f.range=function(h){return arguments.length?(t=Array.from(h),u()):t.slice()},f.rangeRound=function(h){return t=Array.from(h),r=Ju,u()},f.clamp=function(h){return arguments.length?(o=h?!0:ft,u()):o!==ft},f.interpolate=function(h){return arguments.length?(r=h,u()):r},f.unknown=function(h){return arguments.length?(s=h,f):s},function(h,m){return n=h,a=m,u()}}function ed(){return Us()(ft,ft)}function GO(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Zi(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,n=e.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+e.slice(r+1)]}function Ln(e){return e=Zi(Math.abs(e)),e?e[1]:NaN}function QO(e,t){return function(r,n){for(var a=r.length,s=[],o=0,l=e[0],c=0;a>0&&l>0&&(c+l+1>n&&(l=Math.max(1,n-c)),s.push(r.substring(a-=l,a+l)),!((c+=l+1)>n));)l=e[o=(o+1)%e.length];return s.reverse().join(t)}}function XO(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var ZO=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Ia(e){if(!(t=ZO.exec(e)))throw new Error("invalid format: "+e);var t;return new td({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Ia.prototype=td.prototype;function td(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}td.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function JO(e){e:for(var t=e.length,r=1,n=-1,a;r<t;++r)switch(e[r]){case".":n=a=r;break;case"0":n===0&&(n=r),a=r;break;default:if(!+e[r])break e;n>0&&(n=0);break}return n>0?e.slice(0,n)+e.slice(a+1):e}var zx;function eC(e,t){var r=Zi(e,t);if(!r)return e+"";var n=r[0],a=r[1],s=a-(zx=Math.max(-8,Math.min(8,Math.floor(a/3)))*3)+1,o=n.length;return s===o?n:s>o?n+new Array(s-o+1).join("0"):s>0?n.slice(0,s)+"."+n.slice(s):"0."+new Array(1-s).join("0")+Zi(e,Math.max(0,t+s-1))[0]}function Fm(e,t){var r=Zi(e,t);if(!r)return e+"";var n=r[0],a=r[1];return a<0?"0."+new Array(-a).join("0")+n:n.length>a+1?n.slice(0,a+1)+"."+n.slice(a+1):n+new Array(a-n.length+2).join("0")}const Bm={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:GO,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>Fm(e*100,t),r:Fm,s:eC,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function qm(e){return e}var Um=Array.prototype.map,zm=["y","z","a","f","p","n","Âµ","m","","k","M","G","T","P","E","Z","Y"];function tC(e){var t=e.grouping===void 0||e.thousands===void 0?qm:QO(Um.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",n=e.currency===void 0?"":e.currency[1]+"",a=e.decimal===void 0?".":e.decimal+"",s=e.numerals===void 0?qm:XO(Um.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",l=e.minus===void 0?"âˆ’":e.minus+"",c=e.nan===void 0?"NaN":e.nan+"";function d(f){f=Ia(f);var h=f.fill,m=f.align,b=f.sign,g=f.symbol,p=f.zero,v=f.width,w=f.comma,y=f.precision,S=f.trim,j=f.type;j==="n"?(w=!0,j="g"):Bm[j]||(y===void 0&&(y=12),S=!0,j="g"),(p||h==="0"&&m==="=")&&(p=!0,h="0",m="=");var k=g==="$"?r:g==="#"&&/[boxX]/.test(j)?"0"+j.toLowerCase():"",N=g==="$"?n:/[%p]/.test(j)?o:"",P=Bm[j],D=/[defgprs%]/.test(j);y=y===void 0?6:/[gprs]/.test(j)?Math.max(1,Math.min(21,y)):Math.max(0,Math.min(20,y));function C(O){var A=k,B=N,M,F,V;if(j==="c")B=P(O)+B,O="";else{O=+O;var q=O<0||1/O<0;if(O=isNaN(O)?c:P(Math.abs(O),y),S&&(O=JO(O)),q&&+O==0&&b!=="+"&&(q=!1),A=(q?b==="("?b:l:b==="-"||b==="("?"":b)+A,B=(j==="s"?zm[8+zx/3]:"")+B+(q&&b==="("?")":""),D){for(M=-1,F=O.length;++M<F;)if(V=O.charCodeAt(M),48>V||V>57){B=(V===46?a+O.slice(M+1):O.slice(M))+B,O=O.slice(0,M);break}}}w&&!p&&(O=t(O,1/0));var K=A.length+O.length+B.length,ne=K<v?new Array(v-K+1).join(h):"";switch(w&&p&&(O=t(ne+O,ne.length?v-B.length:1/0),ne=""),m){case"<":O=A+O+B+ne;break;case"=":O=A+ne+O+B;break;case"^":O=ne.slice(0,K=ne.length>>1)+A+O+B+ne.slice(K);break;default:O=ne+A+O+B;break}return s(O)}return C.toString=function(){return f+""},C}function u(f,h){var m=d((f=Ia(f),f.type="f",f)),b=Math.max(-8,Math.min(8,Math.floor(Ln(h)/3)))*3,g=Math.pow(10,-b),p=zm[8+b/3];return function(v){return m(g*v)+p}}return{format:d,formatPrefix:u}}var gi,rd,Vx;rC({thousands:",",grouping:[3],currency:["$",""]});function rC(e){return gi=tC(e),rd=gi.format,Vx=gi.formatPrefix,gi}function nC(e){return Math.max(0,-Ln(Math.abs(e)))}function aC(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Ln(t)/3)))*3-Ln(Math.abs(e)))}function iC(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Ln(t)-Ln(e))+1}function Wx(e,t,r,n){var a=Rc(e,t,r),s;switch(n=Ia(n??",f"),n.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return n.precision==null&&!isNaN(s=aC(a,o))&&(n.precision=s),Vx(n,o)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(s=iC(a,Math.max(Math.abs(e),Math.abs(t))))&&(n.precision=s-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(s=nC(a))&&(n.precision=s-(n.type==="%")*2);break}}return rd(n)}function qr(e){var t=e.domain;return e.ticks=function(r){var n=t();return Ec(n[0],n[n.length-1],r??10)},e.tickFormat=function(r,n){var a=t();return Wx(a[0],a[a.length-1],r??10,n)},e.nice=function(r){r==null&&(r=10);var n=t(),a=0,s=n.length-1,o=n[a],l=n[s],c,d,u=10;for(l<o&&(d=o,o=l,l=d,d=a,a=s,s=d);u-- >0;){if(d=_c(o,l,r),d===c)return n[a]=o,n[s]=l,t(n);if(d>0)o=Math.floor(o/d)*d,l=Math.ceil(l/d)*d;else if(d<0)o=Math.ceil(o*d)/d,l=Math.floor(l*d)/d;else break;c=d}return e},e}function Hx(){var e=ed();return e.copy=function(){return Ua(e,Hx())},qt.apply(e,arguments),qr(e)}function Kx(e){var t;function r(n){return n==null||isNaN(n=+n)?t:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(e=Array.from(n,Xi),r):e.slice()},r.unknown=function(n){return arguments.length?(t=n,r):t},r.copy=function(){return Kx(e).unknown(t)},e=arguments.length?Array.from(e,Xi):[0,1],qr(r)}function Yx(e,t){e=e.slice();var r=0,n=e.length-1,a=e[r],s=e[n],o;return s<a&&(o=r,r=n,n=o,o=a,a=s,s=o),e[r]=t.floor(a),e[n]=t.ceil(s),e}function Vm(e){return Math.log(e)}function Wm(e){return Math.exp(e)}function sC(e){return-Math.log(-e)}function oC(e){return-Math.exp(-e)}function lC(e){return isFinite(e)?+("1e"+e):e<0?0:e}function cC(e){return e===10?lC:e===Math.E?Math.exp:t=>Math.pow(e,t)}function uC(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function Hm(e){return(t,r)=>-e(-t,r)}function nd(e){const t=e(Vm,Wm),r=t.domain;let n=10,a,s;function o(){return a=uC(n),s=cC(n),r()[0]<0?(a=Hm(a),s=Hm(s),e(sC,oC)):e(Vm,Wm),t}return t.base=function(l){return arguments.length?(n=+l,o()):n},t.domain=function(l){return arguments.length?(r(l),o()):r()},t.ticks=l=>{const c=r();let d=c[0],u=c[c.length-1];const f=u<d;f&&([d,u]=[u,d]);let h=a(d),m=a(u),b,g;const p=l==null?10:+l;let v=[];if(!(n%1)&&m-h<p){if(h=Math.floor(h),m=Math.ceil(m),d>0){for(;h<=m;++h)for(b=1;b<n;++b)if(g=h<0?b/s(-h):b*s(h),!(g<d)){if(g>u)break;v.push(g)}}else for(;h<=m;++h)for(b=n-1;b>=1;--b)if(g=h>0?b/s(-h):b*s(h),!(g<d)){if(g>u)break;v.push(g)}v.length*2<p&&(v=Ec(d,u,p))}else v=Ec(h,m,Math.min(m-h,p)).map(s);return f?v.reverse():v},t.tickFormat=(l,c)=>{if(l==null&&(l=10),c==null&&(c=n===10?"s":","),typeof c!="function"&&(!(n%1)&&(c=Ia(c)).precision==null&&(c.trim=!0),c=rd(c)),l===1/0)return c;const d=Math.max(1,n*l/t.ticks().length);return u=>{let f=u/s(Math.round(a(u)));return f*n<n-.5&&(f*=n),f<=d?c(u):""}},t.nice=()=>r(Yx(r(),{floor:l=>s(Math.floor(a(l))),ceil:l=>s(Math.ceil(a(l)))})),t}function Gx(){const e=nd(Us()).domain([1,10]);return e.copy=()=>Ua(e,Gx()).base(e.base()),qt.apply(e,arguments),e}function Km(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function Ym(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function ad(e){var t=1,r=e(Km(t),Ym(t));return r.constant=function(n){return arguments.length?e(Km(t=+n),Ym(t)):t},qr(r)}function Qx(){var e=ad(Us());return e.copy=function(){return Ua(e,Qx()).constant(e.constant())},qt.apply(e,arguments)}function Gm(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function dC(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function fC(e){return e<0?-e*e:e*e}function id(e){var t=e(ft,ft),r=1;function n(){return r===1?e(ft,ft):r===.5?e(dC,fC):e(Gm(r),Gm(1/r))}return t.exponent=function(a){return arguments.length?(r=+a,n()):r},qr(t)}function sd(){var e=id(Us());return e.copy=function(){return Ua(e,sd()).exponent(e.exponent())},qt.apply(e,arguments),e}function hC(){return sd.apply(null,arguments).exponent(.5)}function Qm(e){return Math.sign(e)*e*e}function mC(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function Xx(){var e=ed(),t=[0,1],r=!1,n;function a(s){var o=mC(e(s));return isNaN(o)?n:r?Math.round(o):o}return a.invert=function(s){return e.invert(Qm(s))},a.domain=function(s){return arguments.length?(e.domain(s),a):e.domain()},a.range=function(s){return arguments.length?(e.range((t=Array.from(s,Xi)).map(Qm)),a):t.slice()},a.rangeRound=function(s){return a.range(s).round(!0)},a.round=function(s){return arguments.length?(r=!!s,a):r},a.clamp=function(s){return arguments.length?(e.clamp(s),a):e.clamp()},a.unknown=function(s){return arguments.length?(n=s,a):n},a.copy=function(){return Xx(e.domain(),t).round(r).clamp(e.clamp()).unknown(n)},qt.apply(a,arguments),qr(a)}function Zx(){var e=[],t=[],r=[],n;function a(){var o=0,l=Math.max(1,t.length);for(r=new Array(l-1);++o<l;)r[o-1]=vO(e,o/l);return s}function s(o){return o==null||isNaN(o=+o)?n:t[Ba(r,o)]}return s.invertExtent=function(o){var l=t.indexOf(o);return l<0?[NaN,NaN]:[l>0?r[l-1]:e[0],l<r.length?r[l]:e[e.length-1]]},s.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let l of o)l!=null&&!isNaN(l=+l)&&e.push(l);return e.sort(Er),a()},s.range=function(o){return arguments.length?(t=Array.from(o),a()):t.slice()},s.unknown=function(o){return arguments.length?(n=o,s):n},s.quantiles=function(){return r.slice()},s.copy=function(){return Zx().domain(e).range(t).unknown(n)},qt.apply(s,arguments)}function Jx(){var e=0,t=1,r=1,n=[.5],a=[0,1],s;function o(c){return c!=null&&c<=c?a[Ba(n,c,0,r)]:s}function l(){var c=-1;for(n=new Array(r);++c<r;)n[c]=((c+1)*t-(c-r)*e)/(r+1);return o}return o.domain=function(c){return arguments.length?([e,t]=c,e=+e,t=+t,l()):[e,t]},o.range=function(c){return arguments.length?(r=(a=Array.from(c)).length-1,l()):a.slice()},o.invertExtent=function(c){var d=a.indexOf(c);return d<0?[NaN,NaN]:d<1?[e,n[0]]:d>=r?[n[r-1],t]:[n[d-1],n[d]]},o.unknown=function(c){return arguments.length&&(s=c),o},o.thresholds=function(){return n.slice()},o.copy=function(){return Jx().domain([e,t]).range(a).unknown(s)},qt.apply(qr(o),arguments)}function ev(){var e=[.5],t=[0,1],r,n=1;function a(s){return s!=null&&s<=s?t[Ba(e,s,0,n)]:r}return a.domain=function(s){return arguments.length?(e=Array.from(s),n=Math.min(e.length,t.length-1),a):e.slice()},a.range=function(s){return arguments.length?(t=Array.from(s),n=Math.min(e.length,t.length-1),a):t.slice()},a.invertExtent=function(s){var o=t.indexOf(s);return[e[o-1],e[o]]},a.unknown=function(s){return arguments.length?(r=s,a):r},a.copy=function(){return ev().domain(e).range(t).unknown(r)},qt.apply(a,arguments)}const Al=new Date,Dl=new Date;function Ge(e,t,r,n){function a(s){return e(s=arguments.length===0?new Date:new Date(+s)),s}return a.floor=s=>(e(s=new Date(+s)),s),a.ceil=s=>(e(s=new Date(s-1)),t(s,1),e(s),s),a.round=s=>{const o=a(s),l=a.ceil(s);return s-o<l-s?o:l},a.offset=(s,o)=>(t(s=new Date(+s),o==null?1:Math.floor(o)),s),a.range=(s,o,l)=>{const c=[];if(s=a.ceil(s),l=l==null?1:Math.floor(l),!(s<o)||!(l>0))return c;let d;do c.push(d=new Date(+s)),t(s,l),e(s);while(d<s&&s<o);return c},a.filter=s=>Ge(o=>{if(o>=o)for(;e(o),!s(o);)o.setTime(o-1)},(o,l)=>{if(o>=o)if(l<0)for(;++l<=0;)for(;t(o,-1),!s(o););else for(;--l>=0;)for(;t(o,1),!s(o););}),r&&(a.count=(s,o)=>(Al.setTime(+s),Dl.setTime(+o),e(Al),e(Dl),Math.floor(r(Al,Dl))),a.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?a.filter(n?o=>n(o)%s===0:o=>a.count(0,o)%s===0):a)),a}const Ji=Ge(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);Ji.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Ge(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):Ji);Ji.range;const cr=1e3,Lt=cr*60,ur=Lt*60,pr=ur*24,od=pr*7,Xm=pr*30,Tl=pr*365,nn=Ge(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*cr)},(e,t)=>(t-e)/cr,e=>e.getUTCSeconds());nn.range;const ld=Ge(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*cr)},(e,t)=>{e.setTime(+e+t*Lt)},(e,t)=>(t-e)/Lt,e=>e.getMinutes());ld.range;const cd=Ge(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Lt)},(e,t)=>(t-e)/Lt,e=>e.getUTCMinutes());cd.range;const ud=Ge(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*cr-e.getMinutes()*Lt)},(e,t)=>{e.setTime(+e+t*ur)},(e,t)=>(t-e)/ur,e=>e.getHours());ud.range;const dd=Ge(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*ur)},(e,t)=>(t-e)/ur,e=>e.getUTCHours());dd.range;const za=Ge(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Lt)/pr,e=>e.getDate()-1);za.range;const zs=Ge(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/pr,e=>e.getUTCDate()-1);zs.range;const tv=Ge(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/pr,e=>Math.floor(e/pr));tv.range;function xn(e){return Ge(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,r)=>{t.setDate(t.getDate()+r*7)},(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*Lt)/od)}const Vs=xn(0),es=xn(1),pC=xn(2),gC=xn(3),Fn=xn(4),xC=xn(5),vC=xn(6);Vs.range;es.range;pC.range;gC.range;Fn.range;xC.range;vC.range;function vn(e){return Ge(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r*7)},(t,r)=>(r-t)/od)}const Ws=vn(0),ts=vn(1),bC=vn(2),yC=vn(3),Bn=vn(4),wC=vn(5),jC=vn(6);Ws.range;ts.range;bC.range;yC.range;Bn.range;wC.range;jC.range;const fd=Ge(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());fd.range;const hd=Ge(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());hd.range;const gr=Ge(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());gr.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Ge(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)});gr.range;const xr=Ge(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());xr.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Ge(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)});xr.range;function rv(e,t,r,n,a,s){const o=[[nn,1,cr],[nn,5,5*cr],[nn,15,15*cr],[nn,30,30*cr],[s,1,Lt],[s,5,5*Lt],[s,15,15*Lt],[s,30,30*Lt],[a,1,ur],[a,3,3*ur],[a,6,6*ur],[a,12,12*ur],[n,1,pr],[n,2,2*pr],[r,1,od],[t,1,Xm],[t,3,3*Xm],[e,1,Tl]];function l(d,u,f){const h=u<d;h&&([d,u]=[u,d]);const m=f&&typeof f.range=="function"?f:c(d,u,f),b=m?m.range(d,+u+1):[];return h?b.reverse():b}function c(d,u,f){const h=Math.abs(u-d)/f,m=Yu(([,,p])=>p).right(o,h);if(m===o.length)return e.every(Rc(d/Tl,u/Tl,f));if(m===0)return Ji.every(Math.max(Rc(d,u,f),1));const[b,g]=o[h/o[m-1][2]<o[m][2]/h?m-1:m];return b.every(g)}return[l,c]}const[NC,SC]=rv(xr,hd,Ws,tv,dd,cd),[kC,PC]=rv(gr,fd,Vs,za,ud,ld);function Il(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function Ml(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function ca(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function OC(e){var t=e.dateTime,r=e.date,n=e.time,a=e.periods,s=e.days,o=e.shortDays,l=e.months,c=e.shortMonths,d=ua(a),u=da(a),f=ua(s),h=da(s),m=ua(o),b=da(o),g=ua(l),p=da(l),v=ua(c),w=da(c),y={a:q,A:K,b:ne,B:Z,c:null,d:np,e:np,f:QC,g:s5,G:l5,H:KC,I:YC,j:GC,L:nv,m:XC,M:ZC,p:T,q:_,Q:sp,s:op,S:JC,u:e5,U:t5,V:r5,w:n5,W:a5,x:null,X:null,y:i5,Y:o5,Z:c5,"%":ip},S={a:Y,A:ee,b:W,B:H,c:null,d:ap,e:ap,f:h5,g:N5,G:k5,H:u5,I:d5,j:f5,L:iv,m:m5,M:p5,p:le,q:$,Q:sp,s:op,S:g5,u:x5,U:v5,V:b5,w:y5,W:w5,x:null,X:null,y:j5,Y:S5,Z:P5,"%":ip},j={a:C,A:O,b:A,B,c:M,d:tp,e:tp,f:zC,g:ep,G:Jm,H:rp,I:rp,j:FC,L:UC,m:LC,M:BC,p:D,q:$C,Q:WC,s:HC,S:qC,u:IC,U:MC,V:EC,w:TC,W:_C,x:F,X:V,y:ep,Y:Jm,Z:RC,"%":VC};y.x=k(r,y),y.X=k(n,y),y.c=k(t,y),S.x=k(r,S),S.X=k(n,S),S.c=k(t,S);function k(L,G){return function(R){var E=[],te=-1,re=0,ae=L.length,Q,oe,Ee;for(R instanceof Date||(R=new Date(+R));++te<ae;)L.charCodeAt(te)===37&&(E.push(L.slice(re,te)),(oe=Zm[Q=L.charAt(++te)])!=null?Q=L.charAt(++te):oe=Q==="e"?" ":"0",(Ee=G[Q])&&(Q=Ee(R,oe)),E.push(Q),re=te+1);return E.push(L.slice(re,te)),E.join("")}}function N(L,G){return function(R){var E=ca(1900,void 0,1),te=P(E,L,R+="",0),re,ae;if(te!=R.length)return null;if("Q"in E)return new Date(E.Q);if("s"in E)return new Date(E.s*1e3+("L"in E?E.L:0));if(G&&!("Z"in E)&&(E.Z=0),"p"in E&&(E.H=E.H%12+E.p*12),E.m===void 0&&(E.m="q"in E?E.q:0),"V"in E){if(E.V<1||E.V>53)return null;"w"in E||(E.w=1),"Z"in E?(re=Ml(ca(E.y,0,1)),ae=re.getUTCDay(),re=ae>4||ae===0?ts.ceil(re):ts(re),re=zs.offset(re,(E.V-1)*7),E.y=re.getUTCFullYear(),E.m=re.getUTCMonth(),E.d=re.getUTCDate()+(E.w+6)%7):(re=Il(ca(E.y,0,1)),ae=re.getDay(),re=ae>4||ae===0?es.ceil(re):es(re),re=za.offset(re,(E.V-1)*7),E.y=re.getFullYear(),E.m=re.getMonth(),E.d=re.getDate()+(E.w+6)%7)}else("W"in E||"U"in E)&&("w"in E||(E.w="u"in E?E.u%7:"W"in E?1:0),ae="Z"in E?Ml(ca(E.y,0,1)).getUTCDay():Il(ca(E.y,0,1)).getDay(),E.m=0,E.d="W"in E?(E.w+6)%7+E.W*7-(ae+5)%7:E.w+E.U*7-(ae+6)%7);return"Z"in E?(E.H+=E.Z/100|0,E.M+=E.Z%100,Ml(E)):Il(E)}}function P(L,G,R,E){for(var te=0,re=G.length,ae=R.length,Q,oe;te<re;){if(E>=ae)return-1;if(Q=G.charCodeAt(te++),Q===37){if(Q=G.charAt(te++),oe=j[Q in Zm?G.charAt(te++):Q],!oe||(E=oe(L,R,E))<0)return-1}else if(Q!=R.charCodeAt(E++))return-1}return E}function D(L,G,R){var E=d.exec(G.slice(R));return E?(L.p=u.get(E[0].toLowerCase()),R+E[0].length):-1}function C(L,G,R){var E=m.exec(G.slice(R));return E?(L.w=b.get(E[0].toLowerCase()),R+E[0].length):-1}function O(L,G,R){var E=f.exec(G.slice(R));return E?(L.w=h.get(E[0].toLowerCase()),R+E[0].length):-1}function A(L,G,R){var E=v.exec(G.slice(R));return E?(L.m=w.get(E[0].toLowerCase()),R+E[0].length):-1}function B(L,G,R){var E=g.exec(G.slice(R));return E?(L.m=p.get(E[0].toLowerCase()),R+E[0].length):-1}function M(L,G,R){return P(L,t,G,R)}function F(L,G,R){return P(L,r,G,R)}function V(L,G,R){return P(L,n,G,R)}function q(L){return o[L.getDay()]}function K(L){return s[L.getDay()]}function ne(L){return c[L.getMonth()]}function Z(L){return l[L.getMonth()]}function T(L){return a[+(L.getHours()>=12)]}function _(L){return 1+~~(L.getMonth()/3)}function Y(L){return o[L.getUTCDay()]}function ee(L){return s[L.getUTCDay()]}function W(L){return c[L.getUTCMonth()]}function H(L){return l[L.getUTCMonth()]}function le(L){return a[+(L.getUTCHours()>=12)]}function $(L){return 1+~~(L.getUTCMonth()/3)}return{format:function(L){var G=k(L+="",y);return G.toString=function(){return L},G},parse:function(L){var G=N(L+="",!1);return G.toString=function(){return L},G},utcFormat:function(L){var G=k(L+="",S);return G.toString=function(){return L},G},utcParse:function(L){var G=N(L+="",!0);return G.toString=function(){return L},G}}}var Zm={"-":"",_:" ",0:"0"},tt=/^\s*\d+/,CC=/^%/,AC=/[\\^$*+?|[\]().{}]/g;function Ne(e,t,r){var n=e<0?"-":"",a=(n?-e:e)+"",s=a.length;return n+(s<r?new Array(r-s+1).join(t)+a:a)}function DC(e){return e.replace(AC,"\\$&")}function ua(e){return new RegExp("^(?:"+e.map(DC).join("|")+")","i")}function da(e){return new Map(e.map((t,r)=>[t.toLowerCase(),r]))}function TC(e,t,r){var n=tt.exec(t.slice(r,r+1));return n?(e.w=+n[0],r+n[0].length):-1}function IC(e,t,r){var n=tt.exec(t.slice(r,r+1));return n?(e.u=+n[0],r+n[0].length):-1}function MC(e,t,r){var n=tt.exec(t.slice(r,r+2));return n?(e.U=+n[0],r+n[0].length):-1}function EC(e,t,r){var n=tt.exec(t.slice(r,r+2));return n?(e.V=+n[0],r+n[0].length):-1}function _C(e,t,r){var n=tt.exec(t.slice(r,r+2));return n?(e.W=+n[0],r+n[0].length):-1}function Jm(e,t,r){var n=tt.exec(t.slice(r,r+4));return n?(e.y=+n[0],r+n[0].length):-1}function ep(e,t,r){var n=tt.exec(t.slice(r,r+2));return n?(e.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function RC(e,t,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return n?(e.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function $C(e,t,r){var n=tt.exec(t.slice(r,r+1));return n?(e.q=n[0]*3-3,r+n[0].length):-1}function LC(e,t,r){var n=tt.exec(t.slice(r,r+2));return n?(e.m=n[0]-1,r+n[0].length):-1}function tp(e,t,r){var n=tt.exec(t.slice(r,r+2));return n?(e.d=+n[0],r+n[0].length):-1}function FC(e,t,r){var n=tt.exec(t.slice(r,r+3));return n?(e.m=0,e.d=+n[0],r+n[0].length):-1}function rp(e,t,r){var n=tt.exec(t.slice(r,r+2));return n?(e.H=+n[0],r+n[0].length):-1}function BC(e,t,r){var n=tt.exec(t.slice(r,r+2));return n?(e.M=+n[0],r+n[0].length):-1}function qC(e,t,r){var n=tt.exec(t.slice(r,r+2));return n?(e.S=+n[0],r+n[0].length):-1}function UC(e,t,r){var n=tt.exec(t.slice(r,r+3));return n?(e.L=+n[0],r+n[0].length):-1}function zC(e,t,r){var n=tt.exec(t.slice(r,r+6));return n?(e.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function VC(e,t,r){var n=CC.exec(t.slice(r,r+1));return n?r+n[0].length:-1}function WC(e,t,r){var n=tt.exec(t.slice(r));return n?(e.Q=+n[0],r+n[0].length):-1}function HC(e,t,r){var n=tt.exec(t.slice(r));return n?(e.s=+n[0],r+n[0].length):-1}function np(e,t){return Ne(e.getDate(),t,2)}function KC(e,t){return Ne(e.getHours(),t,2)}function YC(e,t){return Ne(e.getHours()%12||12,t,2)}function GC(e,t){return Ne(1+za.count(gr(e),e),t,3)}function nv(e,t){return Ne(e.getMilliseconds(),t,3)}function QC(e,t){return nv(e,t)+"000"}function XC(e,t){return Ne(e.getMonth()+1,t,2)}function ZC(e,t){return Ne(e.getMinutes(),t,2)}function JC(e,t){return Ne(e.getSeconds(),t,2)}function e5(e){var t=e.getDay();return t===0?7:t}function t5(e,t){return Ne(Vs.count(gr(e)-1,e),t,2)}function av(e){var t=e.getDay();return t>=4||t===0?Fn(e):Fn.ceil(e)}function r5(e,t){return e=av(e),Ne(Fn.count(gr(e),e)+(gr(e).getDay()===4),t,2)}function n5(e){return e.getDay()}function a5(e,t){return Ne(es.count(gr(e)-1,e),t,2)}function i5(e,t){return Ne(e.getFullYear()%100,t,2)}function s5(e,t){return e=av(e),Ne(e.getFullYear()%100,t,2)}function o5(e,t){return Ne(e.getFullYear()%1e4,t,4)}function l5(e,t){var r=e.getDay();return e=r>=4||r===0?Fn(e):Fn.ceil(e),Ne(e.getFullYear()%1e4,t,4)}function c5(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Ne(t/60|0,"0",2)+Ne(t%60,"0",2)}function ap(e,t){return Ne(e.getUTCDate(),t,2)}function u5(e,t){return Ne(e.getUTCHours(),t,2)}function d5(e,t){return Ne(e.getUTCHours()%12||12,t,2)}function f5(e,t){return Ne(1+zs.count(xr(e),e),t,3)}function iv(e,t){return Ne(e.getUTCMilliseconds(),t,3)}function h5(e,t){return iv(e,t)+"000"}function m5(e,t){return Ne(e.getUTCMonth()+1,t,2)}function p5(e,t){return Ne(e.getUTCMinutes(),t,2)}function g5(e,t){return Ne(e.getUTCSeconds(),t,2)}function x5(e){var t=e.getUTCDay();return t===0?7:t}function v5(e,t){return Ne(Ws.count(xr(e)-1,e),t,2)}function sv(e){var t=e.getUTCDay();return t>=4||t===0?Bn(e):Bn.ceil(e)}function b5(e,t){return e=sv(e),Ne(Bn.count(xr(e),e)+(xr(e).getUTCDay()===4),t,2)}function y5(e){return e.getUTCDay()}function w5(e,t){return Ne(ts.count(xr(e)-1,e),t,2)}function j5(e,t){return Ne(e.getUTCFullYear()%100,t,2)}function N5(e,t){return e=sv(e),Ne(e.getUTCFullYear()%100,t,2)}function S5(e,t){return Ne(e.getUTCFullYear()%1e4,t,4)}function k5(e,t){var r=e.getUTCDay();return e=r>=4||r===0?Bn(e):Bn.ceil(e),Ne(e.getUTCFullYear()%1e4,t,4)}function P5(){return"+0000"}function ip(){return"%"}function sp(e){return+e}function op(e){return Math.floor(+e/1e3)}var Pn,ov,lv;O5({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function O5(e){return Pn=OC(e),ov=Pn.format,Pn.parse,lv=Pn.utcFormat,Pn.utcParse,Pn}function C5(e){return new Date(e)}function A5(e){return e instanceof Date?+e:+new Date(+e)}function md(e,t,r,n,a,s,o,l,c,d){var u=ed(),f=u.invert,h=u.domain,m=d(".%L"),b=d(":%S"),g=d("%I:%M"),p=d("%I %p"),v=d("%a %d"),w=d("%b %d"),y=d("%B"),S=d("%Y");function j(k){return(c(k)<k?m:l(k)<k?b:o(k)<k?g:s(k)<k?p:n(k)<k?a(k)<k?v:w:r(k)<k?y:S)(k)}return u.invert=function(k){return new Date(f(k))},u.domain=function(k){return arguments.length?h(Array.from(k,A5)):h().map(C5)},u.ticks=function(k){var N=h();return e(N[0],N[N.length-1],k??10)},u.tickFormat=function(k,N){return N==null?j:d(N)},u.nice=function(k){var N=h();return(!k||typeof k.range!="function")&&(k=t(N[0],N[N.length-1],k??10)),k?h(Yx(N,k)):u},u.copy=function(){return Ua(u,md(e,t,r,n,a,s,o,l,c,d))},u}function D5(){return qt.apply(md(kC,PC,gr,fd,Vs,za,ud,ld,nn,ov).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function T5(){return qt.apply(md(NC,SC,xr,hd,Ws,zs,dd,cd,nn,lv).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Hs(){var e=0,t=1,r,n,a,s,o=ft,l=!1,c;function d(f){return f==null||isNaN(f=+f)?c:o(a===0?.5:(f=(s(f)-r)*a,l?Math.max(0,Math.min(1,f)):f))}d.domain=function(f){return arguments.length?([e,t]=f,r=s(e=+e),n=s(t=+t),a=r===n?0:1/(n-r),d):[e,t]},d.clamp=function(f){return arguments.length?(l=!!f,d):l},d.interpolator=function(f){return arguments.length?(o=f,d):o};function u(f){return function(h){var m,b;return arguments.length?([m,b]=h,o=f(m,b),d):[o(0),o(1)]}}return d.range=u(Wn),d.rangeRound=u(Ju),d.unknown=function(f){return arguments.length?(c=f,d):c},function(f){return s=f,r=f(e),n=f(t),a=r===n?0:1/(n-r),d}}function Ur(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function cv(){var e=qr(Hs()(ft));return e.copy=function(){return Ur(e,cv())},jr.apply(e,arguments)}function uv(){var e=nd(Hs()).domain([1,10]);return e.copy=function(){return Ur(e,uv()).base(e.base())},jr.apply(e,arguments)}function dv(){var e=ad(Hs());return e.copy=function(){return Ur(e,dv()).constant(e.constant())},jr.apply(e,arguments)}function pd(){var e=id(Hs());return e.copy=function(){return Ur(e,pd()).exponent(e.exponent())},jr.apply(e,arguments)}function I5(){return pd.apply(null,arguments).exponent(.5)}function fv(){var e=[],t=ft;function r(n){if(n!=null&&!isNaN(n=+n))return t((Ba(e,n,1)-1)/(e.length-1))}return r.domain=function(n){if(!arguments.length)return e.slice();e=[];for(let a of n)a!=null&&!isNaN(a=+a)&&e.push(a);return e.sort(Er),r},r.interpolator=function(n){return arguments.length?(t=n,r):t},r.range=function(){return e.map((n,a)=>t(a/(e.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(a,s)=>xO(e,s/n))},r.copy=function(){return fv(t).domain(e)},jr.apply(r,arguments)}function Ks(){var e=0,t=.5,r=1,n=1,a,s,o,l,c,d=ft,u,f=!1,h;function m(g){return isNaN(g=+g)?h:(g=.5+((g=+u(g))-s)*(n*g<n*s?l:c),d(f?Math.max(0,Math.min(1,g)):g))}m.domain=function(g){return arguments.length?([e,t,r]=g,a=u(e=+e),s=u(t=+t),o=u(r=+r),l=a===s?0:.5/(s-a),c=s===o?0:.5/(o-s),n=s<a?-1:1,m):[e,t,r]},m.clamp=function(g){return arguments.length?(f=!!g,m):f},m.interpolator=function(g){return arguments.length?(d=g,m):d};function b(g){return function(p){var v,w,y;return arguments.length?([v,w,y]=p,d=VO(g,[v,w,y]),m):[d(0),d(.5),d(1)]}}return m.range=b(Wn),m.rangeRound=b(Ju),m.unknown=function(g){return arguments.length?(h=g,m):h},function(g){return u=g,a=g(e),s=g(t),o=g(r),l=a===s?0:.5/(s-a),c=s===o?0:.5/(o-s),n=s<a?-1:1,m}}function hv(){var e=qr(Ks()(ft));return e.copy=function(){return Ur(e,hv())},jr.apply(e,arguments)}function mv(){var e=nd(Ks()).domain([.1,1,10]);return e.copy=function(){return Ur(e,mv()).base(e.base())},jr.apply(e,arguments)}function pv(){var e=ad(Ks());return e.copy=function(){return Ur(e,pv()).constant(e.constant())},jr.apply(e,arguments)}function gd(){var e=id(Ks());return e.copy=function(){return Ur(e,gd()).exponent(e.exponent())},jr.apply(e,arguments)}function M5(){return gd.apply(null,arguments).exponent(.5)}const va=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:Qu,scaleDiverging:hv,scaleDivergingLog:mv,scaleDivergingPow:gd,scaleDivergingSqrt:M5,scaleDivergingSymlog:pv,scaleIdentity:Kx,scaleImplicit:$c,scaleLinear:Hx,scaleLog:Gx,scaleOrdinal:Gu,scalePoint:yO,scalePow:sd,scaleQuantile:Zx,scaleQuantize:Jx,scaleRadial:Xx,scaleSequential:cv,scaleSequentialLog:uv,scaleSequentialPow:pd,scaleSequentialQuantile:fv,scaleSequentialSqrt:I5,scaleSequentialSymlog:dv,scaleSqrt:hC,scaleSymlog:Qx,scaleThreshold:ev,scaleTime:D5,scaleUtc:T5,tickFormat:Wx},Symbol.toStringTag,{value:"Module"}));var zr=e=>e.chartData,E5=z([zr],e=>{var t=e.chartData!=null?e.chartData.length-1:0;return{chartData:e.chartData,computedData:e.computedData,dataEndIndex:t,dataStartIndex:0}}),Ys=(e,t,r,n)=>n?E5(e):zr(e);function qn(e){if(Array.isArray(e)&&e.length===2){var[t,r]=e;if(At(t)&&At(r))return!0}return!1}function lp(e,t,r){return r?e:[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}function _5(e,t){if(t&&typeof e!="function"&&Array.isArray(e)&&e.length===2){var[r,n]=e,a,s;if(At(r))a=r;else if(typeof r=="function")return;if(At(n))s=n;else if(typeof n=="function")return;var o=[a,s];if(qn(o))return o}}function R5(e,t,r){if(!(!r&&t==null)){if(typeof e=="function"&&t!=null)try{var n=e(t,r);if(qn(n))return lp(n,t,r)}catch{}if(Array.isArray(e)&&e.length===2){var[a,s]=e,o,l;if(a==="auto")t!=null&&(o=Math.min(...t));else if(se(a))o=a;else if(typeof a=="function")try{t!=null&&(o=a(t?.[0]))}catch{}else if(typeof a=="string"&&Gh.test(a)){var c=Gh.exec(a);if(c==null||t==null)o=void 0;else{var d=+c[1];o=t[0]-d}}else o=t?.[0];if(s==="auto")t!=null&&(l=Math.max(...t));else if(se(s))l=s;else if(typeof s=="function")try{t!=null&&(l=s(t?.[1]))}catch{}else if(typeof s=="string"&&Qh.test(s)){var u=Qh.exec(s);if(u==null||t==null)l=void 0;else{var f=+u[1];l=t[1]+f}}else l=t?.[1];var h=[o,l];if(qn(h))return t==null?h:lp(h,t,r)}}}var Hn=1e9,$5={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},vd,Re=!0,Bt="[DecimalError] ",cn=Bt+"Invalid argument: ",xd=Bt+"Exponent out of range: ",Kn=Math.floor,Xr=Math.pow,L5=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,kt,Ze=1e7,Ie=7,gv=9007199254740991,rs=Kn(gv/Ie),ie={};ie.absoluteValue=ie.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};ie.comparedTo=ie.cmp=function(e){var t,r,n,a,s=this;if(e=new s.constructor(e),s.s!==e.s)return s.s||-e.s;if(s.e!==e.e)return s.e>e.e^s.s<0?1:-1;for(n=s.d.length,a=e.d.length,t=0,r=n<a?n:a;t<r;++t)if(s.d[t]!==e.d[t])return s.d[t]>e.d[t]^s.s<0?1:-1;return n===a?0:n>a^s.s<0?1:-1};ie.decimalPlaces=ie.dp=function(){var e=this,t=e.d.length-1,r=(t-e.e)*Ie;if(t=e.d[t],t)for(;t%10==0;t/=10)r--;return r<0?0:r};ie.dividedBy=ie.div=function(e){return hr(this,new this.constructor(e))};ie.dividedToIntegerBy=ie.idiv=function(e){var t=this,r=t.constructor;return Ae(hr(t,new r(e),0,1),r.precision)};ie.equals=ie.eq=function(e){return!this.cmp(e)};ie.exponent=function(){return ze(this)};ie.greaterThan=ie.gt=function(e){return this.cmp(e)>0};ie.greaterThanOrEqualTo=ie.gte=function(e){return this.cmp(e)>=0};ie.isInteger=ie.isint=function(){return this.e>this.d.length-2};ie.isNegative=ie.isneg=function(){return this.s<0};ie.isPositive=ie.ispos=function(){return this.s>0};ie.isZero=function(){return this.s===0};ie.lessThan=ie.lt=function(e){return this.cmp(e)<0};ie.lessThanOrEqualTo=ie.lte=function(e){return this.cmp(e)<1};ie.logarithm=ie.log=function(e){var t,r=this,n=r.constructor,a=n.precision,s=a+5;if(e===void 0)e=new n(10);else if(e=new n(e),e.s<1||e.eq(kt))throw Error(Bt+"NaN");if(r.s<1)throw Error(Bt+(r.s?"NaN":"-Infinity"));return r.eq(kt)?new n(0):(Re=!1,t=hr(Ma(r,s),Ma(e,s),s),Re=!0,Ae(t,a))};ie.minus=ie.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?bv(t,e):xv(t,(e.s=-e.s,e))};ie.modulo=ie.mod=function(e){var t,r=this,n=r.constructor,a=n.precision;if(e=new n(e),!e.s)throw Error(Bt+"NaN");return r.s?(Re=!1,t=hr(r,e,0,1).times(e),Re=!0,r.minus(t)):Ae(new n(r),a)};ie.naturalExponential=ie.exp=function(){return vv(this)};ie.naturalLogarithm=ie.ln=function(){return Ma(this)};ie.negated=ie.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};ie.plus=ie.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?xv(t,e):bv(t,(e.s=-e.s,e))};ie.precision=ie.sd=function(e){var t,r,n,a=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(cn+e);if(t=ze(a)+1,n=a.d.length-1,r=n*Ie+1,n=a.d[n],n){for(;n%10==0;n/=10)r--;for(n=a.d[0];n>=10;n/=10)r++}return e&&t>r?t:r};ie.squareRoot=ie.sqrt=function(){var e,t,r,n,a,s,o,l=this,c=l.constructor;if(l.s<1){if(!l.s)return new c(0);throw Error(Bt+"NaN")}for(e=ze(l),Re=!1,a=Math.sqrt(+l),a==0||a==1/0?(t=Zt(l.d),(t.length+e)%2==0&&(t+="0"),a=Math.sqrt(t),e=Kn((e+1)/2)-(e<0||e%2),a==1/0?t="5e"+e:(t=a.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),n=new c(t)):n=new c(a.toString()),r=c.precision,a=o=r+3;;)if(s=n,n=s.plus(hr(l,s,o+2)).times(.5),Zt(s.d).slice(0,o)===(t=Zt(n.d)).slice(0,o)){if(t=t.slice(o-3,o+1),a==o&&t=="4999"){if(Ae(s,r+1,0),s.times(s).eq(l)){n=s;break}}else if(t!="9999")break;o+=4}return Re=!0,Ae(n,r)};ie.times=ie.mul=function(e){var t,r,n,a,s,o,l,c,d,u=this,f=u.constructor,h=u.d,m=(e=new f(e)).d;if(!u.s||!e.s)return new f(0);for(e.s*=u.s,r=u.e+e.e,c=h.length,d=m.length,c<d&&(s=h,h=m,m=s,o=c,c=d,d=o),s=[],o=c+d,n=o;n--;)s.push(0);for(n=d;--n>=0;){for(t=0,a=c+n;a>n;)l=s[a]+m[n]*h[a-n-1]+t,s[a--]=l%Ze|0,t=l/Ze|0;s[a]=(s[a]+t)%Ze|0}for(;!s[--o];)s.pop();return t?++r:s.shift(),e.d=s,e.e=r,Re?Ae(e,f.precision):e};ie.toDecimalPlaces=ie.todp=function(e,t){var r=this,n=r.constructor;return r=new n(r),e===void 0?r:(tr(e,0,Hn),t===void 0?t=n.rounding:tr(t,0,8),Ae(r,e+ze(r)+1,t))};ie.toExponential=function(e,t){var r,n=this,a=n.constructor;return e===void 0?r=hn(n,!0):(tr(e,0,Hn),t===void 0?t=a.rounding:tr(t,0,8),n=Ae(new a(n),e+1,t),r=hn(n,!0,e+1)),r};ie.toFixed=function(e,t){var r,n,a=this,s=a.constructor;return e===void 0?hn(a):(tr(e,0,Hn),t===void 0?t=s.rounding:tr(t,0,8),n=Ae(new s(a),e+ze(a)+1,t),r=hn(n.abs(),!1,e+ze(n)+1),a.isneg()&&!a.isZero()?"-"+r:r)};ie.toInteger=ie.toint=function(){var e=this,t=e.constructor;return Ae(new t(e),ze(e)+1,t.rounding)};ie.toNumber=function(){return+this};ie.toPower=ie.pow=function(e){var t,r,n,a,s,o,l=this,c=l.constructor,d=12,u=+(e=new c(e));if(!e.s)return new c(kt);if(l=new c(l),!l.s){if(e.s<1)throw Error(Bt+"Infinity");return l}if(l.eq(kt))return l;if(n=c.precision,e.eq(kt))return Ae(l,n);if(t=e.e,r=e.d.length-1,o=t>=r,s=l.s,o){if((r=u<0?-u:u)<=gv){for(a=new c(kt),t=Math.ceil(n/Ie+4),Re=!1;r%2&&(a=a.times(l),up(a.d,t)),r=Kn(r/2),r!==0;)l=l.times(l),up(l.d,t);return Re=!0,e.s<0?new c(kt).div(a):Ae(a,n)}}else if(s<0)throw Error(Bt+"NaN");return s=s<0&&e.d[Math.max(t,r)]&1?-1:1,l.s=1,Re=!1,a=e.times(Ma(l,n+d)),Re=!0,a=vv(a),a.s=s,a};ie.toPrecision=function(e,t){var r,n,a=this,s=a.constructor;return e===void 0?(r=ze(a),n=hn(a,r<=s.toExpNeg||r>=s.toExpPos)):(tr(e,1,Hn),t===void 0?t=s.rounding:tr(t,0,8),a=Ae(new s(a),e,t),r=ze(a),n=hn(a,e<=r||r<=s.toExpNeg,e)),n};ie.toSignificantDigits=ie.tosd=function(e,t){var r=this,n=r.constructor;return e===void 0?(e=n.precision,t=n.rounding):(tr(e,1,Hn),t===void 0?t=n.rounding:tr(t,0,8)),Ae(new n(r),e,t)};ie.toString=ie.valueOf=ie.val=ie.toJSON=ie[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=ze(e),r=e.constructor;return hn(e,t<=r.toExpNeg||t>=r.toExpPos)};function xv(e,t){var r,n,a,s,o,l,c,d,u=e.constructor,f=u.precision;if(!e.s||!t.s)return t.s||(t=new u(e)),Re?Ae(t,f):t;if(c=e.d,d=t.d,o=e.e,a=t.e,c=c.slice(),s=o-a,s){for(s<0?(n=c,s=-s,l=d.length):(n=d,a=o,l=c.length),o=Math.ceil(f/Ie),l=o>l?o+1:l+1,s>l&&(s=l,n.length=1),n.reverse();s--;)n.push(0);n.reverse()}for(l=c.length,s=d.length,l-s<0&&(s=l,n=d,d=c,c=n),r=0;s;)r=(c[--s]=c[s]+d[s]+r)/Ze|0,c[s]%=Ze;for(r&&(c.unshift(r),++a),l=c.length;c[--l]==0;)c.pop();return t.d=c,t.e=a,Re?Ae(t,f):t}function tr(e,t,r){if(e!==~~e||e<t||e>r)throw Error(cn+e)}function Zt(e){var t,r,n,a=e.length-1,s="",o=e[0];if(a>0){for(s+=o,t=1;t<a;t++)n=e[t]+"",r=Ie-n.length,r&&(s+=Ir(r)),s+=n;o=e[t],n=o+"",r=Ie-n.length,r&&(s+=Ir(r))}else if(o===0)return"0";for(;o%10===0;)o/=10;return s+o}var hr=(function(){function e(n,a){var s,o=0,l=n.length;for(n=n.slice();l--;)s=n[l]*a+o,n[l]=s%Ze|0,o=s/Ze|0;return o&&n.unshift(o),n}function t(n,a,s,o){var l,c;if(s!=o)c=s>o?1:-1;else for(l=c=0;l<s;l++)if(n[l]!=a[l]){c=n[l]>a[l]?1:-1;break}return c}function r(n,a,s){for(var o=0;s--;)n[s]-=o,o=n[s]<a[s]?1:0,n[s]=o*Ze+n[s]-a[s];for(;!n[0]&&n.length>1;)n.shift()}return function(n,a,s,o){var l,c,d,u,f,h,m,b,g,p,v,w,y,S,j,k,N,P,D=n.constructor,C=n.s==a.s?1:-1,O=n.d,A=a.d;if(!n.s)return new D(n);if(!a.s)throw Error(Bt+"Division by zero");for(c=n.e-a.e,N=A.length,j=O.length,m=new D(C),b=m.d=[],d=0;A[d]==(O[d]||0);)++d;if(A[d]>(O[d]||0)&&--c,s==null?w=s=D.precision:o?w=s+(ze(n)-ze(a))+1:w=s,w<0)return new D(0);if(w=w/Ie+2|0,d=0,N==1)for(u=0,A=A[0],w++;(d<j||u)&&w--;d++)y=u*Ze+(O[d]||0),b[d]=y/A|0,u=y%A|0;else{for(u=Ze/(A[0]+1)|0,u>1&&(A=e(A,u),O=e(O,u),N=A.length,j=O.length),S=N,g=O.slice(0,N),p=g.length;p<N;)g[p++]=0;P=A.slice(),P.unshift(0),k=A[0],A[1]>=Ze/2&&++k;do u=0,l=t(A,g,N,p),l<0?(v=g[0],N!=p&&(v=v*Ze+(g[1]||0)),u=v/k|0,u>1?(u>=Ze&&(u=Ze-1),f=e(A,u),h=f.length,p=g.length,l=t(f,g,h,p),l==1&&(u--,r(f,N<h?P:A,h))):(u==0&&(l=u=1),f=A.slice()),h=f.length,h<p&&f.unshift(0),r(g,f,p),l==-1&&(p=g.length,l=t(A,g,N,p),l<1&&(u++,r(g,N<p?P:A,p))),p=g.length):l===0&&(u++,g=[0]),b[d++]=u,l&&g[0]?g[p++]=O[S]||0:(g=[O[S]],p=1);while((S++<j||g[0]!==void 0)&&w--)}return b[0]||b.shift(),m.e=c,Ae(m,o?s+ze(m)+1:s)}})();function vv(e,t){var r,n,a,s,o,l,c=0,d=0,u=e.constructor,f=u.precision;if(ze(e)>16)throw Error(xd+ze(e));if(!e.s)return new u(kt);for(Re=!1,l=f,o=new u(.03125);e.abs().gte(.1);)e=e.times(o),d+=5;for(n=Math.log(Xr(2,d))/Math.LN10*2+5|0,l+=n,r=a=s=new u(kt),u.precision=l;;){if(a=Ae(a.times(e),l),r=r.times(++c),o=s.plus(hr(a,r,l)),Zt(o.d).slice(0,l)===Zt(s.d).slice(0,l)){for(;d--;)s=Ae(s.times(s),l);return u.precision=f,t==null?(Re=!0,Ae(s,f)):s}s=o}}function ze(e){for(var t=e.e*Ie,r=e.d[0];r>=10;r/=10)t++;return t}function El(e,t,r){if(t>e.LN10.sd())throw Re=!0,r&&(e.precision=r),Error(Bt+"LN10 precision limit exceeded");return Ae(new e(e.LN10),t)}function Ir(e){for(var t="";e--;)t+="0";return t}function Ma(e,t){var r,n,a,s,o,l,c,d,u,f=1,h=10,m=e,b=m.d,g=m.constructor,p=g.precision;if(m.s<1)throw Error(Bt+(m.s?"NaN":"-Infinity"));if(m.eq(kt))return new g(0);if(t==null?(Re=!1,d=p):d=t,m.eq(10))return t==null&&(Re=!0),El(g,d);if(d+=h,g.precision=d,r=Zt(b),n=r.charAt(0),s=ze(m),Math.abs(s)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)m=m.times(e),r=Zt(m.d),n=r.charAt(0),f++;s=ze(m),n>1?(m=new g("0."+r),s++):m=new g(n+"."+r.slice(1))}else return c=El(g,d+2,p).times(s+""),m=Ma(new g(n+"."+r.slice(1)),d-h).plus(c),g.precision=p,t==null?(Re=!0,Ae(m,p)):m;for(l=o=m=hr(m.minus(kt),m.plus(kt),d),u=Ae(m.times(m),d),a=3;;){if(o=Ae(o.times(u),d),c=l.plus(hr(o,new g(a),d)),Zt(c.d).slice(0,d)===Zt(l.d).slice(0,d))return l=l.times(2),s!==0&&(l=l.plus(El(g,d+2,p).times(s+""))),l=hr(l,new g(f),d),g.precision=p,t==null?(Re=!0,Ae(l,p)):l;l=c,a+=2}}function cp(e,t){var r,n,a;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(r<0&&(r=n),r+=+t.slice(n+1),t=t.substring(0,n)):r<0&&(r=t.length),n=0;t.charCodeAt(n)===48;)++n;for(a=t.length;t.charCodeAt(a-1)===48;)--a;if(t=t.slice(n,a),t){if(a-=n,r=r-n-1,e.e=Kn(r/Ie),e.d=[],n=(r+1)%Ie,r<0&&(n+=Ie),n<a){for(n&&e.d.push(+t.slice(0,n)),a-=Ie;n<a;)e.d.push(+t.slice(n,n+=Ie));t=t.slice(n),n=Ie-t.length}else n-=a;for(;n--;)t+="0";if(e.d.push(+t),Re&&(e.e>rs||e.e<-rs))throw Error(xd+r)}else e.s=0,e.e=0,e.d=[0];return e}function Ae(e,t,r){var n,a,s,o,l,c,d,u,f=e.d;for(o=1,s=f[0];s>=10;s/=10)o++;if(n=t-o,n<0)n+=Ie,a=t,d=f[u=0];else{if(u=Math.ceil((n+1)/Ie),s=f.length,u>=s)return e;for(d=s=f[u],o=1;s>=10;s/=10)o++;n%=Ie,a=n-Ie+o}if(r!==void 0&&(s=Xr(10,o-a-1),l=d/s%10|0,c=t<0||f[u+1]!==void 0||d%s,c=r<4?(l||c)&&(r==0||r==(e.s<0?3:2)):l>5||l==5&&(r==4||c||r==6&&(n>0?a>0?d/Xr(10,o-a):0:f[u-1])%10&1||r==(e.s<0?8:7))),t<1||!f[0])return c?(s=ze(e),f.length=1,t=t-s-1,f[0]=Xr(10,(Ie-t%Ie)%Ie),e.e=Kn(-t/Ie)||0):(f.length=1,f[0]=e.e=e.s=0),e;if(n==0?(f.length=u,s=1,u--):(f.length=u+1,s=Xr(10,Ie-n),f[u]=a>0?(d/Xr(10,o-a)%Xr(10,a)|0)*s:0),c)for(;;)if(u==0){(f[0]+=s)==Ze&&(f[0]=1,++e.e);break}else{if(f[u]+=s,f[u]!=Ze)break;f[u--]=0,s=1}for(n=f.length;f[--n]===0;)f.pop();if(Re&&(e.e>rs||e.e<-rs))throw Error(xd+ze(e));return e}function bv(e,t){var r,n,a,s,o,l,c,d,u,f,h=e.constructor,m=h.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new h(e),Re?Ae(t,m):t;if(c=e.d,f=t.d,n=t.e,d=e.e,c=c.slice(),o=d-n,o){for(u=o<0,u?(r=c,o=-o,l=f.length):(r=f,n=d,l=c.length),a=Math.max(Math.ceil(m/Ie),l)+2,o>a&&(o=a,r.length=1),r.reverse(),a=o;a--;)r.push(0);r.reverse()}else{for(a=c.length,l=f.length,u=a<l,u&&(l=a),a=0;a<l;a++)if(c[a]!=f[a]){u=c[a]<f[a];break}o=0}for(u&&(r=c,c=f,f=r,t.s=-t.s),l=c.length,a=f.length-l;a>0;--a)c[l++]=0;for(a=f.length;a>o;){if(c[--a]<f[a]){for(s=a;s&&c[--s]===0;)c[s]=Ze-1;--c[s],c[a]+=Ze}c[a]-=f[a]}for(;c[--l]===0;)c.pop();for(;c[0]===0;c.shift())--n;return c[0]?(t.d=c,t.e=n,Re?Ae(t,m):t):new h(0)}function hn(e,t,r){var n,a=ze(e),s=Zt(e.d),o=s.length;return t?(r&&(n=r-o)>0?s=s.charAt(0)+"."+s.slice(1)+Ir(n):o>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(a<0?"e":"e+")+a):a<0?(s="0."+Ir(-a-1)+s,r&&(n=r-o)>0&&(s+=Ir(n))):a>=o?(s+=Ir(a+1-o),r&&(n=r-a-1)>0&&(s=s+"."+Ir(n))):((n=a+1)<o&&(s=s.slice(0,n)+"."+s.slice(n)),r&&(n=r-o)>0&&(a+1===o&&(s+="."),s+=Ir(n))),e.s<0?"-"+s:s}function up(e,t){if(e.length>t)return e.length=t,!0}function yv(e){var t,r,n;function a(s){var o=this;if(!(o instanceof a))return new a(s);if(o.constructor=a,s instanceof a){o.s=s.s,o.e=s.e,o.d=(s=s.d)?s.slice():s;return}if(typeof s=="number"){if(s*0!==0)throw Error(cn+s);if(s>0)o.s=1;else if(s<0)s=-s,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(s===~~s&&s<1e7){o.e=0,o.d=[s];return}return cp(o,s.toString())}else if(typeof s!="string")throw Error(cn+s);if(s.charCodeAt(0)===45?(s=s.slice(1),o.s=-1):o.s=1,L5.test(s))cp(o,s);else throw Error(cn+s)}if(a.prototype=ie,a.ROUND_UP=0,a.ROUND_DOWN=1,a.ROUND_CEIL=2,a.ROUND_FLOOR=3,a.ROUND_HALF_UP=4,a.ROUND_HALF_DOWN=5,a.ROUND_HALF_EVEN=6,a.ROUND_HALF_CEIL=7,a.ROUND_HALF_FLOOR=8,a.clone=yv,a.config=a.set=F5,e===void 0&&(e={}),e)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<n.length;)e.hasOwnProperty(r=n[t++])||(e[r]=this[r]);return a.config(e),a}function F5(e){if(!e||typeof e!="object")throw Error(Bt+"Object expected");var t,r,n,a=["precision",1,Hn,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<a.length;t+=3)if((n=e[r=a[t]])!==void 0)if(Kn(n)===n&&n>=a[t+1]&&n<=a[t+2])this[r]=n;else throw Error(cn+r+": "+n);if((n=e[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(cn+r+": "+n);return this}var vd=yv($5);kt=new vd(1);const Pe=vd;var B5=e=>e,wv={},jv=e=>e===wv,dp=e=>function t(){return arguments.length===0||arguments.length===1&&jv(arguments.length<=0?void 0:arguments[0])?t:e(...arguments)},Nv=(e,t)=>e===1?t:dp(function(){for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];var s=n.filter(o=>o!==wv).length;return s>=e?t(...n):Nv(e-s,dp(function(){for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];var d=n.map(u=>jv(u)?l.shift():u);return t(...d,...l)}))}),Gs=e=>Nv(e.length,e),qc=(e,t)=>{for(var r=[],n=e;n<t;++n)r[n-e]=n;return r},q5=Gs((e,t)=>Array.isArray(t)?t.map(e):Object.keys(t).map(r=>t[r]).map(e)),U5=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(!r.length)return B5;var a=r.reverse(),s=a[0],o=a.slice(1);return function(){return o.reduce((l,c)=>c(l),s(...arguments))}},Uc=e=>Array.isArray(e)?e.reverse():e.split("").reverse().join(""),Sv=e=>{var t=null,r=null;return function(){for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return t&&a.every((o,l)=>{var c;return o===((c=t)===null||c===void 0?void 0:c[l])})||(t=a,r=e(...a)),r}};function kv(e){var t;return e===0?t=1:t=Math.floor(new Pe(e).abs().log(10).toNumber())+1,t}function Pv(e,t,r){for(var n=new Pe(e),a=0,s=[];n.lt(t)&&a<1e5;)s.push(n.toNumber()),n=n.add(r),a++;return s}Gs((e,t,r)=>{var n=+e,a=+t;return n+r*(a-n)});Gs((e,t,r)=>{var n=t-+e;return n=n||1/0,(r-e)/n});Gs((e,t,r)=>{var n=t-+e;return n=n||1/0,Math.max(0,Math.min(1,(r-e)/n))});var Ov=e=>{var[t,r]=e,[n,a]=[t,r];return t>r&&([n,a]=[r,t]),[n,a]},Cv=(e,t,r)=>{if(e.lte(0))return new Pe(0);var n=kv(e.toNumber()),a=new Pe(10).pow(n),s=e.div(a),o=n!==1?.05:.1,l=new Pe(Math.ceil(s.div(o).toNumber())).add(r).mul(o),c=l.mul(a);return t?new Pe(c.toNumber()):new Pe(Math.ceil(c.toNumber()))},z5=(e,t,r)=>{var n=new Pe(1),a=new Pe(e);if(!a.isint()&&r){var s=Math.abs(e);s<1?(n=new Pe(10).pow(kv(e)-1),a=new Pe(Math.floor(a.div(n).toNumber())).mul(n)):s>1&&(a=new Pe(Math.floor(e)))}else e===0?a=new Pe(Math.floor((t-1)/2)):r||(a=new Pe(Math.floor(e)));var o=Math.floor((t-1)/2),l=U5(q5(c=>a.add(new Pe(c-o).mul(n)).toNumber()),qc);return l(0,t)},Av=function(t,r,n,a){var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((r-t)/(n-1)))return{step:new Pe(0),tickMin:new Pe(0),tickMax:new Pe(0)};var o=Cv(new Pe(r).sub(t).div(n-1),a,s),l;t<=0&&r>=0?l=new Pe(0):(l=new Pe(t).add(r).div(2),l=l.sub(new Pe(l).mod(o)));var c=Math.ceil(l.sub(t).div(o).toNumber()),d=Math.ceil(new Pe(r).sub(l).div(o).toNumber()),u=c+d+1;return u>n?Av(t,r,n,a,s+1):(u<n&&(d=r>0?d+(n-u):d,c=r>0?c:c+(n-u)),{step:o,tickMin:l.sub(new Pe(c).mul(o)),tickMax:l.add(new Pe(d).mul(o))})};function V5(e){var[t,r]=e,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s=Math.max(n,2),[o,l]=Ov([t,r]);if(o===-1/0||l===1/0){var c=l===1/0?[o,...qc(0,n-1).map(()=>1/0)]:[...qc(0,n-1).map(()=>-1/0),l];return t>r?Uc(c):c}if(o===l)return z5(o,n,a);var{step:d,tickMin:u,tickMax:f}=Av(o,l,s,a,0),h=Pv(u,f.add(new Pe(.1).mul(d)),d);return t>r?Uc(h):h}function W5(e,t){var[r,n]=e,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[s,o]=Ov([r,n]);if(s===-1/0||o===1/0)return[r,n];if(s===o)return[s];var l=Math.max(t,2),c=Cv(new Pe(o).sub(s).div(l-1),a,0),d=[...Pv(new Pe(s),new Pe(o),c),o];return a===!1&&(d=d.map(u=>Math.round(u))),r>n?Uc(d):d}var H5=Sv(V5),K5=Sv(W5),Dv=e=>e.rootProps.maxBarSize,Y5=e=>e.rootProps.barGap,Tv=e=>e.rootProps.barCategoryGap,G5=e=>e.rootProps.barSize,Qs=e=>e.rootProps.stackOffset,bd=e=>e.options.chartName,yd=e=>e.rootProps.syncId,Iv=e=>e.rootProps.syncMethod,wd=e=>e.options.eventEmitter,or={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},Nt={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},Xs=(e,t)=>{if(!(!e||!t))return e!=null&&e.reversed?[t[1],t[0]]:t},Q5={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:or.angleAxisId,includeHidden:!1,name:void 0,reversed:or.reversed,scale:or.scale,tick:or.tick,tickCount:void 0,ticks:void 0,type:or.type,unit:void 0},X5={allowDataOverflow:Nt.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Nt.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Nt.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Nt.scale,tick:Nt.tick,tickCount:Nt.tickCount,ticks:void 0,type:Nt.type,unit:void 0},Z5={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:or.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:or.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:or.scale,tick:or.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},J5={allowDataOverflow:Nt.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Nt.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Nt.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Nt.scale,tick:Nt.tick,tickCount:Nt.tickCount,ticks:void 0,type:"category",unit:void 0},jd=(e,t)=>e.polarAxis.angleAxis[t]!=null?e.polarAxis.angleAxis[t]:e.layout.layoutType==="radial"?Z5:Q5,Nd=(e,t)=>e.polarAxis.radiusAxis[t]!=null?e.polarAxis.radiusAxis[t]:e.layout.layoutType==="radial"?J5:X5,Zs=e=>e.polarOptions,Sd=z([yr,wr,et],VS),Mv=z([Zs,Sd],(e,t)=>{if(e!=null)return Gt(e.innerRadius,t,0)}),Ev=z([Zs,Sd],(e,t)=>{if(e!=null)return Gt(e.outerRadius,t,t*.8)}),eA=e=>{if(e==null)return[0,0];var{startAngle:t,endAngle:r}=e;return[t,r]},_v=z([Zs],eA);z([jd,_v],Xs);var Rv=z([Sd,Mv,Ev],(e,t,r)=>{if(!(e==null||t==null||r==null))return[t,r]});z([Nd,Rv],Xs);var $v=z([Se,Zs,Mv,Ev,yr,wr],(e,t,r,n,a,s)=>{if(!(e!=="centric"&&e!=="radial"||t==null||r==null||n==null)){var{cx:o,cy:l,startAngle:c,endAngle:d}=t;return{cx:Gt(o,a,a/2),cy:Gt(l,s,s/2),innerRadius:r,outerRadius:n,startAngle:c,endAngle:d,clockWise:!1}}}),We=(e,t)=>t,Js=(e,t,r)=>r;function kd(e){return e?.id}var Qe=e=>{var t=Se(e);return t==="horizontal"?"xAxis":t==="vertical"?"yAxis":t==="centric"?"angleAxis":"radiusAxis"},Yn=e=>e.tooltip.settings.axisId,Xe=e=>{var t=Qe(e),r=Yn(e);return Va(e,t,r)};function Lv(e,t,r){var{chartData:n=[]}=t,a=r?.dataKey,s=new Map;return e.forEach(o=>{var l,c=(l=o.data)!==null&&l!==void 0?l:n;if(!(c==null||c.length===0)){var d=kd(o);c.forEach((u,f)=>{var h=a==null?f:String(Je(u,a,null)),m=Je(u,o.dataKey,0),b;s.has(h)?b=s.get(h):b={},Object.assign(b,{[d]:m}),s.set(h,b)})}}),Array.from(s.values())}function eo(e){return e.stackId!=null&&e.dataKey!=null}function fp(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function ns(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?fp(Object(r),!0).forEach(function(n){tA(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):fp(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function tA(e,t,r){return(t=rA(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function rA(e){var t=nA(e,"string");return typeof t=="symbol"?t:t+""}function nA(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var zc=[0,"auto"],wt={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},Nr=(e,t)=>{var r=e.cartesianAxis.xAxis[t];return r??wt},jt={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:zc,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:$s},Vr=(e,t)=>{var r=e.cartesianAxis.yAxis[t];return r??jt},aA={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},Pd=(e,t)=>{var r=e.cartesianAxis.zAxis[t];return r??aA},yt=(e,t,r)=>{switch(t){case"xAxis":return Nr(e,r);case"yAxis":return Vr(e,r);case"zAxis":return Pd(e,r);case"angleAxis":return jd(e,r);case"radiusAxis":return Nd(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},iA=(e,t,r)=>{switch(t){case"xAxis":return Nr(e,r);case"yAxis":return Vr(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},Va=(e,t,r)=>{switch(t){case"xAxis":return Nr(e,r);case"yAxis":return Vr(e,r);case"angleAxis":return jd(e,r);case"radiusAxis":return Nd(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},Fv=e=>e.graphicalItems.cartesianItems.some(t=>t.type==="bar")||e.graphicalItems.polarItems.some(t=>t.type==="radialBar");function Bv(e,t){return r=>{switch(e){case"xAxis":return"xAxisId"in r&&r.xAxisId===t;case"yAxis":return"yAxisId"in r&&r.yAxisId===t;case"zAxis":return"zAxisId"in r&&r.zAxisId===t;case"angleAxis":return"angleAxisId"in r&&r.angleAxisId===t;case"radiusAxis":return"radiusAxisId"in r&&r.radiusAxisId===t;default:return!1}}}var to=e=>e.graphicalItems.cartesianItems,sA=z([We,Js],Bv),qv=(e,t,r)=>e.filter(r).filter(n=>t?.includeHidden===!0?!0:!n.hide),Wa=z([to,yt,sA],qv),Uv=z([Wa],e=>e.filter(t=>t.type==="area"||t.type==="bar").filter(eo)),zv=e=>e.filter(t=>!("stackId"in t)||t.stackId===void 0),Vv=z([Wa],zv),Wv=e=>e.map(t=>t.data).filter(Boolean).flat(1),oA=z([Wa],Wv),Hv=(e,t)=>{var{chartData:r=[],dataStartIndex:n,dataEndIndex:a}=t;return e.length>0?e:r.slice(n,a+1)},Od=z([oA,Ys],Hv),Kv=(e,t,r)=>t?.dataKey!=null?e.map(n=>({value:Je(n,t.dataKey)})):r.length>0?r.map(n=>n.dataKey).flatMap(n=>e.map(a=>({value:Je(a,n)}))):e.map(n=>({value:n})),ro=z([Od,yt,Wa],Kv);function Yv(e,t){switch(e){case"xAxis":return t.direction==="x";case"yAxis":return t.direction==="y";default:return!1}}function bn(e){return e.filter(t=>er(t)||t instanceof Date).map(Number).filter(t=>Ot(t)===!1)}function lA(e,t,r){return!r||typeof t!="number"||Ot(t)?[]:r.length?bn(r.flatMap(n=>{var a=Je(e,n.dataKey),s,o;if(Array.isArray(a)?[s,o]=a:s=o=a,!(!At(s)||!At(o)))return[t-s,t+o]})):[]}var cA=z([Uv,Ys,Xe],Lv),Gv=(e,t,r)=>{var n={},a=t.reduce((s,o)=>(o.stackId==null||(s[o.stackId]==null&&(s[o.stackId]=[]),s[o.stackId].push(o)),s),n);return Object.fromEntries(Object.entries(a).map(s=>{var[o,l]=s,c=l.map(kd);return[o,{stackedData:sk(e,c,r),graphicalItems:l}]}))},Vc=z([cA,Uv,Qs],Gv),Qv=(e,t,r)=>{var{dataStartIndex:n,dataEndIndex:a}=t;if(r!=="zAxis"){var s=dk(e,n,a);if(!(s!=null&&s[0]===0&&s[1]===0))return s}},uA=z([Vc,zr,We],Qv),Xv=(e,t,r,n,a)=>r.length>0?e.flatMap(s=>r.flatMap(o=>{var l,c,d=(l=n[o.id])===null||l===void 0?void 0:l.filter(f=>Yv(a,f)),u=Je(s,(c=t.dataKey)!==null&&c!==void 0?c:o.dataKey);return{value:u,errorDomain:lA(s,u,d)}})).filter(Boolean):t?.dataKey!=null?e.map(s=>({value:Je(s,t.dataKey),errorDomain:[]})):e.map(s=>({value:s,errorDomain:[]})),no=e=>e.errorBars,Zv=(e,t,r)=>e.flatMap(n=>t[n.id]).filter(Boolean).filter(n=>Yv(r,n));z([Vv,no,We],Zv);var dA=z([Od,yt,Vv,no,We],Xv);function fA(e){var{value:t}=e;if(er(t)||t instanceof Date)return t}var hp=e=>{var t=e.flatMap(n=>[n.value,n.errorDomain]).flat(1),r=bn(t);if(r.length!==0)return[Math.min(...r),Math.max(...r)]},hA=(e,t,r)=>{var n=e.map(fA).filter(a=>a!=null);return r&&(t.dataKey==null||t.allowDuplicatedCategory&&dg(n))?_x(0,e.length):t.allowDuplicatedCategory?n:Array.from(new Set(n))},Cd=e=>{var t;if(e==null||!("domain"in e))return zc;if(e.domain!=null)return e.domain;if(e.ticks!=null){if(e.type==="number"){var r=bn(e.ticks);return[Math.min(...r),Math.max(...r)]}if(e.type==="category")return e.ticks.map(String)}return(t=e?.domain)!==null&&t!==void 0?t:zc},as=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var a=r.filter(Boolean);if(a.length!==0){var s=a.flat(),o=Math.min(...s),l=Math.max(...s);return[o,l]}},Jv=e=>e.referenceElements.dots,Gn=(e,t,r)=>e.filter(n=>n.ifOverflow==="extendDomain").filter(n=>t==="xAxis"?n.xAxisId===r:n.yAxisId===r),mA=z([Jv,We,Js],Gn),eb=e=>e.referenceElements.areas,pA=z([eb,We,Js],Gn),tb=e=>e.referenceElements.lines,gA=z([tb,We,Js],Gn),rb=(e,t)=>{var r=bn(e.map(n=>t==="xAxis"?n.x:n.y));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},xA=z(mA,We,rb),nb=(e,t)=>{var r=bn(e.flatMap(n=>[t==="xAxis"?n.x1:n.y1,t==="xAxis"?n.x2:n.y2]));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},vA=z([pA,We],nb),ab=(e,t)=>{var r=bn(e.map(n=>t==="xAxis"?n.x:n.y));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},bA=z(gA,We,ab),yA=z(xA,bA,vA,(e,t,r)=>as(e,r,t)),wA=z([yt],Cd),ib=(e,t,r,n,a,s,o)=>{var l=_5(t,e.allowDataOverflow);if(l!=null)return l;var c=s==="vertical"&&o==="xAxis"||s==="horizontal"&&o==="yAxis",d=c?as(r,a,hp(n)):as(a,hp(n));return R5(t,d,e.allowDataOverflow)},jA=z([yt,wA,uA,dA,yA,Se,We],ib),NA=[0,1],sb=(e,t,r,n,a,s,o)=>{if(!((e==null||r==null||r.length===0)&&o===void 0)){var{dataKey:l,type:c}=e,d=Br(t,s);return d&&l==null?_x(0,r.length):c==="category"?hA(n,e,d):a==="expand"?NA:o}},Ad=z([yt,Se,Od,ro,Qs,We,jA],sb),ob=(e,t,r,n,a)=>{if(e!=null){var{scale:s,type:o}=e;if(s==="auto")return t==="radial"&&a==="radiusAxis"?"band":t==="radial"&&a==="angleAxis"?"linear":o==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?"point":o==="category"?"band":"linear";if(typeof s=="string"){var l="scale".concat($a(s));return l in va?l:"point"}}},Ha=z([yt,Se,Fv,bd,We],ob);function SA(e){if(e!=null){if(e in va)return va[e]();var t="scale".concat($a(e));if(t in va)return va[t]()}}function Dd(e,t,r,n){if(!(r==null||n==null)){if(typeof e.scale=="function")return e.scale.copy().domain(r).range(n);var a=SA(t);if(a!=null){var s=a.domain(r).range(n);return tk(s),s}}}var lb=(e,t,r)=>{var n=Cd(t);if(!(r!=="auto"&&r!=="linear")){if(t!=null&&t.tickCount&&Array.isArray(n)&&(n[0]==="auto"||n[1]==="auto")&&qn(e))return H5(e,t.tickCount,t.allowDecimals);if(t!=null&&t.tickCount&&t.type==="number"&&qn(e))return K5(e,t.tickCount,t.allowDecimals)}},Td=z([Ad,Va,Ha],lb),cb=(e,t,r,n)=>{if(n!=="angleAxis"&&e?.type==="number"&&qn(t)&&Array.isArray(r)&&r.length>0){var a=t[0],s=r[0],o=t[1],l=r[r.length-1];return[Math.min(a,s),Math.max(o,l)]}return t},kA=z([yt,Ad,Td,We],cb),PA=z(ro,yt,(e,t)=>{if(!(!t||t.type!=="number")){var r=1/0,n=Array.from(bn(e.map(l=>l.value))).sort((l,c)=>l-c);if(n.length<2)return 1/0;var a=n[n.length-1]-n[0];if(a===0)return 1/0;for(var s=0;s<n.length-1;s++){var o=n[s+1]-n[s];r=Math.min(r,o)}return r/a}}),ub=z(PA,Se,Tv,et,(e,t,r,n)=>n,(e,t,r,n,a)=>{if(!At(e))return 0;var s=t==="vertical"?n.height:n.width;if(a==="gap")return e*s/2;if(a==="no-gap"){var o=Gt(r,e*s),l=e*s/2;return l-o-(l-o)/s*o}return 0}),OA=(e,t)=>{var r=Nr(e,t);return r==null||typeof r.padding!="string"?0:ub(e,"xAxis",t,r.padding)},CA=(e,t)=>{var r=Vr(e,t);return r==null||typeof r.padding!="string"?0:ub(e,"yAxis",t,r.padding)},AA=z(Nr,OA,(e,t)=>{var r,n;if(e==null)return{left:0,right:0};var{padding:a}=e;return typeof a=="string"?{left:t,right:t}:{left:((r=a.left)!==null&&r!==void 0?r:0)+t,right:((n=a.right)!==null&&n!==void 0?n:0)+t}}),DA=z(Vr,CA,(e,t)=>{var r,n;if(e==null)return{top:0,bottom:0};var{padding:a}=e;return typeof a=="string"?{top:t,bottom:t}:{top:((r=a.top)!==null&&r!==void 0?r:0)+t,bottom:((n=a.bottom)!==null&&n!==void 0?n:0)+t}}),TA=z([et,AA,Fs,Ls,(e,t,r)=>r],(e,t,r,n,a)=>{var{padding:s}=n;return a?[s.left,r.width-s.right]:[e.left+t.left,e.left+e.width-t.right]}),IA=z([et,Se,DA,Fs,Ls,(e,t,r)=>r],(e,t,r,n,a,s)=>{var{padding:o}=a;return s?[n.height-o.bottom,o.top]:t==="horizontal"?[e.top+e.height-r.bottom,e.top+r.top]:[e.top+r.top,e.top+e.height-r.bottom]}),Ka=(e,t,r,n)=>{var a;switch(t){case"xAxis":return TA(e,r,n);case"yAxis":return IA(e,r,n);case"zAxis":return(a=Pd(e,r))===null||a===void 0?void 0:a.range;case"angleAxis":return _v(e);case"radiusAxis":return Rv(e,r);default:return}},db=z([yt,Ka],Xs),Qn=z([yt,Ha,kA,db],Dd);z([Wa,no,We],Zv);function fb(e,t){return e.id<t.id?-1:e.id>t.id?1:0}var ao=(e,t)=>t,io=(e,t,r)=>r,MA=z(qu,ao,io,(e,t,r)=>e.filter(n=>n.orientation===t).filter(n=>n.mirror===r).sort(fb)),EA=z(Uu,ao,io,(e,t,r)=>e.filter(n=>n.orientation===t).filter(n=>n.mirror===r).sort(fb)),hb=(e,t)=>({width:e.width,height:t.height}),_A=(e,t)=>{var r=typeof t.width=="number"?t.width:$s;return{width:r,height:e.height}},mb=z(et,Nr,hb),RA=(e,t,r)=>{switch(t){case"top":return e.top;case"bottom":return r-e.bottom;default:return 0}},$A=(e,t,r)=>{switch(t){case"left":return e.left;case"right":return r-e.right;default:return 0}},LA=z(wr,et,MA,ao,io,(e,t,r,n,a)=>{var s={},o;return r.forEach(l=>{var c=hb(t,l);o==null&&(o=RA(t,n,e));var d=n==="top"&&!a||n==="bottom"&&a;s[l.id]=o-Number(d)*c.height,o+=(d?-1:1)*c.height}),s}),FA=z(yr,et,EA,ao,io,(e,t,r,n,a)=>{var s={},o;return r.forEach(l=>{var c=_A(t,l);o==null&&(o=$A(t,n,e));var d=n==="left"&&!a||n==="right"&&a;s[l.id]=o-Number(d)*c.width,o+=(d?-1:1)*c.width}),s}),BA=(e,t)=>{var r=et(e),n=Nr(e,t);if(n!=null){var a=LA(e,n.orientation,n.mirror),s=a[t];return s==null?{x:r.left,y:0}:{x:r.left,y:s}}},qA=(e,t)=>{var r=et(e),n=Vr(e,t);if(n!=null){var a=FA(e,n.orientation,n.mirror),s=a[t];return s==null?{x:0,y:r.top}:{x:s,y:r.top}}},pb=z(et,Vr,(e,t)=>{var r=typeof t.width=="number"?t.width:$s;return{width:r,height:e.height}}),mp=(e,t,r)=>{switch(t){case"xAxis":return mb(e,r).width;case"yAxis":return pb(e,r).height;default:return}},gb=(e,t,r,n)=>{if(r!=null){var{allowDuplicatedCategory:a,type:s,dataKey:o}=r,l=Br(e,n),c=t.map(d=>d.value);if(o&&l&&s==="category"&&a&&dg(c))return c}},Id=z([Se,ro,yt,We],gb),xb=(e,t,r,n)=>{if(!(r==null||r.dataKey==null)){var{type:a,scale:s}=r,o=Br(e,n);if(o&&(a==="number"||s!=="auto"))return t.map(l=>l.value)}},Md=z([Se,ro,Va,We],xb),pp=z([Se,iA,Ha,Qn,Id,Md,Ka,Td,We],(e,t,r,n,a,s,o,l,c)=>{if(t==null)return null;var d=Br(e,c);return{angle:t.angle,interval:t.interval,minTickGap:t.minTickGap,orientation:t.orientation,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit,axisType:c,categoricalDomain:s,duplicateDomain:a,isCategorical:d,niceTicks:l,range:o,realScaleType:r,scale:n}}),UA=(e,t,r,n,a,s,o,l,c)=>{if(!(t==null||n==null)){var d=Br(e,c),{type:u,ticks:f,tickCount:h}=t,m=r==="scaleBand"&&typeof n.bandwidth=="function"?n.bandwidth()/2:2,b=u==="category"&&n.bandwidth?n.bandwidth()/m:0;b=c==="angleAxis"&&s!=null&&s.length>=2?xt(s[0]-s[1])*2*b:b;var g=f||a;if(g){var p=g.map((v,w)=>{var y=o?o.indexOf(v):v;return{index:w,coordinate:n(y)+b,value:v,offset:b}});return p.filter(v=>!Ot(v.coordinate))}return d&&l?l.map((v,w)=>({coordinate:n(v)+b,value:v,index:w,offset:b})):n.ticks?n.ticks(h).map(v=>({coordinate:n(v)+b,value:v,offset:b})):n.domain().map((v,w)=>({coordinate:n(v)+b,value:o?o[v]:v,index:w,offset:b}))}},vb=z([Se,Va,Ha,Qn,Td,Ka,Id,Md,We],UA),zA=(e,t,r,n,a,s,o)=>{if(!(t==null||r==null||n==null||n[0]===n[1])){var l=Br(e,o),{tickCount:c}=t,d=0;return d=o==="angleAxis"&&n?.length>=2?xt(n[0]-n[1])*2*d:d,l&&s?s.map((u,f)=>({coordinate:r(u)+d,value:u,index:f,offset:d})):r.ticks?r.ticks(c).map(u=>({coordinate:r(u)+d,value:u,offset:d})):r.domain().map((u,f)=>({coordinate:r(u)+d,value:a?a[u]:u,index:f,offset:d}))}},$r=z([Se,Va,Qn,Ka,Id,Md,We],zA),Lr=z(yt,Qn,(e,t)=>{if(!(e==null||t==null))return ns(ns({},e),{},{scale:t})}),VA=z([yt,Ha,Ad,db],Dd);z((e,t,r)=>Pd(e,r),VA,(e,t)=>{if(!(e==null||t==null))return ns(ns({},e),{},{scale:t})});var WA=z([Se,qu,Uu],(e,t,r)=>{switch(e){case"horizontal":return t.some(n=>n.reversed)?"right-to-left":"left-to-right";case"vertical":return r.some(n=>n.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),bb=e=>e.options.defaultTooltipEventType,yb=e=>e.options.validateTooltipEventTypes;function wb(e,t,r){if(e==null)return t;var n=e?"axis":"item";return r==null?t:r.includes(n)?n:t}function Ed(e,t){var r=bb(e),n=yb(e);return wb(t,r,n)}function HA(e){return de(t=>Ed(t,e))}var jb=(e,t)=>{var r,n=Number(t);if(!(Ot(n)||t==null))return n>=0?e==null||(r=e[n])===null||r===void 0?void 0:r.value:void 0},KA=e=>e.tooltip.settings,Mr={active:!1,index:null,dataKey:void 0,coordinate:void 0},YA={itemInteraction:{click:Mr,hover:Mr},axisInteraction:{click:Mr,hover:Mr},keyboardInteraction:Mr,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},Nb=Dt({name:"tooltip",initialState:YA,reducers:{addTooltipEntrySettings(e,t){e.tooltipItemPayloads.push(t.payload)},removeTooltipEntrySettings(e,t){var r=fr(e).tooltipItemPayloads.indexOf(t.payload);r>-1&&e.tooltipItemPayloads.splice(r,1)},setTooltipSettingsState(e,t){e.settings=t.payload},setActiveMouseOverItemIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.itemInteraction.hover.active=!0,e.itemInteraction.hover.index=t.payload.activeIndex,e.itemInteraction.hover.dataKey=t.payload.activeDataKey,e.itemInteraction.hover.coordinate=t.payload.activeCoordinate},mouseLeaveChart(e){e.itemInteraction.hover.active=!1,e.axisInteraction.hover.active=!1},mouseLeaveItem(e){e.itemInteraction.hover.active=!1},setActiveClickItemIndex(e,t){e.syncInteraction.active=!1,e.itemInteraction.click.active=!0,e.keyboardInteraction.active=!1,e.itemInteraction.click.index=t.payload.activeIndex,e.itemInteraction.click.dataKey=t.payload.activeDataKey,e.itemInteraction.click.coordinate=t.payload.activeCoordinate},setMouseOverAxisIndex(e,t){e.syncInteraction.active=!1,e.axisInteraction.hover.active=!0,e.keyboardInteraction.active=!1,e.axisInteraction.hover.index=t.payload.activeIndex,e.axisInteraction.hover.dataKey=t.payload.activeDataKey,e.axisInteraction.hover.coordinate=t.payload.activeCoordinate},setMouseClickAxisIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.axisInteraction.click.active=!0,e.axisInteraction.click.index=t.payload.activeIndex,e.axisInteraction.click.dataKey=t.payload.activeDataKey,e.axisInteraction.click.coordinate=t.payload.activeCoordinate},setSyncInteraction(e,t){e.syncInteraction=t.payload},setKeyboardInteraction(e,t){e.keyboardInteraction.active=t.payload.active,e.keyboardInteraction.index=t.payload.activeIndex,e.keyboardInteraction.coordinate=t.payload.activeCoordinate,e.keyboardInteraction.dataKey=t.payload.activeDataKey}}}),{addTooltipEntrySettings:GA,removeTooltipEntrySettings:QA,setTooltipSettingsState:XA,setActiveMouseOverItemIndex:Sb,mouseLeaveItem:ZA,mouseLeaveChart:kb,setActiveClickItemIndex:JA,setMouseOverAxisIndex:Pb,setMouseClickAxisIndex:eD,setSyncInteraction:Wc,setKeyboardInteraction:Hc}=Nb.actions,tD=Nb.reducer;function gp(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function xi(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?gp(Object(r),!0).forEach(function(n){rD(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):gp(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function rD(e,t,r){return(t=nD(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function nD(e){var t=aD(e,"string");return typeof t=="symbol"?t:t+""}function aD(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function iD(e,t,r){return t==="axis"?r==="click"?e.axisInteraction.click:e.axisInteraction.hover:r==="click"?e.itemInteraction.click:e.itemInteraction.hover}function sD(e){return e.index!=null}var Ob=(e,t,r,n)=>{if(t==null)return Mr;var a=iD(e,t,r);if(a==null)return Mr;if(a.active)return a;if(e.keyboardInteraction.active)return e.keyboardInteraction;if(e.syncInteraction.active&&e.syncInteraction.index!=null)return e.syncInteraction;var s=e.settings.active===!0;if(sD(a)){if(s)return xi(xi({},a),{},{active:!0})}else if(n!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:n};return xi(xi({},Mr),{},{coordinate:a.coordinate})},_d=(e,t)=>{var r=e?.index;if(r==null)return null;var n=Number(r);if(!At(n))return r;var a=0,s=1/0;return t.length>0&&(s=t.length-1),String(Math.max(a,Math.min(n,s)))},Cb=(e,t,r,n,a,s,o,l)=>{if(!(s==null||l==null)){var c=o[0],d=c==null?void 0:l(c.positions,s);if(d!=null)return d;var u=a?.[Number(s)];if(u)switch(r){case"horizontal":return{x:u.coordinate,y:(n.top+t)/2};default:return{x:(n.left+e)/2,y:u.coordinate}}}},Ab=(e,t,r,n)=>{if(t==="axis")return e.tooltipItemPayloads;if(e.tooltipItemPayloads.length===0)return[];var a;return r==="hover"?a=e.itemInteraction.hover.dataKey:a=e.itemInteraction.click.dataKey,a==null&&n!=null?[e.tooltipItemPayloads[0]]:e.tooltipItemPayloads.filter(s=>{var o;return((o=s.settings)===null||o===void 0?void 0:o.dataKey)===a})},Ya=e=>e.options.tooltipPayloadSearcher,Xn=e=>e.tooltip;function xp(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function vp(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?xp(Object(r),!0).forEach(function(n){oD(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xp(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function oD(e,t,r){return(t=lD(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function lD(e){var t=cD(e,"string");return typeof t=="symbol"?t:t+""}function cD(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function uD(e,t){return e??t}var Db=(e,t,r,n,a,s,o)=>{if(!(t==null||s==null)){var{chartData:l,computedData:c,dataStartIndex:d,dataEndIndex:u}=r,f=[];return e.reduce((h,m)=>{var b,{dataDefinedOnItem:g,settings:p}=m,v=uD(g,l),w=Array.isArray(v)?gx(v,d,u):v,y=(b=p?.dataKey)!==null&&b!==void 0?b:n?.dataKey,S=p?.nameKey,j;if(n!=null&&n.dataKey&&Array.isArray(w)&&!Array.isArray(w[0])&&o==="axis"?j=fg(w,n.dataKey,a):j=s(w,t,c,S),Array.isArray(j))j.forEach(N=>{var P=vp(vp({},p),{},{name:N.name,unit:N.unit,color:void 0,fill:void 0});h.push(Xh({tooltipEntrySettings:P,dataKey:N.dataKey,payload:N.payload,value:Je(N.payload,N.dataKey),name:N.name}))});else{var k;h.push(Xh({tooltipEntrySettings:p,dataKey:y,payload:j,value:Je(j,y),name:(k=Je(j,S))!==null&&k!==void 0?k:p?.name}))}return h},f)}},Rd=z([Xe,Se,Fv,bd,Qe],ob),dD=z([e=>e.graphicalItems.cartesianItems,e=>e.graphicalItems.polarItems],(e,t)=>[...e,...t]),fD=z([Qe,Yn],Bv),Ga=z([dD,Xe,fD],qv),hD=z([Ga],e=>e.filter(eo)),mD=z([Ga],Wv),Zn=z([mD,zr],Hv),pD=z([hD,zr,Xe],Lv),$d=z([Zn,Xe,Ga],Kv),gD=z([Xe],Cd),xD=z([Ga],e=>e.filter(eo)),vD=z([pD,xD,Qs],Gv),bD=z([vD,zr,Qe],Qv),yD=z([Ga],zv),wD=z([Zn,Xe,yD,no,Qe],Xv),jD=z([Jv,Qe,Yn],Gn),ND=z([jD,Qe],rb),SD=z([eb,Qe,Yn],Gn),kD=z([SD,Qe],nb),PD=z([tb,Qe,Yn],Gn),OD=z([PD,Qe],ab),CD=z([ND,OD,kD],as),AD=z([Xe,gD,bD,wD,CD,Se,Qe],ib),Tb=z([Xe,Se,Zn,$d,Qs,Qe,AD],sb),DD=z([Tb,Xe,Rd],lb),TD=z([Xe,Tb,DD,Qe],cb),Ib=e=>{var t=Qe(e),r=Yn(e),n=!1;return Ka(e,t,r,n)},Mb=z([Xe,Ib],Xs),Eb=z([Xe,Rd,TD,Mb],Dd),ID=z([Se,$d,Xe,Qe],gb),MD=z([Se,$d,Xe,Qe],xb),ED=(e,t,r,n,a,s,o,l)=>{if(t){var{type:c}=t,d=Br(e,l);if(n){var u=r==="scaleBand"&&n.bandwidth?n.bandwidth()/2:2,f=c==="category"&&n.bandwidth?n.bandwidth()/u:0;return f=l==="angleAxis"&&a!=null&&a?.length>=2?xt(a[0]-a[1])*2*f:f,d&&o?o.map((h,m)=>({coordinate:n(h)+f,value:h,index:m,offset:f})):n.domain().map((h,m)=>({coordinate:n(h)+f,value:s?s[h]:h,index:m,offset:f}))}}},Sr=z([Se,Xe,Rd,Eb,Ib,ID,MD,Qe],ED),Ld=z([bb,yb,KA],(e,t,r)=>wb(r.shared,e,t)),_b=e=>e.tooltip.settings.trigger,Fd=e=>e.tooltip.settings.defaultIndex,so=z([Xn,Ld,_b,Fd],Ob),mn=z([so,Zn],_d),Rb=z([Sr,mn],jb),$b=z([so],e=>{if(e)return e.dataKey}),Lb=z([Xn,Ld,_b,Fd],Ab),_D=z([yr,wr,Se,et,Sr,Fd,Lb,Ya],Cb),RD=z([so,_D],(e,t)=>e!=null&&e.coordinate?e.coordinate:t),$D=z([so],e=>e.active),LD=z([Lb,mn,zr,Xe,Rb,Ya,Ld],Db),FD=z([LD],e=>{if(e!=null){var t=e.map(r=>r.payload).filter(r=>r!=null);return Array.from(new Set(t))}});function bp(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function yp(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?bp(Object(r),!0).forEach(function(n){BD(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):bp(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function BD(e,t,r){return(t=qD(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function qD(e){var t=UD(e,"string");return typeof t=="symbol"?t:t+""}function UD(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var zD=()=>de(Xe),VD=()=>{var e=zD(),t=de(Sr),r=de(Eb);return Oa(yp(yp({},e),{},{scale:r}),t)},WD=()=>de(bd),Bd=(e,t)=>t,Fb=(e,t,r)=>r,qd=(e,t,r,n)=>n,HD=z(Sr,e=>Ds(e,t=>t.coordinate)),Ud=z([Xn,Bd,Fb,qd],Ob),Bb=z([Ud,Zn],_d),KD=(e,t,r)=>{if(t!=null){var n=Xn(e);return t==="axis"?r==="hover"?n.axisInteraction.hover.dataKey:n.axisInteraction.click.dataKey:r==="hover"?n.itemInteraction.hover.dataKey:n.itemInteraction.click.dataKey}},qb=z([Xn,Bd,Fb,qd],Ab),is=z([yr,wr,Se,et,Sr,qd,qb,Ya],Cb),YD=z([Ud,is],(e,t)=>{var r;return(r=e.coordinate)!==null&&r!==void 0?r:t}),Ub=z(Sr,Bb,jb),GD=z([qb,Bb,zr,Xe,Ub,Ya,Bd],Db),QD=z([Ud],e=>({isActive:e.active,activeIndex:e.index})),XD=(e,t,r,n,a,s,o,l)=>{if(!(!e||!t||!n||!a||!s)){var c=fk(e.chartX,e.chartY,t,r,l);if(c){var d=mk(c,t),u=JS(d,o,s,n,a),f=hk(t,s,u,c);return{activeIndex:String(u),activeCoordinate:f}}}};function Kc(){return Kc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Kc.apply(null,arguments)}function wp(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function vi(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?wp(Object(r),!0).forEach(function(n){ZD(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):wp(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ZD(e,t,r){return(t=JD(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function JD(e){var t=eT(e,"string");return typeof t=="symbol"?t:t+""}function eT(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function tT(e){var{coordinate:t,payload:r,index:n,offset:a,tooltipAxisBandSize:s,layout:o,cursor:l,tooltipEventType:c,chartName:d}=e,u=t,f=r,h=n;if(!l||!u||d!=="ScatterChart"&&c!=="axis")return null;var m,b;if(d==="ScatterChart")m=u,b=pP;else if(d==="BarChart")m=gP(o,u,a,s),b=Tx;else if(o==="radial"){var{cx:g,cy:p,radius:v,startAngle:w,endAngle:y}=Ix(u);m={cx:g,cy:p,startAngle:w,endAngle:y,innerRadius:v,outerRadius:v},b=Ex}else m={points:eO(o,u,a)},b=Sx;var S=typeof l=="object"&&"className"in l?l.className:void 0,j=vi(vi(vi(vi({stroke:"#ccc",pointerEvents:"none"},a),m),Le(l,!1)),{},{payload:f,payloadIndex:h,className:Oe("recharts-tooltip-cursor",S)});return x.isValidElement(l)?x.cloneElement(l,j):x.createElement(b,j)}function rT(e){var t=VD(),r=wx(),n=Bs(),a=WD();return x.createElement(tT,Kc({},e,{coordinate:e.coordinate,index:e.index,payload:e.payload,offset:r,layout:n,tooltipAxisBandSize:t,chartName:a}))}var zb=x.createContext(null),nT=()=>x.useContext(zb),_l={exports:{}},jp;function aT(){return jp||(jp=1,(function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function a(c,d,u){this.fn=c,this.context=d,this.once=u||!1}function s(c,d,u,f,h){if(typeof u!="function")throw new TypeError("The listener must be a function");var m=new a(u,f||c,h),b=r?r+d:d;return c._events[b]?c._events[b].fn?c._events[b]=[c._events[b],m]:c._events[b].push(m):(c._events[b]=m,c._eventsCount++),c}function o(c,d){--c._eventsCount===0?c._events=new n:delete c._events[d]}function l(){this._events=new n,this._eventsCount=0}l.prototype.eventNames=function(){var d=[],u,f;if(this._eventsCount===0)return d;for(f in u=this._events)t.call(u,f)&&d.push(r?f.slice(1):f);return Object.getOwnPropertySymbols?d.concat(Object.getOwnPropertySymbols(u)):d},l.prototype.listeners=function(d){var u=r?r+d:d,f=this._events[u];if(!f)return[];if(f.fn)return[f.fn];for(var h=0,m=f.length,b=new Array(m);h<m;h++)b[h]=f[h].fn;return b},l.prototype.listenerCount=function(d){var u=r?r+d:d,f=this._events[u];return f?f.fn?1:f.length:0},l.prototype.emit=function(d,u,f,h,m,b){var g=r?r+d:d;if(!this._events[g])return!1;var p=this._events[g],v=arguments.length,w,y;if(p.fn){switch(p.once&&this.removeListener(d,p.fn,void 0,!0),v){case 1:return p.fn.call(p.context),!0;case 2:return p.fn.call(p.context,u),!0;case 3:return p.fn.call(p.context,u,f),!0;case 4:return p.fn.call(p.context,u,f,h),!0;case 5:return p.fn.call(p.context,u,f,h,m),!0;case 6:return p.fn.call(p.context,u,f,h,m,b),!0}for(y=1,w=new Array(v-1);y<v;y++)w[y-1]=arguments[y];p.fn.apply(p.context,w)}else{var S=p.length,j;for(y=0;y<S;y++)switch(p[y].once&&this.removeListener(d,p[y].fn,void 0,!0),v){case 1:p[y].fn.call(p[y].context);break;case 2:p[y].fn.call(p[y].context,u);break;case 3:p[y].fn.call(p[y].context,u,f);break;case 4:p[y].fn.call(p[y].context,u,f,h);break;default:if(!w)for(j=1,w=new Array(v-1);j<v;j++)w[j-1]=arguments[j];p[y].fn.apply(p[y].context,w)}}return!0},l.prototype.on=function(d,u,f){return s(this,d,u,f,!1)},l.prototype.once=function(d,u,f){return s(this,d,u,f,!0)},l.prototype.removeListener=function(d,u,f,h){var m=r?r+d:d;if(!this._events[m])return this;if(!u)return o(this,m),this;var b=this._events[m];if(b.fn)b.fn===u&&(!h||b.once)&&(!f||b.context===f)&&o(this,m);else{for(var g=0,p=[],v=b.length;g<v;g++)(b[g].fn!==u||h&&!b[g].once||f&&b[g].context!==f)&&p.push(b[g]);p.length?this._events[m]=p.length===1?p[0]:p:o(this,m)}return this},l.prototype.removeAllListeners=function(d){var u;return d?(u=r?r+d:d,this._events[u]&&o(this,u)):(this._events=new n,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=r,l.EventEmitter=l,e.exports=l})(_l)),_l.exports}var iT=aT();const sT=br(iT);var Ea=new sT,Yc="recharts.syncEvent.tooltip",Np="recharts.syncEvent.brush";function oT(e,t){if(t){var r=Number.parseInt(t,10);if(!Ot(r))return e?.[r]}}var lT={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},Vb=Dt({name:"options",initialState:lT,reducers:{createEventEmitter:e=>{e.eventEmitter==null&&(e.eventEmitter=Symbol("rechartsEventEmitter"))}}}),cT=Vb.reducer,{createEventEmitter:uT}=Vb.actions;function dT(e){return e.tooltip.syncInteraction}var fT={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},Wb=Dt({name:"chartData",initialState:fT,reducers:{setChartData(e,t){if(e.chartData=t.payload,t.payload==null){e.dataStartIndex=0,e.dataEndIndex=0;return}t.payload.length>0&&e.dataEndIndex!==t.payload.length-1&&(e.dataEndIndex=t.payload.length-1)},setComputedData(e,t){e.computedData=t.payload},setDataStartEndIndexes(e,t){var{startIndex:r,endIndex:n}=t.payload;r!=null&&(e.dataStartIndex=r),n!=null&&(e.dataEndIndex=n)}}}),{setChartData:Sp,setDataStartEndIndexes:hT,setComputedData:sB}=Wb.actions,mT=Wb.reducer,Hb=()=>{};function pT(){var e=de(yd),t=de(wd),r=Ve(),n=de(Iv),a=de(Sr),s=Bs(),o=zu(),l=de(c=>c.rootProps.className);x.useEffect(()=>{if(e==null)return Hb;var c=(d,u,f)=>{if(t!==f&&e===d){if(n==="index"){r(u);return}if(a!=null){var h;if(typeof n=="function"){var m={activeTooltipIndex:u.payload.index==null?void 0:Number(u.payload.index),isTooltipActive:u.payload.active,activeIndex:u.payload.index==null?void 0:Number(u.payload.index),activeLabel:u.payload.label,activeDataKey:u.payload.dataKey,activeCoordinate:u.payload.coordinate},b=n(a,m);h=a[b]}else n==="value"&&(h=a.find(k=>String(k.value)===u.payload.label));var{coordinate:g}=u.payload;if(h==null||u.payload.active===!1||g==null||o==null){r(Wc({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0}));return}var{x:p,y:v}=g,w=Math.min(p,o.x+o.width),y=Math.min(v,o.y+o.height),S={x:s==="horizontal"?h.coordinate:w,y:s==="horizontal"?y:h.coordinate},j=Wc({active:u.payload.active,coordinate:S,dataKey:u.payload.dataKey,index:String(h.index),label:u.payload.label});r(j)}}};return Ea.on(Yc,c),()=>{Ea.off(Yc,c)}},[l,r,t,e,n,a,s,o])}function gT(){var e=de(yd),t=de(wd),r=Ve();x.useEffect(()=>{if(e==null)return Hb;var n=(a,s,o)=>{t!==o&&e===a&&r(hT(s))};return Ea.on(Np,n),()=>{Ea.off(Np,n)}},[r,t,e])}function xT(){var e=Ve();x.useEffect(()=>{e(uT())},[e]),pT(),gT()}function vT(e,t,r,n,a,s){var o=de(h=>KD(h,e,t)),l=de(wd),c=de(yd),d=de(Iv),u=de(dT),f=u?.active;x.useEffect(()=>{if(!f&&c!=null&&l!=null){var h=Wc({active:s,coordinate:r,dataKey:o,index:a,label:typeof n=="number"?String(n):n});Ea.emit(Yc,c,h,l)}},[f,r,o,a,n,l,c,d,s])}function kp(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Pp(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?kp(Object(r),!0).forEach(function(n){bT(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):kp(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function bT(e,t,r){return(t=yT(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function yT(e){var t=wT(e,"string");return typeof t=="symbol"?t:t+""}function wT(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function jT(e){return e.dataKey}function NT(e,t){return x.isValidElement(e)?x.cloneElement(e,t):typeof e=="function"?x.createElement(e,t):x.createElement(Kk,t)}var Op=[],ST={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,isAnimationActive:!Vn.isSsr,itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function zd(e){var t=rr(e,ST),{active:r,allowEscapeViewBox:n,animationDuration:a,animationEasing:s,content:o,filterNull:l,isAnimationActive:c,offset:d,payloadUniqBy:u,position:f,reverseDirection:h,useTranslate3d:m,wrapperStyle:b,cursor:g,shared:p,trigger:v,defaultIndex:w,portal:y,axisId:S}=t,j=Ve(),k=typeof w=="number"?String(w):w;x.useEffect(()=>{j(XA({shared:p,trigger:v,axisId:S,active:r,defaultIndex:k}))},[j,p,v,S,r,k]);var N=zu(),P=Nx(),D=HA(p),{activeIndex:C,isActive:O}=de(W=>QD(W,D,v,k)),A=de(W=>GD(W,D,v,k)),B=de(W=>Ub(W,D,v,k)),M=de(W=>YD(W,D,v,k)),F=A,V=nT(),q=r??O,[K,ne]=Wg([F,q]),Z=D==="axis"?B:void 0;vT(D,v,M,Z,C,q);var T=y??V;if(T==null)return null;var _=F??Op;q||(_=Op),l&&_.length&&(_=Bg(F.filter(W=>W.value!=null&&(W.hide!==!0||t.includeHidden)),u,jT));var Y=_.length>0,ee=x.createElement(eP,{allowEscapeViewBox:n,animationDuration:a,animationEasing:s,isAnimationActive:c,active:q,coordinate:M,hasPayload:Y,offset:d,position:f,reverseDirection:h,useTranslate3d:m,viewBox:N,wrapperStyle:b,lastBoundingBox:K,innerRef:ne,hasPortalFromProps:!!y},NT(o,Pp(Pp({},t),{},{payload:_,label:Z,active:q,coordinate:M,accessibilityLayer:P})));return x.createElement(x.Fragment,null,Ss.createPortal(ee,T),q&&x.createElement(rT,{cursor:g,tooltipEventType:D,coordinate:M,payload:F,index:C}))}var Rl={},$l={},Ll={},Cp;function kT(){return Cp||(Cp=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n,{signal:a,edges:s}={}){let o,l=null;const c=s!=null&&s.includes("leading"),d=s==null||s.includes("trailing"),u=()=>{l!==null&&(r.apply(o,l),o=void 0,l=null)},f=()=>{d&&u(),g()};let h=null;const m=()=>{h!=null&&clearTimeout(h),h=setTimeout(()=>{h=null,f()},n)},b=()=>{h!==null&&(clearTimeout(h),h=null)},g=()=>{b(),o=void 0,l=null},p=()=>{u()},v=function(...w){if(a?.aborted)return;o=this,l=w;const y=h==null;m(),c&&y&&u()};return v.schedule=m,v.cancel=g,v.flush=p,a?.addEventListener("abort",g,{once:!0}),v}e.debounce=t})(Ll)),Ll}var Ap;function PT(){return Ap||(Ap=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=kT();function r(n,a=0,s={}){typeof s!="object"&&(s={});const{leading:o=!1,trailing:l=!0,maxWait:c}=s,d=Array(2);o&&(d[0]="leading"),l&&(d[1]="trailing");let u,f=null;const h=t.debounce(function(...g){u=n.apply(this,g),f=null},a,{edges:d}),m=function(...g){return c!=null&&(f===null&&(f=Date.now()),Date.now()-f>=c)?(u=n.apply(this,g),f=Date.now(),h.cancel(),h.schedule(),u):(h.apply(this,g),u)},b=()=>(h.flush(),u);return m.cancel=h.cancel,m.flush=b,m}e.debounce=r})($l)),$l}var Dp;function OT(){return Dp||(Dp=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=PT();function r(n,a=0,s={}){const{leading:o=!0,trailing:l=!0}=s;return t.debounce(n,a,{leading:o,maxWait:a,trailing:l})}e.throttle=r})(Rl)),Rl}var Fl,Tp;function CT(){return Tp||(Tp=1,Fl=OT().throttle),Fl}var AT=CT();const DT=br(AT);var ya=function(t,r){for(var n=arguments.length,a=new Array(n>2?n-2:0),s=2;s<n;s++)a[s-2]=arguments[s]};function Ip(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Bl(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Ip(Object(r),!0).forEach(function(n){TT(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ip(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function TT(e,t,r){return(t=IT(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function IT(e){var t=MT(e,"string");return typeof t=="symbol"?t:t+""}function MT(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ss=x.forwardRef((e,t)=>{var{aspect:r,initialDimension:n={width:-1,height:-1},width:a="100%",height:s="100%",minWidth:o=0,minHeight:l,maxHeight:c,children:d,debounce:u=0,id:f,className:h,onResize:m,style:b={}}=e,g=x.useRef(null),p=x.useRef();p.current=m,x.useImperativeHandle(t,()=>g.current);var[v,w]=x.useState({containerWidth:n.width,containerHeight:n.height}),y=x.useCallback((j,k)=>{w(N=>{var P=Math.round(j),D=Math.round(k);return N.containerWidth===P&&N.containerHeight===D?N:{containerWidth:P,containerHeight:D}})},[]);x.useEffect(()=>{var j=D=>{var C,{width:O,height:A}=D[0].contentRect;y(O,A),(C=p.current)===null||C===void 0||C.call(p,O,A)};u>0&&(j=DT(j,u,{trailing:!0,leading:!1}));var k=new ResizeObserver(j),{width:N,height:P}=g.current.getBoundingClientRect();return y(N,P),k.observe(g.current),()=>{k.disconnect()}},[y,u]);var S=x.useMemo(()=>{var{containerWidth:j,containerHeight:k}=v;if(j<0||k<0)return null;ya(en(a)||en(s),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,a,s),ya(!r||r>0,"The aspect(%s) must be greater than zero.",r);var N=en(a)?j:a,P=en(s)?k:s;return r&&r>0&&(N?P=N/r:P&&(N=P*r),c&&P>c&&(P=c)),ya(N>0||P>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,N,P,a,s,o,l,r),x.Children.map(d,D=>x.cloneElement(D,{width:N,height:P,style:Bl({width:N,height:P},D.props.style)}))},[r,d,s,c,l,o,v,a]);return x.createElement("div",{id:f?"".concat(f):void 0,className:Oe("recharts-responsive-container",h),style:Bl(Bl({},b),{},{width:a,height:s,minWidth:o,minHeight:l,maxHeight:c}),ref:g},x.createElement("div",{style:{width:0,height:0,overflow:"visible"}},S))}),Kb=e=>null;Kb.displayName="Cell";function ET(e,t,r){return(t=_T(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _T(e){var t=RT(e,"string");return typeof t=="symbol"?t:t+""}function RT(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class $T{constructor(t){ET(this,"cache",new Map),this.maxSize=t}get(t){var r=this.cache.get(t);return r!==void 0&&(this.cache.delete(t),this.cache.set(t,r)),r}set(t,r){if(this.cache.has(t))this.cache.delete(t);else if(this.cache.size>=this.maxSize){var n=this.cache.keys().next().value;this.cache.delete(n)}this.cache.set(t,r)}clear(){this.cache.clear()}size(){return this.cache.size}}function Mp(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function LT(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Mp(Object(r),!0).forEach(function(n){FT(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Mp(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function FT(e,t,r){return(t=BT(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function BT(e){var t=qT(e,"string");return typeof t=="symbol"?t:t+""}function qT(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var UT={cacheSize:2e3,enableCache:!0},Yb=LT({},UT),Ep=new $T(Yb.cacheSize),zT={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},_p="recharts_measurement_span";function VT(e,t){var r=t.fontSize||"",n=t.fontFamily||"",a=t.fontWeight||"",s=t.fontStyle||"",o=t.letterSpacing||"",l=t.textTransform||"";return"".concat(e,"|").concat(r,"|").concat(n,"|").concat(a,"|").concat(s,"|").concat(o,"|").concat(l)}var Rp=(e,t)=>{try{var r=document.getElementById(_p);r||(r=document.createElement("span"),r.setAttribute("id",_p),r.setAttribute("aria-hidden","true"),document.body.appendChild(r)),Object.assign(r.style,zT,t),r.textContent="".concat(e);var n=r.getBoundingClientRect();return{width:n.width,height:n.height}}catch{return{width:0,height:0}}},wa=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||Vn.isSsr)return{width:0,height:0};if(!Yb.enableCache)return Rp(t,r);var n=VT(t,r),a=Ep.get(n);if(a)return a;var s=Rp(t,r);return Ep.set(n,s),s},$p=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,Lp=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,WT=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,HT=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,Gb={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},KT=Object.keys(Gb),An="NaN";function YT(e,t){return e*Gb[t]}class pt{static parse(t){var r,[,n,a]=(r=HT.exec(t))!==null&&r!==void 0?r:[];return new pt(parseFloat(n),a??"")}constructor(t,r){this.num=t,this.unit=r,this.num=t,this.unit=r,Ot(t)&&(this.unit=""),r!==""&&!WT.test(r)&&(this.num=NaN,this.unit=""),KT.includes(r)&&(this.num=YT(t,r),this.unit="px")}add(t){return this.unit!==t.unit?new pt(NaN,""):new pt(this.num+t.num,this.unit)}subtract(t){return this.unit!==t.unit?new pt(NaN,""):new pt(this.num-t.num,this.unit)}multiply(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new pt(NaN,""):new pt(this.num*t.num,this.unit||t.unit)}divide(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new pt(NaN,""):new pt(this.num/t.num,this.unit||t.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return Ot(this.num)}}function Qb(e){if(e.includes(An))return An;for(var t=e;t.includes("*")||t.includes("/");){var r,[,n,a,s]=(r=$p.exec(t))!==null&&r!==void 0?r:[],o=pt.parse(n??""),l=pt.parse(s??""),c=a==="*"?o.multiply(l):o.divide(l);if(c.isNaN())return An;t=t.replace($p,c.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var d,[,u,f,h]=(d=Lp.exec(t))!==null&&d!==void 0?d:[],m=pt.parse(u??""),b=pt.parse(h??""),g=f==="+"?m.add(b):m.subtract(b);if(g.isNaN())return An;t=t.replace(Lp,g.toString())}return t}var Fp=/\(([^()]*)\)/;function GT(e){for(var t=e,r;(r=Fp.exec(t))!=null;){var[,n]=r;t=t.replace(Fp,Qb(n))}return t}function QT(e){var t=e.replace(/\s+/g,"");return t=GT(t),t=Qb(t),t}function XT(e){try{return QT(e)}catch{return An}}function ql(e){var t=XT(e.slice(5,-1));return t===An?"":t}var ZT=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],JT=["dx","dy","angle","className","breakAll"];function Gc(){return Gc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Gc.apply(null,arguments)}function Bp(e,t){if(e==null)return{};var r,n,a=eI(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function eI(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var Xb=/[ \f\n\r\t\v\u2028\u2029]+/,Zb=e=>{var{children:t,breakAll:r,style:n}=e;try{var a=[];Me(t)||(r?a=t.toString().split(""):a=t.toString().split(Xb));var s=a.map(l=>({word:l,width:wa(l,n).width})),o=r?0:wa("Â ",n).width;return{wordsWithComputedWidth:s,spaceWidth:o}}catch{return null}},tI=(e,t,r,n,a)=>{var{maxLines:s,children:o,style:l,breakAll:c}=e,d=se(s),u=o,f=function(){var O=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return O.reduce((A,B)=>{var{word:M,width:F}=B,V=A[A.length-1];if(V&&(n==null||a||V.width+F+r<Number(n)))V.words.push(M),V.width+=F+r;else{var q={words:[M],width:F};A.push(q)}return A},[])},h=f(t),m=C=>C.reduce((O,A)=>O.width>A.width?O:A);if(!d||a)return h;var b=h.length>s||m(h).width>Number(n);if(!b)return h;for(var g="â€¦",p=C=>{var O=u.slice(0,C),A=Zb({breakAll:c,style:l,children:O+g}).wordsWithComputedWidth,B=f(A),M=B.length>s||m(B).width>Number(n);return[M,B]},v=0,w=u.length-1,y=0,S;v<=w&&y<=u.length-1;){var j=Math.floor((v+w)/2),k=j-1,[N,P]=p(k),[D]=p(j);if(!N&&!D&&(v=j+1),N&&D&&(w=j-1),!N&&D){S=P;break}y++}return S||h},qp=e=>{var t=Me(e)?[]:e.toString().split(Xb);return[{words:t}]},rI=e=>{var{width:t,scaleToFit:r,children:n,style:a,breakAll:s,maxLines:o}=e;if((t||r)&&!Vn.isSsr){var l,c,d=Zb({breakAll:s,children:n,style:a});if(d){var{wordsWithComputedWidth:u,spaceWidth:f}=d;l=u,c=f}else return qp(n);return tI({breakAll:s,children:n,maxLines:o,style:a},l,c,t,r)}return qp(n)},Up="#808080",Vd=x.forwardRef((e,t)=>{var{x:r=0,y:n=0,lineHeight:a="1em",capHeight:s="0.71em",scaleToFit:o=!1,textAnchor:l="start",verticalAnchor:c="end",fill:d=Up}=e,u=Bp(e,ZT),f=x.useMemo(()=>rI({breakAll:u.breakAll,children:u.children,maxLines:u.maxLines,scaleToFit:o,style:u.style,width:u.width}),[u.breakAll,u.children,u.maxLines,o,u.style,u.width]),{dx:h,dy:m,angle:b,className:g,breakAll:p}=u,v=Bp(u,JT);if(!er(r)||!er(n))return null;var w=r+(se(h)?h:0),y=n+(se(m)?m:0),S;switch(c){case"start":S=ql("calc(".concat(s,")"));break;case"middle":S=ql("calc(".concat((f.length-1)/2," * -").concat(a," + (").concat(s," / 2))"));break;default:S=ql("calc(".concat(f.length-1," * -").concat(a,")"));break}var j=[];if(o){var k=f[0].width,{width:N}=u;j.push("scale(".concat(se(N)?N/k:1,")"))}return b&&j.push("rotate(".concat(b,", ").concat(w,", ").concat(y,")")),j.length&&(v.transform=j.join(" ")),x.createElement("text",Gc({},Le(v,!0),{ref:t,x:w,y,className:Oe("recharts-text",g),textAnchor:l,fill:d.includes("url")?Up:d}),f.map((P,D)=>{var C=P.words.join(p?"":" ");return x.createElement("tspan",{x:w,dy:D===0?S:a,key:"".concat(C,"-").concat(D)},C)}))});Vd.displayName="Text";var nI=["offset"],aI=["labelRef"];function zp(e,t){if(e==null)return{};var r,n,a=iI(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function iI(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Vp(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function $e(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Vp(Object(r),!0).forEach(function(n){sI(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Vp(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function sI(e,t,r){return(t=oI(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function oI(e){var t=lI(e,"string");return typeof t=="symbol"?t:t+""}function lI(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function lr(){return lr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},lr.apply(null,arguments)}var cI=e=>{var{value:t,formatter:r}=e,n=Me(e.children)?t:e.children;return typeof r=="function"?r(n):n},Wd=e=>e!=null&&typeof e=="function",uI=(e,t)=>{var r=xt(t-e),n=Math.min(Math.abs(t-e),360);return r*n},dI=(e,t,r,n)=>{var{position:a,offset:s,className:o}=e,{cx:l,cy:c,innerRadius:d,outerRadius:u,startAngle:f,endAngle:h,clockWise:m}=n,b=(d+u)/2,g=uI(f,h),p=g>=0?1:-1,v,w;a==="insideStart"?(v=f+p*s,w=m):a==="insideEnd"?(v=h-p*s,w=!m):a==="end"&&(v=h+p*s,w=m),w=g<=0?w:!w;var y=st(l,c,b,v),S=st(l,c,b,v+(w?1:-1)*359),j="M".concat(y.x,",").concat(y.y,`
    A`).concat(b,",").concat(b,",0,1,").concat(w?0:1,`,
    `).concat(S.x,",").concat(S.y),k=Me(e.id)?Sa("recharts-radial-line-"):e.id;return x.createElement("text",lr({},r,{dominantBaseline:"central",className:Oe("recharts-radial-bar-label",o)}),x.createElement("defs",null,x.createElement("path",{id:k,d:j})),x.createElement("textPath",{xlinkHref:"#".concat(k)},t))},fI=(e,t,r)=>{var{cx:n,cy:a,innerRadius:s,outerRadius:o,startAngle:l,endAngle:c}=e,d=(l+c)/2;if(r==="outside"){var{x:u,y:f}=st(n,a,o+t,d);return{x:u,y:f,textAnchor:u>=n?"start":"end",verticalAnchor:"middle"}}if(r==="center")return{x:n,y:a,textAnchor:"middle",verticalAnchor:"middle"};if(r==="centerTop")return{x:n,y:a,textAnchor:"middle",verticalAnchor:"start"};if(r==="centerBottom")return{x:n,y:a,textAnchor:"middle",verticalAnchor:"end"};var h=(s+o)/2,{x:m,y:b}=st(n,a,h,d);return{x:m,y:b,textAnchor:"middle",verticalAnchor:"middle"}},hI=(e,t)=>{var{parentViewBox:r,offset:n,position:a}=e,{x:s,y:o,width:l,height:c}=t,d=c>=0?1:-1,u=d*n,f=d>0?"end":"start",h=d>0?"start":"end",m=l>=0?1:-1,b=m*n,g=m>0?"end":"start",p=m>0?"start":"end";if(a==="top"){var v={x:s+l/2,y:o-d*n,textAnchor:"middle",verticalAnchor:f};return $e($e({},v),r?{height:Math.max(o-r.y,0),width:l}:{})}if(a==="bottom"){var w={x:s+l/2,y:o+c+u,textAnchor:"middle",verticalAnchor:h};return $e($e({},w),r?{height:Math.max(r.y+r.height-(o+c),0),width:l}:{})}if(a==="left"){var y={x:s-b,y:o+c/2,textAnchor:g,verticalAnchor:"middle"};return $e($e({},y),r?{width:Math.max(y.x-r.x,0),height:c}:{})}if(a==="right"){var S={x:s+l+b,y:o+c/2,textAnchor:p,verticalAnchor:"middle"};return $e($e({},S),r?{width:Math.max(r.x+r.width-S.x,0),height:c}:{})}var j=r?{width:l,height:c}:{};return a==="insideLeft"?$e({x:s+b,y:o+c/2,textAnchor:p,verticalAnchor:"middle"},j):a==="insideRight"?$e({x:s+l-b,y:o+c/2,textAnchor:g,verticalAnchor:"middle"},j):a==="insideTop"?$e({x:s+l/2,y:o+u,textAnchor:"middle",verticalAnchor:h},j):a==="insideBottom"?$e({x:s+l/2,y:o+c-u,textAnchor:"middle",verticalAnchor:f},j):a==="insideTopLeft"?$e({x:s+b,y:o+u,textAnchor:p,verticalAnchor:h},j):a==="insideTopRight"?$e({x:s+l-b,y:o+u,textAnchor:g,verticalAnchor:h},j):a==="insideBottomLeft"?$e({x:s+b,y:o+c-u,textAnchor:p,verticalAnchor:f},j):a==="insideBottomRight"?$e({x:s+l-b,y:o+c-u,textAnchor:g,verticalAnchor:f},j):a&&typeof a=="object"&&(se(a.x)||en(a.x))&&(se(a.y)||en(a.y))?$e({x:s+Gt(a.x,l),y:o+Gt(a.y,c),textAnchor:"end",verticalAnchor:"end"},j):$e({x:s+l/2,y:o+c/2,textAnchor:"middle",verticalAnchor:"middle"},j)},mI=e=>"cx"in e&&se(e.cx);function St(e){var{offset:t=5}=e,r=zp(e,nI),n=$e({offset:t},r),{viewBox:a,position:s,value:o,children:l,content:c,className:d="",textBreakAll:u,labelRef:f}=n,h=de($v),m=zu(),b=s==="center"?m:h??m,g=a||b;if(!g||Me(o)&&Me(l)&&!x.isValidElement(c)&&typeof c!="function")return null;var p=$e($e({},n),{},{viewBox:g});if(x.isValidElement(c)){var{labelRef:v}=p,w=zp(p,aI);return x.cloneElement(c,w)}var y;if(typeof c=="function"){if(y=x.createElement(c,p),x.isValidElement(y))return y}else y=cI(n);var S=mI(g),j=Le(n,!0);if(S&&(s==="insideStart"||s==="insideEnd"||s==="end"))return dI(n,y,j,g);var k=S?fI(g,n.offset,n.position):hI(n,g);return x.createElement(Vd,lr({ref:f,className:Oe("recharts-label",d)},j,k,{breakAll:u}),y)}St.displayName="Label";var Jb=e=>{var{cx:t,cy:r,angle:n,startAngle:a,endAngle:s,r:o,radius:l,innerRadius:c,outerRadius:d,x:u,y:f,top:h,left:m,width:b,height:g,clockWise:p,labelViewBox:v}=e;if(v)return v;if(se(b)&&se(g)){if(se(u)&&se(f))return{x:u,y:f,width:b,height:g};if(se(h)&&se(m))return{x:h,y:m,width:b,height:g}}if(se(u)&&se(f))return{x:u,y:f,width:0,height:0};if(se(t)&&se(r))return{cx:t,cy:r,startAngle:a||n||0,endAngle:s||n||0,innerRadius:c||0,outerRadius:d||l||o||0,clockWise:p};if(e.viewBox)return e.viewBox},pI=(e,t,r)=>{if(!e)return null;var n={viewBox:t,labelRef:r};return e===!0?x.createElement(St,lr({key:"label-implicit"},n)):er(e)?x.createElement(St,lr({key:"label-implicit",value:e},n)):x.isValidElement(e)?e.type===St?x.cloneElement(e,$e({key:"label-implicit"},n)):x.createElement(St,lr({key:"label-implicit",content:e},n)):Wd(e)?x.createElement(St,lr({key:"label-implicit",content:e},n)):e&&typeof e=="object"?x.createElement(St,lr({},e,{key:"label-implicit"},n)):null},gI=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&n&&!t.label)return null;var{children:a,labelRef:s}=t,o=Jb(t),l=ju(a,St).map((d,u)=>x.cloneElement(d,{viewBox:r||o,key:"label-".concat(u)}));if(!n)return l;var c=pI(t.label,r||o,s);return[c,...l]};St.parseViewBox=Jb;St.renderCallByParent=gI;var Ul={},zl={},Wp;function xI(){return Wp||(Wp=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r[r.length-1]}e.last=t})(zl)),zl}var Vl={},Hp;function vI(){return Hp||(Hp=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Array.isArray(r)?r:Array.from(r)}e.toArray=t})(Vl)),Vl}var Kp;function bI(){return Kp||(Kp=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=xI(),r=vI(),n=Du();function a(s){if(n.isArrayLike(s))return t.last(r.toArray(s))}e.last=a})(Ul)),Ul}var Wl,Yp;function yI(){return Yp||(Yp=1,Wl=bI().last),Wl}var wI=yI();const jI=br(wI);var NI=["valueAccessor"],SI=["data","dataKey","clockWise","id","textBreakAll"];function os(){return os=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},os.apply(null,arguments)}function Gp(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Qp(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Gp(Object(r),!0).forEach(function(n){kI(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Gp(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function kI(e,t,r){return(t=PI(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function PI(e){var t=OI(e,"string");return typeof t=="symbol"?t:t+""}function OI(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Xp(e,t){if(e==null)return{};var r,n,a=CI(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function CI(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var AI=e=>Array.isArray(e.value)?jI(e.value):e.value;function _r(e){var{valueAccessor:t=AI}=e,r=Xp(e,NI),{data:n,dataKey:a,clockWise:s,id:o,textBreakAll:l}=r,c=Xp(r,SI);return!n||!n.length?null:x.createElement(Qt,{className:"recharts-label-list"},n.map((d,u)=>{var f=Me(a)?t(d,u):Je(d&&d.payload,a),h=Me(o)?{}:{id:"".concat(o,"-").concat(u)};return x.createElement(St,os({},Le(d,!0),c,h,{parentViewBox:d.parentViewBox,value:f,textBreakAll:l,viewBox:St.parseViewBox(Me(s)?d:Qp(Qp({},d),{},{clockWise:s})),key:"label-".concat(u),index:u}))}))}_r.displayName="LabelList";function DI(e,t){return e?e===!0?x.createElement(_r,{key:"labelList-implicit",data:t}):x.isValidElement(e)||Wd(e)?x.createElement(_r,{key:"labelList-implicit",data:t,content:e}):typeof e=="object"?x.createElement(_r,os({data:t},e,{key:"labelList-implicit"})):null:null}function TI(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var{children:n}=e,a=ju(n,_r).map((o,l)=>x.cloneElement(o,{data:t,key:"labelList-".concat(l)}));if(!r)return a;var s=DI(e.label,t);return[s,...a]}_r.renderCallByParent=TI;function Qc(){return Qc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Qc.apply(null,arguments)}var ey=e=>{var{cx:t,cy:r,r:n,className:a}=e,s=Oe("recharts-dot",a);return t===+t&&r===+r&&n===+n?x.createElement("circle",Qc({},gn(e),wu(e),{className:s,cx:t,cy:r,r:n})):null},II={radiusAxis:{},angleAxis:{}},ty=Dt({name:"polarAxis",initialState:II,reducers:{addRadiusAxis(e,t){e.radiusAxis[t.payload.id]=t.payload},removeRadiusAxis(e,t){delete e.radiusAxis[t.payload.id]},addAngleAxis(e,t){e.angleAxis[t.payload.id]=t.payload},removeAngleAxis(e,t){delete e.angleAxis[t.payload.id]}}}),{addRadiusAxis:oB,removeRadiusAxis:lB,addAngleAxis:cB,removeAngleAxis:uB}=ty.actions,MI=ty.reducer,Hl={},Zp;function EI(){return Zp||(Zp=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){if(typeof r!="object"||r==null)return!1;if(Object.getPrototypeOf(r)===null)return!0;if(Object.prototype.toString.call(r)!=="[object Object]"){const a=r[Symbol.toStringTag];return a==null||!Object.getOwnPropertyDescriptor(r,Symbol.toStringTag)?.writable?!1:r.toString()===`[object ${a}]`}let n=r;for(;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return Object.getPrototypeOf(r)===n}e.isPlainObject=t})(Hl)),Hl}var Kl,Jp;function _I(){return Jp||(Jp=1,Kl=EI().isPlainObject),Kl}var RI=_I();const $I=br(RI);function ls(){return ls=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ls.apply(null,arguments)}var e0=(e,t,r,n,a)=>{var s=r-n,o;return o="M ".concat(e,",").concat(t),o+="L ".concat(e+r,",").concat(t),o+="L ".concat(e+r-s/2,",").concat(t+a),o+="L ".concat(e+r-s/2-n,",").concat(t+a),o+="L ".concat(e,",").concat(t," Z"),o},LI={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},FI=e=>{var t=rr(e,LI),r=x.useRef(),[n,a]=x.useState(-1);x.useEffect(()=>{if(r.current&&r.current.getTotalLength)try{var p=r.current.getTotalLength();p&&a(p)}catch{}},[]);var{x:s,y:o,upperWidth:l,lowerWidth:c,height:d,className:u}=t,{animationEasing:f,animationDuration:h,animationBegin:m,isUpdateAnimationActive:b}=t;if(s!==+s||o!==+o||l!==+l||c!==+c||d!==+d||l===0&&c===0||d===0)return null;var g=Oe("recharts-trapezoid",u);return b?x.createElement(Wi,{canBegin:n>0,from:{upperWidth:0,lowerWidth:0,height:d,x:s,y:o},to:{upperWidth:l,lowerWidth:c,height:d,x:s,y:o},duration:h,animationEasing:f,isActive:b},p=>{var{upperWidth:v,lowerWidth:w,height:y,x:S,y:j}=p;return x.createElement(Wi,{canBegin:n>0,from:"0px ".concat(n===-1?1:n,"px"),to:"".concat(n,"px 0px"),attributeName:"strokeDasharray",begin:m,duration:h,easing:f},x.createElement("path",ls({},Le(t,!0),{className:g,d:e0(S,j,v,w,y),ref:r})))}):x.createElement("g",null,x.createElement("path",ls({},Le(t,!0),{className:g,d:e0(s,o,l,c,d)})))},BI=["option","shapeType","propTransformer","activeClassName","isActive"];function qI(e,t){if(e==null)return{};var r,n,a=UI(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function UI(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function t0(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function cs(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?t0(Object(r),!0).forEach(function(n){zI(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):t0(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function zI(e,t,r){return(t=VI(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function VI(e){var t=WI(e,"string");return typeof t=="symbol"?t:t+""}function WI(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function HI(e,t){return cs(cs({},t),e)}function KI(e,t){return e==="symbols"}function r0(e){var{shapeType:t,elementProps:r}=e;switch(t){case"rectangle":return x.createElement(Tx,r);case"trapezoid":return x.createElement(FI,r);case"sector":return x.createElement(Ex,r);case"symbols":if(KI(t))return x.createElement(Ou,r);break;default:return null}}function YI(e){return x.isValidElement(e)?e.props:e}function GI(e){var{option:t,shapeType:r,propTransformer:n=HI,activeClassName:a="recharts-active-shape",isActive:s}=e,o=qI(e,BI),l;if(x.isValidElement(t))l=x.cloneElement(t,cs(cs({},o),YI(t)));else if(typeof t=="function")l=t(o);else if($I(t)&&typeof t!="boolean"){var c=n(t,o);l=x.createElement(r0,{shapeType:r,elementProps:c})}else{var d=o;l=x.createElement(r0,{shapeType:r,elementProps:d})}return s?x.createElement(Qt,{className:a},l):l}var ry=(e,t)=>{var r=Ve();return(n,a)=>s=>{e?.(n,a,s),r(Sb({activeIndex:String(a),activeDataKey:t,activeCoordinate:n.tooltipPosition}))}},ny=e=>{var t=Ve();return(r,n)=>a=>{e?.(r,n,a),t(ZA())}},ay=(e,t)=>{var r=Ve();return(n,a)=>s=>{e?.(n,a,s),r(JA({activeIndex:String(a),activeDataKey:t,activeCoordinate:n.tooltipPosition}))}};function iy(e){var{fn:t,args:r}=e,n=Ve(),a=bt();return x.useEffect(()=>{if(!a){var s=t(r);return n(GA(s)),()=>{n(QA(s))}}},[t,r,n,a]),null}var QI=()=>{};function sy(e){var{legendPayload:t}=e,r=Ve(),n=bt();return x.useEffect(()=>n?QI:(r(Ak(t)),()=>{r(Dk(t))}),[r,n,t]),null}function oy(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",r=x.useRef(Sa(t)),n=x.useRef(e);return n.current!==e&&(r.current=Sa(t),n.current=e),r.current}var Yl,XI=()=>{var[e]=x.useState(()=>Sa("uid-"));return e},ZI=(Yl=Ew.useId)!==null&&Yl!==void 0?Yl:XI;function JI(e,t){var r=ZI();return t||(e?"".concat(e,"-").concat(r):r)}var eM=x.createContext(void 0),ly=e=>{var{id:t,type:r,children:n}=e,a=JI("recharts-".concat(r),t);return x.createElement(eM.Provider,{value:a},n(a))},tM={cartesianItems:[],polarItems:[]},cy=Dt({name:"graphicalItems",initialState:tM,reducers:{addCartesianGraphicalItem(e,t){e.cartesianItems.push(t.payload)},replaceCartesianGraphicalItem(e,t){var{prev:r,next:n}=t.payload,a=fr(e).cartesianItems.indexOf(r);a>-1&&(e.cartesianItems[a]=n)},removeCartesianGraphicalItem(e,t){var r=fr(e).cartesianItems.indexOf(t.payload);r>-1&&e.cartesianItems.splice(r,1)},addPolarGraphicalItem(e,t){e.polarItems.push(t.payload)},removePolarGraphicalItem(e,t){var r=fr(e).polarItems.indexOf(t.payload);r>-1&&e.polarItems.splice(r,1)}}}),{addCartesianGraphicalItem:rM,replaceCartesianGraphicalItem:nM,removeCartesianGraphicalItem:aM,addPolarGraphicalItem:dB,removePolarGraphicalItem:fB}=cy.actions,iM=cy.reducer;function uy(e){var t=Ve(),r=x.useRef(null);return x.useEffect(()=>{r.current===null?t(rM(e)):r.current!==e&&t(nM({prev:r.current,next:e})),r.current=e},[t,e]),x.useEffect(()=>()=>{r.current&&(t(aM(r.current)),r.current=null)},[t]),null}function sM(){}var oM={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},n0={t:0},Gl={t:1};function dy(e){var t=rr(e,oM),{isActive:r,canBegin:n,duration:a,easing:s,begin:o,onAnimationEnd:l,onAnimationStart:c,children:d}=t,u=Dx("JavascriptAnimate",t.animationManager),[f,h]=x.useState(r?n0:Gl),m=x.useRef(null);return x.useEffect(()=>{r||h(Gl)},[r]),x.useEffect(()=>{if(!r||!n)return sM;var b=Ax(n0,Gl,Ox(s),a,h,u.getTimeoutController()),g=()=>{m.current=b()};return u.start([c,o,g,a,l]),()=>{u.stop(),m.current&&m.current(),l()}},[r,n,a,s,o,c,l,u]),d(f.t)}var lM=z([et],e=>{if(e)return{top:e.top,bottom:e.bottom,left:e.left,right:e.right}}),cM=z([lM,yr,wr],(e,t,r)=>{if(!(!e||t==null||r==null))return{x:e.left,y:e.top,width:Math.max(0,t-e.left-e.right),height:Math.max(0,r-e.top-e.bottom)}}),Hd=()=>de(cM),uM=()=>de(FD);function a0(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function i0(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?a0(Object(r),!0).forEach(function(n){dM(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a0(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function dM(e,t,r){return(t=fM(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function fM(e){var t=hM(e,"string");return typeof t=="symbol"?t:t+""}function hM(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var mM=e=>{var{point:t,childIndex:r,mainColor:n,activeDot:a,dataKey:s}=e;if(a===!1||t.x==null||t.y==null)return null;var o=i0(i0({index:r,dataKey:s,cx:t.x,cy:t.y,r:4,fill:n??"none",strokeWidth:2,stroke:"#fff",payload:t.payload,value:t.value},Le(a,!1)),wu(a)),l;return x.isValidElement(a)?l=x.cloneElement(a,o):typeof a=="function"?l=a(o):l=x.createElement(ey,o),x.createElement(Qt,{className:"recharts-active-dot"},l)};function pM(e){var{points:t,mainColor:r,activeDot:n,itemDataKey:a}=e,s=de(mn),o=uM();if(t==null||o==null)return null;var l=t.find(c=>o.includes(c.payload));return Me(l)?null:mM({point:l,childIndex:Number(s),mainColor:r,dataKey:a,activeDot:n})}var gM="Invariant failed";function xM(e,t){throw new Error(gM)}var vM=["x","y"];function Xc(){return Xc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Xc.apply(null,arguments)}function s0(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function fa(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?s0(Object(r),!0).forEach(function(n){bM(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s0(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function bM(e,t,r){return(t=yM(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function yM(e){var t=wM(e,"string");return typeof t=="symbol"?t:t+""}function wM(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function jM(e,t){if(e==null)return{};var r,n,a=NM(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function NM(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function SM(e,t){var{x:r,y:n}=e,a=jM(e,vM),s="".concat(r),o=parseInt(s,10),l="".concat(n),c=parseInt(l,10),d="".concat(t.height||a.height),u=parseInt(d,10),f="".concat(t.width||a.width),h=parseInt(f,10);return fa(fa(fa(fa(fa({},t),a),o?{x:o}:{}),c?{y:c}:{}),{},{height:u,width:h,name:t.name,radius:t.radius})}function fy(e){return x.createElement(GI,Xc({shapeType:"rectangle",propTransformer:SM,activeClassName:"recharts-active-bar"},e))}var kM=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(n,a)=>{if(se(t))return t;var s=se(n)||Me(n);return s?t(n,a):(s||xM(),r)}},PM={},hy=Dt({name:"errorBars",initialState:PM,reducers:{addErrorBar:(e,t)=>{var{itemId:r,errorBar:n}=t.payload;e[r]||(e[r]=[]),e[r].push(n)},removeErrorBar:(e,t)=>{var{itemId:r,errorBar:n}=t.payload;e[r]&&(e[r]=e[r].filter(a=>a.dataKey!==n.dataKey||a.direction!==n.direction))}}}),{addErrorBar:hB,removeErrorBar:mB}=hy.actions,OM=hy.reducer,CM=["children"];function AM(e,t){if(e==null)return{};var r,n,a=DM(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function DM(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var TM={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},IM=x.createContext(TM);function my(e){var{children:t}=e,r=AM(e,CM);return x.createElement(IM.Provider,{value:r},t)}function Kd(e,t){var r,n,a=de(d=>Nr(d,e)),s=de(d=>Vr(d,t)),o=(r=a?.allowDataOverflow)!==null&&r!==void 0?r:wt.allowDataOverflow,l=(n=s?.allowDataOverflow)!==null&&n!==void 0?n:jt.allowDataOverflow,c=o||l;return{needClip:c,needClipX:o,needClipY:l}}function py(e){var{xAxisId:t,yAxisId:r,clipPathId:n}=e,a=Hd(),{needClipX:s,needClipY:o,needClip:l}=Kd(t,r);if(!l)return null;var{x:c,y:d,width:u,height:f}=a;return x.createElement("clipPath",{id:"clipPath-".concat(n)},x.createElement("rect",{x:s?c:c-u/2,y:o?d:d-f/2,width:s?u:u*2,height:o?f:f*2}))}var MM=["onMouseEnter","onMouseLeave","onClick"],EM=["value","background","tooltipPosition"],_M=["id"],RM=["onMouseEnter","onClick","onMouseLeave"];function Un(){return Un=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Un.apply(null,arguments)}function o0(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function ct(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?o0(Object(r),!0).forEach(function(n){$M(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o0(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function $M(e,t,r){return(t=LM(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function LM(e){var t=FM(e,"string");return typeof t=="symbol"?t:t+""}function FM(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function us(e,t){if(e==null)return{};var r,n,a=BM(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function BM(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var qM=e=>{var{dataKey:t,name:r,fill:n,legendType:a,hide:s}=e;return[{inactive:s,dataKey:t,type:a,color:n,value:Rs(r,t),payload:e}]};function UM(e){var{dataKey:t,stroke:r,strokeWidth:n,fill:a,name:s,hide:o,unit:l}=e;return{dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:r,strokeWidth:n,fill:a,dataKey:t,nameKey:void 0,name:Rs(s,t),hide:o,type:e.tooltipType,color:e.fill,unit:l}}}function zM(e){var t=de(mn),{data:r,dataKey:n,background:a,allOtherBarProps:s}=e,{onMouseEnter:o,onMouseLeave:l,onClick:c}=s,d=us(s,MM),u=ry(o,n),f=ny(l),h=ay(c,n);if(!a||r==null)return null;var m=Le(a,!1);return x.createElement(x.Fragment,null,r.map((b,g)=>{var{value:p,background:v,tooltipPosition:w}=b,y=us(b,EM);if(!v)return null;var S=u(b,g),j=f(b,g),k=h(b,g),N=ct(ct(ct(ct(ct({option:a,isActive:String(g)===t},y),{},{fill:"#eee"},v),m),Ps(d,b,g)),{},{onMouseEnter:S,onMouseLeave:j,onClick:k,dataKey:n,index:g,className:"recharts-bar-background-rectangle"});return x.createElement(fy,Un({key:"background-bar-".concat(g)},N))}))}function gy(e){var{data:t,props:r,showLabels:n}=e,a=gn(r),{id:s}=a,o=us(a,_M),{shape:l,dataKey:c,activeBar:d}=r,u=de(mn),f=de($b),{onMouseEnter:h,onClick:m,onMouseLeave:b}=r,g=us(r,RM),p=ry(h,c),v=ny(b),w=ay(m,c);return t?x.createElement(x.Fragment,null,t.map((y,S)=>{var j=d&&String(S)===u&&(f==null||c===f),k=j?d:l,N=ct(ct(ct({},o),y),{},{isActive:j,option:k,index:S,dataKey:c});return x.createElement(Qt,Un({className:"recharts-bar-rectangle"},Ps(g,y,S),{onMouseEnter:p(y,S),onMouseLeave:v(y,S),onClick:w(y,S),key:"rectangle-".concat(y?.x,"-").concat(y?.y,"-").concat(y?.value,"-").concat(S)}),x.createElement(fy,N))}),n&&_r.renderCallByParent(r,t)):null}function VM(e){var{props:t,previousRectanglesRef:r}=e,{data:n,layout:a,isAnimationActive:s,animationBegin:o,animationDuration:l,animationEasing:c,onAnimationEnd:d,onAnimationStart:u}=t,f=r.current,h=oy(t,"recharts-bar-"),[m,b]=x.useState(!1),g=x.useCallback(()=>{typeof d=="function"&&d(),b(!1)},[d]),p=x.useCallback(()=>{typeof u=="function"&&u(),b(!0)},[u]);return x.createElement(dy,{begin:o,duration:l,isActive:s,easing:c,onAnimationEnd:g,onAnimationStart:p,key:h},v=>{var w=v===1?n:n?.map((y,S)=>{var j=f&&f[S];if(j)return ct(ct({},y),{},{x:Ut(j.x,y.x,v),y:Ut(j.y,y.y,v),width:Ut(j.width,y.width,v),height:Ut(j.height,y.height,v)});if(a==="horizontal"){var k=Ut(0,y.height,v);return ct(ct({},y),{},{y:y.y+y.height-k,height:k})}var N=Ut(0,y.width,v);return ct(ct({},y),{},{width:N})});return v>0&&(r.current=w??null),w==null?null:x.createElement(Qt,null,x.createElement(gy,{props:t,data:w,showLabels:!m}))})}function WM(e){var{data:t,isAnimationActive:r}=e,n=x.useRef(null);return r&&t&&t.length&&(n.current==null||n.current!==t)?x.createElement(VM,{previousRectanglesRef:n,props:e}):x.createElement(gy,{props:e,data:t,showLabels:!0})}var xy=0,HM=(e,t)=>{var r=Array.isArray(e.value)?e.value[1]:e.value;return{x:e.x,y:e.y,value:r,errorVal:Je(e,t)}};class KM extends x.PureComponent{render(){var{hide:t,data:r,dataKey:n,className:a,xAxisId:s,yAxisId:o,needClip:l,background:c,id:d}=this.props;if(t)return null;var u=Oe("recharts-bar",a),f=d;return x.createElement(Qt,{className:u,id:d},l&&x.createElement("defs",null,x.createElement(py,{clipPathId:f,xAxisId:s,yAxisId:o})),x.createElement(Qt,{className:"recharts-bar-rectangles",clipPath:l?"url(#clipPath-".concat(f,")"):void 0},x.createElement(zM,{data:r,dataKey:n,background:c,allOtherBarProps:this.props}),x.createElement(WM,this.props)),this.props.children)}}var YM={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",hide:!1,isAnimationActive:!Vn.isSsr,legendType:"rect",minPointSize:xy,xAxisId:0,yAxisId:0};function GM(e){var{xAxisId:t,yAxisId:r,hide:n,legendType:a,minPointSize:s,activeBar:o,animationBegin:l,animationDuration:c,animationEasing:d,isAnimationActive:u}=e,{needClip:f}=Kd(t,r),h=Bs(),m=bt(),b=ju(e.children,Kb),g=de(w=>jE(w,t,r,m,e.id,b));if(h!=="vertical"&&h!=="horizontal")return null;var p,v=g?.[0];return v==null||v.height==null||v.width==null?p=0:p=h==="vertical"?v.height/2:v.width/2,x.createElement(my,{xAxisId:t,yAxisId:r,data:g,dataPointFormatter:HM,errorBarOffset:p},x.createElement(KM,Un({},e,{layout:h,needClip:f,data:g,xAxisId:t,yAxisId:r,hide:n,legendType:a,minPointSize:s,activeBar:o,animationBegin:l,animationDuration:c,animationEasing:d,isAnimationActive:u})))}function QM(e){var{layout:t,barSettings:{dataKey:r,minPointSize:n},pos:a,bandSize:s,xAxis:o,yAxis:l,xAxisTicks:c,yAxisTicks:d,stackedData:u,displayedData:f,offset:h,cells:m}=e,b=t==="horizontal"?l:o,g=u?b.scale.domain():null,p=lk({numericAxis:b});return f.map((v,w)=>{var y,S,j,k,N,P;u?y=rk(u[w],g):(y=Je(v,r),Array.isArray(y)||(y=[p,y]));var D=kM(n,xy)(y[1],w);if(t==="horizontal"){var C,[O,A]=[l.scale(y[0]),l.scale(y[1])];S=Yh({axis:o,ticks:c,bandSize:s,offset:a.offset,entry:v,index:w}),j=(C=A??O)!==null&&C!==void 0?C:void 0,k=a.size;var B=O-A;if(N=Ot(B)?0:B,P={x:S,y:h.top,width:k,height:h.height},Math.abs(D)>0&&Math.abs(N)<Math.abs(D)){var M=xt(N||D)*(Math.abs(D)-Math.abs(N));j-=M,N+=M}}else{var[F,V]=[o.scale(y[0]),o.scale(y[1])];if(S=F,j=Yh({axis:l,ticks:d,bandSize:s,offset:a.offset,entry:v,index:w}),k=V-F,N=a.size,P={x:h.left,y:j,width:h.width,height:N},Math.abs(D)>0&&Math.abs(k)<Math.abs(D)){var q=xt(k||D)*(Math.abs(D)-Math.abs(k));k+=q}}if(S==null||j==null||k==null||N==null)return null;var K=ct(ct({},v),{},{x:S,y:j,width:k,height:N,value:u?y:y[1],payload:v,background:P,tooltipPosition:{x:S+k/2,y:j+N/2}},m&&m[w]&&m[w].props);return K}).filter(Boolean)}function _a(e){var t=rr(e,YM),r=bt();return x.createElement(ly,{id:t.id,type:"bar"},n=>x.createElement(x.Fragment,null,x.createElement(sy,{legendPayload:qM(t)}),x.createElement(iy,{fn:UM,args:t}),x.createElement(uy,{type:"bar",id:n,data:void 0,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,stackId:ok(t.stackId),hide:t.hide,barSize:t.barSize,minPointSize:t.minPointSize,maxBarSize:t.maxBarSize,isPanorama:r}),x.createElement(GM,Un({},t,{id:n}))))}_a.displayName="Bar";function l0(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function bi(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?l0(Object(r),!0).forEach(function(n){XM(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l0(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function XM(e,t,r){return(t=ZM(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ZM(e){var t=JM(e,"string");return typeof t=="symbol"?t:t+""}function JM(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var eE=(e,t)=>t,tE=(e,t,r)=>r,rE=(e,t,r,n)=>n,nE=(e,t,r,n,a)=>a,Qa=z([to,nE],(e,t)=>e.filter(r=>r.type==="bar").find(r=>r.id===t)),aE=z([Qa],e=>e?.maxBarSize),iE=(e,t,r,n,a,s)=>s,c0=(e,t,r)=>{var n=r??e;if(!Me(n))return Gt(n,t,0)},sE=z([Se,to,eE,tE,rE],(e,t,r,n,a)=>t.filter(s=>e==="horizontal"?s.xAxisId===r:s.yAxisId===n).filter(s=>s.isPanorama===a).filter(s=>s.hide===!1).filter(s=>s.type==="bar")),oE=(e,t,r,n)=>{var a=Se(e);return a==="horizontal"?Vc(e,"yAxis",r,n):Vc(e,"xAxis",t,n)},lE=(e,t,r)=>{var n=Se(e);return n==="horizontal"?mp(e,"xAxis",t):mp(e,"yAxis",r)},cE=(e,t,r)=>{var n={},a=e.filter(eo),s=e.filter(d=>d.stackId==null),o=a.reduce((d,u)=>(d[u.stackId]||(d[u.stackId]=[]),d[u.stackId].push(u),d),n),l=Object.entries(o).map(d=>{var[u,f]=d,h=f.map(b=>b.dataKey),m=c0(t,r,f[0].barSize);return{stackId:u,dataKeys:h,barSize:m}}),c=s.map(d=>{var u=[d.dataKey].filter(h=>h!=null),f=c0(t,r,d.barSize);return{stackId:void 0,dataKeys:u,barSize:f}});return[...l,...c]},uE=z([sE,G5,lE],cE),dE=(e,t,r,n,a)=>{var s,o,l=Qa(e,t,r,n,a);if(l!=null){var c=Se(e),d=Dv(e),{maxBarSize:u}=l,f=Me(u)?d:u,h,m;return c==="horizontal"?(h=Lr(e,"xAxis",t,n),m=$r(e,"xAxis",t,n)):(h=Lr(e,"yAxis",r,n),m=$r(e,"yAxis",r,n)),(s=(o=Oa(h,m,!0))!==null&&o!==void 0?o:f)!==null&&s!==void 0?s:0}},vy=(e,t,r,n)=>{var a=Se(e),s,o;return a==="horizontal"?(s=Lr(e,"xAxis",t,n),o=$r(e,"xAxis",t,n)):(s=Lr(e,"yAxis",r,n),o=$r(e,"yAxis",r,n)),Oa(s,o)};function fE(e,t,r,n,a){var s=n.length;if(!(s<1)){var o=Gt(e,r,0,!0),l,c=[];if(At(n[0].barSize)){var d=!1,u=r/s,f=n.reduce((v,w)=>v+(w.barSize||0),0);f+=(s-1)*o,f>=r&&(f-=(s-1)*o,o=0),f>=r&&u>0&&(d=!0,u*=.9,f=s*u);var h=(r-f)/2>>0,m={offset:h-o,size:0};l=n.reduce((v,w)=>{var y,S={stackId:w.stackId,dataKeys:w.dataKeys,position:{offset:m.offset+m.size+o,size:d?u:(y=w.barSize)!==null&&y!==void 0?y:0}},j=[...v,S];return m=j[j.length-1].position,j},c)}else{var b=Gt(t,r,0,!0);r-2*b-(s-1)*o<=0&&(o=0);var g=(r-2*b-(s-1)*o)/s;g>1&&(g>>=0);var p=At(a)?Math.min(g,a):g;l=n.reduce((v,w,y)=>[...v,{stackId:w.stackId,dataKeys:w.dataKeys,position:{offset:b+(g+o)*y+(g-p)/2,size:p}}],c)}return l}}var hE=(e,t,r,n,a,s,o)=>{var l=Me(o)?t:o,c=fE(r,n,a!==s?a:s,e,l);return a!==s&&c!=null&&(c=c.map(d=>bi(bi({},d),{},{position:bi(bi({},d.position),{},{offset:d.position.offset-a/2})}))),c},mE=z([uE,Dv,Y5,Tv,dE,vy,aE],hE),pE=(e,t,r,n)=>Lr(e,"xAxis",t,n),gE=(e,t,r,n)=>Lr(e,"yAxis",r,n),xE=(e,t,r,n)=>$r(e,"xAxis",t,n),vE=(e,t,r,n)=>$r(e,"yAxis",r,n),bE=z([mE,Qa],(e,t)=>{if(!(e==null||t==null)){var r=e.find(n=>n.stackId===t.stackId&&t.dataKey!=null&&n.dataKeys.includes(t.dataKey));if(r!=null)return r.position}}),yE=(e,t)=>{var r=kd(t);if(!(!e||r==null||t==null)){var{stackId:n}=t;if(n!=null){var a=e[n];if(a){var{stackedData:s}=a;if(s)return s.find(o=>o.key===r)}}}},wE=z([oE,Qa],yE),jE=z([et,pE,gE,xE,vE,bE,Se,Ys,vy,wE,Qa,iE],(e,t,r,n,a,s,o,l,c,d,u,f)=>{var{chartData:h,dataStartIndex:m,dataEndIndex:b}=l;if(!(u==null||s==null||o!=="horizontal"&&o!=="vertical"||t==null||r==null||n==null||a==null||c==null)){var{data:g}=u,p;if(g!=null&&g.length>0?p=g:p=h?.slice(m,b+1),p!=null)return QM({layout:o,barSettings:u,pos:s,bandSize:c,xAxis:t,yAxis:r,xAxisTicks:n,yAxisTicks:a,stackedData:d,displayedData:p,offset:e,cells:f})}}),NE=e=>{var{chartData:t}=e,r=Ve(),n=bt();return x.useEffect(()=>n?()=>{}:(r(Sp(t)),()=>{r(Sp(void 0))}),[t,r,n]),null},u0={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},by=Dt({name:"brush",initialState:u0,reducers:{setBrushSettings(e,t){return t.payload==null?u0:t.payload}}}),{setBrushSettings:pB}=by.actions,SE=by.reducer;function kE(e,t,r){return(t=PE(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function PE(e){var t=OE(e,"string");return typeof t=="symbol"?t:t+""}function OE(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class Yd{static create(t){return new Yd(t)}constructor(t){this.scale=t}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(t){var{bandAware:r,position:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t!==void 0){if(n)switch(n){case"start":return this.scale(t);case"middle":{var a=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+a}case"end":{var s=this.bandwidth?this.bandwidth():0;return this.scale(t)+s}default:return this.scale(t)}if(r){var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+o}return this.scale(t)}}isInRange(t){var r=this.range(),n=r[0],a=r[r.length-1];return n<=a?t>=n&&t<=a:t>=a&&t<=n}}kE(Yd,"EPS",1e-4);function CE(e){return(e%180+180)%180}var AE=function(t){var{width:r,height:n}=t,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=CE(a),o=s*Math.PI/180,l=Math.atan(n/r),c=o>l&&o<Math.PI-l?n/Math.sin(o):r/Math.cos(o);return Math.abs(c)},DE={dots:[],areas:[],lines:[]},yy=Dt({name:"referenceElements",initialState:DE,reducers:{addDot:(e,t)=>{e.dots.push(t.payload)},removeDot:(e,t)=>{var r=fr(e).dots.findIndex(n=>n===t.payload);r!==-1&&e.dots.splice(r,1)},addArea:(e,t)=>{e.areas.push(t.payload)},removeArea:(e,t)=>{var r=fr(e).areas.findIndex(n=>n===t.payload);r!==-1&&e.areas.splice(r,1)},addLine:(e,t)=>{e.lines.push(t.payload)},removeLine:(e,t)=>{var r=fr(e).lines.findIndex(n=>n===t.payload);r!==-1&&e.lines.splice(r,1)}}}),{addDot:gB,removeDot:xB,addArea:vB,removeArea:bB,addLine:yB,removeLine:wB}=yy.actions,TE=yy.reducer,IE=x.createContext(void 0),ME=e=>{var{children:t}=e,[r]=x.useState("".concat(Sa("recharts"),"-clip")),n=Hd();if(n==null)return null;var{x:a,y:s,width:o,height:l}=n;return x.createElement(IE.Provider,{value:r},x.createElement("defs",null,x.createElement("clipPath",{id:r},x.createElement("rect",{x:a,y:s,height:l,width:o}))),t)};function Ql(e,t){for(var r in e)if({}.hasOwnProperty.call(e,r)&&(!{}.hasOwnProperty.call(t,r)||e[r]!==t[r]))return!1;for(var n in t)if({}.hasOwnProperty.call(t,n)&&!{}.hasOwnProperty.call(e,n))return!1;return!0}function wy(e,t,r){if(t<1)return[];if(t===1&&r===void 0)return e;for(var n=[],a=0;a<e.length;a+=t)n.push(e[a]);return n}function EE(e,t,r){var n={width:e.width+t.width,height:e.height+t.height};return AE(n,r)}function _E(e,t,r){var n=r==="width",{x:a,y:s,width:o,height:l}=e;return t===1?{start:n?a:s,end:n?a+o:s+l}:{start:n?a+o:s+l,end:n?a:s}}function ds(e,t,r,n,a){if(e*t<e*n||e*t>e*a)return!1;var s=r();return e*(t-e*s/2-n)>=0&&e*(t+e*s/2-a)<=0}function RE(e,t){return wy(e,t+1)}function $E(e,t,r,n,a){for(var s=(n||[]).slice(),{start:o,end:l}=t,c=0,d=1,u=o,f=function(){var b=n?.[c];if(b===void 0)return{v:wy(n,d)};var g=c,p,v=()=>(p===void 0&&(p=r(b,g)),p),w=b.coordinate,y=c===0||ds(e,w,v,u,l);y||(c=0,u=o,d+=1),y&&(u=w+e*(v()/2+a),c+=d)},h;d<=s.length;)if(h=f(),h)return h.v;return[]}function d0(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function ot(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?d0(Object(r),!0).forEach(function(n){LE(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d0(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function LE(e,t,r){return(t=FE(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function FE(e){var t=BE(e,"string");return typeof t=="symbol"?t:t+""}function BE(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function qE(e,t,r,n,a){for(var s=(n||[]).slice(),o=s.length,{start:l}=t,{end:c}=t,d=function(h){var m=s[h],b,g=()=>(b===void 0&&(b=r(m,h)),b);if(h===o-1){var p=e*(m.coordinate+e*g()/2-c);s[h]=m=ot(ot({},m),{},{tickCoord:p>0?m.coordinate-p*e:m.coordinate})}else s[h]=m=ot(ot({},m),{},{tickCoord:m.coordinate});var v=ds(e,m.tickCoord,g,l,c);v&&(c=m.tickCoord-e*(g()/2+a),s[h]=ot(ot({},m),{},{isShow:!0}))},u=o-1;u>=0;u--)d(u);return s}function UE(e,t,r,n,a,s){var o=(n||[]).slice(),l=o.length,{start:c,end:d}=t;if(s){var u=n[l-1],f=r(u,l-1),h=e*(u.coordinate+e*f/2-d);o[l-1]=u=ot(ot({},u),{},{tickCoord:h>0?u.coordinate-h*e:u.coordinate});var m=ds(e,u.tickCoord,()=>f,c,d);m&&(d=u.tickCoord-e*(f/2+a),o[l-1]=ot(ot({},u),{},{isShow:!0}))}for(var b=s?l-1:l,g=function(w){var y=o[w],S,j=()=>(S===void 0&&(S=r(y,w)),S);if(w===0){var k=e*(y.coordinate-e*j()/2-c);o[w]=y=ot(ot({},y),{},{tickCoord:k<0?y.coordinate-k*e:y.coordinate})}else o[w]=y=ot(ot({},y),{},{tickCoord:y.coordinate});var N=ds(e,y.tickCoord,j,c,d);N&&(c=y.tickCoord+e*(j()/2+a),o[w]=ot(ot({},y),{},{isShow:!0}))},p=0;p<b;p++)g(p);return o}function Gd(e,t,r){var{tick:n,ticks:a,viewBox:s,minTickGap:o,orientation:l,interval:c,tickFormatter:d,unit:u,angle:f}=e;if(!a||!a.length||!n)return[];if(se(c)||Vn.isSsr){var h;return(h=RE(a,se(c)?c:0))!==null&&h!==void 0?h:[]}var m=[],b=l==="top"||l==="bottom"?"width":"height",g=u&&b==="width"?wa(u,{fontSize:t,letterSpacing:r}):{width:0,height:0},p=(y,S)=>{var j=typeof d=="function"?d(y.value,S):y.value;return b==="width"?EE(wa(j,{fontSize:t,letterSpacing:r}),g,f):wa(j,{fontSize:t,letterSpacing:r})[b]},v=a.length>=2?xt(a[1].coordinate-a[0].coordinate):1,w=_E(s,v,b);return c==="equidistantPreserveStart"?$E(v,w,p,a,o):(c==="preserveStart"||c==="preserveStartEnd"?m=UE(v,w,p,a,o,c==="preserveStartEnd"):m=qE(v,w,p,a,o),m.filter(y=>y.isShow))}var zE=["viewBox"],VE=["viewBox"];function Dn(){return Dn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Dn.apply(null,arguments)}function f0(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function He(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?f0(Object(r),!0).forEach(function(n){Qd(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f0(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function h0(e,t){if(e==null)return{};var r,n,a=WE(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function WE(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Qd(e,t,r){return(t=HE(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function HE(e){var t=KE(e,"string");return typeof t=="symbol"?t:t+""}function KE(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class Wr extends x.Component{constructor(t){super(t),this.tickRefs=x.createRef(),this.tickRefs.current=[],this.state={fontSize:"",letterSpacing:""}}shouldComponentUpdate(t,r){var{viewBox:n}=t,a=h0(t,zE),s=this.props,{viewBox:o}=s,l=h0(s,VE);return!Ql(n,o)||!Ql(a,l)||!Ql(r,this.state)}getTickLineCoord(t){var{x:r,y:n,width:a,height:s,orientation:o,tickSize:l,mirror:c,tickMargin:d}=this.props,u,f,h,m,b,g,p=c?-1:1,v=t.tickSize||l,w=se(t.tickCoord)?t.tickCoord:t.coordinate;switch(o){case"top":u=f=t.coordinate,m=n+ +!c*s,h=m-p*v,g=h-p*d,b=w;break;case"left":h=m=t.coordinate,f=r+ +!c*a,u=f-p*v,b=u-p*d,g=w;break;case"right":h=m=t.coordinate,f=r+ +c*a,u=f+p*v,b=u+p*d,g=w;break;default:u=f=t.coordinate,m=n+ +c*s,h=m+p*v,g=h+p*d,b=w;break}return{line:{x1:u,y1:h,x2:f,y2:m},tick:{x:b,y:g}}}getTickTextAnchor(){var{orientation:t,mirror:r}=this.props,n;switch(t){case"left":n=r?"start":"end";break;case"right":n=r?"end":"start";break;default:n="middle";break}return n}getTickVerticalAnchor(){var{orientation:t,mirror:r}=this.props;switch(t){case"left":case"right":return"middle";case"top":return r?"start":"end";default:return r?"end":"start"}}renderAxisLine(){var{x:t,y:r,width:n,height:a,orientation:s,mirror:o,axisLine:l}=this.props,c=He(He(He({},Le(this.props,!1)),Le(l,!1)),{},{fill:"none"});if(s==="top"||s==="bottom"){var d=+(s==="top"&&!o||s==="bottom"&&o);c=He(He({},c),{},{x1:t,y1:r+d*a,x2:t+n,y2:r+d*a})}else{var u=+(s==="left"&&!o||s==="right"&&o);c=He(He({},c),{},{x1:t+u*n,y1:r,x2:t+u*n,y2:r+a})}return x.createElement("line",Dn({},c,{className:Oe("recharts-cartesian-axis-line",un(l,"className"))}))}static renderTickItem(t,r,n){var a,s=Oe(r.className,"recharts-cartesian-axis-tick-value");if(x.isValidElement(t))a=x.cloneElement(t,He(He({},r),{},{className:s}));else if(typeof t=="function")a=t(He(He({},r),{},{className:s}));else{var o="recharts-cartesian-axis-tick-value";typeof t!="boolean"&&(o=Oe(o,t.className)),a=x.createElement(Vd,Dn({},r,{className:o}),n)}return a}renderTicks(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],{tickLine:a,stroke:s,tick:o,tickFormatter:l,unit:c,padding:d}=this.props,u=Gd(He(He({},this.props),{},{ticks:n}),t,r),f=this.getTickTextAnchor(),h=this.getTickVerticalAnchor(),m=gn(this.props),b=Le(o,!1),g=He(He({},m),{},{fill:"none"},Le(a,!1)),p=u.map((v,w)=>{var{line:y,tick:S}=this.getTickLineCoord(v),j=He(He(He(He({textAnchor:f,verticalAnchor:h},m),{},{stroke:"none",fill:s},b),S),{},{index:w,payload:v,visibleTicksCount:u.length,tickFormatter:l,padding:d});return x.createElement(Qt,Dn({className:"recharts-cartesian-axis-tick",key:"tick-".concat(v.value,"-").concat(v.coordinate,"-").concat(v.tickCoord)},Ps(this.props,v,w)),a&&x.createElement("line",Dn({},g,y,{className:Oe("recharts-cartesian-axis-tick-line",un(a,"className"))})),o&&Wr.renderTickItem(o,j,"".concat(typeof l=="function"?l(v.value,w):v.value).concat(c||"")))});return p.length>0?x.createElement("g",{className:"recharts-cartesian-axis-ticks"},p):null}render(){var{axisLine:t,width:r,height:n,className:a,hide:s}=this.props;if(s)return null;var{ticks:o}=this.props;return r!=null&&r<=0||n!=null&&n<=0?null:x.createElement(Qt,{className:Oe("recharts-cartesian-axis",a),ref:l=>{if(l){var c=l.getElementsByClassName("recharts-cartesian-axis-tick-value");this.tickRefs.current=Array.from(c);var d=c[0];if(d){var u=window.getComputedStyle(d).fontSize,f=window.getComputedStyle(d).letterSpacing;(u!==this.state.fontSize||f!==this.state.letterSpacing)&&this.setState({fontSize:window.getComputedStyle(d).fontSize,letterSpacing:window.getComputedStyle(d).letterSpacing})}}}},t&&this.renderAxisLine(),this.renderTicks(this.state.fontSize,this.state.letterSpacing,o),St.renderCallByParent(this.props))}}Qd(Wr,"displayName","CartesianAxis");Qd(Wr,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var YE=["x1","y1","x2","y2","key"],GE=["offset"],QE=["xAxisId","yAxisId"],XE=["xAxisId","yAxisId"];function m0(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function ut(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?m0(Object(r),!0).forEach(function(n){ZE(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m0(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ZE(e,t,r){return(t=JE(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function JE(e){var t=e4(e,"string");return typeof t=="symbol"?t:t+""}function e4(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function an(){return an=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},an.apply(null,arguments)}function fs(e,t){if(e==null)return{};var r,n,a=t4(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function t4(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var r4=e=>{var{fill:t}=e;if(!t||t==="none")return null;var{fillOpacity:r,x:n,y:a,width:s,height:o,ry:l}=e;return x.createElement("rect",{x:n,y:a,ry:l,width:s,height:o,stroke:"none",fill:t,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function jy(e,t){var r;if(x.isValidElement(e))r=x.cloneElement(e,t);else if(typeof e=="function")r=e(t);else{var{x1:n,y1:a,x2:s,y2:o,key:l}=t,c=fs(t,YE),d=gn(c),{offset:u}=d,f=fs(d,GE);r=x.createElement("line",an({},f,{x1:n,y1:a,x2:s,y2:o,fill:"none",key:l}))}return r}function n4(e){var{x:t,width:r,horizontal:n=!0,horizontalPoints:a}=e;if(!n||!a||!a.length)return null;var{xAxisId:s,yAxisId:o}=e,l=fs(e,QE),c=a.map((d,u)=>{var f=ut(ut({},l),{},{x1:t,y1:d,x2:t+r,y2:d,key:"line-".concat(u),index:u});return jy(n,f)});return x.createElement("g",{className:"recharts-cartesian-grid-horizontal"},c)}function a4(e){var{y:t,height:r,vertical:n=!0,verticalPoints:a}=e;if(!n||!a||!a.length)return null;var{xAxisId:s,yAxisId:o}=e,l=fs(e,XE),c=a.map((d,u)=>{var f=ut(ut({},l),{},{x1:d,y1:t,x2:d,y2:t+r,key:"line-".concat(u),index:u});return jy(n,f)});return x.createElement("g",{className:"recharts-cartesian-grid-vertical"},c)}function i4(e){var{horizontalFill:t,fillOpacity:r,x:n,y:a,width:s,height:o,horizontalPoints:l,horizontal:c=!0}=e;if(!c||!t||!t.length)return null;var d=l.map(f=>Math.round(f+a-a)).sort((f,h)=>f-h);a!==d[0]&&d.unshift(0);var u=d.map((f,h)=>{var m=!d[h+1],b=m?a+o-f:d[h+1]-f;if(b<=0)return null;var g=h%t.length;return x.createElement("rect",{key:"react-".concat(h),y:f,x:n,height:b,width:s,stroke:"none",fill:t[g],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return x.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},u)}function s4(e){var{vertical:t=!0,verticalFill:r,fillOpacity:n,x:a,y:s,width:o,height:l,verticalPoints:c}=e;if(!t||!r||!r.length)return null;var d=c.map(f=>Math.round(f+a-a)).sort((f,h)=>f-h);a!==d[0]&&d.unshift(0);var u=d.map((f,h)=>{var m=!d[h+1],b=m?a+o-f:d[h+1]-f;if(b<=0)return null;var g=h%r.length;return x.createElement("rect",{key:"react-".concat(h),x:f,y:s,width:b,height:l,stroke:"none",fill:r[g],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return x.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},u)}var o4=(e,t)=>{var{xAxis:r,width:n,height:a,offset:s}=e;return xx(Gd(ut(ut(ut({},Wr.defaultProps),r),{},{ticks:vx(r),viewBox:{x:0,y:0,width:n,height:a}})),s.left,s.left+s.width,t)},l4=(e,t)=>{var{yAxis:r,width:n,height:a,offset:s}=e;return xx(Gd(ut(ut(ut({},Wr.defaultProps),r),{},{ticks:vx(r),viewBox:{x:0,y:0,width:n,height:a}})),s.top,s.top+s.height,t)},c4={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0};function Xd(e){var t=Vu(),r=Wu(),n=wx(),a=ut(ut({},rr(e,c4)),{},{x:se(e.x)?e.x:n.left,y:se(e.y)?e.y:n.top,width:se(e.width)?e.width:n.width,height:se(e.height)?e.height:n.height}),{xAxisId:s,yAxisId:o,x:l,y:c,width:d,height:u,syncWithTicks:f,horizontalValues:h,verticalValues:m}=a,b=bt(),g=de(D=>pp(D,"xAxis",s,b)),p=de(D=>pp(D,"yAxis",o,b));if(!se(d)||d<=0||!se(u)||u<=0||!se(l)||l!==+l||!se(c)||c!==+c)return null;var v=a.verticalCoordinatesGenerator||o4,w=a.horizontalCoordinatesGenerator||l4,{horizontalPoints:y,verticalPoints:S}=a;if((!y||!y.length)&&typeof w=="function"){var j=h&&h.length,k=w({yAxis:p?ut(ut({},p),{},{ticks:j?h:p.ticks}):void 0,width:t,height:r,offset:n},j?!0:f);ya(Array.isArray(k),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof k,"]")),Array.isArray(k)&&(y=k)}if((!S||!S.length)&&typeof v=="function"){var N=m&&m.length,P=v({xAxis:g?ut(ut({},g),{},{ticks:N?m:g.ticks}):void 0,width:t,height:r,offset:n},N?!0:f);ya(Array.isArray(P),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof P,"]")),Array.isArray(P)&&(S=P)}return x.createElement("g",{className:"recharts-cartesian-grid"},x.createElement(r4,{fill:a.fill,fillOpacity:a.fillOpacity,x:a.x,y:a.y,width:a.width,height:a.height,ry:a.ry}),x.createElement(i4,an({},a,{horizontalPoints:y})),x.createElement(s4,an({},a,{verticalPoints:S})),x.createElement(n4,an({},a,{offset:n,horizontalPoints:y,xAxis:g,yAxis:p})),x.createElement(a4,an({},a,{offset:n,verticalPoints:S,xAxis:g,yAxis:p})))}Xd.displayName="CartesianGrid";var Ny=(e,t,r,n)=>Lr(e,"xAxis",t,n),Sy=(e,t,r,n)=>$r(e,"xAxis",t,n),ky=(e,t,r,n)=>Lr(e,"yAxis",r,n),Py=(e,t,r,n)=>$r(e,"yAxis",r,n),u4=z([Se,Ny,ky,Sy,Py],(e,t,r,n,a)=>Br(e,"xAxis")?Oa(t,n,!1):Oa(r,a,!1)),d4=(e,t,r,n,a)=>a;function f4(e){return e.type==="line"}var h4=z([to,d4],(e,t)=>e.filter(f4).find(r=>r.id===t)),m4=z([Se,Ny,ky,Sy,Py,h4,u4,Ys],(e,t,r,n,a,s,o,l)=>{var{chartData:c,dataStartIndex:d,dataEndIndex:u}=l;if(!(s==null||t==null||r==null||n==null||a==null||n.length===0||a.length===0||o==null)){var{dataKey:f,data:h}=s,m;if(h!=null&&h.length>0?m=h:m=c?.slice(d,u+1),m!=null)return _4({layout:e,xAxis:t,yAxis:r,xAxisTicks:n,yAxisTicks:a,dataKey:f,bandSize:o,displayedData:m})}}),p4=["id"],g4=["type","layout","connectNulls","needClip"],x4=["activeDot","animateNewValues","animationBegin","animationDuration","animationEasing","connectNulls","dot","hide","isAnimationActive","label","legendType","xAxisId","yAxisId","id"];function p0(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function zt(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?p0(Object(r),!0).forEach(function(n){v4(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p0(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function v4(e,t,r){return(t=b4(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function b4(e){var t=y4(e,"string");return typeof t=="symbol"?t:t+""}function y4(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Zd(e,t){if(e==null)return{};var r,n,a=w4(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function w4(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function pn(){return pn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},pn.apply(null,arguments)}var j4=e=>{var{dataKey:t,name:r,stroke:n,legendType:a,hide:s}=e;return[{inactive:s,dataKey:t,type:a,color:n,value:Rs(r,t),payload:e}]};function N4(e){var{dataKey:t,data:r,stroke:n,strokeWidth:a,fill:s,name:o,hide:l,unit:c}=e;return{dataDefinedOnItem:r,positions:void 0,settings:{stroke:n,strokeWidth:a,fill:s,dataKey:t,nameKey:void 0,name:Rs(o,t),hide:l,type:e.tooltipType,color:e.stroke,unit:c}}}var Oy=(e,t)=>"".concat(t,"px ").concat(e-t,"px");function S4(e,t){for(var r=e.length%2!==0?[...e,0]:e,n=[],a=0;a<t;++a)n=[...n,...r];return n}var k4=(e,t,r)=>{var n=r.reduce((f,h)=>f+h);if(!n)return Oy(t,e);for(var a=Math.floor(e/n),s=e%n,o=t-e,l=[],c=0,d=0;c<r.length;d+=r[c],++c)if(d+r[c]>s){l=[...r.slice(0,c),s-d];break}var u=l.length%2===0?[0,o]:[o];return[...S4(r,a),...l,...u].map(f=>"".concat(f,"px")).join(", ")};function P4(e,t){var r;if(x.isValidElement(e))r=x.cloneElement(e,t);else if(typeof e=="function")r=e(t);else{var n=Oe("recharts-line-dot",typeof e!="boolean"?e.className:"");r=x.createElement(ey,pn({},t,{className:n}))}return r}function O4(e,t){return e==null?!1:t?!0:e.length===1}function C4(e){var{clipPathId:t,points:r,props:n}=e,{dot:a,dataKey:s,needClip:o}=n;if(!O4(r,a))return null;var{id:l}=n,c=Zd(n,p4),d=pg(a),u=gn(c),f=Le(a,!0),h=r.map((b,g)=>{var p=zt(zt(zt({key:"dot-".concat(g),r:3},u),f),{},{index:g,cx:b.x,cy:b.y,dataKey:s,value:b.value,payload:b.payload,points:r});return P4(a,p)}),m={clipPath:o?"url(#clipPath-".concat(d?"":"dots-").concat(t,")"):void 0};return x.createElement(Qt,pn({className:"recharts-line-dots",key:"dots"},m),h)}function Zc(e){var{clipPathId:t,pathRef:r,points:n,strokeDasharray:a,props:s,showLabels:o}=e,{type:l,layout:c,connectNulls:d,needClip:u}=s,f=Zd(s,g4),h=zt(zt({},Le(f,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:u?"url(#clipPath-".concat(t,")"):void 0,points:n,type:l,layout:c,connectNulls:d,strokeDasharray:a??s.strokeDasharray});return x.createElement(x.Fragment,null,n?.length>1&&x.createElement(Sx,pn({},h,{pathRef:r})),x.createElement(C4,{points:n,clipPathId:t,props:s}),o&&_r.renderCallByParent(s,n))}function A4(e){try{return e&&e.getTotalLength&&e.getTotalLength()||0}catch{return 0}}function D4(e){var{clipPathId:t,props:r,pathRef:n,previousPointsRef:a,longestAnimatedLengthRef:s}=e,{points:o,strokeDasharray:l,isAnimationActive:c,animationBegin:d,animationDuration:u,animationEasing:f,animateNewValues:h,width:m,height:b,onAnimationEnd:g,onAnimationStart:p}=r,v=a.current,w=oy(r,"recharts-line-"),[y,S]=x.useState(!1),j=x.useCallback(()=>{typeof g=="function"&&g(),S(!1)},[g]),k=x.useCallback(()=>{typeof p=="function"&&p(),S(!0)},[p]),N=A4(n.current),P=s.current;return x.createElement(dy,{begin:d,duration:u,isActive:c,easing:f,onAnimationEnd:j,onAnimationStart:k,key:w},D=>{var C=Ut(P,N+P,D),O=Math.min(C,N),A;if(l){var B="".concat(l).split(/[,\s]+/gim).map(V=>parseFloat(V));A=k4(O,N,B)}else A=Oy(N,O);if(v){var M=v.length/o.length,F=D===1?o:o.map((V,q)=>{var K=Math.floor(q*M);if(v[K]){var ne=v[K];return zt(zt({},V),{},{x:Ut(ne.x,V.x,D),y:Ut(ne.y,V.y,D)})}return h?zt(zt({},V),{},{x:Ut(m*2,V.x,D),y:Ut(b/2,V.y,D)}):zt(zt({},V),{},{x:V.x,y:V.y})});return a.current=F,x.createElement(Zc,{props:r,points:F,clipPathId:t,pathRef:n,showLabels:!y,strokeDasharray:A})}return D>0&&N>0&&(a.current=o,s.current=O),x.createElement(Zc,{props:r,points:o,clipPathId:t,pathRef:n,showLabels:!y,strokeDasharray:A})})}function T4(e){var{clipPathId:t,props:r}=e,{points:n,isAnimationActive:a}=r,s=x.useRef(null),o=x.useRef(0),l=x.useRef(null),c=s.current;return a&&n&&n.length&&c!==n?x.createElement(D4,{props:r,clipPathId:t,previousPointsRef:s,longestAnimatedLengthRef:o,pathRef:l}):x.createElement(Zc,{props:r,points:n,clipPathId:t,pathRef:l,showLabels:!0})}var I4=(e,t)=>({x:e.x,y:e.y,value:e.value,errorVal:Je(e.payload,t)});class M4 extends x.Component{render(){var t,{hide:r,dot:n,points:a,className:s,xAxisId:o,yAxisId:l,top:c,left:d,width:u,height:f,id:h,needClip:m}=this.props;if(r)return null;var b=Oe("recharts-line",s),g=h,{r:p=3,strokeWidth:v=2}=(t=Le(n,!1))!==null&&t!==void 0?t:{r:3,strokeWidth:2},w=pg(n),y=p*2+v;return x.createElement(x.Fragment,null,x.createElement(Qt,{className:b},m&&x.createElement("defs",null,x.createElement(py,{clipPathId:g,xAxisId:o,yAxisId:l}),!w&&x.createElement("clipPath",{id:"clipPath-dots-".concat(g)},x.createElement("rect",{x:d-y/2,y:c-y/2,width:u+y,height:f+y}))),x.createElement(T4,{props:this.props,clipPathId:g}),x.createElement(my,{xAxisId:o,yAxisId:l,data:a,dataPointFormatter:I4,errorBarOffset:0},this.props.children)),x.createElement(pM,{activeDot:this.props.activeDot,points:a,mainColor:this.props.stroke,itemDataKey:this.props.dataKey}))}}var Cy={activeDot:!0,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!0,fill:"#fff",hide:!1,isAnimationActive:!Vn.isSsr,label:!1,legendType:"line",stroke:"#3182bd",strokeWidth:1,xAxisId:0,yAxisId:0};function E4(e){var t=rr(e,Cy),{activeDot:r,animateNewValues:n,animationBegin:a,animationDuration:s,animationEasing:o,connectNulls:l,dot:c,hide:d,isAnimationActive:u,label:f,legendType:h,xAxisId:m,yAxisId:b,id:g}=t,p=Zd(t,x4),{needClip:v}=Kd(m,b),w=Hd(),y=Bs(),S=bt(),j=de(C=>m4(C,m,b,S,g));if(y!=="horizontal"&&y!=="vertical"||j==null||w==null)return null;var{height:k,width:N,x:P,y:D}=w;return x.createElement(M4,pn({},p,{id:g,connectNulls:l,dot:c,activeDot:r,animateNewValues:n,animationBegin:a,animationDuration:s,animationEasing:o,isAnimationActive:u,hide:d,label:f,legendType:h,xAxisId:m,yAxisId:b,points:j,layout:y,height:k,width:N,left:P,top:D,needClip:v}))}function _4(e){var{layout:t,xAxis:r,yAxis:n,xAxisTicks:a,yAxisTicks:s,dataKey:o,bandSize:l,displayedData:c}=e;return c.map((d,u)=>{var f=Je(d,o);if(t==="horizontal"){var h=Kh({axis:r,ticks:a,bandSize:l,entry:d,index:u}),m=Me(f)?null:n.scale(f);return{x:h,y:m,value:f,payload:d}}var b=Me(f)?null:r.scale(f),g=Kh({axis:n,ticks:s,bandSize:l,entry:d,index:u});return b==null||g==null?null:{x:b,y:g,value:f,payload:d}}).filter(Boolean)}function Ay(e){var t=rr(e,Cy),r=bt();return x.createElement(ly,{id:t.id,type:"line"},n=>x.createElement(x.Fragment,null,x.createElement(sy,{legendPayload:j4(t)}),x.createElement(iy,{fn:N4,args:t}),x.createElement(uy,{type:"line",id:n,data:t.data,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,hide:t.hide,isPanorama:r}),x.createElement(E4,pn({},t,{id:n}))))}Ay.displayName="Line";function g0(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function x0(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?g0(Object(r),!0).forEach(function(n){R4(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g0(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function R4(e,t,r){return(t=$4(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $4(e){var t=L4(e,"string");return typeof t=="symbol"?t:t+""}function L4(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var F4={xAxis:{},yAxis:{},zAxis:{}},Dy=Dt({name:"cartesianAxis",initialState:F4,reducers:{addXAxis(e,t){e.xAxis[t.payload.id]=t.payload},removeXAxis(e,t){delete e.xAxis[t.payload.id]},addYAxis(e,t){e.yAxis[t.payload.id]=t.payload},removeYAxis(e,t){delete e.yAxis[t.payload.id]},addZAxis(e,t){e.zAxis[t.payload.id]=t.payload},removeZAxis(e,t){delete e.zAxis[t.payload.id]},updateYAxisWidth(e,t){var{id:r,width:n}=t.payload;e.yAxis[r]&&(e.yAxis[r]=x0(x0({},e.yAxis[r]),{},{width:n}))}}}),{addXAxis:B4,removeXAxis:q4,addYAxis:U4,removeYAxis:z4,addZAxis:jB,removeZAxis:NB,updateYAxisWidth:V4}=Dy.actions,W4=Dy.reducer,H4=["children"],K4=["dangerouslySetInnerHTML","ticks"];function Ty(e,t,r){return(t=Y4(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Y4(e){var t=G4(e,"string");return typeof t=="symbol"?t:t+""}function G4(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Jc(){return Jc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Jc.apply(null,arguments)}function Iy(e,t){if(e==null)return{};var r,n,a=Q4(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Q4(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function X4(e){var t=Ve(),r=x.useMemo(()=>{var{children:s}=e,o=Iy(e,H4);return o},[e]),n=de(s=>Nr(s,r.id)),a=r===n;return x.useEffect(()=>(t(B4(r)),()=>{t(q4(r))}),[r,t]),a?e.children:null}var Z4=e=>{var{xAxisId:t,className:r}=e,n=de(yx),a=bt(),s="xAxis",o=de(m=>Qn(m,s,t,a)),l=de(m=>vb(m,s,t,a)),c=de(m=>mb(m,t)),d=de(m=>BA(m,t));if(c==null||d==null)return null;var{dangerouslySetInnerHTML:u,ticks:f}=e,h=Iy(e,K4);return x.createElement(Wr,Jc({},h,{scale:o,x:d.x,y:d.y,width:c.width,height:c.height,className:Oe("recharts-".concat(s," ").concat(s),r),viewBox:n,ticks:l}))},J4=e=>{var t,r,n,a,s;return x.createElement(X4,{interval:(t=e.interval)!==null&&t!==void 0?t:"preserveEnd",id:e.xAxisId,scale:e.scale,type:e.type,padding:e.padding,allowDataOverflow:e.allowDataOverflow,domain:e.domain,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,includeHidden:(r=e.includeHidden)!==null&&r!==void 0?r:!1,reversed:e.reversed,ticks:e.ticks,height:e.height,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:(n=e.angle)!==null&&n!==void 0?n:0,minTickGap:(a=e.minTickGap)!==null&&a!==void 0?a:5,tick:(s=e.tick)!==null&&s!==void 0?s:!0,tickFormatter:e.tickFormatter},x.createElement(Z4,e))};class Xa extends x.Component{render(){return x.createElement(J4,this.props)}}Ty(Xa,"displayName","XAxis");Ty(Xa,"defaultProps",{allowDataOverflow:wt.allowDataOverflow,allowDecimals:wt.allowDecimals,allowDuplicatedCategory:wt.allowDuplicatedCategory,height:wt.height,hide:!1,mirror:wt.mirror,orientation:wt.orientation,padding:wt.padding,reversed:wt.reversed,scale:wt.scale,tickCount:wt.tickCount,type:wt.type,xAxisId:0});var e3=e=>{var{ticks:t,label:r,labelGapWithTick:n=5,tickSize:a=0,tickMargin:s=0}=e,o=0;if(t){t.forEach(u=>{if(u){var f=u.getBoundingClientRect();f.width>o&&(o=f.width)}});var l=r?r.getBoundingClientRect().width:0,c=a+s,d=o+c+l+(r?n:0);return Math.round(d)}return 0},t3=["dangerouslySetInnerHTML","ticks"];function My(e,t,r){return(t=r3(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function r3(e){var t=n3(e,"string");return typeof t=="symbol"?t:t+""}function n3(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function eu(){return eu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},eu.apply(null,arguments)}function a3(e,t){if(e==null)return{};var r,n,a=i3(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function i3(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function s3(e){var t=Ve();return x.useEffect(()=>(t(U4(e)),()=>{t(z4(e))}),[e,t]),null}var o3=e=>{var t,{yAxisId:r,className:n,width:a,label:s}=e,o=x.useRef(null),l=x.useRef(null),c=de(yx),d=bt(),u=Ve(),f="yAxis",h=de(y=>Qn(y,f,r,d)),m=de(y=>pb(y,r)),b=de(y=>qA(y,r)),g=de(y=>vb(y,f,r,d));if(x.useLayoutEffect(()=>{var y;if(!(a!=="auto"||!m||Wd(s)||x.isValidElement(s))){var S=o.current,j=S==null||(y=S.tickRefs)===null||y===void 0?void 0:y.current,{tickSize:k,tickMargin:N}=S.props,P=e3({ticks:j,label:l.current,labelGapWithTick:5,tickSize:k,tickMargin:N});Math.round(m.width)!==Math.round(P)&&u(V4({id:r,width:P}))}},[o,o==null||(t=o.current)===null||t===void 0||(t=t.tickRefs)===null||t===void 0?void 0:t.current,m?.width,m,u,s,r,a]),m==null||b==null)return null;var{dangerouslySetInnerHTML:p,ticks:v}=e,w=a3(e,t3);return x.createElement(Wr,eu({},w,{ref:o,labelRef:l,scale:h,x:b.x,y:b.y,width:m.width,height:m.height,className:Oe("recharts-".concat(f," ").concat(f),n),viewBox:c,ticks:g}))},l3=e=>{var t,r,n,a,s;return x.createElement(x.Fragment,null,x.createElement(s3,{interval:(t=e.interval)!==null&&t!==void 0?t:"preserveEnd",id:e.yAxisId,scale:e.scale,type:e.type,domain:e.domain,allowDataOverflow:e.allowDataOverflow,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,padding:e.padding,includeHidden:(r=e.includeHidden)!==null&&r!==void 0?r:!1,reversed:e.reversed,ticks:e.ticks,width:e.width,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:(n=e.angle)!==null&&n!==void 0?n:0,minTickGap:(a=e.minTickGap)!==null&&a!==void 0?a:5,tick:(s=e.tick)!==null&&s!==void 0?s:!0,tickFormatter:e.tickFormatter}),x.createElement(o3,e))},c3={allowDataOverflow:jt.allowDataOverflow,allowDecimals:jt.allowDecimals,allowDuplicatedCategory:jt.allowDuplicatedCategory,hide:!1,mirror:jt.mirror,orientation:jt.orientation,padding:jt.padding,reversed:jt.reversed,scale:jt.scale,tickCount:jt.tickCount,type:jt.type,width:jt.width,yAxisId:0};class Za extends x.Component{render(){return x.createElement(l3,this.props)}}My(Za,"displayName","YAxis");My(Za,"defaultProps",c3);var Xl={exports:{}},Zl={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var v0;function u3(){if(v0)return Zl;v0=1;var e=rg();function t(c,d){return c===d&&(c!==0||1/c===1/d)||c!==c&&d!==d}var r=typeof Object.is=="function"?Object.is:t,n=e.useSyncExternalStore,a=e.useRef,s=e.useEffect,o=e.useMemo,l=e.useDebugValue;return Zl.useSyncExternalStoreWithSelector=function(c,d,u,f,h){var m=a(null);if(m.current===null){var b={hasValue:!1,value:null};m.current=b}else b=m.current;m=o(function(){function p(j){if(!v){if(v=!0,w=j,j=f(j),h!==void 0&&b.hasValue){var k=b.value;if(h(k,j))return y=k}return y=j}if(k=y,r(w,j))return k;var N=f(j);return h!==void 0&&h(k,N)?(w=j,k):(w=j,y=N)}var v=!1,w,y,S=u===void 0?null:u;return[function(){return p(d())},S===null?void 0:function(){return p(S())}]},[d,u,f,h]);var g=n(c,m[0],m[1]);return s(function(){b.hasValue=!0,b.value=g},[g]),l(g),g},Zl}var b0;function d3(){return b0||(b0=1,Xl.exports=u3()),Xl.exports}d3();function f3(e){e()}function h3(){let e=null,t=null;return{clear(){e=null,t=null},notify(){f3(()=>{let r=e;for(;r;)r.callback(),r=r.next})},get(){const r=[];let n=e;for(;n;)r.push(n),n=n.next;return r},subscribe(r){let n=!0;const a=t={callback:r,next:null,prev:t};return a.prev?a.prev.next=a:e=a,function(){!n||e===null||(n=!1,a.next?a.next.prev=a.prev:t=a.prev,a.prev?a.prev.next=a.next:e=a.next)}}}}var y0={notify(){},get:()=>[]};function m3(e,t){let r,n=y0,a=0,s=!1;function o(g){u();const p=n.subscribe(g);let v=!1;return()=>{v||(v=!0,p(),f())}}function l(){n.notify()}function c(){b.onStateChange&&b.onStateChange()}function d(){return s}function u(){a++,r||(r=e.subscribe(c),n=h3())}function f(){a--,r&&a===0&&(r(),r=void 0,n.clear(),n=y0)}function h(){s||(s=!0,u())}function m(){s&&(s=!1,f())}const b={addNestedSub:o,notifyNestedSubs:l,handleChangeWrapper:c,isSubscribed:d,trySubscribe:h,tryUnsubscribe:m,getListeners:()=>n};return b}var p3=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",g3=p3(),x3=()=>typeof navigator<"u"&&navigator.product==="ReactNative",v3=x3(),b3=()=>g3||v3?x.useLayoutEffect:x.useEffect,y3=b3(),w3=Symbol.for("react-redux-context"),j3=typeof globalThis<"u"?globalThis:{};function N3(){if(!x.createContext)return{};const e=j3[w3]??=new Map;let t=e.get(x.createContext);return t||(t=x.createContext(null),e.set(x.createContext,t)),t}var S3=N3();function k3(e){const{children:t,context:r,serverState:n,store:a}=e,s=x.useMemo(()=>{const c=m3(a);return{store:a,subscription:c,getServerState:n?()=>n:void 0}},[a,n]),o=x.useMemo(()=>a.getState(),[a]);y3(()=>{const{subscription:c}=s;return c.onStateChange=c.notifyNestedSubs,c.trySubscribe(),o!==a.getState()&&c.notifyNestedSubs(),()=>{c.tryUnsubscribe(),c.onStateChange=void 0}},[s,o]);const l=r||S3;return x.createElement(l.Provider,{value:s},t)}var P3=k3,O3=(e,t)=>t,Jd=z([O3,Se,$v,Qe,Mb,Sr,HD,et],XD),ef=e=>{var t=e.currentTarget.getBoundingClientRect(),r=t.width/e.currentTarget.offsetWidth,n=t.height/e.currentTarget.offsetHeight;return{chartX:Math.round((e.clientX-t.left)/r),chartY:Math.round((e.clientY-t.top)/n)}},Ey=Ft("mouseClick"),_y=Fa();_y.startListening({actionCreator:Ey,effect:(e,t)=>{var r=e.payload,n=Jd(t.getState(),ef(r));n?.activeIndex!=null&&t.dispatch(eD({activeIndex:n.activeIndex,activeDataKey:void 0,activeCoordinate:n.activeCoordinate}))}});var tu=Ft("mouseMove"),Ry=Fa();Ry.startListening({actionCreator:tu,effect:(e,t)=>{var r=e.payload,n=t.getState(),a=Ed(n,n.tooltip.settings.shared),s=Jd(n,ef(r));a==="axis"&&(s?.activeIndex!=null?t.dispatch(Pb({activeIndex:s.activeIndex,activeDataKey:void 0,activeCoordinate:s.activeCoordinate})):t.dispatch(kb()))}});function C3(e,t){return t instanceof HTMLElement?"HTMLElement <".concat(t.tagName,' class="').concat(t.className,'">'):t===window?"global.window":t}var w0={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index"},$y=Dt({name:"rootProps",initialState:w0,reducers:{updateOptions:(e,t)=>{var r;e.accessibilityLayer=t.payload.accessibilityLayer,e.barCategoryGap=t.payload.barCategoryGap,e.barGap=(r=t.payload.barGap)!==null&&r!==void 0?r:w0.barGap,e.barSize=t.payload.barSize,e.maxBarSize=t.payload.maxBarSize,e.stackOffset=t.payload.stackOffset,e.syncId=t.payload.syncId,e.syncMethod=t.payload.syncMethod,e.className=t.payload.className}}}),A3=$y.reducer,{updateOptions:D3}=$y.actions,Ly=Dt({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(e,t)=>t.payload}}),{updatePolarOptions:SB}=Ly.actions,T3=Ly.reducer,Fy=Ft("keyDown"),By=Ft("focus"),tf=Fa();tf.startListening({actionCreator:Fy,effect:(e,t)=>{var r=t.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:a}=r.tooltip,s=e.payload;if(!(s!=="ArrowRight"&&s!=="ArrowLeft"&&s!=="Enter")){var o=Number(_d(a,Zn(r))),l=Sr(r);if(s==="Enter"){var c=is(r,"axis","hover",String(a.index));t.dispatch(Hc({active:!a.active,activeIndex:a.index,activeDataKey:a.dataKey,activeCoordinate:c}));return}var d=WA(r),u=d==="left-to-right"?1:-1,f=s==="ArrowRight"?1:-1,h=o+f*u;if(!(l==null||h>=l.length||h<0)){var m=is(r,"axis","hover",String(h));t.dispatch(Hc({active:!0,activeIndex:h.toString(),activeDataKey:void 0,activeCoordinate:m}))}}}}});tf.startListening({actionCreator:By,effect:(e,t)=>{var r=t.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:a}=r.tooltip;if(!a.active&&a.index==null){var s="0",o=is(r,"axis","hover",String(s));t.dispatch(Hc({activeDataKey:void 0,active:!0,activeIndex:s,activeCoordinate:o}))}}}});var _t=Ft("externalEvent"),qy=Fa();qy.startListening({actionCreator:_t,effect:(e,t)=>{if(e.payload.handler!=null){var r=t.getState(),n={activeCoordinate:RD(r),activeDataKey:$b(r),activeIndex:mn(r),activeLabel:Rb(r),activeTooltipIndex:mn(r),isTooltipActive:$D(r)};e.payload.handler(n,e.payload.reactEvent)}}});var I3=z([Xn],e=>e.tooltipItemPayloads),M3=z([I3,Ya,(e,t,r)=>t,(e,t,r)=>r],(e,t,r,n)=>{var a=e.find(l=>l.settings.dataKey===n);if(a!=null){var{positions:s}=a;if(s!=null){var o=t(s,r);return o}}}),Uy=Ft("touchMove"),zy=Fa();zy.startListening({actionCreator:Uy,effect:(e,t)=>{var r=e.payload,n=t.getState(),a=Ed(n,n.tooltip.settings.shared);if(a==="axis"){var s=Jd(n,ef({clientX:r.touches[0].clientX,clientY:r.touches[0].clientY,currentTarget:r.currentTarget}));s?.activeIndex!=null&&t.dispatch(Pb({activeIndex:s.activeIndex,activeDataKey:void 0,activeCoordinate:s.activeCoordinate}))}else if(a==="item"){var o,l=r.touches[0],c=document.elementFromPoint(l.clientX,l.clientY);if(!c||!c.getAttribute)return;var d=c.getAttribute(gk),u=(o=c.getAttribute(xk))!==null&&o!==void 0?o:void 0,f=M3(t.getState(),d,u);t.dispatch(Sb({activeDataKey:u,activeIndex:d,activeCoordinate:f}))}}});var E3=Kg({brush:SE,cartesianAxis:W4,chartData:mT,errorBars:OM,graphicalItems:iM,layout:FS,legend:Tk,options:cT,polarAxis:MI,polarOptions:T3,referenceElements:TE,rootProps:A3,tooltip:tD}),_3=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Chart";return uS({reducer:E3,preloadedState:t,middleware:n=>n({serializableCheck:!1}).concat([_y.middleware,Ry.middleware,tf.middleware,qy.middleware,zy.middleware]),devTools:{serialize:{replacer:C3},name:"recharts-".concat(r)}})};function R3(e){var{preloadedState:t,children:r,reduxStoreName:n}=e,a=bt(),s=x.useRef(null);if(a)return r;s.current==null&&(s.current=_3(t,n));var o=_u;return x.createElement(P3,{context:o,store:s.current},r)}function $3(e){var{layout:t,width:r,height:n,margin:a}=e,s=Ve(),o=bt();return x.useEffect(()=>{o||(s(RS(t)),s($S({width:r,height:n})),s(_S(a)))},[s,o,t,r,n,a]),null}function L3(e){var t=Ve();return x.useEffect(()=>{t(D3(e))},[t,e]),null}var F3=["children"];function B3(e,t){if(e==null)return{};var r,n,a=q3(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function q3(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function hs(){return hs=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},hs.apply(null,arguments)}var U3={width:"100%",height:"100%"},z3=x.forwardRef((e,t)=>{var r=Vu(),n=Wu(),a=Nx();if(!Ui(r)||!Ui(n))return null;var{children:s,otherAttributes:o,title:l,desc:c}=e,d,u;return typeof o.tabIndex=="number"?d=o.tabIndex:d=a?0:void 0,typeof o.role=="string"?u=o.role:u=a?"application":void 0,x.createElement(Nu,hs({},o,{title:l,desc:c,role:u,tabIndex:d,width:r,height:n,style:U3,ref:t}),s)}),V3=e=>{var{children:t}=e,r=de(Fs);if(!r)return null;var{width:n,height:a,y:s,x:o}=r;return x.createElement(Nu,{width:n,height:a,x:o,y:s},t)},j0=x.forwardRef((e,t)=>{var{children:r}=e,n=B3(e,F3),a=bt();return a?x.createElement(V3,null,r):x.createElement(z3,hs({ref:t},n),r)});function W3(){var e=Ve(),[t,r]=x.useState(null),n=de(pk);return x.useEffect(()=>{if(t!=null){var a=t.getBoundingClientRect(),s=a.width/t.offsetWidth;At(s)&&s!==n&&e(LS(s))}},[t,e,n]),r}function N0(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function H3(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?N0(Object(r),!0).forEach(function(n){K3(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):N0(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function K3(e,t,r){return(t=Y3(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Y3(e){var t=G3(e,"string");return typeof t=="symbol"?t:t+""}function G3(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Q3=x.forwardRef((e,t)=>{var{children:r,className:n,height:a,onClick:s,onContextMenu:o,onDoubleClick:l,onMouseDown:c,onMouseEnter:d,onMouseLeave:u,onMouseMove:f,onMouseUp:h,onTouchEnd:m,onTouchMove:b,onTouchStart:g,style:p,width:v}=e,w=Ve(),[y,S]=x.useState(null),[j,k]=x.useState(null);xT();var N=W3(),P=x.useCallback(_=>{N(_),typeof t=="function"&&t(_),S(_),k(_)},[N,t,S,k]),D=x.useCallback(_=>{w(Ey(_)),w(_t({handler:s,reactEvent:_}))},[w,s]),C=x.useCallback(_=>{w(tu(_)),w(_t({handler:d,reactEvent:_}))},[w,d]),O=x.useCallback(_=>{w(kb()),w(_t({handler:u,reactEvent:_}))},[w,u]),A=x.useCallback(_=>{w(tu(_)),w(_t({handler:f,reactEvent:_}))},[w,f]),B=x.useCallback(()=>{w(By())},[w]),M=x.useCallback(_=>{w(Fy(_.key))},[w]),F=x.useCallback(_=>{w(_t({handler:o,reactEvent:_}))},[w,o]),V=x.useCallback(_=>{w(_t({handler:l,reactEvent:_}))},[w,l]),q=x.useCallback(_=>{w(_t({handler:c,reactEvent:_}))},[w,c]),K=x.useCallback(_=>{w(_t({handler:h,reactEvent:_}))},[w,h]),ne=x.useCallback(_=>{w(_t({handler:g,reactEvent:_}))},[w,g]),Z=x.useCallback(_=>{w(Uy(_)),w(_t({handler:b,reactEvent:_}))},[w,b]),T=x.useCallback(_=>{w(_t({handler:m,reactEvent:_}))},[w,m]);return x.createElement(zb.Provider,{value:y},x.createElement(gg.Provider,{value:j},x.createElement("div",{className:Oe("recharts-wrapper",n),style:H3({position:"relative",cursor:"default",width:v,height:a},p),onClick:D,onContextMenu:F,onDoubleClick:V,onFocus:B,onKeyDown:M,onMouseDown:q,onMouseEnter:C,onMouseLeave:O,onMouseMove:A,onMouseUp:K,onTouchEnd:T,onTouchMove:Z,onTouchStart:ne,ref:P},r)))}),X3=["children","className","width","height","style","compact","title","desc"];function Z3(e,t){if(e==null)return{};var r,n,a=J3(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function J3(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var e_=x.forwardRef((e,t)=>{var{children:r,className:n,width:a,height:s,style:o,compact:l,title:c,desc:d}=e,u=Z3(e,X3),f=gn(u);return l?x.createElement(j0,{otherAttributes:f,title:c,desc:d},r):x.createElement(Q3,{className:n,style:o,width:a,height:s,onClick:e.onClick,onMouseLeave:e.onMouseLeave,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onContextMenu:e.onContextMenu,onDoubleClick:e.onDoubleClick,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd},x.createElement(j0,{otherAttributes:f,title:c,desc:d,ref:t},x.createElement(ME,null,r)))}),t_=["width","height"];function ru(){return ru=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ru.apply(null,arguments)}function r_(e,t){if(e==null)return{};var r,n,a=n_(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function n_(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var a_={top:5,right:5,bottom:5,left:5},i_={accessibilityLayer:!0,layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:a_,reverseStackOrder:!1,syncMethod:"index"},s_=x.forwardRef(function(t,r){var n,a=rr(t.categoricalChartProps,i_),{width:s,height:o}=a,l=r_(a,t_);if(!Ui(s)||!Ui(o))return null;var{chartName:c,defaultTooltipEventType:d,validateTooltipEventTypes:u,tooltipPayloadSearcher:f,categoricalChartProps:h}=t,m={chartName:c,defaultTooltipEventType:d,validateTooltipEventTypes:u,tooltipPayloadSearcher:f,eventEmitter:void 0};return x.createElement(R3,{preloadedState:{options:m},reduxStoreName:(n=h.id)!==null&&n!==void 0?n:c},x.createElement(NE,{chartData:h.data}),x.createElement($3,{width:s,height:o,layout:a.layout,margin:a.margin}),x.createElement(L3,{accessibilityLayer:a.accessibilityLayer,barCategoryGap:a.barCategoryGap,maxBarSize:a.maxBarSize,stackOffset:a.stackOffset,barGap:a.barGap,barSize:a.barSize,syncId:a.syncId,syncMethod:a.syncMethod,className:a.className}),x.createElement(e_,ru({},l,{width:s,height:o,ref:r})))}),o_=["axis","item"],ms=x.forwardRef((e,t)=>x.createElement(s_,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:o_,tooltipPayloadSearcher:oT,categoricalChartProps:e,ref:t}));const Vy=6048e5,l_=864e5,S0=Symbol.for("constructDateFrom");function dt(e,t){return typeof e=="function"?e(t):e&&typeof e=="object"&&S0 in e?e[S0](t):e instanceof Date?new e.constructor(t):new Date(t)}function Ye(e,t){return dt(t||e,e)}function c_(e,t,r){const n=Ye(e,r?.in);return isNaN(t)?dt(e,NaN):(t&&n.setDate(n.getDate()+t),n)}function u_(e,t,r){const n=Ye(e,r?.in);if(isNaN(t))return dt(e,NaN);const a=n.getDate(),s=dt(e,n.getTime());s.setMonth(n.getMonth()+t+1,0);const o=s.getDate();return a>=o?s:(n.setFullYear(s.getFullYear(),s.getMonth(),a),n)}let d_={};function oo(){return d_}function Fr(e,t){const r=oo(),n=t?.weekStartsOn??t?.locale?.options?.weekStartsOn??r.weekStartsOn??r.locale?.options?.weekStartsOn??0,a=Ye(e,t?.in),s=a.getDay(),o=(s<n?7:0)+s-n;return a.setDate(a.getDate()-o),a.setHours(0,0,0,0),a}function ps(e,t){return Fr(e,{...t,weekStartsOn:1})}function Wy(e,t){const r=Ye(e,t?.in),n=r.getFullYear(),a=dt(r,0);a.setFullYear(n+1,0,4),a.setHours(0,0,0,0);const s=ps(a),o=dt(r,0);o.setFullYear(n,0,4),o.setHours(0,0,0,0);const l=ps(o);return r.getTime()>=s.getTime()?n+1:r.getTime()>=l.getTime()?n:n-1}function k0(e){const t=Ye(e),r=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return r.setUTCFullYear(t.getFullYear()),+e-+r}function Ja(e,...t){const r=dt.bind(null,e||t.find(n=>typeof n=="object"));return t.map(r)}function gs(e,t){const r=Ye(e,t?.in);return r.setHours(0,0,0,0),r}function f_(e,t,r){const[n,a]=Ja(r?.in,e,t),s=gs(n),o=gs(a),l=+s-k0(s),c=+o-k0(o);return Math.round((l-c)/l_)}function h_(e,t){const r=Wy(e,t),n=dt(e,0);return n.setFullYear(r,0,4),n.setHours(0,0,0,0),ps(n)}function lo(e){return dt(e,Date.now())}function m_(e,t,r){const[n,a]=Ja(r?.in,e,t);return+gs(n)==+gs(a)}function p_(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function g_(e){return!(!p_(e)&&typeof e!="number"||isNaN(+Ye(e)))}function x_(e,t){const r=Ye(e,t?.in),n=r.getMonth();return r.setFullYear(r.getFullYear(),n+1,0),r.setHours(23,59,59,999),r}function v_(e,t){const r=Ye(e,t?.in);return r.setDate(1),r.setHours(0,0,0,0),r}function b_(e,t){const r=Ye(e,t?.in);return r.setFullYear(r.getFullYear(),0,1),r.setHours(0,0,0,0),r}function y_(e,t){const r=t?.weekStartsOn,n=Ye(e,t?.in),a=n.getDay(),s=(a<r?-7:0)+6-(a-r);return n.setDate(n.getDate()+s),n.setHours(23,59,59,999),n}const w_={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},j_=(e,t,r)=>{let n;const a=w_[e];return typeof a=="string"?n=a:t===1?n=a.one:n=a.other.replace("{{count}}",t.toString()),r?.addSuffix?r.comparison&&r.comparison>0?"in "+n:n+" ago":n};function Jl(e){return(t={})=>{const r=t.width?String(t.width):e.defaultWidth;return e.formats[r]||e.formats[e.defaultWidth]}}const N_={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},S_={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},k_={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},P_={date:Jl({formats:N_,defaultWidth:"full"}),time:Jl({formats:S_,defaultWidth:"full"}),dateTime:Jl({formats:k_,defaultWidth:"full"})},O_={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},C_=(e,t,r,n)=>O_[e];function ha(e){return(t,r)=>{const n=r?.context?String(r.context):"standalone";let a;if(n==="formatting"&&e.formattingValues){const o=e.defaultFormattingWidth||e.defaultWidth,l=r?.width?String(r.width):o;a=e.formattingValues[l]||e.formattingValues[o]}else{const o=e.defaultWidth,l=r?.width?String(r.width):e.defaultWidth;a=e.values[l]||e.values[o]}const s=e.argumentCallback?e.argumentCallback(t):t;return a[s]}}const A_={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},D_={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},T_={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},I_={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},M_={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},E_={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},__=(e,t)=>{const r=Number(e),n=r%100;if(n>20||n<10)switch(n%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},R_={ordinalNumber:__,era:ha({values:A_,defaultWidth:"wide"}),quarter:ha({values:D_,defaultWidth:"wide",argumentCallback:e=>e-1}),month:ha({values:T_,defaultWidth:"wide"}),day:ha({values:I_,defaultWidth:"wide"}),dayPeriod:ha({values:M_,defaultWidth:"wide",formattingValues:E_,defaultFormattingWidth:"wide"})};function ma(e){return(t,r={})=>{const n=r.width,a=n&&e.matchPatterns[n]||e.matchPatterns[e.defaultMatchWidth],s=t.match(a);if(!s)return null;const o=s[0],l=n&&e.parsePatterns[n]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(l)?L_(l,f=>f.test(o)):$_(l,f=>f.test(o));let d;d=e.valueCallback?e.valueCallback(c):c,d=r.valueCallback?r.valueCallback(d):d;const u=t.slice(o.length);return{value:d,rest:u}}}function $_(e,t){for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&t(e[r]))return r}function L_(e,t){for(let r=0;r<e.length;r++)if(t(e[r]))return r}function F_(e){return(t,r={})=>{const n=t.match(e.matchPattern);if(!n)return null;const a=n[0],s=t.match(e.parsePattern);if(!s)return null;let o=e.valueCallback?e.valueCallback(s[0]):s[0];o=r.valueCallback?r.valueCallback(o):o;const l=t.slice(a.length);return{value:o,rest:l}}}const B_=/^(\d+)(th|st|nd|rd)?/i,q_=/\d+/i,U_={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},z_={any:[/^b/i,/^(a|c)/i]},V_={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},W_={any:[/1/i,/2/i,/3/i,/4/i]},H_={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},K_={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Y_={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},G_={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Q_={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},X_={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Z_={ordinalNumber:F_({matchPattern:B_,parsePattern:q_,valueCallback:e=>parseInt(e,10)}),era:ma({matchPatterns:U_,defaultMatchWidth:"wide",parsePatterns:z_,defaultParseWidth:"any"}),quarter:ma({matchPatterns:V_,defaultMatchWidth:"wide",parsePatterns:W_,defaultParseWidth:"any",valueCallback:e=>e+1}),month:ma({matchPatterns:H_,defaultMatchWidth:"wide",parsePatterns:K_,defaultParseWidth:"any"}),day:ma({matchPatterns:Y_,defaultMatchWidth:"wide",parsePatterns:G_,defaultParseWidth:"any"}),dayPeriod:ma({matchPatterns:Q_,defaultMatchWidth:"any",parsePatterns:X_,defaultParseWidth:"any"})},J_={code:"en-US",formatDistance:j_,formatLong:P_,formatRelative:C_,localize:R_,match:Z_,options:{weekStartsOn:0,firstWeekContainsDate:1}};function eR(e,t){const r=Ye(e,t?.in);return f_(r,b_(r))+1}function tR(e,t){const r=Ye(e,t?.in),n=+ps(r)-+h_(r);return Math.round(n/Vy)+1}function Hy(e,t){const r=Ye(e,t?.in),n=r.getFullYear(),a=oo(),s=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??a.firstWeekContainsDate??a.locale?.options?.firstWeekContainsDate??1,o=dt(t?.in||e,0);o.setFullYear(n+1,0,s),o.setHours(0,0,0,0);const l=Fr(o,t),c=dt(t?.in||e,0);c.setFullYear(n,0,s),c.setHours(0,0,0,0);const d=Fr(c,t);return+r>=+l?n+1:+r>=+d?n:n-1}function rR(e,t){const r=oo(),n=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??r.firstWeekContainsDate??r.locale?.options?.firstWeekContainsDate??1,a=Hy(e,t),s=dt(t?.in||e,0);return s.setFullYear(a,0,n),s.setHours(0,0,0,0),Fr(s,t)}function nR(e,t){const r=Ye(e,t?.in),n=+Fr(r,t)-+rR(r,t);return Math.round(n/Vy)+1}function ke(e,t){const r=e<0?"-":"",n=Math.abs(e).toString().padStart(t,"0");return r+n}const Dr={y(e,t){const r=e.getFullYear(),n=r>0?r:1-r;return ke(t==="yy"?n%100:n,t.length)},M(e,t){const r=e.getMonth();return t==="M"?String(r+1):ke(r+1,2)},d(e,t){return ke(e.getDate(),t.length)},a(e,t){const r=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h(e,t){return ke(e.getHours()%12||12,t.length)},H(e,t){return ke(e.getHours(),t.length)},m(e,t){return ke(e.getMinutes(),t.length)},s(e,t){return ke(e.getSeconds(),t.length)},S(e,t){const r=t.length,n=e.getMilliseconds(),a=Math.trunc(n*Math.pow(10,r-3));return ke(a,t.length)}},On={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},P0={G:function(e,t,r){const n=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return r.era(n,{width:"abbreviated"});case"GGGGG":return r.era(n,{width:"narrow"});case"GGGG":default:return r.era(n,{width:"wide"})}},y:function(e,t,r){if(t==="yo"){const n=e.getFullYear(),a=n>0?n:1-n;return r.ordinalNumber(a,{unit:"year"})}return Dr.y(e,t)},Y:function(e,t,r,n){const a=Hy(e,n),s=a>0?a:1-a;if(t==="YY"){const o=s%100;return ke(o,2)}return t==="Yo"?r.ordinalNumber(s,{unit:"year"}):ke(s,t.length)},R:function(e,t){const r=Wy(e);return ke(r,t.length)},u:function(e,t){const r=e.getFullYear();return ke(r,t.length)},Q:function(e,t,r){const n=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(n);case"QQ":return ke(n,2);case"Qo":return r.ordinalNumber(n,{unit:"quarter"});case"QQQ":return r.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(n,{width:"wide",context:"formatting"})}},q:function(e,t,r){const n=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(n);case"qq":return ke(n,2);case"qo":return r.ordinalNumber(n,{unit:"quarter"});case"qqq":return r.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(n,{width:"wide",context:"standalone"})}},M:function(e,t,r){const n=e.getMonth();switch(t){case"M":case"MM":return Dr.M(e,t);case"Mo":return r.ordinalNumber(n+1,{unit:"month"});case"MMM":return r.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(n,{width:"wide",context:"formatting"})}},L:function(e,t,r){const n=e.getMonth();switch(t){case"L":return String(n+1);case"LL":return ke(n+1,2);case"Lo":return r.ordinalNumber(n+1,{unit:"month"});case"LLL":return r.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(n,{width:"wide",context:"standalone"})}},w:function(e,t,r,n){const a=nR(e,n);return t==="wo"?r.ordinalNumber(a,{unit:"week"}):ke(a,t.length)},I:function(e,t,r){const n=tR(e);return t==="Io"?r.ordinalNumber(n,{unit:"week"}):ke(n,t.length)},d:function(e,t,r){return t==="do"?r.ordinalNumber(e.getDate(),{unit:"date"}):Dr.d(e,t)},D:function(e,t,r){const n=eR(e);return t==="Do"?r.ordinalNumber(n,{unit:"dayOfYear"}):ke(n,t.length)},E:function(e,t,r){const n=e.getDay();switch(t){case"E":case"EE":case"EEE":return r.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(n,{width:"short",context:"formatting"});case"EEEE":default:return r.day(n,{width:"wide",context:"formatting"})}},e:function(e,t,r,n){const a=e.getDay(),s=(a-n.weekStartsOn+8)%7||7;switch(t){case"e":return String(s);case"ee":return ke(s,2);case"eo":return r.ordinalNumber(s,{unit:"day"});case"eee":return r.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(a,{width:"short",context:"formatting"});case"eeee":default:return r.day(a,{width:"wide",context:"formatting"})}},c:function(e,t,r,n){const a=e.getDay(),s=(a-n.weekStartsOn+8)%7||7;switch(t){case"c":return String(s);case"cc":return ke(s,t.length);case"co":return r.ordinalNumber(s,{unit:"day"});case"ccc":return r.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(a,{width:"narrow",context:"standalone"});case"cccccc":return r.day(a,{width:"short",context:"standalone"});case"cccc":default:return r.day(a,{width:"wide",context:"standalone"})}},i:function(e,t,r){const n=e.getDay(),a=n===0?7:n;switch(t){case"i":return String(a);case"ii":return ke(a,t.length);case"io":return r.ordinalNumber(a,{unit:"day"});case"iii":return r.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(n,{width:"short",context:"formatting"});case"iiii":default:return r.day(n,{width:"wide",context:"formatting"})}},a:function(e,t,r){const a=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(e,t,r){const n=e.getHours();let a;switch(n===12?a=On.noon:n===0?a=On.midnight:a=n/12>=1?"pm":"am",t){case"b":case"bb":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(e,t,r){const n=e.getHours();let a;switch(n>=17?a=On.evening:n>=12?a=On.afternoon:n>=4?a=On.morning:a=On.night,t){case"B":case"BB":case"BBB":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(e,t,r){if(t==="ho"){let n=e.getHours()%12;return n===0&&(n=12),r.ordinalNumber(n,{unit:"hour"})}return Dr.h(e,t)},H:function(e,t,r){return t==="Ho"?r.ordinalNumber(e.getHours(),{unit:"hour"}):Dr.H(e,t)},K:function(e,t,r){const n=e.getHours()%12;return t==="Ko"?r.ordinalNumber(n,{unit:"hour"}):ke(n,t.length)},k:function(e,t,r){let n=e.getHours();return n===0&&(n=24),t==="ko"?r.ordinalNumber(n,{unit:"hour"}):ke(n,t.length)},m:function(e,t,r){return t==="mo"?r.ordinalNumber(e.getMinutes(),{unit:"minute"}):Dr.m(e,t)},s:function(e,t,r){return t==="so"?r.ordinalNumber(e.getSeconds(),{unit:"second"}):Dr.s(e,t)},S:function(e,t){return Dr.S(e,t)},X:function(e,t,r){const n=e.getTimezoneOffset();if(n===0)return"Z";switch(t){case"X":return C0(n);case"XXXX":case"XX":return Zr(n);case"XXXXX":case"XXX":default:return Zr(n,":")}},x:function(e,t,r){const n=e.getTimezoneOffset();switch(t){case"x":return C0(n);case"xxxx":case"xx":return Zr(n);case"xxxxx":case"xxx":default:return Zr(n,":")}},O:function(e,t,r){const n=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+O0(n,":");case"OOOO":default:return"GMT"+Zr(n,":")}},z:function(e,t,r){const n=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+O0(n,":");case"zzzz":default:return"GMT"+Zr(n,":")}},t:function(e,t,r){const n=Math.trunc(+e/1e3);return ke(n,t.length)},T:function(e,t,r){return ke(+e,t.length)}};function O0(e,t=""){const r=e>0?"-":"+",n=Math.abs(e),a=Math.trunc(n/60),s=n%60;return s===0?r+String(a):r+String(a)+t+ke(s,2)}function C0(e,t){return e%60===0?(e>0?"-":"+")+ke(Math.abs(e)/60,2):Zr(e,t)}function Zr(e,t=""){const r=e>0?"-":"+",n=Math.abs(e),a=ke(Math.trunc(n/60),2),s=ke(n%60,2);return r+a+t+s}const A0=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},Ky=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},aR=(e,t)=>{const r=e.match(/(P+)(p+)?/)||[],n=r[1],a=r[2];if(!a)return A0(e,t);let s;switch(n){case"P":s=t.dateTime({width:"short"});break;case"PP":s=t.dateTime({width:"medium"});break;case"PPP":s=t.dateTime({width:"long"});break;case"PPPP":default:s=t.dateTime({width:"full"});break}return s.replace("{{date}}",A0(n,t)).replace("{{time}}",Ky(a,t))},iR={p:Ky,P:aR},sR=/^D+$/,oR=/^Y+$/,lR=["D","DD","YY","YYYY"];function cR(e){return sR.test(e)}function uR(e){return oR.test(e)}function dR(e,t,r){const n=fR(e,t,r);if(console.warn(n),lR.includes(e))throw new RangeError(n)}function fR(e,t,r){const n=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${n} to the input \`${r}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const hR=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,mR=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,pR=/^'([^]*?)'?$/,gR=/''/g,xR=/[a-zA-Z]/;function En(e,t,r){const n=oo(),a=n.locale??J_,s=n.firstWeekContainsDate??n.locale?.options?.firstWeekContainsDate??1,o=n.weekStartsOn??n.locale?.options?.weekStartsOn??0,l=Ye(e,r?.in);if(!g_(l))throw new RangeError("Invalid time value");let c=t.match(mR).map(u=>{const f=u[0];if(f==="p"||f==="P"){const h=iR[f];return h(u,a.formatLong)}return u}).join("").match(hR).map(u=>{if(u==="''")return{isToken:!1,value:"'"};const f=u[0];if(f==="'")return{isToken:!1,value:vR(u)};if(P0[f])return{isToken:!0,value:u};if(f.match(xR))throw new RangeError("Format string contains an unescaped latin alphabet character `"+f+"`");return{isToken:!1,value:u}});a.localize.preprocessor&&(c=a.localize.preprocessor(l,c));const d={firstWeekContainsDate:s,weekStartsOn:o,locale:a};return c.map(u=>{if(!u.isToken)return u.value;const f=u.value;(uR(f)||cR(f))&&dR(f,t,String(e));const h=P0[f[0]];return h(l,f,a.localize,d)}).join("")}function vR(e){const t=e.match(pR);return t?t[1].replace(gR,"'"):e}function bR(e,t,r){const[n,a]=Ja(r?.in,e,t);return+Fr(n,r)==+Fr(a,r)}function yR(e,t,r){const[n,a]=Ja(r?.in,e,t);return n.getFullYear()===a.getFullYear()&&n.getMonth()===a.getMonth()}function wR(e,t,r){const[n,a]=Ja(r?.in,e,t);return n.getFullYear()===a.getFullYear()}function jR(e,t){return yR(dt(e,e),lo(e))}function NR(e,t){return bR(dt(t?.in||e,e),lo(t?.in||e),t)}function SR(e,t){return wR(dt(e,e),lo(e))}function kR(e,t){return m_(dt(e,e),lo(e))}function PR(e,t,r){const n=+Ye(e,r?.in),[a,s]=[+Ye(t.start,r?.in),+Ye(t.end,r?.in)].sort((o,l)=>o-l);return n>=a&&n<=s}function OR(e,t,r){return c_(e,-t,r)}function CR(e,t,r){return u_(e,-3,r)}const AR=()=>{const[e,t]=x.useState([]),{selectedProduct:r,selectedDate:n,setSelectedDate:a,setSelectedProduct:s}=xu(),[o,l]=x.useState(null),[c,d]=x.useState("all"),[u,f]=x.useState(null),[h,m]=x.useState([]);x.useEffect(()=>{(async()=>{try{const k=xe.currentUser;if(!k)return;const N=ue(J,"businesses",k.uid,"finalizedInvoices"),P=await ye(N),D=[];P.forEach(C=>{const O=C.data();O.totalAmount&&D.push(O)}),t(D)}catch(k){console.error("Error fetching revenue data:",k)}})()},[]),x.useEffect(()=>{f(null),m([])},[r,n]);const b=e.filter(j=>{let k;j.issuedAt?.toDate?k=j.issuedAt.toDate():typeof j.issuedAt=="string"&&(k=new Date(j.issuedAt));let N=!0;if(n&&(N=k&&!isNaN(k)&&En(k,"yyyy-MM-dd")===n),c==="today")N=kR(k);else if(c==="week")N=NR(k,{weekStartsOn:1});else if(c==="month")N=jR(k);else if(c==="quarter"){const D=CR(new Date);N=PR(k,{start:D,end:new Date})}else c==="year"&&(N=SR(k));const P=r?Array.isArray(j.cartItems)&&j.cartItems.some(D=>D.sku===r):!0;return N&&P}),g=b.reduce((j,k)=>k.paymentMode==="credit"&&!k.isPaid?j:j+parseFloat(k.totalAmount||0),0),p=b.filter(j=>j.paymentMode!=="credit"||j.paymentMode==="credit"&&j.isPaid).length,v={cash:0,upi:0,card:0},w={};b.forEach(j=>{if(j.paymentMode==="credit"&&!j.isPaid)return;const k=parseFloat(j.totalAmount||0),N=j.paymentMode?.toLowerCase();if(N==="split"){const C=j.splitPayment||{};v.cash+=parseFloat(C.cash||0),v.upi+=parseFloat(C.upi||0),v.card+=parseFloat(C.card||0)}else if(N==="credit"&&j.isPaid){const C=j.paidVia?.toLowerCase();C==="cash"?v.cash+=k:C==="upi"?v.upi+=k:C==="card"&&(v.card+=k)}else["cash","upi","card"].includes(N)&&(v[N]+=k);let P;if(j.issuedAt?.toDate?P=j.issuedAt.toDate():typeof j.issuedAt=="string"&&(P=new Date(j.issuedAt)),!P||isNaN(P))return;const D=En(P,"yyyy-MM-dd");w[D]||(w[D]=0),w[D]+=k});const y=Object.entries(w).map(([j,k])=>({date:j,revenue:k})).sort((j,k)=>new Date(j.date)-new Date(k.date));for(let j=1;j<y.length;j++){const k=y[j-1].revenue,P=y[j].revenue-k,D=k===0?100:P/k*100;y[j].changeAmount=P,y[j].changePercent=D.toFixed(1),y[j].changeColor=P>0?"#10b981":P<0?"#ef4444":"#9ca3af"}y.length===0&&y.push({date:En(new Date,"yyyy-MM-dd"),revenue:0}),x.useEffect(()=>{if(u!==null)if(u<y.length){const j=setTimeout(()=>{m(y.slice(0,u+1)),f(k=>k+1)},300);return()=>clearTimeout(j)}else f(null)},[u,y]);const S=({active:j,payload:k,label:N})=>{if(j&&k&&k.length){const P=y.find(C=>C.date===N);if(!P)return null;const D=P.changeAmount>=0?"+":"";return i.jsxs("div",{className:"rounded px-3 py-2 text-sm border border-white/10 bg-[#0B0F14]/80 backdrop-blur-xl text-white",children:[i.jsx("p",{className:"font-semibold",children:N}),i.jsxs("p",{children:["Revenue: â‚¹",P.revenue.toFixed(2)]}),P.changeAmount!==void 0&&i.jsxs("p",{style:{color:P.changeColor},children:["Growth: ",`${D}â‚¹${P.changeAmount}`," (",`${D}${P.changePercent}%`,")"]})]})}return null};return i.jsxs("div",{className:"p-5 rounded-lg bg-white/10 backdrop-blur-xl border border-white/10 shadow-[0_8px_40px_rgba(0,0,0,0.35)] text-white",children:[i.jsx("h2",{className:"text-xl font-semibold mb-4 bg-clip-text text-transparent bg-gradient-to-r from-white via-white to-emerald-200",children:"Revenue Overview"}),i.jsxs("div",{className:"flex flex-col md:flex-row justify-between gap-6",children:[i.jsxs("div",{children:[i.jsxs("p",{children:[i.jsx("strong",{children:"Total Revenue:"})," â‚¹",g.toFixed(2)]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Total Invoices:"})," ",p]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Today's Revenue:"})," â‚¹",y[y.length-1]?.revenue.toFixed(2)]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Yesterday's Revenue:"})," â‚¹",y[y.length-2]?.revenue.toFixed(2)]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Growth:"})," ",(()=>{const j=y[y.length-1]?.revenue||0,k=y[y.length-2]?.revenue||0,N=j-k,P=k===0?100:N/k*100,D=N>=0?"+":"";return`${D}â‚¹${N.toFixed(2)} (${D}${P.toFixed(1)}%)`})()]})]}),i.jsxs("div",{className:"md:w-1/2",children:[i.jsx("h3",{className:"font-medium",children:"Revenue by Payment Mode:"}),i.jsxs("ul",{className:"list-disc list-inside",children:[i.jsxs("li",{children:["Cash: â‚¹",v.cash.toFixed(2)," (",(v.cash/g*100).toFixed(1),"%)"]}),i.jsxs("li",{children:["UPI: â‚¹",v.upi.toFixed(2)," (",(v.upi/g*100).toFixed(1),"%)"]}),i.jsxs("li",{children:["Card: â‚¹",v.card.toFixed(2)," (",(v.card/g*100).toFixed(1),"%)"]})]})]})]}),i.jsxs("div",{className:"flex items-center justify-between mb-4 gap-4",children:[i.jsx("button",{onClick:()=>{m([]),f(0)},className:"px-3 py-1 rounded font-medium text-slate-900 bg-gradient-to-r from-emerald-400 via-teal-300 to-cyan-400 hover:shadow-[0_8px_24px_rgba(16,185,129,0.35)] transition",children:"â–¶ï¸ Play Animation"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("label",{className:"font-medium text-white/80",children:"Sort by Time Period:"}),i.jsxs("select",{className:"px-2 py-1 rounded text-sm bg-white/10 border border-white/20 text-white focus:outline-none focus:ring-2 focus:ring-emerald-400/50",value:c,onChange:j=>{d(j.target.value),f(null),m([])},children:[i.jsx("option",{value:"all",children:"All Time"}),i.jsx("option",{value:"today",children:"Today"}),i.jsx("option",{value:"week",children:"This Week"}),i.jsx("option",{value:"month",children:"This Month"}),i.jsx("option",{value:"quarter",children:"This Quarter"}),i.jsx("option",{value:"year",children:"This Year"})]})]})]}),i.jsx("div",{className:"w-full overflow-x-auto",children:i.jsx("div",{style:{width:"100%",height:300},children:i.jsx(ss,{children:i.jsxs(ms,{data:h.length>0?h:y,onClick:({activeLabel:j})=>{j&&(a(j),l(j))},children:[i.jsx(Xd,{strokeDasharray:"3 3"}),i.jsx(Xa,{dataKey:"date",label:{value:"Date",position:"insideBottom",offset:-5}}),i.jsx(Za,{label:{value:"Revenue",angle:-90,position:"insideLeft"}}),i.jsx(zd,{content:i.jsx(S,{})}),i.jsx(qs,{}),i.jsx(_a,{dataKey:"revenue",fill:"#4f46e5",radius:[4,4,0,0]}),i.jsx(Ay,{type:"monotone",dataKey:"revenue",stroke:"#10b981",strokeWidth:2,dot:{r:4},label:({index:j,x:k,y:N})=>{const P=y[j];if(!P||P.date!==o)return null;const D=P.changeAmount>=0?"+":"";return i.jsx("text",{x:k,y:N-10,fill:P.changeColor,fontSize:12,textAnchor:"middle",children:`${D}â‚¹${P.changeAmount} (${D}${P.changePercent}%)`})}})]})})})})]})};function D0(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function me(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?D0(Object(r),!0).forEach(function(n){ga(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):D0(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function kr(e,t){if(e==null)return{};var r,n,a=Qw(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var DR=["defaultInputValue","defaultMenuIsOpen","defaultValue","inputValue","menuIsOpen","onChange","onInputChange","onMenuClose","onMenuOpen","value"];function TR(e){var t=e.defaultInputValue,r=t===void 0?"":t,n=e.defaultMenuIsOpen,a=n===void 0?!1:n,s=e.defaultValue,o=s===void 0?null:s,l=e.inputValue,c=e.menuIsOpen,d=e.onChange,u=e.onInputChange,f=e.onMenuClose,h=e.onMenuOpen,m=e.value,b=kr(e,DR),g=x.useState(l!==void 0?l:r),p=dr(g,2),v=p[0],w=p[1],y=x.useState(c!==void 0?c:a),S=dr(y,2),j=S[0],k=S[1],N=x.useState(m!==void 0?m:o),P=dr(N,2),D=P[0],C=P[1],O=x.useCallback(function(K,ne){typeof d=="function"&&d(K,ne),C(K)},[d]),A=x.useCallback(function(K,ne){var Z;typeof u=="function"&&(Z=u(K,ne)),w(Z!==void 0?Z:K)},[u]),B=x.useCallback(function(){typeof h=="function"&&h(),k(!0)},[h]),M=x.useCallback(function(){typeof f=="function"&&f(),k(!1)},[f]),F=l!==void 0?l:v,V=c!==void 0?c:j,q=m!==void 0?m:D;return me(me({},b),{},{inputValue:F,menuIsOpen:V,onChange:O,onInputChange:A,onMenuClose:M,onMenuOpen:B,value:q})}function IR(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function T0(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,t1(n.key),n)}}function MR(e,t,r){return t&&T0(e.prototype,t),r&&T0(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function ER(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Xw(e,t)}function xs(e){return xs=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},xs(e)}function Yy(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Yy=function(){return!!e})()}function _R(e,t){if(t&&(eg(t)=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Zw(e)}function RR(e){var t=Yy();return function(){var r,n=xs(e);if(t){var a=xs(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return _R(this,r)}}function $R(e){if(Array.isArray(e))return qw(e)}function LR(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function FR(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function rf(e){return $R(e)||LR(e)||Uw(e)||FR()}function BR(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}const qR=Math.min,UR=Math.max,vs=Math.round,yi=Math.floor,bs=e=>({x:e,y:e});function zR(e){const{x:t,y:r,width:n,height:a}=e;return{width:n,height:a,top:r,left:t,right:t+n,bottom:r+a,x:t,y:r}}function co(){return typeof window<"u"}function Gy(e){return Xy(e)?(e.nodeName||"").toLowerCase():"#document"}function vr(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Qy(e){var t;return(t=(Xy(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function Xy(e){return co()?e instanceof Node||e instanceof vr(e).Node:!1}function VR(e){return co()?e instanceof Element||e instanceof vr(e).Element:!1}function nf(e){return co()?e instanceof HTMLElement||e instanceof vr(e).HTMLElement:!1}function I0(e){return!co()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof vr(e).ShadowRoot}const WR=new Set(["inline","contents"]);function Zy(e){const{overflow:t,overflowX:r,overflowY:n,display:a}=af(e);return/auto|scroll|overlay|hidden|clip/.test(t+n+r)&&!WR.has(a)}function HR(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const KR=new Set(["html","body","#document"]);function YR(e){return KR.has(Gy(e))}function af(e){return vr(e).getComputedStyle(e)}function GR(e){if(Gy(e)==="html")return e;const t=e.assignedSlot||e.parentNode||I0(e)&&e.host||Qy(e);return I0(t)?t.host:t}function Jy(e){const t=GR(e);return YR(t)?e.ownerDocument?e.ownerDocument.body:e.body:nf(t)&&Zy(t)?t:Jy(t)}function ys(e,t,r){var n;t===void 0&&(t=[]),r===void 0&&(r=!0);const a=Jy(e),s=a===((n=e.ownerDocument)==null?void 0:n.body),o=vr(a);if(s){const l=nu(o);return t.concat(o,o.visualViewport||[],Zy(a)?a:[],l&&r?ys(l):[])}return t.concat(a,ys(a,[],r))}function nu(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function QR(e){const t=af(e);let r=parseFloat(t.width)||0,n=parseFloat(t.height)||0;const a=nf(e),s=a?e.offsetWidth:r,o=a?e.offsetHeight:n,l=vs(r)!==s||vs(n)!==o;return l&&(r=s,n=o),{width:r,height:n,$:l}}function sf(e){return VR(e)?e:e.contextElement}function M0(e){const t=sf(e);if(!nf(t))return bs(1);const r=t.getBoundingClientRect(),{width:n,height:a,$:s}=QR(t);let o=(s?vs(r.width):r.width)/n,l=(s?vs(r.height):r.height)/a;return(!o||!Number.isFinite(o))&&(o=1),(!l||!Number.isFinite(l))&&(l=1),{x:o,y:l}}const XR=bs(0);function ZR(e){const t=vr(e);return!HR()||!t.visualViewport?XR:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function JR(e,t,r){return!1}function E0(e,t,r,n){t===void 0&&(t=!1);const a=e.getBoundingClientRect(),s=sf(e);let o=bs(1);t&&(o=M0(e));const l=JR()?ZR(s):bs(0);let c=(a.left+l.x)/o.x,d=(a.top+l.y)/o.y,u=a.width/o.x,f=a.height/o.y;if(s){const h=vr(s),m=n;let b=h,g=nu(b);for(;g&&n&&m!==b;){const p=M0(g),v=g.getBoundingClientRect(),w=af(g),y=v.left+(g.clientLeft+parseFloat(w.paddingLeft))*p.x,S=v.top+(g.clientTop+parseFloat(w.paddingTop))*p.y;c*=p.x,d*=p.y,u*=p.x,f*=p.y,c+=y,d+=S,b=vr(g),g=nu(b)}}return zR({width:u,height:f,x:c,y:d})}function ew(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function e$(e,t){let r=null,n;const a=Qy(e);function s(){var l;clearTimeout(n),(l=r)==null||l.disconnect(),r=null}function o(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),s();const d=e.getBoundingClientRect(),{left:u,top:f,width:h,height:m}=d;if(l||t(),!h||!m)return;const b=yi(f),g=yi(a.clientWidth-(u+h)),p=yi(a.clientHeight-(f+m)),v=yi(u),y={rootMargin:-b+"px "+-g+"px "+-p+"px "+-v+"px",threshold:UR(0,qR(1,c))||1};let S=!0;function j(k){const N=k[0].intersectionRatio;if(N!==c){if(!S)return o();N?o(!1,N):n=setTimeout(()=>{o(!1,1e-7)},1e3)}N===1&&!ew(d,e.getBoundingClientRect())&&o(),S=!1}try{r=new IntersectionObserver(j,{...y,root:a.ownerDocument})}catch{r=new IntersectionObserver(j,y)}r.observe(e)}return o(!0),s}function t$(e,t,r,n){n===void 0&&(n={});const{ancestorScroll:a=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=n,d=sf(e),u=a||s?[...d?ys(d):[],...ys(t)]:[];u.forEach(v=>{a&&v.addEventListener("scroll",r,{passive:!0}),s&&v.addEventListener("resize",r)});const f=d&&l?e$(d,r):null;let h=-1,m=null;o&&(m=new ResizeObserver(v=>{let[w]=v;w&&w.target===d&&m&&(m.unobserve(t),cancelAnimationFrame(h),h=requestAnimationFrame(()=>{var y;(y=m)==null||y.observe(t)})),r()}),d&&!c&&m.observe(d),m.observe(t));let b,g=c?E0(e):null;c&&p();function p(){const v=E0(e);g&&!ew(g,v)&&r(),g=v,b=requestAnimationFrame(p)}return r(),()=>{var v;u.forEach(w=>{a&&w.removeEventListener("scroll",r),s&&w.removeEventListener("resize",r)}),f?.(),(v=m)==null||v.disconnect(),m=null,c&&cancelAnimationFrame(b)}}var au=x.useLayoutEffect,r$=["className","clearValue","cx","getStyles","getClassNames","getValue","hasValue","isMulti","isRtl","options","selectOption","selectProps","setValue","theme"],ws=function(){};function n$(e,t){return t?t[0]==="-"?e+t:e+"__"+t:e}function a$(e,t){for(var r=arguments.length,n=new Array(r>2?r-2:0),a=2;a<r;a++)n[a-2]=arguments[a];var s=[].concat(n);if(t&&e)for(var o in t)t.hasOwnProperty(o)&&t[o]&&s.push("".concat(n$(e,o)));return s.filter(function(l){return l}).map(function(l){return String(l).trim()}).join(" ")}var _0=function(t){return h$(t)?t.filter(Boolean):eg(t)==="object"&&t!==null?[t]:[]},tw=function(t){t.className,t.clearValue,t.cx,t.getStyles,t.getClassNames,t.getValue,t.hasValue,t.isMulti,t.isRtl,t.options,t.selectOption,t.selectProps,t.setValue,t.theme;var r=kr(t,r$);return me({},r)},Fe=function(t,r,n){var a=t.cx,s=t.getStyles,o=t.getClassNames,l=t.className;return{css:s(r,t),className:a(n??{},o(r,t),l)}};function uo(e){return[document.documentElement,document.body,window].indexOf(e)>-1}function i$(e){return uo(e)?window.innerHeight:e.clientHeight}function rw(e){return uo(e)?window.pageYOffset:e.scrollTop}function js(e,t){if(uo(e)){window.scrollTo(0,t);return}e.scrollTop=t}function s$(e){var t=getComputedStyle(e),r=t.position==="absolute",n=/(auto|scroll)/;if(t.position==="fixed")return document.documentElement;for(var a=e;a=a.parentElement;)if(t=getComputedStyle(a),!(r&&t.position==="static")&&n.test(t.overflow+t.overflowY+t.overflowX))return a;return document.documentElement}function o$(e,t,r,n){return r*((e=e/n-1)*e*e+1)+t}function wi(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:200,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:ws,a=rw(e),s=t-a,o=10,l=0;function c(){l+=o;var d=o$(l,a,s,r);js(e,d),l<r?window.requestAnimationFrame(c):n(e)}c()}function R0(e,t){var r=e.getBoundingClientRect(),n=t.getBoundingClientRect(),a=t.offsetHeight/3;n.bottom+a>r.bottom?js(e,Math.min(t.offsetTop+t.clientHeight-e.offsetHeight+a,e.scrollHeight)):n.top-a<r.top&&js(e,Math.max(t.offsetTop-a,0))}function l$(e){var t=e.getBoundingClientRect();return{bottom:t.bottom,height:t.height,left:t.left,right:t.right,top:t.top,width:t.width}}function $0(){try{return document.createEvent("TouchEvent"),!0}catch{return!1}}function c$(){try{return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}catch{return!1}}var nw=!1,u$={get passive(){return nw=!0}},ji=typeof window<"u"?window:{};ji.addEventListener&&ji.removeEventListener&&(ji.addEventListener("p",ws,u$),ji.removeEventListener("p",ws,!1));var d$=nw;function f$(e){return e!=null}function h$(e){return Array.isArray(e)}function Ni(e,t,r){return e?t:r}var m$=function(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),a=1;a<r;a++)n[a-1]=arguments[a];var s=Object.entries(t).filter(function(o){var l=dr(o,1),c=l[0];return!n.includes(c)});return s.reduce(function(o,l){var c=dr(l,2),d=c[0],u=c[1];return o[d]=u,o},{})},p$=["children","innerProps"],g$=["children","innerProps"];function x$(e){var t=e.maxHeight,r=e.menuEl,n=e.minHeight,a=e.placement,s=e.shouldScroll,o=e.isFixedPosition,l=e.controlHeight,c=s$(r),d={placement:"bottom",maxHeight:t};if(!r||!r.offsetParent)return d;var u=c.getBoundingClientRect(),f=u.height,h=r.getBoundingClientRect(),m=h.bottom,b=h.height,g=h.top,p=r.offsetParent.getBoundingClientRect(),v=p.top,w=o?window.innerHeight:i$(c),y=rw(c),S=parseInt(getComputedStyle(r).marginBottom,10),j=parseInt(getComputedStyle(r).marginTop,10),k=v-j,N=w-g,P=k+y,D=f-y-g,C=m-w+y+S,O=y+g-j,A=160;switch(a){case"auto":case"bottom":if(N>=b)return{placement:"bottom",maxHeight:t};if(D>=b&&!o)return s&&wi(c,C,A),{placement:"bottom",maxHeight:t};if(!o&&D>=n||o&&N>=n){s&&wi(c,C,A);var B=o?N-S:D-S;return{placement:"bottom",maxHeight:B}}if(a==="auto"||o){var M=t,F=o?k:P;return F>=n&&(M=Math.min(F-S-l,t)),{placement:"top",maxHeight:M}}if(a==="bottom")return s&&js(c,C),{placement:"bottom",maxHeight:t};break;case"top":if(k>=b)return{placement:"top",maxHeight:t};if(P>=b&&!o)return s&&wi(c,O,A),{placement:"top",maxHeight:t};if(!o&&P>=n||o&&k>=n){var V=t;return(!o&&P>=n||o&&k>=n)&&(V=o?k-j:P-j),s&&wi(c,O,A),{placement:"top",maxHeight:V}}return{placement:"bottom",maxHeight:t};default:throw new Error('Invalid placement provided "'.concat(a,'".'))}return d}function v$(e){var t={bottom:"top",top:"bottom"};return e?t[e]:"bottom"}var aw=function(t){return t==="auto"?"bottom":t},b$=function(t,r){var n,a=t.placement,s=t.theme,o=s.borderRadius,l=s.spacing,c=s.colors;return me((n={label:"menu"},ga(n,v$(a),"100%"),ga(n,"position","absolute"),ga(n,"width","100%"),ga(n,"zIndex",1),n),r?{}:{backgroundColor:c.neutral0,borderRadius:o,boxShadow:"0 0 0 1px hsla(0, 0%, 0%, 0.1), 0 4px 11px hsla(0, 0%, 0%, 0.1)",marginBottom:l.menuGutter,marginTop:l.menuGutter})},iw=x.createContext(null),y$=function(t){var r=t.children,n=t.minMenuHeight,a=t.maxMenuHeight,s=t.menuPlacement,o=t.menuPosition,l=t.menuShouldScrollIntoView,c=t.theme,d=x.useContext(iw)||{},u=d.setPortalPlacement,f=x.useRef(null),h=x.useState(a),m=dr(h,2),b=m[0],g=m[1],p=x.useState(null),v=dr(p,2),w=v[0],y=v[1],S=c.spacing.controlHeight;return au(function(){var j=f.current;if(j){var k=o==="fixed",N=l&&!k,P=x$({maxHeight:a,menuEl:j,minHeight:n,placement:s,shouldScroll:N,isFixedPosition:k,controlHeight:S});g(P.maxHeight),y(P.placement),u?.(P.placement)}},[a,s,o,l,n,u,S]),r({ref:f,placerProps:me(me({},t),{},{placement:w||aw(s),maxHeight:b})})},w$=function(t){var r=t.children,n=t.innerRef,a=t.innerProps;return he("div",ge({},Fe(t,"menu",{menu:!0}),{ref:n},a),r)},j$=w$,N$=function(t,r){var n=t.maxHeight,a=t.theme.spacing.baseUnit;return me({maxHeight:n,overflowY:"auto",position:"relative",WebkitOverflowScrolling:"touch"},r?{}:{paddingBottom:a,paddingTop:a})},S$=function(t){var r=t.children,n=t.innerProps,a=t.innerRef,s=t.isMulti;return he("div",ge({},Fe(t,"menuList",{"menu-list":!0,"menu-list--is-multi":s}),{ref:a},n),r)},sw=function(t,r){var n=t.theme,a=n.spacing.baseUnit,s=n.colors;return me({textAlign:"center"},r?{}:{color:s.neutral40,padding:"".concat(a*2,"px ").concat(a*3,"px")})},k$=sw,P$=sw,O$=function(t){var r=t.children,n=r===void 0?"No options":r,a=t.innerProps,s=kr(t,p$);return he("div",ge({},Fe(me(me({},s),{},{children:n,innerProps:a}),"noOptionsMessage",{"menu-notice":!0,"menu-notice--no-options":!0}),a),n)},C$=function(t){var r=t.children,n=r===void 0?"Loading...":r,a=t.innerProps,s=kr(t,g$);return he("div",ge({},Fe(me(me({},s),{},{children:n,innerProps:a}),"loadingMessage",{"menu-notice":!0,"menu-notice--loading":!0}),a),n)},A$=function(t){var r=t.rect,n=t.offset,a=t.position;return{left:r.left,position:a,top:n,width:r.width,zIndex:1}},D$=function(t){var r=t.appendTo,n=t.children,a=t.controlElement,s=t.innerProps,o=t.menuPlacement,l=t.menuPosition,c=x.useRef(null),d=x.useRef(null),u=x.useState(aw(o)),f=dr(u,2),h=f[0],m=f[1],b=x.useMemo(function(){return{setPortalPlacement:m}},[]),g=x.useState(null),p=dr(g,2),v=p[0],w=p[1],y=x.useCallback(function(){if(a){var N=l$(a),P=l==="fixed"?0:window.pageYOffset,D=N[h]+P;(D!==v?.offset||N.left!==v?.rect.left||N.width!==v?.rect.width)&&w({offset:D,rect:N})}},[a,l,h,v?.offset,v?.rect.left,v?.rect.width]);au(function(){y()},[y]);var S=x.useCallback(function(){typeof d.current=="function"&&(d.current(),d.current=null),a&&c.current&&(d.current=t$(a,c.current,y,{elementResize:"ResizeObserver"in window}))},[a,y]);au(function(){S()},[S]);var j=x.useCallback(function(N){c.current=N,S()},[S]);if(!r&&l!=="fixed"||!v)return null;var k=he("div",ge({ref:j},Fe(me(me({},t),{},{offset:v.offset,position:l,rect:v.rect}),"menuPortal",{"menu-portal":!0}),s),n);return he(iw.Provider,{value:b},r?Ss.createPortal(k,r):k)},T$=function(t){var r=t.isDisabled,n=t.isRtl;return{label:"container",direction:n?"rtl":void 0,pointerEvents:r?"none":void 0,position:"relative"}},I$=function(t){var r=t.children,n=t.innerProps,a=t.isDisabled,s=t.isRtl;return he("div",ge({},Fe(t,"container",{"--is-disabled":a,"--is-rtl":s}),n),r)},M$=function(t,r){var n=t.theme.spacing,a=t.isMulti,s=t.hasValue,o=t.selectProps.controlShouldRenderValue;return me({alignItems:"center",display:a&&s&&o?"flex":"grid",flex:1,flexWrap:"wrap",WebkitOverflowScrolling:"touch",position:"relative",overflow:"hidden"},r?{}:{padding:"".concat(n.baseUnit/2,"px ").concat(n.baseUnit*2,"px")})},E$=function(t){var r=t.children,n=t.innerProps,a=t.isMulti,s=t.hasValue;return he("div",ge({},Fe(t,"valueContainer",{"value-container":!0,"value-container--is-multi":a,"value-container--has-value":s}),n),r)},_$=function(){return{alignItems:"center",alignSelf:"stretch",display:"flex",flexShrink:0}},R$=function(t){var r=t.children,n=t.innerProps;return he("div",ge({},Fe(t,"indicatorsContainer",{indicators:!0}),n),r)},L0,$$=["size"],L$=["innerProps","isRtl","size"],F$={name:"8mmkcg",styles:"display:inline-block;fill:currentColor;line-height:1;stroke:currentColor;stroke-width:0"},ow=function(t){var r=t.size,n=kr(t,$$);return he("svg",ge({height:r,width:r,viewBox:"0 0 20 20","aria-hidden":"true",focusable:"false",css:F$},n))},of=function(t){return he(ow,ge({size:20},t),he("path",{d:"M14.348 14.849c-0.469 0.469-1.229 0.469-1.697 0l-2.651-3.030-2.651 3.029c-0.469 0.469-1.229 0.469-1.697 0-0.469-0.469-0.469-1.229 0-1.697l2.758-3.15-2.759-3.152c-0.469-0.469-0.469-1.228 0-1.697s1.228-0.469 1.697 0l2.652 3.031 2.651-3.031c0.469-0.469 1.228-0.469 1.697 0s0.469 1.229 0 1.697l-2.758 3.152 2.758 3.15c0.469 0.469 0.469 1.229 0 1.698z"}))},lw=function(t){return he(ow,ge({size:20},t),he("path",{d:"M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747 3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0 1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502 0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0 0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z"}))},cw=function(t,r){var n=t.isFocused,a=t.theme,s=a.spacing.baseUnit,o=a.colors;return me({label:"indicatorContainer",display:"flex",transition:"color 150ms"},r?{}:{color:n?o.neutral60:o.neutral20,padding:s*2,":hover":{color:n?o.neutral80:o.neutral40}})},B$=cw,q$=function(t){var r=t.children,n=t.innerProps;return he("div",ge({},Fe(t,"dropdownIndicator",{indicator:!0,"dropdown-indicator":!0}),n),r||he(lw,null))},U$=cw,z$=function(t){var r=t.children,n=t.innerProps;return he("div",ge({},Fe(t,"clearIndicator",{indicator:!0,"clear-indicator":!0}),n),r||he(of,null))},V$=function(t,r){var n=t.isDisabled,a=t.theme,s=a.spacing.baseUnit,o=a.colors;return me({label:"indicatorSeparator",alignSelf:"stretch",width:1},r?{}:{backgroundColor:n?o.neutral10:o.neutral20,marginBottom:s*2,marginTop:s*2})},W$=function(t){var r=t.innerProps;return he("span",ge({},r,Fe(t,"indicatorSeparator",{"indicator-separator":!0})))},H$=Jw(L0||(L0=BR([`
  0%, 80%, 100% { opacity: 0; }
  40% { opacity: 1; }
`]))),K$=function(t,r){var n=t.isFocused,a=t.size,s=t.theme,o=s.colors,l=s.spacing.baseUnit;return me({label:"loadingIndicator",display:"flex",transition:"color 150ms",alignSelf:"center",fontSize:a,lineHeight:1,marginRight:a,textAlign:"center",verticalAlign:"middle"},r?{}:{color:n?o.neutral60:o.neutral20,padding:l*2})},ec=function(t){var r=t.delay,n=t.offset;return he("span",{css:ng({animation:"".concat(H$," 1s ease-in-out ").concat(r,"ms infinite;"),backgroundColor:"currentColor",borderRadius:"1em",display:"inline-block",marginLeft:n?"1em":void 0,height:"1em",verticalAlign:"top",width:"1em"},"","")})},Y$=function(t){var r=t.innerProps,n=t.isRtl,a=t.size,s=a===void 0?4:a,o=kr(t,L$);return he("div",ge({},Fe(me(me({},o),{},{innerProps:r,isRtl:n,size:s}),"loadingIndicator",{indicator:!0,"loading-indicator":!0}),r),he(ec,{delay:0,offset:n}),he(ec,{delay:160,offset:!0}),he(ec,{delay:320,offset:!n}))},G$=function(t,r){var n=t.isDisabled,a=t.isFocused,s=t.theme,o=s.colors,l=s.borderRadius,c=s.spacing;return me({label:"control",alignItems:"center",cursor:"default",display:"flex",flexWrap:"wrap",justifyContent:"space-between",minHeight:c.controlHeight,outline:"0 !important",position:"relative",transition:"all 100ms"},r?{}:{backgroundColor:n?o.neutral5:o.neutral0,borderColor:n?o.neutral10:a?o.primary:o.neutral20,borderRadius:l,borderStyle:"solid",borderWidth:1,boxShadow:a?"0 0 0 1px ".concat(o.primary):void 0,"&:hover":{borderColor:a?o.primary:o.neutral30}})},Q$=function(t){var r=t.children,n=t.isDisabled,a=t.isFocused,s=t.innerRef,o=t.innerProps,l=t.menuIsOpen;return he("div",ge({ref:s},Fe(t,"control",{control:!0,"control--is-disabled":n,"control--is-focused":a,"control--menu-is-open":l}),o,{"aria-disabled":n||void 0}),r)},X$=Q$,Z$=["data"],J$=function(t,r){var n=t.theme.spacing;return r?{}:{paddingBottom:n.baseUnit*2,paddingTop:n.baseUnit*2}},eL=function(t){var r=t.children,n=t.cx,a=t.getStyles,s=t.getClassNames,o=t.Heading,l=t.headingProps,c=t.innerProps,d=t.label,u=t.theme,f=t.selectProps;return he("div",ge({},Fe(t,"group",{group:!0}),c),he(o,ge({},l,{selectProps:f,theme:u,getStyles:a,getClassNames:s,cx:n}),d),he("div",null,r))},tL=function(t,r){var n=t.theme,a=n.colors,s=n.spacing;return me({label:"group",cursor:"default",display:"block"},r?{}:{color:a.neutral40,fontSize:"75%",fontWeight:500,marginBottom:"0.25em",paddingLeft:s.baseUnit*3,paddingRight:s.baseUnit*3,textTransform:"uppercase"})},rL=function(t){var r=tw(t);r.data;var n=kr(r,Z$);return he("div",ge({},Fe(t,"groupHeading",{"group-heading":!0}),n))},nL=eL,aL=["innerRef","isDisabled","isHidden","inputClassName"],iL=function(t,r){var n=t.isDisabled,a=t.value,s=t.theme,o=s.spacing,l=s.colors;return me(me({visibility:n?"hidden":"visible",transform:a?"translateZ(0)":""},sL),r?{}:{margin:o.baseUnit/2,paddingBottom:o.baseUnit/2,paddingTop:o.baseUnit/2,color:l.neutral80})},uw={gridArea:"1 / 2",font:"inherit",minWidth:"2px",border:0,margin:0,outline:0,padding:0},sL={flex:"1 1 auto",display:"inline-grid",gridArea:"1 / 1 / 2 / 3",gridTemplateColumns:"0 min-content","&:after":me({content:'attr(data-value) " "',visibility:"hidden",whiteSpace:"pre"},uw)},oL=function(t){return me({label:"input",color:"inherit",background:0,opacity:t?0:1,width:"100%"},uw)},lL=function(t){var r=t.cx,n=t.value,a=tw(t),s=a.innerRef,o=a.isDisabled,l=a.isHidden,c=a.inputClassName,d=kr(a,aL);return he("div",ge({},Fe(t,"input",{"input-container":!0}),{"data-value":n||""}),he("input",ge({className:r({input:!0},c),ref:s,style:oL(l),disabled:o},d)))},cL=lL,uL=function(t,r){var n=t.theme,a=n.spacing,s=n.borderRadius,o=n.colors;return me({label:"multiValue",display:"flex",minWidth:0},r?{}:{backgroundColor:o.neutral10,borderRadius:s/2,margin:a.baseUnit/2})},dL=function(t,r){var n=t.theme,a=n.borderRadius,s=n.colors,o=t.cropWithEllipsis;return me({overflow:"hidden",textOverflow:o||o===void 0?"ellipsis":void 0,whiteSpace:"nowrap"},r?{}:{borderRadius:a/2,color:s.neutral80,fontSize:"85%",padding:3,paddingLeft:6})},fL=function(t,r){var n=t.theme,a=n.spacing,s=n.borderRadius,o=n.colors,l=t.isFocused;return me({alignItems:"center",display:"flex"},r?{}:{borderRadius:s/2,backgroundColor:l?o.dangerLight:void 0,paddingLeft:a.baseUnit,paddingRight:a.baseUnit,":hover":{backgroundColor:o.dangerLight,color:o.danger}})},dw=function(t){var r=t.children,n=t.innerProps;return he("div",n,r)},hL=dw,mL=dw;function pL(e){var t=e.children,r=e.innerProps;return he("div",ge({role:"button"},r),t||he(of,{size:14}))}var gL=function(t){var r=t.children,n=t.components,a=t.data,s=t.innerProps,o=t.isDisabled,l=t.removeProps,c=t.selectProps,d=n.Container,u=n.Label,f=n.Remove;return he(d,{data:a,innerProps:me(me({},Fe(t,"multiValue",{"multi-value":!0,"multi-value--is-disabled":o})),s),selectProps:c},he(u,{data:a,innerProps:me({},Fe(t,"multiValueLabel",{"multi-value__label":!0})),selectProps:c},r),he(f,{data:a,innerProps:me(me({},Fe(t,"multiValueRemove",{"multi-value__remove":!0})),{},{"aria-label":"Remove ".concat(r||"option")},l),selectProps:c}))},xL=gL,vL=function(t,r){var n=t.isDisabled,a=t.isFocused,s=t.isSelected,o=t.theme,l=o.spacing,c=o.colors;return me({label:"option",cursor:"default",display:"block",fontSize:"inherit",width:"100%",userSelect:"none",WebkitTapHighlightColor:"rgba(0, 0, 0, 0)"},r?{}:{backgroundColor:s?c.primary:a?c.primary25:"transparent",color:n?c.neutral20:s?c.neutral0:"inherit",padding:"".concat(l.baseUnit*2,"px ").concat(l.baseUnit*3,"px"),":active":{backgroundColor:n?void 0:s?c.primary:c.primary50}})},bL=function(t){var r=t.children,n=t.isDisabled,a=t.isFocused,s=t.isSelected,o=t.innerRef,l=t.innerProps;return he("div",ge({},Fe(t,"option",{option:!0,"option--is-disabled":n,"option--is-focused":a,"option--is-selected":s}),{ref:o,"aria-disabled":n},l),r)},yL=bL,wL=function(t,r){var n=t.theme,a=n.spacing,s=n.colors;return me({label:"placeholder",gridArea:"1 / 1 / 2 / 3"},r?{}:{color:s.neutral50,marginLeft:a.baseUnit/2,marginRight:a.baseUnit/2})},jL=function(t){var r=t.children,n=t.innerProps;return he("div",ge({},Fe(t,"placeholder",{placeholder:!0}),n),r)},NL=jL,SL=function(t,r){var n=t.isDisabled,a=t.theme,s=a.spacing,o=a.colors;return me({label:"singleValue",gridArea:"1 / 1 / 2 / 3",maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},r?{}:{color:n?o.neutral40:o.neutral80,marginLeft:s.baseUnit/2,marginRight:s.baseUnit/2})},kL=function(t){var r=t.children,n=t.isDisabled,a=t.innerProps;return he("div",ge({},Fe(t,"singleValue",{"single-value":!0,"single-value--is-disabled":n}),a),r)},PL=kL,OL={ClearIndicator:z$,Control:X$,DropdownIndicator:q$,DownChevron:lw,CrossIcon:of,Group:nL,GroupHeading:rL,IndicatorsContainer:R$,IndicatorSeparator:W$,Input:cL,LoadingIndicator:Y$,Menu:j$,MenuList:S$,MenuPortal:D$,LoadingMessage:C$,NoOptionsMessage:O$,MultiValue:xL,MultiValueContainer:hL,MultiValueLabel:mL,MultiValueRemove:pL,Option:yL,Placeholder:NL,SelectContainer:I$,SingleValue:PL,ValueContainer:E$},CL=function(t){return me(me({},OL),t.components)},F0=Number.isNaN||function(t){return typeof t=="number"&&t!==t};function AL(e,t){return!!(e===t||F0(e)&&F0(t))}function DL(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(!AL(e[r],t[r]))return!1;return!0}function TL(e,t){t===void 0&&(t=DL);var r=null;function n(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];if(r&&r.lastThis===this&&t(a,r.lastArgs))return r.lastResult;var o=e.apply(this,a);return r={lastResult:o,lastArgs:a,lastThis:this},o}return n.clear=function(){r=null},n}var IL={name:"7pg0cj-a11yText",styles:"label:a11yText;z-index:9999;border:0;clip:rect(1px, 1px, 1px, 1px);height:1px;width:1px;position:absolute;overflow:hidden;padding:0;white-space:nowrap"},ML=function(t){return he("span",ge({css:IL},t))},B0=ML,EL={guidance:function(t){var r=t.isSearchable,n=t.isMulti,a=t.tabSelectsValue,s=t.context,o=t.isInitialFocus;switch(s){case"menu":return"Use Up and Down to choose options, press Enter to select the currently focused option, press Escape to exit the menu".concat(a?", press Tab to select the option and exit the menu":"",".");case"input":return o?"".concat(t["aria-label"]||"Select"," is focused ").concat(r?",type to refine list":"",", press Down to open the menu, ").concat(n?" press left to focus selected values":""):"";case"value":return"Use left and right to toggle between focused values, press Backspace to remove the currently focused value";default:return""}},onChange:function(t){var r=t.action,n=t.label,a=n===void 0?"":n,s=t.labels,o=t.isDisabled;switch(r){case"deselect-option":case"pop-value":case"remove-value":return"option ".concat(a,", deselected.");case"clear":return"All selected options have been cleared.";case"initial-input-focus":return"option".concat(s.length>1?"s":""," ").concat(s.join(","),", selected.");case"select-option":return o?"option ".concat(a," is disabled. Select another option."):"option ".concat(a,", selected.");default:return""}},onFocus:function(t){var r=t.context,n=t.focused,a=t.options,s=t.label,o=s===void 0?"":s,l=t.selectValue,c=t.isDisabled,d=t.isSelected,u=t.isAppleDevice,f=function(g,p){return g&&g.length?"".concat(g.indexOf(p)+1," of ").concat(g.length):""};if(r==="value"&&l)return"value ".concat(o," focused, ").concat(f(l,n),".");if(r==="menu"&&u){var h=c?" disabled":"",m="".concat(d?" selected":"").concat(h);return"".concat(o).concat(m,", ").concat(f(a,n),".")}return""},onFilter:function(t){var r=t.inputValue,n=t.resultsMessage;return"".concat(n).concat(r?" for search term "+r:"",".")}},_L=function(t){var r=t.ariaSelection,n=t.focusedOption,a=t.focusedValue,s=t.focusableOptions,o=t.isFocused,l=t.selectValue,c=t.selectProps,d=t.id,u=t.isAppleDevice,f=c.ariaLiveMessages,h=c.getOptionLabel,m=c.inputValue,b=c.isMulti,g=c.isOptionDisabled,p=c.isSearchable,v=c.menuIsOpen,w=c.options,y=c.screenReaderStatus,S=c.tabSelectsValue,j=c.isLoading,k=c["aria-label"],N=c["aria-live"],P=x.useMemo(function(){return me(me({},EL),f||{})},[f]),D=x.useMemo(function(){var F="";if(r&&P.onChange){var V=r.option,q=r.options,K=r.removedValue,ne=r.removedValues,Z=r.value,T=function($){return Array.isArray($)?null:$},_=K||V||T(Z),Y=_?h(_):"",ee=q||ne||void 0,W=ee?ee.map(h):[],H=me({isDisabled:_&&g(_,l),label:Y,labels:W},r);F=P.onChange(H)}return F},[r,P,g,l,h]),C=x.useMemo(function(){var F="",V=n||a,q=!!(n&&l&&l.includes(n));if(V&&P.onFocus){var K={focused:V,label:h(V),isDisabled:g(V,l),isSelected:q,options:s,context:V===n?"menu":"value",selectValue:l,isAppleDevice:u};F=P.onFocus(K)}return F},[n,a,h,g,P,s,l,u]),O=x.useMemo(function(){var F="";if(v&&w.length&&!j&&P.onFilter){var V=y({count:s.length});F=P.onFilter({inputValue:m,resultsMessage:V})}return F},[s,m,v,P,w,y,j]),A=r?.action==="initial-input-focus",B=x.useMemo(function(){var F="";if(P.guidance){var V=a?"value":v?"menu":"input";F=P.guidance({"aria-label":k,context:V,isDisabled:n&&g(n,l),isMulti:b,isSearchable:p,tabSelectsValue:S,isInitialFocus:A})}return F},[k,n,a,b,g,p,v,P,l,S,A]),M=he(x.Fragment,null,he("span",{id:"aria-selection"},D),he("span",{id:"aria-focused"},C),he("span",{id:"aria-results"},O),he("span",{id:"aria-guidance"},B));return he(x.Fragment,null,he(B0,{id:d},A&&M),he(B0,{"aria-live":N,"aria-atomic":"false","aria-relevant":"additions text",role:"log"},o&&!A&&M))},RL=_L,iu=[{base:"A",letters:"Aâ’¶ï¼¡Ã€ÃÃ‚áº¦áº¤áºªáº¨ÃƒÄ€Ä‚áº°áº®áº´áº²È¦Ç Ã„Çžáº¢Ã…ÇºÇÈ€È‚áº áº¬áº¶á¸€Ä„Èºâ±¯"},{base:"AA",letters:"êœ²"},{base:"AE",letters:"Ã†Ç¼Ç¢"},{base:"AO",letters:"êœ´"},{base:"AU",letters:"êœ¶"},{base:"AV",letters:"êœ¸êœº"},{base:"AY",letters:"êœ¼"},{base:"B",letters:"Bâ’·ï¼¢á¸‚á¸„á¸†ÉƒÆ‚Æ"},{base:"C",letters:"Câ’¸ï¼£Ä†ÄˆÄŠÄŒÃ‡á¸ˆÆ‡È»êœ¾"},{base:"D",letters:"Dâ’¹ï¼¤á¸ŠÄŽá¸Œá¸á¸’á¸ŽÄÆ‹ÆŠÆ‰ê¹"},{base:"DZ",letters:"Ç±Ç„"},{base:"Dz",letters:"Ç²Ç…"},{base:"E",letters:"Eâ’ºï¼¥ÃˆÃ‰ÃŠá»€áº¾á»„á»‚áº¼Ä’á¸”á¸–Ä”Ä–Ã‹áººÄšÈ„È†áº¸á»†È¨á¸œÄ˜á¸˜á¸šÆÆŽ"},{base:"F",letters:"Fâ’»ï¼¦á¸žÆ‘ê»"},{base:"G",letters:"Gâ’¼ï¼§Ç´Äœá¸ ÄžÄ Ç¦Ä¢Ç¤Æ“êž ê½ê¾"},{base:"H",letters:"Hâ’½ï¼¨Ä¤á¸¢á¸¦Èžá¸¤á¸¨á¸ªÄ¦â±§â±µêž"},{base:"I",letters:"Iâ’¾ï¼©ÃŒÃÃŽÄ¨ÄªÄ¬Ä°Ãá¸®á»ˆÇÈˆÈŠá»ŠÄ®á¸¬Æ—"},{base:"J",letters:"Jâ’¿ï¼ªÄ´Éˆ"},{base:"K",letters:"Kâ“€ï¼«á¸°Ç¨á¸²Ä¶á¸´Æ˜â±©ê€ê‚ê„êž¢"},{base:"L",letters:"Lâ“ï¼¬Ä¿Ä¹Ä½á¸¶á¸¸Ä»á¸¼á¸ºÅÈ½â±¢â± êˆê†êž€"},{base:"LJ",letters:"Ç‡"},{base:"Lj",letters:"Çˆ"},{base:"M",letters:"Mâ“‚ï¼­á¸¾á¹€á¹‚â±®Æœ"},{base:"N",letters:"Nâ“ƒï¼®Ç¸ÅƒÃ‘á¹„Å‡á¹†Å…á¹Šá¹ˆÈ Æêžêž¤"},{base:"NJ",letters:"ÇŠ"},{base:"Nj",letters:"Ç‹"},{base:"O",letters:"Oâ“„ï¼¯Ã’Ã“Ã”á»’á»á»–á»”Ã•á¹ŒÈ¬á¹ŽÅŒá¹á¹’ÅŽÈ®È°Ã–Èªá»ŽÅÇ‘ÈŒÈŽÆ á»œá»šá» á»žá»¢á»Œá»˜ÇªÇ¬Ã˜Ç¾Æ†ÆŸêŠêŒ"},{base:"OI",letters:"Æ¢"},{base:"OO",letters:"êŽ"},{base:"OU",letters:"È¢"},{base:"P",letters:"Pâ“…ï¼°á¹”á¹–Æ¤â±£êê’ê”"},{base:"Q",letters:"Qâ“†ï¼±ê–ê˜ÉŠ"},{base:"R",letters:"Râ“‡ï¼²Å”á¹˜Å˜ÈÈ’á¹šá¹œÅ–á¹žÉŒâ±¤êšêž¦êž‚"},{base:"S",letters:"Sâ“ˆï¼³áºžÅšá¹¤Åœá¹ Å á¹¦á¹¢á¹¨È˜Åžâ±¾êž¨êž„"},{base:"T",letters:"Tâ“‰ï¼´á¹ªÅ¤á¹¬ÈšÅ¢á¹°á¹®Å¦Æ¬Æ®È¾êž†"},{base:"TZ",letters:"êœ¨"},{base:"U",letters:"Uâ“Šï¼µÃ™ÃšÃ›Å¨á¹¸Åªá¹ºÅ¬ÃœÇ›Ç—Ç•Ç™á»¦Å®Å°Ç“È”È–Æ¯á»ªá»¨á»®á»¬á»°á»¤á¹²Å²á¹¶á¹´É„"},{base:"V",letters:"Vâ“‹ï¼¶á¹¼á¹¾Æ²êžÉ…"},{base:"VY",letters:"ê "},{base:"W",letters:"Wâ“Œï¼·áº€áº‚Å´áº†áº„áºˆâ±²"},{base:"X",letters:"Xâ“ï¼¸áºŠáºŒ"},{base:"Y",letters:"Yâ“Žï¼¹á»²ÃÅ¶á»¸È²áºŽÅ¸á»¶á»´Æ³ÉŽá»¾"},{base:"Z",letters:"Zâ“ï¼ºÅ¹áºÅ»Å½áº’áº”ÆµÈ¤â±¿â±«ê¢"},{base:"a",letters:"aâ“ï½áºšÃ Ã¡Ã¢áº§áº¥áº«áº©Ã£ÄÄƒáº±áº¯áºµáº³È§Ç¡Ã¤ÇŸáº£Ã¥Ç»ÇŽÈÈƒáº¡áº­áº·á¸Ä…â±¥É"},{base:"aa",letters:"êœ³"},{base:"ae",letters:"Ã¦Ç½Ç£"},{base:"ao",letters:"êœµ"},{base:"au",letters:"êœ·"},{base:"av",letters:"êœ¹êœ»"},{base:"ay",letters:"êœ½"},{base:"b",letters:"bâ“‘ï½‚á¸ƒá¸…á¸‡Æ€ÆƒÉ“"},{base:"c",letters:"câ“’ï½ƒÄ‡Ä‰Ä‹ÄÃ§á¸‰ÆˆÈ¼êœ¿â†„"},{base:"d",letters:"dâ““ï½„á¸‹Äá¸á¸‘á¸“á¸Ä‘ÆŒÉ–É—êº"},{base:"dz",letters:"Ç³Ç†"},{base:"e",letters:"eâ“”ï½…Ã¨Ã©Ãªá»áº¿á»…á»ƒáº½Ä“á¸•á¸—Ä•Ä—Ã«áº»Ä›È…È‡áº¹á»‡È©á¸Ä™á¸™á¸›É‡É›Ç"},{base:"f",letters:"fâ“•ï½†á¸ŸÆ’ê¼"},{base:"g",letters:"gâ“–ï½‡ÇµÄá¸¡ÄŸÄ¡Ç§Ä£Ç¥É êž¡áµ¹ê¿"},{base:"h",letters:"hâ“—ï½ˆÄ¥á¸£á¸§ÈŸá¸¥á¸©á¸«áº–Ä§â±¨â±¶É¥"},{base:"hv",letters:"Æ•"},{base:"i",letters:"iâ“˜ï½‰Ã¬Ã­Ã®Ä©Ä«Ä­Ã¯á¸¯á»‰ÇÈ‰È‹á»‹Ä¯á¸­É¨Ä±"},{base:"j",letters:"jâ“™ï½ŠÄµÇ°É‰"},{base:"k",letters:"kâ“šï½‹á¸±Ç©á¸³Ä·á¸µÆ™â±ªêêƒê…êž£"},{base:"l",letters:"lâ“›ï½ŒÅ€ÄºÄ¾á¸·á¸¹Ä¼á¸½á¸»Å¿Å‚ÆšÉ«â±¡ê‰êžê‡"},{base:"lj",letters:"Ç‰"},{base:"m",letters:"mâ“œï½á¸¿á¹á¹ƒÉ±É¯"},{base:"n",letters:"nâ“ï½ŽÇ¹Å„Ã±á¹…Åˆá¹‡Å†á¹‹á¹‰ÆžÉ²Å‰êž‘êž¥"},{base:"nj",letters:"ÇŒ"},{base:"o",letters:"oâ“žï½Ã²Ã³Ã´á»“á»‘á»—á»•Ãµá¹È­á¹Åá¹‘á¹“ÅÈ¯È±Ã¶È«á»Å‘Ç’ÈÈÆ¡á»á»›á»¡á»Ÿá»£á»á»™Ç«Ç­Ã¸Ç¿É”ê‹êÉµ"},{base:"oi",letters:"Æ£"},{base:"ou",letters:"È£"},{base:"oo",letters:"ê"},{base:"p",letters:"pâ“Ÿï½á¹•á¹—Æ¥áµ½ê‘ê“ê•"},{base:"q",letters:"qâ“ ï½‘É‹ê—ê™"},{base:"r",letters:"râ“¡ï½’Å•á¹™Å™È‘È“á¹›á¹Å—á¹ŸÉÉ½ê›êž§êžƒ"},{base:"s",letters:"sâ“¢ï½“ÃŸÅ›á¹¥Åá¹¡Å¡á¹§á¹£á¹©È™ÅŸÈ¿êž©êž…áº›"},{base:"t",letters:"tâ“£ï½”á¹«áº—Å¥á¹­È›Å£á¹±á¹¯Å§Æ­Êˆâ±¦êž‡"},{base:"tz",letters:"êœ©"},{base:"u",letters:"uâ“¤ï½•Ã¹ÃºÃ»Å©á¹¹Å«á¹»Å­Ã¼ÇœÇ˜Ç–Çšá»§Å¯Å±Ç”È•È—Æ°á»«á»©á»¯á»­á»±á»¥á¹³Å³á¹·á¹µÊ‰"},{base:"v",letters:"vâ“¥ï½–á¹½á¹¿Ê‹êŸÊŒ"},{base:"vy",letters:"ê¡"},{base:"w",letters:"wâ“¦ï½—áºáºƒÅµáº‡áº…áº˜áº‰â±³"},{base:"x",letters:"xâ“§ï½˜áº‹áº"},{base:"y",letters:"yâ“¨ï½™á»³Ã½Å·á»¹È³áºÃ¿á»·áº™á»µÆ´Éá»¿"},{base:"z",letters:"zâ“©ï½šÅºáº‘Å¼Å¾áº“áº•Æ¶È¥É€â±¬ê£"}],$L=new RegExp("["+iu.map(function(e){return e.letters}).join("")+"]","g"),fw={};for(var tc=0;tc<iu.length;tc++)for(var rc=iu[tc],nc=0;nc<rc.letters.length;nc++)fw[rc.letters[nc]]=rc.base;var hw=function(t){return t.replace($L,function(r){return fw[r]})},LL=TL(hw),q0=function(t){return t.replace(/^\s+|\s+$/g,"")},FL=function(t){return"".concat(t.label," ").concat(t.value)},BL=function(t){return function(r,n){if(r.data.__isNew__)return!0;var a=me({ignoreCase:!0,ignoreAccents:!0,stringify:FL,trim:!0,matchFrom:"any"},t),s=a.ignoreCase,o=a.ignoreAccents,l=a.stringify,c=a.trim,d=a.matchFrom,u=c?q0(n):n,f=c?q0(l(r)):l(r);return s&&(u=u.toLowerCase(),f=f.toLowerCase()),o&&(u=LL(u),f=hw(f)),d==="start"?f.substr(0,u.length)===u:f.indexOf(u)>-1}},qL=["innerRef"];function UL(e){var t=e.innerRef,r=kr(e,qL),n=m$(r,"onExited","in","enter","exit","appear");return he("input",ge({ref:t},n,{css:ng({label:"dummyInput",background:0,border:0,caretColor:"transparent",fontSize:"inherit",gridArea:"1 / 1 / 2 / 3",outline:0,padding:0,width:1,color:"transparent",left:-100,opacity:0,position:"relative",transform:"scale(.01)"},"","")}))}var zL=function(t){t.cancelable&&t.preventDefault(),t.stopPropagation()};function VL(e){var t=e.isEnabled,r=e.onBottomArrive,n=e.onBottomLeave,a=e.onTopArrive,s=e.onTopLeave,o=x.useRef(!1),l=x.useRef(!1),c=x.useRef(0),d=x.useRef(null),u=x.useCallback(function(p,v){if(d.current!==null){var w=d.current,y=w.scrollTop,S=w.scrollHeight,j=w.clientHeight,k=d.current,N=v>0,P=S-j-y,D=!1;P>v&&o.current&&(n&&n(p),o.current=!1),N&&l.current&&(s&&s(p),l.current=!1),N&&v>P?(r&&!o.current&&r(p),k.scrollTop=S,D=!0,o.current=!0):!N&&-v>y&&(a&&!l.current&&a(p),k.scrollTop=0,D=!0,l.current=!0),D&&zL(p)}},[r,n,a,s]),f=x.useCallback(function(p){u(p,p.deltaY)},[u]),h=x.useCallback(function(p){c.current=p.changedTouches[0].clientY},[]),m=x.useCallback(function(p){var v=c.current-p.changedTouches[0].clientY;u(p,v)},[u]),b=x.useCallback(function(p){if(p){var v=d$?{passive:!1}:!1;p.addEventListener("wheel",f,v),p.addEventListener("touchstart",h,v),p.addEventListener("touchmove",m,v)}},[m,h,f]),g=x.useCallback(function(p){p&&(p.removeEventListener("wheel",f,!1),p.removeEventListener("touchstart",h,!1),p.removeEventListener("touchmove",m,!1))},[m,h,f]);return x.useEffect(function(){if(t){var p=d.current;return b(p),function(){g(p)}}},[t,b,g]),function(p){d.current=p}}var U0=["boxSizing","height","overflow","paddingRight","position"],z0={boxSizing:"border-box",overflow:"hidden",position:"relative",height:"100%"};function V0(e){e.cancelable&&e.preventDefault()}function W0(e){e.stopPropagation()}function H0(){var e=this.scrollTop,t=this.scrollHeight,r=e+this.offsetHeight;e===0?this.scrollTop=1:r===t&&(this.scrollTop=e-1)}function K0(){return"ontouchstart"in window||navigator.maxTouchPoints}var Y0=!!(typeof window<"u"&&window.document&&window.document.createElement),pa=0,Cn={capture:!1,passive:!1};function WL(e){var t=e.isEnabled,r=e.accountForScrollbars,n=r===void 0?!0:r,a=x.useRef({}),s=x.useRef(null),o=x.useCallback(function(c){if(Y0){var d=document.body,u=d&&d.style;if(n&&U0.forEach(function(b){var g=u&&u[b];a.current[b]=g}),n&&pa<1){var f=parseInt(a.current.paddingRight,10)||0,h=document.body?document.body.clientWidth:0,m=window.innerWidth-h+f||0;Object.keys(z0).forEach(function(b){var g=z0[b];u&&(u[b]=g)}),u&&(u.paddingRight="".concat(m,"px"))}d&&K0()&&(d.addEventListener("touchmove",V0,Cn),c&&(c.addEventListener("touchstart",H0,Cn),c.addEventListener("touchmove",W0,Cn))),pa+=1}},[n]),l=x.useCallback(function(c){if(Y0){var d=document.body,u=d&&d.style;pa=Math.max(pa-1,0),n&&pa<1&&U0.forEach(function(f){var h=a.current[f];u&&(u[f]=h)}),d&&K0()&&(d.removeEventListener("touchmove",V0,Cn),c&&(c.removeEventListener("touchstart",H0,Cn),c.removeEventListener("touchmove",W0,Cn)))}},[n]);return x.useEffect(function(){if(t){var c=s.current;return o(c),function(){l(c)}}},[t,o,l]),function(c){s.current=c}}var HL=function(t){var r=t.target;return r.ownerDocument.activeElement&&r.ownerDocument.activeElement.blur()},KL={name:"1kfdb0e",styles:"position:fixed;left:0;bottom:0;right:0;top:0"};function YL(e){var t=e.children,r=e.lockEnabled,n=e.captureEnabled,a=n===void 0?!0:n,s=e.onBottomArrive,o=e.onBottomLeave,l=e.onTopArrive,c=e.onTopLeave,d=VL({isEnabled:a,onBottomArrive:s,onBottomLeave:o,onTopArrive:l,onTopLeave:c}),u=WL({isEnabled:r}),f=function(m){d(m),u(m)};return he(x.Fragment,null,r&&he("div",{onClick:HL,css:KL}),t(f))}var GL={name:"1a0ro4n-requiredInput",styles:"label:requiredInput;opacity:0;pointer-events:none;position:absolute;bottom:0;left:0;right:0;width:100%"},QL=function(t){var r=t.name,n=t.onFocus;return he("input",{required:!0,name:r,tabIndex:-1,"aria-hidden":"true",onFocus:n,css:GL,value:"",onChange:function(){}})},XL=QL;function lf(e){var t;return typeof window<"u"&&window.navigator!=null?e.test(((t=window.navigator.userAgentData)===null||t===void 0?void 0:t.platform)||window.navigator.platform):!1}function ZL(){return lf(/^iPhone/i)}function mw(){return lf(/^Mac/i)}function JL(){return lf(/^iPad/i)||mw()&&navigator.maxTouchPoints>1}function eF(){return ZL()||JL()}function tF(){return mw()||eF()}var rF=function(t){return t.label},nF=function(t){return t.label},aF=function(t){return t.value},iF=function(t){return!!t.isDisabled},sF={clearIndicator:U$,container:T$,control:G$,dropdownIndicator:B$,group:J$,groupHeading:tL,indicatorsContainer:_$,indicatorSeparator:V$,input:iL,loadingIndicator:K$,loadingMessage:P$,menu:b$,menuList:N$,menuPortal:A$,multiValue:uL,multiValueLabel:dL,multiValueRemove:fL,noOptionsMessage:k$,option:vL,placeholder:wL,singleValue:SL,valueContainer:M$},oF={primary:"#2684FF",primary75:"#4C9AFF",primary50:"#B2D4FF",primary25:"#DEEBFF",danger:"#DE350B",dangerLight:"#FFBDAD",neutral0:"hsl(0, 0%, 100%)",neutral5:"hsl(0, 0%, 95%)",neutral10:"hsl(0, 0%, 90%)",neutral20:"hsl(0, 0%, 80%)",neutral30:"hsl(0, 0%, 70%)",neutral40:"hsl(0, 0%, 60%)",neutral50:"hsl(0, 0%, 50%)",neutral60:"hsl(0, 0%, 40%)",neutral70:"hsl(0, 0%, 30%)",neutral80:"hsl(0, 0%, 20%)",neutral90:"hsl(0, 0%, 10%)"},lF=4,pw=4,cF=38,uF=pw*2,dF={baseUnit:pw,controlHeight:cF,menuGutter:uF},ac={borderRadius:lF,colors:oF,spacing:dF},fF={"aria-live":"polite",backspaceRemovesValue:!0,blurInputOnSelect:$0(),captureMenuScroll:!$0(),classNames:{},closeMenuOnSelect:!0,closeMenuOnScroll:!1,components:{},controlShouldRenderValue:!0,escapeClearsValue:!1,filterOption:BL(),formatGroupLabel:rF,getOptionLabel:nF,getOptionValue:aF,isDisabled:!1,isLoading:!1,isMulti:!1,isRtl:!1,isSearchable:!0,isOptionDisabled:iF,loadingMessage:function(){return"Loading..."},maxMenuHeight:300,minMenuHeight:140,menuIsOpen:!1,menuPlacement:"bottom",menuPosition:"absolute",menuShouldBlockScroll:!1,menuShouldScrollIntoView:!c$(),noOptionsMessage:function(){return"No options"},openMenuOnFocus:!1,openMenuOnClick:!0,options:[],pageSize:5,placeholder:"Select...",screenReaderStatus:function(t){var r=t.count;return"".concat(r," result").concat(r!==1?"s":""," available")},styles:{},tabIndex:0,tabSelectsValue:!0,unstyled:!1};function G0(e,t,r,n){var a=vw(e,t,r),s=bw(e,t,r),o=xw(e,t),l=Ns(e,t);return{type:"option",data:t,isDisabled:a,isSelected:s,label:o,value:l,index:n}}function Pi(e,t){return e.options.map(function(r,n){if("options"in r){var a=r.options.map(function(o,l){return G0(e,o,t,l)}).filter(function(o){return X0(e,o)});return a.length>0?{type:"group",data:r,options:a,index:n}:void 0}var s=G0(e,r,t,n);return X0(e,s)?s:void 0}).filter(f$)}function gw(e){return e.reduce(function(t,r){return r.type==="group"?t.push.apply(t,rf(r.options.map(function(n){return n.data}))):t.push(r.data),t},[])}function Q0(e,t){return e.reduce(function(r,n){return n.type==="group"?r.push.apply(r,rf(n.options.map(function(a){return{data:a.data,id:"".concat(t,"-").concat(n.index,"-").concat(a.index)}}))):r.push({data:n.data,id:"".concat(t,"-").concat(n.index)}),r},[])}function hF(e,t){return gw(Pi(e,t))}function X0(e,t){var r=e.inputValue,n=r===void 0?"":r,a=t.data,s=t.isSelected,o=t.label,l=t.value;return(!ww(e)||!s)&&yw(e,{label:o,value:l,data:a},n)}function mF(e,t){var r=e.focusedValue,n=e.selectValue,a=n.indexOf(r);if(a>-1){var s=t.indexOf(r);if(s>-1)return r;if(a<t.length)return t[a]}return null}function pF(e,t){var r=e.focusedOption;return r&&t.indexOf(r)>-1?r:t[0]}var ic=function(t,r){var n,a=(n=t.find(function(s){return s.data===r}))===null||n===void 0?void 0:n.id;return a||null},xw=function(t,r){return t.getOptionLabel(r)},Ns=function(t,r){return t.getOptionValue(r)};function vw(e,t,r){return typeof e.isOptionDisabled=="function"?e.isOptionDisabled(t,r):!1}function bw(e,t,r){if(r.indexOf(t)>-1)return!0;if(typeof e.isOptionSelected=="function")return e.isOptionSelected(t,r);var n=Ns(e,t);return r.some(function(a){return Ns(e,a)===n})}function yw(e,t,r){return e.filterOption?e.filterOption(t,r):!0}var ww=function(t){var r=t.hideSelectedOptions,n=t.isMulti;return r===void 0?n:r},gF=1,jw=(function(e){ER(r,e);var t=RR(r);function r(n){var a;if(IR(this,r),a=t.call(this,n),a.state={ariaSelection:null,focusedOption:null,focusedOptionId:null,focusableOptionsWithIds:[],focusedValue:null,inputIsHidden:!1,isFocused:!1,selectValue:[],clearFocusValueOnUpdate:!1,prevWasFocused:!1,inputIsHiddenAfterUpdate:void 0,prevProps:void 0,instancePrefix:"",isAppleDevice:!1},a.blockOptionHover=!1,a.isComposing=!1,a.commonProps=void 0,a.initialTouchX=0,a.initialTouchY=0,a.openAfterFocus=!1,a.scrollToFocusedOptionOnUpdate=!1,a.userIsDragging=void 0,a.controlRef=null,a.getControlRef=function(c){a.controlRef=c},a.focusedOptionRef=null,a.getFocusedOptionRef=function(c){a.focusedOptionRef=c},a.menuListRef=null,a.getMenuListRef=function(c){a.menuListRef=c},a.inputRef=null,a.getInputRef=function(c){a.inputRef=c},a.focus=a.focusInput,a.blur=a.blurInput,a.onChange=function(c,d){var u=a.props,f=u.onChange,h=u.name;d.name=h,a.ariaOnChange(c,d),f(c,d)},a.setValue=function(c,d,u){var f=a.props,h=f.closeMenuOnSelect,m=f.isMulti,b=f.inputValue;a.onInputChange("",{action:"set-value",prevInputValue:b}),h&&(a.setState({inputIsHiddenAfterUpdate:!m}),a.onMenuClose()),a.setState({clearFocusValueOnUpdate:!0}),a.onChange(c,{action:d,option:u})},a.selectOption=function(c){var d=a.props,u=d.blurInputOnSelect,f=d.isMulti,h=d.name,m=a.state.selectValue,b=f&&a.isOptionSelected(c,m),g=a.isOptionDisabled(c,m);if(b){var p=a.getOptionValue(c);a.setValue(m.filter(function(v){return a.getOptionValue(v)!==p}),"deselect-option",c)}else if(!g)f?a.setValue([].concat(rf(m),[c]),"select-option",c):a.setValue(c,"select-option");else{a.ariaOnChange(c,{action:"select-option",option:c,name:h});return}u&&a.blurInput()},a.removeValue=function(c){var d=a.props.isMulti,u=a.state.selectValue,f=a.getOptionValue(c),h=u.filter(function(b){return a.getOptionValue(b)!==f}),m=Ni(d,h,h[0]||null);a.onChange(m,{action:"remove-value",removedValue:c}),a.focusInput()},a.clearValue=function(){var c=a.state.selectValue;a.onChange(Ni(a.props.isMulti,[],null),{action:"clear",removedValues:c})},a.popValue=function(){var c=a.props.isMulti,d=a.state.selectValue,u=d[d.length-1],f=d.slice(0,d.length-1),h=Ni(c,f,f[0]||null);u&&a.onChange(h,{action:"pop-value",removedValue:u})},a.getFocusedOptionId=function(c){return ic(a.state.focusableOptionsWithIds,c)},a.getFocusableOptionsWithIds=function(){return Q0(Pi(a.props,a.state.selectValue),a.getElementId("option"))},a.getValue=function(){return a.state.selectValue},a.cx=function(){for(var c=arguments.length,d=new Array(c),u=0;u<c;u++)d[u]=arguments[u];return a$.apply(void 0,[a.props.classNamePrefix].concat(d))},a.getOptionLabel=function(c){return xw(a.props,c)},a.getOptionValue=function(c){return Ns(a.props,c)},a.getStyles=function(c,d){var u=a.props.unstyled,f=sF[c](d,u);f.boxSizing="border-box";var h=a.props.styles[c];return h?h(f,d):f},a.getClassNames=function(c,d){var u,f;return(u=(f=a.props.classNames)[c])===null||u===void 0?void 0:u.call(f,d)},a.getElementId=function(c){return"".concat(a.state.instancePrefix,"-").concat(c)},a.getComponents=function(){return CL(a.props)},a.buildCategorizedOptions=function(){return Pi(a.props,a.state.selectValue)},a.getCategorizedOptions=function(){return a.props.menuIsOpen?a.buildCategorizedOptions():[]},a.buildFocusableOptions=function(){return gw(a.buildCategorizedOptions())},a.getFocusableOptions=function(){return a.props.menuIsOpen?a.buildFocusableOptions():[]},a.ariaOnChange=function(c,d){a.setState({ariaSelection:me({value:c},d)})},a.onMenuMouseDown=function(c){c.button===0&&(c.stopPropagation(),c.preventDefault(),a.focusInput())},a.onMenuMouseMove=function(c){a.blockOptionHover=!1},a.onControlMouseDown=function(c){if(!c.defaultPrevented){var d=a.props.openMenuOnClick;a.state.isFocused?a.props.menuIsOpen?c.target.tagName!=="INPUT"&&c.target.tagName!=="TEXTAREA"&&a.onMenuClose():d&&a.openMenu("first"):(d&&(a.openAfterFocus=!0),a.focusInput()),c.target.tagName!=="INPUT"&&c.target.tagName!=="TEXTAREA"&&c.preventDefault()}},a.onDropdownIndicatorMouseDown=function(c){if(!(c&&c.type==="mousedown"&&c.button!==0)&&!a.props.isDisabled){var d=a.props,u=d.isMulti,f=d.menuIsOpen;a.focusInput(),f?(a.setState({inputIsHiddenAfterUpdate:!u}),a.onMenuClose()):a.openMenu("first"),c.preventDefault()}},a.onClearIndicatorMouseDown=function(c){c&&c.type==="mousedown"&&c.button!==0||(a.clearValue(),c.preventDefault(),a.openAfterFocus=!1,c.type==="touchend"?a.focusInput():setTimeout(function(){return a.focusInput()}))},a.onScroll=function(c){typeof a.props.closeMenuOnScroll=="boolean"?c.target instanceof HTMLElement&&uo(c.target)&&a.props.onMenuClose():typeof a.props.closeMenuOnScroll=="function"&&a.props.closeMenuOnScroll(c)&&a.props.onMenuClose()},a.onCompositionStart=function(){a.isComposing=!0},a.onCompositionEnd=function(){a.isComposing=!1},a.onTouchStart=function(c){var d=c.touches,u=d&&d.item(0);u&&(a.initialTouchX=u.clientX,a.initialTouchY=u.clientY,a.userIsDragging=!1)},a.onTouchMove=function(c){var d=c.touches,u=d&&d.item(0);if(u){var f=Math.abs(u.clientX-a.initialTouchX),h=Math.abs(u.clientY-a.initialTouchY),m=5;a.userIsDragging=f>m||h>m}},a.onTouchEnd=function(c){a.userIsDragging||(a.controlRef&&!a.controlRef.contains(c.target)&&a.menuListRef&&!a.menuListRef.contains(c.target)&&a.blurInput(),a.initialTouchX=0,a.initialTouchY=0)},a.onControlTouchEnd=function(c){a.userIsDragging||a.onControlMouseDown(c)},a.onClearIndicatorTouchEnd=function(c){a.userIsDragging||a.onClearIndicatorMouseDown(c)},a.onDropdownIndicatorTouchEnd=function(c){a.userIsDragging||a.onDropdownIndicatorMouseDown(c)},a.handleInputChange=function(c){var d=a.props.inputValue,u=c.currentTarget.value;a.setState({inputIsHiddenAfterUpdate:!1}),a.onInputChange(u,{action:"input-change",prevInputValue:d}),a.props.menuIsOpen||a.onMenuOpen()},a.onInputFocus=function(c){a.props.onFocus&&a.props.onFocus(c),a.setState({inputIsHiddenAfterUpdate:!1,isFocused:!0}),(a.openAfterFocus||a.props.openMenuOnFocus)&&a.openMenu("first"),a.openAfterFocus=!1},a.onInputBlur=function(c){var d=a.props.inputValue;if(a.menuListRef&&a.menuListRef.contains(document.activeElement)){a.inputRef.focus();return}a.props.onBlur&&a.props.onBlur(c),a.onInputChange("",{action:"input-blur",prevInputValue:d}),a.onMenuClose(),a.setState({focusedValue:null,isFocused:!1})},a.onOptionHover=function(c){if(!(a.blockOptionHover||a.state.focusedOption===c)){var d=a.getFocusableOptions(),u=d.indexOf(c);a.setState({focusedOption:c,focusedOptionId:u>-1?a.getFocusedOptionId(c):null})}},a.shouldHideSelectedOptions=function(){return ww(a.props)},a.onValueInputFocus=function(c){c.preventDefault(),c.stopPropagation(),a.focus()},a.onKeyDown=function(c){var d=a.props,u=d.isMulti,f=d.backspaceRemovesValue,h=d.escapeClearsValue,m=d.inputValue,b=d.isClearable,g=d.isDisabled,p=d.menuIsOpen,v=d.onKeyDown,w=d.tabSelectsValue,y=d.openMenuOnFocus,S=a.state,j=S.focusedOption,k=S.focusedValue,N=S.selectValue;if(!g&&!(typeof v=="function"&&(v(c),c.defaultPrevented))){switch(a.blockOptionHover=!0,c.key){case"ArrowLeft":if(!u||m)return;a.focusValue("previous");break;case"ArrowRight":if(!u||m)return;a.focusValue("next");break;case"Delete":case"Backspace":if(m)return;if(k)a.removeValue(k);else{if(!f)return;u?a.popValue():b&&a.clearValue()}break;case"Tab":if(a.isComposing||c.shiftKey||!p||!w||!j||y&&a.isOptionSelected(j,N))return;a.selectOption(j);break;case"Enter":if(c.keyCode===229)break;if(p){if(!j||a.isComposing)return;a.selectOption(j);break}return;case"Escape":p?(a.setState({inputIsHiddenAfterUpdate:!1}),a.onInputChange("",{action:"menu-close",prevInputValue:m}),a.onMenuClose()):b&&h&&a.clearValue();break;case" ":if(m)return;if(!p){a.openMenu("first");break}if(!j)return;a.selectOption(j);break;case"ArrowUp":p?a.focusOption("up"):a.openMenu("last");break;case"ArrowDown":p?a.focusOption("down"):a.openMenu("first");break;case"PageUp":if(!p)return;a.focusOption("pageup");break;case"PageDown":if(!p)return;a.focusOption("pagedown");break;case"Home":if(!p)return;a.focusOption("first");break;case"End":if(!p)return;a.focusOption("last");break;default:return}c.preventDefault()}},a.state.instancePrefix="react-select-"+(a.props.instanceId||++gF),a.state.selectValue=_0(n.value),n.menuIsOpen&&a.state.selectValue.length){var s=a.getFocusableOptionsWithIds(),o=a.buildFocusableOptions(),l=o.indexOf(a.state.selectValue[0]);a.state.focusableOptionsWithIds=s,a.state.focusedOption=o[l],a.state.focusedOptionId=ic(s,o[l])}return a}return MR(r,[{key:"componentDidMount",value:function(){this.startListeningComposition(),this.startListeningToTouch(),this.props.closeMenuOnScroll&&document&&document.addEventListener&&document.addEventListener("scroll",this.onScroll,!0),this.props.autoFocus&&this.focusInput(),this.props.menuIsOpen&&this.state.focusedOption&&this.menuListRef&&this.focusedOptionRef&&R0(this.menuListRef,this.focusedOptionRef),tF()&&this.setState({isAppleDevice:!0})}},{key:"componentDidUpdate",value:function(a){var s=this.props,o=s.isDisabled,l=s.menuIsOpen,c=this.state.isFocused;(c&&!o&&a.isDisabled||c&&l&&!a.menuIsOpen)&&this.focusInput(),c&&o&&!a.isDisabled?this.setState({isFocused:!1},this.onMenuClose):!c&&!o&&a.isDisabled&&this.inputRef===document.activeElement&&this.setState({isFocused:!0}),this.menuListRef&&this.focusedOptionRef&&this.scrollToFocusedOptionOnUpdate&&(R0(this.menuListRef,this.focusedOptionRef),this.scrollToFocusedOptionOnUpdate=!1)}},{key:"componentWillUnmount",value:function(){this.stopListeningComposition(),this.stopListeningToTouch(),document.removeEventListener("scroll",this.onScroll,!0)}},{key:"onMenuOpen",value:function(){this.props.onMenuOpen()}},{key:"onMenuClose",value:function(){this.onInputChange("",{action:"menu-close",prevInputValue:this.props.inputValue}),this.props.onMenuClose()}},{key:"onInputChange",value:function(a,s){this.props.onInputChange(a,s)}},{key:"focusInput",value:function(){this.inputRef&&this.inputRef.focus()}},{key:"blurInput",value:function(){this.inputRef&&this.inputRef.blur()}},{key:"openMenu",value:function(a){var s=this,o=this.state,l=o.selectValue,c=o.isFocused,d=this.buildFocusableOptions(),u=a==="first"?0:d.length-1;if(!this.props.isMulti){var f=d.indexOf(l[0]);f>-1&&(u=f)}this.scrollToFocusedOptionOnUpdate=!(c&&this.menuListRef),this.setState({inputIsHiddenAfterUpdate:!1,focusedValue:null,focusedOption:d[u],focusedOptionId:this.getFocusedOptionId(d[u])},function(){return s.onMenuOpen()})}},{key:"focusValue",value:function(a){var s=this.state,o=s.selectValue,l=s.focusedValue;if(this.props.isMulti){this.setState({focusedOption:null});var c=o.indexOf(l);l||(c=-1);var d=o.length-1,u=-1;if(o.length){switch(a){case"previous":c===0?u=0:c===-1?u=d:u=c-1;break;case"next":c>-1&&c<d&&(u=c+1);break}this.setState({inputIsHidden:u!==-1,focusedValue:o[u]})}}}},{key:"focusOption",value:function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"first",s=this.props.pageSize,o=this.state.focusedOption,l=this.getFocusableOptions();if(l.length){var c=0,d=l.indexOf(o);o||(d=-1),a==="up"?c=d>0?d-1:l.length-1:a==="down"?c=(d+1)%l.length:a==="pageup"?(c=d-s,c<0&&(c=0)):a==="pagedown"?(c=d+s,c>l.length-1&&(c=l.length-1)):a==="last"&&(c=l.length-1),this.scrollToFocusedOptionOnUpdate=!0,this.setState({focusedOption:l[c],focusedValue:null,focusedOptionId:this.getFocusedOptionId(l[c])})}}},{key:"getTheme",value:(function(){return this.props.theme?typeof this.props.theme=="function"?this.props.theme(ac):me(me({},ac),this.props.theme):ac})},{key:"getCommonProps",value:function(){var a=this.clearValue,s=this.cx,o=this.getStyles,l=this.getClassNames,c=this.getValue,d=this.selectOption,u=this.setValue,f=this.props,h=f.isMulti,m=f.isRtl,b=f.options,g=this.hasValue();return{clearValue:a,cx:s,getStyles:o,getClassNames:l,getValue:c,hasValue:g,isMulti:h,isRtl:m,options:b,selectOption:d,selectProps:f,setValue:u,theme:this.getTheme()}}},{key:"hasValue",value:function(){var a=this.state.selectValue;return a.length>0}},{key:"hasOptions",value:function(){return!!this.getFocusableOptions().length}},{key:"isClearable",value:function(){var a=this.props,s=a.isClearable,o=a.isMulti;return s===void 0?o:s}},{key:"isOptionDisabled",value:function(a,s){return vw(this.props,a,s)}},{key:"isOptionSelected",value:function(a,s){return bw(this.props,a,s)}},{key:"filterOption",value:function(a,s){return yw(this.props,a,s)}},{key:"formatOptionLabel",value:function(a,s){if(typeof this.props.formatOptionLabel=="function"){var o=this.props.inputValue,l=this.state.selectValue;return this.props.formatOptionLabel(a,{context:s,inputValue:o,selectValue:l})}else return this.getOptionLabel(a)}},{key:"formatGroupLabel",value:function(a){return this.props.formatGroupLabel(a)}},{key:"startListeningComposition",value:(function(){document&&document.addEventListener&&(document.addEventListener("compositionstart",this.onCompositionStart,!1),document.addEventListener("compositionend",this.onCompositionEnd,!1))})},{key:"stopListeningComposition",value:function(){document&&document.removeEventListener&&(document.removeEventListener("compositionstart",this.onCompositionStart),document.removeEventListener("compositionend",this.onCompositionEnd))}},{key:"startListeningToTouch",value:(function(){document&&document.addEventListener&&(document.addEventListener("touchstart",this.onTouchStart,!1),document.addEventListener("touchmove",this.onTouchMove,!1),document.addEventListener("touchend",this.onTouchEnd,!1))})},{key:"stopListeningToTouch",value:function(){document&&document.removeEventListener&&(document.removeEventListener("touchstart",this.onTouchStart),document.removeEventListener("touchmove",this.onTouchMove),document.removeEventListener("touchend",this.onTouchEnd))}},{key:"renderInput",value:(function(){var a=this.props,s=a.isDisabled,o=a.isSearchable,l=a.inputId,c=a.inputValue,d=a.tabIndex,u=a.form,f=a.menuIsOpen,h=a.required,m=this.getComponents(),b=m.Input,g=this.state,p=g.inputIsHidden,v=g.ariaSelection,w=this.commonProps,y=l||this.getElementId("input"),S=me(me(me({"aria-autocomplete":"list","aria-expanded":f,"aria-haspopup":!0,"aria-errormessage":this.props["aria-errormessage"],"aria-invalid":this.props["aria-invalid"],"aria-label":this.props["aria-label"],"aria-labelledby":this.props["aria-labelledby"],"aria-required":h,role:"combobox","aria-activedescendant":this.state.isAppleDevice?void 0:this.state.focusedOptionId||""},f&&{"aria-controls":this.getElementId("listbox")}),!o&&{"aria-readonly":!0}),this.hasValue()?v?.action==="initial-input-focus"&&{"aria-describedby":this.getElementId("live-region")}:{"aria-describedby":this.getElementId("placeholder")});return o?x.createElement(b,ge({},w,{autoCapitalize:"none",autoComplete:"off",autoCorrect:"off",id:y,innerRef:this.getInputRef,isDisabled:s,isHidden:p,onBlur:this.onInputBlur,onChange:this.handleInputChange,onFocus:this.onInputFocus,spellCheck:"false",tabIndex:d,form:u,type:"text",value:c},S)):x.createElement(UL,ge({id:y,innerRef:this.getInputRef,onBlur:this.onInputBlur,onChange:ws,onFocus:this.onInputFocus,disabled:s,tabIndex:d,inputMode:"none",form:u,value:""},S))})},{key:"renderPlaceholderOrValue",value:function(){var a=this,s=this.getComponents(),o=s.MultiValue,l=s.MultiValueContainer,c=s.MultiValueLabel,d=s.MultiValueRemove,u=s.SingleValue,f=s.Placeholder,h=this.commonProps,m=this.props,b=m.controlShouldRenderValue,g=m.isDisabled,p=m.isMulti,v=m.inputValue,w=m.placeholder,y=this.state,S=y.selectValue,j=y.focusedValue,k=y.isFocused;if(!this.hasValue()||!b)return v?null:x.createElement(f,ge({},h,{key:"placeholder",isDisabled:g,isFocused:k,innerProps:{id:this.getElementId("placeholder")}}),w);if(p)return S.map(function(P,D){var C=P===j,O="".concat(a.getOptionLabel(P),"-").concat(a.getOptionValue(P));return x.createElement(o,ge({},h,{components:{Container:l,Label:c,Remove:d},isFocused:C,isDisabled:g,key:O,index:D,removeProps:{onClick:function(){return a.removeValue(P)},onTouchEnd:function(){return a.removeValue(P)},onMouseDown:function(B){B.preventDefault()}},data:P}),a.formatOptionLabel(P,"value"))});if(v)return null;var N=S[0];return x.createElement(u,ge({},h,{data:N,isDisabled:g}),this.formatOptionLabel(N,"value"))}},{key:"renderClearIndicator",value:function(){var a=this.getComponents(),s=a.ClearIndicator,o=this.commonProps,l=this.props,c=l.isDisabled,d=l.isLoading,u=this.state.isFocused;if(!this.isClearable()||!s||c||!this.hasValue()||d)return null;var f={onMouseDown:this.onClearIndicatorMouseDown,onTouchEnd:this.onClearIndicatorTouchEnd,"aria-hidden":"true"};return x.createElement(s,ge({},o,{innerProps:f,isFocused:u}))}},{key:"renderLoadingIndicator",value:function(){var a=this.getComponents(),s=a.LoadingIndicator,o=this.commonProps,l=this.props,c=l.isDisabled,d=l.isLoading,u=this.state.isFocused;if(!s||!d)return null;var f={"aria-hidden":"true"};return x.createElement(s,ge({},o,{innerProps:f,isDisabled:c,isFocused:u}))}},{key:"renderIndicatorSeparator",value:function(){var a=this.getComponents(),s=a.DropdownIndicator,o=a.IndicatorSeparator;if(!s||!o)return null;var l=this.commonProps,c=this.props.isDisabled,d=this.state.isFocused;return x.createElement(o,ge({},l,{isDisabled:c,isFocused:d}))}},{key:"renderDropdownIndicator",value:function(){var a=this.getComponents(),s=a.DropdownIndicator;if(!s)return null;var o=this.commonProps,l=this.props.isDisabled,c=this.state.isFocused,d={onMouseDown:this.onDropdownIndicatorMouseDown,onTouchEnd:this.onDropdownIndicatorTouchEnd,"aria-hidden":"true"};return x.createElement(s,ge({},o,{innerProps:d,isDisabled:l,isFocused:c}))}},{key:"renderMenu",value:function(){var a=this,s=this.getComponents(),o=s.Group,l=s.GroupHeading,c=s.Menu,d=s.MenuList,u=s.MenuPortal,f=s.LoadingMessage,h=s.NoOptionsMessage,m=s.Option,b=this.commonProps,g=this.state.focusedOption,p=this.props,v=p.captureMenuScroll,w=p.inputValue,y=p.isLoading,S=p.loadingMessage,j=p.minMenuHeight,k=p.maxMenuHeight,N=p.menuIsOpen,P=p.menuPlacement,D=p.menuPosition,C=p.menuPortalTarget,O=p.menuShouldBlockScroll,A=p.menuShouldScrollIntoView,B=p.noOptionsMessage,M=p.onMenuScrollToTop,F=p.onMenuScrollToBottom;if(!N)return null;var V=function(Y,ee){var W=Y.type,H=Y.data,le=Y.isDisabled,$=Y.isSelected,L=Y.label,G=Y.value,R=g===H,E=le?void 0:function(){return a.onOptionHover(H)},te=le?void 0:function(){return a.selectOption(H)},re="".concat(a.getElementId("option"),"-").concat(ee),ae={id:re,onClick:te,onMouseMove:E,onMouseOver:E,tabIndex:-1,role:"option","aria-selected":a.state.isAppleDevice?void 0:$};return x.createElement(m,ge({},b,{innerProps:ae,data:H,isDisabled:le,isSelected:$,key:re,label:L,type:W,value:G,isFocused:R,innerRef:R?a.getFocusedOptionRef:void 0}),a.formatOptionLabel(Y.data,"menu"))},q;if(this.hasOptions())q=this.getCategorizedOptions().map(function(_){if(_.type==="group"){var Y=_.data,ee=_.options,W=_.index,H="".concat(a.getElementId("group"),"-").concat(W),le="".concat(H,"-heading");return x.createElement(o,ge({},b,{key:H,data:Y,options:ee,Heading:l,headingProps:{id:le,data:_.data},label:a.formatGroupLabel(_.data)}),_.options.map(function($){return V($,"".concat(W,"-").concat($.index))}))}else if(_.type==="option")return V(_,"".concat(_.index))});else if(y){var K=S({inputValue:w});if(K===null)return null;q=x.createElement(f,b,K)}else{var ne=B({inputValue:w});if(ne===null)return null;q=x.createElement(h,b,ne)}var Z={minMenuHeight:j,maxMenuHeight:k,menuPlacement:P,menuPosition:D,menuShouldScrollIntoView:A},T=x.createElement(y$,ge({},b,Z),function(_){var Y=_.ref,ee=_.placerProps,W=ee.placement,H=ee.maxHeight;return x.createElement(c,ge({},b,Z,{innerRef:Y,innerProps:{onMouseDown:a.onMenuMouseDown,onMouseMove:a.onMenuMouseMove},isLoading:y,placement:W}),x.createElement(YL,{captureEnabled:v,onTopArrive:M,onBottomArrive:F,lockEnabled:O},function(le){return x.createElement(d,ge({},b,{innerRef:function(L){a.getMenuListRef(L),le(L)},innerProps:{role:"listbox","aria-multiselectable":b.isMulti,id:a.getElementId("listbox")},isLoading:y,maxHeight:H,focusedOption:g}),q)}))});return C||D==="fixed"?x.createElement(u,ge({},b,{appendTo:C,controlElement:this.controlRef,menuPlacement:P,menuPosition:D}),T):T}},{key:"renderFormField",value:function(){var a=this,s=this.props,o=s.delimiter,l=s.isDisabled,c=s.isMulti,d=s.name,u=s.required,f=this.state.selectValue;if(u&&!this.hasValue()&&!l)return x.createElement(XL,{name:d,onFocus:this.onValueInputFocus});if(!(!d||l))if(c)if(o){var h=f.map(function(g){return a.getOptionValue(g)}).join(o);return x.createElement("input",{name:d,type:"hidden",value:h})}else{var m=f.length>0?f.map(function(g,p){return x.createElement("input",{key:"i-".concat(p),name:d,type:"hidden",value:a.getOptionValue(g)})}):x.createElement("input",{name:d,type:"hidden",value:""});return x.createElement("div",null,m)}else{var b=f[0]?this.getOptionValue(f[0]):"";return x.createElement("input",{name:d,type:"hidden",value:b})}}},{key:"renderLiveRegion",value:function(){var a=this.commonProps,s=this.state,o=s.ariaSelection,l=s.focusedOption,c=s.focusedValue,d=s.isFocused,u=s.selectValue,f=this.getFocusableOptions();return x.createElement(RL,ge({},a,{id:this.getElementId("live-region"),ariaSelection:o,focusedOption:l,focusedValue:c,isFocused:d,selectValue:u,focusableOptions:f,isAppleDevice:this.state.isAppleDevice}))}},{key:"render",value:function(){var a=this.getComponents(),s=a.Control,o=a.IndicatorsContainer,l=a.SelectContainer,c=a.ValueContainer,d=this.props,u=d.className,f=d.id,h=d.isDisabled,m=d.menuIsOpen,b=this.state.isFocused,g=this.commonProps=this.getCommonProps();return x.createElement(l,ge({},g,{className:u,innerProps:{id:f,onKeyDown:this.onKeyDown},isDisabled:h,isFocused:b}),this.renderLiveRegion(),x.createElement(s,ge({},g,{innerRef:this.getControlRef,innerProps:{onMouseDown:this.onControlMouseDown,onTouchEnd:this.onControlTouchEnd},isDisabled:h,isFocused:b,menuIsOpen:m}),x.createElement(c,ge({},g,{isDisabled:h}),this.renderPlaceholderOrValue(),this.renderInput()),x.createElement(o,ge({},g,{isDisabled:h}),this.renderClearIndicator(),this.renderLoadingIndicator(),this.renderIndicatorSeparator(),this.renderDropdownIndicator())),this.renderMenu(),this.renderFormField())}}],[{key:"getDerivedStateFromProps",value:function(a,s){var o=s.prevProps,l=s.clearFocusValueOnUpdate,c=s.inputIsHiddenAfterUpdate,d=s.ariaSelection,u=s.isFocused,f=s.prevWasFocused,h=s.instancePrefix,m=a.options,b=a.value,g=a.menuIsOpen,p=a.inputValue,v=a.isMulti,w=_0(b),y={};if(o&&(b!==o.value||m!==o.options||g!==o.menuIsOpen||p!==o.inputValue)){var S=g?hF(a,w):[],j=g?Q0(Pi(a,w),"".concat(h,"-option")):[],k=l?mF(s,w):null,N=pF(s,S),P=ic(j,N);y={selectValue:w,focusedOption:N,focusedOptionId:P,focusableOptionsWithIds:j,focusedValue:k,clearFocusValueOnUpdate:!1}}var D=c!=null&&a!==o?{inputIsHidden:c,inputIsHiddenAfterUpdate:void 0}:{},C=d,O=u&&f;return u&&!O&&(C={value:Ni(v,w,w[0]||null),options:w,action:"initial-input-focus"},O=!f),d?.action==="initial-input-focus"&&(C=null),me(me(me({},y),D),{},{prevProps:a,ariaSelection:C,prevWasFocused:O})}}]),r})(x.Component);jw.defaultProps=fF;var xF=x.forwardRef(function(e,t){var r=TR(e);return x.createElement(jw,ge({ref:t},r))}),ja=xF;const vF=()=>{const[e,t]=x.useState([]),[r,n]=x.useState([]),[a,s]=x.useState([]),{selectedProduct:o,selectedDate:l}=xu(),[c,d]=x.useState("chart"),[u,f]=x.useState(5),[h,m]=x.useState(["All"]),[b,g]=x.useState("All"),[p,v]=x.useState(0),[w,y]=x.useState(!1),[S,j]=x.useState({label:"All Time",value:"all"});x.useEffect(()=>{(async()=>{try{const O=xe.currentUser;if(!O)return;const A=ue(J,"businesses",O.uid,"finalizedInvoices"),B=await ye(A);let M=0;B.forEach(Z=>{const T=Z.data();(T.cartItems||T.cart||[]).forEach(Y=>{const ee=Number(Y.quantity||0);isNaN(ee)||(M+=ee)})}),v(M);const F={},V=new Date,q=Z=>{if(!S||S.value==="all")return!0;const T=new Date(Z.toDate?Z.toDate():Z),_=new Date(V.getFullYear(),V.getMonth(),V.getDate());if(S.value==="today")return T.toDateString()===_.toDateString();if(S.value==="last7"){const Y=new Date(_);return Y.setDate(Y.getDate()-6),T>=Y&&T<=_}return S.value==="month"?T.getMonth()===_.getMonth()&&T.getFullYear()===_.getFullYear():!0};B.forEach(Z=>{const T=Z.data(),_=T.cartItems||T.cart||[];q(T.timestamp||T.issuedAt)&&_.forEach(Y=>{if(o&&Y.sku!==o)return;const ee=Y.sku||Y.name||Y.id;if(!ee)return;const W=Number(Y.quantity||0);if(W<=0)return;F[ee]||(F[ee]={name:Y.name||"Unnamed",sku:Y.sku||"-",brand:Y.brand||"â€”",unit:Y.unit||"â€”",category:Y.category||"â€”",quantity:0}),F[ee].quantity+=W,F[ee].salesTrend||(F[ee].salesTrend=[]);let H=T.timestamp||T.issuedAt,le;H?.toDate?le=H.toDate():(typeof H=="string"||typeof H=="number")&&(le=new Date(H)),!(!le||isNaN(le))&&F[ee].salesTrend.push({x:le.toISOString(),y:W})})});let K=Object.values(F);h.includes("All")||h.length>0&&(K=K.filter(Z=>h.includes(Z.brand))),b&&b!=="All"&&(K=K.filter(Z=>Z.category===b)),n(Array.from(new Set(K.map(Z=>Z.brand))).filter(Z=>Z&&Z!=="â€”")),s(Array.from(new Set(K.map(Z=>Z.category))).filter(Z=>Z&&Z!=="â€”"));const ne=K.sort((Z,T)=>T.quantity-Z.quantity).slice(0,u).map((Z,T)=>({...Z,rank:T+1}));t(ne)}catch(O){console.error("Error fetching top-selling products:",O)}})()},[o,l,u,h,b,S]);const k=e.reduce((C,O)=>C+O.quantity,0),N={};e.forEach(C=>{N[C.brand]=(N[C.brand]||0)+C.quantity});const P=Object.entries(N).sort((C,O)=>O[1]-C[1])[0]?.[0]||"N/A",D={control:(C,O)=>({...C,background:"rgba(255,255,255,0.10)",borderColor:"rgba(255,255,255,0.20)",boxShadow:O.isFocused?"0 0 0 2px rgba(16,185,129,0.50)":"none",":hover":{borderColor:"rgba(255,255,255,0.30)"},color:"#fff"}),menu:C=>({...C,background:"rgba(11,15,20,0.90)",backdropFilter:"blur(12px)",border:"1px solid rgba(255,255,255,0.10)",boxShadow:"0 12px 40px rgba(0,0,0,0.45)",zIndex:1e3}),menuList:C=>({...C,padding:4}),option:(C,O)=>({...C,backgroundColor:O.isSelected?"rgba(16,185,129,0.25)":O.isFocused?"rgba(255,255,255,0.10)":"transparent",color:"#fff"}),singleValue:C=>({...C,color:"#fff"}),multiValue:C=>({...C,background:"rgba(255,255,255,0.12)",border:"1px solid rgba(255,255,255,0.20)"}),multiValueLabel:C=>({...C,color:"#fff"}),multiValueRemove:C=>({...C,color:"#fff",":hover":{background:"rgba(239,68,68,0.30)",color:"#fff"}}),input:C=>({...C,color:"#fff"}),placeholder:C=>({...C,color:"rgba(255,255,255,0.60)"}),indicatorSeparator:C=>({...C,backgroundColor:"rgba(255,255,255,0.20)"}),dropdownIndicator:C=>({...C,color:"#fff"}),clearIndicator:C=>({...C,color:"#fff"}),valueContainer:C=>({...C,paddingTop:2,paddingBottom:2})};return i.jsxs("div",{className:"p-5 rounded-lg bg-white/10 backdrop-blur-xl border border-white/10 shadow-[0_8px_40px_rgba(0,0,0,0.35)] text-white",children:[i.jsx("h2",{className:"text-xl font-semibold mb-4 bg-clip-text text-transparent bg-gradient-to-r from-white via-white to-emerald-200",children:"Top Selling Products"}),i.jsxs("div",{className:"flex gap-4 mb-3 flex-wrap",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-white/80",children:"Top N Products:"}),i.jsx("input",{type:"number",min:"1",max:"50",value:u||"",placeholder:"Enter number",onChange:C=>{const O=C.target.value;if(O==="")f("");else{const A=Number(O);isNaN(A)||f(A)}},className:"rounded px-2 py-1 w-24 text-sm bg-white/10 border border-white/20 text-white placeholder-white/60 focus:outline-none focus:ring-2 focus:ring-emerald-400/50"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1 text-white/80",children:"Filter by Brand:"}),i.jsx(ja,{isMulti:!0,options:[{label:"All Brands",value:"All"},...r.map(C=>({label:C,value:C}))],value:h.includes("All")?[{label:"All Brands",value:"All"}]:h.map(C=>({label:C,value:C})),onChange:C=>{C.some(O=>O.value==="All")?m(["All"]):m(C.map(O=>O.value))},placeholder:"Select brands...",className:"min-w-[180px] text-sm",styles:D,classNamePrefix:"rs"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1 text-white/80",children:"Filter by Category:"}),i.jsx(ja,{options:[{label:"All Categories",value:"All"},...a.map(C=>({label:C,value:C}))],value:b&&b!=="All"?{label:b,value:b}:{label:"All Categories",value:"All"},onChange:C=>g(C?C.value:"All"),placeholder:"Select category...",className:"min-w-[180px] text-sm",styles:D,classNamePrefix:"rs"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1 text-white/80",children:"Time Range:"}),i.jsx(ja,{options:[{label:"Today",value:"today"},{label:"Last 7 Days",value:"last7"},{label:"This Month",value:"month"},{label:"All Time",value:"all"}],value:S?{label:S.label,value:S.value}:null,onChange:C=>j(C),placeholder:"Select time range...",className:"min-w-[160px] text-sm",styles:D,classNamePrefix:"rs"})]})]}),i.jsxs("div",{className:"flex justify-end mb-2",children:[i.jsx("button",{onClick:()=>d(c==="chart"?"table":"chart"),className:"text-sm px-3 py-1 rounded-xl font-medium text-slate-900 bg-gradient-to-r from-emerald-400 via-teal-300 to-cyan-400 hover:shadow-[0_8px_24px_rgba(16,185,129,0.35)]",children:c==="chart"?"Show as Table":"Show as Chart"}),i.jsx("button",{onClick:()=>y(!w),className:"text-sm px-3 py-1 rounded-xl font-medium ml-2 text-slate-900 bg-gradient-to-r from-emerald-400 via-teal-300 to-cyan-400 hover:shadow-[0_8px_24px_rgba(16,185,129,0.35)]",children:w?"Stop Animation":"Play Animation"})]}),e.length===0?i.jsx("p",{className:"text-white/70",children:"No data available"}):i.jsxs(i.Fragment,{children:[c==="chart"?i.jsxs(ss,{width:"100%",height:300,children:[i.jsxs(ms,{data:e,children:[i.jsx(Xd,{strokeDasharray:"3 3"}),i.jsx(Xa,{dataKey:"name"}),i.jsx(Za,{}),i.jsx(zd,{content:({active:C,payload:O})=>{if(C&&O&&O.length){const A=O[0].payload;return i.jsxs("div",{className:"rounded px-3 py-2 text-sm border border-white/10 bg-[#0B0F14]/80 backdrop-blur-xl text-white",children:[i.jsx("p",{className:"font-semibold",children:A.name}),i.jsxs("p",{children:["Brand: ",A.brand]}),i.jsxs("p",{children:["SKU: ",A.sku]}),i.jsxs("p",{children:["Unit: ",A.unit]}),i.jsxs("p",{children:["Items Sold: ",A.quantity]})]})}return null}}),i.jsx(_a,{dataKey:"quantity",fill:"#4f46e5",radius:[4,4,0,0],isAnimationActive:w,children:e.map(C=>i.jsx("text",{x:0,y:0,dy:-10,dx:-10,fill:"#4f46e5",fontWeight:"bold",fontSize:14,textAnchor:"middle",children:C.rank},`rank-${C.rank}`))})]}),i.jsx("div",{className:"flex justify-between mt-2 px-6",children:e.map(C=>i.jsxs("div",{className:"text-white/80 font-bold text-sm",style:{width:`${100/e.length}%`,textAlign:"center"},children:["#",C.rank]},C.rank))})]}):i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full border border-white/10 bg-white/5 backdrop-blur-xl rounded-xl overflow-hidden",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"bg-white/10",children:[i.jsx("th",{className:"px-3 py-2 text-left text-sm font-semibold text-white/80 border-b border-white/10",children:"Rank"}),i.jsx("th",{className:"px-3 py-2 text-left text-sm font-semibold text-white/80 border-b border-white/10",children:"Product Name"}),i.jsx("th",{className:"px-3 py-2 text-left text-sm font-semibold text-white/80 border-b border-white/10",children:"SKU"}),i.jsx("th",{className:"px-3 py-2 text-left text-sm font-semibold text-white/80 border-b border-white/10",children:"Brand"}),i.jsx("th",{className:"px-3 py-2 text-left text-sm font-semibold text-white/80 border-b border-white/10",children:"Unit"}),i.jsx("th",{className:"px-3 py-2 text-left text-sm font-semibold text-white/80 border-b border-white/10",children:"Items Sold"}),i.jsx("th",{className:"px-3 py-2 text-left text-sm font-semibold text-white/80 border-b border-white/10",children:"Sales Trend"})]})}),i.jsx("tbody",{children:e.map(C=>i.jsxs("tr",{className:"hover:bg-white/5 border-t border-white/10",children:[i.jsx("td",{className:"px-3 py-2 text-sm border-t border-white/10",children:C.rank}),i.jsx("td",{className:"px-3 py-2 text-sm border-t border-white/10",children:C.name}),i.jsx("td",{className:"px-3 py-2 text-sm border-t border-white/10",children:C.sku}),i.jsx("td",{className:"px-3 py-2 text-sm border-t border-white/10",children:C.brand}),i.jsx("td",{className:"px-3 py-2 text-sm border-t border-white/10",children:C.unit}),i.jsx("td",{className:"px-3 py-2 text-sm border-t border-white/10",children:C.quantity}),i.jsx("td",{className:"px-3 py-2 text-sm border-t border-white/10",children:i.jsx(ss,{width:80,height:30,children:i.jsx(ms,{data:C.salesTrend||[],children:i.jsx(_a,{dataKey:"y",fill:"#8884d8"})})})})]},C.rank))})]})}),i.jsxs("div",{className:"mt-4 border-t border-white/10 pt-3 text-sm text-white/90 flex justify-between flex-wrap gap-6",children:[i.jsxs("div",{children:[i.jsxs("p",{children:[i.jsx("span",{className:"font-semibold",children:"Total Items Sold (Filtered):"})," ",k]}),i.jsxs("p",{children:[i.jsx("span",{className:"font-semibold",children:"Top Brand:"})," ",P]})]}),i.jsx("div",{children:i.jsxs("p",{children:[i.jsx("span",{className:"font-semibold",children:"All Time Items Sold:"})," ",p]})})]})]})]})},bF=()=>{const[e,t]=x.useState(!0),[r,n]=x.useState(0),[a,s]=x.useState(0),[o,l]=x.useState([]),[c,d]=x.useState([]),[u,f]=x.useState([]),[h,m]=x.useState("All"),[b,g]=x.useState("All"),[p,v]=x.useState(null),[w,y]=x.useState(null),[S,j]=x.useState(null),[k,N]=x.useState(0),[P,D]=x.useState({margin:"list",revenue:"list",lowMargin:"list",profit:"list"}),[C,O]=x.useState(5),[A,B]=x.useState(""),[M,F]=x.useState(""),V={control:(q,K)=>({...q,background:"rgba(255,255,255,0.10)",borderColor:"rgba(255,255,255,0.20)",boxShadow:K.isFocused?"0 0 0 2px rgba(16,185,129,0.50)":"none",":hover":{borderColor:"rgba(255,255,255,0.30)"},color:"#fff"}),menu:q=>({...q,background:"rgba(11,15,20,0.90)",backdropFilter:"blur(12px)",border:"1px solid rgba(255,255,255,0.10)",boxShadow:"0 12px 40px rgba(0,0,0,0.45)",zIndex:1e3}),menuList:q=>({...q,padding:4}),option:(q,K)=>({...q,backgroundColor:K.isSelected?"rgba(16,185,129,0.25)":K.isFocused?"rgba(255,255,255,0.10)":"transparent",color:"#fff"}),singleValue:q=>({...q,color:"#fff"}),input:q=>({...q,color:"#fff"}),placeholder:q=>({...q,color:"rgba(255,255,255,0.60)"}),indicatorSeparator:q=>({...q,backgroundColor:"rgba(255,255,255,0.20)"}),dropdownIndicator:q=>({...q,color:"#fff"}),clearIndicator:q=>({...q,color:"#fff"}),valueContainer:q=>({...q,paddingTop:2,paddingBottom:2})};return x.useEffect(()=>{(async()=>{t(!0);const K=xe.currentUser;if(!K)return;const ne=ue(J,"businesses",K.uid,"finalizedInvoices"),Z=ue(J,"businesses",K.uid,"products"),[T,_]=await Promise.all([ye(ne),ye(Z)]),Y={};_.forEach(Q=>{Y[Q.id]=Q.data()});const ee=[...new Set(Object.values(Y).map(Q=>Q.brand).filter(Boolean))],W=[...new Set(Object.values(Y).map(Q=>Q.category).filter(Boolean))];let H=0,le=0;const $={};T.forEach(Q=>{const oe=Q.data();if(oe.paymentMode==="credit"&&oe.isPaid!==!0||A&&new Date(oe.createdAt)<new Date(A)||M&&new Date(oe.createdAt)>new Date(M))return;const Ee=Number(oe.totalAmount)||0;H+=Ee,(Array.isArray(oe.cartItems)?oe.cartItems:[]).forEach(rt=>{const mt=Y[rt.id];if(!mt)return;const I=Number(mt.costPrice||0),X=Number(rt.price||0),fe=Number(rt.quantity||0),ce=(X-I)*fe,be=X*fe;le+=ce;const je=rt.sku||rt.name;$[je]||($[je]={name:rt.name,sku:rt.sku,brand:mt.brand||"â€”",unit:mt.unit||"â€”",profit:0,revenue:0,margin:0,cost:0}),$[je].profit+=ce,$[je].revenue+=be,$[je].cost=$[je].revenue-$[je].profit})});const L=Object.values($).map(Q=>({...Q,margin:Q.revenue>0?Q.profit/Q.revenue*100:0})).sort((Q,oe)=>oe.profit-Q.profit),G=L.reduce((Q,oe)=>Q.margin>oe.margin?Q:oe),R=L.reduce((Q,oe)=>Q.revenue>oe.revenue?Q:oe),E=L.filter(Q=>Q.margin>30).sort((Q,oe)=>Q.revenue-oe.revenue)[0],ae=L.slice(0,3).reduce((Q,oe)=>Q+oe.profit,0)/le*100;n(H),s(le),l(L),v(G),y(R),j(E),N(ae),d(ee),f(W),t(!1)})()},[A,M]),e?i.jsx("div",{className:"p-5 text-white",children:"Loading Profit Insights..."}):i.jsxs("div",{className:"p-6 rounded-lg bg-white/10 backdrop-blur-xl border border-white/10 shadow-[0_8px_40px_rgba(0,0,0,0.35)] text-white",children:[i.jsx("h2",{className:"text-2xl font-bold mb-6 bg-clip-text text-transparent bg-gradient-to-r from-white via-white to-emerald-200",children:"ðŸ“ˆ Profit Insights"}),i.jsxs("div",{className:"flex flex-wrap gap-4 mb-6 items-center",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1 text-white/80",children:"Top N Products"}),i.jsx("input",{type:"number",min:1,value:C,onChange:q=>O(Number(q.target.value)),className:"rounded px-2 py-1 w-24 bg-white/10 border border-white/20 text-white placeholder-white/60 focus:outline-none focus:ring-2 focus:ring-emerald-400/50"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1 text-white/80",children:"Filter by Brand"}),i.jsx(ja,{options:[{label:"All Brands",value:"All"},...c.map(q=>({label:q,value:q}))],value:{label:h,value:h},onChange:q=>m(q.value),className:"min-w-[180px] text-sm",styles:V,classNamePrefix:"rs"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1 text-white/80",children:"Filter by Category"}),i.jsx(ja,{options:[{label:"All Categories",value:"All"},...u.map(q=>({label:q,value:q}))],value:{label:b,value:b},onChange:q=>g(q.value),className:"min-w-[180px] text-sm",styles:V,classNamePrefix:"rs"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1 text-white/80",children:"From"}),i.jsx("input",{type:"date",value:A,onChange:q=>B(q.target.value),className:"rounded px-2 py-1 bg-white/10 border border-white/20 text-white focus:outline-none focus:ring-2 focus:ring-emerald-400/50"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1 text-white/80",children:"To"}),i.jsx("input",{type:"date",value:M,onChange:q=>F(q.target.value),className:"rounded px-2 py-1 bg-white/10 border border-white/20 text-white focus:outline-none focus:ring-2 focus:ring-emerald-400/50"})]})]}),i.jsx("div",{className:"flex flex-col gap-6",children:[{key:"margin",title:"ðŸ” Highest Margin Products",data:[...o].sort((q,K)=>K.margin-q.margin)},{key:"revenue",title:"ðŸ’° Most Revenue Products",data:[...o].sort((q,K)=>K.revenue-q.revenue)}].map(q=>i.jsxs("div",{className:"shadow rounded p-4 bg-white/10 backdrop-blur-xl border border-white/10",children:[i.jsxs("div",{className:"flex justify-between items-center mb-2",children:[i.jsx("h3",{className:"font-semibold text-white",children:q.title}),i.jsx("button",{className:"text-sm px-3 py-1 rounded-xl font-medium text-slate-900 bg-gradient-to-r from-emerald-400 via-teal-300 to-cyan-400 hover:shadow-[0_8px_24px_rgba(16,185,129,0.35)]",onClick:()=>D(K=>({...K,[q.key]:K[q.key]==="list"?"chart":"list"})),children:P[q.key]==="list"?"ðŸ“Š Chart":"ðŸ“‹ List"})]}),P[q.key]==="list"?i.jsx("div",{className:"space-y-3 max-h-[300px] overflow-y-auto pr-1",children:q.data.slice(0,C).map((K,ne)=>i.jsxs("div",{className:"flex justify-between items-center border-b border-white/10 pb-2 hover:bg-white/5 rounded",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-medium text-white",children:K.name}),i.jsxs("p",{className:"text-xs text-white/70",children:["Revenue: â‚¹",K.revenue?.toFixed(2)]})]}),i.jsxs("div",{className:"text-right",children:[i.jsxs("p",{className:"font-semibold text-emerald-300",children:["Profit: â‚¹",K.profit?.toFixed(2)]}),i.jsxs("p",{className:"text-xs text-white/70",children:["Margin: ",K.margin?.toFixed(1),"%"]})]})]},ne))}):i.jsx(ss,{width:"100%",height:220,children:i.jsxs(ms,{data:q.data.slice(0,C),children:[i.jsx(Xa,{dataKey:"name"}),i.jsx(Za,{}),i.jsx(zd,{}),i.jsx(_a,{dataKey:"profit",fill:"#22c55e",name:"Profit"})]})})]},q.key))}),i.jsxs("p",{className:"text-white",children:[i.jsx("strong",{children:"Total Revenue:"})," â‚¹",r.toFixed(2)]}),i.jsxs("p",{className:"text-white",children:[i.jsx("strong",{children:"Total Profit:"})," â‚¹",a.toFixed(2)]}),i.jsxs("p",{className:"text-white",children:[i.jsx("strong",{children:"Profit Margin:"})," ",(a/r*100).toFixed(1),"%"]})]})},yF=()=>{const[e,t]=x.useState([]),[r,n]=x.useState(30);return x.useEffect(()=>{(async()=>{try{const s=xe.currentUser;if(!s)return;const o=ue(J,"businesses",s.uid,"finalizedInvoices"),l=await ye(o),c=new Date,d=new Date;d.setDate(c.getDate()-r);const u={};l.forEach(h=>{const m=h.data(),b=m.createdAt?.toDate?.()??(typeof m.createdAt=="string"||typeof m.createdAt=="number"?new Date(m.createdAt):null);if(!b||b<d)return;(m.cart||m.cartItems||[]).forEach(p=>{const v=p.inventoryId||p.id;v&&(u[v]||(u[v]=0),u[v]+=Number(p.quantity||0))})});const f=[];for(const h of Object.keys(u)){const m=ve(J,"businesses",s.uid,"products",h),b=await Yt(m);if(!b.exists())continue;const g=b.data(),p=g.quantity||0,v=u[h],w=v/r,y=w*r,S=Math.max(0,y-p);f.push({name:g.name,sku:g.sku,sold:v,avgDailySales:Math.round(w),currentStock:p,recommendedStock:y,reorderQty:S})}t(f)}catch(s){console.error("Error forecasting inventory:",s)}})()},[r]),i.jsxs("div",{className:"p-5 rounded-lg bg-white/10 backdrop-blur-xl border border-white/10 shadow-[0_8px_40px_rgba(0,0,0,0.35)] text-white",children:[i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{className:"text-sm font-medium mr-2 text-white/80",children:"Select Time Range:"}),i.jsxs("select",{value:r,onChange:a=>n(Number(a.target.value)),className:"rounded px-2 py-1 bg-white/10 border border-white/20 text-white focus:outline-none focus:ring-2 focus:ring-emerald-400/50",children:[i.jsx("option",{value:7,children:"Last 7 Days"}),i.jsx("option",{value:15,children:"Last 15 Days"}),i.jsx("option",{value:30,children:"Last 30 Days"}),i.jsx("option",{value:90,children:"Last 3 Months"}),i.jsx("option",{value:180,children:"Last 6 Months"}),i.jsx("option",{value:365,children:"Last 1 Year"})]})]}),i.jsx("h2",{className:"text-xl font-semibold mb-4 bg-clip-text text-transparent bg-gradient-to-r from-white via-white to-emerald-200",children:"Inventory Forecast"}),e.length===0?i.jsx("p",{className:"text-white/70",children:"No sales data available for the selected period."}):i.jsxs("table",{className:"min-w-full text-sm border border-white/10 bg-white/5 backdrop-blur-xl rounded-xl overflow-hidden",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"bg-white/10 text-left border-b border-white/10",children:[i.jsx("th",{className:"p-2 text-white/80",children:"Product"}),i.jsx("th",{className:"p-2 text-white/80",children:"Sold"}),i.jsx("th",{className:"p-2 text-white/80",children:"Daily Velocity"}),i.jsx("th",{className:"p-2 text-white/80",children:"Stock"}),i.jsx("th",{className:"p-2 text-white/80",children:"Recommended"}),i.jsx("th",{className:"p-2 text-white/80",children:"Reorder"})]})}),i.jsx("tbody",{children:e.map((a,s)=>i.jsxs("tr",{className:"border-b border-white/10 hover:bg-white/5",children:[i.jsxs("td",{className:"p-2 text-white/90",children:[a.name," (",a.sku,")"]}),i.jsx("td",{className:"p-2 text-white/90",children:a.sold}),i.jsx("td",{className:"p-2 text-white/90",children:a.avgDailySales}),i.jsx("td",{className:"p-2 text-white/90",children:a.currentStock}),i.jsx("td",{className:"p-2 text-white/90",children:a.recommendedStock}),i.jsx("td",{className:`p-2 ${a.reorderQty>0?"text-rose-300 font-semibold":"text-white/60"}`,children:a.reorderQty})]},s))})]})]})},wF=()=>{const[e,t]=x.useState({});return x.useEffect(()=>{(async()=>{try{const n=xe.currentUser;if(!n)return;const a=ue(J,"businesses",n.uid,"finalizedInvoices"),s=await ye(a),o={};s.forEach(l=>{const d=l.data().invoiceType||"Unspecified";o[d]||(o[d]=0),o[d]+=1}),t(o)}catch(n){console.error("Error fetching invoice type breakdown:",n)}})()},[]),i.jsxs("div",{className:"p-5 rounded-lg bg-white/10 backdrop-blur-xl border border-white/10 shadow-[0_8px_40px_rgba(0,0,0,0.35)] text-white",children:[i.jsx("h2",{className:"text-xl font-semibold mb-4 bg-clip-text text-transparent bg-gradient-to-r from-white via-white to-emerald-200",children:"Invoice Type Breakdown"}),Object.keys(e).length===0?i.jsx("p",{className:"text-white/70",children:"No invoices found."}):i.jsx("ul",{className:"list-disc list-inside space-y-1 marker:text-emerald-300",children:Object.entries(e).map(([r,n],a)=>i.jsxs("li",{className:"text-white/90",children:[r,": ",n," invoice",n>1?"s":""]},a))})]})},jF=()=>{const[e,t]=x.useState({});return x.useEffect(()=>{(async()=>{try{const n=xe.currentUser;if(!n)return;const a=ue(J,"businesses",n.uid,"finalizedInvoices"),s=await ye(a),o={};for(let l=0;l<30;l++){const c=En(OR(new Date,l),"yyyy-MM-dd");o[c]=0}s.forEach(l=>{const c=l.data();if(!c.createdAt||!c.totalAmount)return;const d=c.createdAt.toDate?c.createdAt.toDate():new Date(c.createdAt),u=En(d,"yyyy-MM-dd");o[u]!==void 0&&(o[u]+=c.totalAmount)}),t(o)}catch(n){console.error("Error fetching daily sales:",n)}})()},[]),i.jsxs("div",{className:"p-5 rounded-lg bg-white/10 backdrop-blur-xl border border-white/10 shadow-[0_8px_40px_rgba(0,0,0,0.35)] text-white",children:[i.jsx("h2",{className:"text-xl font-semibold mb-4 bg-clip-text text-transparent bg-gradient-to-r from-white via-white to-emerald-200",children:"Sales Growth (Last 30 Days)"}),i.jsx("div",{className:"grid grid-cols-5 gap-2 text-center text-sm",children:Object.entries(e).map(([r,n],a)=>i.jsxs("div",{className:"p-2 rounded border border-white/10 bg-white/5 hover:bg-white/10 transition",children:[i.jsx("div",{className:"font-medium text-white/90",children:En(new Date(r),"MMM d")}),i.jsxs("div",{className:"font-semibold text-emerald-300",children:["â‚¹",n.toFixed(0)]})]},a))})]})},NF=()=>{const[e,t]=x.useState([]);return x.useEffect(()=>{(async()=>{try{const n=xe.currentUser;if(!n)return;const a=ue(J,"businesses",n.uid,"finalizedInvoices"),s=ue(J,"businesses",n.uid,"products"),o=await ye(a),l=await ye(s);let c=0;const d={},u=[];o.forEach(b=>{const g=b.data();c+=g.totalAmount||0,(g.cart||[]).forEach(v=>{const w=v.sku||v.name;w&&(d[w]||(d[w]=0),d[w]+=v.quantity||0)})}),l.forEach(b=>{const g=b.data();(g.quantity||0)<10&&u.push(g.name)});const f=Object.entries(d).sort((b,g)=>g[1]-b[1]).slice(0,2).map(([b,g])=>`Consider bundling "${b}" in offers. High sales volume.`),h=u.map(b=>`Restock soon: "${b}" is running low.`),m=[`ðŸ§  Total Revenue so far: â‚¹${c.toFixed(0)}.`,...f,...h];t(m)}catch(n){console.error("Error generating smart suggestions:",n)}})()},[]),i.jsxs("div",{className:"p-5 rounded-lg bg-white/10 backdrop-blur-xl border border-white/10 shadow-[0_8px_40px_rgba(0,0,0,0.35)] text-white",children:[i.jsx("h2",{className:"text-xl font-semibold mb-4 bg-clip-text text-transparent bg-gradient-to-r from-white via-white to-emerald-200",children:"Smart Suggestions"}),i.jsxs("ul",{className:"list-disc list-inside space-y-1 marker:text-emerald-300",children:[e.map((r,n)=>i.jsx("li",{className:"text-white/90",children:r},n)),e.length===0&&i.jsx("li",{className:"text-white/70",children:"Generating suggestions..."})]})]})},SF=({chatHistory:e,currentQuery:t,setCurrentQuery:r,onSendQuery:n,isLoading:a})=>{const[s,o]=x.useState(""),l=x.useRef(null),c=x.useRef(null),d=()=>{if(l.current){const h=l.current.closest(".overflow-y-auto");h&&(h.scrollTop=h.scrollHeight)}};x.useEffect(()=>{d()},[e]),x.useEffect(()=>{t&&(o(t),r(""))},[t,r]);const u=h=>{h.preventDefault(),s.trim()&&!a&&(n(s.trim()),o(""))},f=h=>{h.key==="Enter"&&!h.shiftKey&&(h.preventDefault(),u(h))};return i.jsxs("div",{className:"h-[600px] flex flex-col bg-white/10 backdrop-blur-xl border border-white/20 rounded-xl overflow-hidden shadow-lg",children:[i.jsx("div",{className:"p-4 border-b border-white/20 bg-white/5",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"w-8 h-8 rounded-lg bg-gradient-to-r from-emerald-400 via-teal-300 to-cyan-400 flex items-center justify-center shadow-lg shadow-emerald-400/25",children:i.jsx("span",{className:"text-sm font-bold text-slate-900",children:"AI"})}),i.jsx("div",{className:"absolute -top-1 -right-1 w-2 h-2 bg-emerald-400 rounded-full animate-ping"})]}),i.jsxs("div",{className:"flex-1",children:[i.jsx("h3",{className:"text-base font-bold text-white",children:"Analytics Assistant"}),i.jsx("p",{className:"text-xs text-white/60",children:"AI-powered business intelligence"})]}),i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx("div",{className:"w-1.5 h-1.5 bg-emerald-400 rounded-full animate-pulse"}),i.jsx("span",{className:"text-xs text-emerald-300 font-medium",children:"Online"})]})]})}),i.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[i.jsx(Ue,{children:e.map(h=>i.jsx(U.div,{initial:{opacity:0,y:10,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-10,scale:.95},transition:{duration:.2,ease:"easeOut"},className:`flex ${h.type==="user"?"justify-end":"justify-start"}`,children:i.jsxs("div",{className:`max-w-[80%] p-3 rounded-lg ${h.type==="user"?"bg-emerald-500 text-slate-900":"bg-white/10 text-white border border-white/20"}`,children:[i.jsx("div",{className:"text-sm leading-relaxed whitespace-pre-wrap",children:h.content}),h.data&&i.jsxs(U.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},transition:{duration:.2,delay:.1},className:"mt-2 p-2 bg-black/20 rounded-lg border border-white/10",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx("div",{className:"w-1 h-3 bg-cyan-400 rounded-full"}),i.jsx("span",{className:"text-xs font-semibold text-cyan-300",children:"Data Summary"})]}),i.jsx("div",{className:"space-y-1",children:Object.entries(h.data).map(([m,b])=>{const g=p=>{if(p==null)return"-";if(typeof p=="number")return p.toLocaleString();if(typeof p=="string")return p;if(Array.isArray(p))return`${p.length} items`;if(typeof p=="object")try{const v=JSON.stringify(p);return v.length>60?v.slice(0,57)+"â€¦":v}catch{return"[object]"}return String(p)};return i.jsxs("div",{className:"flex justify-between items-center py-0.5 gap-2",children:[i.jsxs("span",{className:"text-xs capitalize text-white/80 truncate",children:[m.replace(/([A-Z])/g," $1"),":"]}),i.jsx("span",{className:"text-xs font-mono text-white font-medium truncate max-w-[50%] text-right",children:g(b)})]},m)})})]}),i.jsxs("div",{className:"flex items-center justify-between mt-2 pt-1 border-t border-white/10",children:[i.jsx("div",{className:"text-xs opacity-60",children:new Date(h.timestamp).toLocaleTimeString()}),h.type==="ai"&&i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx("div",{className:"w-1 h-1 bg-emerald-400 rounded-full"}),i.jsx("span",{className:"text-xs text-emerald-300",children:"AI"})]})]})]})},h.id))}),a&&i.jsx(U.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"flex justify-start",children:i.jsx("div",{className:"bg-white/10 text-white border border-white/20 p-3 rounded-lg backdrop-blur-xl",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("div",{className:"flex space-x-1",children:[i.jsx(U.div,{className:"w-1.5 h-1.5 bg-emerald-400 rounded-full",animate:{scale:[1,1.2,1],opacity:[.5,1,.5]},transition:{duration:1,repeat:1/0,delay:0}}),i.jsx(U.div,{className:"w-1.5 h-1.5 bg-cyan-400 rounded-full",animate:{scale:[1,1.2,1],opacity:[.5,1,.5]},transition:{duration:1,repeat:1/0,delay:.2}}),i.jsx(U.div,{className:"w-1.5 h-1.5 bg-teal-400 rounded-full",animate:{scale:[1,1.2,1],opacity:[.5,1,.5]},transition:{duration:1,repeat:1/0,delay:.4}})]}),i.jsx("span",{className:"text-xs font-medium",children:"AI is analyzing..."})]})})}),i.jsx("div",{ref:l})]}),i.jsx("div",{className:"p-4 border-t border-white/20 bg-white/5",children:i.jsxs("form",{onSubmit:u,className:"flex gap-2",children:[i.jsx("div",{className:"flex-1 relative",children:i.jsx("input",{ref:c,type:"text",value:s,onChange:h=>o(h.target.value),onKeyPress:f,placeholder:"Ask about sales, profit, inventory...",className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/60 focus:outline-none focus:ring-2 focus:ring-emerald-400/50 text-sm",disabled:a})}),i.jsx(U.button,{type:"submit",disabled:!s.trim()||a,whileHover:{scale:1.02},whileTap:{scale:.98},className:"px-4 py-2 bg-emerald-500 text-slate-900 rounded-lg hover:bg-emerald-400 disabled:opacity-50 disabled:cursor-not-allowed transition-colors text-sm font-medium flex items-center gap-2",children:a?i.jsxs(i.Fragment,{children:[i.jsx(U.div,{className:"w-3 h-3 border-2 border-slate-900 border-t-transparent rounded-full",animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"}}),"Analyzing..."]}):"Send"})]})})]})},kF=({config:e,data:t,title:r})=>{const n=Array.isArray(t)?t:Array.isArray(e?.data)?e.data:[],a=()=>{if(!e)return null;switch(e.type){case"line":return i.jsx(PF,{data:n,config:e});case"bar":return i.jsx(OF,{data:n,config:e});case"pie":return i.jsx(CF,{data:n,config:e});case"number":return i.jsx(AF,{data:t,config:e});case"table":return i.jsx(DF,{data:n,config:e});default:return i.jsx("div",{className:"text-white/60 text-center py-8",children:"Chart type not supported"})}};return i.jsxs(U.div,{initial:{opacity:0,scale:.95,y:10},animate:{opacity:1,scale:1,y:0},transition:{duration:.3,ease:"easeOut"},whileHover:{scale:1.01,y:-2},className:"bg-white/10 backdrop-blur-xl border border-white/20 rounded-xl p-4 h-80 overflow-hidden shadow-lg relative group",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"w-1 h-4 bg-gradient-to-b from-emerald-400 to-cyan-400 rounded-full"}),i.jsx("h4",{className:"font-semibold text-white text-sm truncate",children:r})]}),i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx("div",{className:"w-1.5 h-1.5 bg-emerald-400 rounded-full animate-pulse"}),i.jsx("span",{className:"text-xs text-emerald-300 font-medium",children:"Live"})]})]}),i.jsx("div",{className:"h-full overflow-auto",children:a()})]})},PF=({data:e,config:t})=>{if(!Array.isArray(e)||e.length===0)return i.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-white/50",children:[i.jsx("div",{className:"w-16 h-16 rounded-full bg-white/5 flex items-center justify-center mb-3",children:i.jsx("div",{className:"w-8 h-8 border-2 border-white/20 border-t-transparent rounded-full animate-spin"})}),i.jsx("div",{className:"text-sm",children:"No data available"})]});const r=e.map(o=>Number(o.value)||0),n=Math.max(...r),a=Math.min(...r),s=Math.max(1,n-a);return i.jsxs("div",{className:"h-full flex flex-col",children:[i.jsxs("div",{className:"flex justify-between items-center mb-2",children:[i.jsxs("div",{className:"text-xs text-emerald-300 font-medium",children:["Max: ",n.toLocaleString()]}),i.jsxs("div",{className:"text-xs text-cyan-300 font-medium",children:["Min: ",a.toLocaleString()]})]}),i.jsx("div",{className:"flex-1 relative",children:i.jsxs("svg",{className:"w-full h-full",viewBox:"0 0 300 200",children:[i.jsxs("defs",{children:[i.jsx("pattern",{id:"grid",width:"20",height:"20",patternUnits:"userSpaceOnUse",children:i.jsx("path",{d:"M 20 0 L 0 0 0 20",fill:"none",stroke:"rgba(255,255,255,0.05)",strokeWidth:"1"})}),i.jsxs("linearGradient",{id:"lineGradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[i.jsx("stop",{offset:"0%",stopColor:"#10b981"}),i.jsx("stop",{offset:"50%",stopColor:"#06b6d4"}),i.jsx("stop",{offset:"100%",stopColor:"#8b5cf6"})]}),i.jsxs("linearGradient",{id:"areaGradient",x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[i.jsx("stop",{offset:"0%",stopColor:"rgba(16, 185, 129, 0.3)"}),i.jsx("stop",{offset:"100%",stopColor:"rgba(6, 182, 212, 0.1)"})]})]}),i.jsx("rect",{width:"100%",height:"100%",fill:"url(#grid)"}),i.jsx("path",{d:`M 10 190 ${e.map((o,l)=>{const c=l/(e.length-1)*280+10,d=190-(o.value-a)/s*170;return`L ${c} ${d}`}).join(" ")} L 290 190 Z`,fill:"url(#areaGradient)"}),i.jsx(U.path,{d:e.map((o,l)=>{const c=l/(e.length-1)*280+10,d=190-(o.value-a)/s*170;return`${l===0?"M":"L"} ${c} ${d}`}).join(" "),fill:"none",stroke:"url(#lineGradient)",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",initial:{pathLength:0},animate:{pathLength:1},transition:{duration:2,ease:"easeInOut"}}),e.map((o,l)=>{const c=l/(e.length-1)*280+10,d=190-(o.value-a)/s*170;return i.jsx(U.circle,{cx:c,cy:d,r:"4",fill:"#10b981",initial:{scale:0,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.5,delay:l*.1},className:"hover:r-6 transition-all duration-300 cursor-pointer",children:i.jsxs("title",{children:[o.label||o.date||`Point ${l+1}`,": ",o.value]})},l)})]})}),i.jsx("div",{className:"flex justify-between text-xs text-white/60 mt-3",children:e.map((o,l)=>i.jsx("span",{className:"truncate font-medium",children:o.label||o.date||`P${l+1}`},l))})]})},OF=({data:e,config:t})=>{if(!Array.isArray(e)||e.length===0)return i.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-white/50",children:[i.jsx("div",{className:"w-16 h-16 rounded-full bg-white/5 flex items-center justify-center mb-3",children:i.jsx("div",{className:"w-8 h-8 border-2 border-white/20 border-t-transparent rounded-full animate-spin"})}),i.jsx("div",{className:"text-sm",children:"No data available"})]});const r=Math.max(...e.map(n=>Number(n.value)||0),1);return i.jsxs("div",{className:"h-full flex flex-col",children:[i.jsxs("div",{className:"flex justify-between items-center mb-3",children:[i.jsxs("div",{className:"text-xs text-emerald-300 font-medium",children:["Max: ",r.toLocaleString()]}),i.jsxs("div",{className:"text-xs text-cyan-300 font-medium",children:["Total: ",e.reduce((n,a)=>n+(Number(a.value)||0),0).toLocaleString()]})]}),i.jsx("div",{className:"flex-1 flex items-end justify-between gap-2 px-2",children:e.map((n,a)=>{const s=n.value/r*100;return i.jsxs(U.div,{className:"flex flex-col items-center flex-1 group",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:a*.1},children:[i.jsxs(U.div,{className:"w-full bg-gradient-to-t from-emerald-500 via-teal-400 to-cyan-400 rounded-t-lg transition-all duration-300 hover:opacity-90 relative overflow-hidden",style:{height:`${s}%`,minHeight:"8px"},initial:{height:0},animate:{height:`${s}%`},transition:{duration:1,delay:a*.1,ease:"easeOut"},whileHover:{scale:1.05},children:[i.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent transform -skew-x-12 -translate-x-full group-hover:translate-x-full transition-transform duration-1000"}),i.jsx("div",{className:"absolute -top-6 left-1/2 transform -translate-x-1/2 opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:i.jsx("div",{className:"bg-slate-900 text-white text-xs px-2 py-1 rounded shadow-lg whitespace-nowrap",children:typeof n.value=="number"?n.value.toLocaleString():n.value})})]}),i.jsx("div",{className:"text-xs text-white/70 mt-2 truncate w-full text-center font-medium",children:n.label||`Item ${a+1}`})]},a)})}),i.jsx("div",{className:"flex justify-between text-xs text-white/60 mt-3",children:e.map((n,a)=>i.jsx("span",{className:"truncate font-medium",children:typeof n.value=="number"?n.value.toLocaleString():n.value},a))})]})},CF=({data:e,config:t})=>{if(!Array.isArray(e)||e.length===0)return i.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-white/50",children:[i.jsx("div",{className:"w-16 h-16 rounded-full bg-white/5 flex items-center justify-center mb-3",children:i.jsx("div",{className:"w-8 h-8 border-2 border-white/20 border-t-transparent rounded-full animate-spin"})}),i.jsx("div",{className:"text-sm",children:"No data available"})]});const r=e.reduce((a,s)=>a+(Number(s.value)||0),0);let n=0;return i.jsxs("div",{className:"h-full flex items-center justify-center",children:[i.jsxs("div",{className:"relative w-48 h-48",children:[i.jsx("svg",{className:"w-full h-full",viewBox:"0 0 200 200",children:e.map((a,s)=>{const o=a.value/r*100,l=n/100*360,c=(n+o)/100*360,d=(l-90)*(Math.PI/180),u=(c-90)*(Math.PI/180),f=100+80*Math.cos(d),h=100+80*Math.sin(d),m=100+80*Math.cos(u),b=100+80*Math.sin(u),g=o>50?1:0,p=["M 100 100",`L ${f} ${h}`,`A 80 80 0 ${g} 1 ${m} ${b}`,"Z"].join(" ");return n+=o,i.jsx(U.path,{d:p,fill:`hsl(${s*137.5%360}, 70%, 60%)`,className:"hover:opacity-80 transition-opacity cursor-pointer",initial:{scale:0,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.8,delay:s*.1,ease:"easeOut"},whileHover:{scale:1.05},children:i.jsxs("title",{children:[a.label||`Item ${s+1}`,": ",a.value," (",o.toFixed(1),"%)"]})},s)})}),i.jsx(U.div,{className:"absolute inset-0 flex items-center justify-center",initial:{scale:0,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.5,delay:.5},children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-xl font-bold text-white",children:r.toLocaleString()}),i.jsx("div",{className:"text-xs text-white/60 font-medium",children:"Total"})]})})]}),i.jsx("div",{className:"ml-6 space-y-3",children:e.map((a,s)=>i.jsxs(U.div,{className:"flex items-center gap-3 group cursor-pointer",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.5,delay:s*.1},whileHover:{x:5},children:[i.jsx("div",{className:"w-4 h-4 rounded-lg shadow-lg",style:{backgroundColor:`hsl(${s*137.5%360}, 70%, 60%)`}}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("div",{className:"text-sm text-white/90 font-medium truncate",children:a.label||`Item ${s+1}`}),i.jsxs("div",{className:"text-xs text-white/60",children:[a.value.toLocaleString()," (",(a.value/r*100).toFixed(1),"%)"]})]})]},s))})]})},AF=({data:e,config:t})=>{const r=e.value||e,n=t.label||"Value";return i.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-center relative",children:[i.jsx(U.div,{className:"absolute inset-0 rounded-full bg-gradient-to-r from-emerald-500/10 to-cyan-500/10",animate:{scale:[1,1.1,1],opacity:[.3,.6,.3]},transition:{duration:3,repeat:1/0}}),i.jsx(U.div,{className:"text-5xl sm:text-6xl font-bold bg-gradient-to-r from-emerald-400 via-cyan-400 to-teal-400 bg-clip-text text-transparent mb-3",initial:{scale:0,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.8,ease:"easeOut"},children:typeof r=="number"?r.toLocaleString():(()=>{if(r==null)return"-";if(typeof r=="string")return r;try{const a=JSON.stringify(r);return a.length>120?a.slice(0,117)+"â€¦":a}catch{return String(r)}})()}),i.jsx(U.div,{className:"text-lg text-white/80 font-medium mb-4",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.3},children:n}),t.change&&i.jsx(U.div,{className:`text-sm px-4 py-2 rounded-full font-semibold ${t.change>0?"bg-emerald-500/20 text-emerald-300 border border-emerald-400/30":"bg-rose-500/20 text-rose-300 border border-rose-400/30"}`,initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{duration:.5,delay:.5},children:i.jsxs("div",{className:"flex items-center gap-1",children:[t.change>0?i.jsx(U.div,{animate:{y:[-2,2,-2]},transition:{duration:1,repeat:1/0},children:"â†—"}):i.jsx(U.div,{animate:{y:[2,-2,2]},transition:{duration:1,repeat:1/0},children:"â†˜"}),i.jsxs("span",{children:[t.change>0?"+":"",t.change,"%"]})]})}),t.subtitle&&i.jsx(U.div,{className:"text-xs text-white/50 mt-2",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5,delay:.7},children:t.subtitle})]})},DF=({data:e,config:t})=>{const r=t.columns||Object.keys(e[0]||{});return i.jsxs("div",{className:"h-full overflow-auto",children:[i.jsxs("table",{className:"w-full text-xs",children:[i.jsx("thead",{children:i.jsx("tr",{className:"border-b border-white/20",children:r.map((n,a)=>i.jsx("th",{className:"text-left p-2 text-white/80 font-medium",children:n},a))})}),i.jsx("tbody",{children:e.slice(0,10).map((n,a)=>i.jsx("tr",{className:"border-b border-white/10",children:r.map((s,o)=>i.jsx("td",{className:"p-2 text-white/70",children:typeof n[s]=="number"?n[s].toLocaleString():n[s]},o))},a))})]}),e.length>10&&i.jsxs("div",{className:"text-xs text-white/60 text-center py-2",children:["Showing 10 of ",e.length," rows"]})]})},TF=({data:e})=>{if(!e)return i.jsxs("div",{className:"bg-white/5 backdrop-blur-xl border border-white/10 rounded-xl p-4",children:[i.jsx("h3",{className:"font-semibold text-white mb-3",children:"Data Overview"}),i.jsx("div",{className:"text-white/60 text-sm",children:"Loading data..."})]});const r=(()=>{const{invoices:s,products:o,customers:l}=e,c=s.reduce((v,w)=>v+(w.grandTotal||w.totalAmount||0),0),d=s.reduce((v,w)=>{const y=w.grandTotal||w.totalAmount||0,S=w.totalCost||y*.7;return v+(y-S)},0),u=s.length>0?c/s.length:0,f=o.filter(v=>(v.quantity||0)<=(v.minQuantity||10)).length,h=new Date,m=new Date(h.getFullYear(),h.getMonth()-1,1),b=s.filter(v=>(v.createdAt?.toDate?v.createdAt.toDate():new Date(v.createdAt))>=new Date(h.getFullYear(),h.getMonth(),1)).reduce((v,w)=>v+(w.grandTotal||w.totalAmount||0),0),g=s.filter(v=>{const w=v.createdAt?.toDate?v.createdAt.toDate():new Date(v.createdAt);return w>=m&&w<new Date(h.getFullYear(),h.getMonth(),1)}).reduce((v,w)=>v+(w.grandTotal||w.totalAmount||0),0),p=g>0?(b-g)/g*100:0;return{totalRevenue:c,totalProfit:d,avgOrderValue:u,totalOrders:s.length,totalProducts:o.length,totalCustomers:l.length,lowStockProducts:f,growthRate:p,thisMonthRevenue:b,lastMonthRevenue:g}})(),n=s=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:0,maximumFractionDigits:0}).format(s),a=({title:s,value:o,subtitle:l,trend:c,color:d="emerald"})=>i.jsxs(U.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white/5 backdrop-blur-xl border border-white/10 rounded-lg p-3 mb-3",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("h4",{className:"text-xs font-medium text-white/80",children:s}),c&&i.jsxs("span",{className:`text-xs px-2 py-1 rounded ${c>0?"bg-emerald-500/20 text-emerald-300":"bg-rose-500/20 text-rose-300"}`,children:[c>0?"+":"",c.toFixed(1),"%"]})]}),i.jsx("div",{className:`text-lg font-bold text-${d}-400`,children:o}),l&&i.jsx("div",{className:"text-xs text-white/60 mt-1",children:l})]});return i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"bg-white/5 backdrop-blur-xl border border-white/10 rounded-xl p-4",children:[i.jsxs("h3",{className:"font-semibold text-white mb-3 flex items-center gap-2",children:[i.jsx("span",{className:"w-2 h-2 bg-emerald-400 rounded-full"}),"Quick Insights"]}),i.jsxs("div",{className:"space-y-3",children:[i.jsx(a,{title:"Total Revenue",value:n(r.totalRevenue),subtitle:`${r.totalOrders} orders`,trend:r.growthRate}),i.jsx(a,{title:"Total Profit",value:n(r.totalProfit),subtitle:`${(r.totalProfit/r.totalRevenue*100).toFixed(1)}% margin`,color:"cyan"}),i.jsx(a,{title:"Avg Order Value",value:n(r.avgOrderValue),subtitle:"Per transaction",color:"emerald"}),i.jsx(a,{title:"Products",value:r.totalProducts,subtitle:`${r.lowStockProducts} low stock`,color:r.lowStockProducts>0?"rose":"emerald"}),i.jsx(a,{title:"Customers",value:r.totalCustomers,subtitle:"Total registered",color:"blue"})]})]}),i.jsxs("div",{className:"bg-white/5 backdrop-blur-xl border border-white/10 rounded-xl p-4",children:[i.jsxs("h3",{className:"font-semibold text-white mb-3 flex items-center gap-2",children:[i.jsx("span",{className:"w-2 h-2 bg-blue-400 rounded-full"}),"Data Status"]}),i.jsxs("div",{className:"space-y-2 text-xs",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-white/70",children:"Last Updated:"}),i.jsx("span",{className:"text-white",children:e.lastUpdated?e.lastUpdated.toLocaleTimeString():"Unknown"})]}),i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-white/70",children:"Data Points:"}),i.jsx("span",{className:"text-white",children:r.totalOrders+r.totalProducts+r.totalCustomers})]}),i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-white/70",children:"Data Quality:"}),i.jsx("span",{className:"text-emerald-300",children:"Good"})]})]})]}),i.jsxs("div",{className:"bg-white/5 backdrop-blur-xl border border-white/10 rounded-xl p-4",children:[i.jsxs("h3",{className:"font-semibold text-white mb-3 flex items-center gap-2",children:[i.jsx("span",{className:"w-2 h-2 bg-purple-400 rounded-full"}),"Quick Actions"]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("button",{className:"w-full text-left text-xs text-white/70 hover:text-white transition-colors p-2 rounded hover:bg-white/5",children:"ðŸ“Š Export Data"}),i.jsx("button",{className:"w-full text-left text-xs text-white/70 hover:text-white transition-colors p-2 rounded hover:bg-white/5",children:"ðŸ”„ Refresh Data"}),i.jsx("button",{className:"w-full text-left text-xs text-white/70 hover:text-white transition-colors p-2 rounded hover:bg-white/5",children:"âš™ï¸ Settings"})]})]})]})},IF={sales:{patterns:[/sales?\s+(?:for|in|during)\s+(.+)/i,/(?:show|display|get)\s+(?:me\s+)?sales?\s+(?:for|in|during)\s+(.+)/i,/(?:what|how)\s+(?:are\s+)?(?:my\s+)?sales?\s+(?:for|in|during)\s+(.+)/i,/revenue\s+(?:for|in|during)\s+(.+)/i],type:"sales"},profit:{patterns:[/profit\s+(?:for|in|during)\s+(.+)/i,/(?:show|display|get)\s+(?:me\s+)?profit\s+(?:for|in|during)\s+(.+)/i,/(?:what|how)\s+(?:is|are)\s+(?:my\s+)?profit\s+(?:for|in|during)\s+(.+)/i,/earnings?\s+(?:for|in|during)\s+(.+)/i],type:"profit"},products:{patterns:[/(?:which|what)\s+(?:are\s+)?(?:my\s+)?(?:top\s+)?(?:selling\s+)?products?/i,/(?:show|display|get)\s+(?:me\s+)?(?:top\s+)?(?:selling\s+)?products?/i,/(?:best|top)\s+(?:performing\s+)?products?/i,/product\s+(?:performance|sales|ranking)/i,/top\s+\d+\s+(?:selling\s+)?products?/i,/top\s+\d+\s+products?/i,/(?:top|best)\s+\d+/i,/products?\s+(?:selling|performance|ranking)/i,/(?:which|what)\s+products?\s+(?:are\s+)?(?:selling|performing)/i],type:"products"},inventory:{patterns:[/(?:how\s+is\s+)?(?:my\s+)?inventory\s+(?:performing|doing)/i,/(?:show|display|get)\s+(?:me\s+)?inventory\s+(?:status|overview)/i,/(?:low\s+)?stock\s+(?:alerts?|status)/i,/inventory\s+(?:levels?|management)/i],type:"inventory"},customers:{patterns:[/(?:who\s+are\s+)?(?:my\s+)?(?:top\s+)?customers?/i,/(?:show|display|get)\s+(?:me\s+)?(?:top\s+)?customers?/i,/(?:best|top)\s+(?:performing\s+)?customers?/i,/customer\s+(?:analysis|insights)/i],type:"customers"},comparison:{patterns:[/(?:compare|comparison)\s+(.+)\s+(?:vs|versus|against)\s+(.+)/i,/(?:this|current)\s+(.+)\s+(?:vs|versus|against)\s+(?:last|previous)\s+(.+)/i,/(?:show|display)\s+(?:me\s+)?(?:the\s+)?(?:difference|change)\s+(?:between|in)\s+(.+)/i],type:"comparison"},trends:{patterns:[/(?:show|display|get)\s+(?:me\s+)?(?:revenue|sales|profit)\s+trends?\s+(?:for|in|during)\s+(.+)/i,/(?:what|how)\s+(?:are\s+)?(?:my\s+)?(?:revenue|sales|profit)\s+trends?\s+(?:for|in|during)\s+(.+)/i,/(?:growth|trend)\s+(?:for|in|during)\s+(.+)/i],type:"trends"}},MF={"last month":{months:-1},"this month":{months:0},"last week":{weeks:-1},"this week":{weeks:0},"last year":{years:-1},"this year":{years:0},"last 3 months":{months:-3},"last 6 months":{months:-6},"last quarter":{months:-3},"this quarter":{months:0,isQuarter:!0}},yn={sales:{type:"line",title:"Sales Trend",xAxis:"date",yAxis:"amount",color:"emerald"},profit:{type:"bar",title:"Profit Analysis",xAxis:"period",yAxis:"profit",color:"cyan"},products:{type:"bar",title:"Top Selling Products",xAxis:"product",yAxis:"quantity",color:"blue"},inventory:{type:"pie",title:"Inventory Status",xAxis:"status",yAxis:"count",color:"purple"},customers:{type:"bar",title:"Top Customers",xAxis:"customer",yAxis:"value",color:"emerald"},comparison:{type:"bar",title:"Comparison",xAxis:"period",yAxis:"value",color:"orange"},trends:{type:"line",title:"Trend Analysis",xAxis:"date",yAxis:"value",color:"emerald"}},EF=async(e,t,r)=>{try{console.log("AI Analytics - Processing query:",e),console.log("AI Analytics - Data received:",{invoicesCount:t?.invoices?.length||0,productsCount:t?.products?.length||0,customersCount:t?.customers?.length||0,sampleInvoice:t?.invoices?.[0]});const n=_F(e);if(console.log("AI Analytics - Parsed intent:",n),!n)return console.log("AI Analytics - No intent found for query:",e),{summary:`I didn't understand your query. Try asking about:
â€¢ Sales: 'Show me sales for last month'
â€¢ Products: 'Top 5 selling products' or 'Which products are selling best?'
â€¢ Profit: 'What's my profit for this quarter?'
â€¢ Inventory: 'How is my inventory performing?'
â€¢ Customers: 'What are my top customers?'`,data:null,chartConfig:null};let a;switch(n.type){case"sales":a=await $F(n,t,r);break;case"profit":a=await LF(n,t,r);break;case"products":a=await FF(n,t,r);break;case"inventory":a=await BF(n,t,r);break;case"invoiceTypes":a=await UF(n,t,r);break;case"customers":a=await qF(n,t,r);break;case"comparison":a=await zF(n,t,r);break;case"trends":a=await VF(n,t,r);break;default:a={summary:"I can help you analyze sales, profit, products, inventory, customers, and trends. Try asking something like 'Show me sales for last month'.",data:null,chartConfig:null}}return a}catch(n){return console.error("Error generating analytics insights:",n),{summary:"Sorry, I encountered an error processing your request. Please try again.",data:null,chartConfig:null}}},_F=e=>{for(const[t,r]of Object.entries(IF))for(const n of r.patterns){const a=e.match(n);if(a)return{type:r.type,match:a,timePeriod:Jr(e),originalQuery:e}}return RF(e)},RF=e=>{const t=e.toLowerCase(),r=t.match(/(\d+)/),n=r?parseInt(r[1]):null;return t.includes("product")||t.includes("selling")||t.includes("top")||t.includes("best")||t.includes("item")||t.includes("goods")?{type:"products",match:[e],timePeriod:Jr(e),originalQuery:e,extractedNumber:n}:t.includes("sales")||t.includes("revenue")||t.includes("money")||t.includes("earn")?{type:"sales",match:[e],timePeriod:Jr(e),originalQuery:e,extractedNumber:n}:t.includes("profit")||t.includes("margin")||t.includes("earnings")?{type:"profit",match:[e],timePeriod:Jr(e),originalQuery:e,extractedNumber:n}:t.includes("customer")||t.includes("client")||t.includes("buyer")?{type:"customers",match:[e],timePeriod:Jr(e),originalQuery:e,extractedNumber:n}:t.includes("inventory")||t.includes("stock")||t.includes("low stock")||t.includes("out of stock")?{type:"inventory",match:[e],timePeriod:Jr(e),originalQuery:e,extractedNumber:n}:t.includes("invoice type")||t.includes("invoice breakdown")||t.includes("type breakdown")||t.includes("invoice categories")?{type:"invoiceTypes",match:[e],timePeriod:Jr(e),originalQuery:e,extractedNumber:n}:null},Jr=e=>{const t=e.toLowerCase();for(const[r,n]of Object.entries(MF))if(t.includes(r))return{period:r,config:n};return{period:"all time",config:null}},$F=async(e,t,r)=>{const{timePeriod:n}=e,a=t.invoices||[],s=Jn(a,n);console.log("AI Analytics - Sales Query Debug:",{originalInvoicesCount:a.length,filteredInvoicesCount:s.length,timePeriod:n,sampleFilteredInvoice:s[0]});const o=s.reduce((m,b)=>b.paymentMode==="credit"&&!b.isPaid?m:m+(b.grandTotal||b.totalAmount||0),0),l=s.filter(m=>m.paymentMode!=="credit"||m.paymentMode==="credit"&&m.isPaid).length,c=l>0?o/l:0,d={cash:0,upi:0,card:0},u={};s.forEach(m=>{if(m.paymentMode==="credit"&&!m.isPaid)return;const b=parseFloat(m.grandTotal||m.totalAmount||0),g=m.paymentMode?.toLowerCase();if(g==="split"){const w=m.splitPayment||{};d.cash+=parseFloat(w.cash||0),d.upi+=parseFloat(w.upi||0),d.card+=parseFloat(w.card||0)}else if(g==="credit"&&m.isPaid){const w=m.paidVia?.toLowerCase();w==="cash"?d.cash+=b:w==="upi"?d.upi+=b:w==="card"&&(d.card+=b)}else["cash","upi","card"].includes(g)&&(d[g]+=b);let p;if(m.issuedAt?.toDate?p=m.issuedAt.toDate():typeof m.issuedAt=="string"&&(p=new Date(m.issuedAt)),!p||isNaN(p))return;const v=p.toISOString().split("T")[0];u[v]||(u[v]=0),u[v]+=b});const f=Object.entries(u).map(([m,b])=>({date:m,revenue:b})).sort((m,b)=>new Date(m.date)-new Date(b.date));for(let m=1;m<f.length;m++){const b=f[m-1].revenue,p=f[m].revenue-b,v=b===0?100:p/b*100;f[m].changeAmount=p,f[m].changePercent=v.toFixed(1)}const h=f.map(m=>({date:m.date,value:m.revenue,label:m.date,changeAmount:m.changeAmount||0,changePercent:m.changePercent||0}));return{summary:`Your sales ${n?.period||"overall"}: â‚¹${o.toLocaleString()} from ${l} orders (avg: â‚¹${c.toLocaleString()})`,data:{totalSales:o,totalOrders:l,avgOrderValue:c,paymentModes:d,period:n?.period||"overall",revenueByDate:f},chartConfig:{...yn.sales,data:h}}},LF=async(e,t,r)=>{const{timePeriod:n}=e,a=t.invoices||[],s=t.products||[],o=Jn(a,n),l={};s.forEach(p=>{l[p.id||p.sku]=p});let c=0,d=0;const u={};o.forEach(p=>{if(p.paymentMode==="credit"&&p.isPaid!==!0)return;const v=Number(p.grandTotal||p.totalAmount||0);c+=v,(Array.isArray(p.cartItems)?p.cartItems:[]).forEach(y=>{const S=l[y.id];if(!S)return;const j=Number(S.costPrice||0),k=Number(y.price||0),N=Number(y.quantity||0),P=(k-j)*N,D=k*N;d+=P;const C=y.sku||y.name;u[C]||(u[C]={name:y.name,sku:y.sku,brand:S.brand||"â€”",unit:S.unit||"â€”",profit:0,revenue:0,margin:0,cost:0}),u[C].profit+=P,u[C].revenue+=D,u[C].cost=u[C].revenue-u[C].profit})});const f=Object.values(u).map(p=>({...p,margin:p.revenue>0?p.profit/p.revenue*100:0})).sort((p,v)=>v.profit-p.profit),h=f.reduce((p,v)=>p.margin>v.margin?p:v,{margin:0}),m=f.reduce((p,v)=>p.revenue>v.revenue?p:v,{revenue:0}),b=f.filter(p=>p.margin>30).sort((p,v)=>p.revenue-v.revenue)[0],g=c>0?d/c*100:0;return{summary:`Your profit ${n?.period||"overall"}: â‚¹${d.toLocaleString()} (${g.toFixed(1)}% margin)`,data:{totalProfit:d,totalRevenue:c,profitMargin:g,period:n?.period||"overall",topProducts:f.slice(0,10),highestMargin:h,mostRevenue:m,highMarginLowRevenue:b},chartConfig:{...yn.profit,data:f.slice(0,8).map(p=>({label:p.name,value:p.profit,revenue:p.revenue,margin:p.margin}))}}},FF=async(e,t,r)=>{const n=t.invoices||[],a=t.products||[],{timePeriod:s}=e,o=Jn(n,s),l=e.extractedNumber||5,c={},d=["items","cart","lineItems","products","invoiceItems"],u=v=>{for(const w of d){const y=v&&v[w];if(Array.isArray(y)&&y.length)return y}return[]},f=v=>Number(v?.quantity)||Number(v?.qty)||Number(v?.units)||0,h=v=>{const w=Number(v?.lineTotal||v?.total||v?.amount||v?.totalPrice||0),y=Number(v?.price||v?.rate||v?.unitPrice||0),S=f(v);return w>0?S>0?w/S:w:y};o.forEach(v=>{const w=u(v);w.length&&w.forEach(y=>{const S=y.name||y.productName||y.title||y.sku||"Unknown",j=f(y),k=h(y);c[S]||(c[S]={quantity:0,revenue:0}),c[S].quantity+=j,c[S].revenue+=k*j})}),Object.keys(c).length===0&&Array.isArray(a)&&a.length&&a.forEach(v=>{const w=v.name||v.productName||v.title||v.sku||"Unknown",y=Number(v.sold||v.salesCount||v.totalSold||0),S=Number(v.revenue||v.totalRevenue||0);(y>0||S>0)&&(c[w]={quantity:(c[w]?.quantity||0)+y,revenue:(c[w]?.revenue||0)+S})});const m=Object.entries(c).map(([v,w])=>({product:v,quantity:w.quantity,revenue:w.revenue})).sort((v,w)=>w.quantity-v.quantity||w.revenue-v.revenue),b=m.slice(0,Math.max(l,10)),g=Math.min(l,b.length);return{summary:b.length>0?`Top ${g} selling products ${s?.period?`(${s.period})`:""}: ${b.slice(0,g).map(v=>v.product).join(", ")}`:"No product sales data found.",data:{topProducts:b.slice(0,g),totalProducts:a.length,totalSales:m.reduce((v,w)=>v+w.revenue,0),requestedCount:g},chartConfig:{...yn.products,data:b.slice(0,Math.min(l,8)).map(v=>({label:v.product,value:v.quantity,revenue:v.revenue}))}}},BF=async(e,t,r)=>{const n=t.products||[],a={"In Stock":0,"Low Stock":0,"Out of Stock":0};n.forEach(o=>{const l=o.quantity||0,c=o.minQuantity||10;l===0?a["Out of Stock"]++:l<=c?a["Low Stock"]++:a["In Stock"]++});const s=n.filter(o=>(o.quantity||0)<=(o.minQuantity||10)&&(o.quantity||0)>0);return{summary:`Inventory status: ${a["In Stock"]} in stock, ${a["Low Stock"]} low stock, ${a["Out of Stock"]} out of stock`,data:{inventoryStatus:a,lowStockProducts:s.slice(0,5),totalProducts:n.length},chartConfig:{...yn.inventory,data:Object.entries(a).map(([o,l])=>({label:o,value:l}))}}},qF=async(e,t,r)=>{const n=t.invoices||[];t.customers;const{timePeriod:a}=e,s=Jn(n,a),o={},l={};s.forEach(g=>{const p=g.customer||{},v=p.custId||p.phone||p.email||p.name||"Unknown";o[v]||(o[v]={custId:p.custId,name:p.name||"Unknown",phone:p.phone||"N/A",email:p.email||"N/A",totalSpent:0,orderCount:0,avgOrderValue:0,visits:0,products:{}}),o[v].totalSpent+=g.grandTotal||g.totalAmount||0,o[v].orderCount+=1,o[v].visits+=1,(g.cartItems||[]).forEach(y=>{o[v].products[y.name]||(o[v].products[y.name]=0),o[v].products[y.name]+=y.quantity||0});const w=g.issuedAt||g.createdAt;if(w){const S=new Date(w).getHours();l[S]||(l[S]=new Set),l[S].add(v)}}),Object.values(o).forEach(g=>{g.avgOrderValue=g.orderCount>0?g.totalSpent/g.orderCount:0,g.topProducts=Object.entries(g.products).sort((p,v)=>v[1]-p[1]).slice(0,3).map(([p,v])=>`${p} (${v})`).join(", ")});const c=Object.values(o).sort((g,p)=>p.totalSpent-g.totalSpent).slice(0,10),d=Object.keys(o).length,u=Object.values(o).filter(g=>g.visits>1).length,f=d>0?u/d*100:0,h=Object.values(o).reduce((g,p)=>g+p.totalSpent,0),m=d>0?h/Object.values(o).reduce((g,p)=>g+p.orderCount,0):0,b=Array.from({length:24},(g,p)=>({hour:`${p}:00`,visits:l[p]?l[p].size:0}));return{summary:`Found ${d} customers (${u} returning, ${f.toFixed(1)}% retention) with total revenue of â‚¹${h.toFixed(2)}`,data:{topCustomers:c.slice(0,5),totalCustomers:d,returningCustomers:u,retentionRate:f,totalRevenue:h,avgOrderValue:m,hourlyData:b},chartConfig:{...yn.customers,data:c.slice(0,8).map(g=>({label:g.name,value:g.totalSpent,orders:g.orderCount,visits:g.visits}))}}},UF=async(e,t,r)=>{const n=t.invoices||[],{timePeriod:a}=e,s=Jn(n,a),o={};s.forEach(d=>{const u=d.invoiceType||"Unspecified";o[u]||(o[u]=0),o[u]+=1});const l=s.length,c=Object.entries(o).map(([d,u])=>({type:d,count:u,percentage:l>0?(u/l*100).toFixed(1):0})).sort((d,u)=>u.count-d.count);return{summary:`Invoice breakdown: ${c.slice(0,3).map(d=>`${d.type} (${d.count})`).join(", ")}`,data:{typeBreakdown:c,totalInvoices:l,typeCounts:o},chartConfig:{type:"pie",data:c.map(d=>({label:d.type,value:d.count,percentage:d.percentage})),title:"Invoice Type Distribution"}}},zF=async(e,t,r)=>{const n=t.invoices||[],a=new Date,s=new Date(a.getFullYear(),a.getMonth()-1,1),o=n.filter(f=>(f.createdAt?.toDate?f.createdAt.toDate():new Date(f.createdAt))>=new Date(a.getFullYear(),a.getMonth(),1)),l=n.filter(f=>{const h=f.createdAt?.toDate?f.createdAt.toDate():new Date(f.createdAt);return h>=s&&h<new Date(a.getFullYear(),a.getMonth(),1)}),c=o.reduce((f,h)=>f+(h.grandTotal||h.totalAmount||0),0),d=l.reduce((f,h)=>f+(h.grandTotal||h.totalAmount||0),0),u=d>0?(c-d)/d*100:0;return{summary:`This month vs last month: â‚¹${c.toLocaleString()} vs â‚¹${d.toLocaleString()} (${u>0?"+":""}${u.toFixed(1)}% change)`,data:{thisMonth:c,lastMonth:d,growth:u,thisMonthOrders:o.length,lastMonthOrders:l.length},chartConfig:{...yn.comparison,data:[{period:"Last Month",value:d},{period:"This Month",value:c}]}}},VF=async(e,t,r)=>{const{timePeriod:n}=e,a=t.invoices||[],s=Jn(a,n),o=WF(s),l=Object.entries(o).sort(([c],[d])=>new Date(c)-new Date(d)).map(([c,d])=>({date:new Date(c).toLocaleDateString(),value:d,label:new Date(c).toLocaleDateString()}));return{summary:`Revenue trends ${n.period}: ${l.length} data points showing ${l.length>0?"trending "+(l[l.length-1].value>l[0].value?"up":"down"):"no data"}`,data:{trendData:l,period:n.period,dataPoints:l.length},chartConfig:{...yn.trends,data:l}}},Jn=(e,t)=>{if(!t.config)return e;const r=new Date,n=new Date;if(t.config.isQuarter){const a=Math.floor(r.getMonth()/3);n.setMonth(a*3,1),n.setHours(0,0,0,0)}else t.config.months?n.setMonth(r.getMonth()+t.config.months):t.config.weeks?n.setDate(r.getDate()+t.config.weeks*7):t.config.years&&n.setFullYear(r.getFullYear()+t.config.years);return e.filter(a=>{let s;return a.issuedAt?.toDate?s=a.issuedAt.toDate():typeof a.issuedAt=="string"?s=new Date(a.issuedAt):a.createdAt?.toDate?s=a.createdAt.toDate():s=new Date(a.createdAt),s>=n})},WF=e=>{const t={};return e.forEach(r=>{let n;r.issuedAt?.toDate?n=r.issuedAt.toDate():typeof r.issuedAt=="string"?n=new Date(r.issuedAt):r.createdAt?.toDate?n=r.createdAt.toDate():n=new Date(r.createdAt);const a=n.toISOString().split("T")[0];t[a]||(t[a]=0),t[a]+=r.grandTotal||r.totalAmount||0}),t},HF=({onSwitchToTraditional:e})=>{const[t,r]=x.useState(null),[n,a]=x.useState(!1),[s,o]=x.useState(null),[l,c]=x.useState([]),[d,u]=x.useState(""),[f,h]=x.useState(["Show me sales for last month","What's my profit for this quarter?","Which products are selling best?","How is my inventory performing?","Show revenue trends for last 6 months","What are my top customers?","Compare this month vs last month","Show me low stock alerts"]);x.useEffect(()=>{const p=Ra(xe,v=>{r(v),v&&m(v.uid)});return()=>p()},[]);const m=async p=>{try{a(!0);const[v,w,y]=await Promise.all([ye(_e(ue(J,"businesses",p,"finalizedInvoices"),$t("issuedAt","desc"),Tn(100))),ye(_e(ue(J,"businesses",p,"products"),Tn(100))),ye(_e(ue(J,"businesses",p,"customers"),Tn(100)))]),S=v.docs.map(N=>({id:N.id,...N.data()})),j=w.docs.map(N=>({id:N.id,...N.data()})),k=y.docs.map(N=>({id:N.id,...N.data()}));console.log("AI Analytics Data Loaded:",{invoicesCount:S.length,productsCount:j.length,customersCount:k.length,sampleInvoice:S[0],totalRevenue:S.reduce((N,P)=>N+(P.grandTotal||P.totalAmount||0),0)}),o({invoices:S,products:j,customers:k,lastUpdated:new Date})}catch(v){console.error("Error loading initial data:",v)}finally{a(!1)}},b=async p=>{if(!t||!s)return;a(!0);const v={id:Date.now(),type:"user",content:p,timestamp:new Date};c(w=>[...w,v]);try{const w=await EF(p,s,t.uid),y={id:Date.now()+1,type:"ai",content:w.summary,data:w.data,chartConfig:w.chartConfig,timestamp:new Date};c(S=>[...S,y])}catch(w){console.error("Error processing AI query:",w);const y={id:Date.now()+1,type:"ai",content:"Sorry, I encountered an error processing your request. Please try again.",timestamp:new Date};c(S=>[...S,y])}finally{a(!1)}},g=p=>{u(p),b(p)};return t?i.jsxs("div",{className:"space-y-4 sm:space-y-6 text-white min-h-0",children:[i.jsxs(U.div,{initial:{opacity:1,y:0},animate:{opacity:1,y:0},transition:{duration:.1},className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3 sm:gap-4 mb-6",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"w-10 h-10 rounded-lg bg-gradient-to-r from-emerald-400 via-teal-300 to-cyan-400 flex items-center justify-center shadow-lg shadow-emerald-400/25",children:i.jsx("span",{className:"text-lg font-bold text-slate-900",children:"AI"})}),i.jsx("div",{className:"absolute -top-1 -right-1 w-3 h-3 bg-emerald-400 rounded-full animate-ping"})]}),i.jsxs("div",{children:[i.jsx("h2",{className:"text-xl sm:text-2xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-white via-white to-emerald-200",children:"AI Analytics Assistant"}),i.jsx("p",{className:"text-sm text-white/70",children:"Advanced business intelligence powered by artificial intelligence"})]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("button",{onClick:e,className:"px-3 py-1.5 rounded-lg bg-white/10 hover:bg-white/20 border border-white/20 text-xs font-medium text-white transition-colors",children:"ðŸ“ˆ Switch to Traditional"}),i.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 rounded-full bg-emerald-500/20 border border-emerald-400/30",children:[i.jsx("div",{className:"w-2 h-2 bg-emerald-400 rounded-full animate-pulse"}),i.jsx("span",{className:"text-xs font-medium text-emerald-300",children:"AI Ready"})]}),i.jsx("div",{className:"text-xs text-white/50",children:s?`${s.invoices?.length||0} invoices`:"Loading..."})]})]}),i.jsxs(U.div,{initial:{opacity:1,y:0},animate:{opacity:1,y:0},transition:{duration:.1},className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"w-1 h-5 bg-gradient-to-b from-emerald-400 to-cyan-400 rounded-full"}),i.jsx("h3",{className:"text-lg font-semibold text-white",children:"Quick Insights"})]}),i.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-2 sm:gap-3",children:f.map((p,v)=>i.jsx(U.button,{whileHover:{scale:1.02,y:-1},whileTap:{scale:.98},onClick:()=>g(p),className:"group relative px-3 py-2.5 text-sm rounded-lg bg-white/10 backdrop-blur-xl border border-white/20 text-white hover:bg-white/15 hover:border-emerald-400/30 transition-all duration-300 text-left",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"w-1.5 h-1.5 bg-emerald-400 rounded-full group-hover:bg-cyan-400 transition-colors"}),i.jsx("span",{className:"truncate text-xs sm:text-sm",children:p})]})},v))})]}),i.jsxs(U.div,{initial:{opacity:1,y:0},animate:{opacity:1,y:0},transition:{duration:.1},className:"grid grid-cols-1 lg:grid-cols-3 gap-4 sm:gap-6",children:[i.jsx("div",{className:"lg:col-span-2",children:i.jsx(SF,{chatHistory:l,currentQuery:d,setCurrentQuery:u,onSendQuery:b,isLoading:n})}),i.jsx("div",{className:"space-y-4",children:i.jsx(TF,{data:s})})]}),i.jsx(Ue,{children:l.filter(p=>p.type==="ai"&&p.chartConfig).length>0&&i.jsxs(U.div,{initial:{opacity:1,y:0},animate:{opacity:1,y:0},exit:{opacity:1,y:0},transition:{duration:.1},className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-1 h-6 bg-gradient-to-b from-cyan-400 to-blue-400 rounded-full"}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-bold text-white",children:"AI-Generated Analytics"}),i.jsx("p",{className:"text-sm text-white/60",children:"Advanced visualizations powered by machine learning"})]}),i.jsxs("div",{className:"ml-auto flex items-center gap-2 px-3 py-1.5 rounded-full bg-cyan-500/20 border border-cyan-400/30",children:[i.jsx("div",{className:"w-2 h-2 bg-cyan-400 rounded-full animate-pulse"}),i.jsx("span",{className:"text-xs font-medium text-cyan-300",children:"Live Analysis"})]})]}),i.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:l.filter(p=>p.type==="ai"&&p.chartConfig).slice(-4).map((p,v)=>i.jsx(U.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.3,delay:v*.1},children:i.jsx(kF,{config:p.chartConfig,data:p.chartConfig?.data||p.data,title:p.content})},p.id))})]})})]}):i.jsx("div",{className:"flex items-center justify-center h-64",children:i.jsx("div",{className:"text-white/60",children:"Please sign in to access AI Analytics"})})},KF=()=>{const[e,t]=x.useState("traditional"),r=n=>{const a=window.scrollY;t(n),requestAnimationFrame(()=>{window.scrollTo({top:a,behavior:"instant"}),setTimeout(()=>{window.scrollTo({top:a,behavior:"instant"})},100)})};return i.jsx(zj,{children:i.jsxs("div",{className:"p-3 sm:p-4 lg:p-6 space-y-4 sm:space-y-6 text-white",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3 sm:gap-4 mb-6",children:[i.jsx("h1",{className:"text-xl sm:text-2xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-white via-white to-emerald-200",children:"ðŸ“Š Business Analytics Dashboard"}),i.jsxs("div",{className:"flex bg-white/15 backdrop-blur-xl border-2 border-white/20 rounded-xl p-1 shadow-lg",children:[i.jsx("button",{onClick:()=>r("traditional"),className:`px-4 sm:px-6 py-2.5 rounded-lg text-sm font-semibold transition-all duration-200 ${e==="traditional"?"bg-emerald-500 text-slate-900 shadow-lg":"text-white/80 hover:text-white hover:bg-white/10"}`,children:"ðŸ“ˆ Traditional Analytics"}),i.jsx("button",{onClick:()=>r("ai"),className:`px-4 sm:px-6 py-2.5 rounded-lg text-sm font-semibold transition-all duration-200 ${e==="ai"?"bg-emerald-500 text-slate-900 shadow-lg":"text-white/80 hover:text-white hover:bg-white/10"}`,children:"ðŸ¤– AI Assistant"})]})]}),e==="traditional"?i.jsxs("div",{className:"space-y-6 sm:space-y-8",children:[i.jsx(YF,{}),i.jsx(AR,{}),i.jsx(vF,{}),i.jsx(bF,{}),i.jsx(yF,{}),i.jsx(wF,{}),i.jsx(jF,{}),i.jsx(NF,{})]}):i.jsx(HF,{onSwitchToTraditional:()=>r("traditional")})]})})},YF=()=>{const{selectedProduct:e,setSelectedProduct:t,selectedDate:r,setSelectedDate:n}=xu();return i.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-3 sm:gap-4 mb-4 p-3 sm:p-4 rounded-xl bg-white/10 backdrop-blur-xl border border-white/10",children:[i.jsxs("div",{className:"w-full sm:w-auto",children:[i.jsx("label",{className:"text-xs sm:text-sm font-medium text-white/80",children:"Select Product:"}),i.jsxs("select",{className:"mt-1 block w-full sm:w-60 rounded bg-white/10 border border-white/20 text-white placeholder-white/60 focus:outline-none focus:ring-2 focus:ring-emerald-400/50 text-sm",value:e||"",onChange:a=>t(a.target.value),children:[i.jsx("option",{value:"",children:"All Products"}),i.jsx("option",{value:"SKU1",children:"SKU1"}),i.jsx("option",{value:"SKU2",children:"SKU2"})]})]}),i.jsxs("div",{className:"w-full sm:w-auto",children:[i.jsx("label",{className:"text-xs sm:text-sm font-medium text-white/80",children:"Select Date:"}),i.jsx("input",{type:"date",className:"mt-1 block w-full sm:w-48 rounded bg-white/10 border border-white/20 text-white focus:outline-none focus:ring-2 focus:ring-emerald-400/50 text-sm",value:r||"",onChange:a=>n(a.target.value)})]})]})},GF=async(e,t)=>{const r=ve(J,"businesses",t,"connectedRetailers",e);return(await Yt(r)).exists()},QF=({distributor:e})=>{x.useEffect(()=>{console.log("ðŸ§ª SmartAssistant Debug:"),console.log("Retailer UID (auth):",xe.currentUser?.uid),console.log("Distributor ID (prop):",e?.id)},[e]);const[t,r]=x.useState([]),[n,a]=x.useState(""),[s,o]=x.useState(""),[l,c]=x.useState(!1),[d,u]=x.useState([]),[f,h]=x.useState(""),m=x.useRef(null),b=xe.currentUser?.uid,g=e?.id;x.useEffect(()=>{if(!b||!g)return;const v=ue(J,"businesses",g,"connectedRetailers",b,"assistantChats"),w=_e(v,$t("timestamp")),y=ht(w,S=>{const j=S.docs.map(k=>({id:k.id,...k.data()}));r(j)});return()=>y()},[b,g]),x.useEffect(()=>{if(!b||!g)return;const v=_e(ue(J,"assistantQueries"),$t("timestamp","desc")),w=ht(v,y=>{const S=y.docs.find(j=>j.data().userId===b&&j.data().distributorId===g&&j.data().source==="SmartAssistant"&&j.data().reply);if(S){const j=S.data().reply;if(!t.some(N=>N.message===j&&N.sender==="assistant")){const N={id:`reply-${S.id}`,message:j,sender:"assistant",timestamp:S.data().timestamp};r(P=>[...P,N]),c(!1)}}});return()=>w()},[b,g,t]),x.useEffect(()=>{const v=setTimeout(()=>{h(n.trim())},300);return()=>clearTimeout(v)},[n]),x.useEffect(()=>{if(!f||!g){u([]);return}(async()=>{if(!await GF(b,g)){u([]);return}const y=_e(ue(J,"businesses",g,"products"));try{const j=(await Mw(async()=>{const{getDocs:k}=await import("./firebase-DWi1MSv1.js").then(N=>N.ad);return{getDocs:k}},[]).then(({getDocs:k})=>k(y))).docs.map(k=>k.data().name).filter(k=>k?.toLowerCase().includes(f.toLowerCase()));u(j.slice(0,5))}catch(S){console.error("Suggestion fetch error:",S),u([])}})()},[f,g]);const p=async()=>{if(!n.trim())return;if(!b||!g){console.error("Missing retailerId or distributorId");return}const v={message:n.trim(),sender:"retailer",timestamp:Ke()};try{await Rr(ue(J,"businesses",g,"connectedRetailers",b,"assistantChats"),v),await Rr(ue(J,"assistantQueries"),{prompt:n.trim(),timestamp:Ke(),userId:b,distributorId:g,role:"retailer",source:"SmartAssistant"}),a(""),c(!0)}catch(w){console.error("Failed to send message:",w.message)}};return x.useEffect(()=>{m.current?.scrollIntoView({behavior:"smooth"})},[t]),i.jsxs("div",{className:"h-[500px] flex flex-col p-4 rounded-xl bg-white/10 backdrop-blur-xl border border-white/10 shadow-[0_8px_40px_rgba(0,0,0,0.35)] text-white relative overflow-hidden",children:[i.jsxs("div",{className:"flex-1 min-h-0 overflow-y-auto overscroll-contain space-y-2 mb-4 flex flex-col",children:[t.map(v=>i.jsxs("div",{className:`p-2 max-w-[75%] rounded-xl shadow inline-block ${v.sender==="retailer"?"self-end text-right bg-emerald-400/15 border border-emerald-300/20":"self-start text-left bg-white/10 border border-white/10"}`,children:[i.jsx("p",{className:"text-sm",children:v.message}),v.sender==="assistant"&&v.timestamp&&i.jsx("p",{className:"text-[10px] text-white/60 mt-1",children:"âœ“ Delivered"})]},v.id)),l&&i.jsx("div",{className:"p-2 max-w-[75%] rounded-xl bg-white/10 border border-white/10 self-start text-left animate-pulse",children:i.jsx("p",{className:"text-sm italic text-white/70",children:"Assistant is typing..."})}),i.jsx("div",{ref:m})]}),i.jsxs("div",{className:"flex items-center gap-2 relative",children:[i.jsx("input",{type:"text",className:"flex-1 px-3 py-2 text-sm rounded-xl bg-white/10 border border-white/20 text-white placeholder-white/60 focus:outline-none focus:ring-2 focus:ring-emerald-400/50",placeholder:"Ask something...",value:n,onChange:v=>a(v.target.value),onKeyDown:v=>v.key==="Enter"&&p()}),i.jsx("button",{onClick:p,className:"px-4 py-2 rounded-xl text-sm font-medium text-slate-900 bg-gradient-to-r from-emerald-400 via-teal-300 to-cyan-400 hover:shadow-[0_8px_24px_rgba(16,185,129,0.35)]",children:"Send"}),d.length>0&&i.jsx("div",{className:"absolute bottom-14 left-0 right-0 text-sm z-50 rounded-xl border border-white/10 bg-[#0B0F14]/90 backdrop-blur-xl shadow-[0_12px_40px_rgba(0,0,0,0.45)]",children:d.map((v,w)=>i.jsx("div",{onClick:()=>{a(v),u([])},className:"px-3 py-2 hover:bg-white/10 cursor-pointer text-white",children:v},w))})]})]})};function XF({className:e=""}){return i.jsx("div",{className:"rounded-xl border border-amber-300/40 bg-amber-50/70 text-amber-900 p-3 md:p-4 text-sm md:text-[15px] "+e,role:"status","aria-live":"polite",children:i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-5 h-5 mt-0.5 opacity-80","aria-hidden":!0,children:i.jsx("path",{fillRule:"evenodd",d:"M10.29 3.86a2.25 2.25 0 0 1 3.42 0l7.133 8.4c1.24 1.46.187 3.74-1.71 3.74H4.867c-1.897 0-2.95-2.28-1.71-3.74l7.133-8.4zM12 9.75a.75.75 0 0 0-.75.75v4.5a.75.75 0 0 0 1.5 0v-4.5a.75.75 0 0 0-.75-.75zm0 8.25a.9.9 0 1 0 0-1.8.9.9 0 0 0 0 1.8z",clipRule:"evenodd"})}),i.jsxs("div",{children:[i.jsx("div",{className:"font-medium",children:"Estimate shown (preâ€‘tax & preâ€‘charges)"}),i.jsxs("p",{className:"opacity-80 leading-relaxed",children:["Distributor may add ",i.jsx("b",{children:"GST"}),", ",i.jsx("b",{children:"delivery"}),", ",i.jsx("b",{children:"packing"}),", ",i.jsx("b",{children:"insurance"}),", or",i.jsx("b",{children:" discounts"})," in the ",i.jsx("b",{children:"Proforma"}),". Youâ€™ll receive a final amount to review and approve before dispatch."]})]})]})})}function sc(e,t=0){const r=Number(e);return Number.isFinite(r)?r:t}function Yr(e){return Math.round((e+Number.EPSILON)*100)/100}function ZF(e=[]){let t=0;return{items:e.map((n={})=>{const a=Yr(sc(n.qty)),s=Yr(sc(n.price)),o=Yr(sc(n.itemDiscountPct)),l=Yr(a*s),c=Yr(l*o/100),d=Yr(l-c);return t=Yr(t+d),{inventoryId:n.inventoryId,name:n.name,sku:n.sku,hsn:n.hsn,uom:n.uom,imageUrl:n.imageUrl,qty:a,price:s,itemDiscountPct:o,gross:l,discountAmount:c,taxable:d}}),subtotal:t}}const JF=({distributorId:e})=>{const[t,r]=x.useState([]),[n,a]=x.useState(!1),[s,o]=x.useState([]),[l,c]=x.useState([]),[d,u]=x.useState("COD"),[f,h]=x.useState(15),[m,b]=x.useState({advance:"",balance:""}),[g,p]=x.useState({}),v=M=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR"}).format(Number(M||0)),[w,y]=x.useState(null),[S,j]=x.useState(null),[k,N]=x.useState(!1),[P,D]=x.useState(!1),C=M=>M.reduce((F,V)=>F+(parseFloat(V.quantity||0)||0)*(parseFloat(V.unitPrice||0)||0),0);x.useEffect(()=>{(async()=>{if(!e||!xe.currentUser){y(null),N(!1),j(null);return}D(!0);const F=xe.currentUser.uid;try{const V=ve(J,"businesses",e,"orderSettings","global");let q={};try{const T=await Yt(V);T.exists()&&(q=T.data()||{})}catch{}const K=ve(J,"businesses",e,"orderSettings","global","retailerOverrides",F);let ne={};try{const T=await Yt(K);T.exists()&&(ne=T.data()||{})}catch{}const Z={...q,...ne};y(Z),N(!!Z.skipProforma)}finally{D(!1)}})()},[e]),x.useEffect(()=>{const M=C(t);if(!w||!w.enabled||M<=0){j(null);return}try{const F=mf({itemsSubTotal:M,defaults:w,distributorProfile:{},retailerProfile:{}});j(F)}catch{j(null)}},[t,w]),x.useEffect(()=>{if(!e)return;const M=_e(ue(J,"businesses",e,"products")),F=ht(M,V=>{const q=V.docs.map(K=>({id:K.id,...K.data()}));o(q)});return()=>F()},[e]);const O=(M,F,V)=>{const q=[...t];if(q[M][F]=V,r(q),F==="productName"){const K=V.toLowerCase(),ne=s.filter(Z=>Z.productName?.toLowerCase().includes(K)||Z.sku?.toLowerCase().includes(K)||Z.brand?.toLowerCase().includes(K)||Z.category?.toLowerCase().includes(K)||Z.unit?.toLowerCase().includes(K)||(Z.sellingPrice+"").includes(K));c(ne)}},A=()=>{r([...t,{productName:"",sku:"",brand:"",category:"",quantity:"",unit:"",description:"",notes:"",unitPrice:""}])},B=async()=>{const M=xe.currentUser;if(!(!M||!e||t.length===0))try{a(!0);const F=t.map(H=>({inventoryId:H.distributorProductId,name:H.productName,sku:H.sku,hsn:H.hsn||void 0,uom:H.unit||void 0,imageUrl:H.imageUrl||void 0,qty:Number(H.quantity||0),price:Number(H.unitPrice||0),itemDiscountPct:Number(H.itemDiscountPct||0)})),V=ZF(F),q=t.reduce((H,le)=>{const $=parseFloat(le.quantity)||0,L=parseFloat(le.unitPrice)||0;return H+$*L},0),K=await Yt(ve(J,"businesses",e)),ne=K.exists()?K.data():{},Z=ne.phone||"",T=ne.email||"",_=M.uid,Y=q,ee=e1(d),W=(()=>{if(typeof ee=="string"){const H=ee;return{code:H,label:d,isCredit:/credit/i.test(H)||H==="CREDIT_CYCLE",isSplit:H==="SPLIT"||/split/i.test(H),isAdvance:H==="ADVANCE"||/advance/i.test(H),creditDays:/credit/i.test(H)||H==="CREDIT_CYCLE"?Number(f||0):null,splitPayment:H==="SPLIT"||/split/i.test(H)?{...m}:null}}if(ee&&typeof ee=="object"){const H=ee.code||"";return{code:H,label:ee.label||d,isCredit:ee.isCredit??(/credit/i.test(H)||/credit/i.test(ee.label||"")),isSplit:ee.isSplit??(H==="SPLIT"||/split/i.test(H||"")),isAdvance:ee.isAdvance??(H==="ADVANCE"||/advance/i.test(H||"")),creditDays:ee.creditDays??(H==="CREDIT_CYCLE"||/credit/i.test(H||"")?Number(f||0):null),splitPayment:ee.splitPayment??(H==="SPLIT"||/split/i.test(H||"")?{...m}:null)}}return{code:"COD",label:"Cash on Delivery",isCredit:!1,isSplit:!1,isAdvance:!1,creditDays:null,splitPayment:null}})();if(k&&w&&w.enabled){const H=ve(ue(J,`businesses/${e}/orderRequests`)).id,le={defaultsUsed:w,breakdown:S||mf({itemsSubTotal:Y,defaults:w,distributorProfile:{},retailerProfile:{}})},$={orderId:H,retailerId:_,distributorId:e,createdBy:"retailer",creatorUid:_,items:t,itemsSubTotal:Y,paymentMode:W.code,paymentModeLabel:W.label,paymentMethod:W.code,paymentNormalized:{...W},creditDays:W.creditDays,splitPayment:W.splitPayment,chargesSnapshot:le,status:"Requested",statusCode:ba.REQUESTED,retailerMode:"active",directFlow:!0,paymentSummary:{mode:{...W},creditDueDays:W.creditDays,splitPayment:W.splitPayment,status:"pending"},paymentFlags:{isCredit:!!W.isCredit,isSplit:!!W.isSplit,isAdvance:!!W.isAdvance},createdAt:Ke(),timestamp:Ke(),distributorName:ne.businessName||ne.ownerName||"",distributorCity:ne.city||"",distributorState:ne.state||"",distributorPhone:Z,distributorEmail:T,statusTimestamps:{requestedAt:Ke()},retailerName:M.displayName||"Retailer",retailerEmail:M.email||"",retailerPhone:M.phoneNumber||""},L=t.map(R=>({sku:R.sku,SKU:R.sku,qty:Number(R.quantity||0),quantity:Number(R.quantity||0),name:R.productName,productName:R.productName}));if(L.some(R=>R.sku)&&L.length>0)try{await hf(e,H,L),$.stockReservedAt=Ke(),$.stockReserved=!0,console.log("[RetailerOrderRequestForm] âœ… Stock reserved for order:",H)}catch(R){return console.error("[RetailerOrderRequestForm] âŒ Stock reservation failed:",R),a(!1),Vt.error(`Cannot create order: ${R.message||"Insufficient stock available"}`)}await Kt(ve(J,`businesses/${e}/orderRequests/${H}`),$),await Kt(ve(J,`businesses/${_}/sentOrders/${H}`),$),Vt.success("Order sent (Direct defaults applied). Stock reserved. Awaiting distributor action.")}else{const H=ue(J,`businesses/${e}/orderRequests`),le=t.map(te=>({sku:te.sku,SKU:te.sku,qty:Number(te.quantity||0),quantity:Number(te.quantity||0),name:te.productName,productName:te.productName})),$=le.some(te=>te.sku);let L=null;if($&&le.length>0)try{L=ve(H).id,await hf(e,L,le),console.log("[RetailerOrderRequestForm] âœ… Stock reserved for PROFORMA order:",L)}catch(te){return console.error("[RetailerOrderRequestForm] âŒ Stock reservation failed:",te),a(!1),Vt.error(`Cannot create order: ${te.message||"Insufficient stock available"}`)}const G={retailerId:M.uid,distributorId:e,createdBy:"retailer",creatorUid:M.uid,items:t,itemsSubTotal:Y,paymentMode:W.code,paymentModeLabel:W.label,paymentMethod:W.code,paymentNormalized:{...W},creditDays:W.creditDays,splitPayment:W.splitPayment,retailerMode:"active",directFlow:!1,paymentSummary:{mode:{...W},creditDueDays:W.creditDays,splitPayment:W.splitPayment,status:"pending"},paymentFlags:{isCredit:!!W.isCredit,isSplit:!!W.isSplit,isAdvance:!!W.isAdvance},status:"Requested",timestamp:Ke(),createdAt:Ke(),...$&&L?{stockReservedAt:Ke(),stockReserved:!0}:{},distributorName:ne.businessName||ne.ownerName||"",distributorCity:ne.city||"",distributorState:ne.state||"",distributorPhone:Z,distributorEmail:T,estimate:{subtotal:V.subtotal,lines:V.items.map(({qty:te,price:re,itemDiscountPct:ae,gross:Q,discountAmount:oe,taxable:Ee})=>({qty:te,price:re,itemDiscountPct:ae,gross:Q,discountAmount:oe,taxable:Ee})),note:"Pre-tax estimate. Taxes/charges will be added in Proforma by distributor.",version:1},statusCode:ba.REQUESTED,statusTimestamps:{requestedAt:Ke()},retailerName:M.displayName||"Retailer",retailerEmail:M.email||"",retailerPhone:M.phoneNumber||""};let R;L?(R=ve(H,L),await Kt(R,G)):(R=await Rr(H,G),L=R.id);const E=ve(J,`businesses/${M.uid}/sentOrders/${L}`);await Kt(E,{retailerId:M.uid,distributorId:e,items:t,itemsSubTotal:Y,paymentMode:W.code,paymentModeLabel:W.label,paymentMethod:W.code,paymentNormalized:{...W},creditDays:W.creditDays,splitPayment:W.splitPayment,retailerMode:"active",directFlow:!1,paymentSummary:{mode:{...W},creditDueDays:W.creditDays,splitPayment:W.splitPayment,status:"pending"},paymentFlags:{isCredit:!!W.isCredit,isSplit:!!W.isSplit,isAdvance:!!W.isAdvance},status:"Requested",timestamp:Ke(),createdAt:Ke(),distributorName:ne.businessName||ne.ownerName||"",distributorCity:ne.city||"",distributorState:ne.state||"",distributorPhone:Z,distributorEmail:T,estimate:{subtotal:V.subtotal,lines:V.items.map(({qty:te,price:re,itemDiscountPct:ae,gross:Q,discountAmount:oe,taxable:Ee})=>({qty:te,price:re,itemDiscountPct:ae,gross:Q,discountAmount:oe,taxable:Ee})),note:"Pre-tax estimate. Taxes/charges will be added in Proforma by distributor.",version:1},statusCode:ba.REQUESTED,statusTimestamps:{requestedAt:Ke()},retailerName:M.displayName||"Retailer",retailerEmail:M.email||"",retailerPhone:M.phoneNumber||""}),Vt.success("Order request sent successfully!")}r([]),setTimeout(()=>r([{productName:"",sku:"",brand:"",category:"",quantity:"",unit:"",description:"",notes:"",unitPrice:""}]),0)}catch(F){console.error("Error sending order:",F),alert("Failed to send order request.")}finally{a(!1)}};return i.jsxs("div",{className:"p-4 rounded-xl bg-white/10 backdrop-blur-xl border border-white/10 shadow-[0_8px_40px_rgba(0,0,0,0.35)] text-white",children:[i.jsx("h2",{className:"text-lg font-semibold mb-4 bg-clip-text text-transparent bg-gradient-to-r from-white via-white to-emerald-200",children:"Send Order Request"}),i.jsxs("div",{className:"mb-4 relative",children:[i.jsx("input",{type:"text",placeholder:"ðŸ” Search product by name, SKU, brand, etc.",className:"w-full px-4 py-2 rounded-xl bg-white/10 border border-white/20 text-white placeholder-white/60 focus:outline-none focus:ring-2 focus:ring-emerald-400/50 shadow-sm",onChange:M=>{const F=M.target.value.toLowerCase();if(F.trim()===""){c([]);return}const V=s.filter(q=>q.productName?.toLowerCase().includes(F)||q.sku?.toLowerCase().includes(F)||q.brand?.toLowerCase().includes(F)||q.category?.toLowerCase().includes(F)||(q.sellingPrice+"").includes(F));c(V)}}),l.length>0&&i.jsx("ul",{className:"absolute left-0 right-0 mt-1 max-h-60 overflow-y-auto text-sm z-50 rounded-xl border border-white/10 bg-[#0B0F14]/90 backdrop-blur-xl shadow-[0_12px_40px_rgba(0,0,0,0.45)]",children:l.map(M=>i.jsxs("li",{className:"px-3 py-2 cursor-pointer border-b border-white/10 hover:bg-white/10",onClick:()=>{if(t.some(V=>V.sku===M.sku)){Vt.warning("Item already added to cart.");return}r([...t,{productName:M.productName,sku:M.sku,brand:M.brand,category:M.category,quantity:"",unit:M.unit||"",description:"",notes:"",unitPrice:M.sellingPrice||"",available:M.quantity,distributorProductId:M.id}]),c([])},children:[i.jsx("div",{className:"font-semibold",children:M.productName}),i.jsxs("div",{className:"text-xs text-white/70 flex flex-wrap gap-2",children:[i.jsxs("span",{children:["Brand: ",M.brand||"â€”"]}),i.jsxs("span",{children:["SKU: ",M.sku||"â€”"]}),i.jsxs("span",{children:["Unit: ",M.unit||"â€”"]}),i.jsxs("span",{children:["Price: â‚¹",M.sellingPrice||"â€”"]}),i.jsxs("span",{className:`font-semibold ${M.quantity===0?"text-rose-300":M.quantity<=10?"text-amber-300":"text-emerald-300"}`,children:["In Stock: ",M.quantity]})]})]},M.id))})]}),i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{className:"font-medium mr-2 text-white/80",children:"Payment Mode:"}),i.jsxs("select",{className:"px-3 py-2 rounded-xl bg-white/10 border border-white/20 text-white focus:outline-none focus:ring-2 focus:ring-emerald-400/50",value:d,onChange:M=>u(M.target.value),children:[i.jsx("option",{value:"COD",children:"Cash on Delivery"}),i.jsx("option",{value:"Advance Payment",children:"Advance Payment"}),i.jsx("option",{value:"Credit Cycle",children:"Credit Cycle"}),i.jsx("option",{value:"Post-Sale Payment",children:"Post-Sale Payment"}),i.jsx("option",{value:"Split Payment",children:"Split Payment"}),i.jsx("option",{value:"Monthly Ledger",children:"Monthly Credit Statement"})]}),d==="Credit Cycle"&&i.jsx("input",{type:"number",className:"ml-4 px-3 py-2 rounded-xl bg-white/10 border border-white/20 text-white placeholder-white/60 focus:outline-none focus:ring-2 focus:ring-emerald-400/50",placeholder:"Credit days",value:f,onChange:M=>h(M.target.value)}),d==="Split Payment"&&i.jsxs("div",{className:"ml-4 flex gap-2 mt-2",children:[i.jsx("input",{type:"number",placeholder:"Advance %",className:"px-3 py-2 rounded-xl bg-white/10 border border-white/20 text-white placeholder-white/60 focus:outline-none focus:ring-2 focus:ring-emerald-400/50",value:m.advance,onChange:M=>b({...m,advance:M.target.value})}),i.jsx("input",{type:"number",placeholder:"Balance %",className:"px-3 py-2 rounded-xl bg-white/10 border border-white/20 text-white placeholder-white/60 focus:outline-none focus:ring-2 focus:ring-emerald-400/50",value:m.balance,onChange:M=>b({...m,balance:M.target.value})})]})]}),t.map((M,F)=>{const V=parseFloat(M.quantity||0)||0,q=parseFloat(M.unitPrice||0)||0,K=V*q,ne=!!g[F];return i.jsxs("div",{className:"mb-2 rounded-lg border border-white/10 bg-white/[0.04] p-2 md:p-3 shadow-sm",children:[i.jsxs("div",{className:"flex items-center justify-between gap-2",children:[i.jsxs("div",{className:"min-w-0",children:[i.jsx("div",{className:"text-sm font-semibold truncate leading-tight",children:M.productName||"Selected product"}),i.jsxs("div",{className:"mt-0.5 text-[11px] text-white/60 flex flex-wrap gap-x-3 gap-y-0.5",children:[i.jsxs("span",{className:"truncate",children:["SKU: ",M.sku||"â€”"]}),M.brand&&i.jsxs("span",{className:"truncate",children:["Brand: ",M.brand]}),M.category&&i.jsxs("span",{className:"truncate",children:["Category: ",M.category]}),M.available!==void 0&&i.jsxs("span",{className:`truncate ${M.available===0?"text-rose-300":M.available<=10?"text-amber-300":"text-emerald-300"}`,children:["In Stock: ",M.available]})]})]}),i.jsxs("div",{className:"flex items-center gap-2 shrink-0",children:[i.jsxs("div",{className:"hidden md:block text-xs text-white/70",children:["Subtotal: ",i.jsx("span",{className:"font-semibold text-white/90",children:v(K)})]}),i.jsx("button",{onClick:()=>p(Z=>({...Z,[F]:!Z[F]})),className:"px-2 py-1 text-xs rounded border border-white/10 bg-white/5 hover:bg-white/10",title:ne?"Collapse":"Expand",children:ne?"Hide":"More"}),i.jsx("button",{onClick:()=>{const Z=t.filter((T,_)=>_!==F);r(Z)},className:"px-2 py-1 text-xs rounded border border-white/10 bg-white/5 hover:bg-white/10 text-rose-300",title:"Remove Item",children:"Remove"})]})]}),i.jsxs("div",{className:"mt-2 grid grid-cols-2 md:grid-cols-8 gap-2",children:[i.jsxs("div",{className:"col-span-1 md:col-span-2",children:[i.jsx("label",{className:"sr-only",children:"Quantity"}),i.jsx("input",{type:"number",placeholder:"Qty",className:"h-9 w-full rounded-md border border-white/15 bg-white/10 px-2 text-sm text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-emerald-400/40",value:M.quantity,onChange:Z=>O(F,"quantity",Z.target.value)})]}),i.jsxs("div",{className:"col-span-1 md:col-span-2",children:[i.jsx("label",{className:"sr-only",children:"Unit"}),i.jsx("div",{className:"h-9 w-full rounded-md border border-white/15 bg-white/10 px-2 text-sm text-white/80 flex items-center",tabIndex:-1,"aria-readonly":"true",children:M.unit||"â€”"})]}),i.jsxs("div",{className:"col-span-1 md:col-span-2",children:[i.jsx("label",{className:"sr-only",children:"Unit Price"}),i.jsx("div",{className:"h-9 w-full rounded-md border border-white/15 bg-white/10 px-2 text-sm text-white/80 flex items-center justify-between",tabIndex:-1,"aria-readonly":"true",children:i.jsx("span",{className:"truncate",children:M.unitPrice?`â‚¹${M.unitPrice}`:"â€”"})})]}),i.jsxs("div",{className:"col-span-1 md:col-span-2",children:[i.jsx("label",{className:"sr-only",children:"SKU"}),i.jsx("div",{className:"h-9 w-full rounded-md border border-white/15 bg-white/10 px-2 text-sm text-white/80 flex items-center",tabIndex:-1,"aria-readonly":"true",children:i.jsx("span",{className:"truncate",children:M.sku||"â€”"})})]}),i.jsxs("div",{className:"col-span-2 md:col-span-0 md:hidden text-xs text-white/70",children:["Subtotal: ",i.jsx("span",{className:"font-semibold text-white/90",children:v(K)})]})]}),ne&&i.jsxs("div",{className:"mt-2 grid grid-cols-2 md:grid-cols-8 gap-2",children:[i.jsxs("div",{className:"col-span-2 md:col-span-4",children:[i.jsx("label",{className:"text-[11px] uppercase tracking-wide text-white/50",children:"Description"}),i.jsx("input",{type:"text",placeholder:"Description",className:"mt-1 h-9 w-full rounded-md border border-white/15 bg-white/10 px-2 text-sm text-white placeholder-white/60 focus:outline-none focus:ring-2 focus:ring-emerald-400/40",value:M.description,onChange:Z=>O(F,"description",Z.target.value)})]}),i.jsxs("div",{className:"col-span-2 md:col-span-4",children:[i.jsx("label",{className:"text-[11px] uppercase tracking-wide text-white/50",children:"Notes"}),i.jsx("input",{type:"text",placeholder:"Notes for supplier (optional)",className:"mt-1 h-9 w-full rounded-md border border-white/15 bg-white/10 px-2 text-sm text-white placeholder-white/60 focus:outline-none focus:ring-2 focus:ring-emerald-400/40",value:M.notes,onChange:Z=>O(F,"notes",Z.target.value)})]})]})]},F)}),i.jsx("button",{onClick:A,className:"mb-3 px-3 py-1 rounded-xl text-sm font-medium text-slate-900 bg-gradient-to-r from-emerald-400 via-teal-300 to-cyan-400 hover:shadow-[0_6px_20px_rgba(16,185,129,0.35)]",children:"+ Add Item"}),i.jsx(XF,{className:"mb-3"}),i.jsxs("div",{className:"text-right font-semibold text-lg mb-3 text-white",children:["Estimate (pre-tax): â‚¹",t.reduce((M,F)=>M+parseFloat(F.unitPrice||0)*parseFloat(F.quantity||0),0).toFixed(2)]}),k&&w?.enabled&&i.jsxs("div",{className:"mb-3 rounded-lg border border-white/10 bg-white/5 p-3",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("div",{className:"text-sm font-semibold text-white",children:"Charges Preview"}),i.jsx("span",{className:"text-xs text-emerald-300",children:"Proforma skipped"})]}),S?i.jsxs("div",{className:"text-sm",children:[i.jsxs("div",{className:"flex items-center justify-between py-0.5",children:[i.jsx("span",{className:"text-white/70",children:"Subtotal"}),i.jsx("span",{className:"text-white",children:v(S.subTotal||S.subtotal||C(t))})]}),Number(S.discountAmt||0)>0&&i.jsxs("div",{className:"flex items-center justify-between py-0.5",children:[i.jsx("span",{className:"text-white/70",children:"Discount"}),i.jsxs("span",{className:"text-white",children:["- ",v(S.discountAmt)]})]}),Number(S.delivery||0)>0&&i.jsxs("div",{className:"flex items-center justify-between py-0.5",children:[i.jsx("span",{className:"text-white/70",children:"Delivery"}),i.jsx("span",{className:"text-white",children:v(S.delivery)})]}),Number(S.packing||0)>0&&i.jsxs("div",{className:"flex items-center justify-between py-0.5",children:[i.jsx("span",{className:"text-white/70",children:"Packing"}),i.jsx("span",{className:"text-white",children:v(S.packing)})]}),Number(S.insurance||0)>0&&i.jsxs("div",{className:"flex items-center justify-between py-0.5",children:[i.jsx("span",{className:"text-white/70",children:"Insurance"}),i.jsx("span",{className:"text-white",children:v(S.insurance)})]}),Number(S.other||0)>0&&i.jsxs("div",{className:"flex items-center justify-between py-0.5",children:[i.jsx("span",{className:"text-white/70",children:"Other"}),i.jsx("span",{className:"text-white",children:v(S.other)})]}),i.jsx("div",{className:"my-1 border-t border-dashed border-white/15"}),i.jsxs("div",{className:"flex items-center justify-between py-0.5",children:[i.jsx("span",{className:"text-white/70",children:"Taxes"}),i.jsx("span",{className:"text-white",children:v(S.taxes||0)})]}),i.jsxs("div",{className:"flex items-center justify-between py-0.5",children:[i.jsx("span",{className:"text-white/70",children:"Round Off"}),i.jsx("span",{className:"text-white",children:v(S.roundOff||0)})]}),i.jsxs("div",{className:"flex items-center justify-between py-0.5 font-semibold",children:[i.jsx("span",{className:"text-white",children:"Grand Total"}),i.jsx("span",{className:"text-white",children:v(S.grandTotal||C(t))})]})]}):i.jsx("div",{className:"text-xs text-white/60",children:"Distributor defaults will be applied when placing the order."})]}),i.jsx("button",{onClick:B,disabled:n||!e,className:"block w-full py-2 rounded-xl font-medium text-slate-900 bg-gradient-to-r from-emerald-400 via-teal-300 to-cyan-400 disabled:opacity-60 hover:shadow-[0_8px_24px_rgba(16,185,129,0.35)]",children:n?"Sending Order...":"Send Order"})]})},Nw=({distributor:e,onBack:t})=>{if(!e)return console.warn("âš ï¸ No distributor passed to ConnectedDistributorPanel"),i.jsx("div",{className:"p-4 text-red-600",children:"Error: No distributor selected."});const[r,n]=x.useState("overview"),a=()=>{switch(r){case"overview":return i.jsxs("div",{className:"p-4",children:[i.jsx("h3",{className:"text-lg font-semibold mb-2 bg-clip-text text-transparent bg-gradient-to-r from-white via-white to-emerald-200",children:"Distributor Overview"}),i.jsxs("p",{children:[i.jsx("strong",{children:"Name:"})," ",e?.businessName||e?.distributorName||e?.name||e?.ownerName||"N/A"]}),i.jsxs("p",{children:[i.jsx("strong",{children:"City:"})," ",e?.city||"N/A"]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Phone:"})," ",e?.phone||"N/A"]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Email:"})," ",e?.email||"N/A"]}),i.jsxs("p",{children:[i.jsx("strong",{children:"ID:"})," ",e?.id||"N/A"]})]});case"enquiry":return i.jsxs("div",{className:"p-4",children:[i.jsx("h3",{className:"text-lg font-semibold mb-2 bg-clip-text text-transparent bg-gradient-to-r from-white via-white to-emerald-200",children:"Send Enquiry"}),i.jsx("textarea",{className:"w-full p-3 rounded-xl bg-white/10 border border-white/20 text-white placeholder-white/60 focus:outline-none focus:ring-2 focus:ring-emerald-400/50",rows:"4",placeholder:"Type your message about item, pricing or availability..."}),i.jsx("button",{className:"mt-2 px-4 py-2 rounded-xl font-medium text-slate-900 bg-gradient-to-r from-emerald-400 via-teal-300 to-cyan-400 hover:shadow-[0_8px_24px_rgba(16,185,129,0.35)]",children:"Send Enquiry"})]});case"order":return i.jsxs("div",{className:"p-4",children:[i.jsx("h3",{className:"text-lg font-semibold mb-2 bg-clip-text text-transparent bg-gradient-to-r from-white via-white to-emerald-200",children:"Place Order"}),i.jsx(JF,{distributorId:e?.id})]});case"chat":return i.jsx("div",{className:"p-4",children:i.jsx(QF,{distributor:e})});default:return null}};return i.jsxs("div",{className:"mt-4 p-4 rounded-xl bg-white/10 backdrop-blur-xl border border-white/10 shadow-[0_8px_40px_rgba(0,0,0,0.35)] text-white",children:[i.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-white/10 bg-white/5 rounded-t-xl",children:[i.jsxs("h2",{className:"text-lg font-semibold bg-clip-text text-transparent bg-gradient-to-r from-white via-white to-emerald-200",children:["Connected to ",e?.businessName||e?.distributorName||e?.name||e?.ownerName||"N/A"]}),t&&i.jsx("button",{onClick:t,className:"text-sm text-white/80 hover:text-white","data-testid":"back-to-distributors",children:"â† Back"})]}),i.jsx("div",{className:"flex border-b border-white/10",children:[{key:"overview",label:"Distributor Overview"},{key:"enquiry",label:"Send Enquiry"},{key:"order",label:"Place Order"},{key:"chat",label:"Smart Assistant"}].map(({key:s,label:o})=>i.jsx("button",{className:`px-4 py-2 text-sm capitalize font-medium ${r===s?"text-emerald-300 border-b-2 border-emerald-400":"text-white/70 hover:text-white"}`,onClick:()=>n(s),children:o},s))}),i.jsx("div",{children:a()})]})},e6=({onSelect:e})=>{const[t,r]=x.useState([]),[n,a]=x.useState(!1),s=xe.currentUser;x.useEffect(()=>{s&&o()},[s]);const o=async()=>{a(!0);try{const u=ue(J,`businesses/${s.uid}/connectedDistributors`),f=await ye(u);if(f.empty)console.warn(`[ConnectedDistributors] âŒ No connectedDistributors found for user: ${s.uid}`),r([]);else{const m=f.docs.map(b=>{const g=b.data()||{};return{id:b.id,distributorName:g.distributorName||"Unnamed Distributor",city:g.city||"Unknown City",email:g.distributorEmail||"Not Provided",phone:g.distributorPhone||"Not Provided",distributorOwner:g.distributorOwner||"",...g}}).sort((b,g)=>{const p=b.distributorName.toLowerCase(),v=g.distributorName.toLowerCase();return p.localeCompare(v)});console.log(`[ConnectedDistributors] âœ… Found ${m.length} connected distributors`),r(m)}}catch(u){console.error("[ConnectedDistributors] ðŸ”¥ Error fetching connected distributors:",u),r([])}a(!1)},[l,c]=x.useState(null),d=async u=>{try{const f=ve(J,"businesses",u.id),h=await Yt(f);if(h.exists()){const m=h.data();c({...u,...m})}else console.warn(`No profile found for distributor ID: ${u.id}`),c(u)}catch(f){console.error("Failed to fetch distributor profile:",f),c(u)}};return i.jsx("div",{className:"text-white",children:n?i.jsx("div",{className:"text-center py-8 text-white/80",children:"Loading connected distributors..."}):l?i.jsxs("div",{children:[i.jsxs("h3",{className:"mb-4 text-lg font-semibold bg-clip-text text-transparent bg-gradient-to-r from-white via-white to-emerald-200",children:["Distributor: ",l?.distributorName||l?.id]}),i.jsx(Nw,{distributor:l,onBack:()=>c(null)})]}):t.length===0?i.jsx("div",{className:"text-center py-8 text-white/70",children:"No connected distributors found."}):i.jsxs("div",{children:[i.jsx("h3",{className:"mb-2 text-lg font-semibold bg-clip-text text-transparent bg-gradient-to-r from-white via-white to-emerald-200",children:"View Connected Distributors"}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:t.map(u=>i.jsxs("div",{className:"p-4 rounded-xl bg-white/10 backdrop-blur-xl border border-white/10 shadow-[0_8px_30px_rgba(0,0,0,0.35)]",children:[i.jsx("h4",{className:"font-medium text-white",children:u.distributorOwner||u.distributorName||u.id}),i.jsx("p",{className:"text-sm text-white/70",children:u.city||"City unknown"}),(u.phone||u.email)&&i.jsxs("p",{className:"text-sm text-white/70 mt-1",children:[u.phone&&i.jsxs("span",{children:["Phone: ",u.phone," "]}),u.email&&i.jsxs("span",{children:["Email: ",u.email]})]}),i.jsx("button",{onClick:()=>d(u),className:"mt-2 text-sm px-3 py-1 rounded-lg font-medium text-slate-900 bg-gradient-to-r from-emerald-400 via-teal-300 to-cyan-400 hover:shadow-[0_6px_20px_rgba(16,185,129,0.35)]",children:"View Details"}),i.jsx("p",{className:"mt-1 text-xs text-emerald-300 font-semibold",children:"Connected"})]},u.id))})]})})},t6=({distributor:e,onClose:t})=>{const[r,n]=x.useState(""),[a,s]=x.useState(!1),o=xe.currentUser,l=async()=>{if(!o||!e?.id){alert("Missing user or distributor info.");return}s(!0);const c=o.uid,d=e.id,u=await Yt(ve(J,"businesses",c)),f=u.exists()?u.data():{},h={retailerId:c,retailerName:o.displayName||"Retailer",businessName:f.businessName||"",ownerName:f.ownerName||"",email:f.email||"",phone:f.phone||"",city:f.city||"",message:r||"",sentAt:Ke(),status:"pending"};console.log("ðŸ“¦ Sending request to distributor:",d),console.log("ðŸ§¾ Request payload:",h);try{await Kt(ve(J,`businesses/${d}/connectionRequests/${c}`),h,{merge:!0}),await Kt(ve(J,`businesses/${c}/sentRequests/${d}`),{distributorId:d,distributorName:e.businessName||e.displayName||"Distributor",retailerId:c,message:r||"",sentAt:Ke(),status:"pending"},{merge:!0}),alert("âœ… Connection request sent!"),t()}catch(m){console.error("âŒ Error sending request:",m),alert("Failed to send request. Check console for details.")}finally{s(!1)}};return i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-40 flex justify-center items-center z-50",children:i.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md w-full max-w-md",children:[i.jsxs("h3",{className:"text-lg font-semibold mb-4",children:["Connect with ",e.businessName]}),i.jsx("textarea",{className:"w-full border px-3 py-2 rounded mb-4",placeholder:"Optional message...",rows:3,value:r,onChange:c=>n(c.target.value)}),i.jsxs("div",{className:"flex justify-end gap-2",children:[i.jsx("button",{onClick:t,className:"px-4 py-2 bg-gray-300 rounded hover:bg-gray-400",children:"Cancel"}),i.jsx("button",{onClick:l,className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",disabled:a,children:a?"Sending...":"Send Request"})]})]})})},r6=async(e,t)=>{const r=ve(J,"businesses",e,"sentRequests",t),n=ve(J,"businesses",t,"connectionRequests",e),[a,s]=await Promise.all([Yt(r),Yt(n)]);if(a.exists()&&s.exists()){const o=a.data().status,l=s.data().status;return o==="accepted"&&l==="accepted"?"connected":o||l||null}else{if(a.exists())return a.data().status;if(s.exists())return s.data().status}return null},n6=()=>{const[e,t]=x.useState(""),[r,n]=x.useState([]),[a,s]=x.useState(!1),[o,l]=x.useState(null),[c,d]=x.useState(!1),u=async()=>{if(!e.trim())return;s(!0);const f=_e(ue(J,"businesses"),gt("role","==","Distributor"));let h=[];try{h=await ye(f)}catch(g){console.error("ðŸ”¥ Firestore search error:",g.message),alert("Permission error or network issue. Please check your Firebase rules or connection."),s(!1);return}const m=[],b=xe.currentUser?.uid;for(const g of h.docs){const p=g.data(),v=g.id;if(p.businessName?.toLowerCase().includes(e.toLowerCase())||p.ownerName?.toLowerCase().includes(e.toLowerCase())||p.phone?.includes(e)||p.city?.toLowerCase().includes(e.toLowerCase())||v===e){const w=await r6(b,v);m.push({id:v,...p,requestStatus:w})}}n(m),s(!1)};return i.jsxs("div",{className:"p-4 text-white",children:[i.jsx("h2",{className:"text-lg font-semibold mb-2 bg-clip-text text-transparent bg-gradient-to-r from-white via-white to-emerald-200",children:"Search Distributors"}),i.jsxs("div",{className:"flex gap-2 mb-4",children:[i.jsx("input",{type:"text",placeholder:"Search by name, phone, city or ID",value:e,onChange:f=>t(f.target.value),className:"px-3 py-2 rounded-xl w-full bg-white/10 border border-white/20 text-white placeholder-white/60 focus:outline-none focus:ring-2 focus:ring-emerald-400/50"}),i.jsx("button",{onClick:u,className:"px-4 py-2 rounded-xl font-medium text-slate-900 bg-gradient-to-r from-emerald-400 via-teal-300 to-cyan-400 hover:shadow-[0_8px_24px_rgba(16,185,129,0.35)]",children:a?"Searching...":"Search"})]}),i.jsxs("div",{children:[r.length===0&&!a&&i.jsx("p",{className:"text-white/70",children:"No distributors found."}),r.map(f=>i.jsxs("div",{className:"p-3 rounded-xl mb-2 flex justify-between items-center bg-white/10 backdrop-blur-xl border border-white/10 shadow-[0_8px_30px_rgba(0,0,0,0.35)]",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-medium text-white",children:f.businessName}),i.jsxs("p",{className:"text-sm text-white/70",children:["Owner: ",f.ownerName]}),i.jsxs("p",{className:"text-sm text-white/60",children:["City: ",f.city]}),i.jsxs("p",{className:"text-sm text-white/60",children:["Phone: ",f.phone]}),i.jsxs("p",{className:"text-sm text-white/60",children:["ID: ",f.id]})]}),f.requestStatus==="connected"?i.jsx("span",{className:"px-3 py-1 rounded text-slate-900 bg-emerald-400",children:"Connected"}):f.requestStatus==="accepted"?i.jsx("span",{className:"px-3 py-1 rounded text-slate-900 bg-emerald-300",children:"Accepted"}):f.requestStatus==="pending"?i.jsx("span",{className:"px-3 py-1 rounded bg-white/20 text-white/80",children:"Request Sent"}):i.jsx("button",{onClick:()=>{l(f),d(!0)},className:"px-3 py-1 rounded-lg font-medium text-slate-900 bg-gradient-to-r from-emerald-400 via-teal-300 to-cyan-400 hover:shadow-[0_6px_20px_rgba(16,185,129,0.35)]",children:"Send Request"})]},f.id))]}),c&&o&&i.jsx(t6,{distributor:o,onClose:()=>{d(!1),l(null)}})]})},a6=()=>{const[e,t]=x.useState([]),[r,n]=x.useState(!1),a=xe.currentUser;return x.useEffect(()=>{if(!a)return;const s=ue(J,`businesses/${a.uid}/sentRequests`),o=ht(s,l=>{const c=l.docs.map(d=>({id:d.id,...d.data()}));t(c)});return()=>o()},[a]),i.jsxs("div",{className:"p-4 text-white",children:[i.jsx("h2",{className:"text-xl font-semibold mb-4 bg-clip-text text-transparent bg-gradient-to-r from-white via-white to-emerald-200",children:"Your Sent Distributor Requests"}),r?i.jsx("p",{className:"text-white/80",children:"Loading..."}):e.length===0?i.jsx("p",{className:"text-white/70",children:"You havenâ€™t sent any requests yet."}):i.jsx("ul",{className:"space-y-3",children:e.map(s=>i.jsxs("li",{className:"p-4 rounded-xl flex justify-between items-center bg-white/10 backdrop-blur-xl border border-white/10 shadow-[0_8px_30px_rgba(0,0,0,0.35)]",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-medium text-white",children:s.distributorName}),i.jsxs("p",{className:"text-sm text-white/70",children:["Distributor ID: ",s.distributorId]}),i.jsxs("p",{className:"text-sm text-white/60",children:["Status: ",s.status]})]}),s.status==="pending"&&i.jsx("button",{disabled:!0,className:"px-3 py-1 rounded-lg bg-white/20 text-white/80 cursor-not-allowed",children:"Pending"}),s.status==="active"&&i.jsx("span",{className:"px-3 py-1 rounded-lg text-slate-900 bg-emerald-400",children:"Connected"})]},s.id))})]})},i6=()=>{const[e,t]=x.useState([]),[r,n]=x.useState([]),[a,s]=x.useState(!0),[o,l]=x.useState(null),[c,d]=x.useState(!1);x.useEffect(()=>{const g=xe.currentUser?.uid;if(!g)return;const p=ue(J,`businesses/${g}/products`),v=ht(p,async w=>{const y=w.docs.map(S=>({id:S.id,...S.data()}));t(y),y.length>0?await u(g,y):(n([]),s(!1))});return()=>v()},[]);const u=async(g,p)=>{d(!0);try{const v=await p1(g,p,"retailer");n(v)}catch(v){console.error("Error calculating forecasts:",v),Vt.error("Failed to calculate forecasts")}finally{s(!1),d(!1)}},f=async()=>{const g=xe.currentUser?.uid;!g||e.length===0||(await u(g,e),Vt.success("Updated!"))},h=r.filter(g=>g.riskLevel==="critical"),m=r.filter(g=>g.riskLevel==="high");h.length+m.length;const b=r.reduce((g,p)=>g+(p.recommendedOrderQuantity||0),0);return a?i.jsxs("div",{className:"flex items-center justify-center h-64",children:[i.jsx(pf,{className:"animate-spin text-4xl text-emerald-400"}),i.jsx("p",{className:"ml-4 text-white/60",children:"Analyzing your products..."})]}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsxs("h2",{className:"text-2xl font-bold text-white flex items-center gap-2",children:[i.jsx(Tr,{className:"text-emerald-400"}),"Smart Stock Predictor"]}),i.jsx("p",{className:"text-white/60 text-sm mt-1",children:"See which products will finish soon and how much to order"})]}),i.jsxs("button",{onClick:f,disabled:c,className:"px-4 py-2 bg-emerald-500 hover:bg-emerald-600 disabled:bg-emerald-500/50 rounded-lg text-white text-sm flex items-center gap-2 transition",children:[c?i.jsx(pf,{className:"animate-spin"}):"ðŸ”„"," Update"]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[i.jsx(U.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-red-500/10 border border-red-500/30 rounded-xl p-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-red-300 text-sm",children:"Will Finish Soon"}),i.jsx("p",{className:"text-xs text-red-200/70 mb-1",children:"(Less than 7 days)"}),i.jsx("p",{className:"text-2xl font-bold text-white mt-1",children:h.length})]}),i.jsx(mu,{className:"text-red-400 text-2xl"})]})}),i.jsx(U.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-amber-500/10 border border-amber-500/30 rounded-xl p-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-amber-300 text-sm",children:"Order Needed"}),i.jsx("p",{className:"text-xs text-amber-200/70 mb-1",children:"(Within 2 weeks)"}),i.jsx("p",{className:"text-2xl font-bold text-white mt-1",children:m.length})]}),i.jsx(ks,{className:"text-amber-400 text-2xl"})]})}),i.jsx(U.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-blue-500/10 border border-blue-500/30 rounded-xl p-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-blue-300 text-sm",children:"Total Products"}),i.jsx("p",{className:"text-xs text-blue-200/70 mb-1",children:"(In your shop)"}),i.jsx("p",{className:"text-2xl font-bold text-white mt-1",children:r.length})]}),i.jsx(pu,{className:"text-blue-400 text-2xl"})]})}),i.jsx(U.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"bg-emerald-500/10 border border-emerald-500/30 rounded-xl p-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-emerald-300 text-sm",children:"Order from Distributor"}),i.jsx("p",{className:"text-xs text-emerald-200/70 mb-1",children:"(Recommended)"}),i.jsx("p",{className:"text-2xl font-bold text-white mt-1",children:b})]}),i.jsx(Na,{className:"text-emerald-400 text-2xl"})]})})]}),r.length===0?i.jsxs("div",{className:"bg-white/5 rounded-xl p-8 text-center border border-white/10",children:[i.jsx(Oi,{className:"text-4xl text-white/40 mx-auto mb-4"}),i.jsx("p",{className:"text-white/60",children:"No products found. Add products to get smart predictions."})]}):i.jsx("div",{className:"space-y-3",children:r.map((g,p)=>i.jsx(s6,{forecast:g,index:p,onSelect:()=>l(g)},g.productId))}),i.jsx(Ue,{children:o&&i.jsx(l6,{forecast:o,onClose:()=>l(null)})})]})},s6=({forecast:e,index:t,onSelect:r})=>{const a=e.daysUntilStockout===null||e.daysUntilStockout===1/0?{type:"good",color:"emerald",icon:i.jsx(Ci,{className:"text-emerald-400"}),message:"Stock is good"}:e.daysUntilStockout<7?{type:"urgent",color:"red",icon:i.jsx(mu,{className:"text-red-400"}),message:`Will finish in ${e.daysUntilStockout} days!`}:e.daysUntilStockout<14?{type:"warning",color:"amber",icon:i.jsx(ks,{className:"text-amber-400"}),message:`Will finish in ${e.daysUntilStockout} days`}:{type:"good",color:"emerald",icon:i.jsx(Ci,{className:"text-emerald-400"}),message:`Stock will last ${e.daysUntilStockout} days`},s=e.confidence>30;return i.jsx(U.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:t*.05},onClick:r,className:`border rounded-xl p-4 cursor-pointer hover:bg-white/5 transition ${a.type==="urgent"?"border-red-500/50 bg-red-500/10":a.type==="warning"?"border-amber-500/50 bg-amber-500/10":"border-emerald-500/50 bg-emerald-500/10"}`,children:i.jsx("div",{className:"flex items-start justify-between",children:i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[a.icon,i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-white text-lg",children:e.productName}),e.sku&&i.jsxs("p",{className:"text-xs text-white/50",children:["SKU: ",e.sku]})]})]}),i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-white/60 mb-1",children:"You Have"}),i.jsxs("p",{className:"text-xl font-bold text-white",children:[e.currentStock," units"]})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-white/60 mb-1",children:"Will Finish In"}),i.jsx("p",{className:`text-xl font-bold ${e.daysUntilStockout===null||e.daysUntilStockout===1/0?"text-emerald-400":e.daysUntilStockout<7?"text-red-400":"text-amber-400"}`,children:e.daysUntilStockout===null||e.daysUntilStockout===1/0?"Not soon":`${e.daysUntilStockout} days`})]}),s&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-white/60 mb-1",children:"Sell Per Week"}),i.jsxs("p",{className:"text-xl font-bold text-white",children:[e.weeklyDemand||0," units"]})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-white/60 mb-1",children:"Order This Much"}),i.jsxs("p",{className:"text-xl font-bold text-emerald-400",children:[e.recommendedOrderQuantity||0," units"]})]})]})]}),i.jsx("div",{className:"mt-3 pt-3 border-t border-white/10",children:s?i.jsxs("p",{className:`text-sm ${a.type==="urgent"?"text-red-300":a.type==="warning"?"text-amber-300":"text-emerald-300"}`,children:[a.message,e.recommendedOrderQuantity>0&&i.jsxs("span",{className:"ml-2",children:["â†’ Order ",e.recommendedOrderQuantity," units from distributor"]})]}):i.jsx("div",{className:"bg-white/5 rounded-lg p-3",children:i.jsxs("p",{className:"text-sm text-white/70 flex items-center gap-2",children:[i.jsx(Oi,{className:"text-blue-400"}),i.jsxs("div",{className:"w-full",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("span",{className:"text-sm font-semibold text-white",children:"Collecting Sales Data"}),e.dataProgress&&i.jsxs("span",{className:"text-xs text-blue-400",children:[e.dataProgress.daysOfData," / ",e.dataProgress.minDaysRequired," days"]})]}),e.dataProgress&&i.jsxs("div",{className:"space-y-2",children:[i.jsx("div",{className:"w-full bg-white/10 rounded-full h-1.5 overflow-hidden",children:i.jsx(U.div,{initial:{width:0},animate:{width:`${e.dataProgress.progressPercent}%`},transition:{duration:.5},className:"h-full bg-gradient-to-r from-blue-500 to-purple-500 rounded-full"})}),i.jsx("p",{className:"text-xs text-white/60",children:e.dataProgress.daysOfData===0?`Need ${e.dataProgress.daysNeeded} days of sales to unlock predictions`:`${e.dataProgress.daysNeeded} more day${e.dataProgress.daysNeeded>1?"s":""} needed`})]})]})]})})}),s&&e.trend!=="stable"&&i.jsx("div",{className:"mt-2 flex items-center gap-2 text-sm",children:e.trend==="increasing"?i.jsxs(i.Fragment,{children:[i.jsx(n1,{className:"text-emerald-400"}),i.jsx("span",{className:"text-emerald-300",children:"Sales going up! Customers buying more."})]}):i.jsxs(i.Fragment,{children:[i.jsx(a1,{className:"text-red-400"}),i.jsx("span",{className:"text-red-300",children:"Sales going down. Customers buying less."})]})})]})})})},o6=({forecast:e})=>{const t=e.dataProgress||{daysOfData:0,daysNeeded:7,minDaysRequired:7,progressPercent:0},r=()=>{window.location.hash="#/dashboard?tab=billing"};return i.jsxs("div",{className:"space-y-6",children:[i.jsx("div",{className:"bg-gradient-to-br from-blue-500/20 via-purple-500/20 to-pink-500/20 border border-blue-500/30 rounded-xl p-6",children:i.jsxs("div",{className:"flex items-start gap-4 mb-4",children:[i.jsx("div",{className:"bg-blue-500/20 rounded-full p-3",children:i.jsx(Oi,{className:"text-3xl text-blue-400"})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("h4",{className:"font-bold text-white text-lg mb-2",children:'What is "Sales Data"?'}),i.jsxs("p",{className:"text-white/80 text-sm leading-relaxed",children:[i.jsx("strong",{className:"text-white",children:"Sales data"})," means when you sell this product to your customers. Every time you create a bill/invoice and sell this product, we track it. This helps us predict how much you'll need to order from distributors!"]})]})]})}),i.jsxs("div",{className:"bg-white/5 rounded-xl p-6 border border-white/10",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsxs("h4",{className:"font-semibold text-white flex items-center gap-2",children:[i.jsx(Tr,{className:"text-emerald-400"}),"Sales Data Collection Progress"]}),i.jsxs("span",{className:"text-sm text-white/60",children:[t.daysOfData," / ",t.minDaysRequired," days"]})]}),i.jsx("div",{className:"w-full bg-white/10 rounded-full h-3 mb-4 overflow-hidden",children:i.jsx(U.div,{initial:{width:0},animate:{width:`${t.progressPercent}%`},transition:{duration:.8,ease:"easeOut"},className:"h-full bg-gradient-to-r from-blue-500 via-purple-500 to-pink-500 rounded-full"})}),i.jsx("div",{className:"bg-white/5 rounded-lg p-4",children:t.daysOfData===0?i.jsxs("p",{className:"text-white/80 text-sm",children:[i.jsx("span",{className:"font-semibold text-white",children:"You need to start selling this product!"}),i.jsx("br",{}),"We need at least ",i.jsxs("strong",{className:"text-emerald-400",children:[t.minDaysRequired," days"]})," of sales (bills where you sold this product) to make accurate predictions."]}):i.jsxs("p",{className:"text-white/80 text-sm",children:["Great progress! You have ",i.jsxs("strong",{className:"text-emerald-400",children:[t.daysOfData," day",t.daysOfData>1?"s":""]})," of sales data.",i.jsx("br",{}),"Need ",i.jsxs("strong",{className:"text-amber-400",children:[t.daysNeeded," more day",t.daysNeeded>1?"s":""]})," to unlock smart predictions!"]})})]}),i.jsxs("div",{className:"bg-white/5 rounded-xl p-6 border border-white/10",children:[i.jsxs("h4",{className:"font-semibold text-white mb-4 flex items-center gap-2",children:[i.jsx(pu,{className:"text-purple-400"}),"How to Get Sales Data (3 Simple Steps)"]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex gap-4",children:[i.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-emerald-500 rounded-full flex items-center justify-center text-white font-bold",children:"1"}),i.jsxs("div",{className:"flex-1",children:[i.jsx("p",{className:"font-semibold text-white mb-1",children:"Add Product to Your Stock"}),i.jsx("p",{className:"text-white/70 text-sm mb-2",children:"Make sure this product is in your inventory so you can sell it to customers."})]})]}),i.jsxs("div",{className:"flex gap-4",children:[i.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center text-white font-bold",children:"2"}),i.jsxs("div",{className:"flex-1",children:[i.jsx("p",{className:"font-semibold text-white mb-1",children:"Sell to Customers"}),i.jsx("p",{className:"text-white/70 text-sm mb-2",children:"Use the Billing section to create bills and sell this product to your customers."}),i.jsx("button",{onClick:r,className:"text-sm px-4 py-2 bg-emerald-500/20 hover:bg-emerald-500/30 border border-emerald-500/50 rounded-lg text-emerald-300 transition",children:"Go to Billing â†’"})]})]}),i.jsxs("div",{className:"flex gap-4",children:[i.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-purple-500 rounded-full flex items-center justify-center text-white font-bold",children:"3"}),i.jsxs("div",{className:"flex-1",children:[i.jsx("p",{className:"font-semibold text-white mb-1",children:"Wait for Data Collection"}),i.jsxs("p",{className:"text-white/70 text-sm",children:["Every time you sell this product, we track it automatically. After ",t.minDaysRequired," days of sales, you'll get smart predictions!"]})]})]})]})]}),i.jsxs("div",{className:"bg-gradient-to-br from-emerald-500/10 to-teal-500/10 border border-emerald-500/30 rounded-xl p-6",children:[i.jsxs("h4",{className:"font-semibold text-white mb-4 flex items-center gap-2",children:[i.jsx(Ci,{className:"text-emerald-400"}),"What You'll Get Once You Have Data"]}),i.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[i.jsxs("div",{className:"bg-white/5 rounded-lg p-3",children:[i.jsx("p",{className:"text-xs text-white/60 mb-1",children:"Smart Predictions"}),i.jsx("p",{className:"text-white font-semibold",children:"Know when to order"})]}),i.jsxs("div",{className:"bg-white/5 rounded-lg p-3",children:[i.jsx("p",{className:"text-xs text-white/60 mb-1",children:"Avoid Stockouts"}),i.jsx("p",{className:"text-white font-semibold",children:"Never run out"})]}),i.jsxs("div",{className:"bg-white/5 rounded-lg p-3",children:[i.jsx("p",{className:"text-xs text-white/60 mb-1",children:"Save Money"}),i.jsx("p",{className:"text-white font-semibold",children:"Order the right amount"})]}),i.jsxs("div",{className:"bg-white/5 rounded-lg p-3",children:[i.jsx("p",{className:"text-xs text-white/60 mb-1",children:"Save Time"}),i.jsx("p",{className:"text-white font-semibold",children:"Auto recommendations"})]})]})]}),i.jsx("div",{className:"bg-amber-500/10 border border-amber-500/30 rounded-lg p-4",children:i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx(Oi,{className:"text-amber-400 text-xl mt-0.5"}),i.jsxs("div",{children:[i.jsx("p",{className:"font-semibold text-amber-300 mb-1",children:"ðŸ’¡ Quick Tip"}),i.jsx("p",{className:"text-white/80 text-sm",children:"The more you sell this product, the better our predictions become! Keep selling to customers and we'll track everything automatically."})]})]})})]})},l6=({forecast:e,onClose:t})=>{const r=e.confidence>30;return i.jsx(U.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:t,children:i.jsxs(U.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},onClick:n=>n.stopPropagation(),className:"bg-slate-900 rounded-xl border border-white/10 p-6 max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsx("h3",{className:"text-xl font-bold text-white",children:e.productName}),i.jsx("button",{onClick:t,className:"text-white/60 hover:text-white text-2xl",children:"âœ•"})]}),i.jsxs("div",{className:"space-y-6",children:[i.jsx("div",{className:`rounded-lg p-4 border ${e.daysUntilStockout!==null&&e.daysUntilStockout<7?"bg-red-500/10 border-red-500/30":e.daysUntilStockout!==null&&e.daysUntilStockout<14?"bg-amber-500/10 border-amber-500/30":"bg-emerald-500/10 border-emerald-500/30"}`,children:i.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.daysUntilStockout!==null&&e.daysUntilStockout<7?i.jsx(mu,{className:"text-red-400 text-2xl"}):e.daysUntilStockout!==null&&e.daysUntilStockout<14?i.jsx(ks,{className:"text-amber-400 text-2xl"}):i.jsx(Ci,{className:"text-emerald-400 text-2xl"}),i.jsxs("div",{children:[i.jsx("p",{className:"text-lg font-semibold text-white",children:e.daysUntilStockout===null||e.daysUntilStockout===1/0?"Stock is Good":`Will Finish in ${e.daysUntilStockout} Days`}),i.jsxs("p",{className:"text-sm text-white/60",children:["You currently have ",e.currentStock," units"]})]})]})}),r?i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"bg-white/5 rounded-lg p-4 border border-white/10",children:[i.jsxs("h4",{className:"font-semibold text-white mb-3 flex items-center gap-2",children:[i.jsx(pu,{className:"text-blue-400"}),"How Much You Sell"]}),i.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-white/60 mb-1",children:"Per Day"}),i.jsxs("p",{className:"text-xl font-bold text-white",children:[e.dailyDemand," units"]})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-white/60 mb-1",children:"This Week"}),i.jsxs("p",{className:"text-xl font-bold text-white",children:[e.weeklyDemand," units"]})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-white/60 mb-1",children:"This Month"}),i.jsxs("p",{className:"text-xl font-bold text-white",children:[e.monthlyDemand," units"]})]})]})]}),i.jsxs("div",{className:"bg-white/5 rounded-lg p-4 border border-white/10",children:[i.jsx("h4",{className:"font-semibold text-white mb-3",children:"Past Sales"}),i.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-white/60 mb-1",children:"Last 7 Days"}),i.jsxs("p",{className:"text-lg font-bold text-white",children:[e.last7DaysSales," units"]})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-white/60 mb-1",children:"Last 30 Days"}),i.jsxs("p",{className:"text-lg font-bold text-white",children:[e.last30DaysSales," units"]})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-white/60 mb-1",children:"Average Per Day"}),i.jsxs("p",{className:"text-lg font-bold text-white",children:[e.avgDailySales," units"]})]})]})]}),e.recommendedOrderQuantity>0&&i.jsxs("div",{className:"bg-emerald-500/10 border border-emerald-500/30 rounded-lg p-4",children:[i.jsxs("h4",{className:"font-semibold text-emerald-300 mb-2 flex items-center gap-2",children:[i.jsx(Na,{className:"text-emerald-400"}),"Our Recommendation"]}),i.jsx("p",{className:"text-white/80 mb-3",children:"Based on how much you sell, we suggest you order:"}),i.jsxs("div",{className:"bg-white/10 rounded-lg p-4 text-center",children:[i.jsx("p",{className:"text-3xl font-bold text-emerald-400",children:e.recommendedOrderQuantity}),i.jsx("p",{className:"text-sm text-white/60 mt-1",children:"units from distributor"})]}),i.jsx("p",{className:"text-xs text-white/50 mt-2",children:"This will keep you stocked for about 30 days"})]})]}):i.jsx(o6,{forecast:e}),r&&e.recommendedOrderQuantity>0&&i.jsxs("button",{className:"w-full py-3 bg-emerald-500 hover:bg-emerald-600 rounded-lg text-white font-semibold flex items-center justify-center gap-2 transition",children:[i.jsx(Na,{}),"Order ",e.recommendedOrderQuantity," units from Distributor"]})]})]})})},c6=()=>{const{t:e}=Yw(),{isNativeApp:t}=zn(),[r,n]=x.useState("home"),{mode:a}=gu(),[s,o]=x.useState(null),[l,c]=x.useState(null),[d,u]=x.useState("add"),[f,h]=x.useState("manual"),[m,b]=x.useState("all"),[g,p]=x.useState({start:null,end:null}),[v,w]=x.useState("search"),[y,S]=x.useState("orders"),[j,k]=x.useState(!1),[N,P]=x.useState(!1),[D,C]=x.useState(!1),[O,A]=x.useState(""),[B,M]=x.useState([]),[F,V]=x.useState(-1),[q,K]=x.useState(!1),[ne,Z]=x.useState(!1),[T,_]=x.useState(new Date),[Y,ee]=x.useState(100),[W,H]=x.useState([]);x.useEffect(()=>{const R=E=>{E.key==="Escape"&&k(!1)};return window.addEventListener("keydown",R),()=>window.removeEventListener("keydown",R)},[]),x.useEffect(()=>{const R=new Date;p(m==="month"?{start:v_(R),end:x_(R)}:m==="week"?{start:Fr(R,{weekStartsOn:1}),end:y_(R,{weekStartsOn:1})}:{start:null,end:null})},[m]),x.useEffect(()=>{a==="pos"&&k(!1)},[a]);const le=Z0();x.useEffect(()=>{const R=Ra(xe,async E=>{try{if(E){const te=ve(J,"businesses",E.uid),re=await Yt(te);if(re.exists()){const ae=re.data();c({...ae,userId:E.uid,flypId:ae.flypId||E.uid});const Q=[ae.ownerName,ae.email,ae.phone,ae.businessName,ae.address,ae.city,ae.state,ae.pincode,ae.gstNumber,ae.flypId,ae.logoUrl],oe=Q.filter(we=>we&&(typeof we=="string"?we.trim()!=="":!0)).length,Ee=Math.round(oe/Q.length*100);ee(Ee)}}else console.warn("User not authenticated yet.")}catch(te){console.error("Error fetching user profile:",te)}});return()=>R()},[]),x.useEffect(()=>{const R=setInterval(()=>{_(new Date)},6e4);return()=>clearInterval(R)},[]),x.useEffect(()=>{const R=E=>{if((E.metaKey||E.ctrlKey)&&E.key==="k"&&(E.preventDefault(),C(!0)),E.key==="Escape"&&D&&(C(!1),A(""),M([]),V(-1)),D&&B.length>0&&(E.key==="ArrowDown"&&(E.preventDefault(),V(te=>te<B.length-1?te+1:te)),E.key==="ArrowUp"&&(E.preventDefault(),V(te=>te>0?te-1:-1)),E.key==="Enter"&&F>=0)){E.preventDefault();const te=B[F];te?.action&&(te.action(),C(!1),A(""),M([]))}};return window.addEventListener("keydown",R),()=>window.removeEventListener("keydown",R)},[D,B,F]),x.useEffect(()=>{const R=localStorage.getItem("flypRecentSearchesRetailer");if(R)try{H(JSON.parse(R))}catch(E){console.error("Failed to load recent searches:",E)}},[]),x.useEffect(()=>{const R=E=>{E.target.closest(".user-menu-container")||K(!1),E.target.closest(".quick-actions-container")||Z(!1)};return document.addEventListener("click",R),()=>document.removeEventListener("click",R)},[]),x.useEffect(()=>{if(!D||!O.trim()){M([]),V(-1);return}const E=setTimeout(async()=>{const te=O.toLowerCase().trim(),re=[];if([{type:"nav",label:"Home Dashboard",icon:ho,keywords:["home","dashboard","main"],action:()=>n("home")},{type:"nav",label:"Billing",icon:jn,keywords:["billing","invoice","bill","pos"],action:()=>n("billing")},{type:"nav",label:"Inventory",icon:Nn,keywords:["inventory","products","stock","items"],action:()=>n("inventory")},{type:"nav",label:"Order History",icon:jn,keywords:["order","orders","history","past"],action:()=>n("orderHistory")},{type:"nav",label:"Analytics",icon:Tr,keywords:["analytics","stats","reports","insights"],action:()=>n("analytics")},{type:"nav",label:"Distributors",icon:xf,keywords:["distributor","distributors","supplier","suppliers"],action:()=>n("distributors")},{type:"nav",label:"Customers",icon:vf,keywords:["customer","customers","clients"],action:()=>n("customers")},{type:"nav",label:"AI Forecast",icon:gf,keywords:["ai","forecast","prediction","ai forecast"],action:()=>n("aiForecast")},{type:"nav",label:"Profile Settings",icon:ta,keywords:["profile","settings","preferences","account"],action:()=>n("profile")}].forEach(Q=>{Q.keywords.some(oe=>te.includes(oe))&&re.push({...Q,matchScore:Q.keywords.findIndex(oe=>te.includes(oe))+1})}),xe.currentUser&&te.length>=2)try{const Q=ue(J,"businesses",xe.currentUser.uid,"products");(await ye(Q)).docs.map(we=>({id:we.id,...we.data()})).forEach(we=>{const rt=(we.productName||we.name||"").toLowerCase(),mt=(we.sku||"").toLowerCase(),I=(we.brand||"").toLowerCase();(rt.includes(te)||mt.includes(te)||I.includes(te))&&re.push({type:"product",label:we.productName||we.name||"Unnamed Product",subtitle:`SKU: ${we.sku||"N/A"} | Stock: ${we.quantity||0}`,icon:Nn,action:()=>{n("inventory")},matchScore:10})})}catch(Q){console.error("Error searching products:",Q)}re.sort((Q,oe)=>(Q.matchScore||0)-(oe.matchScore||0)),M(re.slice(0,8)),V(-1)},300);return()=>clearTimeout(E)},[O,D,xe.currentUser,J]);const $=()=>{$w(xe).then(()=>{le("/auth?type=login")}).catch(R=>{console.error("Sign out error:",R)})},L=[{id:"home",label:e("retailer.home"),icon:i.jsx(ho,{})},{id:"marketplace",label:"Marketplace",icon:i.jsx(Na,{}),badge:"NEW"},{id:"billing",label:e("retailer.billing"),icon:i.jsx(jn,{})},{id:"inventory",label:e("retailer.inventory"),icon:i.jsx(Nn,{})},{id:"aiForecast",label:"AI Forecast",icon:i.jsx(gf,{})},{id:"analytics",label:e("retailer.analytics"),icon:i.jsx(Tr,{})},{id:"distributors",label:e("retailer.distributors"),icon:i.jsx(xf,{})},{id:"orderHistory",label:e("retailer.orderHistory"),icon:i.jsx(jn,{})},{id:"customers",label:e("retailer.customers"),icon:i.jsx(vf,{})},{id:"employees",label:e("retailer.employees"),icon:i.jsx(i1,{})},{id:"profile",label:e("retailer.profile"),icon:i.jsx(ta,{})}],G={initial:{opacity:0,y:14},enter:{opacity:1,y:0,transition:{duration:.28,ease:"easeOut"}},exit:{opacity:0,y:-10,transition:{duration:.2,ease:"easeIn"}}};return i.jsxs(i.Fragment,{children:[i.jsx("style",{children:`
        /* FLYP Menu Animation - Flight-inspired wing opening */
        .hamburger-line {
          transition: all 0.3s cubic-bezier(0.68, -0.55, 0.265, 1.55);
          transform-origin: center;
        }

        .hamburger-open .hamburger-line:nth-child(1) {
          transform: translateY(8px) rotate(45deg);
        }

        .hamburger-open .hamburger-line:nth-child(2) {
          opacity: 0;
          transform: scaleX(0);
        }

        .hamburger-open .hamburger-line:nth-child(3) {
          transform: translateY(-8px) rotate(-45deg);
        }

        /* Glow effect on sidebar */
        .flyp-sidebar-glow {
          box-shadow: 
            -10px 0 40px rgba(16, 185, 129, 0.15),
            -20px 0 60px rgba(6, 182, 212, 0.1),
            inset 1px 0 0 rgba(16, 185, 129, 0.1);
        }

        /* Magnetic pull effect */
        .flyp-menu-trigger {
          position: relative;
          transition: all 0.3s cubic-bezier(0.68, -0.55, 0.265, 1.55);
        }

        .flyp-menu-trigger:hover {
          transform: scale(1.1);
        }

        .flyp-menu-trigger::before {
          content: '';
          position: absolute;
          inset: -8px;
          border-radius: 50%;
          background: radial-gradient(circle, rgba(16, 185, 129, 0.2) 0%, transparent 70%);
          opacity: 0;
          transition: opacity 0.3s;
        }

        .flyp-menu-trigger:hover::before {
          opacity: 1;
        }

        /* Custom scrollbar for sidebar */
        .custom-scrollbar::-webkit-scrollbar {
          width: 6px;
        }
        .custom-scrollbar::-webkit-scrollbar-track {
          background: transparent;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb {
          background: rgba(255, 255, 255, 0.1);
          border-radius: 3px;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb:hover {
          background: rgba(255, 255, 255, 0.2);
        }
      `}),i.jsxs("div",{className:"flex min-h-[100dvh] h-screen w-full relative overflow-hidden bg-gradient-to-br from-[#0B0F14] via-[#0D1117] to-[#0B0F14] text-white font-sans transition-all duration-300 ease-in-out",children:[i.jsxs("div",{className:"pointer-events-none absolute inset-0 opacity-40",children:[i.jsx("div",{className:"absolute -top-24 -left-24 w-[60vmax] h-[60vmax] rounded-full blur-2xl will-change-transform bg-gradient-to-tr from-emerald-500/40 via-teal-400/30 to-cyan-400/30"}),i.jsx("div",{className:"absolute -bottom-24 -right-24 w-[50vmax] h-[50vmax] rounded-full blur-2xl will-change-transform bg-gradient-to-tr from-cyan-500/30 via-sky-400/20 to-emerald-400/30"})]}),j&&i.jsx(Ue,{children:i.jsx(U.div,{className:"fixed inset-0 z-50 md:hidden",initial:{opacity:0,filter:"blur(2px)"},animate:{opacity:1,filter:"blur(0px)"},exit:{opacity:0,filter:"blur(4px)"},transition:{duration:.4,ease:[.22,1,.36,1]},style:{willChange:"opacity, filter"},onClick:()=>k(!1),children:i.jsxs(U.div,{className:"w-[85vw] sm:w-[80vw] max-w-[320px] h-full p-3 sm:p-4 bg-white/10 backdrop-blur-2xl border border-white/15 shadow-[0_8px_40px_rgba(0,0,0,0.45)]",initial:{x:-60,opacity:0},animate:{x:0,opacity:1},exit:{x:-80,opacity:0},transition:{type:"spring",stiffness:210,damping:26},style:{willChange:"transform, opacity"},onClick:R=>R.stopPropagation(),children:[i.jsx("div",{className:"text-lg sm:text-xl font-bold mb-3 sm:mb-4 bg-clip-text text-transparent bg-gradient-to-r from-white via-white to-emerald-200",children:"FLYP"}),!t&&i.jsx("div",{className:"mb-3 sm:mb-4",children:i.jsx(xo,{})}),L.map(R=>i.jsxs("button",{onClick:()=>{n(R.id),k(!1)},className:`flex items-center gap-2 sm:gap-3 px-3 sm:px-4 py-3 sm:py-2 rounded-lg w-full text-left transition text-sm sm:text-base min-h-[48px] touch-target ${r===R.id?"bg-emerald-400/20 text-emerald-200 border border-emerald-300/30":"hover:bg-white/10 active:bg-white/15"}`,children:[R.icon,i.jsx("span",{className:"flex-1",children:R.label}),R.badge&&i.jsx("span",{className:"px-2 py-0.5 text-xs font-bold bg-emerald-500 text-white rounded-full",children:R.badge})]},R.id))]})})}),a!=="pos"&&i.jsxs(i.Fragment,{children:[i.jsx(Ue,{children:N&&i.jsx(U.div,{className:"fixed inset-0 bg-gradient-to-r from-black/70 via-black/60 to-transparent backdrop-blur-sm z-40",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3,ease:"easeOut"},style:{willChange:"opacity"},onClick:()=>P(!1),children:i.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-emerald-500/5 via-transparent to-transparent"})})}),i.jsx(Ue,{children:N&&i.jsxs(U.aside,{initial:"closed",animate:"open",exit:"closed",variants:{open:{x:0,opacity:1,transition:{type:"spring",stiffness:300,damping:30,mass:.8,staggerChildren:.05,delayChildren:.1}},closed:{x:"-100%",opacity:0,transition:{type:"spring",stiffness:400,damping:40}}},className:"hidden md:block group fixed left-0 top-0 bottom-0 z-50 w-64 bg-gradient-to-br from-slate-900/98 via-slate-800/95 to-slate-900/98 backdrop-blur-2xl border-r border-emerald-500/20 flyp-sidebar-glow",style:{willChange:"transform, opacity",transformStyle:"preserve-3d"},onClick:R=>R.stopPropagation(),children:[i.jsxs(U.div,{className:"p-4 border-b border-emerald-500/20 relative overflow-hidden",variants:{open:{opacity:1,y:0},closed:{opacity:0,y:-20}},transition:{delay:.1},children:[i.jsx("div",{className:"text-xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-emerald-300 via-emerald-400 to-cyan-300 mb-4 pl-1 relative z-10",children:"FLYP"}),!t&&i.jsx(U.div,{className:"mb-3 pl-1",children:i.jsx(xo,{})}),i.jsx(U.div,{className:"absolute bottom-0 left-0 h-0.5 bg-gradient-to-r from-emerald-400 via-cyan-400 to-transparent",initial:{width:0},animate:{width:"100%"},transition:{delay:.3,duration:.5,ease:"easeOut"}})]}),i.jsx("nav",{className:"flex-1 flex flex-col gap-2 overflow-y-auto p-3 custom-scrollbar",children:L.map((R,E)=>i.jsxs(U.button,{variants:{open:{x:0,opacity:1,transition:{type:"spring",stiffness:500,damping:25,delay:E*.05}},closed:{x:-50,opacity:0,transition:{duration:.2}}},onClick:te=>{te.preventDefault(),te.stopPropagation(),n(R.id),P(!1)},className:`flex items-center gap-3 px-3 py-2 rounded-lg text-left transition-all duration-300 hover:scale-[1.02] hover:translate-x-1 hover:bg-gradient-to-r hover:from-emerald-500/10 hover:to-cyan-500/10 relative group cursor-pointer ${r===R.id?"bg-gradient-to-r from-emerald-500/20 to-cyan-500/20 text-emerald-300 shadow-lg shadow-emerald-500/20 border border-emerald-300/30":"hover:bg-white/10 text-white hover:text-emerald-300"}`,children:[i.jsx(U.span,{className:"text-xl shrink-0",whileHover:{scale:1.2,rotate:5},transition:{type:"spring",stiffness:400},children:R.icon}),i.jsx("span",{className:"truncate relative z-10 flex-1",children:R.label}),R.badge&&i.jsx("span",{className:"px-2 py-0.5 text-xs font-bold bg-emerald-500 text-white rounded-full",children:R.badge}),r===R.id&&i.jsx(U.div,{layoutId:"activeIndicator",className:"absolute left-0 top-0 bottom-0 w-1 bg-gradient-to-b from-emerald-400 to-cyan-400 rounded-r-full",initial:!1,transition:{type:"spring",stiffness:500,damping:30}})]},R.id))}),i.jsx(U.div,{className:"p-3 border-t border-emerald-500/20",variants:{open:{opacity:1,y:0},closed:{opacity:0,y:20}},transition:{delay:.2},children:i.jsx("div",{className:"text-xs text-white/50 pl-1 pb-3",children:"v1"})})]})})]}),i.jsx(Ue,{mode:"wait",children:i.jsx(U.div,{variants:G,initial:"initial",animate:"enter",exit:"exit",className:"flex-1 overflow-y-auto transition-all duration-300 ease-in-out flex flex-col relative z-10",children:a==="pos"&&!t?i.jsx(Z1,{onLogout:$}):i.jsxs(i.Fragment,{children:[i.jsxs("header",{className:"sticky top-0 z-10 w-full bg-gradient-to-r from-slate-900/95 via-slate-800/95 to-slate-900/95 backdrop-blur-xl border-b border-white/10 text-white shadow-2xl pt-[env(safe-area-inset-top)]",children:[i.jsxs("div",{className:"w-full px-4 sm:px-6 py-2.5 flex items-center justify-between gap-3 border-b border-white/5",children:[i.jsxs("div",{className:"flex items-center gap-3 flex-shrink-0",children:[i.jsxs(U.button,{onClick:()=>{window.innerWidth<768?k(!0):P(!N)},className:"flyp-menu-trigger flex items-center gap-2 px-3 py-2 hover:bg-white/10 rounded-xl transition-all relative group","aria-label":"Toggle sidebar",whileHover:{scale:1.05},whileTap:{scale:.95},children:[i.jsx(Ue,{mode:"wait",children:!N&&i.jsx(U.span,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},exit:{opacity:0,x:-10},transition:{duration:.2},className:"text-base font-bold bg-clip-text text-transparent bg-gradient-to-r from-emerald-400 via-emerald-300 to-cyan-400 tracking-wide",children:"FLYP"},"flyp-text")}),i.jsxs("div",{className:"relative w-5 h-5 flex flex-col justify-center gap-1",children:[i.jsx(U.span,{className:"hamburger-line w-5 h-0.5 bg-gradient-to-r from-emerald-400 to-cyan-400 rounded-full",animate:{rotate:N?45:0,y:N?6:0},transition:{type:"spring",stiffness:300,damping:20}}),i.jsx(U.span,{className:"hamburger-line w-5 h-0.5 bg-gradient-to-r from-emerald-400 to-cyan-400 rounded-full",animate:{opacity:N?0:1,scaleX:N?0:1},transition:{duration:.2}}),i.jsx(U.span,{className:"hamburger-line w-5 h-0.5 bg-gradient-to-r from-emerald-400 to-cyan-400 rounded-full",animate:{rotate:N?-45:0,y:N?-6:0},transition:{type:"spring",stiffness:300,damping:20}})]})]}),i.jsx("div",{className:"hidden sm:block",children:i.jsx("h1",{className:"text-lg font-bold bg-clip-text text-transparent bg-gradient-to-r from-emerald-300 via-cyan-300 to-blue-300",children:"Retailer Dashboard"})})]}),i.jsx("div",{className:"hidden lg:flex items-center flex-1 max-w-lg mx-4",children:i.jsxs(U.button,{onClick:()=>C(!0),className:"w-full flex items-center gap-3 px-4 py-2 bg-white/5 hover:bg-white/10 border border-white/10 rounded-xl transition-all text-left",whileHover:{scale:1.02},whileTap:{scale:.98},children:[i.jsx(ra,{className:"w-4 h-4 text-gray-400 flex-shrink-0"}),i.jsx("span",{className:"text-sm text-gray-400 flex-1",children:"Search anything..."}),i.jsxs("kbd",{className:"hidden xl:flex items-center gap-1 px-2 py-0.5 bg-slate-700/50 border border-white/10 rounded text-[10px] text-gray-400",children:[i.jsx(s1,{className:"w-3 h-3"}),i.jsx("span",{children:"âŒ˜K"})]})]})}),i.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[i.jsx(U.button,{onClick:()=>Z(!ne),whileHover:{scale:1.05},whileTap:{scale:.95},className:"hidden md:flex items-center justify-center p-2.5 rounded-xl bg-white/5 hover:bg-white/10 border border-white/10 transition-all relative quick-actions-container",children:i.jsx(o1,{className:"w-4 h-4 text-yellow-400"})}),i.jsx(U.button,{onClick:()=>C(!0),whileHover:{scale:1.1},whileTap:{scale:.9},className:"lg:hidden p-2.5 rounded-xl bg-white/5 hover:bg-white/10 border border-white/10 transition-all",children:i.jsx(ra,{className:"w-4 h-4 text-gray-300"})}),i.jsxs(U.button,{whileHover:{scale:1.1},whileTap:{scale:.9},className:"relative p-2.5 rounded-xl bg-white/5 hover:bg-white/10 border border-white/10 transition-all",children:[i.jsx(l1,{className:"w-4 h-4 text-gray-300"}),i.jsx(U.div,{className:"absolute -top-1 -right-1 w-2.5 h-2.5 bg-emerald-400 rounded-full border-2 border-slate-900",animate:{scale:[1,1.2,1]},transition:{repeat:1/0,duration:2}})]}),i.jsxs("div",{className:"relative user-menu-container",children:[i.jsxs(U.button,{onClick:()=>K(!q),whileHover:{scale:1.02},whileTap:{scale:.98},className:"flex items-center gap-2 px-2.5 py-2 bg-gradient-to-r from-emerald-500/20 via-emerald-400/20 to-cyan-500/20 border border-emerald-500/30 rounded-xl hover:border-emerald-500/50 transition-all backdrop-blur-sm",children:[i.jsxs("div",{className:"relative",children:[l?.logoUrl?i.jsx("img",{src:l.logoUrl,alt:l.businessName||"Business",className:"w-9 h-9 rounded-full object-cover ring-2 ring-emerald-500/50"}):i.jsx("div",{className:"w-9 h-9 rounded-full bg-gradient-to-br from-emerald-500 to-cyan-600 flex items-center justify-center ring-2 ring-emerald-500/50",children:i.jsx(ta,{className:"w-4 h-4 text-white"})}),i.jsx("div",{className:"absolute -bottom-0.5 -right-0.5 w-3 h-3 bg-green-500 rounded-full border-2 border-slate-900"})]}),i.jsxs("div",{className:"hidden md:block text-left min-w-0",children:[i.jsx("div",{className:"text-xs font-semibold text-white truncate max-w-[120px]",children:l?.businessName||l?.ownerName||"Business"}),i.jsx("div",{className:"text-[10px] text-gray-400 truncate max-w-[120px]",children:xe.currentUser?.email?.split("@")[0]||"User"})]}),i.jsx(c1,{className:`w-3 h-3 text-gray-400 hidden md:block transition-transform ${q?"rotate-180":""}`})]}),i.jsx(Ue,{children:q&&i.jsxs(U.div,{initial:{opacity:0,y:-10,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-10,scale:.95},className:"absolute right-0 top-full mt-2 w-64 bg-slate-800/95 backdrop-blur-xl border border-emerald-500/20 rounded-xl shadow-2xl overflow-hidden z-50",children:[i.jsx("div",{className:"p-3 border-b border-emerald-500/10",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsxs("div",{className:"relative",children:[l?.logoUrl?i.jsx("img",{src:l.logoUrl,alt:l.businessName||"Business",className:"w-12 h-12 rounded-full object-cover ring-2 ring-emerald-500/50"}):i.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-emerald-500 to-cyan-600 flex items-center justify-center ring-2 ring-emerald-500/50",children:i.jsx(ta,{className:"w-6 h-6 text-white"})}),i.jsx("div",{className:"absolute -bottom-0.5 -right-0.5 w-3.5 h-3.5 bg-green-500 rounded-full border-2 border-slate-800"})]}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("div",{className:"text-sm font-semibold text-white truncate",children:l?.businessName||l?.ownerName||"Business"}),i.jsx("div",{className:"text-xs text-gray-400 truncate",children:xe.currentUser?.email||"No email"}),l?.flypId&&i.jsx("div",{className:"text-[10px] text-emerald-400 font-mono mt-1",children:l.flypId})]})]})}),i.jsx("div",{className:"p-2",children:[{icon:ta,label:"Profile Settings",action:()=>{n("profile"),K(!1)}},{icon:u1,label:"Preferences",action:()=>{n("profile"),K(!1)}},{icon:Tr,label:"View Analytics",action:()=>{n("analytics"),K(!1)}},{icon:d1,label:"Sign Out",action:$,danger:!0}].map((R,E)=>i.jsxs(U.button,{onClick:R.action,whileHover:{x:4},className:`w-full flex items-center gap-3 px-3 py-2.5 rounded-lg hover:bg-emerald-500/10 transition-colors text-left ${R.danger?"text-red-400 hover:text-red-300":""}`,children:[i.jsx(R.icon,{className:`w-4 h-4 ${R.danger?"text-red-400":"text-emerald-400"}`}),i.jsx("span",{className:`text-sm ${R.danger?"text-red-400":"text-white"}`,children:R.label})]},E))})]})})]})]})]}),i.jsxs("div",{className:"w-full px-4 sm:px-6 py-2 flex items-center justify-between gap-3 text-xs bg-gradient-to-r from-emerald-900/5 via-transparent to-cyan-900/5",children:[i.jsxs("div",{className:"flex items-center gap-2.5 flex-wrap",children:[l?.flypId&&i.jsxs(U.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},className:"flex items-center gap-1.5 px-2.5 py-1 bg-gradient-to-r from-emerald-500/15 to-emerald-400/10 border border-emerald-500/30 rounded-lg shadow-[0_2px_4px_rgba(16,185,129,0.1)]",children:[i.jsx(f1,{className:"w-3 h-3 text-emerald-300"}),i.jsx("span",{className:"text-emerald-200 font-mono text-[10px] font-semibold",children:l.flypId})]}),l?.businessMode==="Online"&&i.jsxs(U.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},className:"flex items-center gap-1.5 px-2.5 py-1 bg-gradient-to-r from-green-500/15 to-emerald-500/10 border border-green-500/30 rounded-lg",children:[i.jsx(U.div,{className:"w-2 h-2 bg-green-400 rounded-full",animate:{scale:[1,1.2,1]},transition:{repeat:1/0,duration:2}}),i.jsx("span",{className:"text-green-300 text-[10px] font-medium",children:"Online"})]}),i.jsxs("div",{className:"flex items-center gap-1.5 px-2.5 py-1 bg-slate-800/50 border border-slate-700/50 rounded-lg backdrop-blur-sm",children:[i.jsx(ks,{className:"w-3 h-3 text-emerald-400/70"}),i.jsx("span",{className:"text-emerald-200/80 text-[10px] font-mono font-medium",children:T.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"})})]}),l&&Y<100&&i.jsxs(U.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},onClick:()=>n("profile"),className:"flex items-center gap-2 px-2.5 py-1 bg-gradient-to-r from-yellow-500/20 via-orange-500/15 to-yellow-500/20 border border-yellow-500/30 rounded-lg cursor-pointer hover:border-yellow-500/50 transition-all shadow-[0_2px_4px_rgba(234,179,8,0.1)]",children:[i.jsx(Tr,{className:"w-3 h-3 text-yellow-400"}),i.jsxs("span",{className:"text-yellow-300 font-semibold text-[10px]",children:[Y,"%"]}),i.jsx("div",{className:"w-14 h-1.5 bg-white/10 rounded-full overflow-hidden",children:i.jsx(U.div,{initial:{width:0},animate:{width:`${Y}%`},transition:{duration:.5,ease:"easeOut"},className:"h-full bg-gradient-to-r from-yellow-400 via-orange-400 to-yellow-400 rounded-full"})})]})]}),l&&i.jsx("div",{className:"hidden md:flex items-center gap-2",children:i.jsxs(U.div,{initial:{opacity:0,x:10},animate:{opacity:1,x:0},className:"flex items-center gap-1.5 px-2.5 py-1 bg-gradient-to-r from-emerald-500/15 to-cyan-500/10 border border-emerald-500/30 rounded-lg shadow-[0_2px_4px_rgba(16,185,129,0.1)]",children:[i.jsx(bf,{className:"w-3.5 h-3.5 text-emerald-300"}),i.jsx("span",{className:"text-emerald-200 text-[10px] font-semibold",children:"Retailer"})]})})]}),i.jsx(Ue,{children:ne&&i.jsx(U.div,{initial:{opacity:0,y:-10,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-10,scale:.95},className:"absolute right-0 top-full mt-2 w-64 bg-slate-800/95 backdrop-blur-xl border border-emerald-500/20 rounded-xl shadow-2xl overflow-hidden z-50",children:i.jsxs("div",{className:"p-2",children:[i.jsx("div",{className:"px-3 py-2 text-xs font-semibold text-emerald-400 uppercase tracking-wider",children:"Quick Actions"}),[{icon:jn,label:"New Billing",action:()=>{n("billing"),Z(!1)}},{icon:Tr,label:"View Analytics",action:()=>{n("analytics"),Z(!1)}},{icon:Nn,label:"Manage Inventory",action:()=>{n("inventory"),Z(!1)}}].map((R,E)=>i.jsxs(U.button,{onClick:R.action,whileHover:{x:4},className:"w-full flex items-center gap-3 px-3 py-2.5 rounded-lg hover:bg-emerald-500/10 transition-colors text-left",children:[i.jsx(R.icon,{className:"w-4 h-4 text-emerald-400"}),i.jsx("span",{className:"text-sm text-white",children:R.label})]},E))]})})})]}),i.jsx(Ue,{children:D&&i.jsxs(i.Fragment,{children:[i.jsx(U.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50",onClick:()=>{C(!1),A(""),M([])}}),i.jsxs(U.div,{initial:{opacity:0,scale:.95,y:-20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:-20},className:"fixed top-20 left-1/2 -translate-x-1/2 w-full max-w-2xl bg-slate-800/95 backdrop-blur-xl border border-emerald-500/20 rounded-2xl shadow-2xl z-50 overflow-hidden",onClick:R=>R.stopPropagation(),children:[i.jsx("div",{className:"p-4 border-b border-emerald-500/20",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(ra,{className:"w-5 h-5 text-emerald-400"}),i.jsx("input",{type:"text",value:O,onChange:R=>A(R.target.value),placeholder:"Search navigation, products...",className:"flex-1 bg-transparent text-white placeholder-gray-400 outline-none text-lg",autoFocus:!0,onKeyDown:R=>{if(R.key==="Enter"&&F>=0&&B[F]){const E=B[F];E?.action&&(E.action(),C(!1),A(""),M([]))}}}),i.jsx("button",{onClick:()=>{C(!1),A(""),M([])},className:"p-2 hover:bg-white/10 rounded-lg transition-colors",children:i.jsx(h1,{className:"w-4 h-4 text-gray-400"})})]})}),i.jsx("div",{className:"max-h-96 overflow-y-auto",children:O.trim()?B.length>0?i.jsx("div",{className:"p-2",children:B.map((R,E)=>{const te=R.icon||ra;return i.jsxs(U.button,{onClick:()=>{if(R.action){R.action();const re=[R.label,...W.filter(ae=>ae!==R.label)].slice(0,5);H(re),localStorage.setItem("flypRecentSearchesRetailer",JSON.stringify(re)),C(!1),A(""),M([])}},onMouseEnter:()=>V(E),className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-colors text-left ${F===E?"bg-emerald-500/20 border border-emerald-500/30":"hover:bg-emerald-500/10"}`,whileHover:{x:4},children:[i.jsx(te,{className:`w-5 h-5 ${R.type==="product","text-emerald-400"}`}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("div",{className:"text-sm font-semibold text-white truncate",children:R.label}),R.subtitle&&i.jsx("div",{className:"text-xs text-gray-400 truncate mt-0.5",children:R.subtitle})]}),F===E&&i.jsx("kbd",{className:"text-xs text-gray-400 bg-slate-700/50 px-2 py-1 rounded",children:"Enter"})]},E)})}):i.jsxs("div",{className:"p-8 text-center",children:[i.jsx(ra,{className:"w-12 h-12 text-gray-600 mx-auto mb-3"}),i.jsx("p",{className:"text-gray-400",children:"No results found"}),i.jsx("p",{className:"text-xs text-gray-500 mt-2",children:'Try searching for "inventory", "billing", "analytics", etc.'})]}):i.jsxs("div",{className:"p-4",children:[W.length>0&&i.jsxs("div",{className:"mb-4",children:[i.jsx("div",{className:"text-xs font-semibold text-gray-400 uppercase tracking-wider mb-2 px-2",children:"Recent Searches"}),i.jsx("div",{className:"flex flex-wrap gap-2",children:W.map((R,E)=>i.jsxs("button",{onClick:()=>A(R),className:"px-3 py-1.5 bg-emerald-500/10 hover:bg-emerald-500/20 border border-emerald-500/20 rounded-lg text-sm text-emerald-300 transition-colors",children:[i.jsx(m1,{className:"w-3 h-3 inline mr-1.5"}),R]},E))})]}),i.jsx("div",{className:"text-xs font-semibold text-gray-400 uppercase tracking-wider mb-2 px-2",children:"Quick Navigation"}),i.jsx("div",{className:"grid grid-cols-2 gap-2",children:[{icon:ho,label:"Home",action:()=>{n("home"),C(!1)}},{icon:jn,label:"Billing",action:()=>{n("billing"),C(!1)}},{icon:Nn,label:"Inventory",action:()=>{n("inventory"),C(!1)}},{icon:Tr,label:"Analytics",action:()=>{n("analytics"),C(!1)}}].map((R,E)=>i.jsxs(U.button,{onClick:R.action,whileHover:{scale:1.02},className:"flex items-center gap-2 px-3 py-2 bg-emerald-500/10 hover:bg-emerald-500/20 border border-emerald-500/20 rounded-lg text-left",children:[i.jsx(R.icon,{className:"w-4 h-4 text-emerald-400"}),i.jsx("span",{className:"text-sm text-white",children:R.label})]},E))})]})}),i.jsxs("div",{className:"p-3 border-t border-emerald-500/20 bg-slate-900/50 flex items-center justify-between text-xs text-gray-400",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs("span",{children:[i.jsx("kbd",{className:"px-1.5 py-0.5 bg-slate-700/50 border border-white/10 rounded",children:"â†‘â†“"})," Navigate"]}),i.jsxs("span",{children:[i.jsx("kbd",{className:"px-1.5 py-0.5 bg-slate-700/50 border border-white/10 rounded",children:"Enter"})," Select"]}),i.jsxs("span",{children:[i.jsx("kbd",{className:"px-1.5 py-0.5 bg-slate-700/50 border border-white/10 rounded",children:"Esc"})," Close"]})]}),i.jsxs("div",{children:[i.jsx("kbd",{className:"px-1.5 py-0.5 bg-slate-700/50 border border-white/10 rounded",children:"âŒ˜K"})," to open"]})]})]})]})}),i.jsxs(U.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.22,ease:[.16,1,.3,1]},className:"flex-1 w-full px-4 sm:px-6 py-4 sm:py-6 text-white",style:{paddingBottom:"calc(2rem + env(safe-area-inset-bottom))"},children:[r==="home"&&i.jsx("div",{children:i.jsxs("div",{className:"space-y-4 md:space-y-6",children:[(()=>{const R=i.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-2 sm:gap-3",children:[i.jsx("label",{htmlFor:"filter",className:"font-medium text-xs sm:text-sm md:text-base",children:"Filter:"}),i.jsxs("select",{id:"filter",value:m,onChange:E=>b(E.target.value),className:"w-full sm:w-auto px-2 py-1 rounded bg-white/10 border border-white/20 text-white focus:outline-none focus:ring-2 focus:ring-emerald-400/50 text-sm",children:[i.jsx("option",{value:"today",children:"Today"}),i.jsx("option",{value:"all",children:"All Time"}),i.jsx("option",{value:"month",children:"This Month"}),i.jsx("option",{value:"week",children:"This Week"}),i.jsx("option",{value:"custom",children:"Custom"})]}),m==="custom"&&i.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 sm:gap-3 w-full sm:w-auto",children:[i.jsx("input",{type:"date",onChange:E=>p(te=>({...te,start:new Date(E.target.value)})),className:"w-full sm:w-auto px-2 py-1 rounded bg-white/10 border border-white/20 text-white focus:outline-none focus:ring-2 focus:ring-emerald-400/50 text-sm"}),i.jsx("input",{type:"date",onChange:E=>p(te=>({...te,end:new Date(E.target.value)})),className:"w-full sm:w-auto px-2 py-1 rounded bg-white/10 border border-white/20 text-white focus:outline-none focus:ring-2 focus:ring-emerald-400/50 text-sm"})]})]});return i.jsx(Uj,{filterDates:g,headerRight:R})})(),!t&&i.jsx(U.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.6,ease:[.16,1,.3,1]},className:"mt-8 flex justify-center",children:i.jsx("div",{className:"inline-flex items-center justify-center px-4 py-2 rounded-full bg-white/10 border border-white/15 backdrop-blur-md shadow-[0_0_15px_rgba(0,0,0,0.25)] hover:shadow-[0_0_25px_rgba(0,255,200,0.2)] hover:scale-105 transition-all",children:i.jsx(xo,{})})})]})}),r==="billing"&&i.jsx(Fw,{}),r==="orderHistory"&&i.jsx(xj,{}),r==="marketplace"&&i.jsxs("div",{children:[i.jsxs("div",{className:"mb-6",children:[i.jsx("h2",{className:"text-xl font-bold text-white mb-2",children:"Customer Marketplace"}),i.jsx("p",{className:"text-white/60 text-sm",children:"Manage your store on the FLYP customer app"})]}),i.jsxs("div",{className:"flex flex-wrap gap-2 sm:gap-4 mb-4 sm:mb-6 border-b border-white/10 pb-2",children:[i.jsxs("button",{onClick:()=>S("orders"),className:`px-3 sm:px-4 py-3 sm:py-2 rounded transition text-sm sm:text-base min-h-[48px] touch-target flex items-center justify-center gap-2 ${y==="orders"?"bg-emerald-500 text-slate-900":"bg-white/10 text-white hover:bg-white/15 active:bg-white/20"}`,children:[i.jsx(Na,{}),"Customer Orders"]}),i.jsxs("button",{onClick:()=>S("products"),className:`px-3 sm:px-4 py-3 sm:py-2 rounded transition text-sm sm:text-base min-h-[48px] touch-target flex items-center justify-center gap-2 ${y==="products"?"bg-emerald-500 text-slate-900":"bg-white/10 text-white hover:bg-white/15 active:bg-white/20"}`,children:[i.jsx(Nn,{}),"Products"]}),i.jsxs("button",{onClick:()=>S("setup"),className:`px-3 sm:px-4 py-3 sm:py-2 rounded transition text-sm sm:text-base min-h-[48px] touch-target flex items-center justify-center gap-2 ${y==="setup"?"bg-emerald-500 text-slate-900":"bg-white/10 text-white hover:bg-white/15 active:bg-white/20"}`,children:[i.jsx(bf,{}),"Store Setup"]})]}),y==="orders"&&i.jsx(v1,{}),y==="products"&&i.jsx(x1,{}),y==="setup"&&i.jsx(g1,{})]}),r==="inventory"&&i.jsxs("div",{children:[i.jsxs("div",{className:"flex flex-wrap gap-2 sm:gap-4 mb-4 sm:mb-6 border-b pb-2",children:[i.jsx("button",{onClick:()=>u("add"),className:`px-3 sm:px-4 py-3 sm:py-2 rounded transition text-sm sm:text-base min-h-[48px] touch-target flex items-center justify-center ${d==="add"?"bg-emerald-500 text-slate-900":"bg-white/10 text-white hover:bg-white/15 active:bg-white/20"}`,children:"âž• Add Inventory"}),i.jsx("button",{onClick:()=>u("view"),className:`px-3 sm:px-4 py-3 sm:py-2 rounded transition text-sm sm:text-base min-h-[48px] touch-target flex items-center justify-center ${d==="view"?"bg-emerald-500 text-slate-900":"bg-white/10 text-white hover:bg-white/15 active:bg-white/20"}`,children:"ðŸ“‹ View Inventory"}),i.jsx("button",{onClick:()=>u("group"),className:`px-3 sm:px-4 py-3 sm:py-2 rounded transition text-sm sm:text-base min-h-[48px] touch-target flex items-center justify-center ${d==="group"?"bg-emerald-500 text-slate-900":"bg-white/10 text-white hover:bg-white/15 active:bg-white/20"}`,children:"ðŸ§© Group Items"}),i.jsx("button",{onClick:()=>u("lowstock"),className:`px-3 sm:px-4 py-3 sm:py-2 rounded transition text-sm sm:text-base min-h-[48px] touch-target flex items-center justify-center ${d==="lowstock"?"bg-emerald-500 text-slate-900":"bg-white/10 text-white hover:bg-white/15 active:bg-white/20"}`,children:"ðŸš¨ Low Stock Alerts"})]}),d==="add"&&i.jsxs("div",{children:[i.jsx("h3",{className:"text-base sm:text-lg font-semibold mb-3 sm:mb-4",children:"Select Inventory Input Method"}),i.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4",children:[i.jsx("button",{onClick:()=>h("manual"),className:`px-3 py-3 sm:py-2 rounded border transition min-h-[48px] touch-target flex items-center justify-center ${f==="manual"?"bg-emerald-500 text-slate-900 border-emerald-400":"bg-white/10 border-white/20 text-white hover:bg-white/15 active:bg-white/20"}`,children:"ðŸ“ Manual Entry"}),i.jsx("button",{onClick:()=>h("ocr"),className:`px-3 py-3 sm:py-2 rounded border transition min-h-[48px] touch-target flex items-center justify-center ${f==="ocr"?"bg-emerald-500 text-slate-900 border-emerald-400":"bg-white/10 border-white/20 text-white hover:bg-white/15 active:bg-white/20"}`,children:"ðŸ–¼ï¸ OCR Upload"}),i.jsx("button",{onClick:()=>h("ai"),className:`px-3 py-3 sm:py-2 rounded border transition min-h-[48px] touch-target flex items-center justify-center ${f==="ai"?"bg-emerald-500 text-slate-900 border-emerald-400":"bg-white/10 border-white/20 text-white hover:bg-white/15 active:bg-white/20"}`,children:"ðŸ¤– AI-Based"})]}),i.jsxs("div",{className:"mt-4",children:[f==="manual"&&l?.userId&&i.jsx(zw,{userId:l.userId}),f==="ocr"&&l?.userId&&i.jsx(Vw,{userId:l.userId}),f==="ai"&&l?.userId&&i.jsx(Ww,{userId:l.userId})]})]}),d==="view"&&l?.userId&&i.jsx(Hw,{userId:l.userId}),d==="group"&&i.jsx("div",{children:"ðŸ§© Group Items Component Placeholder"}),d==="lowstock"&&i.jsx("div",{children:"ðŸš¨ Low Stock Alert Component Placeholder"})]}),r==="analytics"&&i.jsx(KF,{}),r==="aiForecast"&&i.jsx(i6,{}),r==="distributors"&&i.jsxs("div",{children:[i.jsxs("div",{className:"flex flex-wrap gap-2 sm:gap-4 mb-3 sm:mb-4",children:[i.jsxs("button",{onClick:()=>w("search"),className:`px-3 sm:px-4 py-3 sm:py-2 rounded transition text-sm sm:text-base min-h-[48px] touch-target flex items-center justify-center ${v==="search"?"bg-emerald-500 text-slate-900":"bg-white/10 text-white hover:bg-white/15 active:bg-white/20"}`,children:["ðŸ” ",e("retailer.searchDistributor")]}),i.jsxs("button",{onClick:()=>w("sent"),className:`px-3 sm:px-4 py-3 sm:py-2 rounded transition text-sm sm:text-base min-h-[48px] touch-target flex items-center justify-center ${v==="sent"?"bg-emerald-500 text-slate-900":"bg-white/10 text-white hover:bg-white/15 active:bg-white/20"}`,children:["ðŸ“¤ ",e("retailer.sentRequests")]}),i.jsxs("button",{onClick:()=>w("connected"),className:`px-3 sm:px-4 py-3 sm:py-2 rounded transition text-sm sm:text-base min-h-[48px] touch-target flex items-center justify-center ${v==="connected"?"bg-emerald-500 text-slate-900":"bg-white/10 text-white hover:bg-white/15 active:bg-white/20"}`,children:["ðŸ¤ ",e("retailer.connected")]})]}),v==="search"&&i.jsx(n6,{}),v==="sent"&&i.jsx(a6,{}),v==="connected"&&(s?i.jsx(Nw,{distributor:s,onBack:()=>o(null)}):i.jsx(e6,{onSelectDistributor:o}))]}),r==="customers"&&i.jsx(kj,{}),r==="employees"&&i.jsx(r1,{}),r==="profile"&&i.jsx(Bw,{})]},r)]})},a)})]})]})},kB=()=>i.jsx(L1,{children:i.jsx(c6,{})});export{kB as default};
