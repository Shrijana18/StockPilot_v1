import{j as e}from"./index-DRC3F7i0.js";import{r as a,R as F}from"./router-BPBaD_i0.js";const i=F.forwardRef(({id:l,label:s,value:c,onChange:o,onBlur:d,placeholder:g,helper:p,type:h="text",as:u="input",rows:m=3},y)=>{const x=u==="textarea"?"textarea":"input";return e.jsxs("div",{className:"relative w-full",children:[e.jsx(x,{id:l,ref:y,value:c,onChange:o,onBlur:d,placeholder:" ",rows:u==="textarea"?m:void 0,type:u==="textarea"?void 0:h,className:"peer w-full rounded-xl bg-white/10 text-white placeholder-transparent border border-white/15 focus:border-cyan-400 focus:ring-1 focus:ring-cyan-400 px-3 pt-5 pb-2 outline-none transition-colors",autoComplete:"off"}),e.jsx("label",{htmlFor:l,className:"absolute left-3 top-2 text-white/70 text-sm cursor-text transition-all peer-placeholder-shown:top-3.5 peer-placeholder-shown:text-base peer-placeholder-shown:text-white/40 peer-focus:top-2 peer-focus:text-sm peer-focus:text-cyan-400",children:s}),p&&e.jsx("p",{className:"mt-1 text-xs text-white/50 select-none",children:p})]})});i.displayName="Field";const P=[{label:"Brand & Category"},{label:"Product Types & Quantity"},{label:"Optional Details"}],L=({step:l=0})=>{const s=["Understanding brand","Finding SKUs","Pricing","Taxes & HSN","Building items"],c=(l+1)/s.length*100;return e.jsxs("div",{className:"mt-4 select-none","aria-hidden":!0,children:[e.jsx("div",{className:"flex justify-center gap-4 text-xs text-white/70 mb-2",children:s.map((o,d)=>e.jsx("span",{className:`${d===l?"text-emerald-300":""}`,children:o},o))}),e.jsx("div",{className:"h-1.5 w-full bg-white/10 rounded",children:e.jsx("div",{className:"h-1.5 bg-gradient-to-r from-emerald-400 via-cyan-300 to-blue-400 rounded transition-all",style:{width:`${c}%`}})})]})},q=({onGenerate:l})=>{const[s,c]=a.useState(""),[o,d]=a.useState(""),[g,p]=a.useState(""),[h,u]=a.useState("20"),[m,y]=a.useState(""),[x,C]=a.useState(""),[N,k]=a.useState(""),[B,K]=a.useState(""),[b,R]=a.useState(!1),[r,f]=a.useState(0),[w,T]=a.useState(!1),[j,z]=a.useState(!1),[D,$]=a.useState(0),I=a.useRef(null),v=a.useRef(null),M=a.useRef(null),S=a.useRef(null),A=a.useCallback(()=>{const t=s.trim().length>0,n=o.trim().length>0;r===0&&t&&n&&(f(1),setTimeout(()=>S.current?.focus(),0))},[s,o,r]);a.useEffect(()=>{v.current?.focus()},[]),a.useEffect(()=>{if(!b)return;$(0);const t=setInterval(()=>$(n=>(n+1)%5),900);return()=>clearInterval(t)},[b]);const G=a.useCallback(()=>{const t=(I.current?.getBoundingClientRect().top||0)+window.scrollY-24;window.scrollTo({top:t,behavior:"smooth"})},[]),U=(t=h)=>`
CRITICAL: Generate exactly ${t} products. Every product MUST be from the Brand and Category below only. Do NOT include products from other brands or other categories. All rows must have the same Brand and same Category.

Start the response with the following header row exactly:
| Product Name | Brand | Category | SKU | Unit | HSN | GST (%) | Pricing Mode | Base Price | MRP | Cost |

Rules:
- Unit must include both quantity and container type (e.g., "100ml Bottle", "250g Jar", "50ml Tube").
- HSN must be a realistic 4–8 digit Indian code; if unknown, give your best estimate.
- GST (%) must be one of: 0, 5, 12, 18, 28.
- Pricing Mode must be either:
  - "MRP_INCLUSIVE" → MRP includes GST; Base Price may be blank if unknown.
  - "BASE_PLUS_GST" → Base Price excludes GST; MRP may be blank if unknown.
- If Pricing Mode = MRP_INCLUSIVE and MRP is present but Base Price missing → leave Base Price blank.
- If Pricing Mode = BASE_PLUS_GST and Base Price present but MRP missing → leave MRP blank.
- Cost can be approximate or blank.
- No text above or below the table.

Brand: ${s}
Category: ${o}
Known product types/variants (use these to diversify SKUs within the same brand and category): ${g||"any variants within the category"}
SKU Pattern: ${x}
Region Context: ${N}
Additional Notes: ${m}
`.trim(),E=async()=>{if(!s||!o){alert("Please enter Brand Name and Product Category.");return}G(),R(!0);const t={prompt:B.trim()||U(),brandName:s,category:o,knownTypes:g,quantity:h,description:m,skuHint:x,regionNote:N};try{await l(t)}finally{R(!1)}},H=t=>{if((t.metaKey||t.ctrlKey)&&t.key==="Enter")t.preventDefault(),E();else if(t.key==="Enter")if(t.preventDefault(),r===0){if(!s.trim()){v.current?.focus();return}if(!o.trim()){M.current?.focus();return}f(1),setTimeout(()=>S.current?.focus(),0)}else r<P.length-1&&f(r+1)},_=()=>{c(""),d(""),p(""),u("20"),y(""),C(""),k(""),K(""),f(0),T(!1),v.current?.focus()};return e.jsxs("section",{ref:I,onKeyDown:H,className:"relative max-w-3xl mx-auto w-full px-4 sm:px-6 lg:px-8",children:[e.jsx("nav",{"aria-label":"Progress",className:"mb-6",children:e.jsx("ol",{className:"flex justify-between border border-white/20 rounded-full overflow-hidden",children:P.map((t,n)=>e.jsxs("li",{className:`relative flex-1 flex items-center justify-center py-2 text-sm font-semibold cursor-pointer select-none
                ${n===r?"bg-cyan-500 text-slate-900":n<r?"bg-cyan-400/70 text-slate-900":"text-white/60 bg-white/5"}
                transition-colors`,onClick:()=>f(n),children:[t.label,n<P.length-1&&e.jsx("span",{"aria-hidden":"true",className:`absolute right-0 top-1/2 -translate-y-1/2 w-4 h-0.5 bg-white/30 ${n<r?"bg-cyan-400":""}`})]},t.label))})}),e.jsxs("div",{className:"relative bg-white/5 backdrop-blur-xl rounded-3xl shadow-lg p-8 min-h-[360px] flex flex-col",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx("div",{"aria-hidden":r!==0,className:`absolute inset-0 transition-all duration-500 ease-in-out ${r===0?"opacity-100 z-10 translate-y-0":"opacity-0 pointer-events-none z-0 translate-y-2"}`,children:e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsx(i,{id:"brandName",label:"Brand Name",value:s,onChange:t=>c(t.target.value),placeholder:"Brand Name",helper:"The manufacturer or brand family.",ref:v,onBlur:A}),e.jsx(i,{id:"category",label:"Product Category",value:o,onChange:t=>d(t.target.value),placeholder:"Product Category",helper:"Broad category for the items.",ref:M,onBlur:A})]})}),e.jsx("div",{"aria-hidden":r!==1,className:`absolute inset-0 transition-all duration-500 ease-in-out ${r===1?"opacity-100 z-10 translate-y-0":"opacity-0 pointer-events-none z-0 translate-y-2"}`,children:e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsx(i,{id:"productTypes",label:"Known Product Types",value:g,onChange:t=>p(t.target.value),placeholder:"e.g., Front Load, Cream Biscuit",helper:"Comma-separated types help AI diversify SKUs.",ref:S}),e.jsxs("div",{className:"relative w-full",children:[e.jsx("input",{id:"quantity",type:"number",min:6,max:50,value:h,onChange:t=>u(t.target.value),placeholder:" ",className:"peer w-full rounded-xl bg-white/10 text-white placeholder-transparent border border-white/20 focus:border-cyan-400 focus:ring-1 focus:ring-cyan-400 px-3 pt-5 pb-2 outline-none transition-colors [appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none"}),e.jsx("label",{htmlFor:"quantity",className:"absolute left-3 top-2 text-white/70 text-sm cursor-pointer transition-all peer-focus:top-2 peer-focus:text-sm peer-focus:text-cyan-400 peer-placeholder-shown:top-3.5 peer-placeholder-shown:text-base peer-placeholder-shown:text-white/40",children:"Quantity of Products"}),e.jsx("p",{className:"mt-1 text-xs text-white/50 select-none",children:"How many rows the AI should return (6–50). Enter any number."})]})]})}),e.jsxs("div",{"aria-hidden":r!==2,className:`absolute inset-0 transition-all duration-500 ease-in-out ${r===2?"opacity-100 z-10 translate-y-0":"opacity-0 pointer-events-none z-0 translate-y-2"} flex flex-col`,children:[e.jsx("button",{type:"button",onClick:()=>T(!w),className:"mb-4 self-start px-4 py-2 rounded-full border border-white/20 text-white/70 hover:bg-white/10 transition select-none","aria-expanded":w,"aria-controls":"optional-details",children:w?"Hide Optional Details":"Show Optional Details"}),e.jsxs("div",{id:"optional-details",className:`overflow-hidden transition-[max-height,opacity] duration-500 ease-in-out ${w?"max-h-[1000px] opacity-100":"max-h-0 opacity-0"}`,children:[e.jsx(i,{id:"description",label:"Brand Description (optional)",value:m,onChange:t=>y(t.target.value),placeholder:"Short context about brand, lines, audience…",helper:"Any marketing or positioning hints.",as:"textarea",rows:3}),e.jsx(i,{id:"skuHint",label:"SKU Pattern (optional)",value:x,onChange:t=>C(t.target.value),placeholder:"e.g., RL-TEA-*, SMG-WM-*",helper:"Let AI follow your SKU conventions."}),e.jsx(i,{id:"regionNote",label:"Region Context (optional)",value:N,onChange:t=>k(t.target.value),placeholder:"e.g., Popular only in Gujarat",helper:"Helps AI localize HSN & pricing expectations."})]})]})]}),e.jsxs("div",{className:"mt-6",children:[b?e.jsxs("div",{className:"w-full rounded-2xl border border-white/10 bg-slate-900/70 p-5 backdrop-blur-md",children:[e.jsx("div",{className:"mx-auto w-64 h-16 relative",children:Array.from({length:20}).map((t,n)=>e.jsx("span",{className:"absolute bottom-0 w-2 bg-emerald-400/80 rounded-t origin-bottom animate-[bar_1.6s_ease-in-out_infinite]",style:{left:`${n*12}px`,height:`${8+Math.random()*64}px`,animationDelay:`${n*60}ms`}},n))}),e.jsx("div",{className:"mt-3 text-center text-emerald-200 font-medium","aria-live":"polite",children:"Creating inventory…"}),e.jsx(L,{step:D})]}):e.jsxs("button",{type:"button",onClick:E,className:"w-full inline-flex items-center justify-center gap-2 px-5 py-3 rounded-xl bg-gradient-to-r from-cyan-400 to-blue-400 text-slate-900 font-semibold shadow-lg hover:shadow-cyan-500/30 active:scale-[0.99] transition",children:[e.jsx("span",{"aria-hidden":!0,children:"✨"}),"Magic Generate"]}),e.jsx("button",{type:"button",onClick:_,className:"mt-3 w-full px-5 py-3 rounded-xl border border-white/20 text-white/70 hover:bg-white/10 transition select-none",disabled:b,children:"Reset"})]})]}),e.jsx("div",{className:"fixed bottom-6 right-6 z-50",children:e.jsxs("button",{type:"button",onClick:()=>z(t=>!t),className:"flex items-center gap-2 px-4 py-2 rounded-full bg-white/10 text-white/90 hover:bg-white/20 backdrop-blur-sm transition select-none","aria-expanded":j,"aria-controls":"prompt-preview-panel",children:[e.jsx("span",{className:"text-xl",children:"✨"})," ",j?"Hide AI Prompt":"Show AI Prompt"]})}),j&&e.jsx("aside",{id:"prompt-preview-panel",className:"fixed top-20 right-6 bottom-6 w-[360px] bg-slate-950/90 backdrop-blur-lg rounded-3xl p-4 shadow-lg overflow-auto text-emerald-200 font-mono text-xs leading-relaxed z-40",children:e.jsx("textarea",{readOnly:!0,value:B.trim()||U(),className:"w-full h-full bg-transparent resize-none border-none outline-none text-emerald-300"})}),b&&e.jsx("div",{className:"pointer-events-none fixed inset-0 z-[60] grid place-items-center bg-black/40",children:e.jsx("div",{className:"rounded-2xl px-6 py-5 bg-slate-900/80 border border-white/10 shadow-2xl",children:e.jsxs("div",{className:"flex items-center gap-3 text-cyan-200",children:[e.jsx("span",{className:"h-4 w-4 rounded-full border-2 border-cyan-300 border-t-transparent animate-spin"}),e.jsx("span",{className:"font-semibold",children:"Creating inventory…"})]})})}),e.jsx("div",{className:"pointer-events-none absolute inset-0 -z-10 overflow-hidden rounded-3xl",children:Array.from({length:18}).map((t,n)=>e.jsx("span",{className:"absolute block w-1 h-1 bg-cyan-300/30 rounded-full animate-twinkle",style:{left:`${Math.random()*100}%`,top:`${Math.random()*100}%`,animationDelay:`${n*.6}s`}},n))}),e.jsx("style",{children:`
        @keyframes bar { 0%,100%{transform:scaleY(.3)} 50%{transform:scaleY(1)} }
        @keyframes twinkle { 0%,100%{opacity:.2; transform:translateY(0)} 50%{opacity:.9; transform:translateY(-1px)} }
        .animate-twinkle{ animation: twinkle 3.6s ease-in-out infinite; }
      `})]})};export{q as A};
