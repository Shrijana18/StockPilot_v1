import{l as i,d as g}from"./index-DRC3F7i0.js";import{c as u,b as y,s as h}from"./firebase-DWi1MSv1.js";const N=async({productId:s,sku:c,productName:l,brand:d,category:f,previousData:o={},updatedData:n={},action:m="updated",source:a="manual"})=>{const t=i.currentUser?.uid;if(!t||!s)return;const r={};for(const e in n)o[e]!==n[e]&&(r[e]={from:o[e]!==void 0?o[e]:null,to:n[e]!==void 0?n[e]:null});if(Object.keys(r).length!==0)try{const e=u(g,`businesses/${t}/inventoryLogs`);await y(e,{productId:s,sku:c,productName:l||"N/A",brand:d||"N/A",category:f||"N/A",changes:r,action:m,source:a,modifiedAt:h(),modifiedAtISO:new Date().toISOString(),modifiedBy:i.currentUser?.email||"unknown"})}catch(e){console.error("Failed to log inventory change:",e)}};export{N as l};
